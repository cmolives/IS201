/*! BEGIN AuthoringDomain */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoringdomain');var b=ss.mkType(a,'tab.$0',function(cE,cF,cG,cH){this.$f=null;this.$d=null;this.$e=true;this.$g=false;tab.ClientCommand.call(this,'immediately',cE,null,null,null);this.$f=cF;this.$d=cG;this.$e=cH;var cI=this.$f.commandParams;var cJ=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},cI);bH.setCommandParams(cJ,cI);cI['allowDuplicateFieldDropOnFilterShelf']=false;this.enqueueCommand(cJ)},{handleRemoteCommandSuccess:function(cE,cF){tab.ClientCommand.prototype.handleRemoteCommandSuccess.call(this,cE,cF);if(this.$g){return}var cG=cF;if(ss.isNullOrUndefined(cG)||ss.getKeyCount(cG)===0){return}this.$g=true;var cH=this.$f;var cI=this.$f.commandParams;if(ss.keyExists(cG,'dropCommandModel')){var cJ=cG['dropCommandModel'];var cK=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(cJ).get_simpleCommand(),false);if(ss.isValue(cK)){cH=cK;cI=cK.commandParams}}if(ss.keyExists(cG,'fieldEncodings')){cI['fieldEncodings']=cG['fieldEncodings']}else if(ss.keyExists(cG,'fn')){var cL={fn:cG['fn']};cI['fieldEncodings']=JSON.stringify([cL])}bH.setCommandParams(cH,cI);this.enqueueCommand(cH);if(ss.keyExists(cG,'doDropUiAction')&&cG['doDropUiAction']&&this.$d==='filter-shelf'){var cM=cG['fieldEncoding'];var cN=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-default-quick-filter'},null);var cO={};cO['fn']=cM.fn;cO['membershipTarget']='filter';if(this.$e){cO['quantitativeMode']='rel-date'}bH.setCommandParams(cN,cO);this.enqueueCommand(cN)}}});var c=global.tab.AssignCategoricalColorPaletteCmd=ss.mkType(a,'tab.AssignCategoricalColorPaletteCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return c.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'assign-categorical-color-palette'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var d=global.tab.AuthoringLeftAreaExpansionModel=ss.mkType(a,'tab.AuthoringLeftAreaExpansionModel',function(cE){this.$2$1=null;tab.Model.call(this,cE,new tab.PresModelPathItem('sidePaneExpansionState'.toString(),null));this.pm={sidePaneExpansionState:'expanded'}},{add_sidePaneExpansionStateChanged:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_sidePaneExpansionStateChanged:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_notificationId:function(){return'doc:side-pane-expansion-state-changed-event'},get_sidePaneExpansionState:function(){return this.$3().sidePaneExpansionState},$3:function(){return this.pm},onNotify:function(cE,cF){this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var e=global.tab.BuildMainMenuCmd=ss.mkType(a,'tab.BuildMainMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return e.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-main-menu'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'commands')){throw new ss.Exception('missing param DocParams.Commands')}}});var f=global.tab.BuildServerHeaderContextMenuCmd=ss.mkType(a,'tab.BuildServerHeaderContextMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return f.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-server-header-context-menu'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'commands')){throw new ss.Exception('missing param DocParams.Commands')}}});var g=global.tab.BuildShelfItemContextMenuCmd=ss.mkType(a,'tab.BuildShelfItemContextMenuCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return g.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'build-shelf-item-context-menu'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'commands')){throw new ss.Exception('missing param DocParams.Commands')}}});var h=global.tab.CalcApplyResponse=ss.mkType(a,'tab.CalcApplyResponse',function(cE){this.$1=null;this.$0=null;this.$1=cE},{get_resultType:function(){return this.$1},get_errorMessage:function(){return this.$0},set_errorMessage:function(cE){this.$0=cE}},{fromApplyCalculationResult:function(cE,cF){var cG=(_.isString(cE)?cE:cE['calculationApplyResult'.toString()]);var cH=new h(cG);switch(cH.get_resultType()){case'invalid-formula':{cH.set_errorMessage(cF.get_errorSummary());break}case'invalid-caption-for-new-calc':{cH.set_errorMessage(cE['errorString'.toString()]);break}}return cH}});var i=global.tab.CalculationAutoCompleteItemModel=ss.mkType(a,'tab.CalculationAutoCompleteItemModel',function(cE,cF){tab.Model.call(this,cE,new tab.PresModelPathItem('autocompleteItem'.toString(),null));this.swapPresModel(cF)},{$3:function(){return this.pm},get_itemType:function(){return(ss.isValue(this.$3().autocompleteType)?this.$3().autocompleteType:'func')},get_label:function(){return this.$3().label},get_styledLabel:function(){return this.$3().styledLabel},get_iconResource:function(){return this.$3().fieldIconRes},get_tooltip:function(){return this.$3().tooltipText},get_replaceText:function(){return this.$3().replaceText},get_caretIndex:function(){return this.$3().caretIndex}});var j=global.tab.CalculationAutoCompleteModel=ss.mkType(a,'tab.CalculationAutoCompleteModel',function(cE){this.$3=[];tab.Model.call(this,null,new tab.PresModelPathItem('calculationAutocompleteContextMenu'.toString(),null));this.swapPresModel(cE);var cF=cE.autocompleteItemList||[];for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];this.$3.push(new i(this,cH))}},{get_functionTooltip:function(){return this.pm.functionHelp},get_functionHelpPosition:function(){return this.pm.functionHelpIndex},get_calculation:function(){return this.pm.acCalc},get_startIndex:function(){return this.pm.startIndex},get_endIndex:function(){return this.pm.endIndex},get_items:function(){return this.$3}});var k=global.tab.CalculationCommands=ss.mkType(a,'tab.CalculationCommands',null,null,{registerCommandInterceptors:function(){tab.ServerCommands.addCommandInterceptor(k.$2,'tabdoc',{ns:'tabdoc',cmd:'edit-pill'}.cmd);tab.ServerCommands.addCommandInterceptor(k.$3,'tabdoc',{ns:'tabdoc',cmd:'create-calc'}.cmd);tab.ServerCommands.addCommandInterceptor(k.$4,'tabdoc',{ns:'tabdoc',cmd:'edit-calc'}.cmd);tab.ServerCommands.addCommandInterceptor(k.$5,'tabdoc',{ns:'tabdoc',cmd:'edit-copy-calc'}.cmd)},$3:function(cE){if(ss.keyExists(cE.commandParams,'fn')){k.createCalculation(cE.commandParams['datasource'],cE.commandParams['fn'])}else{k.createCalculation(cE.commandParams['datasource'],null)}return 1},$4:function(cE){k.editCalculation(cE.commandParams['fn'],{ns:'tabdoc',cmd:'edit-calc'});return 1},$5:function(cE){k.editCalculation(cE.commandParams['fn'],{ns:'tabdoc',cmd:'edit-copy-calc'});return 1},$2:function(cE){var cF=cE.commandParams;k.editPill(cF['fn'],cF['shelfType'],parseInt(cF['shelfPosIndex']),parseInt(cF['paneSpec']));return 1},createCalculation:function(cE,cF){var cG={};cG['datasource']=cE;if(ss.isValue(cF)){cG['fn']=cF}var cH=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-calc'},cG);tab.CommandController.SendCommand(new tab.ClientCommand('immediately',ss.mkdel(this,function(cI){var cJ={datasource:cE,pendingCalcName:'__temporary calc name__'};k.$0(cI,cJ,'doc:calculation-dialog-event'.toString())}),cH,null,null))},editCalculation:function(cE,cF){var cG={};cG['fn']=cE;var cH=tab.CommandUtils.newCommand(cF,cG);var cI='';var cJ='';var cK=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findDataSourceFromGlobalFieldName(cE);if(ss.isValue(cK)){cJ=cK.get_name();var cL=cK.findField(cE);if(ss.isValue(cL)){cI=cL.get_displayName()}}tab.CommandController.SendCommand(new tab.ClientCommand('immediately',ss.mkdel(this,function(cM){var cN={fn:cE,calculationCaption:cI,datasource:cJ,pendingCalcName:'__temporary calc name__'};k.$0(cM,cN,'doc:calculation-dialog-event'.toString())}),cH,null,null))},editPill:function(cE,cF,cG,cH){var cI={};cI['fn']=cE;cI['paneSpec']=cH;cI['shelfType']=cF;cI['shelfPosIndex']=cG;var cJ=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'edit-pill'},cI);return k.$6(cF,cJ,k.$1(cF,cG,cH))},createAdHocCalculation:function(cE,cF,cG,cH){if(ss.isNullOrEmptyString(cE)){return $.Deferred()}var cI={};cI['datasource']=cE;cI['paneSpec']=cH;cI['shelfType']=cF;cI['shelfPosIndex']=cG;var cJ=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'create-type-in-pill'},cI);return k.$6(cF,cJ,k.$1(cF,cG,cH))},$1:function(cE,cF,cG){return ss.mkdel(this,function(cH){var cI={datasource:'__fake ds name__',pendingCalcName:'__temporary calc name__',shelfType:cE,shelfPosIndex:cF,paneSpec:cG};k.$0(cH,cI,'doc:type-in-pill-event'.toString())})},$6:function(cE,cF,cG){var cH=$.Deferred();if(!k.isValidShelfForCalcs(cE)){return cH.reject()}tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cG,cF,function(cI){var cJ=cI;cH.resolve(ss.isValue(cJ)&&(ss.isNullOrUndefined(cJ.valid)||cJ.valid))},function(cI){cH.reject()}));return cH},requestAutoCompleteInfo:function(cE,cF,cG){var cH=$.Deferred();var cI=new tab.CalculationAutoCompleteCmd;cI.c['acSubstring']=cF;cI.c['position']=cG|0;cI.c['calculation']={datasource:cE.get_dataSourceName(),fn:cE.get_fieldName(),calculationContext:cE.get_calculationContext(),useParameters:cE.get_useParameters(),joinOnCalcInfo:cE.get_joinOnCalcInfoPresModel()};cI.set_noExceptionDialog(true);cI.invoke().done(function(cJ){cH.resolve(new j(cJ.calculationAutocompleteContextMenu))}).fail(function(cJ){cH.reject()});return cH.promise()},applyCalculation:function(cE,cF,cG,cH,cI){var cJ=$.Deferred();var cK={};var cL;if(cE.get_isAdhoc()){cL={ns:'tabdoc',cmd:'apply-type-in-pill'};cK['datasource']=cE.get_dataSourceName();cK['updatedCalculationFormula']=cG;cK['isFullStyling']=true;cK['isTypeinFinished']=cI}else{cL={ns:'tabdoc',cmd:'apply-calculation'};cK['updatedCalculationCaption']=cF;cK['updatedCalculationFormula']=cG;cK['isFullStyling']=true}var cM=ss.mkdel(this,function(cN){if(cE.get_isAdhoc()&&cI){var cO={calculationCaption:null,pendingCalcName:null,datasource:null};k.$0(cN,cO,'doc:type-in-pill-event'.toString())}});tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cM,tab.CommandUtils.newCommand(cL,cK),function(cN){cJ.resolve(h.fromApplyCalculationResult(cN,cE))},function(cN){cJ.reject()}));return cJ},cancelCalculation:function(cE){var cF=null;if(cE.get_isAdhoc()){cF={};cF['isTypeInPill']=true}var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'clear-calculation-model'},cF);tab.CommandController.SendCommand(new tab.ClientCommand('none',ss.mkdel(this,function(cH){var cI={calculationCaption:null,pendingCalcName:null,datasource:null};k.$0(cH,cI,(cE.get_isAdhoc()?'doc:type-in-pill-event'.toString():'doc:calculation-dialog-event'.toString()))}),cG,null,null))},validateCalculation:function(cE,cF,cG){var cH=$.Deferred();var cI;var cJ={};cJ['updatedCalculationFormula']=cG;cJ['isFullStyling']=true;if(cE.get_isAdhoc()){cI={ns:'tabdoc',cmd:'validate-type-in-pill'};cJ['datasource']=cE.get_dataSourceName()}else{cI={ns:'tabdoc',cmd:'validate-formula'};cJ['updatedCalculationCaption']=cF}tab.CommandController.SendCommand(new tab.RemoteClientCommand(tab.CommandUtils.newCommand(cI,cJ),'none',function(cK){cH.resolve()},function(cK){cH.reject()}));return cH.promise()},startDraggingText:function(cE){var cF=$.Deferred();var cG={};cG['sheet']=tsConfig.current_sheet_name;cG['isRightDrag']=false;cG['text']=cE;tab.CommandController.SendCommand(new tab.RemoteClientCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-pres-model-for-text'},cG),'none',function(cH){cF.resolve(cH)},function(cH){cF.reject()}));return cF},dropOnCalcEditor:function(cE,cF,cG,cH,cI,cJ){var cK=$.Deferred();var cL={};cL['fieldVector']=cE;cL['calcEditorDropPos']=cF;cL['dragSource']=cG;if(ss.isValue(cH)){cL['calcEditorTextSelection']=cH}cL['isFullStyling']=true;cL['calculationContext']=cI;if(ss.isValue(cJ)){cL['text']=cJ}var cM=new tab.RemoteClientCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-on-calc-editor'},cL),'immediately',function(cN){cK.resolve(cN)},function(cN){cK.reject()});tab.CommandController.SendCommand(cM);return cK.promise()},insertFunctionInFormula:function(cE,cF,cG){var cH=$.Deferred();if(ss.isNullOrUndefined(cG)||ss.isNullOrUndefined(cE)){return cH.reject()}var cI={};cI['expressionFunc']=cE;cI['calculationFormula']=cF;cI['selectionStart']=cG.calcEditorTextSelectionStartPos;cI['selectionEnd']=cG.calcEditorTextSelectionEndPos;var cJ=new tab.RemoteClientCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'insert-function-in-formula'},cI),'immediately',function(cK){cH.resolve(cK)},function(cK){cH.reject()});tab.CommandController.SendCommand(cJ);return cH.promise()},isValidShelfForCalcs:function(cE){return cE==='columns-shelf'||cE==='rows-shelf'||cE==='encoding-shelf'||cE==='measures-shelf'},$0:function(cE,cF,cG){var cH={};cH['genCalculationPresModel']=cF;var cI=cH;var cJ={keyId:cG,presModelHolder:cI};var cK=new Array(1);cK[0]=cJ;var cL=cE.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);cL.presentationLayerNotification=cK}});var l=global.tab.CategoricalColorEditorDialogModel=ss.mkType(a,'tab.CategoricalColorEditorDialogModel',function(cE){this.$2$1=null;tab.Model.call(this,cE,new tab.PresModelPathItem('doc:web-categorical-color-dialog-event'.toString(),null))},{add_showOrUpdateDialog:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_showOrUpdateDialog:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_notificationId:function(){return'doc:web-categorical-color-dialog-event'},get_fieldDisplayNames:function(){return this.$3().categoricalColorDialog.fieldDisplayNames},get_itemColors:function(){return this.$3().categoricalColorDialog.colorLegend.colorLegendItems},get_availablePalettes:function(){return this.$3().categoricalColorDialog.categoricalColorEncoding.colorPalettes},get_currentPaletteIndex:function(){return this.$3().categoricalColorDialog.paletteIndex},get_selectedLegendItemIndexes:function(){return this.$3().categoricalColorDialog.itemIndices},get_controllerId:function(){return this.$3().categoricalColorDialog.componentId},$3:function(){return this.pm},onNotify:function(cE,cF){this.swapPresModel(cE);this.raiseEvent(this.$2$1,cF)}});var m=global.tab.ChangeLineInterpolationCmd=ss.mkType(a,'tab.ChangeLineInterpolationCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return m.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-line-interpolation'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var n=global.tab.CloseAuthoringCmd=ss.mkType(a,'tab.CloseAuthoringCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return n.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var o=global.tab.CloseDataSourceErrorDialogModel=ss.mkType(a,'tab.CloseDataSourceErrorDialogModel',function(cE){this.$2$1=null;tab.Model.call(this,cE,new tab.PresModelPathItem('doc:close-data-source-error-dialog-event'.toString(),null))},{add_newError:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_newError:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_sheetNames:function(){return this.$3().sheetNames},get_dataSourceName:function(){return this.$3().datasource},get_notificationId:function(){return'doc:close-data-source-error-dialog-event'},$3:function(){return this.pm},onNotify:function(cE,cF){this.swapPresModel(cE);if(this.$3().needsCloseDsErrorPrompt){this.raiseEvent(this.$2$1,cF)}}});var p=global.tab.CloseMapLayersPaneCmd=ss.mkType(a,'tab.CloseMapLayersPaneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return p.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-map-layers-pane'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var q=global.tab.CloseRefLineEditorCmd=ss.mkType(a,'tab.CloseRefLineEditorCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return q.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-ref-line-editor'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var r=global.tab.CommandBuilder=ss.mkType(a,'tab.CommandBuilder',function(cE){this.$1$1=null;this.set_command(cE)},{get_command:function(){return this.$1$1},set_command:function(cE){this.$1$1=cE},addParameter:function(cE,cF){if(ss.isNullOrUndefined(this.get_command().commandParams)){this.get_command().commandParams=ss.mkdict([cE,cF])}else{this.get_command().commandParams[cE]=cF}},toCommandAction$2:function(cE){return function(cF,cG,cH,cI){return ss.mkdel(this,function(cJ){var cK=cG(cJ);this.addParameter(cF,cK);tab.ServerCommands.executeServerCommand(this.get_command(),cH,cI,null)})}},toCommandAction$1:function(cE){return ss.mkdel(this,function(){tab.ServerCommands.executeServerCommand(this.get_command(),cE,null,null)})},toCommandAction:function(){return this.toCommandAction$1('immediately')}});var s=global.tab.DashboardZoneCommands=ss.mkType(a,'tab.DashboardZoneCommands',null,null,{moveZone:function(cE,cF,cG,cH,cI,cJ,cK){var cL=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone'},null);cL.commandParams={};cL.commandParams['zoneId']=cE;cL.commandParams['addAsFloating']=cI;cL.commandParams['dashboard']=tsConfig.current_sheet_name;cL.commandParams['dropLocation']={x:cF.x|0,y:cF.y|0};cL.commandParams['grabLocation']={x:cG.x|0,y:cG.y|0};var cM=$.Deferred();var cN=null;if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){cN=tab.ResponsiveZonePreviewGenerator.getInstance().generateMovePreview(cE,cH,cJ,cK)}tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cN,cL,function(cO){cM.resolve(cO)},function(cO){cM.reject()}));return cM.promise()},$0:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone'},null);cG.commandParams={};cG.commandParams['dashboard']=tsConfig.current_sheet_name;cG.commandParams['addAsFloating']=cF;var cH=new Array(cE.length);for(var cI=0;cI<cE.length;cI++){cH[cI]=cE[cI].get_zoneId()}cG.commandParams['zoneIds']=cH;cG.commandParams['zoneId']=cH[0];return cG},moveZones:function(cE,cF,cG){var cH=s.$0(cE,cG);cH.commandParams['moveOffset']={x:cF.x|0,y:cF.y|0};var cI=tab.CommandController.SendCommandWithDeferredReturn(cH,'immediately');cI.always(function(){for(var cJ=0;cJ<cE.length;cJ++){var cK=cE[cJ];cK.set_blockLocalReset(false);tab.Model.nonWorldUpdate(ss.mkdel(cK,cK.resetZoneAndChildrenLocalChanges))}});return cI},moveZones$1:function(cE,cF,cG,cH){var cI=s.$0(cE,cH);cI.commandParams['grabLocation']={x:cF.x|0,y:cF.y|0};cI.commandParams['dropLocation']={x:cG.x|0,y:cG.y|0};var cJ=tab.CommandController.SendCommandWithDeferredReturn(cI,'immediately');cJ.always(function(){for(var cK=0;cK<cE.length;cK++){var cL=cE[cK];tab.Model.nonWorldUpdate(ss.mkdel(cL,cL.resetZoneAndChildrenLocalChanges))}});return cJ},hideZone:function(cE){return s.hideZones([cE])},hideZones:function(cE){var cF=null;if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')&&cE.length===1){cF=tab.ResponsiveZonePreviewGenerator.getInstance().generateRemovePreview(cE[0])}var cG=new S;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['zoneIds']=cE;cG.c['zoneId']=cE[0]|0;cG.c['deleteOrphans']=false;cG.set_uiBlocking('immediately');cG.set_localWork(cF);return cG.invoke()},replaceZone:function(cE,cF){var cG=new bq;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['zoneId']=cE|0;cG.c['worksheet']=cF;cG.set_uiBlocking('immediately');return cG.invoke()},selectZoneParent:function(cE){var cF=new bw;cF.c['zoneId']=cE|0;cF.c['dashboard']=tsConfig.current_sheet_name;cF.invoke()},getZoneResizeInfo:function(cE,cF){var cG=new N;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['x']=cE|0;cG.c['y']=cF|0;var cH=cG;return cH.invoke()},resizeTiledZone:function(cE,cF,cG,cH,cI,cJ){var cK=null;if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){cK=tab.ResponsiveZonePreviewGenerator.getInstance().generateMoveEdgePreview(cF,cG,cH,cI)}var cL=new ba;cL.c['zoneEdgePp']=cE;cL.c['zoneId']=cG|0;cL.c['destPix']=cH|0;cL.c['dragHorz']=cI;cL.c['zoneEdgeMoveType']=cJ;cL.set_uiBlocking('immediately');cL.set_localWork(cK);cL.invoke()},resizeFreeFormZone:function(cE,cF,cG,cH,cI){var cJ=null;if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){cJ=tab.ResponsiveZonePreviewGenerator.getInstance().generateResizePreview(cE.get_zoneId(),cF,cG,cH,cI)}var cK=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-free-form-zone'},null);cK.commandParams={};cK.commandParams['dashboard']=tsConfig.current_sheet_name;var cL=(ss.isNullOrUndefined(cE)?0:cE.get_zoneId());cK.commandParams['zoneId']=cL;cK.commandParams['x']=cF|0;cK.commandParams['y']=cG|0;cK.commandParams['w']=cH|0;cK.commandParams['h']=cI|0;var cM=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cJ,cK,function(cN){cM.resolve(cN)},function(cN){cM.reject()}));cM.always(function(){tab.Model.nonWorldUpdate(ss.mkdel(cE,cE.resetZoneAndChildrenLocalChanges))});return cM.promise()},setZoneStyle:function(cE,cF,cG){var cH=new bF;cH.c['zoneId']=cE|0;cH.c['styledBox']=cF;cH.c['dashboard']=cG;cH.set_uiBlocking('immediately');return cH.invoke()},toggleZoneTitle:function(cE){var cF=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-zone-title'},null);cF.commandParams={};cF.commandParams['zoneId']=cE;cF.commandParams['dashboard']=tsConfig.current_sheet_name;tab.CommandController.SendCommand(tab.RemoteClientCommand.create(cF,'immediately',null,null))},toggleFreeFormZone:function(cE){var cF=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-freeform-zone'},null);cF.commandParams={};cF.commandParams['zoneId']=cE;cF.commandParams['dashboard']=tsConfig.current_sheet_name;if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){var cG=tab.ResponsiveZonePreviewGenerator.getInstance().generateToggleFloatingPreview(cE);var cH=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cG,cF,function(cI){cH.resolve()},function(cI){cH.reject()}))}else{tab.CommandController.SendCommand(tab.RemoteClientCommand.create(cF,'immediately',null,null))}},editWebZoneUrl:function(cE,cF){var cG=new H;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['zoneId']=cE|0;cG.c['urlString']=cF;cG.set_uiBlocking('immediately');var cH=cG;cH.invoke()},modifyZoneZOrder:function(cE,cF,cG){var cH=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-zone-z-order'},null);cH.commandParams={};cH.commandParams['zoneId']=cE;cH.commandParams['modifyZoneZOrderType']=cF;if(ss.isValue(cG)){cH.commandParams['position']=cG}tab.CommandController.SendCommand(tab.RemoteClientCommand.create(cH,'immediately',null,null))},setZoneCustomFriendlyName:function(cE,cF,cG,cH){var cI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-custom-friendly-name'},null);cI.commandParams={};cI.commandParams['zoneId']=cE;cI.commandParams['dashboard']=cF;cI.commandParams['zoneFriendlyName']=cG;var cJ=$.Deferred();tab.CommandController.SendCommand(new tab.ClientCommand('immediately',cH,cI,function(cK){cJ.resolve()},function(cK){cJ.reject()}))},setZoneIsFixedSize:function(cE,cF){var cG=new bE;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['zoneId']=cE|0;cG.c['state']=cF;cG.invoke()},moveZoneWithinLayoutTree:function(cE,cF,cG){var cH=2147483647;var cI=new bb;cI.c['dashboard']=tsConfig.current_sheet_name;cI.c['zoneId']=cE|0;var cJ=cI;if(cG!==cH){cJ.c['insertBeforeZoneId']=cG|0}if(cF!==cH){cJ.c['newParentZoneId']=cF|0}return cJ.invoke()}});var t=global.tab.DashboardZoneStyleCommands=ss.mkType(a,'tab.DashboardZoneStyleCommands',null,null,{modifyZoneBorder:function(cE,cF,cG,cH){var cI=new X;cI.c['dashboard']=tsConfig.current_sheet_name;cI.c['zoneId']=cE|0;cI.c['color']=cF;cI.c['w']=cG|0;cI.c['borderStyle']=cH;cI.invoke()},modifyBackgroundShading:function(cE,cF){var cG=new W;cG.c['dashboard']=tsConfig.current_sheet_name;cG.c['zoneId']=cE|0;cG.c['color']=cF;cG.invoke()},modifyMargins:function(cE,cF,cG){var cH=new Y;cH.c['dashboard']=tsConfig.current_sheet_name;cH.c['zoneId']=cE|0;cH.c['areSidesLockedToBeEqual']=cG;cH.c['margin']=cF.margin|0;cH.c['marginLeft']=cF.marginLeft|0;cH.c['marginRight']=cF.marginRight|0;cH.c['marginTop']=cF.marginTop|0;cH.c['marginBottom']=cF.marginBottom|0;cH.invoke()},modifyPadding:function(cE,cF,cG){var cH=new Z;cH.c['dashboard']=tsConfig.current_sheet_name;cH.c['zoneId']=cE|0;cH.c['areSidesLockedToBeEqual']=cG;cH.c['padding']=cF.padding|0;cH.c['paddingLeft']=cF.paddingLeft|0;cH.c['paddingRight']=cF.paddingRight|0;cH.c['paddingTop']=cF.paddingTop|0;cH.c['paddingBottom']=cF.paddingBottom|0;cH.invoke()}});var u=global.tab.DesktopSidePaneSynchronizer=ss.mkType(a,'tab.DesktopSidePaneSynchronizer',null,null,{connectToResizedEvent:function(cE){var cF=tabBootstrap.WorkbookSessionService.get_instance();if(ss.isValue(cF)){cF.registerSidePaneResizedHandler(function(cG){cE.set_width(cG)});cE.add_resizingEnded(u.$0);return new tab.CallOnDispose(function(){cE.remove_resizingEnded(u.$0)})}return new tab.CallOnDispose(function(){})},connectToVisibilityChangedEvent:function(cE){var cF=tabBootstrap.WorkbookSessionService.get_instance();if(ss.isNullOrUndefined(cF)){return}cF.registerSidePaneVisibilityChangedHandler(cE)},$0:function(cE){tabBootstrap.WorkbookSessionService.get_instance().resizeSidePane(cE)}});var v=global.tab.DestroyVQLSessionCmd=ss.mkType(a,'tab.DestroyVQLSessionCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return v.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var w=global.tab.DistributionModel=ss.mkType(a,'tab.DistributionModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;tab.Model.call(this,cE,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_distributionPercentagesModel(new x(this));this.set_distributionPercentilesModel(new y(this));this.set_distributionQuantilesModel(new z(this));this.set_distributionStandardDeviationModel(new A(this))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_distributionPresModel:function(){return this.pm},get_isValid:function(){return this.get_distributionPresModel().valid},get_distributionType:function(){return this.get_distributionPresModel().distributionType},get_refLineId:function(){return this.get_distributionPresModel().refLineId||''},get_visualId:function(){return this.get_distributionPresModel().visualIdPresModel},get_scopeType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineScopeType,'per-pane')},get_labelType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineLabelType,'automatic')},get_tooltipType:function(){return ss.coalesce(this.get_distributionPresModel().referenceLineTooltipType,'automatic')},get_validLabelTypes:function(){return this.$2$2},set_validLabelTypes:function(cE){this.$2$2=cE},get_validTooltipTypes:function(){return this.$2$3},set_validTooltipTypes:function(cE){this.$2$3=cE},get_customLabel:function(){return this.get_distributionPresModel().label||''},get_customTooltip:function(){return this.get_distributionPresModel().tooltipText||''},get_validCustomLabelTags:function(){return this.$2$4},set_validCustomLabelTags:function(cE){this.$2$4=cE},get_formulaGroup:function(){return ss.coalesce(this.get_distributionPresModel().reflineFormulaGroup,'distribution')},get_instantAnalyticsEnabled:function(){return this.get_distributionPresModel().enableInstantAnalytics},get_isInstantAnalyticsAllowed:function(){return this.get_distributionPresModel().instantAnalyticsAllowed},get_isPercentilesAllowed:function(){return this.get_distributionPresModel().percentilesAllowed},get_isQuantilesAllowed:function(){return this.get_distributionPresModel().quantilesAllowed},get_isStandardDeviationAllowed:function(){return this.get_distributionPresModel().standardDeviationAllowed},get_selectedText:function(){return this.get_distributionPresModel().distributionValueString},get_distributionPercentagesModel:function(){return this.$2$5},set_distributionPercentagesModel:function(cE){this.$2$5=cE},get_distributionPercentilesModel:function(){return this.$2$6},set_distributionPercentilesModel:function(cE){this.$2$6=cE},get_distributionQuantilesModel:function(){return this.$2$7},set_distributionQuantilesModel:function(cE){this.$2$7=cE},get_distributionStandardDeviationModel:function(){return this.$2$8},set_distributionStandardDeviationModel:function(cE){this.$2$8=cE},$3:function(cE){this.set_validCustomLabelTags(_.map(cE,function(cF){return cF}))},$4:function(cE){this.set_validLabelTypes(_.map(cE,function(cF){return{key:cF.referenceLineLabelType,value:cF.displayText}}))},$5:function(cE){this.set_validTooltipTypes(_.map(cE,function(cF){return{key:cF.referenceLineTooltipType,value:cF.displayText}}))},update:function(cE,cF){this.$4(cE.validReferenceLineLabelTypes);this.$5(cE.validReferenceLineTooltipTypes);this.$3(cE.validReferenceLineCustomLabelTags);this.get_distributionPercentagesModel().update(cE.distributionPercentages,cE.visualIdPresModel,cE.refLineId,cF);this.get_distributionPercentilesModel().update(cE.distributionPercentiles,cE.visualIdPresModel,cE.refLineId,cF);this.get_distributionQuantilesModel().update(cE.distributionQuantiles,cE.visualIdPresModel,cE.refLineId,cF);this.get_distributionStandardDeviationModel().update(cE.distributionStddev,cE.visualIdPresModel,cE.refLineId,cF);this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var x=global.tab.DistributionPercentagesModel=ss.mkType(a,'tab.DistributionPercentagesModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;tab.Model.call(this,cE,new tab.PresModelPathItem('distributionPercentages'.toString(),null));this.pm={};this.set_fieldPickerCombo(new J(this));this.set_validFormulaTypes([])},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_visualID:function(){return this.$2$2},set_visualID:function(cE){this.$2$2=cE},get_refLineID:function(){return this.$2$3},set_refLineID:function(cE){this.$2$3=cE},get_distributionPercentagesPresModel:function(){return this.pm},get_percentages:function(){return this.get_distributionPercentagesPresModel().percentagesStr},get_validFormulaTypes:function(){return this.$2$4},set_validFormulaTypes:function(cE){this.$2$4=cE},get_formulaType:function(){return ss.coalesce(this.get_distributionPercentagesPresModel().referenceLineFormulaType,'average')},get_formattedConstantValue:function(){return this.get_distributionPercentagesPresModel().formattedValue||''},get_fieldPickerCombo:function(){return this.$2$5},set_fieldPickerCombo:function(cE){this.$2$5=cE},get_isParameterSelected:function(){return this.get_distributionPercentagesPresModel().isParameterSelected},$3:function(cE){var cF=[];if(ss.isNullOrUndefined(cE)){return cF}return cF.concat.apply(cF,cE)},update:function(cE,cF,cG,cH){this.set_visualID(cF);this.set_refLineID(cG);if(ss.isValue(cE)){this.get_fieldPickerCombo().update(cE.fieldPickerCombo,cH);this.set_validFormulaTypes(this.$3(cE.validReferenceLineFormulaTypes))}this.simpleSwapToUpdate(cE,this.$2$1,cH)}});var y=global.tab.DistributionPercentilesModel=ss.mkType(a,'tab.DistributionPercentilesModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,cE,new tab.PresModelPathItem('distributionPercentiles'.toString(),null));this.pm={};this.set_percentileComboModel(new tab.EditValueWidgetModel(this,'distributionPercentilesLevelCombo'))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_visualID:function(){return this.$2$2},set_visualID:function(cE){this.$2$2=cE},get_refLineID:function(){return this.$2$3},set_refLineID:function(cE){this.$2$3=cE},get_percentileComboModel:function(){return this.$2$4},set_percentileComboModel:function(cE){this.$2$4=cE},get_distributionPercentilesPresModel:function(){return this.pm},update:function(cE,cF,cG,cH){this.set_visualID(cF);this.set_refLineID(cG);if(ss.isValue(cE)){this.get_percentileComboModel().update(cE.distributionPercentilesLevelCombo,cH)}this.simpleSwapToUpdate(cE,this.$2$1,cH)}});var z=global.tab.DistributionQuantilesModel=ss.mkType(a,'tab.DistributionQuantilesModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,cE,new tab.PresModelPathItem('distributionQuantiles'.toString(),null));this.pm={};this.set_distributionQuantilesCombo(new tab.EditValueWidgetModel(this,'distributionQuantilesLevelCombo'))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_visualID:function(){return this.$2$2},set_visualID:function(cE){this.$2$2=cE},get_distributionQuantilesCombo:function(){return this.$2$3},set_distributionQuantilesCombo:function(cE){this.$2$3=cE},get_refLineID:function(){return this.$2$4},set_refLineID:function(cE){this.$2$4=cE},get_distributionQuantilesPresModel:function(){return this.pm},update:function(cE,cF,cG,cH){this.set_visualID(cF);this.set_refLineID(cG);if(ss.isValue(cE)){this.get_distributionQuantilesCombo().update(cE.distributionQuantilesLevelCombo,cH)}this.simpleSwapToUpdate(cE,this.$2$1,cH)}});var A=global.tab.DistributionStandardDeviationModel=ss.mkType(a,'tab.DistributionStandardDeviationModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,cE,new tab.PresModelPathItem('distributionStddev'.toString(),null));this.pm={}},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_visualID:function(){return this.$2$2},set_visualID:function(cE){this.$2$2=cE},get_refLineID:function(){return this.$2$3},set_refLineID:function(cE){this.$2$3=cE},get_distributionStandardDeviationPresModel:function(){return this.pm},get_stDevType:function(){return this.get_distributionStandardDeviationPresModel().stdevType},get_factors:function(){return this.get_distributionStandardDeviationPresModel().factorsStr},get_validStDevTypes:function(){return this.$2$4},set_validStDevTypes:function(cE){this.$2$4=cE},update:function(cE,cF,cG,cH){this.set_visualID(cF);this.set_refLineID(cG);this.set_validStDevTypes(_.map(cE.translatedStdevTypes,function(cI){return{key:cI.stdevType,value:cI.displayText}}));this.simpleSwapToUpdate(cE,this.$2$1,cH)}});var B=global.tab.DragToShowMeInfo=ss.mkType(a,'tab.DragToShowMeInfo',function(cE,cF){this.fieldModel=null;this.encodingType=null;this.fieldModel=cE;this.encodingType=cF});var C=global.tab.DragToShowMeInfoWrapper=ss.mkType(a,'tab.DragToShowMeInfoWrapper',function(cE,cF,cG){this.infoList=[];this.isFromDataSchemaPane=false;this.isCopyDrag=false;this.isShiftDrag=false;this.isFromDataSchemaPane=cE;this.isCopyDrag=cF;this.isShiftDrag=cG},{get_allFieldModels:function(){var cE=[];for(var cF=0;cF<this.infoList.length;cF++){var cG=this.infoList[cF];cE.push(cG.fieldModel)}return cE},add:function(cE){this.infoList.push(cE)}});var D=global.tab.DropReferenceLineOnFilterShelfCmd=ss.mkType(a,'tab.DropReferenceLineOnFilterShelfCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return D.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-filter-shelf'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var E=global.tab.DropReferenceLineOnSchemaViewerCmd=ss.mkType(a,'tab.DropReferenceLineOnSchemaViewerCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return E.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-schema-viewer'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var F=global.tab.DropReferenceLineOnShelfCmd=ss.mkType(a,'tab.DropReferenceLineOnShelfCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return F.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-ref-line-on-shelf'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var G=global.tab.EditAxisDialogCommands=ss.mkType(a,'tab.EditAxisDialogCommands',null,null,{getServerAxisContextMenu:function(cE,cF,cG,cH){var cI=new tab.BuildServerAxisContextMenuCmd;cI.c['visualIdPresModel']=cE;cI.c['regionPoint']=tab.PointUtil.toPresModel(cF);cI.c['r']=cG;var cJ=cI;cJ.invoke().then(cH)},getServerHeaderContextMenu:function(cE,cF,cG,cH){var cI=new f;cI.c['visualIdPresModel']=cE;cI.c['regionPoint']=tab.PointUtil.toPresModel(cF);cI.c['r']=cG;var cJ=cI;cJ.invoke().then(cH)},showEditAxisDialogInBrowserRenderedMode:function(cE){var cF=new tab.ShowEditAxisDialogCmd;cF.c['fn']=cE.fn;cF.c['axisOrientation']=cE.axisOrientation;cF.c['duplicateIndex']=cE.duplicateIndex|0;cF.invoke()},showEditAxisDialogInServerRenderedMode:function(cE,cF,cG){var cH=new tab.DoubleClickRegionNoReturnServerCmd;cH.c['visualIdPresModel']=cE;cH.c['regionPoint']=tab.PointUtil.toPresModel(cF);cH.c['r']=cG;cH.invoke()}});var H=global.tab.EditWebZoneUrlCmd=ss.mkType(a,'tab.EditWebZoneUrlCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return H.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'edit-web-zone-url'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var I=global.tab.ExpandedSidePaneWidthModel=ss.mkType(a,'tab.ExpandedSidePaneWidthModel',function(){this.$4=0;this.$2$1=null;this.$2$2=null;tab.Model.call(this,null,null);var cE=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()&&!tsConfig.is_mobile;this.$4=(cE?250:((tabBootstrap.ViewerBootstrap.get_initialAuthoringLeftAreaWidth()>0)?tabBootstrap.ViewerBootstrap.get_initialAuthoringLeftAreaWidth():200))},{add_resized:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_resized:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},add_resizingEnded:function(cE){this.$2$2=ss.delegateCombine(this.$2$2,cE)},remove_resizingEnded:function(cE){this.$2$2=ss.delegateRemove(this.$2$2,cE)},get_width:function(){return this.$4},set_width:function(cE){if(cE===this.get_width()){return}this.$4=cE;this.$3()},resizeEnded:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(this.get_width())}},$3:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this.get_width())}}});var J=global.tab.FieldPickerComboModel=ss.mkType(a,'tab.FieldPickerComboModel',function(cE){this.$2$1=null;tab.Model.call(this,cE,new tab.PresModelPathItem('fieldPickerCombo'.toString(),null))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_fieldPickerComboPresModel:function(){return this.pm},get_selectedField:function(){return this.get_fieldPickerComboPresModel().fn},get_fields:function(){return _.map(this.get_fieldPickerComboPresModel().fieldPickerFields,function(cE){return new K(cE)})},update:function(cE,cF){this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var K=global.tab.FieldPickerFieldModel=ss.mkType(a,'tab.FieldPickerFieldModel',function(cE){this.fieldName=null;this.fieldCaption=null;this.fieldSummary=null;this.isInPrimaryDataSource=false;this.isFieldParameter=false;this.isTableCalc=false;this.fieldName=cE.fn;this.fieldCaption=cE.fieldCaption;this.fieldSummary=cE.fieldSummary;this.isInPrimaryDataSource=cE.isInPrimaryDataSource;this.isFieldParameter=cE.isFieldParameter;this.isTableCalc=cE.isTableCalc});var L=global.tab.FormatCommands=ss.mkType(a,'tab.FormatCommands',null,null,{showFormatPane:function(){tab.FormatContainerModel.get_formatPaneModel().set_isVisible(true)},hideFormatPane:function(){tab.FormatContainerModel.get_formatPaneModel().set_isVisible(false)}});var M=global.tab.GetDensityColorPalettesCmd=ss.mkType(a,'tab.GetDensityColorPalettesCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return M.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-density-color-palettes'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'colorPalettes')){throw new ss.Exception('missing param DocParams.ColorPalettes')}}});var N=global.tab.GetDragZoneResizeCmd=ss.mkType(a,'tab.GetDragZoneResizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return N.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-zone-resize'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var O=global.tab.GetLastPublishedDateForDataSourceCmd=ss.mkType(a,'tab.GetLastPublishedDateForDataSourceCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return O.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-last-published-date-for-data-source'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'repositoryUrl')){throw new ss.Exception('missing param DocParams.RepositoryUrl')}if(!ss.keyExists(cE,'lastPublishedAt')){throw new ss.Exception('missing param DocParams.LastPublishedAt')}}});var P=global.tab.GetRefLineDragInfoCmd=ss.mkType(a,'tab.GetRefLineDragInfoCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return P.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-ref-line-drag-info'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'analyticsObjectDragInfo')){throw new ss.Exception('missing param DocParams.AnalyticsObjectDragInfo')}}});var Q=global.tab.GetRefLineFormulaCmd=ss.mkType(a,'tab.GetRefLineFormulaCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return Q.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-ref-line-formula'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'formula')){throw new ss.Exception('missing param DocParams.Formula')}}});var R=global.tab.GetTrendLineDragInfoCmd=ss.mkType(a,'tab.GetTrendLineDragInfoCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return R.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-trend-line-drag-info'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){if(!ss.keyExists(cE,'analyticsObjectDragInfo')){throw new ss.Exception('missing param DocParams.AnalyticsObjectDragInfo')}}});var S=global.tab.HideZoneCmd=ss.mkType(a,'tab.HideZoneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return S.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'hide-zone'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var T=global.tab.HideZoneWithPreviewCmd=ss.mkType(a,'tab.HideZoneWithPreviewCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return T.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var U=global.tab.LaunchFilterDialogCmd=ss.mkType(a,'tab.LaunchFilterDialogCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return U.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'launch-filter-dialog'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var V=global.tab.MenuBarClientCommands=ss.mkType(a,'tab.MenuBarClientCommands',null,null,{getMainMenu:function(cE,cF){switch(cE){case'file':case'data':case'worksheet':case'dashboard':case'map':case'format':case'window':{var cG=new e;cG.c['isMobile']=tsConfig.is_mobile;cG.c['menuItemId']=cE;cG.c['hasAllowAddNewDatasourceCapability']=tsConfig.allow_add_new_datasource;cG.c['allowSaveDataSource']=tsConfig.allow_save_data_source&&!tsConfig.isPublic;cG.c['isExplainDataAvailable']=tab.ExplainDataUtil.isExplainDataAvailable();var cH=cG;cH.invoke().then(cF);break}default:{break}}},getAnalysisMainMenu:function(cE,cF){var cG=new e;cG.c['menuItemId']='analysis';if(!ss.isNullOrEmptyString(cF)){cG.c['datasource']=cF}cG.invoke().then(cE)}});var W=global.tab.ModifyBackgroundShadingCmd=ss.mkType(a,'tab.ModifyBackgroundShadingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return W.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-background-shading'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var X=global.tab.ModifyBorderCmd=ss.mkType(a,'tab.ModifyBorderCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return X.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-border'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var Y=global.tab.ModifyMarginCmd=ss.mkType(a,'tab.ModifyMarginCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return Y.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-margin'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var Z=global.tab.ModifyPaddingCmd=ss.mkType(a,'tab.ModifyPaddingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return Z.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'modify-padding'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ba=global.tab.MoveDashboardEdgeCmd=ss.mkType(a,'tab.MoveDashboardEdgeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ba.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-dashboard-edge'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bb=global.tab.MoveZoneWithinLayoutTreeCmd=ss.mkType(a,'tab.MoveZoneWithinLayoutTreeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bb.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'move-zone-within-layout-tree'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bc=global.tab.NavigationUtil=ss.mkType(a,'tab.NavigationUtil',null,null,{closeWindowIfOpenedByTableau:function(cE){var cF=tab.WindowHelper.get_windowSelf();var cG=tab.WindowHelper.getOpener(cF);if(ss.isValue(cG)){try{var cH=tab.WindowHelper.getLocation(cG);var cI=tab.VizUriModel.createForCurrentWindowLocation(cG).get_isNlpExplorationPageUri();if(ss.isValue(cH.href)&&!cI){tab.WindowHelper.close(cF)}}catch(cJ){}}},redirectToDataSources:function(cE){var cF=tsConfig.site_root+'/datasources';tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowSelf(),tab.MiscUtil.replaceUriQueryParameters(cF,cE))}});var bd=global.tab.NotificationForwarder=ss.mkType(a,'tab.NotificationForwarder',function(cE){this.$2=[];this.$3=null;this.$1=null;this.$1=cE;tab.ApplicationModel.get_instance().registerNotificationHandler(cE,ss.mkdel(this,this.$0))},{dispose:function(){tab.ApplicationModel.get_instance().unRegisterNotificationHandler(this.$1,ss.mkdel(this,this.$0))},setReceiver:function(cE){tab.Param.verifyValue(cE,'updatedReceiver');this.$3=cE;tab.Model.nonWorldUpdate(ss.mkdel(this,function(cF){for(var cG=0;cG<this.$2.length;cG++){var cH=this.$2[cG];this.$3.onNotify(cH,cF)}this.$2.length=0}))},$0:function(cE,cF){if(ss.isNullOrUndefined(this.$3)){this.$2.push(cE)}else{this.$3.onNotify(cE,cF)}}});var be=global.tab.PaneClientCommands=ss.mkType(a,'tab.PaneClientCommands',null,null,{setPanePrimitive:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-primitive'},null);cG.commandParams=be.$1(cE);cG.commandParams['primitiveType']=cF.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},getDefaultShapeType:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-default-shape'},null);cG.commandParams=be.$1(cE);tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'none',function(cH){cF((_.isString(cH)?tab.ShapeModel.fromString(cH.toString()):null))},function(){cF(null)}))},setDefaultShapeType:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-default-shape'},null);cG.commandParams=be.$1(cE);cG.commandParams['shapeName']=be.$7(cF);if(tab.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var cH=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(cI){be.$5(cI,cF)},cG,null,null);tab.CommandController.SendCommand(cH)}else{tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))}},$5:function(cE,cF){if(ss.isValue(cF.get_palette())&&ss.unbox(cF.get_palette())!=='filled'){return}var cG=tab.SceneDataUtil.convertShapeToNumber(cF);var cH=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);cH.updateRuntimeHandles(cE,3,be.$9(function(cI){cI.DefaultShape=[cG]}))},toggleMarkLabels:function(cE,cF,cG){var cH=be.$0(cE);cH.markLabelsVisibilityChanged=true;var cI=(cF?'mlv-visible':'mlv-hidden');be.$8(cH,cG,cI)},$8:function(cE,cF,cG){cE.markLabelsVisibility=cG;var cH=new ck;cH.c['worksheet']=tsConfig.current_sheet_name;cH.c['markLabelsSpecification']=cE;cH.c['paneSpec']=cF|0;cH.invoke()},updateMarkLabelsMode:function(cE,cF,cG){var cH=be.$0(cE);cH.markLabelsMode=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsScope:function(cE,cF,cG){var cH=be.$0(cE);cH.markLabelsScope=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsMinMaxFieldChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.fn=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsMinMaxStartCheckboxChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.labelMarkMin=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsMinMaxEndCheckboxChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.labelMarkMax=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsLineEndFirstCheckboxChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.labelLineEndFirst=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsLineEndLastCheckboxChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.labelLineEndLast=cG;be.$8(cH,cF,'mlv-use-current')},updateMarkLabelsAllowLabelOverlapCheckboxChanged:function(cE,cF,cG){var cH=be.$0(cE);cH.cullLabels=!cG;be.$8(cH,cF,'mlv-use-current')},$0:function(cE){var cF={markLabelsMode:cE.markLabelsMode,markLabelsScope:cE.markLabelsScope,fn:cE.fieldPickerCombo.fn,labelMarkMin:cE.labelMinimumValueIsChecked,labelMarkMax:cE.labelMaximumValueIsChecked,labelLineEndFirst:cE.labelStartOfLineIsChecked,labelLineEndLast:cE.labelEndOfLineIsChecked,cullLabels:!cE.allowMarksLabelsIsEnabled};return cF},setMarkSize:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-mark-size'},null);cG.commandParams={};cG.commandParams=be.$1(cE);cG.commandParams['markScale']=cF.toString();if(tab.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var cH=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(cI){be.$6(cI,cF)},cG,null,null);tab.CommandController.SendCommand(cH)}else{tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))}},$6:function(cE,cF){var cG=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);cG.updateRuntimeHandles(cE,4,be.$9(function(cH){cH.DefaultSize=[cF]}))},resetTooltip:function(cE){var cF=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-tooltip'},null);cF.commandParams={};cF.commandParams['worksheet']=tsConfig.current_sheet_name;if(ss.isValue(cE)&&cE.get_id()>0){cF.commandParams['paneSpec']=cE.get_id().toString()}tab.CommandController.SendCommand(new tab.RemoteClientCommand(cF,'immediately',null,null))},getDefaultColor:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-default-color'},null);cG.commandParams=be.$1(cE);tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'none',function(cH){cF((_.isString(cH)?tab.ColorModel.fromColorCode(cH.toString()):null))},function(){cF(null)}))},setDefaultColor:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-default-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['defaultColor']=cF.toRgba255();if(tab.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var cH=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(cI){be.$4(cI,cF)},cG,null,null);tab.CommandController.SendCommand(cH)}else{tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))}},$4:function(cE,cF){var cG=cF.toArgbInt();var cH=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);cH.updateRuntimeHandles(cE,2,be.$9(function(cI){cI.DefaultMarkColor=[cG]}))},setSteppedColor:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['steps']=cF.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},reverseColor:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['isReversed']=cF.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},setTotalsInEncoding:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['totalsInclusionValue']=cF.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},setQuantColorPalette:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['colorPaletteId']=cF;tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},setCatColorPalette:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-categorical-color'},null);cG.commandParams=be.$1(cE);cG.commandParams['colorPaletteId']=cF;var cH=true;cG.commandParams['isInstance']=cH.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},setColorAlphaLevel:function(cE,cF){if(isNaN(cF)){return}var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-alpha-level'},null);cG.commandParams=be.$1(cE);cG.commandParams['alphaLevel']=cF.toString();if(tab.FeatureFlags.isEnabled('RuntimeWebAuthoringIU')){var cH=new tab.ClientCommand(((tab.ApplicationModel.get_instance().get_renderMode()==='render-mode-client')?'none':'immediately'),function(cI){be.$3(cI,cF,cE.get_paneDescriptorKeys())},cG,null,null);tab.CommandController.SendCommand(cH)}else{tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))}},$3:function(cE,cF,cG){var cH=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);var cI=ss.trunc(cF);var cJ=function(cK){var cL=$.Deferred();var cM=new tab.RuePacker;for(var cN=0;cN<cG.length;cN++){var cO=cG[cN];cM.addInt32((new tab.LayoutInputStoreKeys).pdMarksData(cO).parameters().alpha().toString(),cI)}tab.RuntimeWebModule.proxy.rueUpdateCommandHex(cK.get_VM(),tab.HexEncoder.encodeBufferToHex(cM.pack())).done(function(cP){cL.resolve(cP)}).fail(function(cP){cL.reject()});return cL};cH.updateRuntimeHandles(cE,0,cJ)},setMarksBorderColor:function(cE,cF,cG,cH){var cI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-border'},null);cI.commandParams={};cI.commandParams['worksheet']=tsConfig.current_sheet_name;cI.commandParams['paneSpec']=cE.get_id().toString();cI.commandParams['color']=cF.toString();cI.commandParams['isAuto']=cG.toString();cI.commandParams['isNone']=cH.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cI,'immediately',null,null))},setMarksHaloColor:function(cE,cF,cG,cH){var cI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'change-halo'},null);cI.commandParams={};cI.commandParams['worksheet']=tsConfig.current_sheet_name;cI.commandParams['paneSpec']=cE.get_id().toString();cI.commandParams['color']=cF.toString();cI.commandParams['isAuto']=cG.toString();cI.commandParams['isNone']=cH.toString();tab.CommandController.SendCommand(new tab.RemoteClientCommand(cI,'immediately',null,null))},setReferenceLineConstantValue:function(cE,cF){var cG=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-reference-line-constant-value'},null);cG.commandParams={};cG.commandParams['constantValue']=cE;cG.commandParams['referenceLineId']=cF;tab.CommandController.SendCommand(new tab.RemoteClientCommand(cG,'immediately',null,null))},setDensityColorEncoding:function(cE,cF){var cG=new by;cG.c['worksheet']=tsConfig.current_sheet_name;cG.c['paneSpec']=cE.get_id()|0;cG.c['densityColorPalette']=cF;cG.invoke()},setDensityKernelSize:function(cE,cF){var cG=new bA;cG.c['worksheet']=tsConfig.current_sheet_name;cG.c['paneSpec']=cE.get_id()|0;cG.c['densityKernelSize']=cF;cG.invoke()},setDensityIntensity:function(cE,cF){var cG=new bz;cG.c['worksheet']=tsConfig.current_sheet_name;cG.c['paneSpec']=cE.get_id()|0;cG.c['densityIntensityPercentage']=cF;cG.invoke()},getHeatmapColorPalettes:function(cE,cF){var cG=function(cJ){cF(cJ.colorPalettes)};var cH=function(cJ){cF([])};var cI=new M;cI.c['worksheet']=tsConfig.current_sheet_name;cI.c['paneSpec']=cE.get_id()|0;cI.invoke().then(cG,cH)},$1:function(cE){var cF={};cF['worksheet']=tsConfig.current_sheet_name;cF['paneSpec']=cE.get_id().toString();return cF},$7:function(cE){if(ss.isNullOrUndefined(cE)){return null}return cE.toString()},$2:function(cE){return cE['PaneStyles']},$9:function(cE){return function(cF){var cG=$.Deferred();tab.RuntimeWebModule.proxy.marshallDatastoreSubKeyHex(cF.get_finalStore(),tab.HexEncoder.encodeBufferToHex(tab.Utf8TextEncoder.encode('PaneStyles'))).done(function(cH){var cI=be.$2(cH);cE(cI);var cJ=tab.PaneStylesTableUtils.toRuePacker('PaneStylesData',cI);tab.RuntimeWebModule.proxy.rueUpdateCommandHex(cF.get_VM(),tab.HexEncoder.encodeBufferToHex(cJ.pack())).done(function(cK){cG.resolve(cK)}).fail(function(cK){cG.reject()})}).fail(function(cH){cG.reject()});return cG}}});var bf=global.tab.PresentationModeAffordanceSet=ss.mkType(a,'tab.PresentationModeAffordanceSet',function(){this.$1=null;tabBootstrap.DisableAffordanceSet.call(this,bf.$1);var cE=tab.ApplicationModel.get_instance();this.$1=cE.modelInstance(bg).call(cE);this.$1.add_changed(ss.mkdel(this,this.raiseAffordanceSetChanged))},{get_isSetEnabled:function(){return this.$1.get_isPresentationMode()}});var bg=global.tab.PresentationModeModel=ss.mkType(a,'tab.PresentationModeModel',function(cE){this.$2$1=null;tab.Model.call(this,cE,new tab.PresModelPathItem('',null));this.pm={isPresentationModeDoc:false}},{add_changed:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_changed:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_isPresentationMode:function(){return tsConfig.is_desktop&&this.pm.isPresentationModeDoc},get_notificationId:function(){return'doc:presentation-mode-changed-event'},onNotify:function(cE,cF){this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var bh=global.tab.QuantitativeColorEditorDialogModel=ss.mkType(a,'tab.QuantitativeColorEditorDialogModel',function(){this.$2$1=null;this.$2$2=null;tab.Model.call(this,null,new tab.PresModelPathItem('doc:web-quantitative-color-dialog-event'.toString(),null))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},add_stopNotifying:function(cE){this.$2$2=ss.delegateCombine(this.$2$2,cE)},remove_stopNotifying:function(cE){this.$2$2=ss.delegateRemove(this.$2$2,cE)},get_notificationId:function(){return'doc:web-quantitative-color-dialog-event'},get_componentID:function(){return this.$3().componentId},get_encodingFields:function(){return ss.arrayClone(this.$3().encodingFieldVector)},get_title:function(){return this.$3().fieldDisplayNames.join(' ')},get_selectedColorPalette:function(){return this.$3().selectedColorPalette},get_colorPalettes:function(){return ss.arrayClone(this.$3().colorPalettes)},get_minColor:function(){return this.$3().color1},get_maxColor:function(){return this.$3().color2},get_rampColors:function(){return this.$3().colorMap},get_isDiverging:function(){return this.$3().isColorDiverging},get_minValue:function(){return this.$3().minLabel},get_maxValue:function(){return this.$3().maxLabel},get_reverse:function(){return this.$3().isReversed},get_stepsEnabled:function(){return this.$3().isColorStepped},get_stepsValue:function(){return this.$3().steps},get_canUseFullColorRange:function(){return this.$3().canUseFullColorRange},get_useFullColorRange:function(){return this.$3().useFullColorRange},get_includeTotalsOptionEnabled:function(){return this.$3().areTotalsUsed},get_includeTotals:function(){return this.$3().totalsInclusionValue==='include-totals'},get_startChecked:function(){return this.$3().useStartValue},get_startValue:function(){return this.$3().formattedStart},get_centerChecked:function(){return this.$3().useCenterValue},get_centerValue:function(){return this.$3().formattedCenter},get_canEnableCenter:function(){return this.$3().canEnableCenter},get_endChecked:function(){return this.$3().useEndValue},get_endValue:function(){return this.$3().formattedEnd},get_canShowAdvancedSettings:function(){return this.$3().canShowAdvancedSettings},$3:function(){return this.pm.quantitativeColorDialog},detachNotifications:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}},onNotify:function(cE,cF){this.swapPresModel(cE);this.raiseEvent(this.$2$1,cF)}});var bi=global.tab.QuickSortAscendingCmd=ss.mkType(a,'tab.QuickSortAscendingCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bi.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bj=global.tab.QuickSortDescendingCmd=ss.mkType(a,'tab.QuickSortDescendingCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bj.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bk=global.tab.ReferenceBandModel=ss.mkType(a,'tab.ReferenceBandModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;tab.Model.call(this,cE,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_fromFieldPickerCombo(new J(this));this.set_toFieldPickerCombo(new J(this));this.set_validFormulaTypes([]);this.set_validPairedFormulaTypes([])},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_refBandPresModel:function(){return this.pm},get_refLineId:function(){return this.get_refBandPresModel().refLineId||''},get_pairedId:function(){return this.get_refBandPresModel().refLinePairedId||''},get_visualId:function(){return this.get_refBandPresModel().visualIdPresModel},get_referenceParam:function(){return this.get_refBandPresModel().referenceParam||''},get_instantAnalyticsEnabled:function(){return this.get_refBandPresModel().enableInstantAnalytics},get_isInstantAnalyticsAllowed:function(){return this.get_refBandPresModel().instantAnalyticsAllowed},get_scopeType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineScopeType,'per-pane')},get_fromLabelType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineLabelType,'automatic')},get_fromTooltipType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineTooltipType,'automatic')},get_toLabelType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineLabelType,'automatic')},get_toTooltipType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineTooltipType,'automatic')},get_fromCustomLabel:function(){return this.get_refBandPresModel().label||''},get_fromCustomTooltip:function(){return this.get_refBandPresModel().tooltipText||''},get_toCustomLabel:function(){return this.get_refBandPresModel().pairedLabel||''},get_toCustomTooltip:function(){return this.get_refBandPresModel().pairedTooltipText||''},get_validFormulaTypes:function(){return this.$2$2},set_validFormulaTypes:function(cE){this.$2$2=cE},get_validPairedFormulaTypes:function(){return this.$2$3},set_validPairedFormulaTypes:function(cE){this.$2$3=cE},get_validLabelTypes:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineLabelTypes)){return cE}var cF=this.get_refBandPresModel().validReferenceLineLabelTypes;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push({key:cH.referenceLineLabelType,value:cH.displayText})}return cE},get_validTooltipTypes:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineTooltipTypes)){return cE}var cF=this.get_refBandPresModel().validReferenceLineTooltipTypes;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push({key:cH.referenceLineTooltipType,value:cH.displayText})}return cE},get_validCustomLabelTags:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refBandPresModel().validReferenceLineCustomLabelTags)){return cE}var cF=this.get_refBandPresModel().validReferenceLineCustomLabelTags;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push(cH)}return cE},get_fromFormulaType:function(){return ss.coalesce(this.get_refBandPresModel().referenceLineFormulaType,'min')},get_toFormulaType:function(){return ss.coalesce(this.get_refBandPresModel().pairedReferenceLineFormulaType,'max')},get_fromFieldPickerCombo:function(){return this.$2$4},set_fromFieldPickerCombo:function(cE){this.$2$4=cE},get_toFieldPickerCombo:function(){return this.$2$5},set_toFieldPickerCombo:function(cE){this.$2$5=cE},get_fromConstantValue:function(){return this.get_refBandPresModel().constantValue||''},get_toConstantValue:function(){return this.get_refBandPresModel().pairedConstantValue||''},get_fromFormattedConstantValue:function(){return this.get_refBandPresModel().formattedValue||''},get_toFormattedConstantValue:function(){return this.get_refBandPresModel().pairedFormattedValue||''},get_isParameterSelectedOnTo:function(){return this.get_refBandPresModel().isParameterSelectedOnTo},get_isParameterSelectedOnFrom:function(){return this.get_refBandPresModel().isParameterSelectedOnFrom},$3:function(cE){var cF=[];if(ss.isNullOrUndefined(cE)){return cF}return cF.concat.apply(cF,cE)},update:function(cE,cF){if(ss.isValue(cE)){this.get_fromFieldPickerCombo().update(cE.fieldPickerCombo,cF);this.get_toFieldPickerCombo().update(cE.pairedFieldPickerCombo,cF);this.set_validFormulaTypes(this.$3(cE.validReferenceLineFormulaTypes));this.set_validPairedFormulaTypes(this.$3(cE.validReferenceLinePairedFormulaTypes))}this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var bl=global.tab.ReferenceLineEditorModel=ss.mkType(a,'tab.ReferenceLineEditorModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;tab.Model.call(this,cE,new tab.PresModelPathItem('referenceLineEditor'.toString(),null));this.pm={};this.set_activeModel(null);this.set_activePane('line');this.set_lineModel(new bm(this));this.set_bandModel(new bk(this));this.set_distributionModel(new w(this))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_activePane:function(){return this.$2$2},set_activePane:function(cE){this.$2$2=cE},get_activeModel:function(){return this.$2$3},set_activeModel:function(cE){this.$2$3=cE},get_lineModel:function(){return this.$2$4},set_lineModel:function(cE){this.$2$4=cE},get_bandModel:function(){return this.$2$5},set_bandModel:function(cE){this.$2$5=cE},get_distributionModel:function(){return this.$2$6},set_distributionModel:function(cE){this.$2$6=cE},get_editorPresModel:function(){return this.pm},get_isEditing:function(){return ss.isValue(this.get_activeModel())},get_notificationId:function(){return'doc:update-ref-line-dialog-event'},onNotify:function(cE,cF){this.update(cE,cF)},update:function(cE,cF){this.swapAndCopyPresModel(cE);this.set_activePane(ss.coalesce(cE.reflineFormulaGroup,this.get_activePane()));switch(this.get_activePane()){case'none':{this.set_activeModel(null);break}case'line':{this.set_activeModel(this.get_lineModel());break}case'band':{this.set_activeModel(this.get_bandModel());break}case'distribution':{this.set_activeModel(this.get_distributionModel());break}default:{break}}this.get_lineModel().update(cE.editReferenceLine,cF);this.get_bandModel().update(cE.editReferenceBand,cF);this.get_distributionModel().update(cE.editDistribution,cF);this.raiseEvent(this.$2$1,cF)}});var bm=global.tab.ReferenceLineModel=ss.mkType(a,'tab.ReferenceLineModel',function(cE){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;tab.Model.call(this,cE,new tab.PresModelPathItem('referenceLine'.toString(),null));this.pm={};this.set_fieldPickerCombo(new J(this));this.set_confidenceLevelCombo(new tab.EditValueWidgetModel(this,'confidenceLevelCombo'))},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},get_refLinePresModel:function(){return this.pm},get_refLineId:function(){return this.get_refLinePresModel().refLineId||''},get_visualId:function(){return this.get_refLinePresModel().visualIdPresModel},get_scopeType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineScopeType,'per-pane')},get_labelType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineLabelType,'automatic')},get_tooltipType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineTooltipType,'automatic')},get_customLabel:function(){return this.get_refLinePresModel().label||''},get_customTooltip:function(){return this.get_refLinePresModel().tooltipText||''},get_formulaType:function(){return ss.coalesce(this.get_refLinePresModel().referenceLineFormulaType,'average')},get_validFormulaTypes:function(){return this.$2$2},set_validFormulaTypes:function(cE){this.$2$2=cE},get_validLabelTypes:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineLabelTypes)){return cE}var cF=this.get_refLinePresModel().validReferenceLineLabelTypes;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push({key:cH.referenceLineLabelType,value:cH.displayText})}return cE},get_validTooltipTypes:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineTooltipTypes)){return cE}var cF=this.get_refLinePresModel().validReferenceLineTooltipTypes;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push({key:cH.referenceLineTooltipType,value:cH.displayText})}return cE},get_validCustomLabelTags:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().validReferenceLineCustomLabelTags)){return cE}var cF=this.get_refLinePresModel().validReferenceLineCustomLabelTags;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push(cH)}return cE},get_fieldPickerCombo:function(){return this.$2$3},set_fieldPickerCombo:function(cE){this.$2$3=cE},get_confidenceLevelCombo:function(){return this.$2$4},set_confidenceLevelCombo:function(cE){this.$2$4=cE},get_formattedConstantValue:function(){return this.get_refLinePresModel().formattedValue||''},get_isConfidenceIntervalAllowed:function(){return this.get_refLinePresModel().confidenceIntervalAllowed},get_isInstantAnalyticsAllowed:function(){return this.get_refLinePresModel().instantAnalyticsAllowed},get_confidenceIntervalSelectedState:function(){return this.get_refLinePresModel().confidenceIntervalSelectedState},get_confidenceIntervalStates:function(){var cE=[];if(ss.isNullOrUndefined(this.get_refLinePresModel().translatedConfidenceIntervalStates)){return cE}var cF=this.get_refLinePresModel().translatedConfidenceIntervalStates;for(var cG=0;cG<cF.length;cG++){var cH=cF[cG];cE.push({key:cH.confidenceIntervalState,value:cH.displayText})}return cE},get_instantAnalyticsEnabled:function(){return this.get_refLinePresModel().enableInstantAnalytics},get_isParameterSelected:function(){return this.get_refLinePresModel().isParameterSelected},$3:function(cE){var cF=[];if(ss.isNullOrUndefined(cE)){return cF}return cF.concat.apply(cF,cE)},update:function(cE,cF){if(ss.isValue(cE)){this.get_fieldPickerCombo().update(cE.fieldPickerCombo,cF);this.get_confidenceLevelCombo().update(cE.confidenceLevelCombo,cF);this.set_validFormulaTypes(this.$3(cE.validReferenceLineFormulaTypes))}this.simpleSwapToUpdate(cE,this.$2$1,cF)}});var bn=global.tab.ReleaseComponentCmd=ss.mkType(a,'tab.ReleaseComponentCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bn.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'release-component'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bo=global.tab.ReorderSheetsCmd=ss.mkType(a,'tab.ReorderSheetsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bo.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reorder-sheets'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bp=global.tab.ReplaceDataSourceWithDataServerDataSourceServerCmd=ss.mkType(a,'tab.ReplaceDataSourceWithDataServerDataSourceServerCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bp.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabsrv',cmd:'replace-data-source-with-data-server-data-source-server'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bq=global.tab.ReplaceZoneCmd=ss.mkType(a,'tab.ReplaceZoneCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bq.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'replace-zone'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var br=global.tab.ResetCategoricalColorMapCmd=ss.mkType(a,'tab.ResetCategoricalColorMapCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return br.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-categorical-color-map'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bs=global.tab.SaveAsCmd=ss.mkType(a,'tab.SaveAsCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bs.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bt=global.tab.SaveCmd=ss.mkType(a,'tab.SaveCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bt.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bu=global.tab.SaveDatasourceDialogModel=ss.mkType(a,'tab.SaveDatasourceDialogModel',function(){this.$2$1=null;this.$2$2=null;tab.Model.call(this,null,new tab.PresModelPathItem('doc:web-save-datasource-dialog-event'.toString(),null));this.pm={saveDatasourceDialog:{}}},{add_modelUpdated:function(cE){this.$2$1=ss.delegateCombine(this.$2$1,cE)},remove_modelUpdated:function(cE){this.$2$1=ss.delegateRemove(this.$2$1,cE)},add_stopNotifying:function(cE){this.$2$2=ss.delegateCombine(this.$2$2,cE)},remove_stopNotifying:function(cE){this.$2$2=ss.delegateRemove(this.$2$2,cE)},get_notificationId:function(){return'doc:web-save-datasource-dialog-event'},get_dialogPresModel:function(){return this.pm.saveDatasourceDialog},get_datasourceId:function(){return this.get_dialogPresModel().datasource||''},get_datasourceCaption:function(){return this.get_dialogPresModel().datasourceCaption||''},onNotify:function(cE,cF){this.simpleSwapToUpdate(cE,this.$2$1,cF)},detachNotifications:function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}}});var bv=global.tab.SaveOrSaveAsCmd=ss.mkType(a,'tab.SaveOrSaveAsCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bv.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bw=global.tab.SelectZoneParentCmd=ss.mkType(a,'tab.SelectZoneParentCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bw.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'select-zone-parent'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bx=global.tab.SetCategoricalLegendItemColorCmd=ss.mkType(a,'tab.SetCategoricalLegendItemColorCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bx.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-categorical-legend-item-color'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var by=global.tab.SetDensityColorEncodingCmd=ss.mkType(a,'tab.SetDensityColorEncodingCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return by.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-color-encoding'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bz=global.tab.SetDensityIntensityCmd=ss.mkType(a,'tab.SetDensityIntensityCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bz.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-intensity'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bA=global.tab.SetDensityKernelSizeCmd=ss.mkType(a,'tab.SetDensityKernelSizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bA.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-density-kernel-size'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bB=global.tab.SetSelectedLegendItemsCmd=ss.mkType(a,'tab.SetSelectedLegendItemsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bB.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-selected-legend-items'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bC=global.tab.SetSidePaneExpansionStateCmd=ss.mkType(a,'tab.SetSidePaneExpansionStateCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bC.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-side-pane-expansion-state'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bD=global.tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd=ss.mkType(a,'tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bD.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-story-point-caption-width-and-flipboard-nav-height'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bE=global.tab.SetZoneIsFixedSizeCmd=ss.mkType(a,'tab.SetZoneIsFixedSizeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bE.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-is-fixed-size'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bF=global.tab.SetZoneStyleCmd=ss.mkType(a,'tab.SetZoneStyleCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bF.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-zone-style'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bG=global.tab.SheetThumbnailCache=ss.mkType(a,'tab.SheetThumbnailCache',function(){this.$1=null;this.$1=new(ss.makeGenericType(tab.LruCache$2,[String,String]))(75)},{hasThumbnail:function(cE){return this.$1.has(cE)},getThumbnail:function(cE){var cF=$.Deferred();if(this.hasThumbnail(cE)){return cF.resolve(this.$1.get(cE))}tab.DashboardClientCommands.getThumbnailImage(cE).done(ss.mkdel(this,function(cG){this.$0(cG,cE,cF)})).fail(function(){cF.reject()});return cF.promise()},delete$1:function(cE){if(this.hasThumbnail(cE)){this.$1.delete$1(cE)}},$0:function(cE,cF,cG){var cH=ss.coalesce(cE.image,'');this.$1.add(cF,cH);cG.resolve(cH)},clear:function(){if(ss.isValue(this.$1)){this.$1.clear()}}});var bH=global.tab.ShelfClientCommands=ss.mkType(a,'tab.ShelfClientCommands',null,null,{$b:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(bH)+tsConfig.layoutid)},setItemEncodingType:function(cE,cF,cG){var cH={};tab.CommandUtils.addVisualIdToCommand(cH,bH.$6());cH['paneSpec']=cE.get_paneId().toString();cH['position']=ss.indexOf(cE.get_pills(),cF).toString();cH['encodingType']=cG.toString();cH['shelfType']=cE.get_shelfType().toString();var cI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-item-encoding-type'},cH);tab.ServerCommands.executeServerCommand(cI,'immediately',null,null)},startDrag:function(cE,cF,cG,cH,cI){var cJ=$.Deferred();var cK={};cK['worksheet']=tsConfig.current_sheet_name;cK['isRightDrag']=JSON.stringify(cH);if(ss.isValue(cG)){cK['paneSpec']=JSON.stringify(cG)}cK['dragSource']=cI;bH.$4(cK,cE,cF);var cL=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-drag-pres-model'},cK);tab.ServerCommands.executeServerCommand(cL,'none',function(cM){cJ.resolve(cM)},function(cM){cJ.reject()});return cJ},executeDragToShowMe:function(cE,cF,cG){var cH=$.Deferred();var cI={commandNamespace:{ns:'tabdoc',cmd:'drop-on-showme'}.ns,commandName:{ns:'tabdoc',cmd:'drop-on-showme'}.cmd,commandParams:{}};bH.$4(cI.commandParams,cF.get_allFieldModels(),'invalid-encoding');cI.commandParams['visualIdPresModel']=JSON.stringify(cE);cI.commandParams['shelfDropContext']='none';cI.commandParams['isCopy']=cF.isCopyDrag;cI.commandParams['isDeadDrop']=false;cI.commandParams['dragSource']=(cF.isFromDataSchemaPane?'drag-drop-schema':'drag-drop-shelf');cI.commandParams['dropTarget']='drag-drop-viz';cI.commandParams['dragDescription']='';cI.commandParams['shelfDragSourcePosition']=bH.$1(cF);cI.commandParams['shelfDropTargetPosition']=bH.$3();cI.commandParams['isShiftDrag']=cF.isShiftDrag;cI.commandParams['worksheet']=tsConfig.current_sheet_name;cI.commandParams['dashboard']=tab.ModelUtils.findContentDashboard(null).pm.sheetPath;cI.commandParams['isRightDrag']=false;if(ss.isValue(cG)){cI.commandParams['paneSpec']=ss.unbox(cG)}var cJ=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},cI.commandParams);tab.ServerCommands.executeServerCommand(cJ,'immediately',function(cK){tab.ServerCommands.executeServerCommand(cI,'immediately',function(cL){cH.resolve(cL)},function(cL){cH.reject()})},function(cK){})},$3:function(){return{shelfType:'show-me-shelf',shelfPosIndex:0,shelfDropAction:'replace',isFolded:false,isOverlay:true}},$1:function(cE){var cF={shelfPosIndex:(cE.isFromDataSchemaPane?-1:0),shelfDropAction:(cE.isFromDataSchemaPane?'insert':'replace')};if(cE.isFromDataSchemaPane){cF.shelfType='none-shelf'}return cF},getShelfItemContextMenu:function(cE,cF,cG){var cH=new g;cH.c['shelfItemId']=cE|0;cH.c['shelfType']=cF;cH.c['paneSpec']=cG|0;cH.c['isMobile']=tsConfig.is_mobile;return cH.invoke()},drillOnPill:function(cE,cF,cG){var cH={};cH['worksheet']=tsConfig.current_sheet_name;cH['shelfType']=cE.get_shelfType().toString();cH['position']=cG.toString();cH['drillDown']=JSON.stringify(cF.get_shouldDrill());if(cE.get_shelfType()==='encoding-shelf'){cH['paneSpec']=cE.get_paneId().toString()}var cI=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'level-drill-up-down'},cH);tab.CommandController.SendCommand(tab.RemoteClientCommand.create(cI,'immediately',null,null))},removeShelfPill:function(cE,cF){var cG=bH.$2();cG.commandName={ns:'tabdoc',cmd:'drop-nowhere'}.cmd;var cH=cG.commandParams;cH['paneSpec']=cE.get_paneId();cH['dragDescription']=cE.get_shelfType().toString();bH.$8(cH,cF.get_column(),cF.get_encodingType());cH['shelfSelection']=[cF.pm.shelfItemId];cH['dragSource']='drag-drop-shelf';var cI=cH['shelfDragSourcePosition'];cI.shelfType=cE.get_shelfType();cI.shelfPosIndex=ss.indexOf(cE.get_pills(),cF);cI.shelfDropAction='replace';var cJ=new tab.ClientCommand('immediately',function(cK){bH.$7(cK.makeMutablePresModel(cE,false),cF.pm)},cG,null,null);tab.CommandController.SendCommand(cJ)},replaceShelfPill:function(cE,cF,cG,cH,cI,cJ){var cK=ss.indexOf(cE.get_pills(),cF);var cL=cI.shelfPosIndex;var cM=bH.$2();var cN=cM.commandParams;bH.$8(cN,cF.get_column(),cF.get_encodingType());cN['shelfSelection']=[cF.pm.shelfItemId];cN['dragSource']='drag-drop-shelf';var cO=cN['shelfDragSourcePosition'];cO.shelfType=cE.get_shelfType();cO.shelfPosIndex=cK;cO.shelfDropAction='replace';cN['paneSpec']=cG.get_paneId();cN['dropTarget']='drag-drop-shelf';if(ss.isNullOrUndefined(cI)){cI=cN['shelfDropTargetPosition'];cI.shelfType=cG.get_shelfType();cI.shelfPosIndex=cL;cI.encodingType=cH.get_encodingType();cI.shelfDropAction='replace'}else{cN['shelfDropTargetPosition']=cI}if(cJ){cN['isCopy']=bH.$c}var cP=new b(ss.mkdel(this,function(cQ){if(!cJ){var cR=cQ.makeMutablePresModel(cE,false);bH.$7(cR,cF.pm)}var cS=cQ.makeMutablePresModel(cG,false);bH.$7(cS,cH.pm);var cT={displayText:cF.pm.displayText,fn:cF.pm.fn,encodingType:cH.get_encodingType(),encodingUiItems:cH.pm.encodingUiItems};bH.$0(cS,cT,cI,0)}),cM,cG.get_shelfType(),false);tab.CommandController.SendCommand(cP)},moveShelfPill:function(cE,cF,cG,cH,cI){var cJ=bH.$2();var cK=cJ.commandParams;cK['shelfSelection']=[cG.pm.shelfItemId];bH.$8(cK,cG.get_column(),cG.get_encodingType());if(cI){cK['isCopy']=bH.$c}cK['dragSource']='drag-drop-shelf';var cL=cK['shelfDragSourcePosition'];cL.shelfType=cE.get_shelfType();cL.shelfPosIndex=ss.indexOf(cE.get_pills(),cG);cL.shelfDropAction='replace';if(ss.isNullOrUndefined(cH)){cH=cK['shelfDropTargetPosition'];cH.shelfType=cF.get_shelfType();cH.shelfPosIndex=0;cH.shelfDropAction=(ss.referenceEquals(cE,cF)?'swap':'insert')}cK['dropTarget']='drag-drop-shelf';cK['paneSpec']=cF.get_paneId();cK['shelfDropTargetPosition']=cH;var cM=new b(ss.mkdel(this,function(cN){var cO={displayText:cG.pm.displayText,fn:cG.pm.fn,encodingType:cH.encodingType};var cP=cN.makeMutablePresModel(cF,false);bH.$0(cP,cO,cH,0);if(!cI){var cQ=cN.makeMutablePresModel(cE,false);bH.$7(cQ,cG.pm)}}),cJ,cF.get_shelfType(),false);tab.CommandController.SendCommand(cM)},movePillToEncoding:function(cE,cF,cG,cH,cI,cJ){var cK=bH.$2();var cL=cK.commandParams;cL['shelfSelection']=[cH.pm.shelfItemId];cL['dragSource']='drag-drop-shelf';var cM=cL['shelfDragSourcePosition'];cM.shelfType=cE.get_shelfType();cM.shelfPosIndex=ss.indexOf(cE.get_pills(),cH);cM.encodingType=cH.get_encodingType();cM.shelfDropAction='replace';cM.isOverride=false;bH.$8(cL,cH.get_column(),cH.get_encodingType());if(cI){cL['isCopy']=bH.$c}if(ss.isNullOrUndefined(cJ)){cJ=cL['shelfDropTargetPosition'];cJ.shelfType='encoding-shelf';cJ.shelfPosIndex=0;cJ.shelfDropAction='insert';cJ.encodingType=cG;cJ.isOverride=true}cL['dropTarget']='drag-drop-shelf';cL['paneSpec']=cF.get_paneId();cL['shelfDropTargetPosition']=JSON.stringify(cJ);var cN=new b(ss.mkdel(this,function(cO){if(!cI){var cP=cO.makeMutablePresModel(cE,false);bH.$7(cP,cH.pm)}var cQ={displayText:cH.get_column().get_description(),fn:cH.get_column().get_globalName(),encodingType:cG,encodingUiItems:cH.pm.encodingUiItems};var cR=cO.makeMutablePresModel(cF,false);bH.$0(cR,cQ,cJ,0)}),cK,cF.get_shelfType(),false);tab.CommandController.SendCommand(cN)},addEncodingFields:function(cE,cF,cG,cH,cI,cJ,cK){var cL=bH.$2();var cM=cL.commandParams;if(ss.isNullOrUndefined(cH)){cH=cM['shelfDropTargetPosition'];cH.shelfType='encoding-shelf';cH.shelfPosIndex=0;cH.shelfDropAction='insert';cH.encodingType=cG}if(cI){cM['isShiftDrag']=bH.$c}if(cJ){cM['isRightDrag']=bH.$c}bH.$4(cM,cF,'invalid-encoding');cM['paneSpec']=cE.get_paneId();cM['dragSource']='drag-drop-schema';cM['dropTarget']='drag-drop-shelf';cM['shelfDropTargetPosition']=JSON.stringify(cH);var cN=new b(ss.mkdel(this,function(cO){var cP=cO.makeMutablePresModel(cE,false);for(var cQ=0;cQ<cF.length;cQ++){var cR=cF[cQ];var cS={displayText:cR.get_description(),fn:cR.get_globalName(),encodingType:cG,encodingUiItems:[{}]};cS.encodingUiItems[0].isVisible=true;cS.encodingUiItems[0].isEnabled=true;cS.encodingUiItems[0].encodingType=cS.encodingType;bH.$0(cP,cS,cH,0)}}),cL,cE.get_shelfType(),cK);tab.CommandController.SendCommand(cN)},getFieldAggregationsForDrop:function(cE,cF,cG,cH){var cI=new tab.GetDropFieldAggregationsCmd;cI.c['shelfType']=cF;cI.c['fn']=cE;cI.set_uiBlocking('immediately');var cJ=cI;cJ.invoke().done(function(cK){if(cK.filterSelectMeasure!==undefined&&cK.filterSelectMeasure!==null){cG(cK.filterSelectMeasure)}else{cH()}}).fail(cH)},launchFilterDialog:function(cE,cF,cG,cH,cI,cJ){var cK=new U;cK.c['fn']=cE;cK.c['forceUserToChoose']=cI;cK.set_uiBlocking('immediately');cK.c['dragSource']=cF;cK.c['shelfDropTargetPosition']=cG;cK.c['isCopy']=cJ;var cL=cK;if(ss.isValue(cH)){cL.c['shelfDragSourcePosition']=cH}cL.invoke()},addShelfField:function(cE,cF,cG,cH,cI,cJ){var cK=bH.$2();var cL=cK.commandParams;if(ss.isNullOrUndefined(cH)){cH=cL['shelfDropTargetPosition'];cH.shelfType=cE.get_shelfType();cH.shelfPosIndex=0;cH.shelfDropAction='insert';cH.encodingType=cG}if(cI){cL['isRightDrag']=bH.$c}bH.$4(cL,cF,'invalid-encoding');cL['paneSpec']=cE.get_paneId();cL['dragSource']='drag-drop-schema';cL['dropTarget']='drag-drop-shelf';cL['shelfDropTargetPosition']=cH;if(cG!=='invalid-encoding'){cL['encodingType']=cG.toString()}var cM=new b(ss.mkdel(this,function(cN){var cO=0;for(var cP=0;cP<cF.length;cP++){var cQ=cF[cP];var cR={displayText:cQ.get_description(),fn:cQ.get_globalName(),encodingType:((cE.get_shelfType()==='encoding-shelf'&&cG==='invalid-encoding')?'level-of-detail-encoding':cG)};var cS=cN.makeMutablePresModel(cE,false);bH.$0(cS,cR,cH,cO);cO++}}),cK,cE.get_shelfType(),cJ);tab.CommandController.SendCommand(cM)},replaceShelfPillWithField:function(cE,cF,cG,cH,cI){var cJ=bH.$2();var cK=cJ.commandParams;if(ss.isNullOrUndefined(cH)){cH=cK['shelfDropTargetPosition'];cH.shelfType=cE.get_shelfType();cH.shelfPosIndex=ss.indexOf(cE.get_pills(),cF);cH.shelfDropAction='replace';cH.encodingType=cF.get_encodingType()}bH.$4(cK,cG,'invalid-encoding');cK['paneSpec']=cE.get_paneId();cK['shelfSelection']=[];cK['dragSource']='drag-drop-schema';cK['dropTarget']='drag-drop-shelf';cK['shelfDropTargetPosition']=cH;var cL=new b(ss.mkdel(this,function(cM){var cN=cM.makeMutablePresModel(cE,false);var cO=0;for(var cP=0;cP<cG.length;cP++){var cQ=cG[cP];var cR={displayText:cQ.get_description(),fn:cQ.get_globalName(),encodingType:cF.get_encodingType(),encodingUiItems:cF.pm.encodingUiItems};bH.$0(cN,cR,cH,cO);cO++}}),cJ,cE.get_shelfType(),cI);tab.CommandController.SendCommand(cL)},setCommandParams:function(cE,cF){tab.CommandUtils.addVisualIdToCommand(cF,bH.$6());var cG=new ss.ObjectEnumerator(cF);try{while(cG.moveNext()){var cH=cG.current();var cI=cH.value;if(ss.isNullOrUndefined(cI)||_.isString(cI)||_.isBoolean(cI)||_.isNumber(cI)){}else if(_.isObject(cI)||_.isArray(cI)){cF[cH.key]=JSON.stringify(cI)}}}finally{cG.dispose()}cE.commandParams=cF},$2:function(){var cE={};cE['dragSource']='drag-drop-none';cE['dropTarget']='drag-drop-none';cE['dragDescription']='';cE['isCopy']=false;cE['isDeadDrop']=false;cE['isRightDrag']=false;cE['shelfDropContext']='none';cE['shelfDragSourcePosition']={};cE['shelfDropTargetPosition']={};return tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-on-shelf'},cE)},$5:function(cE,cF){var cG={fn:cE.get_globalName()};if(ss.isValue(cF)&&cF!=='invalid-encoding'){cG.encodingType=cF}return cG},$8:function(cE,cF,cG){cE['fieldEncodings']=JSON.stringify([bH.$5(cF,cG)])},$4:function(cE,cF,cG){var cH=_.map(cF,function(cI){return bH.$5(cI,cG)});cE['fieldEncodings']=JSON.stringify(cH)},$0:function(cE,cF,cG,cH){var cI=((cH>0)?'insert':(cG.shelfDropAction||'insert'));switch(cI){case'insert':{ss.insert(bH.$9(cE.shelfItems),cG.shelfPosIndex+cH,cF);break}case'replace':{cE.shelfItems[cG.shelfPosIndex]=cF;break}case'replace-all':{cE.shelfItems[cG.shelfPosIndex]=cF;cE.shelfItems=_.filter(cE.shelfItems,function(cJ){return cJ.encodingType!==cG.encodingType||ss.referenceEquals(cJ,cF)});break}}},$7:function(cE,cF){cE.shelfItems=_.filter(cE.shelfItems,function(cG){return!_.isEqual(cG,cF)})},$9:function(cE){return cE},$6:function(){return tab.ModelUtils.getVisualId(tsConfig.current_sheet_name)}});var bI=global.tab.SortNestedCmd=ss.mkType(a,'tab.SortNestedCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bI.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'sort-nested'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bJ=global.tab.TableCalcAddCmd=ss.mkType(a,'tab.TableCalcAddCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bJ.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-add'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bK=global.tab.TableCalcChangeTypeCmd=ss.mkType(a,'tab.TableCalcChangeTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bK.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-change-type'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bL=global.tab.TableCalcCloseCmd=ss.mkType(a,'tab.TableCalcCloseCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bL.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-close'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bM=global.tab.TableCalcDialogActivatedCmd=ss.mkType(a,'tab.TableCalcDialogActivatedCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bM.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-dialog-activated'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bN=global.tab.TableCalcEditCmd=ss.mkType(a,'tab.TableCalcEditCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bN.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-edit'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bO=global.tab.TableCalcEditDefaultsCmd=ss.mkType(a,'tab.TableCalcEditDefaultsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bO.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-edit-defaults'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bP=global.tab.TableCalcEditNestedTableCalcCmd=ss.mkType(a,'tab.TableCalcEditNestedTableCalcCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bP.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-edit-nested'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bQ=global.tab.TableCalcSetAddressingFieldsCmd=ss.mkType(a,'tab.TableCalcSetAddressingFieldsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bQ.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-addressing-fields'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bR=global.tab.TableCalcSetAddressingFieldsOrderCmd=ss.mkType(a,'tab.TableCalcSetAddressingFieldsOrderCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bR.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-addressing-fields-order'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bS=global.tab.TableCalcSetAtTheLevelFieldCmd=ss.mkType(a,'tab.TableCalcSetAtTheLevelFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bS.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-at-the-level-field'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bT=global.tab.TableCalcSetCompoundRateCmd=ss.mkType(a,'tab.TableCalcSetCompoundRateCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bT.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-compound-rate'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bU=global.tab.TableCalcSetCumulativeOptionsCmd=ss.mkType(a,'tab.TableCalcSetCumulativeOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bU.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-cumulative-options'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bV=global.tab.TableCalcSetNullIfIncompleteCmd=ss.mkType(a,'tab.TableCalcSetNullIfIncompleteCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bV.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-null-if-incomplete'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bW=global.tab.TableCalcSetOrderingTypeCmd=ss.mkType(a,'tab.TableCalcSetOrderingTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bW.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-ordering-type'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bX=global.tab.TableCalcSetPercentTotalOptionsCmd=ss.mkType(a,'tab.TableCalcSetPercentTotalOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bX.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-percent-total-options'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bY=global.tab.TableCalcSetRankSortDirectionCmd=ss.mkType(a,'tab.TableCalcSetRankSortDirectionCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bY.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-rank-sort-direction'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var bZ=global.tab.TableCalcSetRankTypeCmd=ss.mkType(a,'tab.TableCalcSetRankTypeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return bZ.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-rank-type'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ca=global.tab.TableCalcSetReferenceOptionsCmd=ss.mkType(a,'tab.TableCalcSetReferenceOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ca.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-reference-options'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cb=global.tab.TableCalcSetRestartEveryFieldCmd=ss.mkType(a,'tab.TableCalcSetRestartEveryFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cb.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-restart-every-field'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cc=global.tab.TableCalcSetSortAggregationCmd=ss.mkType(a,'tab.TableCalcSetSortAggregationCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cc.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-aggregation'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cd=global.tab.TableCalcSetSortDirectionCmd=ss.mkType(a,'tab.TableCalcSetSortDirectionCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cd.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-direction'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ce=global.tab.TableCalcSetSortFieldCmd=ss.mkType(a,'tab.TableCalcSetSortFieldCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ce.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-field'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cf=global.tab.TableCalcSetSortModeCmd=ss.mkType(a,'tab.TableCalcSetSortModeCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cf.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-sort-mode'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cg=global.tab.TableCalcSetWindowOptionsCmd=ss.mkType(a,'tab.TableCalcSetWindowOptionsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cg.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-set-window-options'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ch=global.tab.TableCalcToggleSecondaryCalcCmd=ss.mkType(a,'tab.TableCalcToggleSecondaryCalcCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ch.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-toggle-secondary-calc'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ci=global.tab.TableCalcToggleShowCalcAssistanceCmd=ss.mkType(a,'tab.TableCalcToggleShowCalcAssistanceCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ci.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'table-calc-toggle-show-calc-assistance'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cj=global.tab.ToggleFreeFormZoneWithPreviewCmd=ss.mkType(a,'tab.ToggleFreeFormZoneWithPreviewCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cj.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ck=global.tab.UpdateMarkLabelsSettingsCmd=ss.mkType(a,'tab.UpdateMarkLabelsSettingsCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ck.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'update-mark-labels-settings'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cl=global.tab.UpdateReferenceLineCmd=ss.mkType(a,'tab.UpdateReferenceLineCmd',function(){ss.makeGenericType(tab.BaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cl.cmdId},invoke:function(){return this.invoke$1(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'update-reference-line'},this.c))}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cm=global.tab.WebConnectDataCmd=ss.mkType(a,'tab.WebConnectDataCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cm.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cn=global.tab.WebDashboardDesignCmd=ss.mkType(a,'tab.WebDashboardDesignCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cn.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var co=global.tab.WebEditDataSourceCmd=ss.mkType(a,'tab.WebEditDataSourceCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return co.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cp=global.tab.WebEditObjectCaptionCmd=ss.mkType(a,'tab.WebEditObjectCaptionCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cp.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cq=global.tab.WebEPDSPublishCmd=ss.mkType(a,'tab.WebEPDSPublishCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cq.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cr=global.tab.WebExportCrossTabCmd=ss.mkType(a,'tab.WebExportCrossTabCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cr.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cs=global.tab.WebExportDataCmd=ss.mkType(a,'tab.WebExportDataCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cs.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var ct=global.tab.WebExportPdfCmd=ss.mkType(a,'tab.WebExportPdfCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return ct.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cu=global.tab.WebExportPngCmd=ss.mkType(a,'tab.WebExportPngCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cu.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cv=global.tab.WebExportPowerPointCmd=ss.mkType(a,'tab.WebExportPowerPointCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cv.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cw=global.tab.WebFilterDialogDomainCancelCmd=ss.mkType(a,'tab.WebFilterDialogDomainCancelCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cw.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cx=global.tab.WebFormatWorkbookCmd=ss.mkType(a,'tab.WebFormatWorkbookCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cx.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cy=global.tab.WebRemoveShelfPillCmd=ss.mkType(a,'tab.WebRemoveShelfPillCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cy.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cz=global.tab.WebRenameDatasourceDialogCmd=ss.mkType(a,'tab.WebRenameDatasourceDialogCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cz.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cA=global.tab.WebShowMeCmd=ss.mkType(a,'tab.WebShowMeCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cA.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cB=global.tab.WebToolbarMoreCmd=ss.mkType(a,'tab.WebToolbarMoreCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cB.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});var cC=global.tab.WebZonesEnabledModel=ss.mkType(a,'tab.WebZonesEnabledModel',function(cE){tab.Model.call(this,cE,new tab.PresModelPathItem('doc:user-content-web-view-enable-web-zones-changed-event'.toString(),null));this.pm={userContentWebViewWebZonesEnabled:true}},{get_notificationId:function(){return'doc:user-content-web-view-enable-web-zones-changed-event'},onNotify:function(cE,cF){var cG=cE;if(ss.isValue(cG)){tsConfig.is_web_zones_enabled=cG.userContentWebViewWebZonesEnabled}}});var cD=global.tab.WhereDidSaveGoCmd=ss.mkType(a,'tab.WhereDidSaveGoCmd',function(){ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).call(this)},{get_commandId:function(){return cD.cmdId}},{buildResponse:function(cE){return cE},$0:function(cE){}});ss.initClass(b,tab.ClientCommand);ss.initClass(c,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(d,tab.Model,[tab.IHandleNotifications]);ss.initClass(e,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(f,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(g,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(h);ss.initClass(i,tab.Model);ss.initClass(j,tab.Model);ss.initClass(k);ss.initClass(l,tab.Model,[tab.IHandleNotifications]);ss.initClass(m,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(n,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(o,tab.Model,[tab.IHandleNotifications]);ss.initClass(p,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(q,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(r);ss.initClass(s);ss.initClass(t);ss.initClass(u);ss.initClass(v,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(w,tab.Model);ss.initClass(x,tab.Model);ss.initClass(y,tab.Model);ss.initClass(z,tab.Model);ss.initClass(A,tab.Model);ss.initClass(B);ss.initClass(C);ss.initClass(D,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(E,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(F,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(G);ss.initClass(H,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(I,tab.Model);ss.initClass(J,tab.Model);ss.initClass(K);ss.initClass(L);ss.initClass(M,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(N,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(O,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(P,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(Q,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(R,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(S,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(T,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(U,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(V);ss.initClass(W,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(X,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(Y,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(Z,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ba,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bb,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bc);ss.initClass(bd,null,[ss.IDisposable]);ss.initClass(be);ss.initClass(bf,tabBootstrap.DisableAffordanceSet);ss.initClass(bg,tab.Model,[tab.IHandleNotifications]);ss.initClass(bh,tab.Model,[tab.IDetachableNotificationHandler,tab.IHandleNotifications]);ss.initClass(bi,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bj,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bk,tab.Model);ss.initClass(bl,tab.Model,[tab.IHandleNotifications]);ss.initClass(bm,tab.Model);ss.initClass(bn,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bo,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bp,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bq,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(br,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bs,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bt,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bu,tab.Model,[tab.IDetachableNotificationHandler,tab.IHandleNotifications]);ss.initClass(bv,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(bw,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bx,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(by,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bz,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bA,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bB,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bC,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bD,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bE,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bF,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bG);ss.initClass(bH);ss.initClass(bI,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bJ,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bK,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bL,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bM,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bN,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bO,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bP,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bQ,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bR,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bS,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bT,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bU,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bV,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bW,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bX,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bY,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(bZ,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ca,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cb,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cc,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cd,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ce,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cf,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cg,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ch,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(ci,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cj,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ck,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cl,ss.makeGenericType(tab.BaseCmd$2,[Object,Object]));ss.initClass(cm,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cn,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(co,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cp,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cq,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cr,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cs,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(ct,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cu,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cv,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cw,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cx,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cy,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cz,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cA,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cB,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));ss.initClass(cC,tab.Model,[tab.IHandleNotifications]);ss.initClass(cD,ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]));(function(){g.cmdId={ns:'tabdoc',cmd:'build-shelf-item-context-menu'}})();(function(){U.cmdId={ns:'tabdoc',cmd:'launch-filter-dialog'}})();(function(){bH.$c=JSON.stringify(true)})();(function(){c.cmdId={ns:'tabdoc',cmd:'assign-categorical-color-palette'}})();(function(){var cE=tab.ApplicationModel.get_instance();cE.modelInstance(d).call(cE)})();(function(){e.cmdId={ns:'tabdoc',cmd:'build-main-menu'}})();(function(){f.cmdId={ns:'tabdoc',cmd:'build-server-header-context-menu'}})();(function(){k.fakeDsName='__fake ds name__';k.registerCommandInterceptors()})();(function(){var cE=tab.ApplicationModel.get_instance();cE.addModel(l).call(cE)})();(function(){m.cmdId={ns:'tabdoc',cmd:'change-line-interpolation'}})();(function(){n.cmdId={ns:'tabdoc',cmd:'close-authoring'}})();(function(){var cE=tab.ApplicationModel.get_instance();cE.addModel(o).call(cE)})();(function(){p.cmdId={ns:'tabdoc',cmd:'close-map-layers-pane'}})();(function(){q.cmdId={ns:'tabdoc',cmd:'close-ref-line-editor'}})();(function(){S.cmdId={ns:'tabdoc',cmd:'hide-zone'}})();(function(){bq.cmdId={ns:'tabdoc',cmd:'replace-zone'}})();(function(){bw.cmdId={ns:'tabdoc',cmd:'select-zone-parent'}})();(function(){N.cmdId={ns:'tabdoc',cmd:'get-drag-zone-resize'}})();(function(){ba.cmdId={ns:'tabdoc',cmd:'move-dashboard-edge'}})();(function(){bF.cmdId={ns:'tabdoc',cmd:'set-zone-style'}})();(function(){H.cmdId={ns:'tabdoc',cmd:'edit-web-zone-url'}})();(function(){bE.cmdId={ns:'tabdoc',cmd:'set-zone-is-fixed-size'}})();(function(){bb.cmdId={ns:'tabdoc',cmd:'move-zone-within-layout-tree'}})();(function(){X.cmdId={ns:'tabdoc',cmd:'modify-border'}})();(function(){W.cmdId={ns:'tabdoc',cmd:'modify-background-shading'}})();(function(){Y.cmdId={ns:'tabdoc',cmd:'modify-margin'}})();(function(){Z.cmdId={ns:'tabdoc',cmd:'modify-padding'}})();(function(){v.cmdId={ns:'tabdoc',cmd:'destroy-vqlsession'}})();(function(){D.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-filter-shelf'}})();(function(){E.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-schema-viewer'}})();(function(){F.cmdId={ns:'tabdoc',cmd:'drop-ref-line-on-shelf'}})();(function(){var cE=tab.ApplicationModel.get_instance();cE.modelInstance(I).call(cE)})();(function(){M.cmdId={ns:'tabdoc',cmd:'get-density-color-palettes'}})();(function(){O.cmdId={ns:'tabdoc',cmd:'get-last-published-date-for-data-source'}})();(function(){P.cmdId={ns:'tabdoc',cmd:'get-ref-line-drag-info'}})();(function(){Q.cmdId={ns:'tabdoc',cmd:'get-ref-line-formula'}})();(function(){R.cmdId={ns:'tabdoc',cmd:'get-trend-line-drag-info'}})();(function(){T.cmdId={ns:'tabdoc',cmd:'hide-zone-with-preview'}})();(function(){ck.cmdId={ns:'tabdoc',cmd:'update-mark-labels-settings'}})();(function(){by.cmdId={ns:'tabdoc',cmd:'set-density-color-encoding'}})();(function(){bA.cmdId={ns:'tabdoc',cmd:'set-density-kernel-size'}})();(function(){bz.cmdId={ns:'tabdoc',cmd:'set-density-intensity'}})();(function(){bf.$1=['zoneWidgetry','sidePane'];if(tsConfig.is_desktop){tabBootstrap.Affordances.register(new bf)}})();(function(){bi.cmdId={ns:'tabdoc',cmd:'quick-sort-ascending'}})();(function(){bj.cmdId={ns:'tabdoc',cmd:'quick-sort-descending'}})();(function(){var cE=tab.ApplicationModel.get_instance();cE.addModel(bl).call(cE)})();(function(){bn.cmdId={ns:'tabdoc',cmd:'release-component'}})();(function(){bo.cmdId={ns:'tabdoc',cmd:'reorder-sheets'}})();(function(){bp.cmdId={ns:'tabsrv',cmd:'replace-data-source-with-data-server-data-source-server'}})();(function(){br.cmdId={ns:'tabdoc',cmd:'reset-categorical-color-map'}})();(function(){bs.cmdId={ns:'tabdoc',cmd:'save-as'}})();(function(){bt.cmdId={ns:'tabdoc',cmd:'save'}})();(function(){bv.cmdId={ns:'tabdoc',cmd:'save-or-save-as'}})();(function(){bx.cmdId={ns:'tabdoc',cmd:'set-categorical-legend-item-color'}})();(function(){bB.cmdId={ns:'tabdoc',cmd:'set-selected-legend-items'}})();(function(){bC.cmdId={ns:'tabdoc',cmd:'set-side-pane-expansion-state'}})();(function(){bD.cmdId={ns:'tabdoc',cmd:'set-story-point-caption-width-and-flipboard-nav-height'}})();(function(){bG.$0=75})();(function(){bI.cmdId={ns:'tabdoc',cmd:'sort-nested'}})();(function(){bJ.cmdId={ns:'tabdoc',cmd:'table-calc-add'}})();(function(){bK.cmdId={ns:'tabdoc',cmd:'table-calc-change-type'}})();(function(){bL.cmdId={ns:'tabdoc',cmd:'table-calc-close'}})();(function(){bM.cmdId={ns:'tabdoc',cmd:'table-calc-dialog-activated'}})();(function(){bN.cmdId={ns:'tabdoc',cmd:'table-calc-edit'}})();(function(){bO.cmdId={ns:'tabdoc',cmd:'table-calc-edit-defaults'}})();(function(){bP.cmdId={ns:'tabdoc',cmd:'table-calc-edit-nested'}})();(function(){bQ.cmdId={ns:'tabdoc',cmd:'table-calc-set-addressing-fields'}})();(function(){bR.cmdId={ns:'tabdoc',cmd:'table-calc-set-addressing-fields-order'}})();(function(){bS.cmdId={ns:'tabdoc',cmd:'table-calc-set-at-the-level-field'}})();(function(){bT.cmdId={ns:'tabdoc',cmd:'table-calc-set-compound-rate'}})();(function(){bU.cmdId={ns:'tabdoc',cmd:'table-calc-set-cumulative-options'}})();(function(){bV.cmdId={ns:'tabdoc',cmd:'table-calc-set-null-if-incomplete'}})();(function(){bW.cmdId={ns:'tabdoc',cmd:'table-calc-set-ordering-type'}})();(function(){bX.cmdId={ns:'tabdoc',cmd:'table-calc-set-percent-total-options'}})();(function(){bY.cmdId={ns:'tabdoc',cmd:'table-calc-set-rank-sort-direction'}})();(function(){bZ.cmdId={ns:'tabdoc',cmd:'table-calc-set-rank-type'}})();(function(){ca.cmdId={ns:'tabdoc',cmd:'table-calc-set-reference-options'}})();(function(){cb.cmdId={ns:'tabdoc',cmd:'table-calc-set-restart-every-field'}})();(function(){cc.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-aggregation'}})();(function(){cd.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-direction'}})();(function(){ce.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-field'}})();(function(){cf.cmdId={ns:'tabdoc',cmd:'table-calc-set-sort-mode'}})();(function(){cg.cmdId={ns:'tabdoc',cmd:'table-calc-set-window-options'}})();(function(){ch.cmdId={ns:'tabdoc',cmd:'table-calc-toggle-secondary-calc'}})();(function(){ci.cmdId={ns:'tabdoc',cmd:'table-calc-toggle-show-calc-assistance'}})();(function(){cj.cmdId={ns:'tabdoc',cmd:'toggle-free-form-zone-with-preview'}})();(function(){cl.cmdId={ns:'tabdoc',cmd:'update-reference-line'}})();(function(){cm.cmdId={ns:'tabdoc',cmd:'web-connect-data'}})();(function(){cn.cmdId={ns:'tabdoc',cmd:'web-dashboard-design'}})();(function(){co.cmdId={ns:'tabdoc',cmd:'web-edit-data-source'}})();(function(){cp.cmdId={ns:'tabdoc',cmd:'web-edit-object-caption'}})();(function(){cq.cmdId={ns:'tabdoc',cmd:'web-epdspublish'}})();(function(){cr.cmdId={ns:'tabdoc',cmd:'web-export-cross-tab'}})();(function(){cs.cmdId={ns:'tabdoc',cmd:'web-export-data'}})();(function(){ct.cmdId={ns:'tabdoc',cmd:'web-export-pdf'}})();(function(){cu.cmdId={ns:'tabdoc',cmd:'web-export-png'}})();(function(){cv.cmdId={ns:'tabdoc',cmd:'web-export-power-point'}})();(function(){cw.cmdId={ns:'tabdoc',cmd:'web-filter-dialog-domain-cancel'}})();(function(){cx.cmdId={ns:'tabdoc',cmd:'web-format-workbook'}})();(function(){cy.cmdId={ns:'tabdoc',cmd:'web-remove-shelf-pill'}})();(function(){cz.cmdId={ns:'tabdoc',cmd:'web-rename-datasource-dialog'}})();(function(){cA.cmdId={ns:'tabdoc',cmd:'web-show-me'}})();(function(){cB.cmdId={ns:'tabdoc',cmd:'web-toolbar-more'}})();(function(){var cE=tab.ApplicationModel.get_instance();cE.modelInstance(cC).call(cE)})();(function(){cD.cmdId={ns:'tabdoc',cmd:'where-did-save-go'}})()})();;
/*! BEGIN Authoring */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoring');var b=ss.mkType(a,'tab.$0');var c=ss.mkType(a,'tab.$1',function(nk,nl,nm){this.$6=null;this.$4=null;this.$5=null;this.$6=nk;this.$4=nl;this.$5=nm},{$3:function(){return this.$6},$1:function(nk){return this.$0(nk.get_caption())||this.$2(nk.get_formula())},$0:function(nk){return!ss.referenceEquals(this.$4,nk)},$2:function(nk){return!ss.referenceEquals(this.$5,nk)}});var d=ss.mkEnum(a,'tab.$10',{$3:0,$2:1,$0:2,$1:3});var e=ss.mkEnum(a,'tab.$11',{$1:0,$0:1});var f=ss.mkType(a,'tab.$12',function(){this.$2=null;this.$0=null;this.$1=0});var g=ss.mkType(a,'tab.$13',function(nk){this.$1=null;this.$1=nk},{$0:function(){return this.$1.get_marksCardTabEncoding().get_id()},get_viewType:function(){return it},get_viewModel:function(){return this.$1},get_active:function(){return false},set_active:function(nk){}});var h=ss.mkType(a,'tab.$14',function(){this.$3=null;this.$1=null;this.$0=null;this.$2=null;this.$4=0});var i=ss.mkType(a,'tab.$15',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabPane'>\n    <div class='tabPaneTitle'></div>\n    <div class='tabPaneBody'></div>\n</div>"));this.$2=this.getElementBySelector('.tabPaneTitle');this.$1=this.getElementBySelector('.tabPaneBody')});var j=ss.mkType(a,'tab.$16',function(){this.$1=null;spiff.Template.call(this,$("<div class='refLineConstantValueEditor'><span class='refLineConstantValueEditorTitle'></span><input class='refLineConstantValueEditorInput' type='text'/></div>"));this.$1=this.getElementBySelector('.refLineConstantValueEditorInput');this.getElementBySelector('.refLineConstantValueEditorTitle').text(tab.Strings.RefLineEditorInputTitle)});var k=ss.mkType(a,'tab.$17',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'></div>\n    <div class='tabTabContentArea'></div>\n</div>"));this.$2=this.getElementBySelector('.tabTabLabels');this.$1=this.getElementBySelector('.tabTabContentArea')},{get_root:function(){return this.domRoot},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(nk,nl){return new spiff.Template($("<span class='tabTabLabel'></span>").text(nl))}});var l=ss.mkType(a,'tab.$18',function(){this.$0=false;this.$1=null});var m=ss.mkType(a,'tab.$19',function(nk,nl){this.$4=null;this.$5=null;spiff.Template.call(this,$("<div class='tab-editReferenceLineTab'>\n                 <div class='tab-tabIcon'></div>\n                 <div class='tab-tabLabel'></div>\n              </div>"));this.$4=this.getElementBySelector('.tab-tabIcon');this.$5=this.getElementBySelector('.tab-tabLabel');this.$2().text(nl);this.$1().addClass(this.$3(nk))},{$1:function(){return this.$4},$2:function(){return this.$5},$3:function(nk){var nl='tabEditReferenceLine-';switch(nk){case'line':{return nl+'Line'}case'band':{return nl+'Band'}case'distribution':{return nl+'Distribution'}}return''}});var n=ss.mkType(a,'tab.$2',function(nk){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=nk},{createInitialProps:function(){return{layoutTreeItem:this.$3}}});var o=ss.mkType(a,'tab.$3',function(nk,nl,nm,nn){this.$3=null;this.$2=null;this.$1=null;this.$0=null;this.$3=nk;this.$1=nl;this.$0=nm;this.$2=nn},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){this.$1();if(!ss.isInstanceOfType(nk,cf)){return null}var nl=this.$3.getDropPositionPresModel(nk,this.$2);if(ss.isNullOrUndefined(nl)){return null}return this},dragExit:function(nk){this.$0()},acceptDrop:function(nk){return this.$3.acceptDrop(nk,this.$2)},getDropTarget:function(nk){return this},getDropCursor:function(nk){var nl=ss.safeCast(nk,cf);if(ss.isNullOrUndefined(nl)){return spiff.CustomCursor.noOp}if(nl.hasOnlyPills()&&!nk.isCopyDrag){return spiff.CustomCursor.move}return spiff.CustomCursor.copy}});var p=ss.mkType(a,'tab.$4',function(nk,nl){this.$1=null;this.$0=0;this.$1=nk;this.$0=nl},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){var nl=this.$1.dragOver$1(nk,this.$0);if(ss.isValue(nl)){return this}return null},dragExit:function(nk){this.$1.dragExit(nk)},acceptDrop:function(nk){return this.$1.acceptDrop$1(nk,this.$0)},getDropCursor:function(nk){return this.$1.getDropCursor(nk)},getDropTarget:function(nk){return this}});var q=ss.mkType(a,'tab.$5',function(nk){this.$1=null;this.$2=0;this.$1=nk.getValue();this.$2=nk.indexFromPos(nk.getCursor())},{$0:function(){return ss.isValue(this.$1)&&this.$1.length>0}});var r=ss.mkType(a,'tab.$6',function(){this.$7=null;this.$5=null;spiff.Template.call(this,$("<div><div class='autocomplete_item'><span class='field-icon-area'><div class='schema-field-icon'></div></span></div></div>"));this.$5=this.getElementBySelector('.autocomplete_item');this.$7=this.getElementBySelector('.schema-field-icon')},{$6:function(nk){$('<span>'+nk+'</span>').appendTo(this.$5)},$2:function(nk){if(nk){$("<div class='autocomplete_separator'></div>").insertBefore(this.$5)}},$1:function(nk){if(!ss.isNullOrEmptyString(nk)){var nl=$("<div class='autocomplete_header'></div>");nl.text(nk);nl.insertBefore(this.$5)}},$4:function(nk){if(!ss.isNullOrEmptyString(nk)){this.$5.attr('title',nk)}},$3:function(nk){this.domRoot.appendTo(nk)}});var s=ss.mkType(a,'tab.$7',function(nk,nl){r.call(this);this.$5.addClass('autocomplete_field');this.$6(nk);if(nl.length>0){this.$7.addClass(ss.formatString('tab-schema-{0}-icon',nl))}});var t=ss.mkType(a,'tab.$8',function(nk){r.call(this);this.$5.addClass('autocomplete_func');this.$6(nk);this.$7.addClass('autocomplete-menu-function')});var u=ss.mkType(a,'tab.$9',function(){tab.TooltipTemplate.call(this);this.domRoot.addClass('tabCalcFunctionHelp')});var v=global.tab.AccordionHeaderTemplate=ss.mkType(a,'tab.AccordionHeaderTemplate',function(){this.title=null;this.titleText=null;this.titleInput=null;this.icon=null;this.iconTwo=null;this.visibilityButton=null;this.dropdownMenu=null;spiff.Template.call(this,$("<div class='tabAccordionHeader'>\n            <div class='tabLayerVisibilityButton'></div>\n            <div class='tabAccordionItemIconContainer'>\n                <div class='tabAccordionItemIcon'></div>\n            </div>\n            <span class='tabAccordionItemTitle'>\n                <div class='tabAccordionItemTitleText'></div>\n                <input class='tabAccordionItemTitleInput' style='display: none'/>\n                <span class='tableCalcIcon'></span>\n            </span>\n            <div class='tabAccordionDropdownMenu'></div>\n            </div>"));this.title=this.getElementBySelector('.tabAccordionItemTitle');this.titleText=this.getElementBySelector('.tabAccordionItemTitleText');this.titleInput=this.getElementBySelector('.tabAccordionItemTitleInput');this.icon=this.getElementBySelector('.tabAccordionItemIcon');this.iconTwo=this.getElementBySelector('.tableCalcIcon');this.visibilityButton=this.getElementBySelector('.tabLayerVisibilityButton');this.dropdownMenu=this.getElementBySelector('.tabAccordionDropdownMenu')});var w=global.tab.AccordionHeaderView=ss.mkType(a,'tab.AccordionHeaderView',function(nk,nl){this.$j=null;this.$i=null;this.$h=[];ss.makeGenericType(spiff.BaseView$1,[x]).call(this,nk,nl);this.$j=nk;this.$i=nl;if(this.$j.get_isLayered()){this.$i.titleInput.on('blur',ss.mkdel(this,this.handleRenameBlur));this.$i.titleInput.on('keypress',ss.mkdel(this,this.handleEnterKeyPressed));this.$i.visibilityButton.on('mouseenter',ss.mkdel(this,this.$d));this.$i.visibilityButton.on('mouseleave',ss.mkdel(this,this.$e))}this.$i.domRoot.on('mouseenter',ss.mkdel(this,this.$a));this.$i.domRoot.on('mouseleave',ss.mkdel(this,this.$b));this.$g()},{dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[x]).prototype.dispose.call(this)},$7:function(){this.$h.forEach(function(nk){nk.dispose()});ss.clear(this.$h)},$8:function(nk){if(!this.$j.get_isLayered()){return}nk.hide();var nl=nk.parent().children('.tabAccordionItemTitleInput').first();nl.val(nk[0].textContent);nl.show();nl.focus()},doubleClickToEdit:function(nk){this.$8($(nk.currentTarget))},handleEnterKeyPressed:function(nk){if(nk.which===13){nk.currentTarget.blur()}},handleRenameBlur:function(nk){var nl=$(nk.currentTarget);var nm=nl.val().trim();if(!ss.referenceEquals(nm,this.$j.get_title())){this.$j.updateLayerTitle(nm);if(nm.length===0){nm=this.$j.get_defaultTitle()}this.$i.titleText.text(nm)}nl.hide();this.$i.titleText.show()},renderVisibilityButton:function(nk){if(this.$j.get_isLayered()){var nl=React.createElement('div',{className:nk,onClick:ss.mkdel(this,function(nm){this.$c()}),'data-test-id':'tabLayerVisibilityButton-'+this.$j.get_marksSpecId(),key:'tabLayerVisibilityButton'});ReactDOM.render(nl,this.$i.visibilityButton.get(0));this.$i.visibilityButton.show();this.$i.icon.parent().hide();this.$i.iconTwo.hide()}else{if(ss.isValue(this.$j.get_iconClass())){this.$i.icon.addClass(this.$j.get_iconClass())}if(ss.isValue(this.$j.get_iconClassTwo())){this.$i.iconTwo.addClass(this.$j.get_iconClassTwo())}this.$i.visibilityButton.hide();this.$i.icon.parent().show();this.$i.iconTwo.show()}},$9:function(){var nk=iq.getMenuData(this.$j);return{onSelect:ss.mkdel(this,function(nl){this.$f(nl)}),menuItemInfos:ss.arrayClone(nk),testId:'layerDropdownMenu',type:2}},renderDropdownMenu:function(){var nk=this.$9();var nl=React.createElement(SharedWidgets.HierarchicalDropdownWidget,nk);ReactDOM.render(nl,this.$i.dropdownMenu.get(0))},$c:function(){this.$j.toggleLayerVisibility();if(this.$j.get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden-hover')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible-hover')}},$a:function(nk){if(!this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-visible')}},$b:function(nk){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton(this.get_viewModel().get_iconClass())}},$d:function(nk){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden-hover')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible-hover')}},$e:function(nk){if(this.get_viewModel().get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton('tabLayerVisibilityButton-visible')}},$f:function(nk){switch(nk){case'disableSelection':{this.$j.disableSelection();break}case'addToZoom':{this.$j.addZoom();break}case'moveUp':{this.$j.moveUp();break}case'moveDown':{this.$j.moveDown();break}case'renameLayer':{this.$i.dropdownMenu.hide();this.$8(this.$i.titleText);break}case'hideLayer':{this.$j.hide();break}case'removeLayer':{this.$j.remove();break}default:{break}}},$g:function(){if(this.$j.get_isLayered()){this.$h.push(spiff.TableauClickHandler.targetAndDoubleClick(this.$i.titleText[0],ss.mkdel(this,this.doubleClickToEdit)))}var nk=this.$j.get_title();if(nk.length===0){nk=((this.$j.get_defaultTitle().length!==0)?this.$j.get_defaultTitle():tab.Strings.EmptyLayer)}tab.DomUtil.setNativeTooltip(this.$i.title,nk);this.$i.titleText.text(nk);if(this.$j.get_isHidden()){this.renderVisibilityButton('tabLayerVisibilityButton-hidden')}else{this.renderVisibilityButton(this.get_viewModel().get_iconClass())}if(this.get_viewModel().get_isLayered()){this.renderDropdownMenu()}if(this.$j.get_isLayered()){EventUtils.DragDropManager.attachDragSource(this.$i.domRoot,this)}},startDrag:function(nk){if(tab.DomUtil.isFocusableTextElement(nk.target)){return null}this.get_viewModel().dragLayerToReorderStartCallback(this.$j.get_marksSpecId(),this.$j.get_layerIndex());var nl=new w(this.$j,new v);nl.$i.domRoot.addClass('dragAvatar');var nm=new hd(this,nl,this.$j.get_layerIndex(),this.$j.get_marksSpecId());return nm},acceptsDragType:function(){return 1}});var x=global.tab.AccordionHeaderViewModel=ss.mkType(a,'tab.AccordionHeaderViewModel',function(nk,nl,nm,nn,no){this.$9=null;this.$0=null;this.$1=null;this.$2=null;this.$3=false;this.$5=false;this.$4=false;this.$8=0;this.$7=0;this.$6=false;this.$a=0;this.dragLayerToReorderStartCallback=null;spiff.BaseViewModel.call(this);this.$8=nk.get_id();this.$7=nn;this.$a=no;this.$9=nk.get_name();this.$0=nk.get_defaultName();this.$1=gN.getMarksCardTabIcon(nk);if(nk.get_isTableCalc()){this.$2='tabAuthPillIconTableCalc'}this.$6=nm;this.$3=nk.get_isHidden();this.$5=nk.get_isLayerSelectionDisabled();this.$4=nk.get_isInExtent();this.dragLayerToReorderStartCallback=nl},{get_marksSpecId:function(){return this.$8},get_title:function(){return this.$9},set_title:function(nk){this.$9=nk},get_defaultTitle:function(){return this.$0},set_defaultTitle:function(nk){this.$0=nk},get_isLayered:function(){return this.$6},get_layerIndex:function(){return this.$7},get_totalLayerCount:function(){return this.$a},get_iconClass:function(){return this.$1},set_iconClass:function(nk){this.$1=nk},get_iconClassTwo:function(){return this.$2},set_iconClassTwo:function(nk){this.$2=nk},get_isHidden:function(){return this.$3},get_isLayerSelectionDisabled:function(){return this.$5},get_isInExtent:function(){return this.$4},updateLayerTitle:function(nk){tab.MarksLayerClientCommands.setLayerTitle(this.$8,nk)},toggleLayerVisibility:function(){this.$3=!this.$3;tab.MarksLayerClientCommands.setOrToggleLayerIsHidden(this.$8)},disableSelection:function(){tab.MarksLayerClientCommands.setLayerSelection(this.$8)},addZoom:function(){tab.MarksLayerClientCommands.setLayerZoomExtent(this.$8)},moveUp:function(){tab.MarksLayerClientCommands.setLayerIndex(this.$8,this.$7+1)},moveDown:function(){if(this.$7===0){return}tab.MarksLayerClientCommands.setLayerIndex(this.$8,this.$7-1)},hide:function(){tab.MarksLayerClientCommands.setOrToggleLayerIsHidden(this.$8)},remove:function(){tab.MarksLayerClientCommands.removeLayer(this.$7)}});var y=global.tab.AccordionItem=ss.mkType(a,'tab.AccordionItem',function(nk,nl,nm,nn,no){this.$2=null;this.$0=null;this.$3=0;this.$1=null;var np=(nl.get_isTableCalc()?(np='tabAuthPillIconTableCalc'):'');var nq=new x(nl,ss.mkdel(nk,nk.dragLayerToReorderStart),nk.get_isLayered(),nn,no);this.$2=tab.ObjectRegistry.newView(w).call(null,[nq]);this.$0=nm;this.$3=nl.get_id();this.$1=nl.get_dataSourceName()},{get_header:function(){return this.$2},set_header:function(nk){this.$2=nk},get_content:function(){return this.$0},set_content:function(nk){this.$0=nk},get_marksSpecificationId:function(){return this.$3},get_dataSourceName:function(){return this.$1}});var z=global.tab.AccordionItemTemplate=ss.mkType(a,'tab.AccordionItemTemplate',function(nk){this.content=null;this.header=null;spiff.Template.call(this,nk);this.header=this.getElementBySelector('.tabAccordionItemHeader');this.content=this.getElementBySelector('.tabAccordionItemContent');this.domRoot.on('dragover',function(nl){nl.preventDefault()});this.domRoot.on('dragleave',function(nl){nl.preventDefault()});this.domRoot.on('dragenter',function(nl){nl.preventDefault()})},null,{createDefault:function(){return new z($("<div class='tabAccordionItem'>\n            <div class='tabAccordionItemHeader'></div>\n            <div class='tabAccordionItemContent'></div>\n            </div>"))}});var A=global.tab.AccordionTemplate=ss.mkType(a,'tab.AccordionTemplate',function(){this.itemsContainer=null;this.layersDropTargetsContainer=null;this.layersDropTargetsGlass=null;spiff.Template.call(this,$("<div class='tabAccordion'>\n            <div class='tabAccordionItems'></div>\n            <div class='layersDropTargetsContainer'></div>\n            <div class='layersDropTargetsGlass'></div>\n            </div>"));this.itemsContainer=this.getElementBySelector('.tabAccordionItems');this.layersDropTargetsContainer=this.getElementBySelector('.layersDropTargetsContainer');this.layersDropTargetsGlass=this.getElementBySelector('.layersDropTargetsGlass')},{get_allItems:function(){return this.getElementsBySelector('.tabAccordionItem')}});var B=global.tab.AccordionView=ss.mkType(a,'tab.AccordionView',function(nk,nl){this.$g=null;this.$f=null;this.$d=[];this.$e=[];this.$c=[];ss.makeGenericType(spiff.BaseView$1,[C]).call(this,nk,nl);this.$g=nk;this.$f=nl;this.update()},{dispose:function(){this.removeViews();ss.makeGenericType(spiff.BaseView$1,[C]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[C]).prototype.onViewModelPropertyChanged.call(this,nk,nl);switch(nl.get_propertyName()){case'AllItems':{this.update();break}case'ActiveItem':{this.$7(this.$g.get_activeItem());break}case'DragToReorderLayers':{this.$b();break}}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$a()},$a:function(){if(!this.addedToDom){return}this.$d.forEach(function(nk){var nl=ss.safeCast(nk,spiff.Widget);if(ss.isValue(nl)){nl.onAddedToDom()}})},removeViews:function(){for(var nk=0;nk<this.$d.length;nk++){var nl=this.$d[nk];nl.dispose()}ss.clear(this.$d);for(var nm=0;nm<this.$e.length;nm++){var nn=this.$e[nm];EventUtils.DragDropManager.removeDragSource(nn.get_template().domRoot);nn.dispose()}ss.clear(this.$e);this.$f.itemsContainer.children().remove();this.$f.layersDropTargetsContainer.children().remove();this.$f.layersDropTargetsGlass.children().remove();this.$9()},$9:function(){this.$c.forEach(function(nk){nk.dispose()});ss.clear(this.$c)},update:function(){this.removeViews();var nk=this.$g.get_items();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(nm.get_marksSpecificationId()===this.$g.get_defaultMarksSpecId()&&this.$g.get_isLayered()){continue}var nn=z.createDefault();var no=spiff.TableauClickHandler.targetAndClick(nn.header[0],this.$8(nm));no.set_stopPropagationOnEvent(false);this.$c.push(no);nn.domRoot.data('tabAccordionItem',nm);nn.header.append(nm.get_header().element);this.$e.push(nm.get_header());nn.content.hide();var np=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nm.get_content().get_viewType(),[nm.get_content().get_viewModel()]);this.$d.push(np);nn.content.append(np.get_rootElement());if(this.$g.get_isLayered()){this.$f.itemsContainer.prepend(nn.domRoot)}else{this.$f.itemsContainer.append(nn.domRoot)}}if(this.$g.get_isLayered()&&(!ss.isValue(this.$g.get_activeItem())||this.$g.get_activeItem().get_marksSpecificationId()===this.$g.get_defaultMarksSpecId())){this.$g.set_activeItem(this.$g.get_items()[this.$g.get_items().length-1])}else{this.$7(this.$g.get_activeItem())}this.$a()},$8:function(nk){return ss.mkdel(this,function(){this.$g.set_activeItem(nk)})},$7:function(nk){var nl=this.$f.domRoot.find('.tabAccordionActive').length>0;var nm=this.$f.get_allItems().get();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=$(no);var nq=new z(np);var nr=ss.referenceEquals(np.data('tabAccordionItem'),nk);nq.domRoot.toggleClass('tabAccordionActive',nr);nq.domRoot.toggleClass('tabAccordionNotActive',!nr);if(nr){if(nl){nq.content.slideDown('fast')}else{nq.content.show()}this.$g.triggerSlideDownAction()}else if(nq.content.is(':visible')){if(nl){nq.content.slideUp('fast')}else{nq.content.hide()}}}},$b:function(){if(!this.$g.get_isLayered()){return}var nk=this.$g.indexOfLayerBeingDragged;if(nk===-1){this.$f.layersDropTargetsGlass.children().remove();this.$f.layersDropTargetsContainer.children().remove();return}for(var nl=0;nl<this.$g.get_items().length;nl++){var nm=new hh(ss.mkdel(this.$g,this.$g.setLayerIndexClientSide),nl);if(nl===this.$g.get_items().length-1){nm.isTopMostDropTarget=true}var nn=0;if(nl>0){var no=this.$g.get_items()[nl];if(no.get_marksSpecificationId()===this.$g.get_activeItem().get_marksSpecificationId()){nn=this.$f.getElementBySelector('.tabAccordionActive').find('.tabAccordionItemContent').outerHeight()}}if(nl===this.$g.indexOfLayerBeingDragged||nl-1===this.$g.indexOfLayerBeingDragged){nn+=w.headerHeight;var np=new hj(ss.trunc(nn));var nq=new hk(nm,np);this.$f.layersDropTargetsContainer.prepend(nq.get_template().domRoot);continue}var nr=new hg(nm,new hf(ss.trunc(nn)));this.$f.layersDropTargetsContainer.prepend(nr.get_template().domRoot)}}});var C=global.tab.AccordionViewModel=ss.mkType(a,'tab.AccordionViewModel',function(){this.$1=0;this.$2=false;this.$3=[];this.indexOfLayerBeingDragged=-1;this.marksSpecIdBeingDragged=-1;this.$0=null;this.$2$1=null;spiff.BaseViewModel.call(this)},{add_slideDownTriggered:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_slideDownTriggered:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_defaultMarksSpecId:function(){return this.$1},set_defaultMarksSpecId:function(nk){this.$1=nk},get_isLayered:function(){return this.$2},set_isLayered:function(nk){this.$2=nk},get_items:function(){return this.$3},get_activeItem:function(){return this.$0},set_activeItem:function(nk){if(ss.referenceEquals(this.$0,nk)){return}if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_content())){this.$0.get_content().set_active(false)}var nl=this.$0;this.$0=nk;if(ss.isValue(this.$0)&&ss.isValue(this.$0.get_content())){this.$0.get_content().set_active(true)}if(ss.isValue(this.$0)){if(ss.isNullOrUndefined(nl)||!ss.referenceEquals(nl.get_dataSourceName(),this.$0.get_dataSourceName())){tab.SchemaClientCommands.setActiveDataSourceName(this.$0.get_dataSourceName(),false)}if(ss.isNullOrUndefined(nl)||nl.get_marksSpecificationId()!==this.$0.get_marksSpecificationId()){var nm={};nm['worksheet']=tsConfig.current_sheet_name;nm['paneSpec']=this.$0.get_marksSpecificationId();var nn=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-active-layer'},nm);tab.ServerCommands.executeServerCommand(nn,'none',null,null)}}this.notifyPropertyChanged('ActiveItem')},updateItems:function(nk){ss.clear(this.$3);ss.arrayAddRange(this.$3,nk);var nl=false;if(ss.isValue(this.$0)){for(var nm=0;nm<this.$3.length;nm++){var nn=this.$3[nm];if(nn.get_marksSpecificationId()===this.$0.get_marksSpecificationId()){nl=true;break}}}if(!nl){this.set_activeItem(null)}this.notifyPropertyChanged('AllItems')},dragLayerToReorderStart:function(nk,nl){this.marksSpecIdBeingDragged=nk;this.indexOfLayerBeingDragged=nl;this.notifyPropertyChanged('DragToReorderLayers')},setLayerIndexClientSide:function(nk,nl){var nm=this.$3[nk];ss.removeAt(this.$3,nk);ss.insert(this.$3,nl,nm);this.notifyPropertyChanged('AllItems')},triggerSlideDownAction:function(){this.raiseActionEvent(this.$2$1)}});var D=global.tab.AddressingDragAvatar=ss.mkType(a,'tab.AddressingDragAvatar',function(nk){this.$0=null;var nl="<span class='tab-icon-toggle tab-unification-check tabCheckboxListItemDragAvatar'>\n    <span class='icon'><span class='innerIcon tab-img-check'></span></span>\n    <span class='label'></span>\n</span>";this.$0=$(nl);var nm=nk.get_data();if(ss.isValue(nm)){this.$0.find('.label').text(nm.get_addressingName()).attr('title',nm.get_addressingName())}this.$0.toggleClass('selected',nk.get_selected())},{get_rootElement:function(){return this.$0},get_viewModel:function(){return null},dispose:function(){this.$0=null},addToDom:function(nk){nk.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){}});var E=global.tab.AddressingItemsBuilder=ss.mkType(a,'tab.AddressingItemsBuilder',function(){this.addressingFieldNames=null;this.addressingCaptions=null;this.selectedAddressingIndexes=null;this.invalidAddressingIndexes=null},{create:function(){this.$2();var nk=new spiff.ListItemViewModelCollectionBuilder;nk.itemDatas=this.$0();nk.selectionIndexes=this.$1();nk.invalidIndexes=this.invalidAddressingIndexes;nk.itemIds=E.$0(this.addressingFieldNames.length);var nl=nk;return nl.create()},$2:function(){tab.Param.verifyValue(this.addressingFieldNames,'AddressingFieldNames');tab.Param.verifyValue(this.addressingCaptions,'AddressingCaptions');tab.Param.verifyValue(this.selectedAddressingIndexes,'SelectedAddressingIndexes');tab.Param.verifyValue(this.invalidAddressingIndexes,'InvalidAddressingIndexes')},$0:function(){var nk=[];for(var nl=0,nm=this.addressingFieldNames.length;nl<nm;++nl){var nn=new iU;nn.set_addressingValue(this.addressingFieldNames[nl]);nn.set_addressingName(this.addressingCaptions[nl]);nk.push(nn)}return nk},$1:function(){var nk=_.union(this.selectedAddressingIndexes,this.invalidAddressingIndexes);var nl=_.sortBy(nk,function(nn){return nn});var nm=_.uniq(nl,true);return nm}},{$0:function(nk){var nl=[];for(var nm=0;nm<nk;++nm){nl.push('orderAddrOption_'+nm)}return nl}});var F=global.tab.AggregationSelection=ss.mkType(a,'tab.AggregationSelection',function(){this.selectedField=null;this.isRelativeDate=false});var G=global.tab.AggregationSelectionDialog=ss.mkType(a,'tab.AggregationSelectionDialog',function(nk,nl,nm,nn){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=false;tab.BaseDisposableDialog.call(this);this.$9(nk);this.$b(nl);this.$5(nm);this.$7(nn)},{$a:function(){return this.$2$1},$b:function(nk){this.$2$1=nk},$4:function(){return this.$2$2},$5:function(nk){this.$2$2=nk},$8:function(){return this.$2$3},$9:function(nk){this.$2$3=nk},$6:function(){return this.$2$4},$7:function(nk){this.$2$4=nk},$3:function(){if(ss.isNullOrUndefined(G.$2)){this.parentNode=document.createElement('div');var nk={aggregationList:this.$8(),cancel:ss.mkdel(this,this.$1),select:ss.mkdel(this,this.$2),confirmButtonText:(this.$6()?tab.Strings.DialogButtonNext:tab.Strings.DialogButtonOK)};G.$2=React.createElement(H,nk);ReactDOM.render(G.$2,this.parentNode)}},$2:function(nk){if(!ss.staticEquals(this.$a(),null)){this.$a()(nk)}this.$0()},$1:function(){if(!ss.staticEquals(this.$4(),null)){this.$4()()}this.$0()},$0:function(){G.$2=null;_.defer(ss.mkdel(this,this.dispose))}},{showAggregationSelection:function(nk,nl){(new G(nk,nl,null,false)).$3()},$0:function(nk,nl){var nm=nk;(new G(nm.filterSelectMeasure,function(nn){var no=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nm.simpleCommandModel).get_simpleCommand(),false);var np=no.commandParams||{};np['globalFieldName']=nn.selectedField.pm.fn;np['forceRelativeDate']=nn.isRelativeDate;no.commandParams=np;tab.ServerCommands.executeServerCommand(no,'immediately',null,null)},function(){var nn=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nm.simpleCommandModel).get_simpleCommand(),false);if(ss.isValue(nn.commandParams)&&ss.getKeyCount(nn.commandParams)===1&&ss.keyExists(nn.commandParams,'simpleCommandModel')){var no=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'close-quantitative-filter-dialog'},nn.commandParams);tab.ServerCommands.executeServerCommand(no,'immediately',null,null)}},true)).$3()}});var H=global.tab.AggregationSelectionDialogComponent=ss.mkType(a,'tab.AggregationSelectionDialogComponent',function(nk){this.$6=null;spiff.PureRenderComponent.call(this,nk);this.state={selectedAggregation:null};this.$6=this.$1()},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$2(),testId:'AggregationSelectionDialog',isModal:true,type:0,positioningBehavior:0,dialogWidth:375,dialogBodyStyle:{display:'flex'},footerContent:this.$3(),onCloseRequest:this.props.cancel,shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:true,showFooter:true,title:this.props.aggregationList.caption,zIndex:1000})},$3:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nm){this.$5()}),testId:'okAggregation',children:this.props.confirmButtonText,disabled:ss.isNullOrUndefined(this.state.selectedAggregation),style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace}});var nl=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nm){this.props.cancel()}),testId:'cancelAggregation',children:tab.Strings.DialogButtonCancel});return spiff.DOMElements.div({className:'tab-agg-selection-footer'},nl,nk)},$2:function(){var nk=spiff.DOMElements.div({},this.props.aggregationList.subtitle);return spiff.DOMElements.div({className:'tab-agg-selection-content'},nk,this.$0())},$0:function(){var nk;if(ss.isValue(this.state.selectedAggregation)){nk=(this.state.selectedAggregation.isRelativeDate?'relativeDate':this.state.selectedAggregation.selectedField.pm.fn.toString())}else{nk=''}var nl=React.createElement(SharedWidgets.List,{items:this.$6,onSelect:ss.mkdel(this,this.$4),selectedValue:nk,testId:'aggregation-list',style:{borderWidth:'1px',borderStyle:'solid',borderColor:SharedWidgets.TabStyles.Colors.F4,marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginBottom:SharedWidgets.TabStyles.Spacing.MediumSpace,paddingLeft:'0px',paddingRight:'0px'}});return nl},$1:function(){var nk=[];var nl=0;var nm=0;for(nl=0;nl<this.props.aggregationList.fieldDisplayList.length;nl++){var nn=this.props.aggregationList.fieldDisplayList[nl];var no=nl===this.props.aggregationList.indiexRelativeDateField;if(nn.isSelected){var np=new F;np.selectedField=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nn.fn);np.isRelativeDate=no;this.setState({selectedAggregation:np})}if(nn.showSeparator){nk.push({separator:true,value:'separator'+nm++})}var nq=(no?'relativeDate':nn.fn.toString());nk.push({content:spiff.DOMElements.div({onDoubleClick:ss.mkdel(this,function(nr){this.$5()}),key:nq,className:'tab-aggregation-option',title:nn.fieldCaption,style:{display:'flex',fontWeight:((this.props.aggregationList.indexSelectedItem===nl)?'bold':'normal')}},spiff.DOMElements.div({className:gN.getFieldIcon(nn.iconRes)}),nn.fieldCaption),value:nq})}return Array.prototype.slice.call(nk)},$4:function(nk){var nl=nk==='relativeDate';var nm=(nl?this.props.aggregationList.fieldDisplayList[this.props.aggregationList.indiexRelativeDateField].fn.toString():nk);var nn=new F;nn.selectedField=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nm);nn.isRelativeDate=nl;var no=nn;this.setState({selectedAggregation:no})},$5:function(){if(ss.isValue(this.state.selectedAggregation)){this.props.select(this.state.selectedAggregation)}}});var I=global.tab.AliasDialogEditProxy=ss.mkType(a,'tab.AliasDialogEditProxy');var J=global.tab.AnalyticsDragAvatar=ss.mkType(a,'tab.AnalyticsDragAvatar',function(nk){ss.makeGenericType(spiff.BaseView$1,[T]).call(this,nk,new K(nk.get_analyticsItem().name))});var K=global.tab.AnalyticsDragAvatarTemplate=ss.mkType(a,'tab.AnalyticsDragAvatarTemplate',function(nk){spiff.Template.call(this,$("\n        <span class='tabAuthAnalyticsDragAvatar'>\n            <div class='tabAuthAnalyticsDragAvatarLabel'></div>\n        </span>"));this.getElementBySelector('.tabAuthAnalyticsDragAvatarLabel').text(nk)});var L=global.tab.AnalyticsDropSpot=ss.mkType(a,'tab.AnalyticsDropSpot',function(nk,nl){this.$1=null;this.$0=null;this.$1=nk;this.$0=nl},{get_command:function(){return(ss.isValue(this.$1)?this.$1.simpleCommandModel:null)},get_axis:function(){return this.$0},get_feedbackType:function(){return'dropfeedbackuponentry'},directMatch:function(nk){return ss.isValue(nk)&&ss.referenceEquals(this.get_command(),nk.get_command())&&(ss.referenceEquals(this.$0,nk.$0)||ss.isNullOrUndefined(nk.$0))},indirectMatch:function(nk){return ss.isValue(nk)&&(ss.referenceEquals(this.get_command(),nk.get_command())||ss.isNullOrUndefined(this.get_command())||ss.isNullOrUndefined(nk.get_command()))&&(ss.referenceEquals(this.get_command(),nk.get_command())||ss.referenceEquals(this.$0,nk.$0)||ss.isNullOrUndefined(this.$0)||ss.isNullOrUndefined(nk.$0))},dragOver:function(nk){var nl=ss.safeCast(nk.get_payload(),P);if(ss.isValue(nl)){nl.setHoveredTarget(this)}return this},dragExit:function(nk){var nl=ss.safeCast(nk.get_payload(),P);if(ss.isValue(nl)){nl.removeHoveredTarget(this)}},acceptDrop:function(nk){var nl=ss.safeCast(nk.get_payload(),P);var nm=$.Deferred();var nn=ss.isValue(nl)&&ss.isValue(this.get_command());nm.resolve(nn);if(nn){nl.executeDropCommand(this)}return nm},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy}});var M=global.tab.AnalyticsDropTargetAxisRowTemplate=ss.mkType(a,'tab.AnalyticsDropTargetAxisRowTemplate',function(){this.axisHeader=null;spiff.Template.call(this,$("<div class='tabAdAxisRow'><span class='tabAdAxisName tabAdAxisCell'></span></div>"));this.axisHeader=this.getElementBySelector('.tabAdAxisName')},{setAxisName:function(nk){this.axisHeader.text(nk)},$1:function(){var nk=$("<span class='tabAdAxisDropSpotHolder'><span class='tabAdAxisDropSpot'></span></span>");this.domRoot.append(nk);return nk}});var N=global.tab.AnalyticsDropTargetTemplate=ss.mkType(a,'tab.AnalyticsDropTargetTemplate',function(){this.horizontalDivider=null;this.axisHolder=null;this.axisListScroller=null;this.axisList=null;this.axisScrollTopSpot=null;this.axisScrollBottomSpot=null;this.$1=null;spiff.Template.call(this,$("<div class='tabAdDropTarget'><div class='tabAdHeaderRow'><span class='tabAdDropTitle tabAdAxisCell'><div class='tabAdDropInstructionTextPre'></div><div class='tabAdDropLabel'></div><div class='tabAdDropInstructionTextPost'></div></span></div><div class='tabAdHorizontalDivider'></div><div class='tabAdAxisHolder'><div class='tabAdAxisListScroller'><div class='tabAdAxisList'></div><div class='tabAdScrollHoverTop'></div><div class='tabAdScrollHoverBottom'></div></div></div></div>"));this.horizontalDivider=this.getElementBySelector('.tabAdHorizontalDivider');this.axisHolder=this.getElementBySelector('.tabAdAxisHolder');this.axisListScroller=this.getElementBySelector('.tabAdAxisListScroller');this.axisList=this.getElementBySelector('.tabAdAxisList');this.$1=this.getElementBySelector('.tabAdDropLabel');this.axisScrollTopSpot=this.getElementBySelector('.tabAdScrollHoverTop');this.axisScrollBottomSpot=this.getElementBySelector('.tabAdScrollHoverBottom')},{setDropLabel:function(nk){var nl=nk;var nm=nl.split('|');this.getElementBySelector('.tabAdDropInstructionTextPre').text(nm[0]);this.$1.text(nm[1]);this.getElementBySelector('.tabAdDropInstructionTextPost').text(nm[2])},addDropColumnHeader:function(nk,nl,nm){var nn=$("<span class='tabAdAreaDropSpot tabAdDropCell'><div class='tabAdAreaDropImage'></div><div class='tabAdAreaDropLabel'></div></span>");var no=nn.find('.tabAdAreaDropLabel');var np=nk.split('\n');for(var nq=0;nq<nl;++nq){var nr=$('<div></div>');if(nq<np.length){nr.text(np[nq])}else{nr.html('&nbsp;')}no.append(nr)}nn.find('.tabAdAreaDropImage').addClass(nm);this.getElementBySelector('.tabAdHeaderRow').append(nn);return nn}});var O=global.tab.AnalyticsDropTargetView=ss.mkType(a,'tab.AnalyticsDropTargetView',function(nk,nl){this.$g=null;this.$f=[];ss.makeGenericType(spiff.BaseView$1,[P]).call(this,nk,new N);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$a));var nm=new gB(nl);nm.set_opaque(true);this.$g=nm;this.$g.show();this.$9(nl);if(tab.FeatureParamsLookup.getBool(31)===true){this.$g.set_opaque(false);EventUtils.DragDropManager.attachDropTarget(this.$g.element,this.$g)}},{$d:function(){return this.get_template()},$e:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7();this.$8();this.$b();this.element.css('visibility','visible')},$7:function(){var nk=tab.DoubleUtil.roundToInt(this.element.find('.tabAdDropTitle').width());var nl=this.element.find('.tabAdAxisName');for(var nm=0,nn=nl.length;nm<nn;nm++){if(nl.eq(nm).width()!==nk){nl.eq(nm).width(nk)}}},$8:function(){var nk=this.element.find('.tabAdAxisRow');if(nk.length===0){return}var nl=this.element.find('.tabAdDropCell');for(var nm=0;nm<nl.length;nm++){var nn=tab.DoubleUtil.roundToInt(nl.eq(nm).width());var no=nk.find('.tabAdAxisDropSpotHolder:eq('+nm+')');if(no.width()!==nn){no.width(nn)}}},dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$a));this.$g.dispose();ss.makeGenericType(spiff.BaseView$1,[P]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[P]).prototype.onViewModelPropertyChanged.call(this,nk,nl);this.$c()},$c:function(){var nk=this.$e().get_hoverTarget();for(var nl=0;nl<this.$f.length;nl++){var nm=this.$f[nl];nm.item1.toggleClass('tabDirectHover',nm.item2.directMatch(nk));nm.item1.toggleClass('tabIndirectHover',nm.item2.indirectMatch(nk))}},$9:function(nk){ss.clear(this.$f);this.$d().setDropLabel(this.$e().get_dropLabel());var nl=1;var nm=this.$e().get_dropZoneItems();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];nl=Math.max(nl,no.label.toString().split('\n').length)}var np=this.$e().get_dropZoneItems();for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=this.$d().addDropColumnHeader(nr.label,nl,V.getClassNameForIcon(nr.imageRes,'tabAuthAnalyticsPaneDrop'));if(nr.isEnabled){var nt=new L(nr,null);this.$f.push({item1:ns,item2:nt})}else{ns.addClass('tabAdDropDisabled')}ns.get(0).id=tab.DomUtil.makeHtmlSafeId('tabAoDropTarget-'+nr.label)}if(this.$e().get_showDropMeasures()){var nu=this.$e().get_dropMeasureNamePairs();for(var nv=0;nv<nu.length;nv++){var nw=nu[nv];var nx=new M;var ny=nw.fieldCaption;nx.setAxisName(ny);var nz=new L(null,nw);this.$f.push({item1:nx.axisHeader,item2:nz});var nA=this.$e().get_dropZoneItems();for(var nB=0;nB<nA.length;nB++){var nC=nA[nB];var nD=nx.$1();if(nC.isEnabled){nz=new L(nC,nw);this.$f.push({item1:nD,item2:nz})}else{nD.css('visibility','hidden')}nD.get(0).id=tab.DomUtil.makeHtmlSafeId('tabAoDropTarget-'+ny+nC.label)}this.$d().axisList.append(nx.domRoot)}var nE=tab.DoubleUtil.roundToInt($(nk).height())-90;this.$d().axisListScroller.css('max-height',nE+'px');var nF=new X(-1,this.$d().axisListScroller,ss.mkdel(this,this.$b));var nG=new X(1,this.$d().axisListScroller,ss.mkdel(this,this.$b));EventUtils.DragDropManager.attachDropTarget(this.$d().axisScrollTopSpot,nF);EventUtils.DragDropManager.attachDropTarget(this.$d().axisScrollBottomSpot,nG)}else{this.$d().horizontalDivider.hide()}for(var nH=0;nH<this.$f.length;nH++){var nI=this.$f[nH];EventUtils.DragDropManager.attachDropTarget(nI.item1,nI.item2)}},$b:function(){var nk=this.$d().axisListScroller;var nl=tab.DoubleUtil.roundToInt(nk.scrollTop());if(nl===0){this.$d().axisScrollTopSpot.hide()}else{this.$d().axisScrollTopSpot.show()}var nm=tab.DoubleUtil.roundToInt(this.$d().axisList.height());if(nm===0||tab.DoubleUtil.roundToInt(nk.scrollTop())+parseInt(nk.css('max-height'))>=nm){this.$d().axisScrollBottomSpot.hide()}else{this.$d().axisScrollBottomSpot.show()}},$a:function(nk){this.dispose()}});var P=global.tab.AnalyticsDropTargetViewModel=ss.mkType(a,'tab.AnalyticsDropTargetViewModel',function(nk,nl,nm){this.$1=null;this.$0=null;this.$2=null;this.$3=null;spiff.BaseViewModel.call(this);this.$0=nk;this.$1=nl;this.$2=nm},{get_dropLabel:function(){return this.$1.label},get_showDropMeasures:function(){return this.$1.showDropMeasures},get_dropZoneItems:function(){return this.$1.dropZoneItems},get_dropMeasureNamePairs:function(){return this.$0},get_hoverTarget:function(){return this.$3},set_hoverTarget:function(nk){this.$3=nk;this.notifyPropertyChanged('HoverTarget')},executeDefaultAddCommand:function(){if(ss.isValue(this.$2)){this.$2()}},executeDropCommand:function(nk){var nl=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nk.get_command()).get_simpleCommand(),false);var nm=[];if(ss.isValue(nk.get_axis())){nm.push(nk.get_axis().fn)}else{for(var nn=0;nn<this.$0.length;nn++){var no=this.$0[nn];nm.push(no.fn)}}if(nm.length>0){nl.commandParams['fieldVector']=nm}tab.ServerCommands.executeServerCommand(nl,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)},setHoveredTarget:function(nk){if(ss.isNullOrUndefined(nk.get_command())){nk=null}this.set_hoverTarget(nk)},removeHoveredTarget:function(nk){if(ss.referenceEquals(this.$3,nk)){this.set_hoverTarget(null)}},getAxisDisplayName:function(nk){return tab.ModelUtils.findContentDashboard(null).get_activeVisual().get_vizDataModel().getVizDataField(nk).get_fieldCaption()}});var Q=global.tab.AnalyticsListHeaderTemplate=ss.mkType(a,'tab.AnalyticsListHeaderTemplate',function(nk){spiff.Template.call(this,$("<div class='tabAnalyticsListHeader'><span class='tabAnalyticsListHeaderName'></span></div>"));var nl=this.getElementBySelector('.tabAnalyticsListHeaderName');nl.text(nk)});var R=global.tab.AnalyticsListItemTemplate=ss.mkType(a,'tab.AnalyticsListItemTemplate',function(){this.icon=null;this.name=null;spiff.Template.call(this,$("<div class='tabAnalyticsListItem'><span class='tabAnalyticsListItemIcon'></span><span class='tabAnalyticsListItemName'></span></div>"));this.icon=this.getElementBySelector('.tabAnalyticsListItemIcon');this.name=this.getElementBySelector('.tabAnalyticsListItemName')});var S=global.tab.AnalyticsListItemView=ss.mkType(a,'tab.AnalyticsListItemView',function(nk){ss.makeGenericType(spiff.BaseView$1,[T]).call(this,nk,new R);this.$8().name.text(this.get_itemViewModel().get_analyticsItem().name);spiff.Widget.disableTextSelectionOnElement(this.$8().name);var nl=V.getClassNameForIcon(this.get_itemViewModel().get_analyticsItem().iconRes,null);this.$8().icon.addClass(nl);var nm=this.disposables;var nn=spiff.TableauClickHandler.target(this.element[0]);var no=this.get_itemViewModel();nm.add$1(nn.onDoubleClick(ss.mkdel(no,no.executeDefaultAddCommand)));this.$7()},{get_itemViewModel:function(){return this.get_viewModel()},$8:function(){return this.get_template()},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[T]).prototype.onViewModelPropertyChanged.call(this,nk,nl);this.$7()},$7:function(){var nk=this.$8().domRoot;nk.toggleClass('disabled',!this.get_itemViewModel().get_analyticsItem().isEnabled);nk.attr('title',this.get_itemViewModel().get_analyticsItem().analyticsItemTooltip)}});var T=global.tab.AnalyticsListItemViewModel=ss.mkType(a,'tab.AnalyticsListItemViewModel',function(nk,nl){this.$0=null;this.$1=null;spiff.BaseViewModel.call(this);this.$0=nk;this.$1=nl},{get_analyticsItem:function(){return this.$0},startDrag:function(nk){if(this.get_analyticsItem().isEnabled){var nl=new P(this.$1,this.$0.dropTargetInfo,ss.mkdel(this,this.executeDefaultAddCommand));return new EventUtils.DragInstance(nl,new J(this))}return null},acceptsDragType:function(){return 1},executeDefaultAddCommand:function(){if(!this.get_analyticsItem().isEnabled){return}if(ss.isValue(this.$0.simpleCommandModel)){var nk=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(this.$0.simpleCommandModel).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(nk,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(null),null)}}});var U=global.tab.AnalyticsPaneTemplate=ss.mkType(a,'tab.AnalyticsPaneTemplate',function(){spiff.Template.call(this,$("<div class='tabAnalyticsPane'></div>"))});var V=global.tab.AnalyticsPaneView=ss.mkType(a,'tab.AnalyticsPaneView',function(nk){this.$b=[];ss.makeGenericType(spiff.BaseView$1,[W]).call(this,nk,new U);this.$9();EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$8))})))},{$a:function(){return this.get_viewModel()},dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[W]).prototype.dispose.call(this)},onViewModelPropertyChanged:function(nk,nl){this.$9()},$9:function(){this.$7();var nk=true;var nl=this.$a().get_analyticsItemViewModelLists();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new Q(nn.item1);this.element.append(no.domRoot);if(nk){nk=false}else{no.domRoot.addClass('tabAnalyticsListHeaderSpacer')}for(var np=0;np<nn.item2.length;np++){var nq=nn.item2[np];var nr=new S(nq);this.element.append(nr.element);this.$b.push(nr);EventUtils.DragDropManager.attachDragSource(nr.element,nr.get_itemViewModel())}}},$7:function(){this.element.children().remove();for(var nk=0;nk<this.$b.length;nk++){var nl=this.$b[nk];nl.dispose()}ss.clear(this.$b)},$8:function(nk){var nl=ss.safeCast(nk.get_payload(),P);if(ss.isNullOrUndefined(nl)){return}var nm=$("<div class='tabAuthTempGlassForDropTarget'></div>");nm.css({position:'absolute',top:0+'px',bottom:0+'px',left:0+'px',right:0+'px'});$('.dashboardSpacer').append(nm);var nn=new O(nl,nm.get(0));nn.addToDom(nm);var no=function(){nm.remove()};nn.add_disposed(no);this.disposables.add$1(new tab.CallOnDispose(function(){nn.remove_disposed(no)}))}},{getClassNameForIcon:function(nk,nl){nl=ss.coalesce(nl,'tabAuthAnalyticsPane');return nl+'-'+tab.TabResources.getResourceName(tab.TabResources.lookupFullResourceAlias(nk))}});var W=global.tab.AnalyticsPaneViewModel=ss.mkType(a,'tab.AnalyticsPaneViewModel',function(){this.$2=null;spiff.BaseViewModel.call(this)},{get_title:function(){return tab.Strings.AuthLeftPaneTabLabelAnalytics},get_id:function(){return'analytics'},get_contentViewType:function(){return V},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return null},get_analyticsItemViewModelLists:function(){var nk=[];if(ss.isValue(this.$2)){var nl=this.$2.get_analyticsPresModel().analyticsObjectGroups;for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=[];if(ss.isValue(nn.analyticsObjectItems)){for(var np=0;np<nn.analyticsObjectItems.length;np++){var nq=nn.analyticsObjectItems[np];if(ss.isValue(nq.fieldCaptionPairs)){no.push(new T(nq,nq.fieldCaptionPairs))}}}nk.push({item1:nn.name,item2:no})}}return nk},get_analyticsPaneModel:function(){return this.$2},set_analyticsPaneModel:function(nk){this.$1();this.$2=nk;this.$0();this.$2.add_newAnalyticsPane(ss.mkdel(this,this.$0))},dispose:function(){this.$1();spiff.BaseViewModel.prototype.dispose.call(this)},$1:function(){if(ss.isValue(this.$2)){this.$2.remove_newAnalyticsPane(ss.mkdel(this,this.$0))}},$0:function(){this.notifyPropertyChanged('AnalyticsPane')}});var X=global.tab.AnalyticsScrollSpot=ss.mkType(a,'tab.AnalyticsScrollSpot',function(nk,nl,nm){this.$5=0;this.$2=null;this.$3=-1;this.$4=null;this.$5=nk*10;this.$2=nl;this.$4=nm},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){this.$3=window.setInterval(ss.mkdel(this,this.$1),100);return this},dragExit:function(nk){this.$0()},acceptDrop:function(nk){this.$0();var nl=$.Deferred();nl.resolve(false);return nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy},$1:function(){var nk=tab.DoubleUtil.roundToInt(this.$2.scrollTop());this.$2.scrollTop(nk+this.$5);if(nk===tab.DoubleUtil.roundToInt(this.$2.scrollTop())){this.$0()}else{this.$4()}},$0:function(){if(this.$3>0){window.clearInterval(this.$3);this.$3=-1}}});var Y=global.tab.AnalyticsVizObjectDragAvatar=ss.mkType(a,'tab.AnalyticsVizObjectDragAvatar',function(nk){this.$4=null;spiff.Widget.call(this,$("<span class='tabAuthAnalyticsDragAvatar'><div class='tabAuthAnalyticsDragAvatarLabel'></div></span>"));this.$4=this.element.find('.tabAuthAnalyticsDragAvatarLabel');switch(nk){case 4:case 5:case 6:case 3:{break}case 7:case 8:default:{this.set_label('hitObjectType: '+nk.toString());break}}},{get_viewModel:function(){return null},get_rootElement:function(){return this.element},get_label:function(){return this.$4.text()},set_label:function(nk){this.$4.text(nk)}});var Z=global.tab.AnalyticsVizObjectDragInstance=ss.mkType(a,'tab.AnalyticsVizObjectDragInstance',function(nk,nl){this.$6=$.Deferred();this.$8=null;this.$7=null;this.$5=null;this.$4$1=0;cf.call(this,null,new Y(nl));this.set_hitObjectType(nl);this.draggedObject=this;this.$3(nk);this.$5=spiff.CustomCursor.noOp},{get_analyticsDragInfoPromise:function(){return this.$6.promise()},get_hitObjectType:function(){return this.$4$1},set_hitObjectType:function(nk){this.$4$1=nk},get_isRefLineDrag:function(){return this.get_hitObjectType()===4||this.get_hitObjectType()===5||this.get_hitObjectType()===6},get_fields:function(){return this.$7},get_fieldNames:function(){return _.map(this.get_fields(),function(nk){return nk.get_globalName()})},get_pills:function(){return null},get_pill:function(){return null},get_readyToDrop:function(){return this.get_drop().state()==='resolved'},get_defaultDropCursor:function(){return this.$5},get_feedbackType:function(){return'dropfeedbackuponentry'},$3:function(nk){var nl=new spiff.Glass(nk,false);nl.set_opaque(true);this.$8=nl;this.$8.show();EventUtils.DragDropManager.attachDropTarget(this.$8.element,this);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$4))},$1:function(){if(ss.isValue(this.$8)){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$4));EventUtils.DragDropManager.detachDropTarget(this.$8.element);this.$8.dispose();this.$8=null}},$4:function(nk){this.$1()},getFormulaPromise:function(nk){var nl=$.Deferred();this.$6.done(ss.mkdel(this,function(nm){var nn=new tab.GetRefLineFormulaCmd;nn.c['worksheet']=tsConfig.current_sheet_name;nn.c['referenceLineId']=nm.refLineId;nn.c['referenceLineLodCalcType']=nk;nn.c['paneId']=nm.paneId;nn.invoke().done(function(no){nl.resolve(no.formula)}).fail(function(no){nl.reject.apply(nl,null)})}));return nl.promise()},getDropCursor:function(nk){return spiff.CustomCursor.noOp},hasOnlyFields:function(){return true},hasOnlyPills:function(){return false},resolve:function(nk){if(ss.isValue(nk)){var nl=nk;if(ss.keyExists(nl,'refLineId'.toString())){this.resolve$1(nk)}else{this.reject(null)}}else{this.reject(null)}},resolve$1:function(nk){if(this.finalDrop.state()==='resolved'){return}var nl=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nk.fn);this.$7=(ss.isNullOrUndefined(nl)?[]:[nl]);this.drag=nk.drag||{shelfDropModels:[]};this.get_dragAvatar().set_label(nk.label);this.finalDrop.resolve(this);this.$6.resolve(nk)},reject:function(nk){if(this.finalDrop.state()==='resolved'){return}this.finalDrop.reject(this);this.$6.reject.apply(this.$6,null)},addShelfField:function(nk,nl,nm,nn,no){this.$2(nk.get_shelfType(),nl[0],nn)},addEncodingFields:function(nk,nl,nm,nn,no){this.$2(nk.get_shelfType(),nl[0],nn)},dispose:function(){this.$1()},$2:function(nk,nl,nm){this.$6.done(ss.mkdel(this,function(nn){if(nk==='filter-shelf'){var no=new tab.DropReferenceLineOnFilterShelfCmd;no.c['fn']=nn.fn;no.c['shelfDropTargetPosition']=nm;no.c['refLineId']=nn.refLineId;no.c['paneId']=nn.paneId;no.c['simpleCommandModel']=nn.removeSimpleCommandModel;no.c['worksheet']=tsConfig.current_sheet_name;no.set_uiBlocking('immediately');no.invoke()}else{var np=new tab.DropReferenceLineOnShelfCmd;np.c['fn']=nl.get_globalName();np.c['shelfDropTargetPosition']=nm;np.c['refLineId']=nn.refLineId;np.c['paneId']=nn.paneId;np.c['worksheet']=tsConfig.current_sheet_name;np.set_uiBlocking('immediately');np.invoke()}}))},dropToNowhereAction:function(){this.$6.done(function(nk){if(ss.isValue(nk)&&ss.isValue(nk.removeSimpleCommandModel)){tab.CommandUtils.executeSimpleCommand(nk.removeSimpleCommandModel,'immediately')}})},dragOver:function(nk){return this},dragExit:function(nk){},acceptDrop:function(nk){return $.Deferred().resolve(true).promise()},getDropTarget:function(nk){return this}},{installVizDragOverride:function(){tab.ModuleManager.load$1(tab.IVizZoneModule).call(null,[]).done(function(nk){nk.addVizDragHandler(Z.$3);nk.addAsyncVizDragHandler(Z.$4);nk.addVizDragApprover(Z.$2)})},$2:function(nk){return Z.$0(nk.get_result())},$4:function(nk,nl){var nm=$.Deferred();var nn=nk.get_vizHitTestDebouncer().getAsync(nl);nn.done(function(no){nm.resolve(Z.$3(nk,nl))});return nm.promise()},$3:function(nk,nl){if(!nl.get_IsRightMouseEvent()&&nk.get_vizHitTestDebouncer().isWithinLastHitTestDistance(nl)&&Z.$0(nk.get_vizHitTestDebouncer().get_current().get_result())){var nm=new Z(nk.get_rootElement()[0],nk.get_vizHitTestDebouncer().get_current().get_result().get_hitObjectType());Z.requestAnalyticsObjectDragInfo(nk.get_vizHitTestDebouncer().get_current()).done(function(nn){nm.resolve$1(nn);if(ss.isValue(nn.removeSimpleCommandModel)){nm.$5=spiff.CustomCursor.delete$1}}).fail(function(nn){nm.reject(null)});EventUtils.DragDropManager.startDrag(nm,nl,null);return true}return false},$0:function(nk){if(tsConfig.current_sheet_type==='story'){return false}switch(nk.get_hitObjectType()){case 4:case 5:case 6:case 3:{return!Z.$1(nk)}default:{return false}}},$1:function(nk){return(nk.get_id()&32768)!==0},requestAnalyticsObjectDragInfo:function(nk){switch(nk.get_result().get_hitObjectType()){case 4:case 5:case 6:{return Z.requestRefLineDragInfo(nk)}case 3:{return Z.requestTrendLineDragInfo(nk)}default:{var nl=$.Deferred();return nl.reject.apply(nl,null)}}},requestRefLineDragInfo:function(nk){var nl=$.Deferred();var nm=new tab.GetRefLineDragInfoCmd;nm.c['visualIdPresModel']=nk.get_visualId();nm.c['worksheet']=nk.get_sheetId();nm.c['objectId']=nk.get_result().get_id()|0;nm.c['paneId']=(new tab.PaneIdModel.$ctor1(nk.get_paneColumnIndex(),nk.get_paneRowIndex(),nk.get_paneLayerIndex(),4294967295)).get_presModel();nm.c['paneSpec']=ss.coalesce(tab.ModelUtils.findActivePaneSpecId(),0)|0;nm.invoke().done(function(nn){nl.resolve(nn.analyticsObjectDragInfo)}).fail(function(nn){nl.reject.apply(nl,null)});return nl.promise()},requestTrendLineDragInfo:function(nk){var nl=$.Deferred();var nm=new tab.GetTrendLineDragInfoCmd;nm.c['visualIdPresModel']=nk.get_visualId();nm.c['worksheet']=nk.get_sheetId();nm.c['paneId']=(new tab.PaneIdModel.$ctor1(nk.get_paneColumnIndex(),nk.get_paneRowIndex(),nk.get_paneLayerIndex(),4294967295)).get_presModel();nm.invoke().done(function(nn){nl.resolve(nn.analyticsObjectDragInfo)}).fail(function(nn){nl.reject.apply(nl,null)});return nl.promise()}});var ba=global.tab.AnimationFormatPaneComponent=ss.mkType(a,'tab.AnimationFormatPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=new tab.WidgetPluginContainerProps;nk.moduleName=ba.$1;var nl={};nl['originIsWeb']=true;nl['userPreferencesURL']=bX.createUserPrefsUrl();nk.initialProps=nl;return React.createElement(tab.WidgetPluginContainer,nk)}});var bb=global.tab.AnimationSettingsSidePaneProps=ss.mkType(a,'tab.AnimationSettingsSidePaneProps',function(){});var bc=global.tab.AnimationSidePaneProxy=ss.mkType(a,'tab.AnimationSidePaneProxy',function(){new hP(bc.id,ss.mkdel(this,this.openOrUpdateCallback),ss.mkdel(this,this.openOrUpdateCallback),ss.mkdel(this,this.closeCallback),'doc:open-animation-side-pane-event','doc:update-animation-side-pane-event','doc:close-animation-side-pane-event')},{openOrUpdateCallback:function(nk,nl){var nm=React.createElement(ba,new bb);ReactDOM.render(nm,nl)},closeCallback:function(){}});var bd=global.tab.ArrangeSectionComponent=ss.mkType(a,'tab.ArrangeSectionComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){var nk=this.$0();return spiff.DOMElements.div({className:['tab-ZoneLayoutInfoItem','tab-ArrangeSectionContainer'].join(' '),key:'layout-arrange-section'},[spiff.DOMElements.div({className:'tab-ArrangeSection'},nk)])},$0:function(){return null}},{create:function(nk){return React.createElement(bd,nk)}});var be=global.tab.AugmentedDropTarget=ss.mkType(a,'tab.AugmentedDropTarget',function(nk,nl,nm){this.key=null;this.hitTarget=null;this.dropTarget=null;this.key=nk;this.hitTarget=nl;this.dropTarget=nm});var bf=global.tab.AuthoringCompletedHandler=ss.mkType(a,'tab.AuthoringCompletedHandler',null,null,{exitAuthoring:function(nk){if(bf.$4(nk)){var nl=bf.$0(nk);if(ss.isNullOrUndefined(nl)){bf.redirectToView(null,nk);return}tab.SavingUtil.loadSaveController().done(function(nm){nm.checkUnusedFiles(function(){if(nm.get_hasUnusedFiles()){var nn=(tab.FeatureFlags.isEnabled('SaveToPublishButton')?tab.Strings.UnusedFilesInSaveWorkbookPublishedMessage:tab.Strings.UnusedFilesInSaveWorkbookSavedMessage);nl.set_messageHtml(nl.get_messageHtml()+(' '+nn))}nl.show()})})}else{bf.redirectToView(null,nk)}},$0:function(nk){var nl=tab.ApplicationModel.get_instance().get_workbook();if(nl.get_isEditingPublishedDatasource()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_Datasource_Description,function(nm){bf.$3(nm)},tab.Strings.AuthMastheadDone_Confirm_Datasource_Title,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Deny)}if(tsConfig.is_metrics_authoring){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanSave_Metrics,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title_Metrics,tab.Strings.AuthMastheadDone_Confirm_CanSave_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanSave_Deny)}if(tab.FeatureFlags.isEnabled('SaveToPublishButton')){if(tab.SavingUtil.isSaveEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanPublish,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanPublish_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanPublish_Deny)}if(tab.SavingUtil.isSaveAsEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanPublishAs,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanPublishAs_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanPublishAs_Deny)}if(tsConfig.is_guest){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanLogin_Publish,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title_Publish,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Confirm_Publish,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Deny_Publish)}}else{if(tab.SavingUtil.isSaveEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanSave,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title,tab.Strings.AuthMastheadDone_Confirm_CanSave_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanSave_Deny)}if(tab.SavingUtil.isSaveAsEnabled()){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanSaveAs,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanSaveAs_Deny)}if(tsConfig.is_guest){return tab.ConfirmationViewModel.createWithTitleConfirmDeny(tab.Strings.AuthMastheadDone_Confirm_CanLogin,function(nm){bf.$2(nm,nk)},tab.Strings.AuthMastheadDone_Confirm_Title,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Confirm,tab.Strings.AuthMastheadDone_Confirm_CanLogin_Deny)}}return null},$4:function(nk){if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')){return(tsConfig.is_metrics_authoring||nk.get_isWorkbookModifiedAuthoring())&&!cd.get_instance().get_autoSaveEnabled()}else{return tsConfig.is_metrics_authoring||nk.get_isWorkbookModifiedAuthoring()}},$2:function(nk,nl){switch(nk){case'confirm':{tab.SavingUtil.saveWorkbook(function(nm){bf.redirectToView(nm,nl)},null);break}case'deny':{tab.SessionServerCommands.destroySessionAndForward(function(){bf.redirectToView(null,nl)},cd.get_instance().get_autoSaveEnabled());break}case'cancel':{break}}},$3:function(nk){if(nk==='confirm'){var nl={};nl['endSessionAfterPublish']=true;tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nl),'immediately',null,null)}else if(nk==='deny'){tab.SessionServerCommands.destroySessionAndForward(function(){bf.redirectToView(null,null)},cd.get_instance().get_autoSaveEnabled())}},redirectToView:function(nk,nl){tab.NavigationUtil.closeWindowIfOpenedByTableau(tab.Log.get$1(bq));var nm=tab.VizUriModel.createForCurrentWindowLocation(null);if(nm.get_isAuthorNewWorkbookUri()){if(tsConfig.isPublic){var nn=window.location.protocol+'//'+window.location.host+'/me';tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowSelf(),nn)}else{tab.NavigationUtil.redirectToDataSources(nm.get_queryParams())}}else{var no=bf.$1(nk,nl);if(tsConfig.isPublic){no.set_showVizHome(true)}no.setWindowLocation(null)}},$1:function(nk,nl){var nm=null;if(ss.isValue(nk)){nm=tab.VizUriModel.createVizUriModelForViewingSheetInWorkbook(tsConfig.current_sheet_name,nk)}else{var nn=nl.get_outerDashboardRepositoryUrl();if(!tab.MiscUtil.isNullOrEmpty$1(nn)){nm=tab.VizUriModel.createForViewingSheet(nn)}}return nm||tab.VizUriModel.createForViewingSheet(tsConfig.origin_repository_url)}});var bg=global.tab.AuthoringDashboardView=ss.mkType(a,'tab.AuthoringDashboardView',function(nk){this.$s=null;this.$r=2;this.$v=null;this.$u=null;this.$y=null;this.$t=null;this.$w=null;this.$x=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;ss.makeGenericType(spiff.BaseView$1,[bh]).call(this,nk,spiff.Template.fromHtml(''));if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.$g()}else{this.$h()}this.set_zoneReadiness(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[nd,nc,Object])).call(null,[this.get_viewModel().zoneReadiness]));this.disposables.add$1(this.get_zoneReadiness());this.set_dashboardGrid(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dZ,dT,dX])).call(null,[this.get_viewModel().dashboardGrid]));this.set_emptyDashboardView(tab.ObjectRegistry.newView(fF).call(null,[this.get_viewModel().emptyDashboardViewModel]));if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){this.set_dashboardPortPreview(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ei,eh,Object])).call(null,[this.get_viewModel().dashboardPortPreview]));this.disposables.add$1(this.get_dashboardPortPreview())}this.disposables.add$1(this.get_dashboardGrid());this.disposables.add$1(this.get_emptyDashboardView());this.disposables.add(ss.mkdel(this,this.$9));this.$n()},{get_zoneSelection:function(){return this.$3$1},set_zoneSelection:function(nk){this.$3$1=nk},get_zoneReadiness:function(){return this.$3$2},set_zoneReadiness:function(nk){this.$3$2=nk},get_dashboardGrid:function(){return this.$3$3},set_dashboardGrid:function(nk){this.$3$3=nk},get_dashboardPortPreview:function(){return this.$3$4},set_dashboardPortPreview:function(nk){this.$3$4=nk},get_emptyDashboardView:function(){return this.$3$5},set_emptyDashboardView:function(nk){this.$3$5=nk},get_dashboardSelectionView:function(){return this.$3$6},set_dashboardSelectionView:function(nk){this.$3$6=nk},get_glass:function(){return this.$3$7},set_glass:function(nk){this.$3$7=nk},get_isMoveShortcutAllowed:function(){return this.addedToDom&&this.get_viewModel().get_isDashboard()&&(tab.FeatureFlags.isEnabled('FlexibleDashboard')?this.get_viewModel().dashboardSelectionViewModel.get_hasSelectedFloatingZonesOrGroupZones():this.get_viewModel().get_hasSelectedFloatingZones())},get_isDeleteShortcutAllowed:function(){return this.addedToDom&&this.get_viewModel().get_isFlexibleDashboard()&&this.get_viewModel().get_hasSelectedZonesOnFlexibleDashboard()},get_isResizeShortcutAllowed:function(){if(this.get_viewModel().get_isMultiSelectFeatureEnabled()){return this.get_viewModel().get_selectedZoneCount()===1&&this.get_isMoveShortcutAllowed()}else{return this.get_isMoveShortcutAllowed()}},$p:function(){return this.$r},$q:function(nk){if(nk===this.$r){return}this.$r=nk;var nl;switch(this.$r){case 0:{nl='ns-resize';break}case 1:{nl='ew-resize';break}case 2:{nl='default';break}default:{nl='default';break}}this.$s.css('cursor',nl)},$g:function(){this.set_dashboardSelectionView(tab.ObjectRegistry.newView(ej).call(null,[this.get_viewModel().dashboardSelectionViewModel]));this.disposables.add$1(this.get_dashboardSelectionView())},$h:function(){if(!this.get_viewModel().get_isZoneWidgetryEnabled()){return}this.set_zoneSelection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ng,nf,Object])).call(null,[this.get_viewModel().zoneSelection]));this.disposables.add$1(this.get_zoneSelection());EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$d))})))},$n:function(){this.$f();if(!tsConfig.is_mobile){var nk=this.get_viewModel().get_isDashboard()&&!this.get_viewModel().get_isStoryboard()&&this.get_viewModel().get_currentDevice()==='default';if(!this.get_viewModel().get_isDashboard()){this.$l()}else if(nk){var nl=ss.mkdel(this,function(){return this.get_isResizeShortcutAllowed()});var nm=this.get_viewModel();this.$v=new kF(nl,ss.mkdel(nm,nm.keyboardResizeFloatingZone));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$v);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$v)}));var nn=ss.mkdel(this,function(){return this.get_isMoveShortcutAllowed()});var no=this.get_viewModel();this.$u=new iH(nn,ss.mkdel(no,no.moveFloatingZone));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$u);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$u)}));var np=ss.mkdel(this,function(){return this.get_isDeleteShortcutAllowed()});var nq=this.get_viewModel();this.$t=new eO(np,ss.mkdel(nq,nq.deleteSelectedZonesOnFlexibleDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$t);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$t)}));this.$y=new en(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$y);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$y)}));this.$m()}}},$l:function(){var nk=this.get_viewModel();this.$x=new lq(ss.mkdel(nk,nk.showActionListDialogForWorksheet));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$x);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$x)}))},$m:function(){var nk=this.get_viewModel();this.$w=new lp(ss.mkdel(nk,nk.showActionListDialogForDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$w);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$w)}));var nl=this.get_viewModel();this.$x=new lq(ss.mkdel(nl,nl.showActionListDialogForActiveWorksheetOnDashboard));KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$x);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$x)}))},$f:function(){if(ss.isValue(this.$v)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$v);this.$v=null}if(ss.isValue(this.$y)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$y);this.$y=null}if(ss.isValue(this.$u)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$u);this.$u=null}if(ss.isValue(this.$t)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$t);this.$t=null}if(ss.isValue(this.$w)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$w);this.$w=null}if(ss.isValue(this.$x)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$x);this.$x=null}},$8:function(){if(!tab.FeatureFlags.isEnabled('FlexibleDashboard')){ReactDOM.unmountComponentAtNode(this.get_zoneSelection().get_rootElement()[0])}ReactDOM.unmountComponentAtNode(this.get_zoneReadiness().get_rootElement()[0]);ReactDOM.unmountComponentAtNode(this.get_dashboardGrid().get_rootElement()[0]);if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){ReactDOM.unmountComponentAtNode(this.get_dashboardPortPreview().get_rootElement()[0])}},addToDom:function(nk){this.$8();this.$s=tab.WorkbookView.findDashboardContainer();this.$k();if(!tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.get_zoneSelection().addToDom(this.$s)}var nl=this.$s.find('.tab-dashboard');this.get_emptyDashboardView().addToDom(nl);this.get_zoneReadiness().addToDom(nl);this.get_dashboardGrid().addToDom(nl);if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){this.get_dashboardPortPreview().addToDom(this.$s);this.get_dashboardPortPreview().addClass('tab-dashboard-port-preview-host');this.get_dashboardPortPreview().get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'})}this.disposables.add$2([spiff.EventUtil.bindWithDispose(nl,'mousemove',ss.mkdel(this,this.$e)),spiff.EventUtil.bindWithDispose(nl,'mouseleave',ss.mkdel(this,this.$c))]);this.onAddedToDom();this.$o()},onAddedToDom:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.get_dashboardSelectionView().addToDom(this.$s)}spiff.Widget.prototype.onAddedToDom.call(this)},$o:function(){var nk=ss.mkdel(this,function(){if(!tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.get_viewModel().zoneSelection.updateZoneChromeOnScroll()}});this.$s.scroll(nk)},$c:function(nk){this.get_viewModel().dashExited();this.$s.css('cursor','')},$9:function(){if(ss.isValue(this.get_glass())){this.get_glass().remove_click(ss.mkdel(this,this.$b));this.set_glass(tab.MiscUtil.dispose$1(this.get_glass()))}},$k:function(){this.$9();if(this.get_viewModel().get_shouldShowGlass()){var nk=tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner');var nl=new spiff.Glass(this.$s.find('.tab-gutter')[0],false);nl.set_opaque(nk);nl.set_zIndex(702);this.set_glass(nl);this.get_glass().add_click(ss.mkdel(this,this.$b));this.get_glass().element.addClass('tab-dsdGlass');this.get_glass().show()}},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[bh]).prototype.onViewModelPropertyChanged.call(this,nk,nl);if(nl.get_propertyName()==='tabAutoGeneratedDeviceLayouts'||nl.get_propertyName()==='tabAuthDevice'){this.$s=tab.WorkbookView.findDashboardContainer();this.$k()}if(nl.get_propertyName()==='tabSheetType'){this.$n()}},$b:function(){this.get_viewModel().launchUseCustomLayoutDialog()},$7:function(nk){nk.get_rootElement().addClass('tab-dashDragDrop');nk.get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'});if(tsConfig.current_sheet_type==='story'){this.$s=tab.WorkbookView.findDashboardContainer()}nk.addToDom(this.$s)},$d:function(nk){if(!(this.get_viewModel().get_isDashboard()||this.get_viewModel().get_isStoryboard())){return}if(this.get_viewModel().get_isStoryboard()){var nl=ss.safeCast(nk,li);if(ss.isValue(nl)){return}}this.get_viewModel().zoneSelection.hideZoneChrome();this.$i(nk);var nm=ss.safeCast(nk,fT);if(ss.isValue(nm)){nm.viewModel.add_disposed(ss.mkdel(this,function(no){this.get_viewModel().zoneSelection.showZoneChrome()}));return}var nn=ss.safeCast(nk,dS);if(ss.isValue(nn)){nn.get_viewModel().add_disposed(ss.mkdel(this,function(no){this.get_viewModel().zoneSelection.showZoneChrome()}));return}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$j))},$i:function(nk){var nl=ss.safeCast(nk,dS);var nm=null;if(ss.isValue(nl)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dO,dP,Object])).call(null,[nl.get_viewModel()])}var nn=ss.safeCast(nk,fT);if(ss.isValue(nn)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[fV,fU,Object])).call(null,[nn.viewModel])}var no=ss.safeCast(nk,dy);if(ss.isValue(no)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dz,kE,Object])).call(null,[no.viewModel])}if(ss.isValue(nm)){this.$7(nm)}},$j:function(nk){this.get_viewModel().zoneSelection.showZoneChrome();EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$j))},$e:function(nk){if(!this.get_viewModel().get_isDashboard()){this.$q(2);return}var nl=this.$a(nk);if(tab.FeatureFlags.isEnabled('FlexibleDashboard')&&this.get_viewModel().get_isFlexibleDashboard()){if(this.get_viewModel().isMousePositionOverCanvasWhitespace(nl.x,nl.y)){this.get_viewModel().updateReadyZoneId(0)}}else if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.$q(this.get_viewModel().dashboardSelectionViewModel.zoneResizeViewModel.getDraggableFeedbackOnLegacyDashboard(nl.x,nl.y))}else{this.$q(this.get_viewModel().zoneResizeViewModel.getDraggableFeedbackOnLegacyDashboard(nl.x,nl.y))}},$a:function(nk){var nl=this.$s.offset();var nm=this.$s.scrollLeft();var nn=tab.DoubleUtil.roundToInt(this.$s.scrollTop());var no=nk.pageX-ss.trunc(nl.left)-this.get_viewModel().get_dashboardContentOffsetLeft()+nm;var np=nk.pageY-ss.trunc(nl.top)-this.get_viewModel().get_dashboardContentOffsetTop()+nn;return{x:no,y:np}}},{dashboardGeometry:function(){var nk=tab.DashboardView.findDashboard();var nl=nk.offset();var nm=tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();return{l:ss.trunc(nl.left)+nm,t:ss.trunc(nl.top)+nm,w:tab.DoubleUtil.roundToInt(nk.innerWidth()),h:tab.DoubleUtil.roundToInt(nk.innerHeight())}}});var bh=global.tab.AuthoringDashboardViewModel=ss.mkType(a,'tab.AuthoringDashboardViewModel',function(nk){this.$6=null;this.$7=false;this.emptyDashboardViewModel=null;this.leftPanelPaneViewModel=null;this.leftLayoutPaneViewModel=null;this.dashboardSelectionViewModel=null;this.zoneSelection=null;this.zoneReadiness=null;this.zoneResizeViewModel=null;this.dashboardGrid=null;this.dashboardPortPreview=null;spiff.BaseViewModel.call(this);this.$6=nk;this.emptyDashboardViewModel=new fG(nk);if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.$4()}else{this.$5()}if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){this.dashboardPortPreview=new ei(nk);this.disposables.add$1(this.dashboardPortPreview)}this.dashboardGrid=new dZ(nk);this.leftPanelPaneViewModel=new eg(nk);this.leftLayoutPaneViewModel=new hz(nk);this.disposables.add$2([this.dashboardGrid,this.leftLayoutPaneViewModel,this.leftLayoutPaneViewModel]);tab.DashboardModel.add_storyPointDeleted(ss.mkdel(this,this.handleStoryPointDeleted));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.DashboardModel.remove_storyPointDeleted(ss.mkdel(this,this.handleStoryPointDeleted))})));this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nl){nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.$0));nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.$1))}),ss.mkdel(this,function(nl){nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.$0));nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.$1))})))},{get_visible:function(){return this.$7},set_visible:function(nk){if(this.$7===nk){return}this.$7=nk;this.notifyPropertyChanged('visible');if(ss.isValue(this.dashboardSelectionViewModel)){this.dashboardSelectionViewModel.set_visible(nk)}},get_dashboardContentOffsetTop:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_dashboardContentOffsetLeft:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_isDashboard:function(){var nk=this.$6.get_model();return ss.isValue(nk)&&nk.get_isDashboard()},get_isFlexibleDashboard:function(){var nk=this.$6.get_model();return ss.isValue(nk)&&nk.get_isDashboard()&&nk.get_isFlexibleLayoutEnabled()},get_isStoryboard:function(){return this.$6.get_model().isStory()},get_isMultiSelectFeatureEnabled:function(){return tab.ModelUtils.isMultiSelectFeatureEnabled(this.$6.get_model())},get_currentDevice:function(){return this.$6.get_model().get_currentDeviceLayout()},get_shouldShowGlass:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){return this.$6.get_model().get_isCurrentLayoutAutoGenerated()}else{return this.get_currentDevice()!=='default'}},get_selectedZoneCount:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneIDs().length:0)},get_selectedZoneIDs:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneIDs():null)},get_selectedZoneID:function(){return(ss.isValue(this.$6.get_model())?this.$6.get_model().get_activeZoneID():0)},get_hasSelectedFloatingZones:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){return this.dashboardSelectionViewModel.get_hasSelectedFloatingZones()}else{return ss.isValue(this.zoneSelection.get_selectedZone())&&this.zoneSelection.get_selectedZone().get_isFloating()}},get_hasSelectedZonesOnFlexibleDashboard:function(){return this.dashboardSelectionViewModel.get_hasSelectedZones()},get_isZoneWidgetryEnabled:function(){return tabBootstrap.Affordances.isOn('zoneWidgetry')},$4:function(){this.dashboardSelectionViewModel=new ek(this.$6);this.zoneReadiness=new nd(this.$6,ss.mkdel(this.dashboardSelectionViewModel.zoneResizeViewModel,this.dashboardSelectionViewModel.zoneResizeViewModel.isEdgeOrParentsResizable));this.disposables.add$2([this.dashboardSelectionViewModel,this.zoneReadiness])},$5:function(){this.zoneResizeViewModel=new ne(this.$6);this.zoneSelection=new ng(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable),null,false);this.zoneReadiness=new nd(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable));this.disposables.add$2([this.zoneResizeViewModel,this.zoneSelection,this.zoneReadiness])},startTiledResize:function(nk,nl,nm,nn,no){var np=new dz(this.$6.get_model(),nn);var nq=np.startDrag(nk,nm,no);EventUtils.DragDropManager.startDrag(nq,nl,null)},dashExited:function(){this.$6.get_model().set_readyZoneID(0)},moveFloatingZone:function(nk,nl){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.dashboardSelectionViewModel.moveZones(nk,nl)}else{this.zoneSelection.get_resizePreviewViewModel().delayMoveZoneCall(this.zoneSelection.get_selectedZone(),nk,nl)}},keyboardResizeFloatingZone:function(nk,nl){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.dashboardSelectionViewModel.keyboardResizeZone(nk,nl)}else{this.zoneSelection.get_resizePreviewViewModel().delayResizeZoneCall(this.zoneSelection.get_selectedZone(),nk,nl)}},deleteSelectedZonesOnFlexibleDashboard:function(){var nk=[];var nl=this.dashboardSelectionViewModel.get_selectedZones();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];nk.push(nn.get_zoneId())}tab.DashboardZoneCommands.hideZones(Array.prototype.slice.call(nk))},handleStoryPointDeleted:function(nk){if(this.get_isStoryboard()){var nl=this.$6.get_model().zonesModel.getTextZonesToRemoveFromStoryPoint(nk);if(nl.length>0){tab.DashboardZoneCommands.hideZones(Array.prototype.slice.call(nl))}}},showActionListDialogForActiveWorksheetOnDashboard:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){var nk=this.dashboardSelectionViewModel.get_selectedZones();if(nk.length===1&&nk[0].get_zoneCommonModel().get_zoneType()==='viz'){var nl=nk[0].get_worksheetName();tab.DashboardClientCommands.showActionListDialogForWorksheet(nl,true)}else if(nk.length>1){for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];if(this.$2(nn.get_zoneCommonModel().get_zoneType())){this.showActionListDialogForWorksheet();return}}}}else if(ss.isValue(this.zoneSelection)&&ss.isValue(this.zoneSelection.get_selectedZone())&&this.zoneSelection.get_selectedZone().get_zoneType()==='viz'){var no=this.zoneSelection.get_selectedZone().get_worksheetName();if(tab.FeatureFlags.isEnabled('ActionListChangeDefaultFilter')){tab.DashboardClientCommands.showActionListDialogForWorksheet(no,false)}else{tab.DashboardClientCommands.showActionListDialogForWorksheet(no,true)}}},showActionListDialogForWorksheet:function(){tab.DashboardClientCommands.showActionListDialogForWorksheet(tsConfig.current_sheet_name,true)},showActionListDialogForDashboard:function(){tab.DashboardClientCommands.showActionListDialogForDashboard(tsConfig.current_sheet_name)},launchUseCustomLayoutDialog:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&this.$6.get_model().get_isCurrentLayoutAutoGenerated()){tab.DashboardClientCommands.launchUseCustomLayoutDialog(this.$6.get_model().get_sheetName(),this.$6.get_model().get_currentDeviceLayout())}},updateReadyZoneId:function(nk){if(ss.isValue(this.$6.get_model())){this.$6.get_model().set_readyZoneID(nk)}},isMousePositionOverCanvasWhitespace:function(nk,nl){return ss.isValue(this.dashboardSelectionViewModel)&&ss.isValue(this.dashboardSelectionViewModel.zoneResizeViewModel)&&this.dashboardSelectionViewModel.zoneResizeViewModel.isNotOnAnyZone(nk,nl)},$2:function(nk){return nk==='viz'||nk==='size'||nk==='shape'||nk==='color'||nk==='map'},$3:function(){this.notifyPropertyChanged('tabSheetType');this.notifyPropertyChanged('tabAuthDevice')},$0:function(){this.notifyPropertyChanged('tabAutoGeneratedDeviceLayouts')},$1:function(){this.notifyPropertyChanged('tabAuthDevice')}});var bi=global.tab.AuthoringEventDetectionUtil=ss.mkType(a,'tab.AuthoringEventDetectionUtil',null,null,{initializeReturnToTabEventListener:function(nk){window.addEventListener('focus',nk)}});var bj=global.tab.AuthoringInitializer=ss.mkType(a,'tab.AuthoringInitializer',null,null,{createAuthoringViewModel:function(){return new bZ(tab.ApplicationModel.get_instance().get_workbook())},init:function(){if(!tsConfig.is_authoring){return}tab.MiscUtil.dispose$1(bj.$c);bj.$c=new tab.DisposableHolder;tab.StartupUtils.callAfterModelsInitialized(function(){if(!tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){bj.$4()}else{bj.$9()}tab.StartupUtils.callEachTimeModelsInitialized(bj.$4,bj.$c)});if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){tab.StartupUtils.callOnceAfterCommandControllerInitialized(bj.$4)}if(tsConfig.is_desktop){var nk=tab.ApplicationModel.get_instance();var nl=nk.modelInstance(tab.PresentationModeModel).call(nk);nl.add_changed(bj.$6());bj.$c.add(function(){nl.remove_changed(bj.$6())})}},deInit:function(){tab.MiscUtil.dispose$1(bj.$b)},$6:function(){return function(){bj.$4();tab.ApplicationViewModel.updatePortSize()}},$4:function(){bj.$b=tab.MiscUtil.dispose$1(bj.$b);if(bj.$7()){return}bj.$0();bj.$9();bj.$8();bj.$5();bj.$3();bj.$2()},$0:function(){bj.$b=bj.createAuthoringViewModel();tab.ObjectRegistry.newView(bY).call(null,[bj.$b])},$7:function(){var nk=tabBootstrap.UrlLocationHashManager.getValueFromUrlHash('guest')==='n';if(nk){tabBootstrap.UrlLocationHashManager.removeEntryFromUrlHash('guest');if(tsConfig.is_authoring&&tsConfig.is_guest){var nl=tab.WindowHelper.getPathAndSearch(window.self);var nm='/signin'+'?externalRedirect='+encodeURIComponent(nl)+'&site='+encodeURIComponent(tsConfig.site_url_name);tab.WindowHelper.setLocationHref(window.self,nm);return true}}return false},$5:function(){var nk=tab.WindowHelper.getLocation(window.self);var nl=tab.UriExtensions.getUriQueryParameters(nk.search);if(ss.keyExists(nl,':showSaveAs')){tab.SavingUtil.saveWorkbookAs(null,null)}},$3:function(){var nk=tab.VizUriModel.createForCurrentWindowLocation(null);if(nk.get_isAuthorNewWorkbookUri()||nk.get_isAuthoringDatasourceUri()){var nl=bY.get_instance().get_leftArea().get_viewModel().get_leftPanelViewModel().get_schemaViewerViewModel();nl.done(function(nm){if(ss.isValue(nm.get_dataSchema())){bj.$1(nm.get_dataSchema())}else{var nn=null;nn=function(no){bj.$1(no);nm.remove_dataSchemaModelChanged(nn)};nm.add_dataSchemaModelChanged(nn)}})}},$1:function(nk){var nl=tab.VizUriModel.createForCurrentWindowLocation(null);var nm=nk.get_dataSourcesList();if(nm.length===0||nm.length===1&&ss.referenceEquals(nm[0],nk.get_parametersDataSource())){if(!ss.isNullOrEmptyString(nl.get_graphQLTableId())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nn){nn.showCreateConnectionDialogForPreselectedTable(nl.get_graphQLTableId())})}else if(!ss.isNullOrEmptyString(nl.get_graphQLDatabaseId())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nn){nn.showCreateConnectionDialogForPreselectedDatabase(nl.get_graphQLDatabaseId())})}else{tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nn){nn.showCreateConnectionDialogForEmptyWorkbook()})}}},$2:function(){if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&ss.isValue(tsConfig.revisionInfo)&&tsConfig.revisionInfo.newerRevisionExists){fn.showDraftNotCurrentDialog()}},$8:function(){bt.get_instance().removeFromDom()},$9:function(){if(ss.isValue(bY.get_instance())&&ss.isValue(bY.get_instance().get_viewModel())&&ss.isValue(bY.get_instance().get_viewModel().get_authoringTabNavViewModel())){var nk=tab.VizUriModel.createForCurrentWindowLocation(null);if(nk.get_isAuthoringDatasourceUri()){bY.get_instance().get_viewModel().get_authoringTabNavViewModel().selectDataTab()}}}});var bk=global.tab.AuthoringLeftAreaTemplate=ss.mkType(a,'tab.AuthoringLeftAreaTemplate',function(nk){spiff.Template.call(this,nk)});var bl=global.tab.AuthoringLeftAreaView=ss.mkType(a,'tab.AuthoringLeftAreaView',function(nk,nl){this.internalLeftPanelView=null;this.dom=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[bm]).call(this,nk,nl);this.internalLeftPanelView=tab.ObjectRegistry.newView(hQ).call(null,[this.get_viewModel().get_leftPanelViewModel()]);this.dom=this.get_template();this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.updateLeftAreaForSheetType));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.updateLeftAreaForSheetType))})))},{get_leftPanelView:function(){return this.internalLeftPanelView},get_floatingLeftPanel:function(){return this.$3$1},set_floatingLeftPanel:function(nk){this.$3$1=nk},dispose:function(){if(ss.isValue(this.internalLeftPanelView)){this.internalLeftPanelView.dispose()}this.dom.dispose();ss.makeGenericType(spiff.BaseView$1,[bm]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.addLeftPanelToDom();this.updateLeftAreaForSheetType(this.get_viewModel().get_sheetType())},addLeftPanelToDom:null,updateLeftAreaForSheetType:null});var bm=global.tab.AuthoringLeftAreaViewModel=ss.mkType(a,'tab.AuthoringLeftAreaViewModel',function(nk,nl,nm,nn){this.$d=null;this.$a=null;this.$b=null;this.$9=0;this.$c=0;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=false;spiff.BaseViewModel.call(this);this.$b=nk;this.$a=nl;this.$d=nm;this.set_controlMode(nn);this.$8();this.$7();tab.ApplicationModel.get_instance().get_workbook().add_sheetTypeChanged(ss.mkdel(this,this.$0));this.$d.add_formatPaneCreated(ss.mkdel(this,this.$6));this.$b.add_sidePaneExpansionStateChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().get_workbook().remove_sheetTypeChanged(ss.mkdel(this,this.$0));this.$d.remove_formatPaneCreated(ss.mkdel(this,this.$6));this.$b.remove_sidePaneExpansionStateChanged(ss.mkdel(this,this.$1))})));if(!tsConfig.is_mobile){tab.FormatContainerModel.get_formatPaneModel().add_updated(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.FormatContainerModel.get_formatPaneModel().remove_updated(ss.mkdel(this,this.$4))})))}},{$0:function(nk){this.$d.updatePaneForSheetType(nk);this.raiseActionEvent$1(Object).call(this,this.$2$1,nk);this.$5(nk)},add_sheetTypeChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_sheetTypeChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_sidePaneExpansionStateChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_sidePaneExpansionStateChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_sidePaneVisibilityChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_sidePaneVisibilityChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_controlModeChanged:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_controlModeChanged:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},add_leftAreaResized:function(nk){this.$2$5=ss.delegateCombine(this.$2$5,nk)},remove_leftAreaResized:function(nk){this.$2$5=ss.delegateRemove(this.$2$5,nk)},add_leftAreaResizingEnded:function(nk){this.$2$6=ss.delegateCombine(this.$2$6,nk)},remove_leftAreaResizingEnded:function(nk){this.$2$6=ss.delegateRemove(this.$2$6,nk)},add_sidePaneResized:function(nk){this.$2$7=ss.delegateCombine(this.$2$7,nk)},remove_sidePaneResized:function(nk){this.$2$7=ss.delegateRemove(this.$2$7,nk)},get_sheetType:function(){return this.get_leftPanelViewModel().get_currentSheetType()},get_leftPanelViewModel:function(){return this.$d},get_sidePaneExpansionState:function(){return this.$b.get_sidePaneExpansionState()},set_sidePaneExpansionState:function(nk){this.$3(nk)},get_controlMode:function(){return this.$9},set_controlMode:function(nk){if(this.$9===nk){return}if(this.get_panelIsHidden()&&nk===1){return}this.$9=nk;this.raiseActionEvent$1(iY).call(this,this.$2$4,this.$9)},get_panelIsHidden:function(){return this.$2$8},set_panelIsHidden:function(nk){this.$2$8=nk},get_leftAreaWidth:function(){return this.$c},set_leftAreaWidth:function(nk){if(this.$c===nk){return}this.$c=nk;this.raiseActionEvent$1(ss.Int32).call(this,this.$2$5,this.$c)},get_expandedSidePaneWidth:function(){return this.$a.get_width()},set_expandedSidePaneWidth:function(nk){this.$a.set_width(nk)},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);if(ss.isValue(this.$d)){this.$d.dispose()}},$8:function(){this.$a.add_resized(ss.mkdel(this,this.$2));this.disposables.add$2([new tab.CallOnDispose(ss.mkdel(this,function(){this.$a.remove_resized(ss.mkdel(this,this.$2))})),tab.DesktopSidePaneSynchronizer.connectToResizedEvent(this.$a)])},$7:function(){var nk=ss.mkdel(this,function(nl){nl=!nl;this.raiseActionEvent$1(Boolean).call(this,this.$2$3,nl)});tab.DesktopSidePaneSynchronizer.connectToVisibilityChangedEvent(nk)},leftAreaResizeEnded:function(){this.raiseActionEvent$1(ss.Int32).call(this,this.$2$6,this.get_leftAreaWidth())},$2:function(nk){this.raiseActionEvent$1(ss.Int32).call(this,this.$2$7,nk)},sidePaneResizeEnded:function(){this.$a.resizeEnded();this.leftAreaResizeEnded()},$1:function(){this.raiseActionEvent$1(Object).call(this,this.$2$2,this.get_sidePaneExpansionState())},$3:function(nk){var nl=new tab.SetSidePaneExpansionStateCmd;nl.c['sidePaneExpansionState']=nk;nl.set_localWork(ss.mkdel(this,function(nm){var nn=nm.makeMutablePresModel(this.$b,false);nn.sidePaneExpansionState=nk;bm.$0(nm,nn,'doc:side-pane-expansion-state-changed-event'.toString())}));nl.invoke()},$6:function(){if(ss.isNullOrUndefined(this.get_leftPanelViewModel().get_formattingPaneViewModel())){return}var nk=ss.mkdel(this,function(){this.set_controlMode(0)});this.get_leftPanelViewModel().get_formattingPaneViewModel().done(ss.mkdel(this,function(nl){nl.add_hidden(nk);this.disposables.add$1(new tab.CallOnDispose(function(){nl.remove_hidden(nk)}))}))},$5:function(nk){if(nk==='worksheet'||nk==='dashboard'||nk==='story'){this.set_panelIsHidden(false)}else{this.set_panelIsHidden(true)}},$4:function(){if(tab.FormatContainerModel.get_formatPaneModel().get_isVisible()){this.set_controlMode(1)}else{this.set_controlMode(0)}}},{$0:function(nk,nl,nm){var nn=nk.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);var no={};no['genSidePaneExpansionStatePresModel']=nl;nn.presentationLayerNotification=[{keyId:nm,presModelHolder:no}]}});var bn=global.tab.AuthoringLeftPaneType=ss.mkEnum(a,'tab.AuthoringLeftPaneType',{dataSchemaPane:0,analyticsPane:1,formatPane:2,dashboardPane:3,storyContentPane:4,storyLayoutPane:5,layoutPane:6});var bo=global.tab.AuthoringMenuBarComponent=ss.mkType(a,'tab.AuthoringMenuBarComponent',function(nk,nl){this.$G=0;this.$J=0;this.$L=0;this.$N=false;this.$K=null;this.$H=[];this.$I=new tab.DisposableHolder;this.$E=null;this.$M=null;this.$F=null;this.$O=null;React.PureComponent.call(this,nk,nl);this.state={openedMenuId:null,collapsedMenuIds:[],publishButtonMenuIsOpen:false,hasNarrowWidth:false,publishButtonAnchorSet:false,userDismissedPublishCallout:false,authoringLeftAreaWidth:'auto'};this.$K=_.throttle(ss.mkdel(this,this.$a),50,{leading:false,trailing:true});this.$E=ss.mkdel(this,function(nm){this.$M=ReactDOM.findDOMNode(nm);this.setState({publishButtonAnchorSet:true})});this.$F=ss.mkdel(this,function(nm){this.$O=ReactDOM.findDOMNode(nm)})},{$D:function(){return{overflow:'hidden',textOverflow:'ellipsis',maxWidth:this.state.publishButtonMaxWidth}},componentDidMount:function(){this.$I.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(nk){this.$K()})));this.$b()},$g:function(){var nk=$(ReactDOM.findDOMNode(this.refs['menu-bar-ref']));this.$J=0;for(var nl=0;nl<this.$H.length;nl++){var nm=this.$H[nl];var nn=nk.find('.'+nm.$1);if(ss.isNullOrUndefined(nn)){continue}nm.$4=nn.outerWidth(true);this.$J+=nm.$4}if(tab.FeatureFlags.isEnabled('SaveToPublishButton')){var no=nk.find('.'+'tabAuthMenuBarDraftIndicator');var np=((no.length>0)?no.outerWidth(true):0);this.$G=220+np}},componentDidUpdate:function(nk){this.$N=!_.isEqual(nk,this.props);this.$b()},componentWillUnmount:function(){this.$I.dispose()},render:function(){if(ss.isValue(this.props.menuItems)){ss.clear(this.$H);for(var nk=0;nk<this.props.menuItems.length;nk++){var nl={$:this.props.menuItems[nk]};var nm=this.$H;var nn=new h;nn.$3=nl.$.title;nn.$1=nl.$.cssClassName;nn.$0=ss.mkdel({item:nl,$this:this},function(no,np){this.$this.props.itemClickedCallback(this.item.$.itemId,no,np)});nn.$2=ss.mkdel({item:nl,$this:this},function(no,np){this.$this.props.itemEnteredCallback(this.item.$.itemId,no,np)});nm.push(nn)}}if(tab.FeatureFlags.isEnabled('SaveToPublishButton')){return spiff.DOMElements.div({ref:'menu-bar-ref',className:'tabAuthMenuBar'+' '+'tabAuthMenuBarNewHeaderLayout'},this.$p(),this.$h(),this.$v(),((this.props.showPublishCallout&&!this.state.userDismissedPublishCallout)?ss.mkdel(this,this.$u)():null))}else{return spiff.DOMElements.div({ref:'menu-bar-ref',className:'tabAuthMenuBar'+' '+'tabAuthMenuBarOriginalHeaderLayout'},this.$n(),this.$r())}},$y:function(){return spiff.DOMElements.div({className:'tabAuthMenuBarWorkbook',title:this.props.workbookDisplayName},this.props.workbookDisplayName)},$p:function(){var nk=(ss.isNullOrEmptyString(this.state.authoringLeftAreaWidth)?{}:{width:this.state.authoringLeftAreaWidth});return spiff.DOMElements.div({className:'tabAuthMenuBarLeftHeaderArea',style:nk},spiff.ReactElement.div$1('tabAuthMenuBarLeftUpperArea',[(this.state.hasNarrowWidth?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tabAuthMenuBarLeftHeaderWorkbookInfo',style:{maxWidth:this.state.workbookNameDivMaxWidth}},this.$y(),(this.props.isDraft?(function(){return spiff.ReactElement.div$1('tabAuthMenuBarDraftIndicator',[tab.Strings.AuthMenuBarDraftIndicator])})():null))})():null)]),spiff.ReactElement.div$1('tabAuthMenuBarMenus',[this.$l()]))},$h:function(){return(!this.state.hasNarrowWidth?ss.mkdel(this,function(){return spiff.ReactElement.div$1('tabAuthMenuBarCenterHeaderArea',[(this.props.isDraft?(function(){return spiff.ReactElement.div$1('tabAuthMenuBarDraftIndicator',[tab.Strings.AuthMenuBarDraftIndicator])})():null),this.$y()])})():null)},$v:function(){var nk=spiff.ReactElement.div$1('tabAuthMenuFlexSpace',[]);return spiff.ReactElement.div$1('tabAuthMenuBarRightHeaderArea',[nk,this.$m(),this.$w(),this.$x(),this.$o(),(this.$A()?ss.mkdel(this,function(){return this.$t()})():null),spiff.ReactElement.div$1('tabAuthMenuBarDivider',[]),this.$q(),spiff.ReactElement.div$1('tabAuthMenuBarDivider',[]),this.$i()])},$u:function(){if(ss.isNullOrUndefined(this.$M)){return null}if(this.props.willAutoSaveEnableOnPublish){return React.createElement(fS,{anchorElement:this.$M,contentTitle:tab.Strings.AuthFirstPublishInformationToastTitle,contentText:tab.Strings.AuthFirstPublishInformationToastText,learnMoreToken:'server-autosave',onClose:ss.mkdel(this,function(){this.setState({userDismissedPublishCallout:true})})})}else{return React.createElement(fS,{anchorElement:this.$M,contentTitle:tab.Strings.AuthFirstPublishInformationToastTitle,onClose:ss.mkdel(this,function(){this.setState({userDismissedPublishCallout:true})})})}},$i:function(){var nk=new Object;nk.iconClassName='tabAuthMenuBarExitButton';nk.customClassName='tabAuthMenuBarExit';nk.title=tab.Strings.AuthMenuBarExit;nk.key='tabAuthMenuBarExitButton';nk.onKeyPress=ss.mkdel(this,function(nn){if(nn.charCode===32||nn.charCode===13||nn.charCode===108){this.props.exitClicked()}});nk.tabIndex=0;nk.ariaLabelName=tab.Strings.AuthoringMenuBarCloseButtonLabel;var nl=nk;var nm=new EventUtils.EventHandleSpec;nm.tap=ss.mkdel(this,function(nn){this.props.exitClicked()});return EventUtils.EventForwarder.div(nm,{className:'tabAuthMenuBarExitContainer'},React.createElement(spiff.IconButtonComponent,nl))},$n:function(){if(tsConfig.is_mobile_app){return null}return spiff.ReactElement.div$1('tabAuthMenuBarHeaderArea',[spiff.ReactElement.div$1('tabAuthMenuBarWorkbook',[this.props.workbookDisplayName]),this.$i()])},$5:function(){var nk=this.props.publishOptions[0];var nl={buttonType:2,handleClick:nk.onExecute,testId:'authMenuBarPublishButtonSingle',children:nk.displayName,disabled:!nk.isEnabled,ref:this.$E,style:this.$D()};return spiff.ReactElement.div$1('tabAuthMenuBarPublishButtonContainer',[React.createElement(SharedWidgets.ButtonWidget,nl)])},$d:function(nk){for(var nl=0;nl<this.props.publishOptions.length;nl++){var nm=this.props.publishOptions[nl];if(ss.referenceEquals(nm.displayName,nk)){nm.onExecute(null)}}this.$3()},$C:function(nk){this.setState({publishButtonMenuIsOpen:!this.state.publishButtonMenuIsOpen})},$3:function(){this.setState({publishButtonMenuIsOpen:false})},$7:function(){var nk=this.props.publishOptions[0];var nl={buttonType:2,handleClick:nk.onExecute,testId:'authMenuBarPublishButtonMainPart',children:tab.Strings.AuthMenuBarPublishButtonPublish,ref:this.$E,style:this.$D()};return React.createElement(SharedWidgets.ButtonWidget,nl)},$9:function(){if(ss.isNullOrUndefined(this.$M)||ss.isNullOrUndefined(this.$O)){return null}var nk=[];for(var nl=1;nl<this.props.publishOptions.length;nl++){var nm=this.props.publishOptions[nl];var nn={displayValue:nm.displayName,value:nm.displayName};nk.push(nn)}var no={anchorEl:this.$M,toggleEl:this.$O,anchorOrigin:{vertical:'bottom',horizontal:'left'},stackedOrigin:{vertical:'top',horizontal:'left'},allowAutoPosition:true,onSelect:ss.mkdel(this,function(np){this.$d(np)}),requestCloseAll:ss.mkdel(this,this.$3),menuItemInfos:nk,menuStyle:{minWidth:120},id:'authMenuBarPublishButtonFlyout',testId:'authMenuBarPublishButtonFlyout',key:'authMenuBarPublishButtonFlyout'};return React.createElement(SharedWidgets.FlyoutListMenuWidget,no)},$8:function(){var nk={kind:'primary',isOpen:this.state.publishButtonMenuIsOpen,onClick:ss.mkdel(this,this.$C),testId:'authMenuBarPublishButtonMenuPart','aria-controls':'authMenuBarPublishButtonFlyout','aria-label':tab.Strings.AuthMenuBarPublishButtonMenuAriaLabel,children:(this.state.publishButtonMenuIsOpen?[this.$9()]:null),ref:this.$F};return React.createElement(SharedWidgets.MenuButtonWidget,nk)},$6:function(){var nk={button:this.$7(),menuButton:this.$8()};return spiff.ReactElement.div$1('tabAuthMenuBarPublishButtonContainer',[React.createElement(SharedWidgets.SplitButtonWidget,nk)])},$t:function(){if(this.props.publishOptions.length===1){return this.$5()}else{return this.$6()}},$A:function(){return tab.FeatureFlags.isEnabled('SaveToPublishButton')||tab.FeatureFlags.isEnabled('EditPublishedDataSource')},$B:function(){return tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&!cd.get_instance().get_autoSaveEnabled()&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri()},$l:function(){var nk=0;if(this.props.isMenuOpen){var nl=$('.tabMenu');var nm={};var nn=ss.Int32.tryParse(nl.css('z-index'),nm);if(!nn){}nk=nm.$}return spiff.DOMElements.div({className:'tabAuthMenuBarCommandMenus',style:{zIndex:nk}},this.$4(),this.$s())},$m:function(){var nk=this.props.isWorkbookTemplateSampleData;var nl=(nk?('tabAuthMenuBarSampleDataSpinner'+' active'):'tabAuthMenuBarSampleDataSpinner');return spiff.DOMElements.div({className:nl},(nk?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'waiting',style:{textAlign:'center'}},spiff.DOMElements.div({className:'centering'},React.createElement(SharedWidgets.ActivitySpinnerWidget,{testId:'waiting',shouldShowUnderlay:false,spinnerSize:14})))})():null))},$w:function(){var nk=this.props.isWorkbookTemplateSampleData;var nl=(nk?('tabAuthMenuBarSampleDataMsg'+' active'):'buttonHidden');return spiff.DOMElements.div({className:nl},(nk?(function(){return spiff.DOMElements.div({},tab.Strings.WorkbookTemplatesSampleData)})():null))},$x:function(){return spiff.ReactElement.div$1('tabAuthMenuBarSavingStatusMessage',[((tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&!this.props.isWorkbookTemplateSampleData)?this.props.status:null)])},$o:function(){return(!tab.MiscUtil.isNullOrEmpty$1(this.props.lastPublishedDSDate)?ss.mkdel(this,function(){return spiff.ReactElement.div$1('tabAuthMenuBarLastPublishedDSDateMessage',[ss.formatString('{0}: {1}',tab.Strings.LastPublished,this.props.lastPublishedDSDate)])})():null)},$q:function(){var nk;var nl=(this.props.isLoggedOn?'userMenu':'logOnItem');if(tsConfig.isPublic){nk=spiff.DOMElements.div({className:'tabAuthMenuBarPublic',style:{maxWidth:this.state.localMenusDivMaxWidth}},this.props.userTitle)}else{var nm={maxWidth:this.state.localMenusDivMaxWidth};nk=spiff.ReactElement.div$1('tabAuthMenuBarLocalMenus',[this.$k(this.props.userTitle,nl,nm,ss.mkdel(this,function(){this.$0(this.props.userClicked,nl)}))])}return nk},$r:function(){var nk=spiff.ReactElement.div$1('tabAuthMenuFlexSpace',[]);return spiff.ReactElement.div$1('tabAuthMenuBarMenus',[this.$l(),nk,this.$m(),this.$w(),this.$o(),(this.$B()?ss.mkdel(this,function(){return this.$x()})():null),(this.$A()?ss.mkdel(this,function(){return this.$t()})():null),this.$q()])},$4:function(){var nk=[];for(var nl=0;nl<this.$H.length;nl++){var nm={$:this.$H[nl]};nk.push(this.$j(nm.$.$3,nm.$.$1,ss.mkdel({menu:nm,$this:this},function(){this.$this.$0(this.menu.$.$0,this.menu.$.$1)})))}return nk},$j:function(nk,nl,nm){return this.$k(nk,nl,null,nm)},$k:function(nk,nl,nm,nn){var no=[];no.push('tabAuthMenuBarMenu');no.push(nl);var np=no;if(this.props.isMenuOpen&&ss.referenceEquals(nl,this.state.openedMenuId)){np.push('opened')}if(ss.contains(this.state.collapsedMenuIds,nl)){np.push('buttonHidden')}var nq=new EventUtils.EventHandleSpec;nq.tap=function(nr){nn()};nq.firstTouch=function(nr){nr.preventDefault()};return EventUtils.EventForwarder.div(nq,{key:nl},spiff.DOMElements.div({className:np.join(' '),key:nk,style:nm||{},onMouseEnter:ss.mkdel(this,function(nr){this.$c(nr.currentTarget)})},nk))},$s:function(){var nk=[];nk.push('tabAuthMenuBarMenu');nk.push('moreMenu');var nl=nk;if(this.state.collapsedMenuIds.length===0){nl.push('buttonHidden')}if(this.props.isMenuOpen&&'moreMenu'===this.state.openedMenuId){nl.push('opened')}var nm=new Object;nm.iconClassName='tabAuthMenuBarMoreIcon';nm.customClassName=nl.join(' ');nm.key='moreMenu';var nn=nm;var no=new EventUtils.EventHandleSpec;no.tap=ss.mkdel(this,function(np){this.$1(this.props.moreClicked,'moreMenu')});no.firstTouch=function(np){np.preventDefault()};return EventUtils.EventForwarder.div(no,{onMouseEnter:ss.mkdel(this,function(np){this.$c(np.currentTarget)})},React.createElement(spiff.IconButtonComponent,nn))},$0:function(nk,nl){var nm=ReactDOM.findDOMNode(this.refs['menu-bar-ref']);var nn=$(nm).find('.'+nl);var no=this.$f(nl);this.setState({openedMenuId:nl});nk(new spiff.ShowMenuOptions(nn,false),no)},$1:function(nk,nl){var nm=ReactDOM.findDOMNode(this.refs['menu-bar-ref']);var nn=$(nm).find('.'+nl);var no=this.$f(nl);this.setState({openedMenuId:nl});var np=[];for(var nq=0;nq<this.$H.length;nq++){var nr={$:this.$H[nq]};if(ss.contains(this.state.collapsedMenuIds,nr.$.$1)){np.push(spiff.MenuItem.newActionItem(nr.$.$3,ss.mkdel({item:nr,$this:this},function(){this.$this.$0(this.item.$.$0,'moreMenu')}),true,''))}}nk(new spiff.ShowMenuOptions(nn,false),no,np)},$2:function(nk,nl){var nm=nk-this.$J-nl;return nm<this.$G},$a:function(){if(!tab.FeatureFlags.isEnabled('SaveToPublishButton')){this.$e();return}var nk=$(ReactDOM.findDOMNode(this.refs['menu-bar-ref']));var nl=nk.width();if(nl===this.$L&&!this.$N){return}this.$N=false;this.$L=nl;var nm=nk.find('.'+'tabAuthMenuBarRightHeaderArea').outerWidth();var nn=nl-nm-40;var no=this.$2(nl,nm);if(no!==this.state.hasNarrowWidth){this.setState({hasNarrowWidth:no})}this.$z(nl,nm);if(!no||this.$J<nn){if(this.state.collapsedMenuIds.length!==0){this.setState({collapsedMenuIds:[]})}if(ss.compareStrings(this.state.authoringLeftAreaWidth,'auto',true)!==0){this.setState({authoringLeftAreaWidth:'auto'})}return}var np=nk.find('.'+'tabAuthMenuBarWorkbook').outerWidth()+'px';if(!(ss.compareStrings(this.state.authoringLeftAreaWidth,np,true)===0)){this.setState({authoringLeftAreaWidth:np})}var nq=[];var nr=true;for(var ns=0;ns<this.$H.length;ns++){var nt=this.$H[ns];if(!nr||nn<nt.$4){nq.push(nt.$1);nr=false}else{nn-=nt.$4}}if(this.state.collapsedMenuIds.length!==nq.length){this.setState({collapsedMenuIds:nq})}},$z:function(nk,nl){this.setState({localMenusDivMaxWidth:nl*0.2+'px',publishButtonMaxWidth:nl*0.3+'px',workbookNameDivMaxWidth:nk*0.1875+'px'})},$e:function(){var nk=ReactDOM.findDOMNode(this.refs['menu-bar-ref']);var nl=$(nk).find('.'+'tabAuthMenuBarMenus').width();var nm=$(nk).find('.'+'tabAuthMenuBarLocalMenus').outerWidth();var nn=nl-nm-62;var no=[];var np=true;for(var nq=0;nq<this.$H.length;nq++){var nr=this.$H[nq];if(!np||nn<nr.$4){no.push(nr.$1);np=false}else{nn-=nr.$4}}if(this.state.collapsedMenuIds.length!==no.length){this.setState({collapsedMenuIds:no})}},$b:function(){this.$g();this.$a()},$c:function(nk){var nl=$(nk);if(nl.children().hasClass('moreMenu')){this.$1(this.props.moreMouseEntered,'moreMenu')}else{for(var nm=0;nm<this.$H.length;nm++){var nn=this.$H[nm];if(nl.hasClass(nn.$1)){this.$0(nn.$2,nn.$1);break}}}},$f:function(nk){return this.props.isMenuOpen&&ss.isValue(this.state.openedMenuId)&&ss.equalsT(this.state.openedMenuId,nk)}});var bp=global.tab.AuthoringMenuBarTelemetry=ss.mkType(a,'tab.AuthoringMenuBarTelemetry',null,null,{$0:function(){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Authoring.Exit',null)}},$3:function(nk,nl,nm,nn){if(!(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry'))){return}var no=new tab.MenuItemTelemetryConfigOptions;no.set_commands(nl);no.menuItems=nn;no.set_menuItem(nm);no.set_menuPrefix(nk);no.set_menuTextMayBeSensitive(true);var np=no;var nq=tab.CommandsTelemetryUtils.getMenuItemTelemetryInfoFromMenuAndCommands(np);if(ss.isValue(nq)){bp.$4('Server',nk,nq.get_commandIndexInFlattenedList(),nq.fullMenuItemName,nq.get_commandReadId(),nq.get_commandName())}else{}},$4:function(nk,nl,nm,nn,no,np){tab.OnlineAnalyticsClient.logEvent('Authoring.MenuItem',ss.mkdict(['ItemType',nk,'Menu',nl,'Item',no,'Index',nm,'FullName',nn,'Command',np]))},$2:function(nk,nl,nm){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){bp.$4('Local',nk,nm,tab.CommandsTelemetryUtils.joinToPrefix(nk,nl.readId,':'),nl.readId,'')}},$1:function(nk){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){var nl=nk.match(bp.$6)||[];var nm=nl.length;tab.OnlineAnalyticsClient.logEvent('Authoring.HelpSearch',ss.mkdict(['Query',nk,'Length',nk.length,'Words',nm]))}}});var bq=global.tab.AuthoringMenuBarViewModel=ss.mkType(a,'tab.AuthoringMenuBarViewModel',function(nk){this.$M=null;this.$L=null;this.$Q=null;this.$C=null;this.$E=false;this.$H=false;this.$I=false;this.$N=true;this.$O=false;this.$J=false;this.$P=false;this.$D=0;this.$B=null;this.$K=null;this.$F=true;this.$G=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$Q=nk;this.$Q.add_uiModeChanged(ss.mkdel(this,this.incrementProps));var nl=ss.mkdel(this,function(no){this.incrementProps()});this.$Q.add_sheetTypeChanged(nl);var nm=ss.mkdel(this,function(no){this.incrementProps()});this.$Q.get_commands().add_commandsChanged(nm);tab.JumpstartRefreshJobController.get_instance().add_activeJumpstartSampleData(ss.mkdel(this,this.$k));if(ss.isValue(this.$Q.get_dataSchema())){this.$Q.get_dataSchema().add_newActiveDataSource(ss.mkdel(this,this.$h))}var nn=ss.mkdel(this,function(no){this.incrementProps()});cd.get_instance().add_statusUpdate(nn);this.$o();tab.WorkgroupServerCommands.get_getSessionInfo().done(ss.mkdel(this,function(no){this.$N=no.site.logoutEnabled}));this.$z();if((tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&cd.get_instance().get_willAutoSaveEnableOnPublish()||this.$7())&&(tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewWorkbookUriWithConnectTo()||tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewDatasourceUri())){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(no){no.callOnceOnShown(ss.mkdel(this,function(){no.callOnceAfterClose(ss.mkdel(this,function(){this.$b()}))}))}))}this.$Q.get_draftStatus().add_draftStatusChanged(ss.mkdel(this,this.$e));this.disposables.add(ss.mkdel(this,function(){this.$Q.remove_uiModeChanged(ss.mkdel(this,this.incrementProps));this.$Q.remove_sheetTypeChanged(nl);this.$Q.get_commands().remove_commandsChanged(nm);this.$Q.get_draftStatus().remove_draftStatusChanged(ss.mkdel(this,this.$e));tab.JumpstartRefreshJobController.get_instance().remove_activeJumpstartSampleData(ss.mkdel(this,this.$k));if(ss.isValue(this.$Q.get_dataSchema())){this.$Q.get_dataSchema().remove_newActiveDataSource(ss.mkdel(this,this.$h))}cd.get_instance().remove_statusUpdate(nn)}));if(this.$Q.get_isEditingPublishedDatasource()){tab.ApplicationModel.get_instance().registerNotificationHandler('doc:data-source-published-event',ss.mkdel(this,this.handleDatasourcePublishedNotification))}this.$q()},{$A:function(){return!tsConfig.is_mobile_app&&this.$N},dispose:function(){this.$y();spiff.BaseViewModel.prototype.dispose.call(this)},$o:function(){var nk=[];this.$C=new tab.HelpKeyboardShortcut(iE.makeWebAuthorHelpUri(2));nk.push(this.$C);nk.push(bq.$1());nk.push(bq.$4());nk.push(bq.$5());nk.push(bq.$2());nk.push(bq.$3());for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nm)}this.disposables.add(function(){for(var nn=0;nn<nk.length;nn++){var no=nk[nn];KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(no)}})},$b:function(){tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.$O=true;this.incrementProps()}),1000)},$7:function(){return tab.FeatureFlags.isEnabled('SaveToPublishButton')&&tsConfig.is_authoring&&cd.get_instance().isNewWorkbook&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringExistingDatasourceUri()},$q:function(){if((tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&cd.get_instance().get_willAutoSaveEnableOnPublish()||this.$7())&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewWorkbookUriWithConnectTo()&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringNewDatasourceUri()){this.$b()}},createInitialProps:function(){return{isLoggedOn:bq.$e(),userTitle:(bq.$e()?bq.$f():tab.Strings.AuthMastheadLogin),exitClicked:ss.mkdel(this,this.$c),moreClicked:ss.mkdel(this,this.$6),userClicked:ss.mkdel(this,function(nk,nl){this.$x(nk)}),isWorkbookTemplateSampleData:this.$J,showPublishCallout:false,moreMouseEntered:ss.mkdel(this,this.$j),itemEnteredCallback:ss.mkdel(this,this.$g),itemClickedCallback:ss.mkdel(this,this.$f),lastPublishedDSDate:this.$K}},$a:function(nk){var nl=new kI;var nm=new kH;if(nl.get_isEnabled()){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nn){nl.invoke()},true))}if(nm.get_isEnabled()){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nn){nm.invoke()},true))}if(nk.length===0){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nn){},false))}},$8:function(nk){if(this.$Q.get_isEditingPublishedDatasource()){var nl=this.$Q.get_dataSchema().getDataSourceCount(false)!==0;if(this.$G&&nl){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublish,function(nm){(new mu.$ctor1(false)).invoke()},true))}if(this.$F&&nl){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nm){(new mu.$ctor1(true)).invoke()},true))}}if(nk.length===0){nk.push(new jl(tab.Strings.AuthMenuBarPublishButtonPublishAs,function(nm){},false))}},$e:function(nk){this.$E=nk;this.incrementProps()},$9:function(){var nk=[];if(this.$Q.get_isEditingPublishedDatasource()){this.$8(nk)}else{this.$a(nk)}return nk},handleDatasourcePublishedNotification:function(nk,nl){this.$z()},$z:function(){var nk=this.$Q.get_isEditingPublishedDatasource()&&ss.isValue(this.$Q.get_dataSchema())&&ss.isValue(this.$Q.get_dataSchema().get_activeDataSource());if(nk){var nl=new tab.GetLastPublishedDateForDataSourceCmd;nl.c['datasource']=this.$Q.get_dataSchema().get_activeDataSource().get_name();nl.set_uiBlocking('none');var nm=nl.invoke();nm.done(ss.mkdel(this,function(nn){this.$K=this.$d(nn.lastPublishedAt);this.incrementProps()}))}},$d:function(nk){var nl={format:tab.ApplicationModel.get_instance().get_localeDateFormat(),locale:tsConfig.locale,timeFormat:tab.ApplicationModel.get_instance().get_localeTimeFormat(),locale_formatting_strings:tableau.format.defaultLocaleStrings};return tab.DateUtil.formatISO8601DateTimeToLocalDateTime(nk,nl,0)},createUpdatedProps:function(){var nk=this.$Q.get_isEditingPublishedDatasource();var nl=tab.Strings.NewDataSource;if(nk&&tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringExistingDatasourceUri()){nl=this.$Q.get_dataSchema().get_activeDataSource().get_name()}return{workbookName:tsConfig.workbookName,workbookDisplayName:bq.$6(nk,nl),menuItems:iE.create$1(this.$Q.get_uiMode()).buildMenuItems(),isMenuOpen:this.$H,isUserMenuOpen:this.$I,isDraft:cd.get_instance().get_autoSaveEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&this.$E,willAutoSaveEnableOnPublish:cd.get_instance().get_willAutoSaveEnableOnPublish(),publishOptions:this.$9(),showPublishCallout:this.$O,isWorkbookTemplateSampleData:this.$J,status:(tab.FeatureFlags.isEnabled('SavingStatusIndicator')?cd.get_instance().status:null),lastPublishedDSDate:this.$K}},$g:function(nk,nl,nm){if(this.$p(nm)){this.$u(nk,nl)}},$f:function(nk,nl,nm){if(nm){this.$i()}else{this.$u(nk,nl)}},$u:function(nk,nl){this.$L=nl;switch(nk){case'analysis':{this.$r(nl);return}case'help':{this.$s(nl);return}}if(bq.$b(nk)){nl.expanded=true}var nm=ss.mkdel(this,function(nn){var no=nn.commands;if(bq.$c(nk)){no=bq.sortSubCommands(no)}this.$v(nk,no,nl)});tab.MenuBarClientCommands.getMainMenu(nk,nm)},$p:function(nk){return!nk&&this.$H&&!this.$I},$c:function(){bp.$0();bf.exitAuthoring(this.$Q)},$r:function(nk){var nl=ss.mkdel(this,function(nm){this.$v('analysis',nm.commands,nk)});if(tsConfig.current_sheet_type==='worksheet'){bX.selectedDataSourceNameAsync().done(function(nm){tab.MenuBarClientCommands.getAnalysisMainMenu(nl,nm)})}else{tab.MenuBarClientCommands.getAnalysisMainMenu(nl,null)}},$s:function(nk){this.$3(nk,null)},$3:function(nk,nl){var nm=iE.create$1(this.$Q.get_uiMode()).buildHelpMenu(nk,this.$C,bq.$7,ss.mkdel(this,this.$m),nl);this.$t(nm,nk)},$6:function(nk,nl,nm){if(nl){this.$i()}else{this.$w(nk,nm)}},$j:function(nk,nl,nm){if(this.$p(nl)){this.$w(nk,nm)}},$w:function(nk,nl){if(ss.isNullOrUndefined(nl)||nl.length===0){return}this.$L=nk;var nm=spiff.MenuViewModel.createForMenu(new spiff.Menu(nl),function(nn){var no=_.indexOf(nl,nn);bp.$2('More',nn,no);tab.WidgetUtil.commandMenuItemClicked(nn)},ss.mkdel(this,this.$m),null);nm.set_shouldAnimateOnClose(false);this.$t(nm,nk)},$v:function(nk,nl,nm){if(!ss.referenceEquals(nm,this.$L)){return}if(tsConfig.is_mobile&&ss.isValue(nl)){nl=bX.filterCommandsForMobile(nl)}var nn=null;var no=tab.WidgetUtil.menuViewModelFromCommands(nl,function(np){bp.$3(nk,nl,np,nn.menuItems);if(np.name.indexOf('Show Grid')!==-1){dY.logGridStateChangeEvent(np.checkState===1,false)}tab.WidgetUtil.commandMenuItemClicked(np)},ss.mkdel(this,this.$m),null,null);nn=no.get_menu();this.$t(no,nm)},$i:function(){if(ss.isValue(this.$M)){this.$M.hide();this.$M=null}},$t:function(nk,nl){this.$i();nk.show(nl);this.$n();this.$M=nk;this.$L=null},$x:function(nk){if(bq.$e()){var nl=[];if(!tsConfig.isPublic){nl.push(iE.newMenuLink(tab.Strings.AuthMastheadUserPrefs,bX.createUserPrefsUrl(),'_blank',null,'User Preferences'))}if(this.$A()){nl.push(spiff.MenuItem.newActionItem(tab.Strings.AuthMastheadLogout,bq.$9,true,'Sign Out'))}var nm='User';var nn=spiff.MenuViewModel.createForMenu(new spiff.Menu(nl),function(no){var np=_.indexOf(nl,no);bp.$2(nm,no,np);tab.WidgetUtil.commandMenuItemClicked(no)},ss.mkdel(this,this.$m),null);nn.set_shouldAnimateOnClose(false);this.$t(nn,nk);this.$I=true;this.incrementProps()}else{bq.$8();this.$m()}},$l:function(){this.$J=this.$D!==0;this.$P=false;this.$B=null;this.incrementProps()},$k:function(nk){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(ss.mkdel(this,function(nl){this.$B=nl.showExtractInProgressDialog(ss.mkdel(this,this.$l));this.$P=true;this.$5(nk)}))},$5:function(nk){this.$D=window.setInterval(ss.mkdel(this,function(){tab.WorkgroupServerCommands.getBackgroundJobProgressState(nk).done(ss.mkdel(this,function(nl){if(nl==='inProgress'){return}this.$4();if(this.$P&&ss.isValue(this.$B)){this.$B()}else{this.$l()}if(nl==='success'){tab.JumpstartTelemetry.logJumpstartSuccessBannerOpen();tab.Application.get_commonBannerProvider().showSuccessBanner(tab.Strings.WorkbookTemplatesSuccessBannerMessage,tab.Strings.WorkbookTemplatesSuccessBannerActionMessage,bq.$a,false)}else if(nl==='error'){tab.JumpstartTelemetry.logJumpstartErrorBannerOpen();var nm=function(){tab.JumpstartTelemetry.logJumpstartErrorBannerClick()};tab.Application.get_commonBannerProvider().showErrorBanner(tab.Strings.WorkbookTemplatesExtractErrorBannerMessage,tab.Strings.WorkbookTemplatesExtractErrorBannerActionMessage,nm,false)}})).fail(ss.mkdel(this,this.$4))}),bq.get_checkExtractJobIsDoneTimeout())},$y:function(){this.$4()},$4:function(){if(this.$D!==0){window.clearInterval(this.$D);this.$D=0}},$n:function(){this.$H=true;this.incrementProps()},$m:function(){this.$H=false;this.$I=false;this.incrementProps()},$h:function(){var nk=this.$Q.get_isEditingPublishedDatasource()&&ss.isValue(this.$Q.get_dataSchema())&&ss.isValue(this.$Q.get_dataSchema().get_activeDataSource());if(nk){var nl=this.$Q.get_dataSchema().getPublishedDsPermissions();if(ss.isValue(nl)){nl.done(ss.mkdel(this,function(nm){var nn=this.$F!==nm.canSaveasPublishedDataSource||this.$G!==nm.canOverwritePublishedDataSource;if(nn){this.$F=nm.canSaveasPublishedDataSource;this.$G=nm.canOverwritePublishedDataSource;this.incrementProps()}}))}}}},{get_checkExtractJobIsDoneTimeout:function(){return 3000},$e:function(){return!tsConfig.is_guest},$f:function(){return tsConfig.current_user_friendly_name},$3:function(){var nk=new Object;nk.alt='required';var nl=new KeyboardShortcuts.KeyCombo('F2',nk);var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mF,Object]))(nl,true,false,null,null,null,null);return nm},$2:function(){var nk=new Object;nk.macControl='required';nk.shift='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('d',nl);var nn=new Object;nn.nonMacControl='required';nn.alt='required';nn.shift='required';var no=nn;var np=new KeyboardShortcuts.KeyCombo('d',no);var nq=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[ms,Object]))(new KeyboardShortcuts.KeyCombos(nm,np),true,true,null,null,null,null);return nq},$5:function(){var nk=new Object;nk.controlOrCommand='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('s',nl);var nn=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kN,Object]);var no=new Object;no.propagation=1;var np=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kN,Object]))(nm,false,false,null,null,no,[{ns:'tabdoc',cmd:'save'}]);return np},$4:function(){var nk=new Object;nk.controlOrCommand='required';nk.shift='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('s',nl);var nn=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kH,Object]);var no=new Object;no.propagation=1;var np=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[kH,Object]))(nm,false,false,null,null,no,null);return np},$1:function(){var nk=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[cL,Object]);var nl=new Object;nl.alt='required';var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[cL,Object]))(new KeyboardShortcuts.KeyCombo('q',nl),false,true,null,null,null,null);return nm},$c:function(nk){return nk==='data'},$b:function(nk){return nk==='map'},sortSubCommands:function(nk){if(ss.isNullOrUndefined(nk)){return null}var nl=new tab.CommandsPresModelWrapper.$ctor1(nk);if(ss.isNullOrUndefined(nl.get_commandItems())||nl.get_commandItems().length===0){return null}var nm=bq.splitSubCommands(nl);var nn=nm.item1;var no=nm.item2;nn.sort(function(nr,ns){return nr.get_name().toLocaleLowerCase().localeCompare(ns.get_name().toLocaleLowerCase())});for(var np=0;np<nn.length;np++){var nq=nn[np];no.push(nq.get_item())}nl.set_commandItems(no);return nl.get_presModel()},splitSubCommands:function(nk){var nl=nk.get_commandItems()||[];var nm=[];var nn=[];for(var no=0;no<nl.length;no++){var np=nl[no];var nq=new tab.CommandItemWrapper(np);if(nq.get_commandsType()==='subcommands'){nm.push(nq)}else{nn.push(np)}}return{item1:nm,item2:nn}},$7:function(nk){bp.$1(nk);window.open(tab.UriUtil.makeHelpSearchUri(nk))},$9:function(){var nk=function(){tab.NotificationViewModel.showNotification(tab.Strings.SignOutFailedMessage,null)};tab.WorkgroupServerCommands.logOff(nk)},$8:function(){var nk=tab.VizUriModel.createForAuthoringUnpublishedSheet(tsConfig.repositoryUrl,tsConfig.current_sheet_name);tab.LogOnViewModel.logOnAndTransitionSession(nk)},$a:function(){tab.JumpstartTelemetry.logJumpstartSuccessBannerClick();var nk=tab.VizUriModel.createForCurrentWindowLocation(null);nk.fullPageLoad(null)},$6:function(nk,nl){return(tsConfig.isPublic?ss.formatString('{0} ({1})',tsConfig.workbookName,tab.Strings.TableauPublic):(nk?nl:tsConfig.workbookName))}});var br=global.tab.AuthoringNumberFormatComponent=ss.mkType(a,'tab.AuthoringNumberFormatComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{$4:function(){return(!tsConfig.is_mobile?{fontSize:'10px'}:null)},render:function(){return spiff.DOMElements.div({className:'tabAuthNumberFormat'},this.$1(),this.$0(),this.$3(),this.$2())},$1:function(){var nk=React.createElement(SharedWidgets.InputLabelWidget,{style:this.$4(),testId:'type-label'},tab.Strings.AuthNumberFormatTypeLabel);var nl=this.props.formatTypeOptions.filter(ss.mkdel(this,function(no){return ss.referenceEquals(no.value,this.props.selectedFormatType)}));var nm=((nl.length>0)?ss.indexOf(this.props.formatTypeOptions,nl[0]):-1);var nn=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{checkedIndex:nm,buttonList:this.props.formatTypeOptions,handleChange:ss.mkdel(this,function(no,np){this.props.formatTypeChangedAction(no)})});return spiff.ReactElement.div$1('tabAuthNumberControl',[spiff.ReactElement.div$1('tabAuthNumberControlTypeLabel',[nk]),nn])},$0:function(){var nk=React.createElement(SharedWidgets.InputLabelWidget,{disabled:!this.props.decimalOptionEnabled,style:this.$4(),testId:'decimal-label'},tab.Strings.AuthNumberFormatDecimalLabel);var nl=React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'decimal-stepper',max:16,min:0,start:this.props.decimalPlaces,onValueUpdated:this.props.decimalChangedAction,disabled:!this.props.decimalOptionEnabled});return spiff.ReactElement.div$1('tabAuthNumberControl',[spiff.ReactElement.div$1('tabAuthNumberControlLabel',[nk]),spiff.ReactElement.div$1('tabAuthNumberDecimalControl',[nl])])},$3:function(){var nk=React.createElement(SharedWidgets.InputLabelWidget,{disabled:!this.props.unitsOptionEnabled,style:this.$4(),testId:'units-label'},tab.Strings.AuthNumberFormatUnitsLabel);var nl=React.createElement(SharedWidgets.DropdownWidget,{disabled:!this.props.unitsOptionEnabled,dropdownType:0,menuItemInfos:this.props.unitsMenuOptions,selectedValue:this.props.selectedUnitsOption,onSelect:this.props.unitOptionsChangedAction,testId:'units-dropdown',zIndex:1031});return spiff.ReactElement.div$1('tabAuthNumberControl',[spiff.ReactElement.div$1('tabAuthNumberControlLabel',[nk]),nl])},$2:function(){var nk=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.AuthNumberFormatSeparatorLabel,checked:this.props.thousandsSeparatorOn,handleChange:ss.mkdel(this,function(nl){this.props.thousandsSeparatorChangedAction(nl)}),testId:'thousands-id',disabled:!this.props.thousandsOptionEnabled});return spiff.ReactElement.div$1('tabAuthNumberSeparatorControl',[nk])}});var bs=global.tab.AuthoringNumberFormatViewModel=ss.mkType(a,'tab.AuthoringNumberFormatViewModel',function(nk){this.$8=null;this.$d=null;this.$h=null;this.$f=false;this.$a=0;this.$c=null;this.$g=null;this.$9=null;this.$e=null;this.$b=0;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$8=nk;this.$7();this.$8.add_updated(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.$8.remove_updated(ss.mkdel(this,this.$7))}))},{createInitialProps:function(){return{formatTypeOptions:bs.generateFormatTypeOptions(),unitsMenuOptions:bs.generateUnitsMenuOptions(),formatTypeChangedAction:ss.mkdel(this,this.$4),unitOptionsChangedAction:ss.mkdel(this,this.$6),decimalChangedAction:ss.mkdel(this,this.$3),thousandsSeparatorChangedAction:ss.mkdel(this,this.$5)}},createUpdatedProps:function(){return{selectedFormatType:this.$d,unitsOptionEnabled:this.$g.get_isEnabled(),selectedUnitsOption:this.$h,decimalPlaces:this.$a,decimalOptionEnabled:this.$9.get_isEnabled(),thousandsSeparatorOn:this.$f,thousandsOptionEnabled:this.$e.get_isEnabled()}},update:function(){this.incrementProps()},$7:function(){if(ss.isNullOrUndefined(this.$8.get_items())||this.$8.get_pickerType()!=='number'){return}var nk=this.$8.get_items();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=nm.asFormatControl();switch(nn.get_widgetKey()){case'numericType':{this.$c=nn;this.$d=nn.get_selectorValue();break}case'numericUnits':{this.$g=nn;this.$h=ss.coalesce(nn.get_selectorValue(),'units-none'.toString());break}case'decimalPlaces':{this.$9=nn;this.$a=ss.coalesce(nn.get_numericValue(),0);break}case'thousandsSeparator':{this.$e=nn;this.$f=nn.get_toggleValue();break}default:{break}}}},onFormatChangedCallback:function(nk){var nl=nk;if(ss.isNullOrUndefined(nl)){return}tab.Model.nonWorldUpdate(ss.mkdel(this,function(nm){this.$8.update(nl,nm)}));this.update()},createThrottledSuccessCallback:function(){var nk=++this.$b;return ss.mkdel(this,function(nl){if(nk===this.$b){this.onFormatChangedCallback(nl)}})},$4:function(nk){this.$d=nk;if(ss.isValue(this.$c.get_simpleCommand())){var nl=new tab.CommandBuilder(this.$c.get_simpleCommand());var nm=nl.toCommandAction$2(Object).call(nl,'formatCode',function(nn){return nn},'immediately',this.createThrottledSuccessCallback());nm(nk)}this.update()},$3:function(nk){nk=Math.max(Math.min(nk,16),0);this.$a=nk;if(ss.isValue(this.$9.get_simpleCommand())){var nl=new tab.CommandBuilder(this.$9.get_simpleCommand());var nm=nl.toCommandAction$2(ss.Int32).call(nl,'decimalPlaces',function(nn){return nn},'immediately',null);nm(nk)}this.update()},$6:function(nk){this.$h=nk;if(ss.isValue(this.$g.get_simpleCommand())){var nl=new tab.CommandBuilder(this.$g.get_simpleCommand());var nm=nl.toCommandAction$2(Object).call(nl,'unitsFormat',function(nn){return nn},'immediately',null);nm(nk)}this.update()},$5:function(nk){this.$f=nk;if(ss.isValue(this.$e.get_simpleCommand())){var nl=new tab.CommandBuilder(this.$e.get_simpleCommand());var nm=nl.toCommandAction$2(Boolean).call(nl,'showSeparator',function(nn){return nn},'immediately',null);nm(nk)}this.update()}},{generateFormatTypeOptions:function(){var nk=[];nk.push({value:'auto-format'.toString(),label:tab.Strings.AuthNumberFormatTypeAuto,testId:'auto-id'});nk.push({value:'custom-number'.toString(),label:tab.Strings.AuthNumberFormatTypeNumber,testId:'number-id'});nk.push({value:'custom-currency'.toString(),label:tab.Strings.AuthNumberFormatTypeCurrency,testId:'curr-id'});nk.push({value:'custom-percentage'.toString(),label:tab.Strings.AuthNumberFormatTypePercentage,testId:'perc-id'});nk.push({value:'custom-scientific'.toString(),label:tab.Strings.AuthNumberFormatTypeScientific,testId:'sci-id'});return nk},generateUnitsMenuOptions:function(){var nk=[];nk.push({displayValue:tab.Strings.AuthNumberFormatUnitsNone,value:'units-none'.toString()});nk.push({displayValue:tab.Strings.AuthNumberFormatUnitsThousands,value:'units-thousands'.toString()});nk.push({displayValue:tab.Strings.AuthNumberFormatUnitsMillions,value:'units-millions'.toString()});nk.push({displayValue:tab.Strings.AuthNumberFormatUnitsBillionsEnglish,value:'units-billions-english'.toString()});nk.push({displayValue:tab.Strings.AuthNumberFormatUnitsBillionsStandard,value:'units-billions-standard'.toString()});return nk}});var bt=global.tab.AuthoringPlaceholder=ss.mkType(a,'tab.AuthoringPlaceholder',function(){},{removeFromDom:function(){var nk=$('.'+'tabAuthoringPlaceholderUX');if(ss.isValue(nk)&&nk.length>0){nk.remove()}}},{get_instance:function(){if(ss.isNullOrUndefined(bt.$1)){bt.$1=new bt}return bt.$1}});var bu=global.tab.AuthoringSizingComputer=ss.mkType(a,'tab.AuthoringSizingComputer',null,null,{computeSizing:function(nk){var nl=bu.$0(nk);nl.position='absolute';nl.overflow='hidden';return nl},$0:function(nk){if(tsConfig.is_metrics_authoring){}var nl=nk.rightAreaWidth;var nm=tabBootstrap.VizLayoutConstants.get_authoringTabsHeight();var nn=tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight();var no=0;var np=nk.sheetType==='dashboard'&&!nk.isMobile;if(nk.sheetType==='worksheet'){if(!nk.isMobile){nl+=tabBootstrap.VizLayoutConstants.get_authoringVizMargin();nm+=tabBootstrap.VizLayoutConstants.get_authoringVizMargin()}nn+=tabBootstrap.VizLayoutConstants.get_authoringShelfHeight();no+=tabBootstrap.VizLayoutConstants.get_authoringShelfWidth()+nk.leftAreaWidth}else if(np||nk.sheetType==='story'){no+=nk.leftAreaWidth}if(nk.isDevicePreviewBarVisible){nn+=tabBootstrap.VizLayoutConstants.get_authoringDevicePreviewBarHeight()}var nq={top:nn+'px',right:nl+'px',bottom:nm+'px',left:no+'px'};return nq}});var bv=global.tab.AuthoringStatusComponent=ss.mkType(a,'tab.AuthoringStatusComponent',function(nk){spiff.PureRenderComponent.call(this,nk);if(bZ.shouldShowFilmstripView()){this.state={selectedMode:0}}},{render:function(){var nk=null;if(this.props.shouldShowStats){var nl={};nl['numberOfMarks']=this.$2();nl['rowsByColumns']=this.$3();nl['lastComputedCalculation']=this.props.lastComputedCalculation;var nm=nl;nk=_.map(Object.keys(nm),ss.mkdel(this,function(no){return(!tab.MiscUtil.isNullOrEmpty$1(nm[no])?ss.mkdel(this,function(){return spiff.DOMElements.span({className:no,key:no},nm[no])})():null)}))}var nn=(bZ.shouldShowFilmstripView()?(' '+'viewButtons'):'');return spiff.DOMElements.div({className:'tabAuthTabStatusBar'+nn},nk,(bZ.shouldShowFilmstripView()?ss.mkdel(this,this.$1)():null))},$2:function(){var nk=this.props.totalMarks;var nl=this.props.selectedMarks;if(nl>0&&nk>1&&nl!==nk){return tab.Strings.SelectedMarksText(nl,nk)}return((nk===1)?tab.Strings.MarkTextOneMark(nk):tab.Strings.MarksTextMultiMark(nk))},$3:function(){var nk=this.props.numberOfRows;var nl=this.props.numberOfColumns;if(nk===1&&nl===1){return tab.Strings.RowByColumn(nk,nl)}if(nk===1&&nl>1){return tab.Strings.RowByColumns(nk,nl)}if(nk>1&&nl===1){return tab.Strings.RowsByColumn(nk,nl)}if(nk>1&&nl>1){return tab.Strings.RowsByColumns(nk,nl)}return null},$1:function(){var nk=this.$0('filmstripView','tabAuthTabFilmstripViewIcon',1);var nl=this.$0('tabsView','tabAuthTabTabsViewIcon',0);var nm=[nk,nl];return spiff.DOMElements.span({className:'tabAuthTabStatusBarViews',key:'tabAuthTabStatusBarViews'},nm)},$0:function(nk,nl,nm){return spiff.DOMElements.div({className:(this.$4(nm)?'selected':'')},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nn){this.$5(nm)}),buttonType:10,testId:nk,children:spiff.DOMElements.div({className:nl})}))},$4:function(nk){return this.state.selectedMode===nk},$5:function(nk){if(this.$4(nk)){return}this.setState({selectedMode:nk});this.props.handleViewModeChange(nk)}});var bw=global.tab.AuthoringStatusViewModel=ss.mkType(a,'tab.AuthoringStatusViewModel',function(nk){this.$3$1=0;this.$3$2=0;this.$3$3=0;this.$3$4=0;this.$3$5=null;this.$3$6=false;this.$3$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_handleSelectedViewMode(nk)},{get_totalMarks:function(){return this.$3$1},set_totalMarks:function(nk){this.$3$1=nk},get_selectedMarks:function(){return this.$3$2},set_selectedMarks:function(nk){this.$3$2=nk},get_numberOfRows:function(){return this.$3$3},set_numberOfRows:function(nk){this.$3$3=nk},get_numberOfColumns:function(){return this.$3$4},set_numberOfColumns:function(nk){this.$3$4=nk},get_lastComputedCalculation:function(){return this.$3$5},set_lastComputedCalculation:function(nk){this.$3$5=nk},get_shouldShowStats:function(){return this.$3$6},set_shouldShowStats:function(nk){this.$3$6=nk},get_handleSelectedViewMode:function(){return this.$3$7},set_handleSelectedViewMode:function(nk){this.$3$7=nk},updateForVisual:function(nk){if(ss.isValue(nk)){this.set_totalMarks(nk.get_totalMarks());this.set_selectedMarks(nk.get_selectedMarks());this.set_numberOfRows(nk.get_numberOfRows());this.set_numberOfColumns(nk.get_numberOfColumns());this.set_lastComputedCalculation(nk.get_lastComputedCalculation());this.set_shouldShowStats(true)}else{this.set_shouldShowStats(false)}this.incrementProps()},createInitialProps:function(){return{totalMarks:0,selectedMarks:0,numberOfRows:0,numberOfColumns:0,lastComputedCalculation:'',shouldShowStats:false,handleViewModeChange:this.get_handleSelectedViewMode()}},createUpdatedProps:function(){return{totalMarks:this.get_totalMarks(),selectedMarks:this.get_selectedMarks(),numberOfRows:this.get_numberOfRows(),numberOfColumns:this.get_numberOfColumns(),lastComputedCalculation:this.get_lastComputedCalculation(),shouldShowStats:this.get_shouldShowStats(),handleViewModeChange:this.get_handleSelectedViewMode()}}});var bx=global.tab.AuthoringTabAvatar=ss.mkType(a,'tab.AuthoringTabAvatar',function(nk){ss.makeGenericType(spiff.BaseView$1,[bH]).call(this,nk,new by(nk.name))});var by=global.tab.AuthoringTabAvatarTemplate=ss.mkType(a,'tab.AuthoringTabAvatarTemplate',function(nk){this.label=null;spiff.Template.call(this,$(by.template));this.label=this.getElementBySelector('.'+by.$2);this.label.text(nk)});var bz=global.tab.AuthoringTabConstants=ss.mkType(a,'tab.AuthoringTabConstants');var bA=global.tab.AuthoringTabNavigatorHoverHandler=ss.mkType(a,'tab.AuthoringTabNavigatorHoverHandler',function(nk,nl,nm){this.$3=null;this.$4=null;this.$2=false;this.$5=0;this.$6=null;this.$3=nk;this.$4=nl;this.$5=nm;this.$2=false},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){if(!this.$1(nk)){return null}if(this.$2){return this}this.$2=true;if(!ss.staticEquals(this.$3,null)){this.$3()}if(!ss.isValue(this.$6)){this.$6=tab.WindowHelper.setInterval(this.$3,this.$5)}return this},dragExit:function(nk){this.$2=false;this.$0(nk)},acceptDrop:function(nk){this.$0(nk);var nl=$.Deferred();nl.resolve(false);return nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return(this.$1(nk)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},$1:function(nk){var nl=ss.safeCast(nk,bG);return ss.isValue(nl)},$0:function(nk){if(!this.$1(nk)){return}this.$6=tab.MiscUtil.clearInterval(this.$6);if(!ss.staticEquals(this.$4,null)){this.$4()}}});var bB=global.tab.AuthoringTabNavPlaceholderComponent=ss.mkType(a,'tab.AuthoringTabNavPlaceholderComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){var nk=[];if(ss.isValue(this.props.sheetNames)){nk=_.map(this.props.sheetNames,ss.mkdel(this,function(nl){return this.$0(nl)}))}return this.$1(nk)},$0:function(nk){var nl=(ss.referenceEquals(this.props.currentSheet,nk)?('tabAuthTab'+' '+'tabAuthTabChecked'):'tabAuthTab');var nm=spiff.DOMElements.span({className:'tabAuthTabLabel'},nk);return spiff.DOMElements.span({className:nl},spiff.DOMElements.span({className:'rightEdge'}),nm)},$1:function(nk){return spiff.DOMElements.div({className:'tabAuthoringTabNavPlaceholder'},nk)}});var bC=global.tab.AuthoringTabNavView=ss.mkType(a,'tab.AuthoringTabNavView',function(nk){this.authoringTabNavViewModel=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[bD]).call(this,nk,new bE);this.authoringTabNavViewModel=nk;this.dom=this.get_template();this.authoringTabNavViewModel.add_tabsChanged(ss.mkdel(this,this.updateContent));this.authoringTabNavViewModel.add_currentTabChanged(ss.mkdel(this,this.$g));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_tabsChanged(ss.mkdel(this,this.updateContent));this.authoringTabNavViewModel.remove_currentTabChanged(ss.mkdel(this,this.$g))}));if(bC.get_shouldShowDataTab()){this.authoringTabNavViewModel.add_sheetsChanged(ss.mkdel(this,this.$a));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_sheetsChanged(ss.mkdel(this,this.$a))}));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.dataSourceButton,ss.mkdel(this,function(nm){this.get_viewModel().selectDataTab()})))}else{this.dom.dataSourceButton.toggleClass('dataTabHidden',true)}if(bZ.shouldShowFilmstripView()){this.authoringTabNavViewModel.add_onViewModeChanged(ss.mkdel(this,this.$k));this.disposables.add(ss.mkdel(this,function(){this.authoringTabNavViewModel.remove_onViewModeChanged(ss.mkdel(this,this.$k))}))}var nl=new iM(nk);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nl);this.disposables.add(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nl)})},{get_tabsWidth:function(){return this.dom.tabContainer[0].scrollWidth},get_availableWidth:function(){return this.dom.tabContainer[0].clientWidth},$g:function(){this.scrollToActiveTab();this.updateContent()},scrollToActiveTab:null,onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(!tsConfig.is_mobile){this.dom.tabScrollArea.toggleClass('pinnedCreateButtons',true);this.$8()}if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){this.$j()}this.updateContent()},updateContent:function(){if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){this.$i()}))}else{this.$i()}},$d:function(){var nk=spiff.Widget.getWidgets(this.dom.tabContainer.children(),bF);for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.dispose()}this.dom.tabContainer.empty();this.dom.tabContainer.detach()},$j:function(){this.$d();var nk=new tab.TabbedNavigationPlaceholderViewModel;var nl=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.TabbedNavigationPlaceholderViewModel,bB,Object])).call(null,[nk]);nl.addToDom(this.dom.tabContainer);this.dom.tabContainer.prependTo(this.dom.tabScrollArea)},$i:function(){this.$d();var nk=this.authoringTabNavViewModel.get_workbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new bF(nm);nn.addToDom(this.dom.tabContainer)}if(tsConfig.is_mobile){this.$8()}this.dom.tabContainer.prependTo(this.dom.tabScrollArea);this.updateTabNavigation();this.$h();this.$c()},$8:function(){if(this.$b()){return}var nk=this.authoringTabNavViewModel.get_tabControlButtons();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$7(nm)}},$7:function(nk){var nl=$("\n                <span class='"+'tabAuthTab'+' '+nk.get_buttonClass()+"' data-test-id='"+nk.get_buttonClass()+"'>\n                    <span class='"+'rightEdge'+"'></span>\n                    <div class='"+nk.get_iconClass()+"'></span>\n                </span>");nl.prop('title',nk.get_titleText());spiff.ClickHandler.targetAndClick(nl,nk.get_onClick());var nm=(!tsConfig.is_mobile?this.dom.createButtonsContainer:this.dom.tabContainer);nm.append(nl)},$k:function(){switch(this.authoringTabNavViewModel.get_currentViewMode()){case 1:{this.$e();break}case 0:{this.$f();break}default:{break}}},$b:function(){var nk=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(nk)&&nk.get_isEditingPublishedDatasource()},$e:function(){this.dom.domRoot.addClass('filmstrip');var nk=this.get_viewModel().get_visibleWorkbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.addThumbnailUri();this.$i()}},$f:function(){this.dom.domRoot.removeClass('filmstrip');var nk=this.get_viewModel().get_visibleWorkbookTabs();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.invalidateThumbnailUri();this.$i()}},$c:function(){var nk=tab.ApplicationModel.get_instance().get_workbook();var nl=ss.mkdel(this,function(nm){this.$h()});nk.get_dataSchema().add_newDataSchema(ss.mkdel(this,this.$h));nk.get_dataSchema().add_newActiveDataSource(ss.mkdel(this,this.$h));nk.get_dataSchema().add_newDataSourceAdded(nl);this.disposables.add(ss.mkdel(this,function(){nk.get_dataSchema().remove_newDataSchema(ss.mkdel(this,this.$h));nk.get_dataSchema().remove_newActiveDataSource(ss.mkdel(this,this.$h));nk.get_dataSchema().remove_newDataSourceAdded(nl)}))},$h:function(){this.dom.dataSourceButton.toggleClass('tabAuthTabChecked',this.get_viewModel().get_currentUIMode()==='data-tab');this.dom.dataSourceIcon.toggleClass('tabAuthDataTabIconActive',ss.isNullOrUndefined(this.get_viewModel().get_currentTab()));this.dom.dataSourceIcon.toggleClass('tabAuthDataTabIcon',ss.isValue(this.get_viewModel().get_currentTab()));this.$9()},$a:function(){this.$9()},$9:function(){var nk=ss.isNullOrUndefined(this.get_viewModel())||!this.get_viewModel().get_isActiveDataSourceSupported();if(!bC.get_shouldShowDataTab()){this.dom.dataSourceButton.hide()}else{this.dom.dataSourceButton.toggleClass('tabAuthDisabledTab',nk);this.dom.dataSourceButton.prop('title',(nk?(tab.Strings.DisabledDataTabTooltipInfo+'\n'+tab.Strings.DisabledDataTabTooltipDetails):tab.Strings.DataTabName))}},updateTabNavigation:null},{get_shouldShowDataTab:function(){return tab.MiscUtil.shouldShowDataTab()}});var bD=global.tab.AuthoringTabNavViewModel=ss.mkType(a,'tab.AuthoringTabNavViewModel',function(nk){this.$8=[];this.$6=[];this.$7=null;this.$5=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=0;this.$2$6=null;this.$2$7=null;spiff.BaseViewModel.call(this);this.$7=nk;this.set_reorderedTab(null);this.$7.add_sheetsChanged(ss.mkdel(this,this.$0));this.$7.add_uiModeChanged(ss.mkdel(this,this.$4));this.$5=lI.controlButtons(this);this.disposables.add(ss.mkdel(this,function(){this.$7.remove_sheetsChanged(ss.mkdel(this,this.$0));this.$7.remove_uiModeChanged(ss.mkdel(this,this.$4))}));var nl=0;this.set_currentViewMode(nl);if(ss.isValue(this.$7.get_sheetsInfo())){this.$3()}this.$4()},{add_tabsChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_tabsChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_currentTabChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_currentTabChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_sheetsChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_sheetsChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_onViewModeChanged:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_onViewModeChanged:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},get_workbookTabs:function(){return this.$8},get_visibleWorkbookTabs:function(){return this.$6},get_currentUIMode:function(){return this.$7.get_uiMode()},get_currentViewMode:function(){return this.$2$5},set_currentViewMode:function(nk){this.$2$5=nk},get_currentTab:function(){return this.$2$6},set_currentTab:function(nk){this.$2$6=nk},get_reorderedTab:function(){return this.$2$7},set_reorderedTab:function(nk){this.$2$7=nk},get_isActiveDataSourceSupported:function(){return ss.isValue(this.$7.get_dataSchema().get_activeDataSource())&&this.$7.get_dataSchema().get_activeDataSource().get_isDataTabViewSupported()},get_tabControlButtons:function(){return this.$5},selectDataTab:function(){if(tab.FeatureFlags.isEnabled('DataToTheWeb')&&this.get_isActiveDataSourceSupported()){tab.VizClientCommands.setUIMode('data-tab','DirectNavigation','')}},$1:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=this.get_currentTab();if(this.get_currentUIMode()==='data-tab'){tab.VizClientCommands.setUIMode('document',null,nk.name);if(ss.isValue(nl)&&ss.referenceEquals(nl,nk)){this.$3();this.raiseActionEvent(this.$2$2)}}else{if(nk.get_isCurrent()){return}if(ss.isValue(nl)){nl.set_isCurrent(false)}this.set_currentTab(nk);nk.set_isCurrent(true);this.$3();this.raiseActionEvent(this.$2$2)}if(!ss.referenceEquals(nk.name,tsConfig.current_sheet_name)){var nm={sheetName:nk.name,oldSheetName:tsConfig.current_sheet_name,noUndo:false,repositoryUrl:tsConfig.workbookName+'/'+nk.name};var nn=(ss.isValue(nl)?nl.name:tsConfig.current_sheet_name);if(!ss.isNullOrEmptyString(nn)){nm.oldRepositoryUrl=tsConfig.workbookName+'/'+nn}tab.Application.fireOnTabSelect(nm)}},selectSheetTab:function(nk){tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){this.$1(nk)}))},createNewWorksheet:function(nk){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createSheet(null,nk)})},createNewDashboard:function(nk){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createDashboardOrStory(null,nk,false)})},createNewStoryboard:function(nk){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.SheetClientCommands.createDashboardOrStory(null,nk,true)})},$0:function(nk){this.raiseActionEvent(this.$2$3);this.$3()},$3:function(){var nk=[];var nl=this.$7.get_sheetsInfo();var nm={};for(var nn=0;nn<nl.length;nn++){var no=nl[nn];var np=no.namesOfSubsheets;if(ss.isValue(np)&&(!no.isStory&&no.isDashboard)){for(var nq=0;nq<np.length;nq++){var nr=np[nq];nm[nr]=true}}}for(var ns=0;ns<nl.length;ns++){var nt=nl[ns];var nu=ss.referenceEquals(nt.sheet,tsConfig.current_sheet_name);if(!this.$2(nt,nu)){continue}var nv=new bH(nt,this);nv.set_isCurrent(nu&&this.get_currentUIMode()!=='data-tab');var nw=nv;nk.push(nw);if(nu){this.set_currentTab(nw)}}if(this.haveTabsChanged(nk)){tab.MiscUtil.dispose(this.$8);this.$8=nk;this.$6=tab.ListExtensions.where(bH).call(null,this.$8,function(nx){return!nx.isHidden||nx.get_isCurrent()});if(ss.isValue(this.$2$1)){this.$2$1()}}else{tab.MiscUtil.dispose(nk)}},haveTabsChanged:function(nk){return nk.length!==this.$8.length||_.any(this.$8,function(nl,nm){return!nl.equalTo(nk[nm])})},$4:function(){if(tab.FeatureFlags.isEnabled('DataToTheWeb')){var nk=this.$7.get_uiMode()==='data-tab';var nl=ss.isNullOrUndefined(this.get_currentTab());var nm=nl!==nk;if(nm){this.set_currentTab(null);var nn=this.get_workbookTabs();for(var no=0;no<nn.length;no++){var np=nn[no];np.set_isCurrent(ss.referenceEquals(np.name,tsConfig.current_sheet_name)&&!nk);if(np.get_isCurrent()){this.set_currentTab(np)}}this.raiseActionEvent(this.$2$2)}}},$2:function(nk,nl){if(nl){return true}return nk.isVisible},setSelectedViewMode:function(nk){this.set_currentViewMode(nk);this.raiseActionEvent(this.$2$4)}});var bE=global.tab.AuthoringTabNavViewTemplate=ss.mkType(a,'tab.AuthoringTabNavViewTemplate',function(){this.tabScrollArea=null;this.tabContainer=null;this.leftButton=null;this.rightButton=null;this.menuButton=null;this.dataSourceButton=null;this.dataSourceIcon=null;this.leftScrollHelper=null;this.createButtonsContainer=null;spiff.Template.call(this,$(bE.$2));this.tabScrollArea=this.getElementBySelector(ss.formatString('.{0}','tabAuthTabNavTabs'));this.tabContainer=this.getElementBySelector('.tabAuthTabNavTabContainer');this.leftButton=this.getElementBySelector('.tabAuthTabNavLeftButton');this.rightButton=this.getElementBySelector('.tabAuthTabNavRightButton');this.menuButton=this.getElementBySelector('.tabAuthTabNavMenuButton');this.leftScrollHelper=this.getElementBySelector('.tabAuthLeftScrollDropTarget');this.createButtonsContainer=this.getElementBySelector('.tabAuthTabCreationButtonsContainer');this.dataSourceButton=this.getElementBySelector('.tabAuthTabDSTab');this.dataSourceIcon=this.dataSourceButton.find('.tabAuthTabIcon')},{rightMostElement:function(){return this.tabContainer.children().last()}});var bF=global.tab.AuthoringTabView=ss.mkType(a,'tab.AuthoringTabView',function(nk){this.glass=null;this.renameInput=null;this.$u=null;this.$v=null;this.$z=null;this.$A=null;this.$w=false;this.$x=null;this.$y=null;this.$3$1=false;this.$3$2=false;this.$3$3=false;ss.makeGenericType(spiff.BaseView$1,[bH]).call(this,nk,new bJ);this.$v=nk;this.$u=this.get_template();this.$u.tabColor.css('border-bottom-color',this.$v.color);if(this.$m()){$("<span class='tabAuthTabIcon'></span>").insertBefore(this.$u.label)}this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$u.domRoot[0],ss.mkdel(this,this.$c)).onDoubleClick(ss.mkdel(this,this.handleDoubleClick)).onRightClick(ss.mkdel(this,this.handleRightClick)));var nl=new EventUtils.EventHandleSpec;nl.hover=ss.mkdel(this,function(nn){this.$d()});nl.hoverDelay=200;var nm=nl;this.disposables.add$1(new EventUtils.TableauEventHandler(this.$u.domRoot[0],nm));this.$u.domRoot.mouseleave(ss.mkdel(this,this.$h));this.$v.add_onTabChanged(ss.mkdel(this,this.$o));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$v.remove_onTabChanged(ss.mkdel(this,this.$o))})));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$a))})));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted))})));this.set_isDraggedOver(false);this.set_isDroppingToTheRight(false);this.set_cannotBeDropped(true);this.$o()},{$r:function(){return this.$v.parent},get_isDroppingToTheRight:function(){return this.$3$1},set_isDroppingToTheRight:function(nk){this.$3$1=nk},get_isDraggedOver:function(){return this.$3$2},set_isDraggedOver:function(nk){this.$3$2=nk},get_cannotBeDropped:function(){return this.$3$3},set_cannotBeDropped:function(nk){this.$3$3=nk},$t:function(){return this.$u.domRoot[0]},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(!tsConfig.is_mobile){this.$7();this.createRenameInput();if(bZ.shouldShowFilmstripView()){this.$p()}}},$7:function(){EventUtils.DragDropManager.attachDragSource(this.$u.domRoot,this.$v);this.$y=new bI(this.$v.get_visibleIndexOfThisTab(),ss.mkdel(this,this.onDragOver),ss.mkdel(this,this.$g),ss.mkdel(this,this.$f),true);this.$x=new bI(this.$v.get_visibleIndexOfThisTab(),ss.mkdel(this,this.onDragOver),ss.mkdel(this,this.$g),ss.mkdel(this,this.$f),false);EventUtils.DragDropManager.attachDropTarget(this.$u.rightDropHandler,this.$y);EventUtils.DragDropManager.attachDropTarget(this.$u.leftDropHandler,this.$x);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.removeDragSource(this.$u.domRoot);EventUtils.DragDropManager.detachDropTarget(this.$u.rightDropHandler);EventUtils.DragDropManager.detachDropTarget(this.$u.leftDropHandler)})))},onDragOver:function(nk,nl,nm){this.set_cannotBeDropped(!nk||!nm);if(nk){this.set_isDraggedOver(true);if(nm){this.set_isDroppingToTheRight(nl)}}this.dragChanged()},$g:function(){this.set_isDraggedOver(false);this.dragChanged()},$f:function(nk){this.get_viewModel().updateReorderedTab(nk)},dragStarted:function(nk){if(!tsConfig.is_mobile){var nl={};var nm=bI.tryGetDragInstanceAsAuthoringTabViewDragInstance(nk,nl);if(nm&&ss.referenceEquals(nl.$.get_viewModel(),this.$v)){this.$u.domRoot.addClass('moveTab')}}},$a:function(nk){if(!tsConfig.is_mobile){this.$u.domRoot.removeClass('moveTab');this.$u.domRoot.removeClass('toTheRight');this.$u.domRoot.removeClass('firstTab')}},dragChanged:function(){if(!tsConfig.is_mobile){var nk=this.get_viewModel().parent.get_visibleWorkbookTabs();var nl=this.$v.get_visibleIndexOfThisTab()===nk.length-1;var nm=this.$v.get_visibleIndexOfThisTab()===0;if(!this.get_isDraggedOver()&&!nm){this.$k(nk,false);this.get_viewModel().set_isDroppingToTheRight(false)}this.$q(nm,nl);var nn=!this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&!nm&&this.get_isDraggedOver();if(nn){this.$k(nk,true)}}},$q:function(nk,nl){this.$u.domRoot.toggleClass('toTheRight',this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&this.get_isDraggedOver()).toggleClass('lastTab',this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&nl&&this.get_isDraggedOver()).toggleClass('firstTab',!this.get_isDroppingToTheRight()&&!this.get_cannotBeDropped()&&nk&&this.get_isDraggedOver())},$k:function(nk,nl){var nm=this.get_viewModel().get_visibleIndexOfThisTab()-1;if(nm>=0){nk[nm].set_isDroppingToTheRight(nl)}},dispose:function(){this.$9();if(ss.isValue(this.glass)){this.glass.dispose()}ss.makeGenericType(spiff.BaseView$1,[bH]).prototype.dispose.call(this)},$e:function(nk,nl){if(!tsConfig.is_mobile&&this.renameInput.element.css('display')!=='none'||this.$s()){return}var nm=new spiff.ShowMenuOptions(nk,false);nm.preferUp=true;nm.additionalMenuClass='tabAuthSheetContextMenu';nl.showContextMenu(nm)},handleRightClick:function(){if(!this.$s()){this.$e(this.$u.domRoot,this.$v)}},$c:function(nk){if(ss.referenceEquals(this.$v,this.$r().get_currentTab())&&(tsConfig.is_mobile||BrowserSupport.BrowserSupport.IsTouch())){this.$e(this.$u.domRoot,this.$v)}else{this.$r().selectSheetTab(this.$v)}},handleDoubleClick:function(){if(tsConfig.is_mobile||this.$s()){return}this.$n()},renameTab:function(){if(this.$v.tryRename(this.renameInput.get_text())){this.$b()}else{this.$8()}},$n:function(){EventUtils.DragDropManager.removeDragSource(this.$u.domRoot);this.$u.label.hide();this.renameInput.element.show();this.renameInput.get_inputElement().focus();this.renameInput.get_inputElement().select();this.$l()},$b:function(){this.$u.label.text(this.renameInput.get_text().trim());this.$u.label.show();this.renameInput.element.hide();EventUtils.DragDropManager.attachDragSource(this.$u.domRoot,this.$v);this.$i()},$8:function(){this.renameInput.set_text(this.$v.name);this.$b()},$l:function(){this.renameInput.element.addClass('inputTabFocused');if(ss.isNullOrUndefined(this.glass)){this.glass=new spiff.Glass(null,false);this.glass.add_click(ss.mkdel(this,this.renameTab))}this.glass.show()},$i:function(){if(ss.isValue(this.glass)){this.glass.remove_click(ss.mkdel(this,this.renameTab));this.glass.dispose();this.glass=null}this.renameInput.element.removeClass('inputTabFocused')},$h:function(nk){if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){this.$w=false;this.$9()}},$9:function(){if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){this.$z=tab.MiscUtil.dispose$1(this.$z);if(ss.isValue(this.$A)){this.$A.dispose()}}},$d:function(){if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){this.$w=true;var nk=this.$v.name;var nl=this.$v.getThumbnail(nk);nl.done(ss.mkdel(this,this.$j)).fail(ss.mkdel(this,function(){}))}},$j:function(nk){var nl={isDashboard:this.$v.tabType==='dashboard',isHidden:this.$v.isHidden,name:this.$v.name};var nm=this.$u.domRoot[0];var nn={anchorElement:nm,anchorOrigin:{vertical:'top',horizontal:'left'},stackedOrigin:{vertical:'bottom',horizontal:'left'}};if(this.$w){this.$9();this.$A=new lZ(nn,nl,nk);this.$z=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[lZ,SharedWidgets.Overlay,Object])).call(null,[this.$A]);this.$z.addToDom(this.$u.domRoot)}},$o:function(){if(bZ.shouldShowFilmstripView()){this.$p()}if(this.$s()){this.$u.label.text(tab.Strings.ScratchpadTitle).attr('title',tab.Strings.ScratchpadTitle)}else{this.$u.label.text(this.$v.name).attr('title',this.$v.name)}this.$u.tabColor.css('border-bottom-color',this.$v.color);this.$u.domRoot.toggleClass('tabAuthTabChecked',this.$v.get_isCurrent()).toggleClass('tabDashboard',this.$v.tabType==='dashboard').toggleClass('tabLegacyDashboard',this.$v.tabType==='legacyDashboard').toggleClass('tabWorksheet',this.$v.tabType==='worksheet').toggleClass('tabStory',this.$v.tabType==='story').toggleClass('toTheRight',this.$v.get_isDroppingToTheRight())},$p:function(){if(this.$r().get_currentViewMode()===1){this.get_viewModel().addThumbnailUri()}if(this.$u.domRoot.length>0){this.$t().style.backgroundImage=this.get_viewModel().get_thumbnailUri()}else{}},$m:function(){return this.$v.tabType==='dashboard'||this.$v.tabType==='legacyDashboard'||this.$v.tabType==='story'},$s:function(){var nk=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(nk)&&nk.get_isEditingPublishedDatasource()},createRenameInput:function(){if(ss.isValue(this.renameInput)){return}this.renameInput=spiff.TextInputView.newTextInputView(this.$u.label.text(),'',null,false);this.renameInput.add_enterKeyPressed(ss.mkdel(this,this.renameTab));this.renameInput.add_escapeKeyPressed(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.renameInput.remove_enterKeyPressed(ss.mkdel(this,this.renameTab))})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.renameInput.remove_escapeKeyPressed(ss.mkdel(this,this.$8))})));this.renameInput.element.on('change keyup paste',function(nk){window.setTimeout(function(){},50)});this.renameInput.element.addClass('tabAuthTabRenameInput');this.renameInput.get_inputElement().attr('maxlength',(254).toString());this.element.append(this.renameInput.element);this.renameInput.element.hide()}});var bG=global.tab.AuthoringTabViewDragInstance=ss.mkType(a,'tab.AuthoringTabViewDragInstance',function(nk,nl,nm){this.$2$1=0;this.$2$2=null;EventUtils.DragInstance.call(this,nk,nl);this.set_viewModel(nk);this.set_sourceIndex(nm)},{get_sourceIndex:function(){return this.$2$1},set_sourceIndex:function(nk){this.$2$1=nk},get_viewModel:function(){return this.$2$2},set_viewModel:function(nk){this.$2$2=nk}});var bH=global.tab.AuthoringTabViewModel=ss.mkType(a,'tab.AuthoringTabViewModel',function(nk,nl){this.$0=false;this.$1=false;this.$2$1=null;this.tabType=null;this.parent=null;this.name=null;this.isHidden=false;this.color=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.parent=nl;this.name=nk.sheet;var nm='worksheet';if(nk.isStory){nm='story'}else if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){if(nk.isFlexibleLayout){nm='dashboard'}else if(nk.isDashboard){nm='legacyDashboard'}}else if(nk.isDashboard){nm='dashboard'}this.tabType=nm;this.isHidden=!nk.isVisible;this.color=nk.tabColor;this.$1=false},{add_onTabChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_onTabChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_thumbnailUri:function(){return this.$2$2},set_thumbnailUri:function(nk){this.$2$2=nk},get_visibleIndexOfThisTab:function(){return ss.indexOf(this.parent.get_visibleWorkbookTabs(),this)},get_isCurrent:function(){return this.$0},set_isCurrent:function(nk){this.$0=nk;this.raiseActionEvent(this.$2$1)},get_isDroppingToTheRight:function(){return this.$1},set_isDroppingToTheRight:function(nk){this.$1=nk;this.raiseActionEvent(this.$2$1)},addThumbnailUri:function(){var nk=tab.ThumbnailUtils.getThumbnailUriString(this.name);var nl='url("'+nk+'")';this.set_thumbnailUri(nl)},invalidateThumbnailUri:function(){this.set_thumbnailUri('')},startDrag:function(nk){var nl=new bx(this);var nm=new bG(this,nl,this.get_visibleIndexOfThisTab());return nm},acceptsDragType:function(){return 1},updateReorderedTab:function(nk){this.parent.set_reorderedTab(nk)},tryRename:function(nk){var nl=this.parent.get_workbookTabs().map(function(nm){return nm.name});return tab.SheetClientCommands.tryRenameSheet(this.name,nk,nl)},showContextMenu:function(nk){if(tsConfig.is_mobile&&this.tabType!=='worksheet'){return}var nl=function(nm){if(tsConfig.is_mobile){nm=tab.MiscUtil.cloneObject(nm);var nn=tab.CommandsPresModelWrapper.create(nm);var no=function(nq){return!dt.isDocCommand({ns:'tabdoc',cmd:'new-dashboard'},tab.CommandItemWrapper.create(nq))&&!dt.isDocCommand({ns:'tabdoc',cmd:'new-storyboard'},tab.CommandItemWrapper.create(nq))};if(ss.isValue(nn.get_commandItems())){nn.set_commandItems(nn.get_commandItems().filter(no))}nm=nn.get_presModel()}var np=tab.WidgetUtil.menuViewModelFromCommands(nm,tab.WidgetUtil.commandMenuItemClicked,null,null,null);np.show(nk)};tab.SheetClientCommands.getSheetTabContextMenu(this.name,nl)},getThumbnail:function(nk){return bZ.get_thumbnailCache().getThumbnail(nk)},equalTo:function(nk){return ss.referenceEquals(this.name,nk.name)&&this.isHidden===nk.isHidden&&this.get_isCurrent()===nk.$0&&ss.referenceEquals(ss.getInstanceType(this),ss.getInstanceType(nk))&&ss.referenceEquals(this.color,nk.color)&&this.tabType===nk.tabType}});var bI=global.tab.AuthoringTabViewModelDropHandler=ss.mkType(a,'tab.AuthoringTabViewModelDropHandler',function(nk,nl,nm,nn,no){this.$1=false;this.$5=0;this.$4=null;this.$2=null;this.$3=null;this.$1=no;this.$5=nk;this.$4=nl;this.$3=nm;this.$2=nn},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){var nl={};var nm=bI.tryGetDragInstanceAsAuthoringTabViewDragInstance(nk,nl);if(!nm||ss.staticEquals(this.$4,null)){return this}this.$4(nm,this.$1,this.$0(nl.$.get_sourceIndex()));return this},dragExit:function(nk){var nl=bI.isDragInstanceSupported(nk);if(!nl||ss.staticEquals(this.$3,null)){return}this.$3()},acceptDrop:function(nk){var nl={};var nm=bI.tryGetDragInstanceAsAuthoringTabViewDragInstance(nk,nl);if(!nm){return $.Deferred().resolve(false)}if(this.$0(nl.$.get_sourceIndex())){var nn=this.$5+(this.$1?1:0);var no=[];no.push(nl.$.get_sourceIndex());tab.SheetClientCommands.reorderSheets(nn,no);if(!ss.staticEquals(this.$2,null)){this.$2(nl.$.get_viewModel())}}this.dragExit(nk);return $.Deferred().resolve(true)},$0:function(nk){var nl=this.$1&&nk===this.$5+1;var nm=!this.$1&&nk===this.$5-1;return nk!==this.$5&&!nm&&!nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return(bI.isDragInstanceSupported(nk)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)}},{isDragInstanceSupported:function(nk){var nl={};return bI.tryGetDragInstanceAsAuthoringTabViewDragInstance(nk,nl)},tryGetDragInstanceAsAuthoringTabViewDragInstance:function(nk,nl){nl.$=ss.safeCast(nk,bG);return ss.isValue(nl.$)}});var bJ=global.tab.AuthoringTabViewTemplate=ss.mkType(a,'tab.AuthoringTabViewTemplate',function(){this.tabColor=null;this.label=null;this.rightDropHandler=null;this.leftDropHandler=null;spiff.Template.call(this,$("\n            <span class='tabAuthTab'>\n                <span class='tabColor'></span>\n                <span class='rightEdge'></span>\n                <span class='dragMarker'></span>\n                <span class='tabAuthTabLabel'></span>\n                <div class='tabAuthDropHandlerContainer'>\n                    <div class='tabAuthDropHandlerLeft'></div>\n                    <div class='tabAuthDropHandlerRight'></div>\n                </div>\n            </span>"));this.label=this.getElementBySelector('.'+'tabAuthTabLabel');this.tabColor=this.getElementBySelector('.'+'tabColor');this.rightDropHandler=this.getElementBySelector('.'+'tabAuthDropHandlerRight');this.leftDropHandler=this.getElementBySelector('.'+'tabAuthDropHandlerLeft')});var bK=global.tab.AuthoringToolbarButtonComponent=ss.mkType(a,'tab.AuthoringToolbarButtonComponent',function(nk,nl){ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarButtonViewModel,bL]).call(this,bL.create,nk,nl)});var bL=global.tab.AuthoringToolbarButtonView=ss.mkType(a,'tab.AuthoringToolbarButtonView',function(nk){tab.ToolbarButtonView.call(this,nk);this.get_dom().domRoot.addClass(nk.get_iconClass().substring('tabAuthToolbar-'.length));var nl=this.get_viewModel();var nm=this.get_viewModel().get_tooltipText();if(ss.isNullOrUndefined(nm)){nm=this.get_viewModel().get_text()}nl.set_tooltipText(nm+this.hintText());if(this.get_viewModel().get_isSeparator()){this.get_dom().get_image().hide();this.get_dom().get_text().hide()}},{onClicked:function(){bP.$0(this.get_viewModel().get_iconType());tab.ToolbarButtonView.prototype.onClicked.call(this)},hintText:function(){return(ss.isNullOrEmptyString(this.get_viewModel().get_hintText())?'':(' '+' ('+this.get_viewModel().get_hintText()+')'))}},{create:function(nk){return new bL(nk)}});var bM=global.tab.AuthoringToolbarDropdownButtonComponent=ss.mkType(a,'tab.AuthoringToolbarDropdownButtonComponent',function(nk,nl){ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarDropdownButtonViewModel,bN]).call(this,bN.create,nk,nl)});var bN=global.tab.AuthoringToolbarDropdownButtonView=ss.mkType(a,'tab.AuthoringToolbarDropdownButtonView',function(nk){this.$j=null;bL.call(this,nk);this.$j=nk;this.get_toolbarButton().add_click(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_toolbarButton().remove_click(ss.mkdel(this,this.$i))})))},{$i:function(){this.$j.dropdownClicked(this.element,ss.mkdel(this,function(nk){bP.$1(this.$j.get_iconType(),nk)}))}},{create:function(nk){return new bN(nk)}});var bO=global.tab.AuthoringToolbarDropdownMenuView=ss.mkType(a,'tab.AuthoringToolbarDropdownMenuView',function(nk){this.$i=null;bL.call(this,nk);this.$i=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.ToolbarDropdownMenuViewModel,SharedWidgets.DropdownWidget,Object])).call(null,[nk]);this.disposables.add$1(this.$i)},{get_dropdownMenuView:function(){return this.$i}},{create:function(nk){return new bO(nk)}});var bP=global.tab.AuthoringToolbarTelemetry=ss.mkType(a,'tab.AuthoringToolbarTelemetry',null,null,{$0:function(nk){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){tab.OnlineAnalyticsClient.logEvent('Authoring_ToolbarItem',ss.mkdict(['Item',nk]))}},$1:function(nk,nl){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()&&tab.FeatureFlags.isEnabled('WebAuthoringOnlineTelemetry')){var nm='';if(nl.checkState===1){nm='checked'}else if(nl.checkState===2){nm='radio-selected'}tab.OnlineAnalyticsClient.logEvent('Authoring_ToolbarMenuItem',ss.mkdict(['Item',nk,'Menu',nl.telemetryId,'State',nm]))}}});var bQ=global.tab.AuthoringToolbarToggleButtonTemplate=ss.mkType(a,'tab.AuthoringToolbarToggleButtonTemplate',function(){this.$3=null;tab.ToolbarButtonTemplate.call(this);this.$3=$("<span class='tabAuthToolbarToggleButtonOppositeStateText'></span>");this.domRoot.append(this.$3)},{get_oppositeStateText:function(){return this.$3},setOppositeStateText:function(nk){this.$3.text(nk)}});var bR=global.tab.AuthoringToolbarToggleButtonView=ss.mkType(a,'tab.AuthoringToolbarToggleButtonView',function(nk){this.$i=null;bL.call(this,nk);this.$i=$("<span class='tabAuthToolbarToggleButtonOppositeStateText'></span>");this.get_dom().domRoot.append(this.$i);this.setOppositeStateText(nk.get_toggleToText())},{get_oppositeStateText:function(){return this.$i},setOppositeStateText:function(nk){this.$i.text(nk)}},{create:function(nk){return new bR(nk)}});var bS=global.tab.AuthoringToolbarUberPopupButtonView=ss.mkType(a,'tab.AuthoringToolbarUberPopupButtonView',function(nk){this.$j=null;bL.call(this,nk);this.$j=nk;this.get_toolbarButton().add_click(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_toolbarButton().remove_click(ss.mkdel(this,this.$i))})))},{$i:function(){this.$j.buttonClicked(this.element)}},{$0:function(nk){return new bS(nk)}});var bT=global.tab.AuthoringToolbarUberPopupButtonViewModel=ss.mkType(a,'tab.AuthoringToolbarUberPopupButtonViewModel',function(nk,nl,nm){this.$f=null;this.$h=null;this.$g=null;tab.ToolbarButtonViewModel.call(this,nk,'tabAuthToolbar-'+nl,null);this.$h=nm;this.set_enabled(true);this.set_iconType(nl);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.onResize)));this.$f=ss.mkdel(this,function(){this.set_isActive(false)})},{get_uberPopupContent:function(){return this.$h},set_uberPopupContent:function(nk){this.$h=nk},get_relativeElement:function(){return this.$g.get_relativeElement()},set_relativeElement:function(nk){if(ss.isValue(this.$g)){this.$g.set_relativeElement(nk);this.$g.updatePosition()}},buttonClicked:function(nk){if(ss.isValue(this.$g)){this.dismissPopup()}else{this.$g=spiff.UberPopupViewModel.createForContent$1(this.$h,nk,null,true);this.$g.add_hidden(this.$f);this.$g.options.theme=0;this.$g.options.additionalClassNames=['tabSuppressVizTooltipsAndOverlays'];this.$g.options.horizontalAttach=1;this.$g.options.horizontalAlign=2;this.$g.options.isToolbarFlyout=true;this.$g.show();this.set_isActive(true)}},dismissPopup:function(){if(ss.isValue(this.$g)){this.$g.hide(false);this.$g.remove_hidden(this.$f);this.$g=null}},onResize:function(nk){if(ss.isValue(this.$g)){this.$g.updatePosition()}}});var bU=global.tab.AuthoringToolbarView=ss.mkType(a,'tab.AuthoringToolbarView',function(nk){this.dom=null;this.$g=[];this.$h=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;ss.makeGenericType(spiff.BaseView$1,[bV]).call(this,nk,new bW);this.set_authoringToolbarViewModel(nk);this.dom=this.get_template();this.$h=new tab.DisposableHolder;this.get_authoringToolbarViewModel().add_itemsChanged(ss.mkdel(this,this.updateToolbarButtons));this.$c();var nl=_.throttle(ss.mkdel(this,this.$a),50,{leading:false,trailing:true});this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',function(nm){nl()}));this.$d();this.updateToolbarButtons();nl()},{get_authoringToolbarViewModel:function(){return this.$3$1},set_authoringToolbarViewModel:function(nk){this.$3$1=nk},$e:function(){return this.$3$2},$f:function(nk){this.$3$2=nk},get_replayIconButton:function(){return this.$3$3},set_replayIconButton:function(nk){this.$3$3=nk},get_replayArrowButton:function(){return this.$3$4},set_replayArrowButton:function(nk){this.$3$4=nk},updateToolbarButtons:function(){var nk=this.dom.get_buttonArea();var nl=this.dom.get_showMeArea();this.$h.dispose();this.$h=new tab.DisposableHolder;nk.html('');nl.html('');this.set_replayIconButton(null);var nm=ss.getEnumerator(this.get_authoringToolbarViewModel().get_items());try{while(nm.moveNext()){var nn=nm.current();var no=ss.safeCast(nn,tab.ToolbarToggleButtonViewModel);var np=ss.safeCast(nn,tab.ToolbarDropdownButtonViewModel);var nq=ss.safeCast(nn,bT);var nr=ss.safeCast(nn,tab.ToolbarDropdownMenuViewModel);if(ss.isValue(no)){var ns=bR.create(no);nk.append(ns.element);this.$h.add$1(ns)}else if(ss.isValue(np)){if(ss.isValue(nn)&&ss.isValue(nn.get_text())&&ss.equalsT(nn.get_text(),tab.ReplayButtonUtil.replayButtonText)&&ss.isValue(this.get_replayIconButton())&&tab.FeatureFlags.isEnabled('ReplayAnimation')){this.set_replayArrowButton(np);var nt=this.$9();nk.append(nt)}else{var nu=bN.create(np);nk.append(nu.element);this.$h.add$1(nu)}}else if(ss.isValue(nr)){if(ss.isNullOrUndefined(nr.get_props())){continue}var nv=this.$8(nr,nk);this.$h.add$1(nv)}else if(ss.isValue(nq)){var nw=bS.$0(nq);if(ss.referenceEquals(this.get_viewModel().get_showMeButton(),nn)){nl.append(nw.element)}else{nk.append(nw.element)}nq.set_relativeElement(nw.element);this.$h.add$1(nw)}else if(ss.isValue(nn)&&ss.isValue(nn.get_text())&&ss.equalsT(nn.get_text(),tab.ReplayButtonUtil.replayButtonText)){this.set_replayIconButton(nn)}else{var nx=bL.create(nn);nk.append(nx.element);this.$h.add$1(nx)}}}finally{nm.dispose()}this.$7();this.$a()},$d:function(){var nk=ss.mkdel(this,function(){tab.ReplayButtonUtil.enableDisableReplayButton(this.get_replayIconButton(),this.get_replayArrowButton())});tab.AnimationUtil.add_enableDisableReplayButton(nk);var nl=ss.mkdel(this,function(){tab.ReplayButtonUtil.checkSpeedControl(this.get_replayArrowButton())});tab.AnimationUtil.add_checkSpeedControl(nl);if(ss.isValue(tab.ApplicationModel.get_instance().get_workbook())){tab.ApplicationModel.get_instance().get_workbook().get_animationSidePaneModel().add_newAnimationSettings(nk)}this.disposables.add(function(){tab.AnimationUtil.remove_enableDisableReplayButton(nk);tab.AnimationUtil.remove_checkSpeedControl(nl);if(ss.isValue(tab.ApplicationModel.get_instance().get_workbook())){tab.ApplicationModel.get_instance().get_workbook().get_animationSidePaneModel().remove_newAnimationSettings(nk)}})},$8:function(nk,nl){var nm=bO.create(nk);this.dom.domRoot.addClass(nk.get_iconClass().substring('tabAuthToolbar-'.length));var nn=nk.get_tooltipText();if(ss.isNullOrUndefined(nn)){nn=nk.get_text()}nk.set_tooltipText(nn);nm.addToDom(nl);return nm},$9:function(){var nk=document.createElement('div');nk.setAttribute('class','splitButtonWrapperAuthoring');var nl=bL.create(this.get_replayIconButton());nk.appendChild(nl.element.get(0));var nm=bN.create(this.get_replayArrowButton());nk.appendChild(nm.element.get(0));return nk},$7:function(){var nk=this.dom.get_buttonArea();var nl=new tab.ToolbarButtonViewModel(tab.Strings.AuthToolbarMore,'tabToolbarMoreIcon',ss.mkdel(this,this.$b));nl.set_iconType('More');this.$f(bL.create(nl));this.$e().element.hide();this.$h.add$1(this.$e());nk.append(this.$e().element)},$a:function(){this.get_viewModel().showHiddenItems();ss.clear(this.$g);this.$e().element.hide();var nk=false;var nl=50;var nm=this.dom.get_spacerArea().width();while(nl>nm){var nn=this.get_viewModel().hideLastButton();if(ss.isNullOrUndefined(nn)){break}else if(nn.get_isSeparator()){ss.insert(this.$g,0,nn);continue}ss.insert(this.$g,0,nn);if(!nk){this.$e().element.show();nk=true}var no=this.dom.get_spacerArea().width();if(no!==0&&no===nm){break}nm=no}},$b:function(){var nk=[];for(var nl=0;nl<this.$g.length;nl++){var nm=this.$g[nl];var nn=((!tab.MiscUtil.isNullOrEmpty$1(nm.get_description())&&!ss.referenceEquals(nm.get_description(),nm.get_hintText()))?nm.get_description():nm.get_text());if(nm.get_isSeparator()){if(nk.length>0){nk.push(spiff.MenuItem.newDivider())}}else{var no;if(nm.get_enabled()){var np=ss.safeCast(nm,tab.ToolbarDropdownButtonViewModel);var nq=ss.safeCast(nm,tab.ToolbarDropdownMenuViewModel);if(ss.isValue(nq)){var nr=nq.createMenu();no=(new spiff.MenuItemBuilder).name(nm.get_text()).checkState(0).subMenu(nr).enabled(nr.menuItems.some(function(nu){return nu.enabled}))}else if(ss.isValue(np)){var ns=np.createMenu();no=(new spiff.MenuItemBuilder).name(nn).checkState(0).subMenu(ns).enabled(ns.menuItems.some(function(nu){return nu.enabled}))}else{no=(new spiff.MenuItemBuilder).name(nn).data(ss.mkdel(nm,nm.clickButton)).enabled(true)}}else{no=(new spiff.MenuItemBuilder).name(nn).enabled(false)}no.iconClass(nm.get_iconClass()+'-NoArrow').description(nm.get_hintText());nk.push(no.build())}}var nt=spiff.MenuViewModel.createForMenu(new spiff.Menu(nk),tab.WidgetUtil.commandMenuItemClicked,null,null);nt.show(new spiff.ShowMenuOptions(this.$e().element,false))},$c:function(){KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bU.$7);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bU.$4);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bU.$5);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bU.$2);if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(bU.$1)}this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bU.$7);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bU.$4);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bU.$5);KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bU.$2);if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){this.disposables.add(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(bU.$1)})}}))},dispose:function(){this.$h.dispose();ss.makeGenericType(spiff.BaseView$1,[bV]).prototype.dispose.call(this)}});var bV=global.tab.AuthoringToolbarViewModel=ss.mkType(a,'tab.AuthoringToolbarViewModel',function(){this.$b=[];this.$d=null;this.$c=null;this.$2$1=null;this.$2$2=false;spiff.BaseViewModel.call(this);this.$9()},{$9:function(){var nk=[];nk.push(bV.$3());if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutsExporting')){nk.push(bV.$1());nk.push(bV.$2());nk.push(bV.$4())}if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){nk.push(bV.$5());nk.push(bV.$6());nk.push(bV.$0())}for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nm)}this.disposables.add(function(){for(var nn=0;nn<nk.length;nn++){var no=nk[nn];KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(no)}})},add_itemsChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_itemsChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_items:function(){return this.$b},get_shouldShowMeBeEnabled:function(){return this.$2$2},set_shouldShowMeBeEnabled:function(nk){this.$2$2=nk},get_showMeButton:function(){return this.$c},showPlaceholderButtons:function(){var nk=new tab.CommandsPresModelWrapper;nk.set_commandItems(ji.get_items());this.updateCommands(nk.get_presModel(),null,'document')},updateCommands:function(nk,nl,nm){if(ss.isNullOrUndefined(nk)||!tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')&&ss.isNullOrUndefined(nl)){return}var nn=tab.CommandsPresModelWrapper.create(nk);var no=nn.get_commandItems();this.$6(no,nl,nm);this.raiseActionEvent(this.$2$1)},$1:function(nk,nl){if(ss.isNullOrUndefined(this.$c)){this.$d=new ls;this.$c=new bT(tab.Strings.AuthToolbarShowMe,'showme',this.$d)}this.set_shouldShowMeBeEnabled(ss.isValue(nk)&&!nk.isStory()&&nl==='document'&&(!nk.get_isDashboard()||nk.get_currentDeviceLayout()==='default')&&!tsConfig.is_metrics_authoring);if(!this.get_shouldShowMeBeEnabled()){this.$c.dismissPopup()}else{this.$d.updateDashboard(nk)}this.$c.set_enabled(this.get_shouldShowMeBeEnabled());this.$b.push(this.$c)},$6:function(nk,nl,nm){this.$7();for(var nn=0;nn<nk.length;nn++){var no=nk[nn];var np=tab.CommandItemWrapper.create(no);switch(np.get_commandsType()){case'separator':{this.$b.push(tab.ToolbarButtonViewModel.createSeparator());break}case'item':{if(ss.isValue(np.get_command())&&np.get_command().toString().indexOf(tab.WebShowMeCmd.cmdId.cmd)!==-1){this.$0();this.$1(nl,nm)}else if(ss.isValue(np.get_command())&&np.get_command().toString().indexOf(tab.WebFormatWorkbookCmd.cmdId.cmd)!==-1){if(!tsConfig.is_mobile){this.$2(no)}}else{this.$2(no)}break}case'subcommands':{var nq=[];tab.WidgetUtil.newMenuItemsFromCommands(nq,np.get_commands(),tab.WidgetUtil.createDropdownMenuCommandHandler,false);if(this.$8(nq,np)){this.$5(tab.CommandsPresModelWrapper.create(np.get_commands()).get_commandItems())}else if(nq.length>0&&!np.get_hasIcon()){this.$4(no,new spiff.Menu(nq))}else{this.$3(no,new spiff.Menu(nq))}break}}}},$0:function(){if(tsConfig.is_metrics_enabled){var nk=new tab.ToolbarButtonViewModel(tab.Strings.ToolbarShowPerformanceRecording,'tab-icon-'+'performance',ss.mkdel(this,this.$a));nk.set_iconType('performance');var nl=nk;this.$b.push(tab.ToolbarButtonViewModel.createSeparator());this.$b.push(nl)}},$7:function(){for(var nk=0;nk<this.$b.length;nk++){var nl=this.$b[nk];if(!ss.referenceEquals(nl,this.$c)){nl.dispose()}}ss.clear(this.$b)},$8:function(nk,nl){return nk.length===2&&nk[0].enabled!==nk[1].enabled&&ss.isValue(nl.get_iconRes())&&ss.startsWithString(nl.get_iconRes().toString(),'toggle-')},$2:function(nk){var nl=tab.ToolbarButtonViewModel.createFromCommandItem(nk,'tabAuthToolbar-',null,null);if(nl.get_itemWrapper().get_isVisible()){this.$b.push(nl)}},$5:function(nk){if(nk.length!==2){return}var nl=tab.ToolbarToggleButtonViewModel.createFromCommandItems(nk[0],nk[1],'tabAuthToolbar-',null);if(ss.isValue(nl)){this.$b.push(nl)}},showHiddenItems:function(){for(var nk=0;nk<this.$b.length;nk++){var nl=this.$b[nk];nl.showButton()}},hideLastButton:function(){for(var nk=this.$b.length-1;nk>0;nk--){var nl=this.$b[nk];if(!ss.referenceEquals(this.$c,nl)&&!nl.get_isHidden()){nl.hideButton();return nl}}return null},$3:function(nk,nl){var nm=tab.CommandItemWrapper.create(nk);var nn=new tab.ToolbarDropdownButtonViewModel(nm.get_name(),'tabAuthToolbar-'+nm.get_iconRes(),function(np){return nl});nn.set_iconType(nm.get_iconRes());var no=nn;this.$b.push(no)},$4:function(nk,nl){var nm=tab.CommandItemWrapper.create(nk);var nn=this.$b;var no=new tab.ToolbarDropdownMenuViewModel(nm.get_name(),'tabAuthToolbar-'+nm.get_iconRes(),function(np){return nl});no.set_iconType(nm.get_iconRes());nn.push(no)},$a:function(){tab.CommandController.get().legacySession.saveAndOpenMetricsView()},dispose:function(){this.$7();this.$c=tab.MiscUtil.dispose$1(this.$c);this.$d=tab.MiscUtil.dispose$1(this.$d);spiff.BaseViewModel.prototype.dispose.call(this)}},{$0:function(){var nk=new Object;nk.macControl='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('d',nl);var nn=new Object;nn.nonMacControl='required';nn.alt='required';var no=nn;var np=new KeyboardShortcuts.KeyCombo('d',no);var nq=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mq,Object]))(new KeyboardShortcuts.KeyCombos(nm,np),true,true,null,null,null,null);return nq},$6:function(){var nk=new Object;nk.controlOrCommand='required';var nl=new KeyboardShortcuts.KeyCombo('ArrowDown',nk);var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[jy,Object]))(new KeyboardShortcuts.KeyCombos(nl),false,true,null,null,null,null);return nm},$5:function(){var nk=new Object;nk.controlOrCommand='required';var nl=new KeyboardShortcuts.KeyCombo('ArrowUp',nk);var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[jx,Object]))(new KeyboardShortcuts.KeyCombos(nl),false,true,null,null,null,null);return nm},$4:function(){var nk=new Object;nk.controlOrCommand='required';nk.alt='required';nk.shift='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('p',nl);var nn=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[my,Object]);var no=new Object;no.propagation=1;var np=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[my,Object]))(nm,false,true,null,null,no,null);return np},$2:function(){var nk=new Object;nk.alt='required';nk.shift='required';var nl=new KeyboardShortcuts.KeyCombo('p',nk);var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mw,Object]))(nl,true,true,null,null,null,null);return nm},$1:function(){var nk=new Object;nk.alt='required';var nl=new KeyboardShortcuts.KeyCombo('p',nk);var nm=new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mv,Object]))(nl,true,false,null,null,null,null);return nm},$3:function(){var nk=new Object;nk.controlOrCommand='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('p',nl);var nn=ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mx,Object]);var no=new Object;no.propagation=1;return new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[mx,Object]))(nm,false,false,null,null,no,null)},get_isToolbarSort:function(){return!tsConfig.is_mobile}});var bW=global.tab.AuthoringToolbarViewTemplate=ss.mkType(a,'tab.AuthoringToolbarViewTemplate',function(){spiff.Template.call(this,$("\n<div class='tabAuthToolbar'>\n    <div class='tabAuthToolbarButtonArea'></div>\n    <div class='tabAuthToolbarSpacerArea'></div>\n    <div class='tabAuthToolbarShowMeArea'></div>\n</div>"));this.domRoot.addClass('tabAuthToolbarV2')},{get_buttonArea:function(){return this.getElementBySelector('.tabAuthToolbarButtonArea')},get_spacerArea:function(){return this.getElementBySelector('.tabAuthToolbarSpacerArea')},get_showMeArea:function(){return this.getElementBySelector('.tabAuthToolbarShowMeArea')}});var bX=global.tab.AuthoringUtil=ss.mkType(a,'tab.AuthoringUtil',null,null,{selectedDataSourceNameAsync:function(){var nk=$.Deferred();bY.get_instance().get_leftArea().get_viewModel().get_leftPanelViewModel().get_schemaViewerViewModel().done(function(nl){nk.resolve((ss.isNullOrUndefined(nl.get_selectedDataSource())?'':nl.get_selectedDataSource().get_name()))});return nk.promise()},$2:function(nk,nl,nm){nk.set_commandItems(nk.get_commandItems().filter(nl));var nn=nk.get_commandItems();for(var no=0;no<nn.length;no++){var np=nn[no];var nq=tab.CommandItemWrapper.create(np);if(!nm(nq)){nq.set_enabled(false);if(dt.isItemType('subcommands',nq)){var nr=tab.CommandsPresModelWrapper.create(nq.get_commands());ss.clear(nr.get_commandItems())}}else if(dt.isItemType('subcommands',nq)){var ns=tab.CommandsPresModelWrapper.create(nq.get_commands());bX.$2(ns,nl,nm)}}},filterCommandsForMobile:function(nk){var nl=tab.MiscUtil.cloneObject(nk);var nm=function(nr){return!dt.isDocCommand({ns:'tabdoc',cmd:'new-dashboard'},tab.CommandItemWrapper.create(nr))&&!dt.isDocCommand({ns:'tabdoc',cmd:'new-storyboard'},tab.CommandItemWrapper.create(nr))};var nn=function(nr){return true};var no=function(nr){return!dt.isDocCommand({ns:'tabdoc',cmd:'clear-sheet'},nr)&&!dt.isDocCommand({ns:'tabdoc',cmd:'duplicate-sheet'},nr)&&!dt.isDocCommand({ns:'tabdoc',cmd:'view-data-highlighter-range'},nr)&&!dt.isDocCommand({ns:'tabdoc',cmd:'view-quick-filters'},nr)&&!dt.hasIconResource('clear-sheet',nr)&&!dt.hasIconResource('viewsize',nr)&&!dt.hasIconResource('window-options',nr)};var np=(tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()?no:nn);var nq=tab.CommandsPresModelWrapper.create(nl);bX.$2(nq,nm,np);return nq.get_presModel()},filterCommandsByUIMode:function(nk,nl){if(nl==='data-tab'){var nm=function(nq){return dt.isItemType('separator',nq)||dt.isDocCommand({ns:'tabdoc',cmd:'undo'},nq)||dt.isDocCommand({ns:'tabdoc',cmd:'redo'},nq)||dt.isServerCommand({ns:'tabsrv',cmd:'refresh-data-server'},nq)};var nn=function(nq){return true};var no=tab.MiscUtil.cloneObject(nk);var np=tab.CommandsPresModelWrapper.create(no);bX.$2(np,nn,nm);return np.get_presModel()}return nk},$3:function(nk){var nl=(ss.isNullOrEmptyString(tsConfig.site_url_name)?'':('/t/'+tsConfig.site_url_name));return nl+'/'+nk+'/'+bX.$4()},generateNewWorkbookUrl:function(){return bX.$3('newWorkbook')},generateEditDatasourceUrl:function(nk){return bX.$3('editDatasource')+'/'+nk},createUserPrefsUrl:function(){var nk=encodeURIComponent(tsConfig.current_user_name).replace(/%20/g,'+');var nl=encodeURIComponent(tsConfig.current_user_domain_name).replace(/%20/g,'+');var nm=tsConfig.site_root.toString();var nn='';if(nm.length>0){var no=nm.lastIndexOf(String.fromCharCode(47));nn='/site/'+encodeURIComponent(nm.substr(no+1)).replace(/%20/g,'+')}return'/#'+nn+'/user/'+nl+'/'+nk+'/settings'},tryShowDownloadOrEditInDesktopErrorDialog:function(nk){var nl=tsConfig.downloadURIReadonly;var nm=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri();var nn=tab.ApplicationModel.get_instance().get_workbook().get_draftStatus();if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')){if(nm||cd.get_instance().get_autoSaveEnabled()&&nn.get_isDraft()||!cd.get_instance().get_autoSaveEnabled()&&tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){fl.showDownloadDraftErrorDialog();return true}}else if(tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()||nk&&tab.MiscUtil.isNullOrEmpty$1(nl)){tab.Application.get_commonDialogProvider().ShowLocalErrorDialog(tab.Strings.AuthToolbarDownloadWorkbookErrorContent,tab.Strings.AuthToolbarDownloadWorkbookErrorTitle,null);return true}return false},$4:function(){return(new Date).getTime().toString(32).toLowerCase()+'$'+bX.$0(4)+'-'+bX.$0(2)+'-'+bX.$0(2)+'-'+bX.$0(2)+'-'+bX.$0(6)},$1:function(){var nk='0123456789abcdefghijklmnopqrstuvwxyz';return String.fromCharCode(nk.charCodeAt(Math.floor(Math.random()*nk.length)))},$0:function(nk){var nl='';for(var nm=0;nm<nk;++nm){nl+=bX.$1()}return nl}});var bY=global.tab.AuthoringView=ss.mkType(a,'tab.AuthoringView',function(nk){this.disposables=new tab.DisposableHolder;this.menubarArea=null;this.toolbarArea=null;this.tabArea=null;this.$b=null;this.$c=null;this.$h=null;this.$g=null;this.$d=null;this.$e=null;this.$f=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$d=nk;this.$d.add_disposed(ss.mkdel(this,this.$a));this.$d.add_propertyChanged(ss.mkdel(this,this.$8));this.$d.add_dashboardViewChanged(ss.mkdel(this,this.$3));this.$d.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4));this.$d.add_sheetTypeChanged(ss.mkdel(this,this.$5));this.disposables.add(ss.mkdel(this,function(){this.$d.remove_disposed(ss.mkdel(this,this.$a));this.$d.remove_propertyChanged(ss.mkdel(this,this.$8));this.$d.remove_dashboardViewChanged(ss.mkdel(this,this.$3));this.$d.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$4));this.$d.remove_sheetTypeChanged(ss.mkdel(this,this.$5))}));if(bZ.shouldShowFilmstripView()){this.$d.get_authoringTabNavViewModel().add_onViewModeChanged(ss.mkdel(this,this.$6));this.disposables.add(ss.mkdel(this,function(){this.$d.get_authoringTabNavViewModel().remove_onViewModeChanged(ss.mkdel(this,this.$6))}))}if(ss.isValue(nk.get_toolbarViewModel())){this.$h=new bU(nk.get_toolbarViewModel())}if(ss.isValue(nk.get_authoringTabNavViewModel())){this.$g=tab.ObjectRegistry.newView(bC).call(null,[nk.get_authoringTabNavViewModel()])}if(ss.isValue(this.$d.get_authoringMenuBarViewModel())){this.$b=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bq,bo,Object])).call(null,[this.$d.get_authoringMenuBarViewModel()])}if(ss.isValue(this.$d.get_authoringStatusViewModel())){this.$c=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bw,bv,Object])).call(null,[this.$d.get_authoringStatusViewModel()])}this.set_leftArea(tab.ObjectRegistry.newView(bl).call(null,[nk.get_leftAreaViewModel()]));this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(nl){this.$2()})));tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,this.$3));tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){tab.StartupUtils.callEachTimeModelsInitialized(ss.mkdel(this,this.layout),this.disposables)}));this.$0();this.addDomToBody();this.$1();this.$7();bY.set_instance(this)},{get_element:function(){return null},get_rootElement:function(){return this.get_element()},get_leftArea:function(){return this.$1$2},set_leftArea:function(nk){this.$1$2=nk},get_devicePreviewBarView:function(){return this.$1$3},set_devicePreviewBarView:function(nk){this.$1$3=nk},get_leftAreaWidth:function(){return this.get_leftArea().get_viewModel().get_leftAreaWidth()},get_viewModel:function(){return this.$d},get_worksheetComponents:function(){return this.$1$4},set_worksheetComponents:function(nk){this.$1$4=nk},$a:function(nk){this.dispose()},dispose:function(){this.disposables.dispose();this.$g=tab.MiscUtil.dispose$1(this.$g);this.$h=tab.MiscUtil.dispose$1(this.$h);this.set_leftArea(tab.MiscUtil.dispose$1(this.get_leftArea()));this.$b=tab.MiscUtil.dispose$1(this.$b);this.$c=tab.MiscUtil.dispose$1(this.$c);this.set_devicePreviewBarView(tab.MiscUtil.dispose$1(this.get_devicePreviewBarView()));this.set_worksheetComponents(tab.MiscUtil.dispose$1(this.get_worksheetComponents()));this.$e=tab.MiscUtil.dispose$1(this.$e);this.$9();bY.set_instance(null)},$7:function(){if(ss.isNullOrUndefined(this.get_devicePreviewBarView())&&this.$d.get_isDashboardOrFlexibleDashboard()&&this.$d.get_devicePreviewBarIsVisible()&&ss.isValue(this.$d.get_devicePreviewBarViewModel())){var nk=$(tab.ApplicationView.devicePreviewBarContainerSelector);if(ss.isValue(nk)&&nk.length>0){this.set_devicePreviewBarView(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[eW,eV,Object])).call(null,[this.$d.get_devicePreviewBarViewModel()]));this.get_devicePreviewBarView().addToDom(nk)}}},addContent:function(){this.addContentToAreas();this.notifyContentAddedToDom()},addContentToAreas:function(){if(ss.isValue(this.$b)&&ss.isValue(this.menubarArea)){this.$b.addToDom(this.menubarArea)}if(ss.isValue(this.$h)){this.toolbarArea.append(this.$h.element)}if(ss.isValue(this.$g)){this.tabArea.append(this.$g.element)}if(ss.isValue(this.$c)){this.$c.addToDom(this.tabArea)}},notifyContentAddedToDom:function(){if(ss.isValue(this.$g)){this.$g.onAddedToDom()}if(ss.isValue(this.$d.get_toolbarViewModel())&&tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){this.$d.get_toolbarViewModel().showPlaceholderButtons()}},$0:function(){if(tsConfig.is_desktop){this.menubarArea=$('<div></div>').css('display','none');this.toolbarArea=$('<div></div>').css('display','none');this.tabArea=$('<div></div>').css('display','none')}else{this.menubarArea=$("<div class='tabAuthMenubarArea'></div>");this.toolbarArea=$("<div class='tabAuthToolbarArea'></div>");this.tabArea=$("<div class='tabAuthTabArea'></div>").addClass('statusBar')}},$1:function(){this.set_worksheetComponents(tab.ObjectRegistry.newView(ca).call(null,[this.get_viewModel().get_worksheet()]));this.$e=tab.ObjectRegistry.newView(bg).call(null,[this.get_viewModel().get_dashboard()]);this.$f=$.Deferred();this.get_viewModel().get_storyboard().done(ss.mkdel(this,function(nk){var nl=(ss.isValue(nk)?tab.ObjectRegistry.newView(tab.IAuthoringStoryboardView).call(null,[nk]):null);this.$f.resolve(nl)}))},addDomToBody:function(){var nk=$(document.body);nk.prepend(this.toolbarArea).prepend(this.menubarArea);if(tabBootstrap.Affordances.isOn('sidePane')){this.get_leftArea().addToDom(nk)}nk.append(this.tabArea);$('html').attr('lang',tsConfig.language);var nl=spiff.TableauClickHandler.targetAndClick(document.body,function(nm){if(ss.referenceEquals(nm.currentTarget,nm.target)){nm.stopPropagation();tab.SelectionClientCommands.clearAllSelections(tab.ModelUtils.findActiveOrDefaultVisual(null).get_visualId())}});nl.set_stopPropagationOnEvent(false);this.disposables.add$1(nl)},$3:function(){if(this.get_viewModel().get_isStory()){this.$f.done(function(nk){if(ss.isValue(nk)){nk.addToDom$1()}})}else if(ss.isValue(this.$e)){this.$e.addToDom($(''))}},$5:function(nk){this.$7();if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){this.layout()}},$4:function(){this.$7();this.layout()},$9:function(){this.menubarArea.remove();this.toolbarArea.remove();this.tabArea.remove()},handleComponentSizing:function(nk,nl){if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')&&ss.isNullOrUndefined(this.get_viewModel().get_client())){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){this.handleComponentSizing(nk,nl)}));return}var nm=bu.computeSizing({leftAreaWidth:nk,rightAreaWidth:nl,sheetType:this.get_viewModel().get_sheetType(),isMobile:tsConfig.is_mobile,isDevicePreviewBarVisible:this.get_viewModel().get_devicePreviewBarIsVisible()});var nn=this.get_viewModel().get_client().get_domNode();nn.css(nm);if(ss.isValue(this.get_devicePreviewBarView())){this.get_devicePreviewBarView().get_viewModel().update()}if(this.get_viewModel().get_sheetType()==='worksheet'){this.get_worksheetComponents().repositionShelves(nk,nl);this.get_worksheetComponents().layout()}},layout:function(){if(ss.isValue(this.get_leftArea())&&ss.isValue(this.get_leftArea().get_viewModel())){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())}},$8:function(nk,nl){if(nl.get_propertyName()==='Client'){this.layout()}},$2:function(){if(ss.isValue(this.$g)){this.$g.updateTabNavigation()}},addToDom:function(nk){nk.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){},$6:function(){switch(this.$d.get_authoringTabNavViewModel().get_currentViewMode()){case 1:{this.tabArea.addClass('filmstrip');break}default:{this.tabArea.removeClass('filmstrip');break}}}},{get_instance:function(){return bY.$1$1},set_instance:function(nk){bY.$1$1=nk}});var bZ=global.tab.AuthoringViewModel=ss.mkType(a,'tab.AuthoringViewModel',function(nk){this.$h=null;this.$f=null;this.$i=null;this.$g=null;this.$d=null;this.$e=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;spiff.BaseViewModel.call(this);if(ss.isNullOrUndefined(nk)){throw new ss.ArgumentNullException('workbookModel')}this.$i=nk;this.$g=new(ss.makeGenericType(tab.ModelHolder$1,[tab.DashboardModel]));this.$3();this.$6();this.$b(this.$i.get_sheetType());tab.StartupUtils.callAfterModelsInitialized(function(){jm.showToastIfNeeded()})},{add_sheetTypeChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_sheetTypeChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_dashboardViewChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_dashboardViewChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_devicePreviewBarVisibilityChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_devicePreviewBarVisibilityChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},get_client:function(){return tab.Application.get_instance().get_client()},get_rightAreaDrawerViewModel:function(){return tab.Application.get_instance().get_rightAreaDrawerViewModel()},get_toolbarViewModel:function(){return this.$2$4},set_toolbarViewModel:function(nk){this.$2$4=nk},get_authoringMenuBarViewModel:function(){return this.$2$5},set_authoringMenuBarViewModel:function(nk){this.$2$5=nk},get_authoringTabNavViewModel:function(){return this.$2$6},set_authoringTabNavViewModel:function(nk){this.$2$6=nk},get_authoringStatusViewModel:function(){return this.$2$7},set_authoringStatusViewModel:function(nk){this.$2$7=nk},get_leftAreaViewModel:function(){return this.$h},get_worksheet:function(){return this.$f},get_dashboard:function(){return this.$d},get_devicePreviewBarViewModel:function(){return this.$2$8},set_devicePreviewBarViewModel:function(nk){this.$2$8=nk},get_storyboard:function(){return this.$e},get_sheetType:function(){return this.$i.get_sheetType()},get_isDashboardOrFlexibleDashboard:function(){return this.get_sheetType()==='dashboard'||this.get_sheetType()==='flexible-dashboard'},get_isStory:function(){return this.get_sheetType()==='story'},get_authoringWorksheetIsVisible:function(){return this.$f.get_visible()},get_authoringDashboardIsVisible:function(){return this.$d.get_visible()},get_devicePreviewBarIsVisible:function(){return ss.isValue(this.$g.get_model())&&this.$g.get_model().get_devicePreviewBarIsVisible()},$3:function(){if(!tsConfig.is_desktop){this.set_authoringTabNavViewModel(new bD(this.$i));this.set_authoringMenuBarViewModel(new bq(this.$i));this.set_toolbarViewModel(new bV);var nk=this.get_authoringTabNavViewModel();this.set_authoringStatusViewModel(new bw(ss.mkdel(nk,nk.setSelectedViewMode)))}this.$d=new bh(this.$g);var nl=new hR;nl.setPaneViewModel(3,this.$d.leftPanelPaneViewModel);nl.setPaneViewModel(6,this.$d.leftLayoutPaneViewModel);this.$e=$.Deferred();var nm=tab.ApplicationModel.get_instance();var nn=nm.modelInstance(tab.AuthoringLeftAreaExpansionModel).call(nm);var no=tab.ApplicationModel.get_instance();this.$h=new bm(nn,no.modelInstance(tab.ExpandedSidePaneWidthModel).call(no),nl,0);this.$f=new cb(this.$g,this.$h.get_leftPanelViewModel(),cz.generate());if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&tab.FeatureFlags.isEnabled('BEAuthoring_DevicePreviewBar')){this.set_devicePreviewBarViewModel(new eW(this.$g,this.$h))}if(tab.FeatureFlags.isEnabled('AIExplainThisMark_AuthoringMode')){this.disposables.add$1(new tab.ExplainTheMarkSupport)}},$6:function(){var nk=tab.Application.get_instance();nk.add_clientChanged(ss.mkdel(this,this.$1));this.disposables.add(ss.mkdel(this,function(){nk.remove_clientChanged(ss.mkdel(this,this.$1))}));this.$i.addDashboardUpdatedHandler(ss.mkdel(this,this.$4));this.$i.get_commands().add_commandsChanged(ss.mkdel(this,this.$a));this.$i.add_sheetTypeChanged(ss.mkdel(this,this.$b));this.$i.add_uiModeChanged(ss.mkdel(this,this.$5));var nl=ss.mkdel(this,function(){this.$9()});this.disposables.add(ss.mkdel(this,function(){this.$i.removeDashboardHandler(ss.mkdel(this,this.$4));this.$i.get_commands().remove_commandsChanged(ss.mkdel(this,this.$a));this.$i.remove_sheetTypeChanged(ss.mkdel(this,this.$b));this.$i.remove_uiModeChanged(ss.mkdel(this,this.$5))}));this.disposables.add$1(this.$g.newDisposableContext().addEventBinding(ss.mkdel(this,function(nn){nn.add_activeZoneChanged(ss.mkdel(this,this.$9));nn.add_newDashboard(ss.mkdel(this,this.$c));nn.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$2))}),ss.mkdel(this,function(nn){nn.remove_activeZoneChanged(ss.mkdel(this,this.$9));nn.remove_newDashboard(ss.mkdel(this,this.$c));nn.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.$2))})));var nm=function(){bZ.checkForExistingSession()};tab.CommandController.get().add_onInitialBootstrap(nm);this.disposables.add(function(){tab.CommandController.get().remove_onInitialBootstrap(nm)})},$4:function(nk){if(bZ.$1.isValueCreated&&ss.isValue(this.$g.get_model())){bZ.$1.value().delete$1(this.$g.get_model().get_sheetName())}var nl=ss.isValue(this.$g.get_model())&&ss.isValue(nk)&&this.$g.get_model().get_devicePreviewBarIsVisible()!==nk.get_devicePreviewBarIsVisible();this.$g.set_Model(nk);this.$5();if(nl){this.raiseActionEvent(this.$2$3)}},$c:function(){if(ss.isNullOrUndefined(this.get_authoringStatusViewModel())){return}var nk=tab.ModelUtils.findActiveVisual();if(ss.isValue(nk)&&nk.get_shouldShowStats()&&!fD.get_isEmptyWorksheet()&&this.$i.get_uiMode()!=='data-tab'){this.get_authoringStatusViewModel().updateForVisual(nk)}else{this.get_authoringStatusViewModel().updateForVisual(null)}},$5:function(){this.$9();this.$f.set_visible(this.$8());this.$d.set_visible(this.$7());this.$c()},dispose:function(){this.set_toolbarViewModel(tab.MiscUtil.dispose$1(this.get_toolbarViewModel()));this.set_authoringTabNavViewModel(tab.MiscUtil.dispose$1(this.get_authoringTabNavViewModel()));this.$f.dispose();this.$d.dispose();this.set_devicePreviewBarViewModel(tab.MiscUtil.dispose$1(this.get_devicePreviewBarViewModel()));this.$g.dispose();this.$h.dispose();this.set_authoringMenuBarViewModel(tab.MiscUtil.dispose$1(this.get_authoringMenuBarViewModel()));this.set_authoringStatusViewModel(tab.MiscUtil.dispose$1(this.get_authoringStatusViewModel()));if(cd.get_hasInstance()){cd.get_instance().dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},updatePortSizeAfterManualLayout:function(nk){tabBootstrap.ViewerBootstrap.get_instance().set_authoringLeftAreaWidth(nk);this.get_client().doResize()},$b:function(nk){switch(nk){case'story':{this.$0();break}}if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')&&ss.isValue(tsConfig.current_sheet_type)){this.$f.set_visible(nk==='worksheet');this.$d.set_visible(nk==='dashboard')}this.raiseActionEvent$1(Object).call(this,this.$2$1,nk)},$0:function(){if(this.$e.state()!=='resolved'){tab.ModuleManager.load$1(tab.IStoryAuthoringModule).call(null,[]).done(ss.mkdel(this,function(nk){var nl=nk.newAuthoringStoryboardViewModel(this.$g);this.$h.get_leftPanelViewModel().setPaneViewModel(4,nl.get_leftPanelContentPaneViewModel());this.$h.get_leftPanelViewModel().setPaneViewModel(5,nl.get_leftPanelLayoutPaneViewModel());this.$e.resolve(nl)}))}else{this.$e.resolve.apply(this.$e,null)}},$a:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(this.get_toolbarViewModel())){return}var nl=nk.get_commands();if(tsConfig.is_mobile&&ss.isValue(nl)){nl=bX.filterCommandsForMobile(nl)}nl=bX.filterCommandsByUIMode(nl,this.$i.get_uiMode());this.get_toolbarViewModel().updateCommands(nl,this.$g.get_model(),this.$i.get_uiMode())},$9:function(){this.$a(this.$i.get_commands())},$2:function(){this.raiseActionEvent(this.$2$3)},$1:function(){this.notifyPropertyChanged('Client');this.raiseActionEvent(this.$2$2)},$8:function(){return!this.$i.get_isDataTabUIMode()&&(ss.isNullOrUndefined(this.$g.get_model())||!this.$g.get_model().get_isDashboard())},$7:function(){return!this.$i.get_isDataTabUIMode()&&(ss.isNullOrUndefined(this.$g.get_model())||this.$g.get_model().get_isDashboard())}},{get_thumbnailCache:function(){return bZ.$1.value()},checkForExistingSession:function(){var nk=ss.referenceEquals(document.referrer,tab.WindowHelper.getLocation(window.self).href);if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')||nk||tsConfig.is_desktop||!tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){return}var nl=tab.Strings.AuthoringAutoRecoveredSessionMessage;var nm=tab.Strings.AuthoringAutoRecoveredSessionMessageSaveNoSaveAs;var nn=tab.Strings.AuthoringAutoRecoveredSessionMessageNoSave;var no=tab.Strings.AuthoringAutoRecoveredSessionMessageNoPublish;if(tab.FeatureFlags.isEnabled('SaveToPublishButton')){nl=tab.Strings.AuthoringAutoRecoveredSessionMessagePublish;nm=tab.Strings.AuthoringAutoRecoveredSessionMessagePublishNoPublishAs;nn=tab.Strings.AuthoringAutoRecoveredSessionMessagePublishAsNoPublish}var np=(tab.SavingUtil.isSaveEnabled()?nl:(tab.SavingUtil.isSaveAsEnabled()?nn:no));if(tsConfig.isPublic&&tab.SavingUtil.isSaveEnabled()&&!tab.SavingUtil.isSaveAsEnabled()){np=nm}var nq={message:np,toastType:'info',autoDismiss:false};SharedWidgets.ToastWidget.show(nq)},shouldShowFilmstripView:function(){return tab.FeatureFlags.isEnabled('WebFilmstripView')&&!tsConfig.is_mobile}});var ca=global.tab.AuthoringWorksheetView=ss.mkType(a,'tab.AuthoringWorksheetView',function(nk){this.disposables=new tab.DisposableHolder;this.insideViewArea=null;this.cards=null;this.$c=null;this.$d=null;this.$f=null;this.$e=false;this.$1$1=null;this.$c=nk;this.$c.add_propertyChanged(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_propertyChanged(ss.mkdel(this,this.$6))})));this.$8();this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.$7)));if(ss.isValue(nk.emptyAuthoringWorksheetViewModel)){this.set_emptySheetView(tab.ObjectRegistry.newView(fC).call(null,[this.get_viewModel().emptyAuthoringWorksheetViewModel]));this.disposables.add$1(this.get_emptySheetView())}},{get_viewModel:function(){return this.$c},get_rootElement:function(){return null},get_emptySheetView:function(){return this.$1$1},set_emptySheetView:function(nk){this.$1$1=nk},dispose:function(){this.disposables.dispose();this.$9()},$b:function(){if(this.get_viewModel().get_visible()){this.attachAreasDom();this.layout();this.notifyContentAddedToDom()}else{this.detachAreasDom()}},$2:function(){this.insideViewArea=$(ss.formatString("<div class='{0}' data-tb-test-id='{0}'></div>",'tabAuthVerticalChrome'))},$9:function(){this.insideViewArea.remove()},attachAreasDom:function(){$(document.body).append(this.insideViewArea)},$6:function(nk,nl){if(nl.get_propertyName()==='visible'){this.$b()}},detachAreasDom:function(){this.insideViewArea.detach()},buildDom:function(){this.$2();this.addContentToAreas();this.addDomToBody();this.notifyContentAddedToDom();if(ss.isValue(this.get_viewModel().get_calculationEditorViewModel())){tab.ObjectRegistry.newView(co).call(null,[this.get_viewModel().get_calculationEditorViewModel()])}if(ss.isValue(this.get_viewModel().get_compoundTableCalcViewModel())){tab.ObjectRegistry.newView(lK).call(null,[this.get_viewModel().get_compoundTableCalcViewModel()])}if(ss.isValue(this.get_viewModel().get_refLineEditorViewModel())){tab.ObjectRegistry.newView(jY).call(null,[this.get_viewModel().get_refLineEditorViewModel()])}if(!this.get_viewModel().get_visible()){this.detachAreasDom()}_.defer(ss.mkdel(this,function(){if(ss.isValue(this.get_emptySheetView())){this.get_emptySheetView().onUpdateVisibility()}}))},addDomToBody:function(){this.attachAreasDom()},addContentToAreas:null,notifyContentAddedToDom:function(){var nk=new ss.ObjectEnumerator(this.cards);try{while(nk.moveNext()){var nl=nk.current();for(var nm=0;nm<nl.value.length;nm++){var nn={$:nl.value[nm]};nn.$.onAddedToDom();if(nl.key==='left'&&ss.isValue(nn.$.get_contentView())){nn.$.get_contentView().add_scrollContentChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel({card:nn,$this:this},function(){this.card.$.get_contentView().remove_scrollContentChanged(ss.mkdel(this.$this,this.$this.$a))})))}}}}finally{nk.dispose()}},layout:function(){this.$a()},$8:function(){this.cards={};this.cards['top']=[];if(ss.isValue(this.get_viewModel().get_cardLayout()['top'])){var nk=this.get_viewModel().get_cardLayout()['top'];for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.cards['top'].push(tab.ObjectRegistry.newView(cB).call(null,[this.get_viewModel().get_cards()[nm]]))}}this.cards['left']=[];if(ss.isValue(this.get_viewModel().get_cardLayout()['left'])){var nn=this.get_viewModel().get_cardLayout()['left'];for(var no=0;no<nn.length;no++){var np=nn[no];var nq=this.get_viewModel().get_cards()[np];var nr=tab.ObjectRegistry.newView(cB).call(null,[nq]);this.$0(nr)}}},$0:function(nk){this.cards['left'].push(nk);var nl=null;var nm=ss.mkdel(this,function(nn){var no=ss.safeCast(nn,ss.makeGenericType(cy,[tab.IViewModel]));if(ss.isValue(no)){if(ss.isValue(nl)){nl.dispose();nl=null}no.add_scrollContentChanged(ss.mkdel(this,this.$a));nl=new tab.CallOnDispose(ss.mkdel(this,function(){no.remove_scrollContentChanged(ss.mkdel(this,this.$a))}))}this.$a()});nk.add_cardContentChanged(nm);this.disposables.add$1(new tab.CallOnDispose(function(){nk.remove_cardContentChanged(nm)}))},$7:function(nk){this.$d=null;this.$a()},repositionShelves:function(nk,nl){},$a:function(){this.$1();this.$e=true;_.defer(ss.mkdel(this,this.$5))},$5:function(){if(!this.$e){return}var nk=!_.isEqual(this.$f,this.$3());if(ss.isNullOrUndefined(this.$d)||nk){this.$d=null;this.$4()}this.$e=false;this.$1()},$1:function(){if(ss.isNullOrUndefined(this.$d)){return}for(var nk=0;nk<this.$d.length;nk++){var nl=this.cards['left'][nk];nl.get_contentView().setScrollableContentActualHeight(this.$d[nk])}},$4:function(){var nk=$('.tabAuthLeftShelves');var nl=this.cards['left'];for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=nn.get_contentView();no.setScrollableContentActualHeight(null)}this.$f=this.$3();var np=tab.DoubleUtil.roundToInt(nk.outerHeight(true));var nq=0;nk.children().each(function(nF,nG){if($(nG).is(':visible')){nq+=tab.DoubleUtil.roundToInt($(nG).outerHeight(true))}});if(nq<=np){return}var nr=12;var ns=0;var nt=0;var nu=this.cards['left'];for(var nv=0;nv<nu.length;nv++){var nw=nu[nv];if(nw.element.is(':visible')){var nx=nw.get_contentView();ns+=nx.get_scrollableContentPreferredHeight();nt++}}var ny=nq-ns;var nz=np-ny;var nA=nz-nr*nt;this.$d=[];var nB=0;var nC=nA;while(nB<this.$f.length-1){var nD=null;if(ss.isValue(this.$f[nB])){nD=nr;if(nA>0){var nE=Math.floor(nA*ss.unbox(this.$f[nB])/ns);nD=ss.Nullable$1.add(nD,nE);nC-=nE}}this.$d.push(nD);nB++}if(ss.isValue(this.$f[nB])){this.$d.push(((nA>0)?(nC+nr):nr))}else{this.$d.push(null)}},$3:function(){var nk=[];var nl=this.cards['left'];for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(nn.element.is(':visible')){var no=nn.get_contentView();var np=no.get_scrollableContentPreferredHeight();nk.push(np)}else{nk.push(null)}}return nk},addToDom:function(nk){nk.append(this.get_rootElement());this.onAddedToDom()},onAddedToDom:function(){}},{findVizZone:function(){return $('.'+'tabZone-viz')},findVizView:function(){return $('.'+'tab-tvView')},findVisibleTitle:function(nk){var nl=ca.findTitles();nl=ca.$0(nl);if(nl.length===0||!nl.is(':visible')||!nk&&tsConfig.is_mobile){return null}return nl},findTitles:function(){return $('.'+'tab-tvTitle')},$0:function(nk){if(ss.isNullOrUndefined(nk)){return $('')}if(nk.length===2&&tsConfig.current_sheet_type==='worksheet'){var nl=$(nk[0]);var nm=$(nk[1]);var nn=nl.parents().hasClass('facadedom');var no=nm.parents().hasClass('facadedom');if(!!!(nn^no)){return nl}return(nn?nm:nl)}if(nk.length>=3&&tsConfig.current_sheet_type==='worksheet'){return $(nk[0])}return nk}});var cb=global.tab.AuthoringWorksheetViewModel=ss.mkType(a,'tab.AuthoringWorksheetViewModel',function(nk,nl,nm){this.$a=null;this.$b=null;this.$h=null;this.$8=null;this.$k=null;this.$9=null;this.$g=null;this.$c=null;this.$f=null;this.$e=null;this.$d=null;this.$j=null;this.$i=false;this.shelvesModified=null;this.emptyAuthoringWorksheetViewModel=null;this.lastClickedPill=null;spiff.BaseViewModel.call(this);if(ss.isNullOrUndefined(nk)){throw new ss.ArgumentNullException('dashboardModelHolder')}this.$d=nk;this.$a=nm;this.$h=new kZ;this.$8=new W;this.$k=new mo;this.$b={};this.$b['columns']=this.$0(1);this.$b['rows']=this.$0(1);this.$b['pages']=this.$0(0);this.$b['filters']=this.$0(0);this.$b['marks']=this.$0(0);this.$b['measureValues']=this.$0(0);var nn=tab.ApplicationModel.get_instance();this.$9=cs.new$1(nn.modelInstance(tab.CalculationDialogModel).call(nn));this.disposables.add$1(this.$9);var no=tab.ApplicationModel.get_instance();this.$c=du.new$1(no.modelInstance(tab.CompoundTableCalcModel).call(no));this.disposables.add$1(this.$c);var np=tab.ApplicationModel.get_instance();this.$g=jZ.new$1(np.modelInstance(tab.ReferenceLineEditorModel).call(np));this.disposables.add$1(this.$g);nl.setPaneViewModel(0,this.$h);nl.setPaneViewModel(1,this.$8);if(!tsConfig.is_metrics_authoring){this.emptyAuthoringWorksheetViewModel=new fD}this.$7();this.$6()},{get_visible:function(){return this.$i},set_visible:function(nk){if(this.$i===nk){return}this.$i=nk;this.notifyPropertyChanged('visible')},get_client:function(){return tab.Application.get_instance().get_client()},get_cards:function(){return this.$b},get_vizSummaryViewModel:function(){return this.$k},get_calculationEditorViewModel:function(){return this.$9},get_compoundTableCalcViewModel:function(){return this.$c},get_refLineEditorViewModel:function(){return this.$g},get_schemaViewerViewModel:function(){return this.$h},get_cardLayout:function(){return this.$a},$6:function(){this.disposables.add$1(this.$d.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$2)).addEventBinding(ss.mkdel(this,function(nk){nk.zonesModel.add_newZone(ss.mkdel(this,this.$5))}),ss.mkdel(this,function(nk){nk.zonesModel.remove_newZone(ss.mkdel(this,this.$5))})))},dispose:function(){var nk=new ss.ObjectEnumerator(this.$b);try{while(nk.moveNext()){var nl=nk.current();nl.value.dispose()}}finally{nk.dispose()}if(ss.isValue(this.$f)){this.$f.dispose()}if(ss.isValue(this.$8)){this.$8.dispose()}if(ss.isValue(this.$h)){this.$h.dispose()}this.$k.dispose();this.$1();spiff.BaseViewModel.prototype.dispose.call(this)},$1:function(){if(ss.isNullOrUndefined(this.$j)){return}this.$j.get_shelves().remove_newShelves(ss.mkdel(this,this.$3));this.$j=null},$0:function(nk){var nl=new lo;this.disposables.add$1(nl);var nm=new cC;nm.set_content(nl);nm.set_isCollapsed(false);nm.set_orientation(nk);return nm},buildShelves:function(){var nk=[this.$b['columns'],this.$b['rows'],this.$b['filters'],this.$b['pages'],this.$b['measureValues']];var nl=tab.ModelUtils.findActiveOrDefaultVisual(null).get_shelves();if(ss.isValue(nl)&&ss.isValue(nl.get_shelves())){var nm=nl.get_shelves();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np;switch(no.get_shelfType()){case'columns-shelf':{np=this.$b['columns'];break}case'rows-shelf':{np=this.$b['rows'];break}case'pages-shelf':{np=this.$b['pages'];break}case'measures-shelf':{np=this.$b['measureValues'];break}case'filter-shelf':{np=this.$b['filters'];break}case'encoding-shelf':{this.$f.addEncodingShelf(no);continue}default:{continue}}var nq=np.get_content();nq.set_shelf(no);np.set_content(nq);ss.remove(nk,np)}if(ss.isValue(this.emptyAuthoringWorksheetViewModel)&&fD.isDragHintEnabled()){this.emptyAuthoringWorksheetViewModel.updateIfEmptySheet()}}for(var nr=0;nr<nk.length;nr++){var ns=nk[nr];var nt=ns.get_content();nt.set_shelf(null)}},$2:function(){this.$h.set_dataSchema(tab.ApplicationModel.get_instance().get_workbook().get_dataSchema());this.$4(tab.ModelUtils.findActiveOrDefaultVisual(null))},$5:function(nk){if(nk.get_zoneType()==='viz'){this.$4(nk.get_visualModel())}},$4:function(nk){this.$1();this.$j=nk;if(ss.isNullOrUndefined(this.$j)){return}if(ss.isValue(this.$8)&&ss.isValue(this.$j.get_analyticsModel())){this.$8.set_analyticsPaneModel(this.$j.get_analyticsModel())}this.$k.update(this.$h,this.$j.get_shelves(),this.$j.get_marksCardModel());if(ss.isValue(this.$f)){this.$f.dispose()}this.$f=new ix(this.$j.get_marksCardModel());this.$b['marks'].set_content(this.$f);this.$j.get_shelves().add_newShelves(ss.mkdel(this,this.$3));this.buildShelves()},$3:function(){this.buildShelves();this.$h.clearSelection();if(!ss.staticEquals(this.shelvesModified,null)){this.shelvesModified()}},$7:function(){this.$e=new fq;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this.$e,this.$e.update));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this.$e,this.$e.update))}))}});var cc=global.tab.AutofitDevConfigurationDialog=ss.mkType(a,'tab.AutofitDevConfigurationDialog',function(nk){spiff.PureRenderComponent.call(this,nk);var nl=tabBootstrap.CookieHelper.getValueForCookie(cc.devConfigCookieName);if(ss.isValue(nl)){this.state=JSON.parse(nl)}else{this.state={singleThresholdEdgeDistance:'',singleThresholdPerpendicularDistance:'',singleThresholdEdgeSizeDifference:'',multiThresholdEdgeDistance:'',multiThresholdPerpendicularDistance:'',multiThresholdEdgeSizeDifference:''}}},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{children:this.$0(),isModal:true,type:0,positioningBehavior:0,dialogWidth:375,dialogBodyStyle:{display:'flex'},footerContent:this.$1(),shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:false,showFooter:true,title:'Autofit Dev Configuration',zIndex:1000,onCloseRequest:ss.mkdel(this,this.$2)})},$0:function(){var nk=spiff.DOMElements.div({},'Configure single pass Autofit');var nl=spiff.DOMElements.div({},'Edge Distance ');var nm=spiff.DOMElements.input({type:'text',key:'singleEdgeInput',value:this.state.singleThresholdEdgeDistance,onChange:ss.mkdel(this,function(ny){this.setState({singleThresholdEdgeDistance:ny.target.value})})});var nn=spiff.DOMElements.div({},'Edge Size Difference ');var no=spiff.DOMElements.input({type:'text',key:'singleEdgeSizeInput',value:this.state.singleThresholdEdgeSizeDifference,onChange:ss.mkdel(this,function(ny){this.setState({singleThresholdEdgeSizeDifference:ny.target.value})})});var np=spiff.DOMElements.div({},'Perpindicular Distance ');var nq=spiff.DOMElements.input({type:'text',key:'singlePerpindicularInput',value:this.state.singleThresholdPerpendicularDistance,onChange:ss.mkdel(this,function(ny){this.setState({singleThresholdPerpendicularDistance:ny.target.value})})});var nr=spiff.DOMElements.div({},'Configure multi pass Autofit');var ns=spiff.DOMElements.div({},'Edge Distance ');var nt=spiff.DOMElements.input({type:'text',key:'multiEdgeInput',value:this.state.multiThresholdEdgeDistance,onChange:ss.mkdel(this,function(ny){this.setState({multiThresholdEdgeDistance:ny.target.value})})});var nu=spiff.DOMElements.div({},'Edge Size Difference ');var nv=spiff.DOMElements.input({type:'text',key:'multiEdgeSizeInput',value:this.state.multiThresholdEdgeSizeDifference,onChange:ss.mkdel(this,function(ny){this.setState({multiThresholdEdgeSizeDifference:ny.target.value})})});var nw=spiff.DOMElements.div({},'Perpindicular Distance ');var nx=spiff.DOMElements.input({type:'text',key:'singleThreshold',value:this.state.multiThresholdPerpendicularDistance,onChange:ss.mkdel(this,function(ny){this.setState({multiThresholdPerpendicularDistance:ny.target.value})})});return spiff.DOMElements.div({},nk,spiff.DOMElements.br({}),nl,nm,spiff.DOMElements.br({}),nn,no,spiff.DOMElements.br({}),np,nq,spiff.DOMElements.br({}),spiff.DOMElements.br({}),nr,spiff.DOMElements.br({}),ns,nt,spiff.DOMElements.br({}),nu,nv,spiff.DOMElements.br({}),nw,nx,spiff.DOMElements.br({}),spiff.DOMElements.br({}))},$1:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nl){this.$2()}),testId:'AutofitDevConfigTestId1',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace}});return spiff.DOMElements.div({},nk)},$2:function(){tabBootstrap.CookieHelper.setCookie(cc.devConfigCookieName,JSON.stringify(this.state),'/',null);this.props.close()}});var cd=global.tab.AutoSaveController=ss.mkType(a,'tab.AutoSaveController',function(){this.$e=new tab.DisposableHolder;this.$d=null;this.$h=[];this.$g=null;this.$f=null;this.$1$1=null;this.isNewWorkbook=false;this.$1$2=null;this.$1$3=null;this.isAutoSaveEnabledAtSiteLevel=false;this.status=null;this.isAutoSaveEnabledAtSiteLevel=true;this.$0();if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){tab.StartupUtils.callAfterModelsInitialized(ss.mkdel(this,function(){this.$8();if(!this.isNewWorkbook&&tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')){this.$b()}}))}if(!ss.isNullOrEmptyString(tsConfig.workbookLastPublishedAt)){this.set_documentLastPublished(new Date(tsConfig.workbookLastPublishedAt))}},{add_statusUpdate:function(nk){this.$1$1=ss.delegateCombine(this.$1$1,nk)},remove_statusUpdate:function(nk){this.$1$1=ss.delegateRemove(this.$1$1,nk)},get_willAutoSaveEnableOnPublish:function(){return tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&tsConfig.is_authoring&&this.isNewWorkbook&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()},get_autoSaveEnabled:function(){return tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')&&this.isAutoSaveEnabledAtSiteLevel&&tsConfig.is_authoring&&!this.isNewWorkbook&&!tsConfig.is_desktop&&!tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthoringDatasourceUri()},get_documentLastPublished:function(){return this.$1$2},set_documentLastPublished:function(nk){this.$1$2=nk},get_draftStatusLastSaved:function(){return this.$1$3},set_draftStatusLastSaved:function(nk){this.$1$3=nk},$8:function(){tab.Application.get_instance().add_clientChanged(ss.mkdel(this,this.$a));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$4));if(this.get_autoSaveEnabled()){tab.WorldUpdateInterceptor.get().add_onCommandResponse(ss.mkdel(this,this.$1))}this.$e.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.Application.get_instance().remove_clientChanged(ss.mkdel(this,this.$a));tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$4));tab.WorldUpdateInterceptor.get().remove_onCommandResponse(ss.mkdel(this,this.$1))})))},onPublishSuccess:function(){if(!tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveEnabled')){return}this.set_documentLastPublished(tab.DateUtil.get_now());this.$b();if(tab.OnlineAnalyticsClient.get_telemetryEnabled()){tab.OnlineAnalyticsClient.logEvent('AutoSave_Publish',ss.mkdict(['Event','PublishSuccess']))}},publishInitiated:function(){if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')){this.$c();this.$9(tab.Strings.AutoSavePublishingInProgress)}},$5:function(){if(tab.ApplicationModel.get_instance().get_workbook().get_isWorkbookModifiedAuthoring()){this.$c();this.$9(tab.Strings.UnpublishedChanges)}else{this.$b()}},$6:function(){this.$2();this.$9(tab.Strings.AutoSaveSavingInProgress);this.$d=window.setTimeout(ss.mkdel(this,function(){this.set_draftStatusLastSaved(tab.DateUtil.get_now());this.$b()}),cd.$1)},$4:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.layoutStatus)){return}if(tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')&&!this.get_autoSaveEnabled()&&!this.isNewWorkbook){this.$5()}else if(!ss.isNullOrEmptyString(nk.layoutStatus.guid)&&this.get_autoSaveEnabled()){this.$6()}},$1:function(nk){if(!tab.FeatureFlags.isEnabled('WebAuthoringAutoSaveMVP')||!this.get_autoSaveEnabled()||!_.contains(cd.$2,nk.get_worldUpdateCommand().commandName)){return}var nl=false;tab.ApplicationModel.get_instance().get_uploadedFiles().forEach(ss.mkdel(this,function(nm,nn){if(!_.contains(this.$h,nn)){this.$h.push(nn);nl=true;if(tab.OnlineAnalyticsClient.get_telemetryEnabled()){tab.OnlineAnalyticsClient.logEvent('AutoSave_FileUploaded',ss.mkdict(['Event','FileUploaded','FileSize',((nm>2147483647)?-1:nm)]))}}}));if(nl){window.setTimeout(function(){jn.showPublishUploadedFileDialog()},1000)}},$0:function(){this.isNewWorkbook=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri()},$2:function(){this.$d=tab.MiscUtil.clearTimeout(this.$d)},$9:function(nk){this.status=nk;if(!ss.staticEquals(this.$1$1,null)){this.$1$1(nk)}},$b:function(){if(ss.isNullOrUndefined(this.$g)||ss.isNullOrUndefined(this.$f)){this.$3()}if(this.get_autoSaveEnabled()&&ss.isValue(tab.ApplicationModel.get_instance().get_workbook().get_draftStatus())&&tab.ApplicationModel.get_instance().get_workbook().get_draftStatus().get_isDraft()){this.$g.stopDateGeneration();this.$f.startDateGeneration(this.get_draftStatusLastSaved())}else{this.$f.stopDateGeneration();this.$g.startDateGeneration(this.get_documentLastPublished())}},$c:function(){if(ss.isValue(this.$f)){this.$f.stopDateGeneration()}if(ss.isValue(this.$g)){this.$g.stopDateGeneration()}},$3:function(){var nk={format:tab.ApplicationModel.get_instance().get_localeDateFormat(),locale:tsConfig.locale,timeFormat:tab.ApplicationModel.get_instance().get_localeTimeFormat(),locale_formatting_strings:tableau.format.defaultLocaleStrings};this.$g=new eL(cd.$5,nk);this.$g.add_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$f=new eL(cd.$3,nk);this.$f.add_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$e.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_onNewModifiedTextBuilt(ss.mkdel(this,this.$7));this.$g.remove_onNewModifiedTextBuilt(ss.mkdel(this,this.$7))})))},$7:function(nk){this.$9(nk)},$a:function(){tab.CommandController.get().remove_onInvalidation(ss.mkdel(this,this.$4));tab.CommandController.get().add_onInvalidation(ss.mkdel(this,this.$4))},dispose:function(){this.$e.dispose();cd.$4=null}},{get_instance:function(){if(ss.isNullOrUndefined(cd.$4)){cd.$4=new cd}return cd.$4},get_hasInstance:function(){return ss.isValue(cd.$4)},get_logger:function(){return tab.Logger.getLogger(cd,null)}});var ce=global.tab.AutoSaveWarningDialogComponent=ss.mkType(a,'tab.AutoSaveWarningDialogComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{$0:function(){var nk=((this.props.primaryChoiceButtonIsAvailable&&this.props.doPrimaryActionOnCloseRequest)?'tab-autosavewarning-primarybutton':'tab-autosavewarning-secondarybutton');return function(nl){return nl.querySelector('.'+nk)}},render:function(){var nk={paddingBottom:SharedWidgets.TabStyles.Spacing.MediumSpace};return React.createElement(SharedWidgets.DialogWidget,{children:this.$2(),testId:'AutoSaveWarningDialog',isModal:true,type:1,title:this.props.title,positioningBehavior:0,dialogWidth:this.props.dialogWidth,disableAutoFocus:this.$0(),onCloseRequest:((this.props.primaryChoiceButtonIsAvailable&&this.props.doPrimaryActionOnCloseRequest)?this.props.primaryChoiceAction:this.props.secondaryChoiceAction),shouldAdjustPositionOnWindowResize:true,shouldReturnFocusOnClose:true,zIndex:1000,dialogBodyStyle:nk})},$1:function(){var nk=null;if(this.props.primaryChoiceButtonIsAvailable){nk=React.createElement(SharedWidgets.ButtonWidget,{buttonType:2,handleClick:ss.mkdel(this,function(nm){this.$3()}),testId:'AutoSaveWarningPrimaryAction',className:'tab-autosavewarning-primarybutton',children:this.props.primaryChoiceButtonString,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace}})}var nl=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nm){this.props.secondaryChoiceAction()}),testId:'AutoSaveWarningSecondaryAction',className:'tab-autosavewarning-secondarybutton',children:this.props.secondaryChoiceButtonString});return spiff.DOMElements.div({className:'tab-autosavewarning-footer'},nl,nk)},$2:function(){var nk=spiff.DOMElements.div({className:'tab-autosavewarning-title'},this.props.title);var nl=null;if(ss.isValue(this.props.learnMoreToken)){var nm=tab.UriUtil.makeHelpUri(this.props.learnMoreToken,'');nl=spiff.DOMElements.a({href:nm,target:'_blank',className:'tab-autosavewarning-learnmore'},tab.Strings.AuthAutosaveLearnMore)}var nn=null;var no=null;if(ss.isValue(this.props.firstMessage)){nn=spiff.DOMElements.div({className:'tab-autosavewarning-primarybutton-message'},this.props.firstMessage,(ss.isNullOrEmptyString(this.props.secondMessage)?nl:null))}if(ss.isValue(this.props.secondMessage)){no=spiff.DOMElements.div({className:'tab-autosavewarning-autosave'},this.props.secondMessage,nl)}return spiff.DOMElements.div({className:'tab-autosavewarning-content'},nk,nn,no,this.$1())},$3:function(){this.props.primaryChoiceAction()}});var cf=global.tab.BaseFieldDragInstance=ss.mkType(a,'tab.BaseFieldDragInstance',function(nk,nl){lm.call(this,nk,nl)},{get_fields:null,get_fieldNames:null,get_pills:null,get_pill:null,hasOnlyFields:null,hasOnlyPills:null,shouldGetAggregationOfField:function(nk){return this.isRightDrag&&nk.length===1},dropPositionToReplacePill:function(nk){var nl=nk.shelfVM.matchingDropsFrom(this);var nm=nk.get_indexInShelf();if(ss.isNullOrUndefined(nl)){if(!tab.FeatureFlags.isEnabled('WebFilterDialog')&&nk.shelfVM.get_shelfType()==='filter-shelf'){return null}var nn={shelfPosIndex:nm,shelfDropAction:'replace'};return nn}return _.find(nl.shelfDropPositions,function(no){return no.shelfDropAction==='replace'&&no.shelfPosIndex===nm})},dropPositionForShelf:function(nk,nl){var nm=nk.matchingDropsFrom(this);if(!ss.isValue(nm)){return null}var nn=_.find(nm.shelfDropPositions,function(no){return(no.shelfDropAction||'insert')==='insert'&&no.shelfPosIndex===ss.coalesce(nl,0)});if(ss.isNullOrUndefined(nn)){nn=_.find(nm.shelfDropPositions,function(no){return!ss.isValue(nl)||no.shelfPosIndex===ss.unbox(nl)})}return nn},fieldsToDropOnShelf:function(nk){if(this.finalDrop.state()!=='resolved'){return this.get_fields()}var nl=[];for(var nm=0;nm<this.drag.shelfDropModels.length;nm++){var nn=this.drag.shelfDropModels[nm];if(nn.shelfType===nk){var no=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();for(var np=0;np<nn.fieldEncodings.length;np++){var nq=nn.fieldEncodings[np];var nr=no.findField(nq.fn);if(ss.isValue(nr)){nl.push(nr)}}}}return nl},selectAggregationForField:function(nk,nl,nm){this.$0(nl,nk,ss.mkdel(this,function(nn){var no=nn;if(ss.isNullOrUndefined(no)){var np=new F;np.selectedField=nl;no=np}nm(no)}))},addShelfField:function(nk,nl,nm,nn,no){tab.ShelfClientCommands.addShelfField(nk.get_shelf(),nl,nm,nn,this.isRightDrag,no)},addEncodingFields:function(nk,nl,nm,nn,no){tab.ShelfClientCommands.addEncodingFields(nk.get_shelf(),nl,nm,nn,this.isShiftDrag,this.isRightDrag,no)},$0:function(nk,nl,nm){tab.ShelfClientCommands.getFieldAggregationsForDrop(nk.get_globalName(),nl,function(nn){var no=nn;if(ss.isValue(no)&&ss.isValue(no.fieldDisplayList)&&no.fieldDisplayList.length>1){G.showAggregationSelection(no,nm)}else{nm(null)}},function(){nm(null)})},resolve:null,reject:null});var cg=global.tab.BaseZoneSelectionComponent$1=ss.mkType(a,'tab.BaseZoneSelectionComponent$1',function(nk){var nl=ss.registerGenericClassInstance(cg,[nk],function(nm,nn){this.boundAttachMoveDragSource=null;this.boundTrackButtons=null;this.$4=null;React.Component.call(this,nm,nn);this.state={buttonsHeight:0,buttonsWidth:0};this.boundAttachMoveDragSource=ss.mkdel(this,this.$0);this.boundTrackButtons=ss.mkdel(this,this.$3)},{componentDidMount:function(){this.$2()},componentDidUpdate:function(){this.$2()},render:null,renderEdge:function(nm,nn){return mQ.createChromeEdgeRender(nm,this.props,nn,this.boundAttachMoveDragSource).render()},renderButtons:function(nm){var nn=new mN(this.boundTrackButtons,this.props,nm,this.state.buttonsHeight,this.state.buttonsWidth);return nn.render()},$1:function(nm,nn){if(ss.isValue(nm)){var no=$(nm);if(!EventUtils.DragDropManager.isDragSource(no)){var np=this.props.resizeDragSourceFactory(nn);EventUtils.DragDropManager.attachDragSource(no,np)}}},$0:function(nm){if(ss.isValue(nm)){EventUtils.DragDropManager.attachDragSource($(nm),this.props.moveDragSource)}},$3:function(nm){if(ss.isNullOrUndefined(nm)){this.$4=null}else{this.$4=$(nm)}},$2:function(){if(ss.isNullOrUndefined(this.$4)){return}var nm=tab.DoubleUtil.roundToInt(this.$4.outerWidth());var nn=tab.DoubleUtil.roundToInt(this.$4.outerHeight());if(nm!==this.state.buttonsWidth||nn!==this.state.buttonsHeight){this.setState({buttonsWidth:nm,buttonsHeight:nn})}},renderPendingResizePreview:function(){if(this.props.resizePreviewProps.hasPendingResize){return km.renderZoneRectPreview(this.props.resizePreviewProps.pendingZoneGeometry,'keyboard-nudge-preview')}return null}},null,function(){return React.Component});return nl});ss.initGenericClass(cg,1);var ch=global.tab.BaseZoneSelectionViewModel$1=ss.mkType(a,'tab.BaseZoneSelectionViewModel$1',function(nk){var nl=ss.registerGenericClassInstance(ch,[nk],function(nm){this.dashboardModelHolder=null;this.$3=[];this.$4=null;this.$5=false;this.forceHidden=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[nk]).call(this);this.dashboardModelHolder=nm;tab.ApplicationViewModel.add_applicationSizeChanged(ss.mkdel(this,this.incrementProps));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationViewModel.remove_applicationSizeChanged(ss.mkdel(this,this.incrementProps))})));this.$4=new hb(ss.mkdel(this,function(){return this.get_dashboardWidth()}),ss.mkdel(this,function(){return this.get_dashboardHeight()}));this.disposables.add$1(this.$4);this.disposables.add$1(this.addChildViewModel(this.$4))},{get_dashboardWidth:function(){return((ss.isValue(this.dashboardModelHolder.get_model())&&ss.isValue(this.dashboardModelHolder.get_model().get_dashboardSize()))?this.dashboardModelHolder.get_model().get_dashboardSize().w:0)},get_dashboardHeight:function(){return((ss.isValue(this.dashboardModelHolder.get_model())&&ss.isValue(this.dashboardModelHolder.get_model().get_dashboardSize()))?this.dashboardModelHolder.get_model().get_dashboardSize().h:0)},get_resizePreviewViewModel:function(){return this.$4},get_dashboardContentWidth:function(){var nm=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard');return nm.w-tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_isMultiSelectFeatureEnabled:function(){return tab.ModelUtils.isMultiSelectFeatureEnabled(this.dashboardModelHolder.get_model())},get_areMultipleZonesSelected:function(){if(this.get_isMultiSelectFeatureEnabled()){return ss.isValue(this.dashboardModelHolder.get_model())&&this.dashboardModelHolder.get_model().get_activeZoneIDs().length>1}else{return false}},get_dragEnabled:null,get_isZoneChromeActive:function(){return this.$5},set_isZoneChromeActive:function(nm){if(this.$5!==nm){this.$5=nm;this.incrementProps()}},get_showZoneChromeButtons:function(){return!tsConfig.is_mobile},get_chromeItems:function(){return this.$3},isResizable:null,handleDashboardModelChanged:null,activeZoneChanged:null,handleUpdateZoneChrome:function(nm){this.updateChromeItems();this.incrementProps()},hideZoneChrome:function(){this.forceHidden=true;this.incrementProps()},showZoneChrome:function(){this.forceHidden=false;this.incrementProps()},updateChromeItems:null,getGrabPoint:function(nm){var nn=nm.get_GestureInfo();var no=bg.dashboardGeometry();return{x:nn.startX-no.l,y:nn.startY-no.t}},chromeButtonChanged:function(nm,nn){if(nn.get_propertyName()==='isActive'){var no=this.get_chromeItems();for(var np=0;np<no.length;np++){var nq=no[np];if(nq.get_isActive()){var nr=(ss.isInstanceOfType(nq,tab.ToolbarDropdownButtonViewModel)?0:500);this.set_isZoneChromeActive(true);window.setTimeout(ss.mkdel(this,function(){this.set_isZoneChromeActive(false)}),nr);return}}this.set_isZoneChromeActive(false)}},addChromeItems:function(nm){var nn=tab.CommandsPresModelWrapper.create(nm.get_commands());if(ss.isNullOrUndefined(nn)||ss.isNullOrUndefined(nn.get_commandItems())){return}var no=nn.get_commandItems();for(var np=0;np<no.length;np++){var nq=no[np];var nr=tab.CommandItemWrapper.create(nq);switch(nr.get_commandsType()){case'item':{this.addChromeButton(nr.get_item());break}case'subcommands':{var ns=[];tab.WidgetUtil.newMenuItemsFromCommands(ns,nr.get_commands(),tab.WidgetUtil.createDropdownMenuCommandHandler,false);this.addChromeDropdownButtonWithSubMenu(nr,new spiff.Menu(ns));break}}}},addChromeButton:function(nm){var nn=tab.ToolbarButtonViewModel.createFromCommandItem(nm,'tabAuthZoneChrome-',null,null);nn.set_tooltipText(nn.get_text());nn.set_text(null);nn.add_propertyChanged(ss.mkdel(this,this.chromeButtonChanged));this.get_chromeItems().push(nn)},addChromeDropdownButtonWithSubMenu:function(nm,nn){var no=new tab.ToolbarDropdownButtonViewModel(nm.get_name(),'tabAuthZoneChrome-'+nm.get_name(),function(nq){return nn});no.set_tooltipText(tab.Strings.ChromeDropdownButtonTooltip);no.set_text(null);var np=no;np.add_propertyChanged(ss.mkdel(this,this.chromeButtonChanged));this.get_chromeItems().push(np)},disposeChromeItems:function(){for(var nm=0;nm<this.$3.length;nm++){var nn=this.$3[nm];nn.remove_propertyChanged(ss.mkdel(this,this.chromeButtonChanged))}tab.MiscUtil.dispose(this.$3)},updateZoneChromeOnScroll:function(){this.incrementProps()}},null,function(){return ss.makeGenericType(spiff.BaseReactViewModel$1,[nk])},function(){return[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[nk])]});return nl});ss.initGenericClass(ch,1);var ci=global.tab.CalcTextDragAvatar=ss.mkType(a,'tab.CalcTextDragAvatar',function(nk){this.$4=null;spiff.Widget.call(this,$("\n<span class='tabCalcEditorTextDragAvatar'>\n    <div class='tabCalcEditorTextDragAvatarLabel'></div>\n</span>"));this.set_label(nk)},{get_viewModel:function(){return null},get_rootElement:function(){return this.element},get_label:function(){return this.$4},set_label:function(nk){this.$4=nk;this.element.find('.tabCalcEditorTextDragAvatarLabel').text(this.$4)}});var cj=global.tab.CalcTextDragInstance=ss.mkType(a,'tab.CalcTextDragInstance',function(nk){this.$1=null;this.$3=null;this.$2=null;cf.call(this,nk,new ci(nk));this.$1=this.get_dragAvatar();this.$3=nk},{get_fields:function(){if(this.get_drop().state()==='resolved'){return ss.safeCast(this.draggedObject,Array)}return null},get_fieldNames:function(){return this.$2},get_pills:function(){return null},get_pill:function(){return null},get_text:function(){return this.$3},get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},hasOnlyFields:function(){return true},hasOnlyPills:function(){return false},resolve:function(nk){if(this.finalDrop.state()==='resolved'||ss.isNullOrUndefined(nk)){return}this.drag=nk;if(tab.MiscUtil.isNullOrEmpty(this.drag.shelfDropModels)||tab.MiscUtil.isNullOrEmpty(this.drag.shelfDropModels[0].fieldEncodings)){return}var nl=this.drag.shelfDropModels[0].fieldEncodings[0].fn;this.$2=[nl];var nm=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var nn=nm.findField(nl);if(ss.isValue(nn)){this.draggedObject=[nn];this.$1.set_label(nn.get_description())}this.finalDrop.resolve(this)},reject:function(nk){if(this.finalDrop.state()==='resolved'||!ss.isNullOrUndefined(nk)){return}if(ss.isNullOrUndefined(this.drag)){this.drag=nk}this.finalDrop.reject(this)}});var ck=global.tab.CalculationAutoCompleteHelper=ss.mkType(a,'tab.CalculationAutoCompleteHelper',function(nk,nl){this.$s=null;this.$o=null;this.$u=null;this.$q=new tab.DisposableHolder;this.$w=new tab.DisposableHolder;this.$m=null;this.$p=null;this.$l=null;this.$v=false;this.$r=false;this.$k=false;this.$n=null;this.$t=-1;this.$x=null;this.$s=nk;this.$o=nl;this.$n=new tab.Debouncer(ss.mkdel(this,this.$e),250);this.$m={};this.$m['hint']=ss.mkdel(this,this.getHints);this.$m['completeSingle']=false;this.$m['completeOnSingleClick']=true;this.$m['alignWithWord']=false;this.$m['closeOnUnfocus']=true;var nm=(BrowserSupport.BrowserSupport.IsMac()?'Cmd-Enter':'Ctrl-Enter');var nn={};nn[nm]=function(no,np){np.pick()};this.$m['extraKeys']=nn;this.$u=new tab.Tooltip(new u);this.$u.set_horizontalOffset(0);this.$u.set_showAbove(false);this.$9('change',ss.mkdel(this,this.$8));this.$9('cursorActivity',ss.mkdel(this,this.$6));this.$9('blur',ss.mkdel(this,this.$7));this.$9('focus',ss.mkdel(this,this.$a));EventUtils.GlobalUIEvents.add_FirstTouch(ss.mkdel(this,this.$4));this.$o.add_calculationUpdated(ss.mkdel(this,this.$5))},{get_isShowingMenu:function(){return this.$v},set_isShowingMenu:function(nk){this.$v=nk},$j:function(){if(ss.isValue(this.$u)){return this.$u.element[0]}return null},$i:function(){var nk=$('.CodeMirror-hints');if(ss.isValue(nk)&&nk.length>0){return nk[0]}return null},get_validFormulaTooltip:function(){return this.$x},set_validFormulaTooltip:function(nk){this.$x=nk},dispose:function(){this.$r=true;this.$q.dispose();this.$n.dispose();this.$p=null;this.$0();this.$u.dispose();EventUtils.GlobalUIEvents.remove_FirstTouch(ss.mkdel(this,this.$4));this.$w.dispose();this.$o.remove_calculationUpdated(ss.mkdel(this,this.$5))},$9:function(nk,nl){this.$s.on(nk,nl);this.$q.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$s.off(nk,nl)})))},close:function(nk){if(nk){this.$1()}this.$l=null},$1:function(){this.$u.close();this.$t=-1},$0:function(){var nk=this.$3();if(ss.isValue(nk)){nk.close()}},$5:function(){this.$g(this.get_isShowingMenu())},$g:function(nk){var nl=this.$s.getValue();var nm=this.$s.indexFromPos(this.$s.getCursor());if(ss.isValue(this.$l)&&nk&&nm>=this.$l.get_startIndex()&&nm<=this.$l.get_endIndex()&&ss.referenceEquals(this.$l.get_calculation(),nl)){this.$1();this.$s.showHint(this.$m)}else if(ss.isValue(this.$l)&&!tab.MiscUtil.isNullOrEmpty$1(this.$l.get_functionTooltip())){this.$f(this.$l.get_functionTooltip(),this.$l.get_functionHelpPosition())}else if(!ss.isNullOrEmptyString(this.$x)&&this.$o.isValidFormula()&&this.$o.get_isDirty()){this.$f(this.$x,nm)}else{this.$1()}},$f:function(nk,nl){if(ss.isNullOrEmptyString(nk)){this.$1()}else{var nm=0;if(nl>=0&&ss.isValue(this.$l)){nm=cr.getNewLineOffset(this.$l.get_calculation().toString().substr(0,nl),null)}this.$t=nl;var nn=this.$s.posFromIndex(nm+this.$t);var no=this.$s.cursorCoords(nn,'page');var np=this.$s.cursorCoords(this.$s.getCursor(),'page');var nq=this.$s.cursorCoords(this.$s.posFromIndex(0),'page').left+this.$s.getScrollInfo().left;var nr=Math.max(nq,no.left);var ns=np.top;this.$u.show(nk,{x:nr,y:ns})}},$8:function(nk,nl){switch(nl.origin){case'+input':case'+delete':case'paste':case'*compose':{this.$d(true);break}case'complete':{this.$d(false);break}default:{break}}},$h:function(){this.close(false);this.$d(false)},$a:function(){this.$h()},$7:function(){this.$p=null;this.$1()},$6:function(){this.$h()},$4:function(nk,nl){this.close(false)},$3:function(){var nk=this.$s.state.completionActive;return nk},$2:function(nk,nl,nm,nn,no){var np=new Object;np.from=nl;np.to=nm;np.text=nk.get_replaceText();np.displayText=(ss.isNullOrEmptyString(nk.get_styledLabel())?nk.get_label():nk.get_styledLabel());np.caretIndex=nk.get_caretIndex();np.hint=ss.mkdel(this,this.$b);var nq;switch(nk.get_itemType()){case'field':{nq=new s(np.displayText,nk.get_iconResource());break}case'func':{nq=new t(np.displayText);break}default:{return null}}nq.$2(nn);nq.$1(no);nq.$4(nk.get_tooltip());np.render=ss.mkdel(this,function(nr,ns,nt){nq.$3(nr);if(tsConfig.is_mobile){var nu=spiff.TableauClickHandler.target(nr).onClick(ss.mkdel(this,function(nv){nv.preventDefault();var nw=this.$3();if(ss.isValue(nw)&&nw.active()&&ss.isValue(nw.widget)){var nx=ss.coalesce(nr['hintId'],0);nw.widget.changeActive(nx,true);nw.widget.pick()}}));this.$w.add$1(nu)}});return np},$c:function(nk,nl){},$b:function(nk,nl,nm){nk.replaceRange(nm.text,nm.from,nm.to,'complete');nk.setCursor(nk.posFromIndex(nm.caretIndex))},getHints:function(nk,nl){if(ss.isNullOrUndefined(this.$p)||ss.isNullOrUndefined(this.$l)||this.$l.get_items().length<1){return null}var nm=new Object;nm.from=nk.posFromIndex(this.$l.get_startIndex());nm.to=nk.posFromIndex(this.$l.get_endIndex());CodeMirror.on(nm,'select',ss.mkdel(this,this.$c));CodeMirror.on(nm,'shown',ss.mkdel(this,function(){this.set_isShowingMenu(true)}));CodeMirror.on(nm,'close',ss.mkdel(this,function(){this.set_isShowingMenu(false);this.$w.dispose()}));var nn=[];var no=false;var np=null;var nq=this.$l.get_items();for(var nr=0;nr<nq.length;nr++){var ns=nq[nr];switch(ns.get_itemType()){case'separator':{no=true;break}case'header':{np=ns.get_label();break}default:{nn.push(this.$2(ns,nm.from,nm.to,no,np));no=false;np=null;break}}}nm.list=Array.prototype.slice.call(nn);return nm},$d:function(nk){this.$k=this.$k||nk;this.$n.invokeActionDelayed()},$e:function(){var nk=new q(this.$s);var nl=this.$k;this.$k=false;if(!nk.$0()){this.$p=null;return}if(ss.isValue(this.$p)&&nk.$2===this.$p.$2&&ss.referenceEquals(nk.$1,this.$p.$1)){return}this.$p=nk;this.$o.requestAutoCompleteMenu(this.$p.$1,nk.$2).done(ss.mkdel(this,function(nm){if(!this.$r&&ss.isValue(this.$p)&&ss.referenceEquals(this.$p.$1,nm.get_calculation())){this.$l=nm;this.$g(nl)}})).fail(ss.mkdel(this,function(nm){}))},isEqualOrAncestorOf:function(nk){return tab.DomUtil.isEqualOrAncestorOf(this.$i(),nk)||tab.DomUtil.isEqualOrAncestorOf(this.$j(),nk)}});var cl=global.tab.CalculationDependencyView=ss.mkType(a,'tab.CalculationDependencyView',function(nk){ss.makeGenericType(spiff.BaseView$1,[cm]).call(this,nk,spiff.Template.fromHtml("<div class='tabCalcDependencyContent'>\n            <div class='tabCalcDependencyPrefix'></div>\n            <div class='tabCalcDependencyInfo'></div>\n        </div>"));this.get_template().getElementBySelector('.tabCalcDependencyPrefix').text(tab.Strings.CalcEditorDependenciesPrefix);this.get_template().getElementBySelector('.tabCalcDependencyInfo').text(nk.get_dependencies())},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.element.parents('.tabUberPopup').css('max-width',this.get_viewModel().get_maxWidth()+'px').addClass('tabCalcEditorDependsPopup')}});var cm=global.tab.CalculationDependencyViewModel=ss.mkType(a,'tab.CalculationDependencyViewModel',function(nk,nl){this.$0=null;this.$1=0;spiff.BaseViewModel.call(this);this.$0=nk;this.$1=nl},{get_viewType:function(){return cl},get_viewModel:function(){return this},get_dependencies:function(){return this.$0},get_maxWidth:function(){return this.$1},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){}});var cn=global.tab.CalculationDialogTemplate=ss.mkType(a,'tab.CalculationDialogTemplate',function(){this.$6=null;this.$5=null;this.$1=null;this.$9=null;this.$7=null;this.$8=null;this.$3=null;this.$4=null;this.$2=null;cq.call(this,$("<div class='tabCalcEditor'><div class='tabCalcEditorBody'><div class='tabCalcEditorCmHolder tabCalcEditorDropTarget'></div></div><div class='tabCalcEditorControlArea'><div class='tabCalcEditorStatusOk'><span class='tabCalcEditorStatusOkText'></span></div><div class='tabCalcEditorStatusErrorBtn'><span class='tabCalcEditorStatusErrorText'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div><div class='tabCalcEditorDependsBtn'><span class='tabCalcEditorDependsBtnLabel'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div><div class='tabCalcEditorBtnArea'></div></div></div>"));this.$2=this.getElementBySelector('.tabCalcEditorBody');this.$6=this.getElementBySelector('.tabCalcEditorCmHolder');this.$5=this.getElementBySelector('.tabCalcEditorDropTarget');this.$1=this.getElementBySelector('.tabCalcEditorBtnArea');this.$7=this.getElementBySelector('.tabCalcEditorStatusErrorBtn');this.$8=this.getElementBySelector('.tabCalcEditorStatusErrorText');this.$9=this.getElementBySelector('.tabCalcEditorStatusOk');this.$3=this.getElementBySelector('.tabCalcEditorDependsBtn');this.$4=this.getElementBySelector('.tabCalcEditorDependsBtnLabel')},{get_calcEditorBody:function(){return this.$2},get_formulaEditorHolder:function(){return this.$6},get_dragSource:function(){return this.$6},get_dropTarget:function(){return this.$5},get_dropInviteBorder:function(){return this.$6},get_buttonArea:function(){return this.$1},get_statusErrorButton:function(){return this.$7},get_statusOk:function(){return this.$9},get_statusErrorText:function(){return this.$8},get_dependenciesButton:function(){return this.$3},get_dependenciesButtonLabel:function(){return this.$4}});var co=global.tab.CalculationDialogView=ss.mkType(a,'tab.CalculationDialogView',function(nk){this.$L=null;this.$J=null;this.$H=null;this.$I=null;this.$G=null;this.$E=null;this.$K=null;this.$F=null;this.$4$1=null;this.$4$2=null;cr.call(this,nk,new cn);this.calcViewModel.add_dirtyStateChanged(ss.mkdel(this,this.$n));var nl=new ko(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nl);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_dirtyStateChanged(ss.mkdel(this,this.$n));KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nl)})))},{get_editableCaption:function(){return this.$4$1},set_editableCaption:function(nk){this.$4$1=nk},get_calcCaptionLabel:function(){return this.$4$2},set_calcCaptionLabel:function(nk){this.$4$2=nk},get_dialog:function(){return this.$H},$D:function(){return this.get_template()},initDom:function(){this.$E=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.applyCalc),tab.Strings.CalcEditorApply,'tabCalcEditorApplyButton',2,1);this.$D().get_buttonArea().append(this.$E.element);this.disposables.add$1(this.$E);this.$x();this.$E.set_hoverTooltipText((BrowserSupport.BrowserSupport.IsMac()?tab.Strings.CalcEditorApplyTooltipMac:tab.Strings.CalcEditorApplyTooltip));this.$K=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.applyCalcAndClose),tab.Strings.DialogButtonOK,'tabCalcEditorOkButton',0,2);this.$D().get_buttonArea().append(this.$K.element);this.disposables.add$1(this.$K);this.$K.set_hoverTooltipText(tab.Strings.CalcEditorOkButtonTooltip);this.$D().get_statusErrorText().text(tab.Strings.CalcEditorCalcError);this.$D().get_statusOk().text(tab.Strings.CalcEditorCalcOk);this.$I=new spiff.Button(this.$D().get_statusErrorButton());this.$I.add_click(ss.mkdel(this,this.$i));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$I.remove_click(ss.mkdel(this,this.$i));this.$I.dispose()})));this.$G=new spiff.Button(this.$D().get_dependenciesButton());this.$G.add_click(ss.mkdel(this,this.$h));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$G.remove_click(ss.mkdel(this,this.$h));this.$G.dispose()})));this.calcViewModel.add_applyErrorMessageCompleted(ss.mkdel(this,this.$m));this.calcViewModel.add_applyCalculationSuccess(ss.mkdel(this,this.$l));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_applyErrorMessageCompleted(ss.mkdel(this,this.$m));this.calcViewModel.remove_applyCalculationSuccess(ss.mkdel(this,this.$l))})));this.$k();cr.prototype.initDom.call(this)},onCalculationCanceled:function(){cr.prototype.onCalculationCanceled.call(this);this.$H.close(null)},$n:function(nk){this.$x()},$l:function(nk){if(nk){this.$H.close(null)}},applyCalc:function(){this.calcViewModel.applyCalculation(null,false)},applyCalcAndClose:function(){this.calcViewModel.applyCalculation(null,true)},updateDomFromModel:function(){this.get_editableCaption().set_text(this.calcViewModel.get_caption());this.$C();this.$B();cr.prototype.updateDomFromModel.call(this);this.$y();this.$v()},$u:function(nk,nl){if(nl.get_propertyName()==='selected'){var nm=nk.get_selected();this.$F.element.stop(true,true);var nn=ss.mkdel(this,function(){this.$F.element.css((nm?{display:''}:{'z-index':''}))});var no=ss.mkdel(this,function(){this.$F.element.css((nm?{'z-index':this.element.find('.CodeMirror-vscrollbar').css('z-index')}:{display:'none'}));if(nm){this.$F.handleResize()}});var np=(nm?((this.$F.element.outerWidth()+1)*-1):0);this.$F.element.animate({right:np+'px'},ss.mkdict(['duration',300,'start',nn,'always',no]))}},$k:function(){if(ss.isValue(this.$F)){return}this.$F=tab.ObjectRegistry.newView(cv).call(null,[this.calcViewModel.get_functionListViewModel()]);this.$F.element.css({display:'none'});this.$F.add_doubleClickedItem(ss.mkdel(this,this.$q));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$F.remove_doubleClickedItem(ss.mkdel(this,this.$q));this.$F.dispose();this.$F=null})))},createDialog:function(){this.$H=new spiff.Dialog('',this.element);this.$H.disableTextSelection();this.$H.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$H.get_dialogElement().addClass('tabCalcEditDialog');if(this.calcViewModel.get_isForRelationshipCalc()){this.$H.get_dialogElement().css('position','absolute');this.$H.get_dialogElement().css('z-index',988+2)}this.$H.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$H.set_resizeable(true);this.$H.add_closed(ss.mkdel(this,this.$o));this.$H.add_resizeEnd(ss.mkdel(this,this.$p));this.$H.set_stayInWindow(true);this.set_editableCaption(spiff.EditableTextView.newEditableTextView(this.calcViewModel.get_caption(),'',false));this.get_editableCaption().stopPropogationOfInputEvents();this.get_editableCaption().add_committed(ss.mkdel(this,this.$s));this.get_editableCaption().add_propertyChanged(ss.mkdel(this,this.$r));this.get_editableCaption().add_hoverStateChanged(ss.mkdel(this,this.$A));var nk=ss.mkdel(this,function(){this.$A(this.get_editableCaption().element.hasClass('hover'))});this.get_editableCaption().add_editing(nk);this.get_editableCaption().add_committed(nk);this.set_calcCaptionLabel(spiff.LabelButton.newTextButton(null,tab.Strings.DataTabJoinOnCalculationCaption));this.get_calcCaptionLabel().get_labelElement().addClass('tabCalcEditorJoinCalcLabel');this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$H.remove_closed(ss.mkdel(this,this.$o));this.$H.remove_resizeEnd(ss.mkdel(this,this.$p));this.$H.dispose();this.get_editableCaption().remove_committed(ss.mkdel(this,this.$s));this.get_editableCaption().remove_propertyChanged(ss.mkdel(this,this.$r));this.get_editableCaption().remove_hoverStateChanged(ss.mkdel(this,this.$A));this.get_editableCaption().remove_editing(nk);this.get_editableCaption().remove_committed(nk);this.get_editableCaption().dispose();this.get_calcCaptionLabel().dispose()})));this.$L=new cx;this.$H.get_titleBarElement().find('.tab-dialogTitle').append(this.$L.domRoot);this.disposables.add$1(this.$L);if(ss.isNullOrUndefined(this.$F)){return}this.$H.element.prepend($("<div class='tabCalcEditorFunctionFlyoutCover'></div>"));this.$H.element.prepend(this.$F.element);this.$F.onAddedToDom();var nl=new gz;this.$J=new spiff.ToggleButton(nl.domRoot,'flyoutShown');this.$J.add_propertyChanged(ss.mkdel(this,this.$u));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$J.remove_propertyChanged(ss.mkdel(this,this.$u))})));this.$J.addToDom(this.$H.element);this.disposables.add$1(this.$J);this.disposables.add$1(nl);this.$J.set_selected(false)},$A:function(nk){this.$L.get_dataSourceLabel().css('display',((this.get_editableCaption().get_isEditing()||nk)?'none':'inline-block'))},$v:function(){var nk=(this.$t()?tab.DoubleUtil.roundToInt(this.get_calcCaptionLabel().get_labelElement().width()):this.get_editableCaption().get_textDisplayWidth());this.$w(nk)},$y:function(){this.get_calcCaptionLabel().set_label((this.calcViewModel.get_isForRelationshipCalc()?tab.Strings.DataTabRelationshipCalculationCaption:tab.Strings.DataTabJoinOnCalculationCaption))},$t:function(){return this.calcViewModel.get_isForJoin()||this.calcViewModel.get_isForRelationshipCalc()},$w:function(nk){var nl=this.calcViewModel.get_shouldShowDataSourceCaption();if(nl){this.$L.get_dataSourceLabelText().text(this.calcViewModel.get_dataSourceCaption());this.$L.get_dataSourceIcon().removeClass().addClass('icon '+this.calcViewModel.get_dataSourceIconName())}this.$L.get_dataSourceIcon().toggle(nl);this.$L.get_dataSourceLabel().css('left',nk+'px')},onCalculationEdited:function(){if(ss.isNullOrUndefined(this.$H)){this.createDialog()}var nk=!this.get_dialog().get_isShown();if(nk){this.get_dialog().show();this.onAddedToDom();this.get_calcCaptionLabel().addToDom(this.$L.get_captionContainer());this.get_editableCaption().addToDom(this.$L.get_captionContainer())}this.$z();cr.prototype.onCalculationEdited.call(this);this.$v();this.$x();if(nk){if(this.calcViewModel.get_isNewCalculation()&&!this.$t()){this.get_editableCaption().edit()}else{this.focusEditor()}}else{this.$H.moveToTop();if(this.get_editableCaption().get_isEditing()){tab.DomUtil.selectAllInputText(this.get_editableCaption().get_inputElement())}else{this.get_editor().execCommand('goDocEnd')}}},$z:function(){if(this.$t()){this.get_calcCaptionLabel().element.show();this.get_editableCaption().get_textElement().hide()}else{this.get_calcCaptionLabel().element.hide();this.get_editableCaption().get_textElement().show()}},$C:function(){this.$D().get_statusOk().toggle(!this.calcViewModel.get_hasErrors());this.$D().get_statusErrorButton().toggle(this.calcViewModel.get_hasErrors())},$B:function(){this.$D().get_dependenciesButtonLabel().text(this.calcViewModel.get_dependenciesBtnLabel());this.$D().get_dependenciesButton().css('visibility',(this.calcViewModel.get_hasDependencies()?'':'hidden'))},$i:function(){var nk=_.map(this.calcViewModel.get_errors(),function(nl){return spiff.MenuItem.newItem(nl,nl.errorMessage,'ErrorButtonOnClick',null,null)});spiff.MenuViewModel.createForMenu(new spiff.Menu(nk),ss.mkdel(this,this.$j),null,null).show(new spiff.ShowMenuOptions(this.$D().get_statusErrorText(),false))},$j:function(nk){var nl=nk.data;var nm=cr.getNewLineOffset(this.calcViewModel.get_formula().substr(0,nl.startPositionForError),null);var nn=this.get_editor().posFromIndex(nl.startPositionForError-nm);var no=this.get_editor().posFromIndex(nl.startPositionForError+nl.lengthOfCalcOfError-nm);this.get_editor().setCursor(nn);this.focusEditor();this.get_editor().setSelection(nn,no)},$h:function(){this.$G.element.addClass('tabOpen');var nk=spiff.UberPopupViewModel.createForContent$1(new cm(this.calcViewModel.get_dependencies(),tab.DoubleUtil.roundToInt(this.element.outerWidth())),this.$D().get_dependenciesButton(),null,true);nk.options=new spiff.UberPopupShowOptions.$ctor1(0,0,0,false,false,true,null,null,false,0,null,987,true);nk.show();nk.add_hidden(ss.mkdel(this,function(){this.$G.element.removeClass('tabOpen')}))},$s:function(){if(ss.isNullOrEmptyString(this.get_editableCaption().get_text())){this.get_editableCaption().set_text(this.calcViewModel.get_caption())}else{this.calcViewModel.set_caption(this.get_editableCaption().get_text())}this.$v()},$r:function(nk,nl){if(nl.get_propertyName()==='text'){if(ss.isNullOrUndefined(this.$E)||ss.isNullOrUndefined(this.get_editableCaption())){return}this.$E.set_disabled(!(this.calcViewModel.isCaptionStringDirty(this.get_editableCaption().get_text())||this.calcViewModel.get_isFormulaDirty()))}},$x:function(){if(ss.isNullOrUndefined(this.$E)){return}this.$E.set_disabled(!this.calcViewModel.get_isDirty())},$o:function(nk,nl){this.calcViewModel.cancelCalculation()},$p:function(){this.get_editor().refresh();this.$F.handleResize()},$m:function(){this.focusEditor()},$q:function(nk){var nl=this.get_editor().indexFromPos(this.get_editor().getCursor());var nm=cr.getSelection(this.get_editor());if(ss.isNullOrUndefined(nm)){nm={calcEditorTextSelectionStartPos:nl,calcEditorTextSelectionEndPos:nl}}this.calcViewModel.insertFunction(nk,nm)},acceptDrop:function(nk){this.get_dialog().moveToTop();return cr.prototype.acceptDrop.call(this,nk)}});var cp=global.tab.CalculationEditorDragFeedback=ss.mkType(a,'tab.CalculationEditorDragFeedback',function(nk){this.$9=null;this.$8=null;this.$a=null;this.$f='tabTok_replace';this.$d='tabTok_noreplace';this.$e=0;this.$b=new Object;this.$c=null;this.$g=null;this.$a=nk;this.$9=$("<div class='tabEditorDropTargetPointer'></div>");this.$8=$("<div class='tabEditorDropTargetHighlighter'></div>")},{get_replaceableMarkerName:function(){return this.$f},set_replaceableMarkerName:function(nk){this.$f=nk},get_nonReplaceableMarkerName:function(){return this.$d},set_nonReplaceableMarkerName:function(nk){this.$d=nk},get_pillDragCursorPadding:function(){return this.$e},set_pillDragCursorPadding:function(nk){this.$e=nk},get_cursorIndex:function(){return this.$a.indexFromPos(this.$b)},get_cursorPosition:function(){return this.$b},dragOver:function(nk){this.switchDragFeedback(nk,true);this.showDragOverFeedback()},dragExit:function(nk){this.switchDragFeedback(nk,false)},handleDropStateChanged:function(nk){if(nk===1){this.$a.execCommand('singleSelection');this.$g=$(this.$a.getWrapperElement()).find('.CodeMirror-selected');this.$c=$(this.$a.getWrapperElement()).find('.CodeMirror-lines')}else{this.switchDragFeedback(null,false);this.$g=null;this.$c=null}},switchDragFeedback:function(nk,nl){if(ss.isValue(nk)&&ss.isValue(nk.get_dragAvatar())){nk.get_dragAvatar().get_rootElement().toggleClass('tabPillBelowCursor',nl)}if(ss.isValue(this.$c)){this.$c.toggleClass('tabActiveDropTarget',nl)}if(!nl){this.$8.remove();this.$9.remove();this.$1(false)}},showDragOverFeedback:function(){this.$b=this.getDocumentPositionForEvent(EventUtils.DragDropManager.get_lastDragEvent(),this.$a.getCursor());var nk=this.$a.indexFromPos(this.$b);if(this.$5(nk)){return}if(this.$6(this.$b,nk)){return}this.$7()},$5:function(nk){var nl=cr.getSelectionAtIndex(this.$a,nk);if(ss.isValue(nl)){this.$9.remove();this.$8.remove();this.$1(true);return true}this.$1(false);return false},$6:function(nk,nl){var nm=this.$0(this.$a.findMarksAt(nk));if(ss.isValue(nm)){var nn=nm.find();var no=this.$a.indexFromPos(nn.from);var np=this.$a.indexFromPos(nn.to);if(nl>no&&nl<np){if(this.$4(nm)){this.$2(nn);return true}if(this.$3(nm)){this.$b=((nl>no+ss.idiv(np-no,2))?nn.to:nn.from);this.$7();return true}}}return false},$1:function(nk){if(ss.isValue(this.$g)){this.$g.toggleClass('tabActiveDropTarget',nk)}},$2:function(nk){var nl=new Object;if(nk.to.line>nk.from.line){var nm=this.$a.getLine(nk.from.line);var nn=nm.length-nk.from.ch;nl.ch=nk.from.ch+nn;nl.line=nk.from.line}else{nl=nk.to}var no=this.$a.charCoords(nk.from,'local');var np=this.$a.charCoords(nl,'local');this.$8.width(np.left-no.left);this.$9.remove();this.$a.addWidget(nk.from,this.$8[0],false,'over',null)},$7:function(){this.$8.remove();this.$a.addWidget(this.$b,this.$9[0],false,'over',null)},$0:function(nk){if(ss.isNullOrUndefined(nk)){return null}for(var nl=0,nm=nk.length;nl<nm;nl++){var nn=nk[nl];if(this.$4(nn)||this.$3(nn)){return nn}}return null},$4:function(nk){return nk.className.indexOf(this.get_replaceableMarkerName())!==-1},$3:function(nk){return nk.className.indexOf(this.get_nonReplaceableMarkerName())!==-1},getDocumentPositionForEvent:function(nk,nl){var nm=new Object;nm.left=nk.pageX;nm.top=nk.pageY-this.$e;if(ss.isValue(nl)&&nm.top>this.$a.heightAtLine(this.$a.lineCount(),'page')){return nl}return this.$a.coordsChar(nm)}});var cq=global.tab.CalculationEditorTemplate=ss.mkType(a,'tab.CalculationEditorTemplate',function(nk){spiff.Template.call(this,nk)},{get_formulaEditorHolder:null,get_dragSource:null,get_dropTarget:null,get_dropInviteBorder:null});var cr=global.tab.CalculationEditorView=ss.mkType(a,'tab.CalculationEditorView',function(nk,nl){this.calcViewModel=null;this.$c=null;this.$d=null;this.$g=null;this.$f='\r\n';this.$b=null;this.$e=[];ss.makeGenericType(spiff.BaseView$1,[cs]).call(this,nk,nl);this.$c=this.get_template();this.calcViewModel=nk;this.calcViewModel.add_calculationUpdated(ss.mkdel(this,this.updateDomFromModel));this.calcViewModel.add_calculationEdited(ss.mkdel(this,this.onCalculationEdited));this.calcViewModel.add_dropStateChanged(ss.mkdel(this,this.handleDropStateChanged));this.calcViewModel.add_calculationCanceled(ss.mkdel(this,this.onCalculationCanceled));this.calcViewModel.add_dropCommandCompleted(ss.mkdel(this,this.$9));this.calcViewModel.add_insertFunctionCompleted(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.calcViewModel.remove_calculationUpdated(ss.mkdel(this,this.updateDomFromModel));this.calcViewModel.remove_calculationEdited(ss.mkdel(this,this.onCalculationEdited));this.calcViewModel.remove_dropStateChanged(ss.mkdel(this,this.handleDropStateChanged));this.calcViewModel.remove_calculationCanceled(ss.mkdel(this,this.onCalculationCanceled));this.calcViewModel.remove_dropCommandCompleted(ss.mkdel(this,this.$9));this.calcViewModel.remove_insertFunctionCompleted(ss.mkdel(this,this.$a))})));EventUtils.DragDropManager.attachDropTarget(this.$c.get_dropTarget(),this);if(!tsConfig.is_mobile){EventUtils.DragDropManager.attachDragSource(this.$c.get_dragSource(),this)}},{get_hasEditor:function(){return ss.isValue(this.$d)},get_editor:function(){return this.$d},get_dom:function(){return this.$c},get_pillViewModel:function(){return null},set_pillViewModel:function(nk){},get_feedbackType:function(){return'dropfeedbackmousemove'},get_pillDragFeedback:function(){return this.$g},get_autoCompleteHelper:function(){return this.$b},createCodeMirrorOptions:function(){var nk=new Object;nk.indentUnit=2;nk.indentWithTabs=false;nk.lineNumbers=false;nk.lineWrapping=false;nk.smartIndent=false;nk.dragDrop=true;nk.extraKeys={};var nl=nk;nl.extraKeys[(BrowserSupport.BrowserSupport.IsMac()?'Cmd-Enter':'Ctrl-Enter')]=ss.mkdel(this,this.$7);this.addExtraKeys(nl.extraKeys);return nl},addExtraKeys:function(nk){},initDom:function(){if(ss.isValue(this.$d)){return}this.$d=CodeMirror(this.get_dom().get_formulaEditorHolder()[0],this.createCodeMirrorOptions());this.$d.on('change',ss.mkdel(this,this.$8));if(!tsConfig.is_mobile){this.$d.on('dragstart',ss.mkdel(this,this.onDragStart))}this.$g=new cp(this.$d);this.$b=new ck(this.$d,this.calcViewModel);this.disposables.add$1(this.$b);if(this.calcViewModel.get_hasCalculation()){this.onCalculationEdited()}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(tsConfig.is_mobile&&BrowserSupport.BrowserSupport.IsAndroid()){this.get_dom().domRoot.find('.CodeMirror-code').attr('autocomplete','off')}if(this.get_hasEditor()){this.$d.refresh()}},focusEditor:function(){if(this.$d.hasFocus()){return}this.$d.focus()},$7:function(){this.calcViewModel.applyCalculation(this.get_pillViewModel(),false)},onDragStart:function(nk,nl){nl.preventDefault()},updateDomFromModel:function(){this.$f=cr.$0(this.calcViewModel.get_formula());var nk=!ss.referenceEquals(this.$d.getValue(this.$f),this.calcViewModel.get_formula());if(nk){var nl=this.$d.getCursor();this.$d.setValue(this.calcViewModel.get_formula());this.$d.setCursor(nl)}for(var nm=0;nm<this.$e.length;nm++){var nn=this.$e[nm];nn.clear()}this.$e=cr.markStyleAndErrorForTokens(this.$d,this.calcViewModel)},$9:function(nk){if(nk>=0){var nl=cr.getNewLineOffset(this.calcViewModel.get_formula().substr(0,nk),null);var nm=this.$d.posFromIndex(nk-nl);this.$d.setCursor(nm);this.focusEditor()}},$a:function(nk,nl){this.get_editor().setValue(nk);this.$9(nl)},onCalculationCanceled:function(){if(ss.isValue(this.get_autoCompleteHelper())){this.get_autoCompleteHelper().close(true)}},onCalculationEdited:function(){this.updateDomFromModel();this.$d.clearHistory();this.$d.execCommand('goDocEnd')},$8:function(nk,nl){this.calcViewModel.set_formula(nk.getValue(this.$f))},handleDropStateChanged:function(nk){this.get_dom().get_dropInviteBorder().toggleClass('tabDropInvited',nk===1);this.$g.handleDropStateChanged(nk)},dragOver:function(nk){if(!cs.canAccept(nk)){return null}this.$g.dragOver(nk);return this},dragExit:function(nk){this.$g.dragExit(nk)},acceptDrop:function(nk){this.$g.dragExit(nk);var nl=this.$g.get_cursorIndex()+cr.getNewLineOffset(this.calcViewModel.get_formula(),this.$g.get_cursorPosition());return this.calcViewModel.handleDrop(nk,nl,cr.getSelectionAtIndex(this.$d,nl))},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy},startDrag:function(nk){var nl=cr.getTextSelectionUnderMouse(this.$d,nk);if(ss.isNullOrUndefined(nl)){return null}var nm=this.$d.posFromIndex(nl.calcEditorTextSelectionStartPos);var nn=this.$d.posFromIndex(nl.calcEditorTextSelectionEndPos);return this.calcViewModel.getDragInstanceForText(this.$d.getRange(nm,nn))},acceptsDragType:function(){return 1},isEqualOrAncestorOf:function(nk){if(tab.DomUtil.isEqualOrAncestorOf(this.element[0],nk)){return true}if(ss.isValue(this.get_autoCompleteHelper())){return this.get_autoCompleteHelper().isEqualOrAncestorOf(nk)}return false}},{markStyleAndErrorForTokens:function(nk,nl){var nm=nl.get_formula();var nn=new Object;var no=[];var np=nl.get_errors();for(var nq=0;nq<np.length;nq++){var nr=np[nq];var ns=cr.getNewLineOffset(nm.substr(0,nr.startPositionForError),null);var nt=cr.getNewLineOffset(nm.substr(nr.startPositionForError,nr.lengthOfCalcOfError),null);var nu=nk.posFromIndex(nr.startPositionForError-ns);var nv=nk.posFromIndex(nr.startPositionForError+nr.lengthOfCalcOfError-ns-nt);var nw=new Object;nw.className='tabTok_error';nw.title=nr.errorMessage;var nx=nw;no.push(nk.markText(nu,nv,nx))}var ny=nl.get_tokens();for(var nz=0;nz<ny.length;nz++){var nA=ny[nz];var nB=cr.getNewLineOffset(nm.substr(0,nA.tokenPositionForStyle),null);var nC=cr.getNewLineOffset(nm.substr(nA.tokenPositionForStyle,nA.tokenLengthForStyle),null);var nD=nk.posFromIndex(nA.tokenPositionForStyle-nB);var nE=nk.posFromIndex(nA.tokenPositionForStyle+nA.tokenLengthForStyle-nB-nC);var nF=nk.getRange(nD,nE);var nG=nF.length-ss.trimStartString(nF).length;if(nG===nF.length){continue}var nH=cr.$3(nA.tokenPositionForStyle+nG,nA.tokenLengthForStyle-nG,nl.get_errors());if(nH&&nA.calculationStyle==='style_default'){continue}if(nG>0){nD=nk.posFromIndex(nA.tokenPositionForStyle+nG-nB)}var nI=[];if(!nH&&nA.calculationStyle!=='style_default'){nI.push('tabTok_'+nA.calculationStyle)}var nJ=cr.$1(nA,nF);if(ss.isValue(nJ)){nI.push(nJ)}nn.className=nI.join(' ');if(!ss.isNullOrEmptyString(nn.className)){no.push(nk.markText(nD,nE,nn))}}return no},$3:function(nk,nl,nm){var nn=ss.getEnumerator(nm);try{while(nn.moveNext()){var no=nn.current();if(nk>=no.startPositionForError&&nk+nl<=no.startPositionForError+no.lengthOfCalcOfError){return true}}}finally{nn.dispose()}return false},getNewLineOffset:function(nk,nl){var nm=0;var nn=0;var no=0;while((ss.isNullOrUndefined(nl)||nm<nl.line)&&(nn=nk.indexOf(String.fromCharCode(10),nn))>=0){if(nn>=1&&nk.charCodeAt(nn-1)===13){no++}nm++;nn++}return no},$0:function(nk){return((nk.indexOf('\r\n')>=0)?'\r\n':'\n')},$1:function(nk,nl){if(nl.length<=1){return null}switch(nk.calculationStyle){case'style_prim_field':case'style_sec_field':case'style_invalid_field':case'style_param':{return'tabTok_replace'}case'style_remote_func':case'style_local_func':case'style_comment':case'style_default':case'style_string':case'style_table_expr':{return'tabTok_noreplace'}}return null},getTextSelectionUnderMouse:function(nk,nl){var nm=new Object;nm.left=nl.pageX;nm.top=nl.pageY;var nn=nm;var no=nk.coordsChar(nn);var np=nk.indexFromPos(no);return cr.getSelectionAtIndex(nk,np)},getSelectionAtIndex:function(nk,nl){var nm=nk.listSelections();for(var nn=0,no=nm.length;nn<no;nn++){var np=cr.$2(nk,nm[nn]);if(ss.isValue(np)&&nl>np.calcEditorTextSelectionStartPos&&nl<np.calcEditorTextSelectionEndPos){return np}}return null},getSelection:function(nk){var nl=nk.listSelections();if(ss.isValue(nl)&&nl.length>0){return cr.$2(nk,nl[0])}return null},$2:function(nk,nl){if(ss.isNullOrUndefined(nl)||ss.isNullOrUndefined(nk)){return null}var nm=nk.indexFromPos(nl.anchor);var nn=nk.indexFromPos(nl.head);if(nm===nn){return null}var no={calcEditorTextSelectionStartPos:Math.min(nm,nn),calcEditorTextSelectionEndPos:Math.max(nm,nn)};return no}});var cs=global.tab.CalculationEditorViewModel=ss.mkType(a,'tab.CalculationEditorViewModel',function(nk){this.$y=['tab-schema-datasource-icon','tab-schema-extract-icon','tab-schema-cube-icon','tab-schema-server-icon'];this.$t=null;this.$p=null;this.$s=null;this.$q=null;this.$A=null;this.$z=0;this.$x=-1;this.$o=null;this.$B=null;this.$u=null;this.$w=0;this.$r=null;this.$v=false;this.$n=true;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=false;this.$2$11=null;this.$2$12=null;spiff.BaseViewModel.call(this);this.set_isAdhocVM(false);this.set_viewModelShelfType('none-shelf');this.$t=nk;if(ss.isValue(this.$t.get_calculationFunctionListModel())){this.set_functionListViewModel(new cw(this.$t.get_calculationFunctionListModel()))}this.$c().$e().$d();this.$t.add_calculationUpdated(ss.mkdel(this,this.$8));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$t.remove_calculationUpdated(ss.mkdel(this,this.$8));EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded))})));this.$z=0;if(this.$l()){this.$b()}},{add_calculationUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_calculationUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_calculationEdited:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_calculationEdited:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_calculationCanceled:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_calculationCanceled:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_dropStateChanged:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_dropStateChanged:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},add_dirtyStateChanged:function(nk){this.$2$5=ss.delegateCombine(this.$2$5,nk)},remove_dirtyStateChanged:function(nk){this.$2$5=ss.delegateRemove(this.$2$5,nk)},add_dropCommandCompleted:function(nk){this.$2$6=ss.delegateCombine(this.$2$6,nk)},remove_dropCommandCompleted:function(nk){this.$2$6=ss.delegateRemove(this.$2$6,nk)},add_insertFunctionCompleted:function(nk){this.$2$7=ss.delegateCombine(this.$2$7,nk)},remove_insertFunctionCompleted:function(nk){this.$2$7=ss.delegateRemove(this.$2$7,nk)},add_applyErrorMessageCompleted:function(nk){this.$2$8=ss.delegateCombine(this.$2$8,nk)},remove_applyErrorMessageCompleted:function(nk){this.$2$8=ss.delegateRemove(this.$2$8,nk)},add_applyCalculationSuccess:function(nk){this.$2$9=ss.delegateCombine(this.$2$9,nk)},remove_applyCalculationSuccess:function(nk){this.$2$9=ss.delegateRemove(this.$2$9,nk)},$l:function(){return ss.isValue(this.$t)&&this.$t.get_hasCalculation()},$m:function(){if(!this.$l()){return false}if(this.get_isAdhocVM()){return this.$t.get_isAdhoc()&&this.$t.get_adHocShelf()===this.get_viewModelShelfType()}return!this.$t.get_isAdhoc()},get_hasCalculation:function(){return this.$l()&&ss.isValue(this.$r)},get_isNewCalculation:function(){return this.$t.get_isNewCalculation()},get_isDirty:function(){return this.$v},set_isDirty:function(nk){if(this.$v!==nk){this.$v=nk;if(ss.isValue(this.$2$5)){this.$2$5(this.$v)}}},get_isCaptionDirty:function(){return ss.isValue(this.$r)&&this.$r.$0(this.get_caption())},get_isFormulaDirty:function(){return ss.isValue(this.$r)&&this.$r.$2(this.get_formula())},get_isAdhocVM:function(){return this.$2$10},set_isAdhocVM:function(nk){this.$2$10=nk},get_viewModelShelfType:function(){return this.$2$11},set_viewModelShelfType:function(nk){this.$2$11=nk},get_functionListViewModel:function(){return this.$2$12},set_functionListViewModel:function(nk){this.$2$12=nk},get_shelfType:function(){return this.$t.get_adHocShelf()},get_shelfPaneSpecId:function(){return this.$t.get_adHocPaneSpecId()},get_shelfPosition:function(){return this.$t.get_adHocShelfPosition()},get_tokens:function(){return this.$s},get_errors:function(){return this.$t.get_errors()},get_caption:function(){return this.$p},set_caption:function(nk){if(!ss.referenceEquals(this.$p,nk)){this.$p=nk;this.$k();this.$i()}},get_formula:function(){return this.$q},set_formula:function(nk){if(!ss.referenceEquals(this.$q,nk)){this.$q=nk;this.$k();this.$i()}},get_dataSourceCaption:function(){return this.$t.get_dataSourceCaption()},get_dataSourceIconName:function(){try{var nk=this.$u.findDataSourceByName(this.$t.get_dataSourceName());var nl=this.$u.get_dataSchemaPresModel().worksheetDataSchemaMap[tsConfig.current_sheet_name];var nm=gN.getDataSourceIcon(nl.datasourceIcons,nk);nm=ss.replaceAllString(ss.replaceAllString(nm,'-primary',''),'-secondary','');return(ss.contains(this.$y,nm)?nm:'tab-schema-datasource-icon')}catch(nn){}return'tab-schema-datasource-icon'},get_shouldShowDataSourceCaption:function(){if(ss.isNullOrUndefined(this.$u)){return false}else{return this.$u.getDataSourceCount(false)>1}},get_hasErrors:function(){return this.$t.get_errors().length>0},get_hasDependencies:function(){return!ss.isNullOrEmptyString(this.get_dependencies())},get_dependencies:function(){return this.$t.get_dependencies()},get_dependenciesBtnLabel:function(){return this.$t.get_dependenciesBtnLabel()},get_dropState:function(){return this.$w},set_dropState:function(nk){if(this.$w===nk){return}this.$w=nk;if(ss.isValue(this.$2$4)){this.$2$4(this.$w)}},get_isForJoin:function(){return this.$t.get_isForJoin()},get_isForRelationshipCalc:function(){return this.$t.get_isForRelationshipCalc()},dispose:function(){this.$1();if(ss.isValue(this.get_functionListViewModel())){this.get_functionListViewModel().dispose()}spiff.BaseViewModel.prototype.dispose.call(this)},isValidFormula:function(){return this.$5()&&this.$6()&&!ss.isNullOrEmptyString(this.get_formula())&&this.get_errors().length===0},isCaptionStringDirty:function(nk){return ss.isValue(this.$r)&&this.$r.$0(nk)},$i:function(){this.set_isDirty(ss.isValue(this.$r)&&this.$r.$1(this))},$f:function(){if(!this.$t.get_hasCalculation()){this.$r=null}else if(ss.isNullOrEmptyString(this.$t.get_fieldName())){this.$r=new c(this.$t.get_name(),this.$t.get_caption(),'')}else{this.$r=new c(this.$t.get_name(),this.$t.get_caption(),this.$t.get_formula())}},applyCalculation:function(nk,nl){if(!this.$l()){return}this.$1();if(this.$t.get_isAdhoc()&&tab.MiscUtil.isNullOrEmpty$1(this.$q)){if(ss.isValue(nk)){tab.ShelfClientCommands.removeShelfPill(nk.shelfVM.get_shelf(),nk.get_pill())}if(nl){this.cancelCalculation()}this.$2(nl);return}if(this.$t.get_isForJoin()&&!tab.MiscUtil.isNullOrEmpty$1(this.$q)&&ss.isValue(this.$t.get_joinOnCalcInfoPresModel())){if(!ss.referenceEquals(this.$q,this.$t.get_joinOnCalcInfoPresModel().joinExpression)){var nm={forJoin:true,forOmRelationshipCalc:this.$t.get_joinOnCalcInfoPresModel().forOmRelationshipCalc,joinExpression:this.$q,clauseToModifyIndex:this.$t.get_joinOnCalcInfoPresModel().clauseToModifyIndex,isLeft:this.$t.get_joinOnCalcInfoPresModel().isLeft,tableAlias:this.$t.get_joinOnCalcInfoPresModel().tableAlias};tab.ApplicationModel.get_instance().raiseNotification('doc:join-calc-update-event',nm,null)}if(nl){this.cancelCalculation()}this.$2(nl);return}this.set_isDirty(false);var nn=this.$r;this.$r=new c(nn.$3(),this.$p,this.$q);var no=tab.CalculationCommands.applyCalculation(this.$t,this.$p,this.$q,false,nl);no.done(ss.mkdel(this,function(np){if(np.get_resultType()==='succeed'){this.$f();this.$2(nl)}else{this.$r=nn;var nq=np.get_resultType()!=='invalid-caption-for-new-calc';this.showApplyCalcErrorDialog(np.get_errorMessage(),nq)}})).fail(ss.mkdel(this,function(np){this.cancelCalculation()})).always(ss.mkdel(this,function(){this.$i()}))},showApplyCalcErrorDialog:function(nk,nl){if(ss.isNullOrEmptyString(nk)){return}var nm=tab.ConfirmationViewModel.create(ss.htmlEncode(nk),ss.mkdel(this,function(nn){if(nn==='deny'){tab.CalculationCommands.applyCalculation(this.$t,this.$p,this.$q,true,false)}this.raiseActionEvent(this.$2$8)}));if(!nl){nm.set_showDenyButton(false);nm.set_confirmText(tab.Strings.DialogButtonOK);nm.set_titleText(tab.Strings.WarningTitle)}nm.show()},$2:function(nk){if(ss.isValue(this.$2$9)){this.$2$9(nk)}},cancelCalculation:function(){this.$1();tab.CalculationCommands.cancelCalculation(this.$t)},$1:function(){this.$A=tab.MiscUtil.clearTimeout(this.$A)},$8:function(){this.$j();if(!this.$l()){this.$0()}else if(this.$7()){this.$h()}else{this.$b()}},$j:function(){if(ss.isNullOrUndefined(this.get_functionListViewModel())&&ss.isValue(this.$t.get_calculationFunctionListModel())){this.set_functionListViewModel(new cw(this.$t.get_calculationFunctionListModel()))}},$0:function(){if(ss.isValue(this.$r)){this.$f();this.raiseActionEvent(this.$2$3)}this.$i()},$7:function(){return ss.isValue(this.$r)&&ss.referenceEquals(this.$r.$3(),this.$t.get_name())},$5:function(){return this.$z<=1&&ss.isNullOrUndefined(this.$A)},$h:function(){if(this.$5()){if(this.$6()){return}this.$g();this.raiseActionEvent(this.$2$1)}},$b:function(){try{this.$n=false;this.$f();this.$g();this.raiseActionEvent(this.$2$2)}finally{this.$n=true}},$6:function(){return this.$x===this.$t.get_modelVersion()},$g:function(){this.$x=this.$t.get_modelVersion();this.$p=this.$t.get_caption();this.$s=this.$t.get_tokens();this.$q=this.$t.get_formula();this.$i()},requestAutoCompleteMenu:function(nk,nl){if(this.$n&&this.get_hasCalculation()&&this.$t.get_dataSourceName()!=='__fake ds name__'){return tab.CalculationCommands.requestAutoCompleteInfo(this.$t,nk,nl)}else{return $.Deferred().reject()}},getDragInstanceForText:function(nk){var nl=new cj(nk);var nm=tab.CalculationCommands.startDraggingText(nk);nm.done(function(nn){if(ss.isValue(nn)&&ss.isValue(nn)){nl.resolve(nn)}else{nl.reject(nn)}});return nl},dragStarted:function(nk){if(nk.get_dragType()==='dragdrop'){this.set_dropState((cs.canAccept(nk)?1:2))}else{this.set_dropState(0)}},dragEnded:function(nk){this.set_dropState(0)},handleDrop:function(nk,nl,nm){var nn=$.Deferred();if(!ss.isInstanceOfType(nk,cf)){nn.resolve(false);return nn}var no=ss.safeCast(nk,lm);no.get_drop().done(ss.mkdel(this,function(np){var nq=ss.safeCast(np,cf);var nr=cs.canAccept(nq);if(!nr){}else if(nq.hasOnlyFields()){var ns=nq.get_fieldNames();this.$4();var nt;if(ss.isInstanceOfType(nq,cj)){var nu=nq.get_text();nt=tab.CalculationCommands.dropOnCalcEditor(ns,nl,'drag-drop-calculation-editor',nm,this.$t.get_calculationContext(),nu)}else if(ss.isInstanceOfType(nq,Z)){var nv=ss.safeCast(nq,Z);var nw=$.Deferred();nt=nw.promise();nv.getFormulaPromise('measure-formula').done(ss.mkdel(this,function(nz){tab.CalculationCommands.dropOnCalcEditor(ns,nl,'drag-drop-calculation-editor',nm,this.$t.get_calculationContext(),nz).done(function(nA){nw.resolve(nA)}).fail(function(nA){nw.reject(0)})})).fail(function(nz){nw.reject(0)})}else{nt=tab.CalculationCommands.dropOnCalcEditor(ns,nl,'drag-drop-schema',nm,this.$t.get_calculationContext(),null)}nt.done(ss.mkdel(this,this.$3))}else if(nq.hasOnlyPills()){var nx=[];nx.push(nq.get_pill().get_field().get_globalName());this.$4();var ny=tab.CalculationCommands.dropOnCalcEditor(nx,nl,'drag-drop-shelf',nm,this.$t.get_calculationContext(),null);ny.done(ss.mkdel(this,this.$3))}nn.resolve(nr)}));return nn},insertFunction:function(nk,nl){var nm=this.get_formula();var nn=tab.CalculationCommands.insertFunctionInFormula(nk,nm,nl);nn.done(ss.mkdel(this,function(no){if(ss.isNullOrUndefined(no)||_.isString(no)){return}var np=no;var nq=np['text'.toString()];var nr=np['selectionEnd'.toString()];nm=nm.substr(0,nl.calcEditorTextSelectionStartPos)+nq+nm.substr(nl.calcEditorTextSelectionEndPos);if(ss.isValue(this.$2$7)){this.$2$7(nm,nr)}else{this.set_formula(nm)}}))},$k:function(){this.$1();this.$A=window.setTimeout(ss.mkdel(this,function(){this.$4()}),250)},$4:function(){if(ss.isNullOrUndefined(this.$A)){return}this.$1();if(this.$l()){this.$z++;tab.CalculationCommands.validateCalculation(this.$t,this.$p,this.$q).always([ss.mkdel(this,function(){this.$z--})])}},$3:function(nk){if(ss.isValue(this.$2$6)){this.$2$6(nk)}},$c:function(){this.$o=tab.ApplicationModel.get_instance();this.$o.add_newWorkbook(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$o.remove_newWorkbook(ss.mkdel(this,this.$a));this.$o=null})));return this},$e:function(){this.$a(this.$o.get_workbook());this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a(null)})));return this},$d:function(){this.$9(this.$B.get_dataSchema());this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9(null)})));return this},$a:function(nk){if(ss.isValue(nk)){nk.add_newDataSchemaModel(ss.mkdel(this,this.$9))}if(ss.isValue(this.$B)){this.$B.remove_newDataSchemaModel(ss.mkdel(this,this.$9))}this.$B=nk},$9:function(nk){this.$u=nk}},{new$1:function(nk){return new cs(nk)},canAccept:function(nk){if(ss.isInstanceOfType(nk,Z)){return false}var nl=ss.safeCast(nk,cf);if(!nk.get_hasPayload()||ss.isNullOrUndefined(nl)){return false}if(ss.isInstanceOfType(nl,jc)){var nm=nl.get_fields();if(ss.isNullOrUndefined(nm)){return false}return _.every(nm,function(nn){return nn.get_canBeUsedInCalculation()})}else if(ss.isInstanceOfType(nl,cj)){return true}return false}});var ct=global.tab.CalculationFunctionInfoTemplate=ss.mkType(a,'tab.CalculationFunctionInfoTemplate',function(){this.$2=null;this.$1=null;spiff.Template.call(this,$("\n<div class='tabCalcEditorFunctionInfo'>\n  <div class='tabCalcEditorFunctionName'></div>\n  <div class='tabCalcEditorFunctionDescription'></div>\n</div>"));this.$2=this.getElementBySelector('.tabCalcEditorFunctionName');this.$1=this.getElementBySelector('.tabCalcEditorFunctionDescription')},{get_functionName:function(){return this.$2},get_functionDescription:function(){return this.$1}});var cu=global.tab.CalculationFunctionListTemplate=ss.mkType(a,'tab.CalculationFunctionListTemplate',function(){this.$3=null;this.$2=null;this.$4=null;this.$1=null;spiff.Template.call(this,$("<div class='tabCalcEditorFunctionArea'><div class='tabCalcEditorSearchableFuncList'><div class='tabCalcEditorFuncType'></div><div class='tabCalcEditorFuncSearchBox'></div><div class='tabCalcEditorFuncListSeparator'></div><div class='tabCalcEditorFuncListArea'></div></div><div class='tabCalcEditorFuncInfoArea'></div></div>"));this.$3=this.getElementBySelector('.tabCalcEditorFuncListArea');this.$2=this.getElementBySelector('.tabCalcEditorFuncInfoArea');this.$4=this.getElementBySelector('.tabCalcEditorFuncSearchBox');this.$1=this.getElementBySelector('.tabCalcEditorFuncType')},{get_functionListArea:function(){return this.$3},get_functionInfoArea:function(){return this.$2},get_searchBox:function(){return this.$4},get_funcType:function(){return this.$1}});var cv=global.tab.CalculationFunctionListView=ss.mkType(a,'tab.CalculationFunctionListView',function(nk){this.$i=null;this.$e=null;this.$j=null;this.$h=null;this.$l=null;this.$k=null;this.$f=null;this.$g=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[cw]).call(this,nk,new cu);this.$i=nk;this.$e=this.get_template()},{add_doubleClickedItem:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_doubleClickedItem:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_dom:function(){return this.$e},get_listView:function(){return this.$j},get_funcInfo:function(){return this.$f},get_funcTypeVm:function(){return this.$h},get_searchTextInputView:function(){return this.$l},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$j=spiff.ListView.createListView(this.$i.get_listViewModel(),this);this.$k=new spiff.ScrollableViewModel.$ctor1(false);this.$k.set_content(this.$j.element[0]);this.$k.set_scrollY(true);this.disposables.add$1(this.$k);var nk=spiff.ScrollableView.createScrollableView(this.$k);nk.element.attr('tabindex','-1');nk.addToDom(this.$e.get_functionListArea());this.$j.useScrollableView(nk);this.$f=new ct;this.$g=new spiff.ScrollableViewModel.$ctor1(false);this.$g.set_content(this.get_funcInfo().domRoot.get(0));this.$g.set_scrollY(true);this.disposables.add$1(this.$g);this.disposables.add$1(this.$f);var nl=spiff.ScrollableView.createScrollableView(this.$g);nl.addToDom(this.$e.get_functionInfoArea());this.$j.tabIndex(0);this.$i.add_selectionChanged(ss.mkdel(this,this.$b));this.$i.add_submitSelection(ss.mkdel(this,this.$a));this.$j.add_listItemsUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i.remove_selectionChanged(ss.mkdel(this,this.$b));this.$i.remove_submitSelection(ss.mkdel(this,this.$a));this.$j.remove_listItemsUpdated(ss.mkdel(this,this.$c));this.$j.dispose()})));this.$h=new spiff.ComboBoxViewModel;this.$7(tab.Strings.FunctionTypeAll,'all');this.$7(tab.Strings.FunctionTypeNumber,'num');this.$7(tab.Strings.FunctionTypeString,'str');this.$7(tab.Strings.FunctionTypeDate,'date');this.$7(tab.Strings.FunctionTypeType,'cast');this.$7(tab.Strings.FunctionTypeLogical,'logic');this.$7(tab.Strings.FunctionTypeAggregate,'agg');this.$7(tab.Strings.FunctionTypeUser,'user');this.$7(tab.Strings.FunctionTypeTableCalculation,'table');this.$7(tab.Strings.FunctionTypeSpatial,'spatial');this.$h.set_selectedItem(this.$h.get_items()[0]);this.$e.get_funcType().append(tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$h]).element);this.$h.add_selectedItemChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.remove_selectedItemChanged(ss.mkdel(this,this.$8));this.$h.dispose()})));this.$l=spiff.ClearableTextInputView.newClearableTextInputView('',tab.Strings.FunctionTypeSearchHint,tab.Strings.FunctionTypeClearTooltip);this.$l.addToDom(this.$e.get_searchBox());this.$l.add_propertyChanged(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_propertyChanged(ss.mkdel(this,this.$d));this.$l.dispose()})));this.$9()},$7:function(nk,nl){var nm=new spiff.ComboBoxItem(null,nk,nl,null,null);this.$h.addItem(nm)},$9:function(){var nk=this.$h.get_selectedItem().get_data();if(nk.toString()==='all'){nk=null}var nl=this.$l.get_text();if(ss.isValue(nl)){nl=nl.trim().toLowerCase()}this.$i.filter(nk,nl)},$8:function(nk){if(!ss.isNullOrEmptyString(this.$l.get_text())){this.$l.set_text('')}else{this.$9()}},$d:function(nk,nl){this.$9()},handleResize:function(){this.$k.triggerRefresh();this.$g.triggerRefresh()},$c:function(){this.$i.selectFirstItem();this.$k.triggerRefresh()},$b:function(nk){var nl='';var nm='';if(ss.isValue(nk)){nl=nk.funcSig||'';nm=nk.helpContents||''}this.get_funcInfo().get_functionName().text(nl);this.get_funcInfo().get_functionDescription().text(nm);this.$g.triggerRefresh()},$a:function(nk){if(!ss.staticEquals(this.$3$1,null)){this.$3$1(nk)}},createListItemContent:function(nk){var nl=nk.get_data();return $('<span></span>').addClass('tab-list-item-label').text(nl.name)}});var cw=global.tab.CalculationFunctionListViewModel=ss.mkType(a,'tab.CalculationFunctionListViewModel',function(nk){this.$5=null;this.$4=null;this.$3=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$5=nk;this.$5.add_functionListUpdated(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_functionListUpdated(ss.mkdel(this,this.$2))})));this.$4=new spiff.ListViewModel([],0);this.$4.add_selectionChanged(ss.mkdel(this,this.$0));this.$4.add_submitSelection(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_selectionChanged(ss.mkdel(this,this.$0));this.$4.remove_submitSelection(ss.mkdel(this,this.$1))})));this.$2()},{add_selectionChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_selectionChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_submitSelection:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_submitSelection:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_model:function(){return this.$5},get_functions:function(){return this.$5.get_functions()},get_listViewModel:function(){return this.$4},dispose:function(){this.$3=tab.MiscUtil.dispose(this.$3);this.$4.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(){this.$3=tab.MiscUtil.dispose(this.$3);this.$3=[];var nk=this.$5.get_functions();for(var nl=0,nm=nk.length;nl<nm;nl++){var nn=nl.toString();var no=nk[nl];this.$3.push(spiff.ListItemViewModel.newListItem(nn,no,false,false,false))}this.$4.update(this.$3)},selectFirstItem:function(){if(this.$4.get_collection().length>0){this.$4.selectItemAtIndex(0)}},$0:function(){var nk=null;var nl=this.$4.get_firstSelectedItem();if(ss.isValue(nl)){nk=nl.get_data()}this.raiseActionEvent$1(Object).call(this,this.$2$1,nk)},$1:function(){var nk=this.$4.get_firstSelectedItem();if(ss.isValue(nk)){var nl=nk.get_data();this.raiseActionEvent$1(Object).call(this,this.$2$2,nl)}},filter:function(nk,nl){this.$4.set_filter(function(nm,nn,no){var np=nm.get_data();if(ss.isValue(nk)&&!ss.contains(np.funcGrps,ss.unbox(nk))){return false}return ss.isNullOrEmptyString(nl)||np.name.toString().toLowerCase().indexOf(nl)>=0})}});var cx=global.tab.CalculationTitleAreaTemplate=ss.mkType(a,'tab.CalculationTitleAreaTemplate',function(){this.$1=null;this.$3=null;this.$2=null;spiff.Template.call(this,$("\n<div class='tabCalcEditorTitleArea'>\n  <div class='tabCalcEditorCaptionContainer'></div>\n  <div class='tabCalcEditorDataSourceLabel'><div class='icon'></div><div class='labelText'></div></div>\n</div>"));this.$1=this.getElementBySelector('.tabCalcEditorCaptionContainer');this.$3=this.getElementBySelector('.tabCalcEditorDataSourceLabel');this.$2=this.getElementBySelector('.icon')},{get_captionContainer:function(){return this.$1},get_dataSourceLabel:function(){return this.$3},get_dataSourceLabelText:function(){return this.$3.find('.labelText')},get_dataSourceIcon:function(){return this.$2}});var cy=global.tab.CardContentView$1=ss.mkType(a,'tab.CardContentView$1',function(nk){var nl=ss.registerGenericClassInstance(cy,[nk],function(nm,nn){this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[nk]).call(this,nm,nn)},{add_scrollContentChanged:function(nm){this.$3$1=ss.delegateCombine(this.$3$1,nm)},remove_scrollContentChanged:function(nm){this.$3$1=ss.delegateRemove(this.$3$1,nm)},get_scrollableContentPreferredHeight:null,setScrollableContentActualHeight:null,raiseScrollContentChanged:function(){if(ss.isValue(this.$3$1)){this.$3$1()}}},null,function(){return ss.makeGenericType(spiff.BaseView$1,[nk])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[nk]),ss.IDisposable,tab.IAppendableView,gS]});return nl});ss.initGenericClass(cy,1);var cz=global.tab.CardLayoutFactory=ss.mkType(a,'tab.CardLayoutFactory',null,null,{generate:function(){return(tsConfig.is_metrics_authoring?cz.$0():cz.$1())},$1:function(){var nk={};nk['top']=['columns','rows'];nk['left']=['pages','filters','marks','measureValues'];nk['right']=[];nk['bottom']=[];return nk},$0:function(){var nk={};nk['top']=[];nk['left']=['filters'];nk['right']=[];nk['bottom']=[];return nk}});var cA=global.tab.CardOrientation=ss.mkEnum(a,'tab.CardOrientation',{vertical:0,horizontal:1});var cB=global.tab.CardView=ss.mkType(a,'tab.CardView',function(nk){this.$g=null;this.$h=[];this.$f=false;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[cC]).call(this,nk,new cD);this.get_viewModel().add_cardChanged(ss.mkdel(this,this.$a));this.get_viewModel().add_collapsedChanged(ss.mkdel(this,this.$b));this.get_viewModel().add_contentDropStateChanged(ss.mkdel(this,this.$8));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.get_dom().expandoTarget,ss.mkdel(this,this.$9)));this.$a(this.get_viewModel())},{add_cardContentChanged:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_cardContentChanged:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_contentView:function(){return this.$g},get_dom:function(){return this.get_template()},dispose:function(){if(ss.isValue(this.get_viewModel())){this.get_viewModel().remove_cardChanged(ss.mkdel(this,this.$a));this.get_viewModel().remove_collapsedChanged(ss.mkdel(this,this.$b));this.get_viewModel().remove_contentDropStateChanged(ss.mkdel(this,this.$8))}this.$h.forEach(function(nk){nk.dispose()});ss.makeGenericType(spiff.BaseView$1,[cC]).prototype.dispose.call(this)},onAddedToDom:function(){if(ss.isValue(this.$g)){this.$g.onAddedToDom()}spiff.Widget.prototype.onAddedToDom.call(this)},$8:function(nk){var nl=false;var nm=false;switch(nk){case 1:{nl=true;break}case 2:{nm=true;break}}this.element.toggleClass('tabAuthCardDropInvited',nl);this.element.toggleClass('tabAuthCardDropNotValid',nm)},$b:function(nk){if(nk.get_isCollapsed()){this.get_dom().content.slideUp()}else{this.get_dom().content.slideDown()}this.$c();this.$e()},$9:function(nk){this.get_viewModel().toggleExpanded()},$c:function(){this.get_dom().expando.toggleClass('Closed',this.get_viewModel().get_isCollapsed());this.get_dom().expando.toggleClass('Open',!this.get_viewModel().get_isCollapsed())},$e:function(){var nk='';if(ss.isValue(this.get_viewModel().get_content())){nk=this.get_viewModel().get_content().get_title();if(this.get_viewModel().get_isCollapsed()&&!tab.MiscUtil.isNullOrEmpty$1(this.get_viewModel().get_content().get_collapsedTitleDetail())){nk=tab.Strings.AuthCardCollapsedTitle(nk,this.get_viewModel().get_content().get_collapsedTitleDetail())}}this.get_dom().label.html(nk)},$d:function(){if(this.get_viewModel().get_hasIcon()){this.get_dom().icon.removeClass().addClass(this.get_viewModel().get_iconClass())}},$a:function(nk){if(this.get_viewModel().get_isVisible()){this.get_dom().domRoot.show()}else{this.get_dom().domRoot.hide()}var nl=nk.get_orientation()===0;this.get_dom().domRoot.toggleClass('tabAuthCardVertical',nl);this.get_dom().domRoot.toggleClass('tabAuthCardHorizontal',!nl);this.$c();if(this.get_viewModel().get_isCollapsible()){this.get_dom().expando.show();this.get_dom().expandoTarget.show()}else{this.get_dom().expando.hide();this.get_dom().expandoTarget.hide()}this.$d();this.$e();var nm=spiff.Widget.getWidgets(this.get_dom().content.children(),null);for(var nn=0;nn<nm.length;nn++){var no=nm[nn];no.dispose()}if(ss.isValue(nk.get_content())){if(ss.isValue(this.$g)){this.$g.dispose()}this.$g=tab.ObjectRegistry.newView$1(ss.makeGenericType(cy,[tab.IViewModel])).call(null,nk.get_content().get_viewType(),[nk.get_content().get_viewModel()]);this.get_dom().content.append(this.$g.get_rootElement());if(this.addedToDom){this.$g.onAddedToDom()}if(ss.isValue(this.$3$1)){this.$3$1(this.$g)}this.$7(nk)}},$7:function(nk){if(this.$f||ss.isNullOrEmptyString(nk.get_content().get_name())||ss.compareStrings(nk.get_content().get_name(),'none',true)===0){return}if(ss.referenceEquals(ss.getInstanceType(this.get_viewModel().get_content()),lo)){EventUtils.DragDropManager.attachDropTarget(this.get_dom().dropTarget,nk.get_content())}this.get_dom().domRoot.addClass('tabAuthCardType-'+nk.get_content().get_name());this.$f=true}});var cC=global.tab.CardViewModel=ss.mkType(a,'tab.CardViewModel',function(){this.$5=0;this.$4=false;this.$3=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this)},{add_cardChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_cardChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_collapsedChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_collapsedChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_contentDropStateChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_contentDropStateChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},get_orientation:function(){return this.$5},set_orientation:function(nk){this.$5=nk;this.handleCardChanged()},get_isVisible:function(){return ss.isValue(this.$3)&&this.$3.get_isVisible()},get_isCollapsible:function(){return this.$5===0},get_isCollapsed:function(){return this.$4},set_isCollapsed:function(nk){this.$4=nk;this.handleCollapsedChanged()},get_hasIcon:function(){return this.$5===1},get_iconClass:function(){var nk=this.$3;var nl=this.$0(nk.get_shelfType());return ss.formatString('tabAuthCardIcon {0}',nl)},get_content:function(){return this.$3},set_content:function(nk){if(ss.isValue(this.$3)){this.$3.remove_dropStateChanged(ss.mkdel(this,this.$1));this.$3.remove_visibleChanged(ss.mkdel(this,this.$2))}this.$3=nk;if(ss.isValue(this.$3)){this.$3.add_dropStateChanged(ss.mkdel(this,this.$1));this.$3.add_visibleChanged(ss.mkdel(this,this.$2))}this.handleCardChanged()},toggleExpanded:function(){if(!this.get_isCollapsible()){return}this.set_isCollapsed(!this.$4)},handleCardChanged:function(){if(ss.isValue(this.$2$1)){this.$2$1(this)}},handleCollapsedChanged:function(){if(ss.isValue(this.$2$2)){this.$2$2(this)}},$1:function(nk){if(ss.isNullOrUndefined(this.$2$3)){return}this.$2$3(nk)},$2:function(){this.handleCardChanged()},$0:function(nk){switch(nk){case'rows-shelf':{return'Rows'}case'columns-shelf':{return'Columns'}default:{return''}}}});var cD=global.tab.CardViewTemplate=ss.mkType(a,'tab.CardViewTemplate',function(){this.icon=null;this.label=null;this.content=null;this.expando=null;this.expandoTarget=null;this.dropTarget=null;spiff.Template.call(this,$(cD.template));this.icon=this.getElementBySelector('.tabAuthCardIcon');this.label=this.getElementBySelector('.tabAuthCardLabel');this.content=this.getElementBySelector('.tabAuthCardContent');this.expando=this.getElementBySelector('.tabAuthCardExpando');this.expandoTarget=this.getElementBySelector('.tabAuthCardExpandoTarget');this.dropTarget=this.domRoot});var cE=global.tab.CategoricalBinEditProxy=ss.mkType(a,'tab.CategoricalBinEditProxy');var cF=global.tab.CategoricalColorEditorComponent=ss.mkType(a,'tab.CategoricalColorEditorComponent',function(nk,nl){React.Component.call(this,nk,nl);this.state=this.$2(this.props)},{componentWillReceiveProps:function(nk){this.setState(this.$2(nk))},$2:function(nk){return{selectedPalette:nk.allPalettes[nk.currentPaletteIndex],selectedLegendItemIndexes:nk.selectedLegendItemIndexes}},render:function(){var nk=spiff.ReactElement.div$1('tab-categoricalColorEditorDialogContent',[spiff.ReactElement.div$1('tab-colorFieldLegendContainer',[this.$8()]),spiff.ReactElement.div$1('tab-colorPaletteSelectorContainer',[this.$a()])]);return nk},$a:function(){var nk=this.state.selectedPalette;var nl=this.$4(nk.colors);var nm=spiff.ReactElement.div$1('tab-colorPaletteSelector',[spiff.ReactElement.div$1('tab-ColorFieldLegendTitle',[tab.Strings.TabAuthCategoricalColorEditorSelectPalette]),spiff.ReactElement.div$1('tab-ColorFieldLegendDropdown',[this.$9()]),spiff.ReactElement.div$1('tab-ColorPaletteContainer',[nl]),React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nn){this.$0()}),testId:'assignPaletteButton',children:tab.Strings.TabAuthCategoricalColorEditorAssignPalette,className:'tb-assignPaletteButton'})]);return nm},$4:function(nk){var nl=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,nk,[]);return _.map(nk,ss.mkdel(this,function(nm,nn){var no=spiff.DOMElements.div;var np=new EventUtils.EventHandleSpec;np.tap=ss.mkdel(this,function(nq){this.$d(nm)});return no({className:'tab-PaletteItemEntry',key:nl[nn]},EventUtils.EventForwarder.div(np,{className:'tab-ColorPaletteSwatch',style:{backgroundColor:nm}}))}))},$9:function(){var nk=React.createElement(spiff.DropdownComponent,{styleClass:'tab-ColorPaletteDropdown',resetSelector:true,getDesiredHeight:function(nl){return 350},renderButton:ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:'tabAuthPalette-small-'+this.state.selectedPalette.colorPaletteId,selectionText:this.state.selectedPalette.colorPaletteName})})},this.$b());return nk},$b:function(){return React.createElement(spiff.SelectableButtonGroupComponent,this.$1())},$1:function(){var nk=new Object;nk.borders=false;nk.allOption=false;nk.items=_.map(this.props.allPalettes,ss.mkdel(this,function(nl){var nm=new spiff.SelectableButtonGroupItem;nm.label=nl.colorPaletteName;nm.getCustomContentBefore=ss.mkdel(this,function(){return[spiff.DOMElements.div({key:nl.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+nl.colorPaletteId})]});return nm}));nk.selection=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,this.props.allPalettes,ss.mkdel(this,function(nl){return ss.equals(nl,this.state.selectedPalette)}));nk.showApplyAndCancelButtons=false;nk.onSelectionChanged=ss.mkdel(this,this.$6);return nk},$8:function(){var nk=this.$3(this.props.fieldColors,this.state.selectedLegendItemIndexes,ss.mkdel(this,this.$5),ss.mkdel(this,this.$7));var nl=spiff.ReactElement.div$1('tab-colorFieldLegend',[spiff.ReactElement.div$1('tab-ColorFieldLegendTitle',[tab.Strings.TabAuthCategoricalColorEditorSelectItem]),spiff.ReactElement.div$1('tab-ColorFieldLegendItems',[nk]),React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:ss.mkdel(this,function(nm){this.$c()}),testId:'resetPaletteButton',children:tab.Strings.TabAuthCategoricalColorEditorReset,className:'tb-resetPaletteButton'})]);return nl},$3:function(nk,nl,nm,nn){return _.map(nk,ss.mkdel(this,function(no,np){var nq='tab-ColorFieldLegendItemName'+(ss.contains(nl,np)?' tab-ColorFieldLegendItemName-selected':'');var nr=new EventUtils.EventHandleSpec;nr.tap=function(ns){nm(ns,np)};nr.doubleTap=function(ns){nn(ns,np)};return EventUtils.EventForwarder.div(nr,{className:'tab-legendItemEntry tab-legendItemIdx'+np,key:no.text.toString()+np,title:no.text},spiff.DOMElements.div({className:'tab-ColorFieldLegendItemSwatch',style:{backgroundColor:no.color},key:no.text.toString()+no.color.toString()+np}),spiff.DOMElements.div({className:nq,key:no.text.toString()+np+'-name'},no.text))}))},$6:function(nk){this.$f(nk)},$f:function(nk){var nl=nk.mapSelected(Object).call(nk,ss.mkdel(this,function(nm){return this.props.allPalettes[nm]}))[0];this.setState({selectedPalette:nl,selectedLegendItemIndexes:this.state.selectedLegendItemIndexes});this.props.setSelectedPaletteIndex(nk.mapSelected(ss.Int32).call(nk,function(nm){return nm})[0])},$0:function(){this.props.assignPalette(this.state.selectedPalette.colorPaletteId)},$c:function(){this.props.resetPalette()},$5:function(nk,nl){var nm=nk.target.classList;var nn=!ss.contains(this.state.selectedLegendItemIndexes,nl)&&(nm.contains('tab-ColorFieldLegendItemSwatch')||nm.contains('tab-ColorFieldLegendItemName'));this.$e(nl,nn)},$e:function(nk,nl){var nm=(nl?[nk]:[]);this.setState({selectedLegendItemIndexes:nm,selectedPalette:this.state.selectedPalette});this.props.setSelectedLegendItemIndexes(nm)},$d:function(nk){if(this.state.selectedLegendItemIndexes.length===0){return}this.props.setItemColor(nk)},$7:function(nk,nl){var nm=function(){return $('.tab-legendItemIdx'+nl)};this.props.openCustomColorUber(nl,nm)}});var cG=global.tab.CategoricalColorEditorDialog=ss.mkType(a,'tab.CategoricalColorEditorDialog',function(){React.Component.call(this)},{removeFromDOM:function(){cG.$1=null;var nk=cG.$0;cG.$0=null;if(ss.isValue(nk)){ReactDOM.unmountComponentAtNode(nk)}},showOrUpdate:function(nk,nl){var nm;if(ss.isNullOrUndefined(cG.$1)){cG.$0=document.createElement('div');nm={title:tab.Strings.TabAuthColorEditorDialogTitle(nk.fieldDisplayName),onClose:ss.mkdel(this,function(){this.removeFromDOM();if(!ss.staticEquals(nl,null)){nl()}}),editorProps:nk}}else{nm={title:tab.Strings.TabAuthColorEditorDialogTitle(nk.fieldDisplayName),onClose:cG.$1.props.onClose,editorProps:nk}}cG.$1=React.createElement(cG,nm);ReactDOM.render(cG.$1,cG.$0)},update:function(){this.render()},$0:function(){var nk=React.createElement(cF,this.props.editorProps);var nl={testId:'tab-categoricalColorEditor',isModal:true,type:0,isGlassTransparent:true,showCloseButton:true,title:this.props.title,positioningBehavior:2,dialogWidth:560,showFooter:false,shouldReturnFocusOnClose:false,children:nk,onCloseRequest:this.props.onClose,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile,zIndex:1000,dialogBodyStyle:{overflow:''}};return nl},render:function(){var nk=this.$0();return React.createElement(SharedWidgets.DialogWidget,nk)}});var cH=global.tab.CategoricalColorEditorDialogViewModel=ss.mkType(a,'tab.CategoricalColorEditorDialogViewModel',function(nk,nl){this.$6=null;this.$5=null;this.$3=null;this.$4=null;this.$7=null;spiff.BaseViewModel.call(this);this.$6=nk;this.$5=nl;nk.add_showOrUpdateDialog(ss.mkdel(this,this.$2));this.disposables.add(ss.mkdel(this,function(){this.$5.removeFromDOM();nk.remove_showOrUpdateDialog(ss.mkdel(this,this.$2))}))},{get_fieldDisplayName:function(){return this.$6.get_fieldDisplayNames().join(', ')},get_currentPaletteIndex:function(){var nk=this.$7;if(ss.isNullOrUndefined(nk)){nk=this.$6.get_currentPaletteIndex()}return nk},$2:function(){var nk={fieldDisplayName:this.get_fieldDisplayName(),allPalettes:this.$6.get_availablePalettes(),fieldColors:this.$6.get_itemColors(),currentPaletteIndex:this.get_currentPaletteIndex(),selectedLegendItemIndexes:this.$6.get_selectedLegendItemIndexes(),assignPalette:ss.mkdel(this,this.assignPalette),resetPalette:ss.mkdel(this,this.resetPalette),setItemColor:ss.mkdel(this,this.setItemColor),setSelectedLegendItemIndexes:ss.mkdel(this,this.setSelectedLegendItemIndexes),setSelectedPaletteIndex:ss.mkdel(this,this.setSelectedPaletteIndex),openCustomColorUber:ss.mkdel(this,this.openCustomColorUber)};this.$5.showOrUpdate(nk,ss.mkdel(this,this.$0))},assignPalette:function(nk){var nl=new tab.AssignCategoricalColorPaletteCmd;nl.set_uiBlocking('afterDelay');nl.c['componentId']=this.$6.get_controllerId()|0;nl.c['colorPaletteId']=nk;nl.c['applyColors']=true;nl.invoke()},resetPalette:function(){this.$7=null;var nk=new tab.ResetCategoricalColorMapCmd;nk.set_uiBlocking('afterDelay');nk.c['componentId']=this.$6.get_controllerId()|0;nk.c['applyColors']=true;nk.invoke()},setItemColor:function(nk){if(this.$6.get_selectedLegendItemIndexes().length===0){return}if(ss.staticEquals(this.$6.get_itemColors()[this.$6.get_selectedLegendItemIndexes()[0]].color,nk)){return}var nl=new tab.SetCategoricalLegendItemColorCmd;nl.set_uiBlocking('afterDelay');nl.c['componentId']=this.$6.get_controllerId()|0;nl.c['color']=nk;nl.invoke()},setSelectedLegendItemIndexes:function(nk){var nl=new tab.SetSelectedLegendItemsCmd;nl.c['componentId']=this.$6.get_controllerId()|0;nl.c['itemIndices']=nk;nl.invoke().fail(ss.mkdel(this,function(nm){this.$2()}))},setSelectedPaletteIndex:function(nk){this.$7=nk},$0:function(){if(ss.isValue(this.$3)){this.$4.set_customColor(null);this.$3.hide(false);this.$3=null;this.setSelectedLegendItemIndexes([])}this.$7=null;var nk=new tab.ReleaseComponentCmd;nk.c['componentId']=this.$6.get_controllerId()|0;nk.invoke()},openCustomColorUber:function(nk,nl){this.setSelectedLegendItemIndexes([nk]);var nm=tab.ColorModel.fromColorCode(this.$6.get_itemColors()[nk].color);var nn=ss.mkdel(this,function(np){this.$6.get_itemColors()[nk].color=np.toRgbHex();this.$2()});var no=ss.mkdel(this,function(np){if(ss.isValue(np)){this.setItemColor(np.toRgb())}});this.$4=new dI;this.$3=this.$4.showWithCallbacks(nl,nm,nn,no);this.disposables.add$1(this.$3);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.$1)));this.$3.add_hidden(ss.mkdel(this,function(){this.$3=null}))},$1:function(nk){if(ss.isValue(this.$3)){this.$3.updatePosition()}}});var cI=global.tab.CategoricalColorOptionTemplate=ss.mkType(a,'tab.CategoricalColorOptionTemplate',function(){this.colorEditButtonContainer=null;this.colorPaletteSelectionControlContainer=null;this.transparencyControlContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthCategoricalColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabColorPalettePickerContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorEditButtonContainer=this.getElementBySelector('.tabColorEditButtonContainer');this.colorPaletteSelectionControlContainer=this.getElementBySelector('.tabColorPalettePickerContainer');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var cJ=global.tab.CategoricalColorOptionView=ss.mkType(a,'tab.CategoricalColorOptionView',function(nk){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[cK]).call(this,nk,new cI);this.$a=this.get_template()},{$8:function(){var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[cQ,cO,Object])).call(null,[this.get_viewModel().get_colorOptionEditButtonViewModel()]);nk.addToDom(this.$a.colorEditButtonContainer);this.disposables.add$1(nk)},$9:function(){var nk=tab.ObjectRegistry.newView$1(dr).call(null,dr,[this.get_viewModel().get_colorTransparencyControlViewModel()]);nk.addToDom(this.$a.transparencyControlContainer);this.disposables.add$1(nk)},$7:function(){var nk=tab.ObjectRegistry.newView(cV).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);nk.addToDom(this.$a.colorEffectsContainer);this.disposables.add$1(nk)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$8();this.$9();this.$7()}});var cK=global.tab.CategoricalColorOptionViewModel=ss.mkType(a,'tab.CategoricalColorOptionViewModel',function(nk){this.$3=null;dd.call(this,nk);this.$3=new cQ(this.get_marksCardTabEncodingModel(),0,true)},{get_selectedColorPalette:function(){if(ss.isValue(this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().categoricalColor)){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().categoricalColor.colorPaletteId}return''},set_selectedColorPalette:function(nk){tab.PaneClientCommands.setCatColorPalette(this.get_marksCardTabEncodingModel(),nk)},get_viewType:function(){return cJ},get_colorOptionEditButtonViewModel:function(){return this.$3},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();dd.prototype.dispose.call(this)},updateUberPopupViewModel:function(nk){}});var cL=global.tab.CloseAuthoringCommand=ss.mkType(a,'tab.CloseAuthoringCommand',function(){tab.CloseAuthoringCmd.call(this)},{get_isVisible:function(){return!tsConfig.is_mobile_app},do$1:function(){bf.exitAuthoring(tab.ApplicationModel.get_instance().get_workbook())}});var cM=global.tab.CloseDataSourceErrorDialog=ss.mkType(a,'tab.CloseDataSourceErrorDialog',function(){React.Component.call(this)},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{testId:'tab-closeDataSourceErrorDialog',isModal:true,type:0,isGlassTransparent:false,showCloseButton:true,title:tab.Strings.CloseDataSourceErrorDialogTitle,positioningBehavior:0,dialogWidth:600,showFooter:true,shouldReturnFocusOnClose:false,onCloseRequest:this.props.onClose,zIndex:1000,children:spiff.ReactElement.div$1('tab-closeDataSourceErrorDialogContent',[spiff.ReactElement.div$1('tab-errorMessage',[tab.Strings.CloseDataSourceErrorDialogMessage(this.props.dataSourceName)]),spiff.ReactElement.br(null),spiff.ReactElement.div$1('tab-sheetNamesContainer',[_.map(this.props.sheetNames,function(nk){return spiff.ReactElement.div$1('tab-sheetName',[nk])})]),spiff.ReactElement.br(null),spiff.ReactElement.div$1('tab-errorMessageEpilogue',[tab.Strings.CloseDataSourceErrorDialogEpilogue])]),footerContent:React.createElement(SharedWidgets.DialogFooterButtonsWidget,{buttons:[{handleClick:ss.mkdel(this,function(nk){this.props.onClose()}),buttonType:2,testId:'OK',children:tab.Strings.DialogButtonOK,disabled:false}]})})}},{show:function(nk,nl){var nm=document.createElement('div');ReactDOM.render(React.createElement(cM,{dataSourceName:nk,sheetNames:nl,onClose:function(){_.defer(function(){ReactDOM.unmountComponentAtNode(nm)})}}),nm)}});var cN=global.tab.CloseDataSourceErrorDialogViewModel=ss.mkType(a,'tab.CloseDataSourceErrorDialogViewModel',function(nk){this.$1=null;spiff.BaseViewModel.call(this);this.$1=nk;nk.add_newError(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){nk.remove_newError(ss.mkdel(this,this.$0))}))},{$0:function(){cM.show(this.$1.get_dataSourceName(),this.$1.get_sheetNames())}});var cO=global.tab.ColorOptionEditButtonComponent=ss.mkType(a,'tab.ColorOptionEditButtonComponent',function(){React.Component.call(this)},{render:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:this.props.openColorEditDialog,testId:'tabColorEdit',children:tab.Strings.TabAuthColorEditButton,disabled:!this.props.buttonEnabled,title:this.props.tooltip});return spiff.DOMElements.div({className:'tabColorEditButtonControl'},spiff.DOMElements.div({className:'tabColorEditButtonHolder'},nk))}});var cP=global.tab.ColorOptionEditButtonType=ss.mkEnum(a,'tab.ColorOptionEditButtonType',{categorical:0,quantitative:1});var cQ=global.tab.ColorOptionEditButtonViewModel=ss.mkType(a,'tab.ColorOptionEditButtonViewModel',function(nk,nl,nm){this.$5=false;this.$6=null;this.$8=0;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=nk;this.$8=nl;this.$5=nm;this.$7=(this.$5?null:tab.Strings.AuthColorEditingDisabled)},{createInitialProps:function(){return{openColorEditDialog:ss.mkdel(this,this.$3),buttonEnabled:this.$5,tooltip:this.$7}},createUpdatedProps:function(){if(this.get_props().buttonEnabled!==this.$5){return{buttonEnabled:this.$5}}else{return null}},$4:function(nk){this.$5=nk;this.incrementProps()},$3:function(nk){var nl;this.$4(false);if(this.$8===0){var nm=new tab.GetWebCategoricalColorDialogCmd;nm.c['fieldVector']=this.$6.get_colorEncodingDropdown().encodingFieldVector;nl=nm.invoke()}else{var nn=new tab.GetWebQuantitativeColorDialogCmd;nn.c['fieldVector']=this.$6.get_colorEncodingDropdown().encodingFieldVector;nl=nn.invoke()}nl.always([ss.mkdel(this,function(){this.$4(true)})])}});var cR=global.tab.ColorOptionEffectComboBoxTemplate=ss.mkType(a,'tab.ColorOptionEffectComboBoxTemplate',function(){this.name=null;this.colorRule=null;this.button=null;spiff.Template.call(this,$("<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n            <div class='tabComboBoxNameContainer tab-ctrl-formatted'>\n                <span class='tabComboBoxName'></span>\n                <div class='tabComboBoxColorRule'></div>\n            </div>\n            <div class='tabComboBoxButtonHolder'>\n                <span class='tabComboBoxButton'></span>\n            </div>\n        </span>"));this.name=this.getElementBySelector('.tabComboBoxName');this.colorRule=this.getElementBySelector('.tabComboBoxColorRule');this.button=this.getElementBySelector('.tabComboBoxButtonHolder')});var cS=global.tab.ColorOptionEffectComboBoxView=ss.mkType(a,'tab.ColorOptionEffectComboBoxView',function(nk){this.$a=null;this.$9=null;ss.makeGenericType(spiff.BaseView$1,[cT]).call(this,nk,new cR);this.$a=this.get_template();this.$a.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]);this.$a.domRoot.addClass(spiff.ComboBoxView.noIconClass);this.get_viewModel().add_stateUpdated(ss.mkdel(this,this.$8));this.$8();this.$9=spiff.TableauClickHandler.targetAndClick(this.$a.domRoot[0],ss.mkdel(this,this.$7));this.$9.set_stopPropagationOnEvent(false);this.disposables.add$1(this.$9)},{$7:function(){if(!this.get_viewModel().get_enabled()){return}var nk=ss.mkdel(this,function(){return this.$a.domRoot});this.get_viewModel().clicked(nk)},$8:function(){if(this.get_viewModel().get_enabled()){this.$a.domRoot.toggleClass(spiff.ComboBoxView.disabledClass,false);if(this.get_viewModel().get_isAutoSelected()){this.$a.name.show();this.$a.colorRule.hide();this.$a.name.text(tab.Strings.AuthColorPaletteAutomatic)}else if(this.get_viewModel().get_isNoneSelected()){this.$a.name.show();this.$a.colorRule.hide();this.$a.name.text(tab.Strings.AuthColorPaletteNone)}else{this.$a.name.hide();this.$a.colorRule.show();this.$a.colorRule.css({'background-color':this.get_viewModel().get_selectedColor()})}}else{this.$a.domRoot.toggleClass(spiff.ComboBoxView.disabledClass,true);this.$a.name.show();this.$a.name.text('');this.$a.colorRule.hide()}}});var cT=global.tab.ColorOptionEffectComboBoxViewModel=ss.mkType(a,'tab.ColorOptionEffectComboBoxViewModel',function(nk){this.$0=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$0=nk},{add_stateUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_stateUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_comboClicked:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_comboClicked:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_enabled:function(){return this.$0.isEnabled},get_isAutoSelected:function(){return this.$0.isAuto},get_isNoneSelected:function(){return this.$0.isNone},get_selectedColor:function(){return this.$0.color},updateStyleSpec:function(nk){this.$0=nk},onStyleSpecUpdated:function(){this.$2$1()},clicked:function(nk){this.raiseActionEvent$1(Function).call(this,this.$2$2,nk)}});var cU=global.tab.ColorOptionEffectsTemplate=ss.mkType(a,'tab.ColorOptionEffectsTemplate',function(){this.borderColorLabel=null;this.borderColorButton=null;this.haloColorLabel=null;this.haloColorButton=null;spiff.Template.call(this,$("<div class='tabAuthMarksCardColorEffectsContainer'>\n            <div class='tabBorderColorLabel'></div>\n            <div class='tabBorderColorButtonArea'></div>\n            <div class='tabHaloColorLabel'></div>\n            <div class='tabHaloColorButtonArea'></div>\n        </div>"));this.borderColorLabel=this.getElementBySelector('.tabBorderColorLabel');this.borderColorButton=this.getElementBySelector('.tabBorderColorButtonArea');this.haloColorLabel=this.getElementBySelector('.tabHaloColorLabel');this.haloColorButton=this.getElementBySelector('.tabHaloColorButtonArea')});var cV=global.tab.ColorOptionEffectsView=ss.mkType(a,'tab.ColorOptionEffectsView',function(nk){this.$7=null;ss.makeGenericType(spiff.BaseView$1,[cW]).call(this,nk,new cU);this.$7=this.get_template();this.$7.borderColorLabel.text(tab.Strings.TabAuthMarksColorBorderLabel);this.$7.borderColorLabel.toggleClass('disabled',!this.get_viewModel().get_borderModel().isEnabled);this.$7.haloColorLabel.text(tab.Strings.TabAuthMarksColorHaloLabel);this.$7.haloColorLabel.toggleClass('disabled',!this.get_viewModel().get_haloModel().isEnabled);var nl=tab.ObjectRegistry.newView(cS).call(null,[nk.get_borderComboModel()]);this.$7.borderColorButton.append(nl.element);var nm=tab.ObjectRegistry.newView(cS).call(null,[nk.get_haloComboModel()]);this.$7.haloColorButton.append(nm.element);this.disposables.add$1(nl);this.disposables.add$1(nm)});var cW=global.tab.ColorOptionEffectsViewModel=ss.mkType(a,'tab.ColorOptionEffectsViewModel',function(nk){this.$3=null;this.$4=null;this.$1=null;this.$2=null;spiff.BaseViewModel.call(this);this.$3=nk},{get_marksCardTabEncodingModel:function(){return this.$3},get_borderComboModel:function(){if(this.$1===null){this.$1=new cT(this.get_borderModel());this.$1.add_comboClicked(ss.mkdel(this,this.borderColorComboClicked))}return this.$1},get_haloComboModel:function(){if(this.$2===null){this.$2=new cT(this.get_haloModel());this.$2.add_comboClicked(ss.mkdel(this,this.haloColorComboClicked))}return this.$2},get_borderModel:function(){return this.$3.get_colorEncodingDropdown().marksColorUberEffects.borderStyleSpec},get_haloModel:function(){return this.$3.get_colorEncodingDropdown().marksColorUberEffects.haloStyleSpec},borderColorComboClicked:function(nk){var nl=new cX(this.$3,this.get_borderModel());nl.add_styleSpecUpdated(ss.mkdel(this.$1,this.$1.onStyleSpecUpdated));this.$1.updateStyleSpec(this.get_borderModel());var nm=new da(this.$3,this.get_borderModel(),nl);this.$0(nm,nk)},haloColorComboClicked:function(nk){var nl=new cY(this.$3,this.get_haloModel());nl.add_styleSpecUpdated(ss.mkdel(this.$2,this.$2.onStyleSpecUpdated));this.$2.updateStyleSpec(this.get_haloModel());var nm=new da(this.$3,this.get_haloModel(),nl);this.$0(nm,nk)},$0:function(nk,nl){if(ss.isValue(this.$4)){if(this.$4.get_relativeElement().is(nl())){return}else{this.dismissPopup()}}this.$4=spiff.UberPopupViewModel.createForContent(nk,nl,null,true);this.$4.options.glassZIndex=spiff.UberPopupShowOptions.startingGlassZIndex+2;this.$4.options.horizontalAlign=1;this.$4.add_hidden(ss.mkdel(this,function(){this.$4=null}));this.$4.show()},dismissPopup:function(){if(ss.isValue(this.$4)){this.$4.hide(false);this.$4=null}}});var cX=global.tab.ColorOptionEffectsViewModel$BorderColorUpdater=ss.mkType(a,'tab.ColorOptionEffectsViewModel$BorderColorUpdater',function(nk,nl){dc.call(this,nk,nl)},{callPaneClientCommand:function(nk,nl,nm){tab.PaneClientCommands.setMarksBorderColor(this.marksCardTabEncodingModel,nm,nk,nl)}});var cY=global.tab.ColorOptionEffectsViewModel$HaloColorUpdater=ss.mkType(a,'tab.ColorOptionEffectsViewModel$HaloColorUpdater',function(nk,nl){dc.call(this,nk,nl)},{callPaneClientCommand:function(nk,nl,nm){tab.PaneClientCommands.setMarksHaloColor(this.marksCardTabEncodingModel,nm,nk,nl)}});var cZ=global.tab.ColorOptionEffectUberView=ss.mkType(a,'tab.ColorOptionEffectUberView',function(nk){this.$d=null;this.$c=null;ss.makeGenericType(spiff.BaseView$1,[da]).call(this,nk,new db);this.$d=this.get_template();this.$c=tab.ObjectRegistry.newView(dn).call(null,[this.get_viewModel().get_colorPicker()]);this.$c.addToDom(this.$d.colorPicker);var nl=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$8),tab.Strings.AuthColorPaletteMoreColors,'tabColorEffectMoreColorsButton',3,null);this.$d.moreColorsButtonArea.append(nl.element);this.get_viewModel().add_stateUpdated(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_stateUpdated(ss.mkdel(this,this.$a))})));this.$b()},{$a:function(){if(this.get_viewModel().get_isAutoSelected()||this.get_viewModel().get_isNoneSelected()){this.$c.clearSelectedColor()}else{this.$c.updateSelectedColor(this.get_viewModel().get_color())}this.$b()},$b:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nm){this.$7()}),buttonType:3,testId:'tabColorEffectAutoButton',key:'tabColorEffectAutoButton',children:tab.Strings.AuthColorPaletteAutomatic,selected:this.get_viewModel().get_isAutoSelected(),style:{width:'100%'}});var nl=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nm){this.$9()}),buttonType:3,testId:'tabColorEffectNoneButton',key:'tabColorEffectNoneButton',children:tab.Strings.AuthColorPaletteNone,selected:this.get_viewModel().get_isNoneSelected(),style:{width:'100%'}});ReactDOM.render(nk,this.$d.autoButton.get(0));ReactDOM.render(nl,this.$d.noneButton.get(0))},$7:function(){this.get_viewModel().onAutoSelected()},$9:function(){this.get_viewModel().onNoneSelected()},$8:function(){var nk=ss.mkdel(this,function(){return this.$d.getElementBySelector('.'+'tabColorEffectMoreColorsButton')});this.get_viewModel().onMoreColorsSelected(nk)}});var da=global.tab.ColorOptionEffectUberViewModel=ss.mkType(a,'tab.ColorOptionEffectUberViewModel',function(nk,nl,nm){this.$4=null;this.$6=null;this.$2=null;this.$1=null;this.$5=false;this.$3=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode('#000000'),0);this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=nk;this.$6=nl;this.$1=nm;this.$2=new fB(this.$4,this.$1);if(!this.get_isAutoSelected()&&!this.get_isNoneSelected()){this.$2.set_selectedColor(tab.ColorModel.fromColorCode(this.$6.color))}this.$1.add_styleSpecUpdated(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_styleSpecUpdated(ss.mkdel(this,this.$0))})));this.$1.allowUpdates()},{add_stateUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_stateUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_isAutoSelected:function(){return this.$6.isAuto},get_isNoneSelected:function(){return this.$6.isNone},get_color:function(){return tab.ColorModel.fromColorCode(this.$6.color)},get_colorPicker:function(){return this.$2},get_viewType:function(){return cZ},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$2.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},updateUberPopupViewModel:function(nk){},onAutoSelected:function(){if(!this.get_isAutoSelected()){this.$1.update(true,false,this.$3)}},onNoneSelected:function(){if(!this.get_isNoneSelected()){this.$1.update(false,true,this.$3)}},onMoreColorsSelected:function(nk){if(this.$5){return}var nl=new dI;var nm=spiff.UberPopupViewModel.createForContent(nl,nk,null,true);nl.set_enterKeyPressed(function(){nm.hide(false)});nm.options.glassZIndex=spiff.UberPopupShowOptions.startingGlassZIndex+3;nm.options.horizontalAlign=1;nm.add_hidden(ss.mkdel(this,function(){this.$5=false;if(ss.isValue(nl.get_customColor())){this.$1.update(false,false,nl.get_customColor())}}));this.$5=true;nm.show()},$0:function(){this.$2$1()}});var db=global.tab.ColorOptionEffectUberViewTemplate=ss.mkType(a,'tab.ColorOptionEffectUberViewTemplate',function(){this.autoButton=null;this.noneButton=null;this.colorPicker=null;this.moreColorsButtonArea=null;spiff.Template.call(this,$("<div class='tabAuthColorOptionEffectUberContainer'>\n            <div class='tabAuthColorOptionEffectAutoButton'></div>\n            <div class='tabAuthColorOptionEffectNoneButton'></div>\n            <div class='tabAuthColorOptionEffectColorPicker'></div>\n            <div class='tabAuthColorOptionsEffectMoreButton'></div>\n        </div>"));this.autoButton=this.getElementBySelector('.tabAuthColorOptionEffectAutoButton');this.noneButton=this.getElementBySelector('.tabAuthColorOptionEffectNoneButton');this.colorPicker=this.getElementBySelector('.tabAuthColorOptionEffectColorPicker');this.moreColorsButtonArea=this.getElementBySelector('.tabAuthColorOptionsEffectMoreButton')});var dc=global.tab.ColorOptionEffectUpdater=ss.mkType(a,'tab.ColorOptionEffectUpdater',function(nk,nl){this.marksCardTabEncodingModel=null;this.$1=null;this.$0=false;this.$1$1=null;this.marksCardTabEncodingModel=nk;this.$1=nl;this.$0=false},{add_styleSpecUpdated:function(nk){this.$1$1=ss.delegateCombine(this.$1$1,nk)},remove_styleSpecUpdated:function(nk){this.$1$1=ss.delegateRemove(this.$1$1,nk)},allowUpdates:function(){this.$0=true},update:function(nk,nl,nm){if(!this.$0){return}if(this.$1.isAuto===nk&&this.$1.isNone===nl&&ss.referenceEquals(this.$1.color,nm.toRgba())){return}this.$1.isAuto=nk;this.$1.isNone=nl;this.$1.color=nm.toRgba();this.$1$1();this.callPaneClientCommand(nk,nl,nm)},callPaneClientCommand:null});var dd=global.tab.ColorOptionViewModel=ss.mkType(a,'tab.ColorOptionViewModel',function(nk){this.$1=null;this.$2=null;this.$0=null;spiff.BaseViewModel.call(this);this.$1=nk;this.$2=new ds(this.$1);this.$0=new cW(this.$1);this.$1.add_newMarksCardTabEncoding(ss.mkdel(this,this.handleUpdatedMarksCardTabEncoding));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_newMarksCardTabEncoding(ss.mkdel(this,this.handleUpdatedMarksCardTabEncoding))})))},{get_marksCardTabEncodingModel:function(){return this.$1},get_colorTransparencyControlViewModel:function(){return this.$2},get_colorOptionEffectsViewModel:function(){return this.$0},handleUpdatedMarksCardTabEncoding:function(){},dispose:function(){this.$2.dispose();this.$0.dispose();spiff.BaseViewModel.prototype.dispose.call(this)}});var de=global.tab.ColorPaletteGroup=ss.mkType(a,'tab.ColorPaletteGroup',function(nk){this.paletteItems=null;this.paletteItems=_.map(nk,function(nl){return new df(nl)})});var df=global.tab.ColorPaletteItem=ss.mkType(a,'tab.ColorPaletteItem',function(nk){this.colorPaletteId=null;this.colorPaletteName=null;this.type=null;this.colors=null;this.colorPaletteId=nk.colorPaletteId;this.colorPaletteName=nk.colorPaletteName;this.type=nk.colorPaletteType;this.colors=nk.colors});var dg=global.tab.ColorPalettePageTemplate=ss.mkType(a,'tab.ColorPalettePageTemplate',function(){this.automaticPalette=null;this.paletteColumns=null;this.paletteColumnList=null;spiff.Template.call(this,$("<span class='tabColorPalettePage'>\n    <div class='tabColorSpecialPalette tabColorAutomaticPalette tabColorPalette'>\n        <div class='tabPaletteBorder'></div>\n    </div>\n    <div class='tabColorPalettePageColumns'>\n        <span class='tabColorPalettePageColumn0'></span>\n        <span class='tabColorPalettePageColumn1'></span>\n    </div>\n</span>"));this.automaticPalette=this.getElementBySelector('.tabColorAutomaticPalette');this.paletteColumns=this.getElementBySelector('.tabColorPalettePageColumns');this.paletteColumnList=new Array(2);for(var nk=0;nk<this.paletteColumnList.length;++nk){this.paletteColumnList[nk]=this.getElementBySelector('.tabColorPalettePageColumn'+nk.toString())}});var dh=global.tab.ColorPalettePickerTemplate=ss.mkType(a,'tab.ColorPalettePickerTemplate',function(){this.palettePickerWindow=null;this.palettePickerPageContainer=null;this.leftButtonArea=null;this.rightButtonArea=null;this.leftButton=null;this.rightButton=null;this.pageControls=null;spiff.Template.call(this,$("<div class='tabColorPalettePicker'>\n        <div class='tabAuthLeftButtonArea'>\n            <div class='tabAuthPalettePickerLeftButton'></div>\n        </div>\n        <div class='tabColorPalettePickerWindow'>\n            <div class='tabColorPalettePickerPageContainer'></div>\n        </div>\n        <div class='tabAuthRightButtonArea'>\n            <div class='tabAuthPalettePickerRightButton'></div>\n        </div>\n        <div class='tabPalettePageControlsArea'>\n            <div class='tabPalettePageControls'></div>\n        </div>\n    </div>"));this.palettePickerWindow=this.getElementBySelector('.tabColorPalettePickerWindow');this.palettePickerPageContainer=this.getElementBySelector('.tabColorPalettePickerPageContainer');this.leftButtonArea=this.getElementBySelector('.tabAuthLeftButtonArea');this.rightButtonArea=this.getElementBySelector('.tabAuthRightButtonArea');this.leftButton=this.getElementBySelector('.tabAuthPalettePickerLeftButton');this.rightButton=this.getElementBySelector('.tabAuthPalettePickerRightButton');this.pageControls=this.getElementBySelector('.tabPalettePageControls')},{get_pages:function(){return this.getElementsBySelector('.tabColorPalettePage')},get_palettes:function(){return this.getElementsBySelector('.tabColorPalette')},get_automaticPalette:function(){return this.getElementsBySelector('.tabColorAutomaticPalette')},get_warningPalettesPageObject:function(){return this.getElementsBySelector('.'+'tabColorPaletteWarning')},get_warningPalettePageLink:function(){return this.getElementsBySelector('.'+'tabPaletteWarningPageLink')},clear:function(){this.get_pages().remove()},clearSelection:function(){this.get_automaticPalette().removeClass('tabPaletteSelected');this.get_palettes().removeClass('tabPaletteSelected');this.get_warningPalettesPageObject().removeClass('tabPaletteSelected')}});var di=global.tab.ColorPalettePickerView=ss.mkType(a,'tab.ColorPalettePickerView',function(nk){this.dom=null;this.colorPalettePickerViewModel=null;ss.makeGenericType(spiff.BaseView$1,[dj]).call(this,nk,new dh);this.colorPalettePickerViewModel=nk;this.dom=this.get_template();this.$b();this.setupNavigationControl();this.setupPageControls()},{setupPageControls:function(){for(var nk=0;nk<this.colorPalettePickerViewModel.get_pages().length;nk++){var nl=$('<a></a>').data('pageNo',nk);this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(nl.get(0),ss.mkdel(this,function(nm){var nn=$(nm.target);this.colorPalettePickerViewModel.set_currentPageIndex(nn.data()['pageNo']);this.dom.pageControls.children('a.tabPageHighlight').removeClass('tabPageHighlight');nn.addClass('tabPageHighlight')})));if(nk===this.colorPalettePickerViewModel.get_currentPageIndex()){nl.addClass('tabPageHighlight')}if(nk===this.colorPalettePickerViewModel.warningPageIndex){nl.addClass('tabPaletteWarningPageLink')}this.dom.pageControls.append(nl)}},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[dj]).prototype.onViewModelPropertyChanged.call(this,nk,nl);if(nl.get_propertyName()==='CurrentPage'){this.handleCurrentPageChange()}else if(nl.get_propertyName()==='SelectedPalette'){this.dom.clearSelection();this.dom.domRoot.find('.tabColorPalette').each(ss.mkdel(this,function(nm,nn){var no=$(nn);var np=no.data('paletteId');if(ss.isValue(np)&&ss.referenceEquals(np,this.colorPalettePickerViewModel.get_selectedPalette())){no.addClass('tabPaletteSelected')}}))}else if(nl.get_propertyName()==='PageRemoved'){if(ss.isValue(this.dom.get_warningPalettePageLink())&&this.dom.get_warningPalettePageLink().length>0){this.dom.get_warningPalettePageLink().hide()}}},updateNavigationButtons:function(){this.dom.leftButton.toggleClass('disabled',this.colorPalettePickerViewModel.get_isAtFisrtPage());this.dom.rightButton.toggleClass('disabled',this.colorPalettePickerViewModel.get_isAtLastPage())},handleCurrentPageChange:function(){var nk=this.colorPalettePickerViewModel.get_currentPageIndex();this.dom.pageControls.find('a').each(ss.mkdel(this,function(nl,nm){var nn=$(nm);var no=nn.data();if(ss.isNullOrUndefined(no)){return}var np=no['pageNo'];var nq=isFinite(np)&&np===this.colorPalettePickerViewModel.get_currentPageIndex();nn.toggleClass('tabPageHighlight',nq)}));this.scrollToPageNo(nk);this.updateNavigationButtons()},$b:function(){this.dom.clear();var nk=0;var nl=this.colorPalettePickerViewModel.get_pages();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new dg;if(nn.get_isWarningPage()){var np=nn.get_warningPageModel();no.domRoot.empty();var nq=$('<div></div>').addClass('tabColorSpecialPalette').addClass('tabColorPaletteWarning').addClass('tabPaletteGroupSelected');nq.append($('<div></div>'));nq.append($('<span></span>').text(np.get_title()));nq.data('paletteId',np.get_selectedPalette());var nr=$('<div></div>').addClass('tabPaletteNote').text(np.get_message());nq.append(nr);no.domRoot.append(nq)}else{var ns=nn;var nt=this.$9(no);if(nk!==0){nt.hide()}for(var nu=0;nu<no.paletteColumnList.length;++nu){this.$7(ns.get_paletteGroups()[nu].paletteItems,no.paletteColumnList[nu],ns.get_paletteGroups()[nu].paletteItems.length)}}this.dom.palettePickerPageContainer.append(no.domRoot);nk++}this.initPaletteEventHandlers();this.updateNavigationButtons()},$9:function(nk){var nl=nk.automaticPalette;nl.data('paletteId','');nl.toggleClass('tabPaletteSelected',this.colorPalettePickerViewModel.get_automaticPaletteSelected());nl.append($('<span></span>').text(tab.Strings.AuthColorPaletteAutomatic));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(nl.get(0),ss.mkdel(this,function(nm){this.selectPaletteElement(nl);this.dom.clearSelection();nl.addClass('tabPaletteSelected');this.colorPalettePickerViewModel.set_automaticPaletteSelected(true)})));return nl},$7:function(nk,nl,nm){var nn=null;for(var no=0;no<nk.length;no++){if(ss.imod(no,nm)===0){nn=$('<span></span>').addClass('tabColorPaletteGroup').appendTo(nl)}this.$8(nk[no],nn)}},$8:function(nk,nl){var nm=$('<div></div>').addClass('tabColorPalette').toggleClass('tabPaletteSelected',ss.referenceEquals(nk.colorPaletteId,this.colorPalettePickerViewModel.get_selectedPalette())).addClass('tabAuthPalette-'+nk.colorPaletteId).data('paletteId',nk.colorPaletteId);nm.append($('<div></div>').addClass('tabPaletteBorder')).appendTo(nl);tab.DomUtil.setNativeTooltip(nm,nk.colorPaletteName)},$a:function(nk){var nl=nk.get();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no={$:$(nn)};this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(no.$.get(0),ss.mkdel({palette:no,$this:this},function(np){this.$this.selectPaletteElement(this.palette.$)})))}},initPaletteEventHandlers:function(){this.$a(this.dom.get_palettes());this.$a(this.dom.get_warningPalettesPageObject())},selectPaletteElement:function(nk){this.dom.clearSelection();nk.addClass('tabPaletteSelected');this.colorPalettePickerViewModel.set_selectedPalette(nk.data('paletteId'))},scrollToOffset:function(nk,nl){tab.DomUtil.setElementPosition(this.dom.palettePickerPageContainer,nk,0,(nl?'400ms':'0'),null)},scrollOffsetForPageNo:function(nk){return-nk*tab.DoubleUtil.roundToInt(this.dom.get_pages().first().width())},scrollToPageNo:function(nk){this.scrollToOffset(this.scrollOffsetForPageNo(nk),true)},setupNavigationControl:function(){this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.leftButtonArea.get(0),ss.mkdel(this,function(nk){this.colorPalettePickerViewModel.set_currentPageIndex(this.colorPalettePickerViewModel.get_currentPageIndex()-1)})));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.rightButtonArea.get(0),ss.mkdel(this,function(nk){this.colorPalettePickerViewModel.set_currentPageIndex(this.colorPalettePickerViewModel.get_currentPageIndex()+1)})))}});var dj=global.tab.ColorPalettePickerViewModel=ss.mkType(a,'tab.ColorPalettePickerViewModel',function(nk,nl,nm){this.$4=null;this.$6=[];this.$5=0;this.$7=null;this.$2$1=0;this.warningPageIndex=0;spiff.BaseViewModel.call(this);this.$7=nk;this.set_selectedPaletteflags(nl);this.$5=0;this.$4=nm;this.warningPageIndex=-1;this.$1()},{get_selectedPalette:function(){return this.$7},set_selectedPalette:function(nk){if(ss.referenceEquals(nk,this.$7)){return}if(this.$2()||this.$0()){this.$3()}this.$7=nk;this.notifyPropertyChanged('SelectedPalette')},get_automaticPaletteSelected:function(){return ss.isNullOrEmptyString(this.$7)||ss.referenceEquals(this.$7,tab.Strings.AuthColorPaletteAutomatic)},set_automaticPaletteSelected:function(nk){if(nk){this.$7=''}},get_selectedPaletteflags:function(){return this.$2$1},set_selectedPaletteflags:function(nk){this.$2$1=nk},get_currentPageIndex:function(){return this.$5},set_currentPageIndex:function(nk){var nl=Math.min(Math.max(0,nk),this.$6.length-1);if(nl!==this.$5){this.$5=nl;this.notifyPropertyChanged('CurrentPage')}},get_isAtLastPage:function(){return this.get_currentPageIndex()===this.$6.length-1},get_isAtFisrtPage:function(){return this.get_currentPageIndex()===0},get_pages:function(){return this.$6},get_currentPage:function(){return this.$6[this.$5]},get_paletteCollectionModel:function(){return tab.ApplicationModel.get_instance().get_colorPalettes()},$1:function(){this.$6=[];var nk=Math.ceil(this.$4.length/2);for(var nl=0;nl<nk;nl++){var nm=new iX;var nn=nl*2;for(var no=nn;no<nn+2;no++){nm.addGroup(this.get_paletteCollectionModel().colorPaletteGroup(this.$4[no]))}this.$6.push(nm)}if(this.$2()||this.$0()){var np=(this.$2()?tab.Strings.AuthColorPaletteLegacy:this.get_selectedPalette());var nq=(this.$2()?tab.Strings.LegacyPaletteUnselectedNote:tab.Strings.CustomPaletteGroupUnselectedNote);var nr=new iX;nr.set_warningPageModel(new mp(np,nq,this.get_selectedPalette()));var ns=nr;this.$6.push(ns);this.warningPageIndex=this.$6.length-1}},$0:function(){return!this.get_automaticPaletteSelected()&&!_.any(this.$4,ss.mkdel(this,function(nk){return _.any(nk.palettesIndices,ss.mkdel(this,function(nl){var nm=this.get_paletteCollectionModel().get_colorPalettes()[nl];return ss.referenceEquals(nm.colorPaletteId,this.get_selectedPalette())}))}))},$2:function(){return(this.get_selectedPaletteflags()&dj.getPaletteflagValue('palette-flag-legacy'))!==0},$3:function(){if(this.warningPageIndex>-1&&this.$6.length>this.warningPageIndex){ss.removeAt(this.$6,this.warningPageIndex);this.warningPageIndex=-1}else{}this.notifyPropertyChanged('PageRemoved')}},{getPaletteflagValue:function(nk){return dj.$1[nk]}});var dk=global.tab.ColorPaletteUtil=ss.mkType(a,'tab.ColorPaletteUtil',null,null,{renderCustomPaletteIcon:function(nk,nl){var nm={className:'tab-AuthPaletteIcon tab-AuthCustomPalette',key:'tab-AuthPaletteIcon'};if(nk.colors.length<=0){return spiff.DOMElements.div(nm)}var nn={};nn['0.0']=nk.colors[0];for(var no=1;no<nk.colors.length;no++){var np=no/(nk.colors.length-1);nn[np.toString()]=nk.colors[no]}return spiff.DOMElements.div(nm,React.createElement(jv,{stepped:nl,colors:nn,key:'tab-AuthPaletteIconRamp'}))}});var dl=global.tab.ColorPickerColorProvider=ss.mkType(a,'tab.ColorPickerColorProvider',function(){this.$0=null;this.$0=[]},{get_blackAndWhiteColors:function(){return _.map(dl.$1,function(nk){return tab.ColorModel.fromColorCode(nk)})},get_lightGrayColors:function(){return _.map(dl.$3,function(nk){return tab.ColorModel.fromColorCode(nk)})},get_darkGrayColors:function(){return _.map(dl.$2,function(nk){return tab.ColorModel.fromColorCode(nk)})},get_presetColors1:function(){return _.map(dl.$4,function(nk){return tab.ColorModel.fromColorCode(nk)})},get_presetColors2:function(){return _.map(dl.$5,function(nk){return tab.ColorModel.fromColorCode(nk)})},get_customUserColors:function(){return this.$0},checkAndAddCustomColor:function(nk){if(nk===null){return}var nl=nk.toRgbHex().toString().toUpperCase();if(ss.contains(dl.$1,nl)||ss.contains(dl.$2,nl)||ss.contains(dl.$3,nl)||ss.contains(dl.$4,nl)||ss.contains(dl.$5,nl)||ss.contains(this.$0,nk)){return}this.$0.push(nk)}});var dm=global.tab.ColorPickerTemplate=ss.mkType(a,'tab.ColorPickerTemplate',function(){this.black=null;this.darkGrays=null;this.white=null;this.lightGrays=null;this.preset1=null;this.preset2=null;this.userColors=null;this.$1=null;spiff.Template.call(this,$("<div class='tabColorPicker'>\n                <div class='tabColorPickerContainer'>\n                    <div class='tabColorPickerBlack'></div>\n                    <div class='tabColorPickerDarkGrays'></div>\n                    <div class='tabColorPickerWhite'></div>\n                    <div class='tabColorPickerLightGrays'></div>\n                    <div class='tabColorPickerPreset1'></div>\n                    <div class='tabColorPickerPreset2'></div>\n                    <div class='tabColorPickerUserContainer'></div>\n                </div>\n            </div>"));this.black=this.getElementBySelector('.tabColorPickerBlack');this.white=this.getElementBySelector('.tabColorPickerWhite');this.darkGrays=this.getElementBySelector('.tabColorPickerDarkGrays');this.lightGrays=this.getElementBySelector('.tabColorPickerLightGrays');this.preset1=this.getElementBySelector('.tabColorPickerPreset1');this.preset2=this.getElementBySelector('.tabColorPickerPreset2');this.userColors=this.getElementBySelector('.tabColorPickerUserContainer');this.$1=this.getElementBySelector('.tabColorPickerContainer')},{addColorTransparencyControlContainer:function(){return $("<div class='tabAuthTransparencyControlContainer'></div>").appendTo(this.$1)},removeAllColors:function(){this.black.children().remove();this.darkGrays.children().remove();this.white.children().remove();this.lightGrays.children().remove();this.preset1.children().remove();this.preset2.children().remove();this.userColors.children().remove()}});var dn=global.tab.ColorPickerView=ss.mkType(a,'tab.ColorPickerView',function(nk){this.$i=null;this.$g=null;this.$f=null;this.$h=null;ss.makeGenericType(spiff.BaseView$1,[gL]).call(this,nk,new dm);this.$i=this.get_template();this.$g=nk;this.$g.add_enabledChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_enabledChanged(ss.mkdel(this,this.$e))})));this.disposables.add(ss.mkdel(this,function(){this.$c()}));this.$a();if(this.$g.get_isTransparencyVisible()){this.$b()}},{get_currentColorObject:function(){return this.$h},clearSelectedColor:function(){if(ss.isValue(this.$h)){this.$h.toggleClass('tabColorSelected',false)}this.$h=null;this.$g.set_selectedColor(null)},updateSelectedColor:function(nk){this.$g.set_selectedColor(nk);this.$h=null;this.$e()},$c:function(){this.$h=null;this.$f=tab.MiscUtil.dispose(this.$f)},$e:function(){this.$c();this.$i.removeAllColors();this.$a()},$b:function(){var nk=tab.ObjectRegistry.newView$1(dr).call(null,dr,[this.$g.get_colorTransparencyControlViewModel()]);nk.addToDom(this.$i.addColorTransparencyControlContainer());this.disposables.add$1(nk)},$a:function(){this.$i.domRoot.toggleClass('disabled',!this.$g.get_enabled());this.$8(this.$g.get_colorProvider().get_blackAndWhiteColors()[0],$('<span></span>').addClass('tabColorPickerGroup').appendTo(this.$i.black));this.$7(this.$g.get_colorProvider().get_darkGrayColors(),this.$i.darkGrays,this.$g.get_colorProvider().get_darkGrayColors().length);this.$8(this.$g.get_colorProvider().get_blackAndWhiteColors()[1],$('<span></span>').addClass('tabColorPickerGroup').appendTo(this.$i.white));this.$7(this.$g.get_colorProvider().get_lightGrayColors(),this.$i.lightGrays,this.$g.get_colorProvider().get_lightGrayColors().length);this.$7(this.$g.get_colorProvider().get_presetColors1(),this.$i.preset1,3);this.$7(this.$g.get_colorProvider().get_presetColors2(),this.$i.preset2,3);this.$9(this.$g.get_colorProvider().get_customUserColors(),this.$i.userColors,dl.columns)},$8:function(nk,nl){if(ss.isNullOrUndefined(this.$f)){this.$f=[]}var nm=$('<div></div>').addClass('tabColorPickerColor').css('background-color',nk.toRgb()).append($('<div></div>').addClass('tabColorPickerColorBorder')).appendTo(nl);if(ss.isValue(this.$g.get_selectedColor())&&ss.equals(nk.toRgb(),this.$g.get_selectedColor().toRgb())){this.$d(nm)}if(this.$g.get_enabled()){this.$f.push(spiff.TableauClickHandler.targetAndClick(nm[0],ss.mkdel(this,function(){this.$d(nm);var nn;if(this.$g.get_isTransparencyVisible()){nn=tab.ColorModel.fromColorModelPlusAlpha(nk,this.$g.get_colorTransparencyControlViewModel().get_currentFraction())}else{nn=nk}this.$g.set_selectedColor(nn)})))}},$d:function(nk){if(ss.isValue(this.$h)){this.$h.toggleClass('tabColorSelected',false)}this.$h=nk.toggleClass('tabColorSelected',true)},$7:function(nk,nl,nm){var nn=null;for(var no=0;no<nk.length;no++){if(ss.imod(no,nm)===0){nn=$('<span></span>').addClass('tabColorPickerGroup').appendTo(nl)}this.$8(nk[no],nn)}},$9:function(nk,nl,nm){var nn=null;for(var no=0;no<nk.length;no++){if(ss.imod(no,nm)===0){nn=$('<div></div>').addClass('tabColorPickerUser').appendTo(nl)}var np=$('<span></span>').addClass('tabColorPickerGroup').appendTo(nn);this.$8(nk[no],np)}}});var dp=global.tab.ColorPickerViewModel=ss.mkType(a,'tab.ColorPickerViewModel',function(nk,nl){this.$3=null;this.$1=null;this.$2=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$2=true;this.$0(new dl);this.set_marksCardTabEncodingModel(nk);if(nl){this.$1=new ds(this.get_marksCardTabEncodingModel());this.disposables.add$1(this.$1)}},{add_enabledChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_enabledChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_colorProvider:function(){return this.$2$2},$0:function(nk){this.$2$2=nk},get_marksCardTabEncodingModel:function(){return this.$2$3},set_marksCardTabEncodingModel:function(nk){this.$2$3=nk},get_colorTransparencyControlViewModel:function(){return this.$1},get_viewType:function(){return dn},get_selectedColor:function(){return this.$3},set_selectedColor:function(nk){if(tab.ColorModel.isEqual(this.$3,nk,true)){return}this.get_colorProvider().checkAndAddCustomColor(nk);this.$3=nk;this.sendColorUpdate()},get_isTransparencyVisible:function(){return ss.isValue(this.$1)},get_enabled:function(){return this.$2},set_enabled:function(nk){if(this.$2===nk){return}this.$2=nk;this.raiseActionEvent(this.$2$1)},get_viewModel:function(){return this},update:function(nk){this.get_colorProvider().checkAndAddCustomColor(nk);this.$3=nk},sendColorUpdate:function(){tab.PaneClientCommands.setDefaultColor(this.get_marksCardTabEncodingModel(),this.$3)},updateUberPopupViewModel:function(nk){},disposeViewModel:function(){this.dispose()}});var dq=global.tab.ColorTransparencyControlTemplate=ss.mkType(a,'tab.ColorTransparencyControlTemplate',function(){spiff.Template.call(this,$("\n            <div class='tabAuthTransparencyControl'>\n                <div class='tabAuthTransparencyLabel'></div>\n                <div class='tabAuthTransparencyControlHolder'></div>\n            </div>"));this.get_label().append($('<span></span>').text(tab.Strings.AuthColorTransparencyLabel))},{get_label:function(){return this.getElementBySelector('.tabAuthTransparencyLabel')},get_controlHolder:function(){return this.getElementBySelector('.tabAuthTransparencyControlHolder')}});var dr=global.tab.ColorTransparencyControlView=ss.mkType(a,'tab.ColorTransparencyControlView',function(nk){ss.makeGenericType(spiff.BaseView$1,[gM]).call(this,nk,new dq)},{get_controlTemplate:function(){return this.get_template()},tabIndex:function(nk){this.get_viewModel().set_tabIndex(nk)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ds,spiff.HorizontalSliderComponent,Object])).call(null,[this.get_viewModel()]);nk.addToDom(this.get_controlTemplate().get_controlHolder());this.disposables.add$1(nk)}});var ds=global.tab.ColorTransparencyControlViewModel=ss.mkType(a,'tab.ColorTransparencyControlViewModel',function(nk){this.$6=null;this.$4=false;this.$7=null;this.$5=null;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=nk;this.$4=true;this.$6.add_newMarksCardTabEncoding(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$3))})))},{add_sliderFractionUpdated:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_sliderFractionUpdated:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},add_enabledChanged:function(nk){this.$3$2=ss.delegateCombine(this.$3$2,nk)},remove_enabledChanged:function(nk){this.$3$2=ss.delegateRemove(this.$3$2,nk)},get_viewType:function(){return dr},get_viewModel:function(){return this},get_marksCardTabEncodingModel:function(){return this.$6},get_alphaLevel:function(){if(!ss.isValue(this.$5)){this.$5=this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().alphaLevel}return ss.unbox(this.$5)},set_alphaLevel:function(nk){var nl=Math.round(nk);var nm=Math.round(this.get_alphaLevel());if(nl!==nm){this.$5=nl;tab.PaneClientCommands.setColorAlphaLevel(this.get_marksCardTabEncodingModel(),nl)}},get_currentFraction:function(){return tab.ColorModel.alpha255ToFraction(this.get_alphaLevel())},get_enabled:function(){return this.$4},set_enabled:function(nk){if(this.$4===nk){return}this.$4=nk;this.incrementProps();this.raiseActionEvent(this.$3$2)},get_tabIndex:function(){return this.$7},set_tabIndex:function(nk){if(ss.referenceEquals(this.$7,nk)){return}this.$7=nk;this.incrementProps()},setCurrentFraction:function(nk){this.set_alphaLevel(tab.ColorModel.alphaFractionTo255(tab.DoubleUtil.truncateTwoDecimalPlaces(nk)))},$3:function(){if(!ss.staticEquals(this.$3$1,null)){this.$3$1(this.get_currentFraction())}},createInitialProps:function(){return ds.getDefaultProps(this.get_currentFraction(),this.get_enabled(),ss.mkdel(this,function(nk){this.setCurrentFraction(nk/100)}),this.$7)},createUpdatedProps:function(){return{disabled:!this.$4,tabIndex:this.$7}}},{getDefaultProps:function(nk,nl,nm,nn){return{minValue:0,maxValue:100,initialValue:ss.trunc(tab.DoubleUtil.multiplyBy100(nk)),disabled:!nl,width:100,onValueChanged:nm,showValueTextBox:true,showPercentageSign:true,tabIndex:nn}}});var dt=global.tab.CommandPredicates=ss.mkType(a,'tab.CommandPredicates',null,null,{$0:function(nk,nl,nm){var nn=nk+':'+nl;return ss.isValue(nm.get_command())&&ss.startsWithString(nm.get_command(),nn)},isDocCommand:function(nk,nl){return dt.$0('tabdoc',nk.cmd,nl)},isItemType:function(nk,nl){return ss.equals(nk,nl.get_commandsType())},hasIconResource:function(nk,nl){return ss.equalsT(nk,nl.get_iconRes())},isServerCommand:function(nk,nl){return dt.$0('tabsrv',nk.cmd,nl)}});var du=global.tab.CompoundTableCalcViewModel=ss.mkType(a,'tab.CompoundTableCalcViewModel',function(nk){this.$6=null;this.$8=null;this.$9=null;this.$7=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$6=nk;this.$6.add_compoundTableCalcUpdated(ss.mkdel(this,this.$3));var nl=[{ns:'tabdoc',cmd:'table-calc-edit'},{ns:'tabdoc',cmd:'table-calc-add'}];var nm=tab.ServerCommands.intercept(nl,ss.mkdel(this,function(nn){this.raiseActionEvent(this.$2$3);return 0}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_compoundTableCalcUpdated(ss.mkdel(this,this.$3));tab.ServerCommands.removeIntercept(nl,nm)})));if(this.$6.get_hasTableCalc()){this.$1();this.$7=true}},{add_tableCalcsUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_tableCalcsUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_tableCalcsClosed:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_tableCalcsClosed:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_activate:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_activate:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},get_hasTableCalc:function(){return this.$6.get_hasTableCalc()},get_hasSecondaryTableCalc:function(){return this.$6.get_hasSecondaryTableCalc()},get_allowSecondaryTableCalc:function(){return this.get_hasTableCalc()&&this.$6.get_allowSecondaryTableCalc()},get_primaryTableCalcViewModel:function(){return this.$8},get_secondaryTableCalcViewModel:function(){return this.$9},get_fieldCaption:function(){return this.$6.get_fieldCaption()},get_isCalcAssistanceEnabled:function(){return this.$6.get_isCalcAssistanceEnabled()},get_isCalcAssistanceWidgetDisabled:function(){return this.$6.get_calcAssistanceWidgetState()==='widget-state-disabled'},get_dialogPosition:function(){return this.$2$4},set_dialogPosition:function(nk){this.$2$4=nk},get_isActive:function(){return this.$7},set_isActive:function(nk){if(nk&&!this.$7){this.$0()}this.$7=nk},dispose:function(){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());spiff.BaseViewModel.prototype.dispose.call(this)},$4:function(){if(!this.$6.get_hasTableCalc()){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());return}if(ss.isNullOrUndefined(this.$8)){this.$8=lN.new$1(this.$6.get_primaryTableCalc())}this.get_primaryTableCalcViewModel().set_title((this.$6.get_hasSecondaryTableCalc()?tab.Strings.TableCalcPrimaryTitle:tab.Strings.TableCalcSingleTitle))},$5:function(){if(!this.$6.get_hasSecondaryTableCalc()){this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());return}if(ss.isNullOrUndefined(this.get_secondaryTableCalcViewModel())){this.$9=lN.new$1(this.$6.get_secondaryTableCalc());this.get_secondaryTableCalcViewModel().set_title(tab.Strings.TableCalcSecondaryTitle)}},$1:function(){this.$4();this.$5();this.raiseActionEvent(this.$2$1)},$2:function(){this.$8=tab.MiscUtil.dispose$1(this.get_primaryTableCalcViewModel());this.$9=tab.MiscUtil.dispose$1(this.get_secondaryTableCalcViewModel());this.raiseActionEvent(this.$2$2)},$0:function(){var nk=new tab.TableCalcDialogActivatedCmd;nk.set_uiBlocking('afterDelay');nk.invoke()},closeTableCalcs:function(){(new tab.TableCalcCloseCmd).invoke();this.$2()},$3:function(){if(this.get_hasTableCalc()){this.$1()}else{this.$2()}},addSecondaryTableCalc:function(){if(!this.get_hasSecondaryTableCalc()){var nk=new tab.TableCalcToggleSecondaryCalcCmd;nk.set_uiBlocking('immediately');nk.c['useSecondaryCalc']=true;nk.invoke().fail(function(nl){})}},removeSecondaryTableCalc:function(){if(this.get_hasSecondaryTableCalc()){var nk=new tab.TableCalcToggleSecondaryCalcCmd;nk.set_uiBlocking('immediately');nk.c['useSecondaryCalc']=false;nk.invoke().fail(function(nl){})}},setCalculationAssistanceState:function(nk){if(nk===this.get_isCalcAssistanceEnabled()){return}var nl=new tab.TableCalcToggleShowCalcAssistanceCmd;nl.c['isCalcAssistanceEnabled']=nk;nl.invoke()}},{new$1:function(nk){return new du(nk)}});var dv=global.tab.ConfirmationCommandRedirectHandler=ss.mkType(a,'tab.ConfirmationCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['confirmationPresModel'.toString()];var nn=$('<div></div>').append($('<div></div>').text(nm.confirmationMsg).css('white-space','pre-wrap'));var no=nn.html();tab.ConfirmationViewModel.showConfirmation(no,function(np){dv.$2(np,nl,nm)});return nl.promise()},$1:function(nk){var nl=$.Deferred();var nm=nk['confirmationPresModel'.toString()];tab.ConfirmationViewModel.showWarningConfirmationWithOkCancel(nm.confirmationMsg,function(nn){dv.$2(nn,nl,nm)});return nl.promise()},$2:function(nk,nl,nm){var nn=((nk==='confirm')?nm.acceptSimpleCommandModel:nm.declineSimpleCommandModel);if(ss.isNullOrUndefined(nn)){nl.resolve();return}var no=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nn).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(no,'immediately',tab.CommandUtils.createCommandRedirectSuccessHandler(nl),function(){nl.reject()})}});var dw=global.tab.ContainerGuideComponent=ss.mkType(a,'tab.ContainerGuideComponent',function(nk){React.Component.call(this,nk)},{render:function(){var nk={className:'tab-dashContainerGuideContainer'};var nl='__BORDER__';var nm=spiff.DOMElements.rect({x:this.props.containerGuide.borderRect.x+2,y:this.props.containerGuide.borderRect.y+2,width:this.props.containerGuide.borderRect.w-2*2,height:this.props.containerGuide.borderRect.h-2*2,className:'tab-dashContainerGuideBorder',key:nl});var nn=this.props.containerGuide.lineList;var no=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,nn,[nl]);var np=_.map(nn,ss.mkdel(this,function(nr,ns){return spiff.DOMElements.line({x1:nr.pointsF[0],y1:nr.pointsF[1],x2:nr.pointsF[2],y2:nr.pointsF[3],strokeDasharray:10+','+5,className:'tab-dashContainerGuideLine',key:no[ns]})}));var nq=ss.arrayClone(np);ss.insert(nq,0,nm);return spiff.DOMElements.svg(nk,nq)}});var dx=global.tab.ContainerGuideProps=ss.mkType(a,'tab.ContainerGuideProps',function(){this.containerGuide=null});var dy=global.tab.ContainerResizeDragInstance=ss.mkType(a,'tab.ContainerResizeDragInstance',function(nk,nl,nm,nn,no){this.viewModel=null;spiff.MoveDragInstance.call(this,nk,nm,nn,no);this.viewModel=nl});var dz=global.tab.ContainerResizeViewModel=ss.mkType(a,'tab.ContainerResizeViewModel',function(nk,nl){this.$c=null;this.$b=null;this.$m=null;this.$f=0;this.$e=0;this.$a=null;this.$d=false;this.$h=0;this.$9=0;this.$8=null;this.$i=null;this.$g=null;this.$l=false;this.$j=0;this.$k=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$c=nk;this.$b=nl;this.$m=$.Deferred();this.$k=[];this.$9=0},{startDrag:function(nk,nl,nm){var nn=tab.DashboardZoneCommands.getZoneResizeInfo(nk.x,nk.y);nn.done(ss.mkdel(this,function(no){var np=no.zoneResize;if(!np.isValid){if(!ss.staticEquals(nm,null)){nm()}this.$m.reject();return}this.$5(np,nk);this.$m.resolve();this.incrementProps();tab.SelectionClientCommands.clearActiveZone()}));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$3));return new dy(nl,this,ss.mkdel(this,this.$7),ss.mkdel(this,this.$4),null)},getPointOnEdge:function(nk,nl){switch(nl){case 3:{return{x:nk.get_x()+ss.idiv(nk.get_width(),2),y:nk.get_y()+nk.get_height()}}case 0:{return{x:nk.get_x(),y:nk.get_y()+ss.idiv(nk.get_height(),2)}}case 1:{return{x:nk.get_x()+nk.get_width(),y:nk.get_y()+ss.idiv(nk.get_height(),2)}}case 2:{return{x:nk.get_x()+ss.idiv(nk.get_width(),2),y:nk.get_y()}}}return{x:0,y:0}},createInitialProps:function(){return{dashboardGeometry:this.$b}},createUpdatedProps:function(){if(this.$m.state()!=='resolved'){return null}return{edge:this.$g,dragHorz:this.$d,position:this.$h,splitOnEdgeSnap:this.$l,snapPoints:this.$k,currentSnapPoint:this.$a,container:this.$8}},$5:function(nk,nl){var nm=this.$c.getZone(nk.zoneId);var nn=null;if(ss.isValue(nm)){nn={x:nm.get_x(),y:nm.get_y(),h:nm.get_height(),w:nm.get_width()};if(nk.isHorizontal){nk.zoneEdgePix.y=Math.max(nn.y,nk.zoneEdgePix.y);nk.zoneEdgePix.h=Math.min(nn.h+nn.y-nk.zoneEdgePix.y,nk.zoneEdgePix.h)}else{nk.zoneEdgePix.x=Math.max(nn.x,nk.zoneEdgePix.x);nk.zoneEdgePix.w=Math.min(nn.w+nn.x-nk.zoneEdgePix.x,nk.zoneEdgePix.w)}}this.$9=nk.zoneId;this.$f=nk.minPosition;this.$e=nk.maxPosition;this.$i=nk.zoneEdgePp;this.$g=nk.zoneEdgePix;this.$8=(nk.showParent?nn:null);this.$d=nk.isHorizontal;this.$h=(this.$d?nl.x:nl.y);this.$a=null;this.$l=nk.splitOnEdgeSnap;this.$j=nk.snapDistance;this.$k=ss.arrayClone(nk.snapPoints);this.$k.filter(ss.mkdel(this,function(no){return no.snapLocation>=this.$f&&no.snapLocation<=this.$e}))},$7:function(nk){if(this.$m.state()!=='resolved'){return}var nl=(this.$d?(nk.pageX-this.$b().l):(nk.pageY-this.$b().t));nl=Math.max(this.$f,Math.min(this.$e,nl));nl=this.$6(nl);this.$h=nl;this.incrementProps()},$6:function(nk){this.$a=null;for(var nl=0;nl<this.$k.length;nl++){var nm=this.$k[nl];var nn=Math.abs(nm.snapLocation-nk);if(nn<=this.$j){this.$a=nm;return nm.snapLocation}}return nk},$4:function(nk){if(this.$m.state()!=='resolved'){return}var nl='edge-drag';if(ss.isValue(this.$a)){nl=this.$a.zoneEdgeMoveType}tab.DashboardZoneCommands.resizeTiledZone(this.$i,this.$g,this.$9,this.$h,this.$d,nl)},$3:function(nk){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$3));this.dispose()}});var dA=global.tab.ContainerSectionDropTarget=ss.mkType(a,'tab.ContainerSectionDropTarget',function(nk,nl,nm,nn,no){this.$i=null;this.$n=null;this.$l=null;this.$h=null;this.$o=null;this.$m=false;this.$k=null;this.$j='common';this.$l=nk;this.$n=nl;this.$h=nm;this.$i=nn;this.$o=no;EventUtils.DragDropManager.attachDropTarget(this.$h,this);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$7));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$6))},{get_feedbackType:function(){return'dropfeedbackuponentry'},$f:function(){return ss.isNullOrUndefined(this.$i)},$c:function(){return ss.isValue(this.$i)&&this.$i.isObject},$b:function(){return this.$n==='groups'},$d:function(){return this.$n==='parameters'},$e:function(){return this.$b()||this.$d()},$g:function(){return ss.isValue(this.$i)&&this.$i.isFolder&&!this.$i.isLayered},dispose:function(){EventUtils.DragDropManager.detachDropTarget(this.$h);EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$7));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$6))},canAccept:function(nk){if(!dA.$0(nk)){return false}if(tab.FeatureFlags.isEnabled('SchemaViewerEasyLODCalculation')&&nk.isCopyDrag){return false}if(this.$e()){if(this.$g()){return this.$k!==false}return this.$f()}else if(this.$f()||this.$g()){return true}else if(this.$c()&&this.$1(nk)){return true}return this.$k!==false},acceptDrop:function(nk){if(!this.canAccept(nk)){return $.Deferred().resolve(false)}var nl=ss.safeCast(nk,kR);if(this.$k===true&&nl.get_canDropToConvert()){this.$0(nl.get_originalFields(),this.$j);return $.Deferred().resolve(true)}if(this.$f()){this.$5(nl.get_originalFields());return $.Deferred().resolve(true)}if(this.$i.isFolder){this.$4(nl.get_originalFields(),this.$i.localName);return $.Deferred().resolve(true)}if(this.$c()&&this.$1(nl)){this.$8(nl.get_originalFields());return $.Deferred().resolve(true)}return $.Deferred().resolve(false)},dragExit:function(nk){this.$j='common';this.$2()},dragOver:function(nk){if(!this.canAccept(nk)){return null}this.$3(nk);this.$a(nk);return this},$3:function(nk){if(this.$m){return}this.$m=true;var nl=ss.safeCast(nk,cf);if(ss.isValue(nl)){nl.get_drop().always(ss.mkdel(this,function(nm){if(EventUtils.DragDropManager.get_isDragging()&&ss.referenceEquals(EventUtils.DragDropManager.get_currentTarget(),this)){this.$a(nm)}}))}},getDropCursor:function(nk){return spiff.CustomCursor.move},getDropTarget:function(nk){this.$j='common';if(ss.isValue(EventUtils.DragDropManager.get_lastDragEvent())&&ss.isValue(nk)&&nk.length>0&&ss.isValue(this.$o)&&this.$o.length>0){var nl=tab.DomUtil.getPageOffset$1(this.$o).top+this.$o.outerHeight(false)/2;var nm=EventUtils.DragDropManager.get_lastDragEvent().pageY<nl;this.$j=(nm?'dimensions':'measure')}return this},$1:function(nk){if(ss.isInstanceOfType(nk,kR)){return ss.safeCast(nk,kR).get_fieldsInfo().columnsInDrillPath!==0}return false},allDragFieldsAreFromThisContainer:function(nk){var nl=ss.safeCast(nk,kR);if(ss.isNullOrUndefined(nl)){return false}if(this.$f()&&this.$n==='common'){return nl.get_fieldsInfo().schemaCommonRootColumns===2}else if(this.$n==='groups'){return _.every(nl.get_originalFields(),function(nm){return nm.get_isGroup()})}else if(this.$n==='parameters'){return _.every(nl.get_originalFields(),function(nm){return nm.get_isParameter()})}return _.every(nl.get_originalFields(),ss.mkdel(this,function(nm){return ss.isValue(this.$i.find(nm.get_globalName()))}))},$7:function(nk){this.$k=this.allDragFieldsAreFromThisContainer(nk)},$6:function(nk){this.$m=false;this.$k=null;this.$j='common';this.$2()},$a:function(nk){var nl=ss.safeCast(nk,kR);if(ss.isNullOrUndefined(nl)||ss.isNullOrUndefined(this.$k)){return}if(this.$e()){if(this.$k===true&&this.$g()){this.$h.addClass('showMoveToZone')}}else if(this.$k===false&&ss.isValue(this.$i)&&this.$i.isFolder){this.$h.addClass('showMoveToZone')}if(this.$9(nl)){this.$o.addClass('showDroppable')}},$9:function(nk){if(ss.isNullOrUndefined(this.$o)){return false}if(this.$k!==true){return false}if(!nk.get_canDropToConvert()){return false}if(nk.get_fieldsInfo().drillPaths===2){return false}return true},$2:function(){if(ss.isValue(this.$o)){this.$o.removeClass('showDroppable')}this.$h.removeClass('showMoveToZone')},$0:function(nk,nl){if(nk.length>0){if(nl!=='dimensions'&&nl!=='measure'){var nm=nk[0];nl=((nm.get_defaultRole()==='dimension')?'measure':'dimensions')}kU.dropOnSchemaSection(this.$l,nk,nl,null)}},$4:function(nk,nl){kU.dropOnSchemaSection(this.$l,nk,this.$n,nl)},$5:function(nk){kU.dropOnSchemaSection(this.$l,nk,this.$n,'')},$8:function(nk){kU.dropOnSchemaSection(this.$l,nk,this.$n,'')}},{$0:function(nk){if(ss.isInstanceOfType(nk,kR)){return ss.safeCast(nk,kR).get_originalFields().length>0}return false}});var dB=global.tab.ContentZoneBordersComponent=ss.mkType(a,'tab.ContentZoneBordersComponent',function(nk){React.Component.call(this,nk)},{render:function(){var nk={className:'tab-dashZoneBordersContainer'};var nl=_.filter(this.props.borders,ss.mkdel(this,function(no){return!ss.contains(this.props.excludedZones,no.zoneId)}));var nm=spiff.ReactComponentExtensions.generateUniqueKeys(Object).call(null,nl,[]);var nn=_.map(nl,ss.mkdel(this,function(no,np){return spiff.DOMElements.rect({x:no.borderRect.x+2,y:no.borderRect.y+2,width:no.borderRect.w-2*2,height:no.borderRect.h-2*2,key:nm[np],className:'tab-dashZoneBorderPreview'})}));return spiff.DOMElements.svg(nk,nn)}});var dC=global.tab.ContentZoneBordersProps=ss.mkType(a,'tab.ContentZoneBordersProps',function(){this.borders=null;this.excludedZones=null});var dD=global.tab.ConvertDimMeasDropTarget=ss.mkType(a,'tab.ConvertDimMeasDropTarget',function(nk){this.$1=null;this.$1=nk},{get_feedbackType:function(){return'dropfeedbackuponentry'},acceptDrop:function(nk){if(!dD.$0(nk)){return $.Deferred().resolve(false)}var nl=ss.safeCast(nk,kR);if(nl.get_fieldsInfo().columnsInDrillPath!==0){this.$0(nl.get_originalFields());return $.Deferred().resolve(true)}dD.$1(nl.get_originalFields(),this.$1);return $.Deferred().resolve(true)},$0:function(nk){if(nk.length>0){var nl=nk[0];kU.dropOnSchemaSection(nl.get_dataSourceName(),nk,this.$1,null)}},getDropTarget:function(nk){return this},dragExit:function(nk){},dragOver:function(nk){return(dD.$0(nk)?this:null)},getDropCursor:function(nk){return spiff.CustomCursor.move}},{$0:function(nk){if(ss.isNullOrUndefined(nk)||!nk.get_readyToDrop()){return false}if(tab.FeatureFlags.isEnabled('SchemaViewerEasyLODCalculation')&&nk.isCopyDrag){return false}return ss.isInstanceOfType(nk,kR)},$1:function(nk,nl){if(nk.length>0){var nm=nk[0];if(nl!=='dimensions'&&nl!=='measure'){nl=((nm.get_defaultRole()==='dimension')?'measure':'dimensions')}kU.dropOnSchemaSection(nm.get_dataSourceName(),nk,nl,null)}}});var dE=global.tab.ConvertUnnamedFieldsDropTarget=ss.mkType(a,'tab.ConvertUnnamedFieldsDropTarget',function(){ft.call(this)},{dragOver:function(nk){return(this.canAccept(nk)?this:null)},dragExit:function(nk){},acceptDrop:function(nk){if(ss.isInstanceOfType(nk,Z)){var nl=$.Deferred();ss.safeCast(nk,Z).get_analyticsDragInfoPromise().done(ss.mkdel(this,function(nm){if(!this.canAccept(nk)){nl.reject(false);return}var nn=new tab.DropReferenceLineOnSchemaViewerCmd;nn.c['fn']=nm.fn;nn.c['refLineId']=nm.refLineId;nn.c['paneId']=nm.paneId;nn.c['worksheet']=tsConfig.current_sheet_name;nn.invoke().done(function(no){nl.resolve(true)}).fail(function(no){})})).fail(function(nm){nl.reject(false)});return nl}else if(ss.isInstanceOfType(nk,cf)){if(!this.canAccept(nk)){return $.Deferred().reject(false)}return tab.SchemaClientCommands.convertUnnamedFields(ss.safeCast(nk,cf).get_fieldNames()).pipe(function(nm){return ss.isValue(nm)})}else{return $.Deferred().reject(false)}},getDropCursor:function(nk){return spiff.CustomCursor.copy},getDropTarget:function(nk){return this},canAccept:function(nk){if(ss.isNullOrUndefined(nk)||!nk.get_readyToDrop()){return false}if(ss.isInstanceOfType(nk,cj)){return true}var nl=ss.safeCast(nk,Z);if(ss.isValue(nl)){return nl.get_fieldNames().length>0}return ss.isInstanceOfType(nk,jc)&&_.any(ss.safeCast(nk,jc).get_pills(),function(nm){return nm.get_field().get_canBeAddedToDataSchema()})}});var dF=global.tab.CopyZoneToWebClipboardCommand=ss.mkType(a,'tab.CopyZoneToWebClipboardCommand',function(){tab.CopyZoneToWebClipboardCmd.call(this)},{get_isEnabled:function(){return tab.ModelUtils.findContentDashboard(null).pm.isCopiableZoneSelected},do$1:function(){tab.DashboardView.copyZone()}});var dG=global.tab.CumulativeTableCalcViewModel=ss.mkType(a,'tab.CumulativeTableCalcViewModel',function(nk){this.$2=null;this.$1=null;this.$3=0;mi.call(this);this.$2=nk;this.$2.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$1=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$1.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$1.dispose()})))},{get_aggComboBoxVM:function(){return this.$1},get_model:function(){return this.$2},onModelUpdated:function(){if(!this.$2.get_hasAggregation()){return}this.$3=this.$2.get_aggregationIndex();var nk=[];for(var nl=0,nm=this.$2.get_aggregationValues().length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.$2.get_aggregationCaptions()[nl],this.$2.get_aggregationValues()[nl],null,null))}this.$1.setItems(nk);this.$1.set_selectedItem(this.$1.get_items()[this.$3])},$0:function(nk){if(ss.referenceEquals(nk,this.$1.get_items()[this.$3])){return}var nl=new tab.TableCalcSetCumulativeOptionsCmd;nl.set_uiBlocking('immediately');nl.c['aggregation']=nk.get_data();nl.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(){this.$1.set_selectedItem(this.$1.get_items()[this.$3]);this.raiseViewModelUpdated()}))}});var dH=global.tab.CustomHexColorUberView=ss.mkType(a,'tab.CustomHexColorUberView',function(nk){this.$c=null;this.$d=null;ss.makeGenericType(spiff.BaseView$1,[dI]).call(this,nk,new dJ);this.$c=this.get_template();this.$7()},{$7:function(){if(ss.isValue(this.$d)){this.$d.remove_propertyChanged(ss.mkdel(this,this.$8));this.$d.remove_enterKeyPressed(ss.mkdel(this,this.$9))}var nk=(ss.isNullOrUndefined(this.get_viewModel().get_defaultColor())?'':this.get_viewModel().get_defaultColor().toRgbHex().toString().substring(1));this.$d=spiff.TextInputView.newTextInputView(nk,null,'#',false);this.$d.get_inputElement().attr('maxlength','6');this.$d.add_propertyChanged(ss.mkdel(this,this.$8));this.$d.add_enterKeyPressed(ss.mkdel(this,this.$9));this.$d.add_escapeKeyPressed(ss.mkdel(this,this.$a));this.$c.domRoot.keydown(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_propertyChanged(ss.mkdel(this,this.$8));this.$d.remove_enterKeyPressed(ss.mkdel(this,this.$9));this.$d.remove_escapeKeyPressed(ss.mkdel(this,this.$a))})));this.$c.hexCode.append(this.$d.element)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$d.get_inputElement().focus()},$9:function(){if(ss.isValue(this.get_viewModel().get_enterKeyPressed())){this.get_viewModel().get_enterKeyPressed()()}},$a:function(){if(ss.isValue(this.get_viewModel().get_escapeKeyPressed())){this.get_viewModel().get_escapeKeyPressed()()}},$b:function(nk){if(nk.which===9){nk.preventDefault();nk.stopPropagation()}},$8:function(nk,nl){if(ss.equalsT(nl.get_propertyName(),'text')){try{this.get_viewModel().set_customColor(tab.ColorModel.fromColorCode('#'+this.$d.get_text()));if(ss.isValue(this.get_viewModel().get_colorEntered())){this.get_viewModel().get_colorEntered()()}}catch(nm){}}}});var dI=global.tab.CustomHexColorUberViewModel=ss.mkType(a,'tab.CustomHexColorUberViewModel',function(){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this)},{get_viewType:function(){return dH},get_viewModel:function(){return this},get_defaultColor:function(){return this.$2$1},set_defaultColor:function(nk){this.$2$1=nk},get_customColor:function(){return this.$2$2},set_customColor:function(nk){this.$2$2=nk},get_colorEntered:function(){return this.$2$3},set_colorEntered:function(nk){this.$2$3=nk},get_enterKeyPressed:function(){return this.$2$4},set_enterKeyPressed:function(nk){this.$2$4=nk},get_escapeKeyPressed:function(){return this.$2$5},set_escapeKeyPressed:function(nk){this.$2$5=nk},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){},showWithCallbacks:function(nk,nl,nm,nn){var no=spiff.UberPopupViewModel.createForContent(this,nk,null,true);no.options.glassZIndex=1000+1;this.set_defaultColor(nl);if(!ss.staticEquals(nm,null)){this.set_colorEntered(ss.delegateCombine(this.get_colorEntered(),ss.mkdel(this,function(){nm(this.get_customColor())})))}no.add_hidden(ss.mkdel(this,function(){if(!ss.staticEquals(nn,null)){nn(this.get_customColor())}}));this.set_enterKeyPressed(function(){no.hide(false)});this.set_escapeKeyPressed(function(){no.hide(false)});no.show();return no}});var dJ=global.tab.CustomHexColorUberViewTemplate=ss.mkType(a,'tab.CustomHexColorUberViewTemplate',function(){this.hexCode=null;this.inputLabel=null;spiff.Template.call(this,$("<div class='tabAuthCustomHexColorUberContainer'>\n            <div class='tabAuthCustomHexColorUberLabel'></div>\n            <div class='tabAuthCustomHexColorUberTextInput'></div>\n        </div>"));this.hexCode=this.getElementBySelector('.tabAuthCustomHexColorUberTextInput');this.hexCode.attr('title',tab.Strings.AuthCustomHexColorLabel);this.inputLabel=this.getElementBySelector('.tabAuthCustomHexColorUberLabel');this.inputLabel.text(tab.Strings.AuthCustomHexColorLabel)});var dK=global.tab.CustomTableCalcViewModel=ss.mkType(a,'tab.CustomTableCalcViewModel',function(nk){this.$2=null;this.$4=null;this.$3=null;mi.call(this);this.$2=nk;this.$2.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$4=new lP(nk.get_referenceModel());this.disposables.add$1(this.$4);this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$3.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$3.dispose()})))},{get_relativeToComboBoxVM:function(){return this.$4.get_referenceComboBoxVM()},get_relativeToState:function(){return this.$4.get_referenceWidgetState()},get_nullIfIncomplete:function(){return this.$2.get_nullIfIncomplete()},get_nullIfIncompleteState:function(){return this.$2.get_nullIfIncompleteState()},get_allPages:function(){return this.$2.get_allPages()},get_allPagesState:function(){return this.$2.get_allPagesState()},get_model:function(){return this.$2},get_referenceViewModel:function(){return this.$4},get_nestedCalcsWidgetState:function(){return this.$2.get_nestedCalcsWidgetState()},get_nestedCalcsIndex:function(){return this.$2.get_nestedCalcsIndex()},get_nestedCalcsComboBoxVM:function(){return this.$3},onModelUpdated:function(){this.$1()},customNullIfIncompleteChanged:function(nk){if(nk===this.get_nullIfIncomplete()){return}var nl=new tab.TableCalcSetNullIfIncompleteCmd;nl.set_uiBlocking('immediately');nl.c['nullIfIncomplete']=nk;nl.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},allPagesChanged:function(nk){if(nk===this.get_allPages()){return}var nl=new tab.TableCalcSetPercentTotalOptionsCmd;nl.set_uiBlocking('immediately');nl.c['includeAllPages']=nk;nl.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},$1:function(){if(this.$2.get_nestedCalcsWidgetState()!=='widget-state-enabled'){this.$3.clearItems();this.$3.set_enabled(false);return}var nk=[];for(var nl=0,nm=this.$2.get_nestedTableCalcInfoArray().length;nl<nm;nl++){var nn=this.$2.get_nestedTableCalcInfoArray()[nl];nk.push(new spiff.ComboBoxItem(null,nn.fieldCaption,nn.tableCalcIdentifier,null,null))}this.$3.setItems(nk);this.$3.set_selectedItem(nk[this.$2.get_nestedCalcsIndex()]);this.$3.set_enabled(true)},$0:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();var nm=this.$2.get_nestedTableCalcInfoArray()[this.$2.get_nestedCalcsIndex()];if(nl.calcNestingLevel===nm.tableCalcIdentifier.calcNestingLevel&&ss.referenceEquals(nl.fn,nm.tableCalcIdentifier.fn)){return}var nn=new tab.TableCalcEditNestedTableCalcCmd;nn.set_uiBlocking('immediately');nn.c['calcNestingLevel']=nl.calcNestingLevel;nn.c['nestedCalcFn']=nl.fn;nn.invoke().fail(ss.mkdel(this,function(no){this.$1()}))}});var dL=global.tab.DashboardAuthoringRectSelector=ss.mkType(a,'tab.DashboardAuthoringRectSelector',function(){this.$5=null;this.$1=null;this.$2=null;this.$6={x:0,y:0};this.$4={x:0,y:0};this.$7={x:0,y:0,w:0,h:0};this.$3={x:0,y:0,w:0,h:0};this.$5='<div></div>';this.$1='tv_drag';this.$3={x:0,y:0,w:0,h:0}},{get_dom:function(){return this.$2},get_dragStart:function(){return this.$4},get_parentDomRect:function(){return this.$7},createDomAndAppend:function(nk){this.$2=$(this.$5);this.$2.addClass(this.$1);this.$2.css('display','none');this.$2.css('position','absolute');nk.append(this.$2)},updateSpecificShape:function(nk){var nl=this.get_dragStart().x-this.get_parentDomRect().x;var nm=this.get_dragStart().y-this.get_parentDomRect().y;var nn=Math.round(Math.min(nk.x,nl));var no=Math.round(Math.max(nk.x,nl));var np=Math.round(Math.min(nk.y,nm));var nq=Math.round(Math.max(nk.y,nm));var nr=no-nn;var ns=nq-np;this.$3={x:nn,y:np,w:nr,h:ns}},renderShape:function(){var nk={l:this.$3.x,t:this.$3.y,w:this.$3.w,h:this.$3.h};tab.DomUtil.setMarginBoxJQ(this.get_dom(),nk);this.get_dom().css('display','')},show:function(){this.get_dom().addClass('tvdrag_marquee');this.get_dom().css('background-color','rgba(0, 176, 240, .25)');this.get_dom().css('border','1px solid #00b0f0')},hide:function(){if(ss.isValue(this.get_dom())){this.get_dom().removeClass('tvdrag_marquee')}},zonesTouchedByMarquee:function(nk,nl){var nm=[];if(!ss.isNullOrUndefined(nk)){for(var nn=0;nn<nk.length;nn++){var no=nk[nn];var np={x:no.get_zoneCommonModel().get_contentX(),y:no.get_zoneCommonModel().get_contentY()};var nq={x:np.x+no.get_zoneCommonModel().get_contentWidth(),y:np.y+no.get_zoneCommonModel().get_contentHeight()};if(this.$0(np,nq,nl)){nm.push(no.get_zoneId())}}}return nm},$0:function(nk,nl,nm){var nn={x:this.$3.x+nm.x,y:this.$3.y+nm.y};var no={x:this.$3.x+this.$3.w+nm.x,y:this.$3.y+this.$3.h+nm.y};if(nn.x>nl.x||no.x<nk.x||nn.y>nl.y||no.y<nk.y){return false}return true},dragStarted:function(nk,nl){var nm=tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();var nn=bg.dashboardGeometry();this.$4={x:nk.startX,y:nk.startY};this.$7=nl},updateAndRenderShape:function(nk){this.constrainShape(nk);this.updateSpecificShape(this.$6);this.renderShape()},constrainShape:function(nk){this.$6={x:nk.pageX-this.$7.x,y:nk.pageY-this.$7.y};this.$6.y=Math.max(0,Math.min(this.$6.y,this.$7.h));this.$6.x=Math.max(0,Math.min(this.$6.x,this.$7.w))}});var dM=global.tab.DashboardDeviceLayoutMapping=ss.mkType(a,'tab.DashboardDeviceLayoutMapping',null,null,{getUserString:function(nk){return dM.$3[nk]},getLayout:function(nk){return dM.$2[nk]},$0:function(){var nk={};var nl=new ss.ObjectEnumerator(dM.$3);try{while(nl.moveNext()){var nm=nl.current();nk[nm.value]=nm.key}}finally{nl.dispose()}return nk}});var dN=global.tab.DashboardDeviceLayoutViewModel=ss.mkType(a,'tab.DashboardDeviceLayoutViewModel',function(nk,nl){this.$e=null;this.$g=null;this.$f=null;this.$h=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$e=nk;this.$g=nl;this.$f=new hr(this.$e);this.$h=dN.$4;this.addChildViewModel(this.$f);this.disposables.add$1(this.$e.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$6)).addEventBinding(ss.mkdel(this,function(nm){nm.add_activeZoneChanged(ss.mkdel(this,this.incrementProps));nm.deviceLayoutMetadataModel.add_deviceLayoutZoneInfosChanged(ss.mkdel(this,this.$6));nm.deviceLayoutMetadataModel.add_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nm){nm.remove_activeZoneChanged(ss.mkdel(this,this.incrementProps));nm.deviceLayoutMetadataModel.remove_deviceLayoutZoneInfosChanged(ss.mkdel(this,this.$6));nm.deviceLayoutMetadataModel.remove_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))})))},{$a:function(){return this.$e.get_model()},$b:function(){return ss.isValue(this.$a())&&this.$a().get_isCurrentLayoutAutoGenerated()},$c:function(){return ss.isValue(this.$a())&&ss.isValue(this.$a().deviceLayoutMetadataModel)&&this.$a().deviceLayoutMetadataModel.get_isLayoutCustomized()},$d:function(){return(ss.isValue(this.$a())?this.$a().get_activeZoneID():0)},$9:function(){return ss.isValue(this.$g)&&this.$g.get_addNewZoneAsFloating()},createInitialProps:function(){return{addToDashboard:ss.mkdel(this,this.$3),clearAllClicked:ss.mkdel(this,this.$5),createDragInstance:ss.mkdel(this,this.$4),selectZone:ss.mkdel(this,this.$7),showContextMenu:ss.mkdel(this,this.$8)}},createUpdatedProps:function(){return{defaultCustomToggleProps:this.$f.get_props(),isCurrentLayoutAutoGenerated:this.$b(),isLayoutCustomized:this.$c(),rootNodes:this.$h,selectedZone:this.$d()}},$5:function(nk){if(ss.isValue(this.$a())){tab.DashboardClientCommands.clearDeviceLayout(this.$a().get_sheetName())}},$8:function(nk,nl){if(ss.isNullOrUndefined(this.$a())||ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.deviceZoneListItem)||ss.isNullOrUndefined(nk.deviceZoneVisibilityListItem)||ss.isNullOrUndefined(nl)){return}var nm=function(nn){var no=nn.commands;var np=tab.WidgetUtil.menuViewModelFromCommands(no,tab.WidgetUtil.commandMenuItemClicked,null,null,null);np.show(nl)};tab.DashboardClientCommands.getZoneListNodeContextMenu(this.$a().get_sheetName(),nk.deviceZoneListItem.get_zoneId(),nk.deviceZoneListItem.get_zoneName(),nk.deviceZoneListItem.get_zoneParam(),nk.deviceZoneListItem.get_zoneType(),nk.deviceZoneListItem.get_label(),nk.deviceZoneListItem.get_formattedText(),nk.deviceZoneVisibilityListItem.get_isEnabled(),nk.deviceZoneVisibilityListItem.get_isVisible(),this.$a().get_currentDeviceLayout(),this.$9(),nm)},$6:function(){this.$h=dN.$4;if(ss.isValue(this.$a())&&ss.isValue(this.$a().deviceLayoutMetadataModel)){this.$h=mf.buildTree(tab.DeviceLayoutZoneInfo,String,mX).call(null,this.$a().deviceLayoutMetadataModel.get_deviceLayoutZoneInfos(),null,dN.$0,dN.$1,function(nk,nl){return new mX.$ctor1(nk,nl)})}this.incrementProps()},$3:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.deviceZoneVisibilityListItem)||nk.deviceZoneVisibilityListItem.get_isVisible()||!nk.deviceZoneVisibilityListItem.get_isEnabled()){return}tab.DashboardClientCommands.addExistingObjectToDashboard(this.$a().get_sheetName(),nk.deviceZoneListItem.get_zoneType(),nk.deviceZoneListItem.get_direction()==='horizontal',this.$9(),nk.deviceZoneListItem.get_formattedText(),nk.deviceZoneListItem.get_zoneParam(),nk.deviceZoneListItem.get_dashboardObjectType(),nk.deviceZoneListItem.get_zoneId(),nk.deviceZoneListItem.get_zoneName())},$4:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.deviceZoneVisibilityListItem)||nk.deviceZoneVisibilityListItem.get_isVisible()||!nk.deviceZoneVisibilityListItem.get_isEnabled()){return null}var nl=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nm=$.Deferred();nl.done(function(no){nm.resolve(no.zoneDragDrop)}).fail(function(){nm.reject()});var nn=mT.createDeferredRect(nm);return fJ.create(nk.deviceZoneListItem,this.$9(),nm,nn)},$7:function(nk){if(ss.isValue(nk)&&ss.isValue(nk.deviceZoneListItem)&&ss.isValue(nk.deviceZoneVisibilityListItem)&&nk.deviceZoneVisibilityListItem.get_isVisible()){tab.SelectionClientCommands.setActiveZone(nk.deviceZoneListItem.get_zoneId(),'replace',null)}}},{$0:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.deviceZoneListItem)){return''}return(dN.$2(nk.deviceZoneListItem.get_zoneType())?'':nk.deviceZoneListItem.get_zoneName())},$1:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.deviceZoneListItem)){return null}return(dN.$2(nk.deviceZoneListItem.get_zoneType())?nk.deviceZoneListItem.get_zoneName():null)},$2:function(nk){switch(nk){case'color':case'shape':case'size':case'map':case'filter':case'highlighter':case'current-page':{return true}}return false}});var dO=global.tab.DashboardDragDropViewModel=ss.mkType(a,'tab.DashboardDragDropViewModel',function(nk,nl){this.$c=null;this.$9=null;this.$7=null;this.$a=null;this.$b=null;this.$8=null;this.$d=null;this.$f=null;this.$e=null;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$9=nk;this.$7=nl;var nm=new iG;this.$b=ss.mkdel(nm,nm.generate);this.$a=ss.mkdel(this,function(nn){var no=this.$b(nn);var np;if(nn.dashboardTargetType==='unknown'||nn.dashboardTargetType==='noop-target'){np=new spiff.NoopDropTarget}else{np=new dQ.$ctor1(nn,ss.mkdel(this,this.$6),ss.mkdel(this,this.$2),ss.mkdel(this,this.$5),nn.dashboardTargetType)}return new be(no,nn.polygon,np)});this.$8=[this.$a({paneRect:{},polygon:dO.$0(this.$7())})];this.$c={dropTargets:this.$8,borders:[],guides:[],dashboardGeometry:this.$7};this.$d=this.$8;this.$f=[];this.$e=[];this.$4();EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$3))},{get_shouldUseContainersAsTargetsForLegacy:function(){return!this.$9.get_isFloating()},$3:function(nk){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$3));this.dispose()},$4:function(){this.updateProps$1(this.$c);if(ss.isValue(this.$9.get_dragDropPresModel())){this.$9.get_dragDropPresModel().done(ss.mkdel(this,function(nk){this.$d=ss.arrayClone(nk.targetPreviewPairs.map(this.$a));this.$f=nk.zoneBorders;this.$e=nk.containerGuides;this.$5();this.$9.add_shiftStateChanged(ss.mkdel(this,this.$5))}))}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_shiftStateChanged(ss.mkdel(this,this.$5));this.$9.remove_dragTypeChanged(ss.mkdel(this,this.$5))})))},$5:function(){var nk=this.$c;if(this.get_shouldUseContainersAsTargetsForLegacy()){nk={dropTargets:this.$d,borders:this.$f,guides:this.$e,dashboardGeometry:this.$7}}this.updateProps$1(nk)},$2:function(nk,nl){var nm=this.$7();var nn={x:nk.pageX-nm.l,y:nk.pageY-nm.t};EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$3));if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){this.$9.dispose();this.$9.handleDrop(nn,ss.mkdel(this,this.dispose),this.get_props().dropFeedback,this.get_props().containerGuide,nl)}else{this.$9.handleDrop(nn,ss.mkdel(this,this.dispose),null,null,null)}},$6:function(nk){this.updateProps$1({dropTargets:this.get_props().dropTargets,borders:this.get_props().borders,guides:this.get_props().guides,showBorders:!this.$9.get_isFloating(),dropFeedback:nk.paneRect,dashboardGeometry:this.$7,containerGuide:this.$1(nk.zoneId)})},$1:function(nk){if(nk===0){return null}var nl=ss.arrayClone(this.get_props().guides);for(var nm=nl.length-1;nm>=0;nm--){if(nl[nm].zoneId===nk||ss.contains(nl[nm].childZoneIds,nk)){return nl[nm]}}return null}},{$0:function(nk){var nl=[0,0,0,nk.h,nk.w,nk.h,nk.w,0,0,0];return{lineList:[{pointsF:nl}]}}});var dP=global.tab.DashboardDragFeedbackComponent=ss.mkType(a,'tab.DashboardDragFeedbackComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){var nk=this.props.dashboardGeometry();var nl={width:nk.w,height:nk.h,className:'tab-dashDropTargetContainer'};var nm=_.map(this.props.dropTargets,ss.mkdel(this,function(np){return React.createElement(dR,{target:np.hitTarget,dropTarget:np.dropTarget,key:np.key})}));var nn=ss.arrayClone(nm.reverse());if(ss.isValue(this.props.dropFeedback)){var no={x:this.props.dropFeedback.x,y:this.props.dropFeedback.y,width:this.props.dropFeedback.w,height:this.props.dropFeedback.h,className:'tab-dashCurrentDropTarget',key:'__PREVIEW__'};ss.insert(nn,0,spiff.DOMElements.rect(no))}if(ss.isValue(this.props.containerGuide)){ss.insert(nn,0,this.$0())}if(this.props.showBorders){ss.insert(nn,0,this.$1())}return spiff.DOMElements.svg(nl,nn)},$1:function(){var nk=(ss.isValue(this.props.containerGuide)?this.props.containerGuide.childZoneIds.concat([this.props.containerGuide.zoneId]):[]);var nl=new dC;nl.borders=this.props.borders;nl.excludedZones=nk;nl.key='__ZONES__';return React.createElement(dB,nl)},$0:function(){var nk=new dx;nk.containerGuide=this.props.containerGuide;nk.key='__CONTAINER__';return React.createElement(dw,nk)},componentDidUpdate:function(nk,nl){if(!_.isEqual(this.props.dropTargets,nk.dropTargets)){EventUtils.DragDropManager.dragMove(EventUtils.DragDropManager.get_lastDragEvent())}}});var dQ=global.tab.DashboardDropTarget=ss.mkType(a,'tab.DashboardDropTarget',function(nk,nl,nm,nn){this.$3=null;this.$1=null;this.$2=null;this.$0=null;this.$4=null;this.$3=nk;this.$1=nl;this.$2=nm;this.$0=nn},{get_feedbackType:function(){return'dropfeedbackuponentry'},get_presModel:function(){return this.$3},dragOver:function(nk){if(ss.isInstanceOfType(nk,dS)){this.$1(this.$3);return this}return null},dragExit:function(nk){this.$0()},acceptDrop:function(nk){if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')&&!ss.isNullOrUndefined(this.$3.zoneId)){this.$2(EventUtils.DragDropManager.get_lastDragEvent(),this.$3.zoneId)}else{this.$2(EventUtils.DragDropManager.get_lastDragEvent(),null)}return $.Deferred().resolve(true)},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.move},getTargetType:function(){return this.$4}},{$ctor1:function(nk,nl,nm,nn,no){this.$3=null;this.$1=null;this.$2=null;this.$0=null;this.$4=null;this.$3=nk;this.$1=nl;this.$2=nm;this.$0=nn;this.$4=no}});var dR=global.tab.DashboardDropTargetComponent=ss.mkType(a,'tab.DashboardDropTargetComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){var nk=new ss.StringBuilder;var nl=this.props.target.lineList;for(var nm=0;nm<nl.length;nm++){var nn=nl[nm].pointsF;for(var no=0;no<nn.length;no+=2){nk.append(nn[no]+','+nn[no+1]+' ')}}return spiff.DOMElements.polygon({points:nk.toString(),ref:spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this.props.dropTarget}))})}});var dS=global.tab.DashboardElementDragInstance=ss.mkType(a,'tab.DashboardElementDragInstance',function(nk,nl,nm){dS.$ctor1.call(this,nk,nl,nm,false)},{add_dragTypeChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_dragTypeChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_isFlexible:function(){return this.$1},get_isFloating:function(){return this.get_shouldBehaveAsFloat()},get_shouldBehaveAsFloat:function(){return this.isShiftDrag!==this.$0},set_shouldBehaveAsFloat:function(nk){if(nk!==this.$2){this.$2=nk;if(ss.isValue(this.$2$1)){this.$2$1()}}},get_viewModel:function(){if(ss.isNullOrUndefined(this.$3)){this.$3=new dO(this,bg.dashboardGeometry)}return this.$3},get_dragDropPresModel:function(){return this.$2$2},set_dragDropPresModel:function(nk){this.$2$2=nk},handleDrop:null,initialize:function(){this.avatarViewModel.initialize(this)},dispose:function(){if(ss.isValue(this.$3)){this.$3.dispose()}if(ss.isValue(this.avatarViewModel)){this.avatarViewModel.dispose()}},dropToNowhereAction:function(){this.dispose()}},{$ctor1:function(nk,nl,nm,nn){this.$0=false;this.$1=false;this.avatarViewModel=null;this.$3=null;this.$2=false;this.$2$1=null;this.defaultCursor=null;this.$2$2=null;EventUtils.DragInstance.call(this,nk,tab.ObjectRegistry.newView(mS).call(null,[nm]));this.$0=nl;this.avatarViewModel=nm;this.$1=nn}});var dT=global.tab.DashboardGridComponent=ss.mkType(a,'tab.DashboardGridComponent',function(){React.Component.call(this)},{render:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=this.props.onClick;return EventUtils.EventForwarder.div(nk,{className:'tab-dashboard-grid'},this.renderGrid())},renderGrid:function(){var nk=this.props.lineThickness+'px';var nl=this.props.color+' '+nk+', '+'transparent'+' '+nk+', '+'transparent'+')';var nm='linear-gradient(0deg, '+nl;var nn='linear-gradient(90deg, '+nl;var no=nm+','+nn;var np=this.props.gridCellSize+'px';var nq=np+' '+np;return spiff.DOMElements.div({className:'tab-dashboard-grid-overlay',hidden:this.props.isHidden,style:{backgroundImage:no,backgroundSize:nq,height:this.props.dashboardHeight,width:this.props.dashboardWidth,zIndex:699},key:'dashboard-grid-overlay'})}});var dU=global.tab.DashboardGridDialogComponent=ss.mkType(a,'tab.DashboardGridDialogComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){this.props.dialogProps.children=this.$0();var nk=React.createElement(SharedWidgets.DialogWidget,this.props.dialogProps);return nk},$0:function(){var nk=React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'gridSize',containerStyle:{width:'100%'},start:this.props.gridSize,label:tab.Strings.DashboardGridSize,min:5,max:1000,onValueUpdated:this.props.changeSize});return nk}});var dV=global.tab.DashboardGridDialogViewModel=ss.mkType(a,'tab.DashboardGridDialogViewModel',function(nk){this.$8=null;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=nk;this.disposables.add(ss.mkdel(nk,nk.detachNotifications));this.$7.add_updateGridDialogInfo(ss.mkdel(this,this.incrementProps));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_updateGridDialogInfo(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{dialogProps:this.$3(),changeSize:ss.mkdel(this,this.$4)}},createUpdatedProps:function(){return{gridSize:(ss.isValue(this.$7)?this.$7.get_gridSize():20)}},$3:function(){var nk={testId:'dashboardGridDialog',isModal:true,type:0,dialogWidth:200,showCloseButton:true,title:tab.Strings.GridDialogTitle,positioningBehavior:2,shouldAdjustPositionOnWindowResize:true,zIndex:1000,isGlassTransparent:true,onCloseRequest:ss.mkdel(this,this.$6)};return nk},$4:function(nk){this.$5();this.$8=window.setTimeout(function(){tab.DashboardClientCommands.changeDashboardGridSize(nk);dY.logGridSizeEvent(nk)},100)},$5:function(){this.$8=tab.MiscUtil.clearTimeout(this.$8)},$6:function(){_.defer(ss.mkdel(this,this.dispose))}});var dW=global.tab.DashboardGridOptionsProxy=ss.mkType(a,'tab.DashboardGridOptionsProxy',null,null,{$0:function(){var nk=new tab.DashboardGridDialogModel;nk.add_updateGridDialogInfo(function(){dW.$1(nk)});return nk},$1:function(nk){var nl=new dV(nk);var nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dV,dU,Object])).call(null,[nl]);nm.get_rootElement()[0].id='dashboardGridDialog';nm.addToDom($(document.body))}});var dX=global.tab.DashboardGridProps=ss.mkType(a,'tab.DashboardGridProps',function(){this.isHidden=false;this.gridCellSize=0;this.color=null;this.lineThickness=0;this.dashboardWidth=0;this.dashboardHeight=0;this.dashboardTop=0;this.dashboardLeft=0;this.onClick=null});var dY=global.tab.DashboardGridTelemetry=ss.mkType(a,'tab.DashboardGridTelemetry',null,null,{logGridStateChangeEvent:function(nk,nl){dY.$0('DashboardAuthoring_GridToggle',ss.mkdict(['GridState',(nk?'On':'Off'),'GridToggleMethod',(nl?'Shortcut':'Toggle Menu Bar')]))},logGridSizeEvent:function(nk){dY.$0('DashboardAuthoring_GridSize',ss.mkdict(['GridSize',nk]))},$0:function(nk,nl){tab.OnlineAnalyticsClient.logEvent(nk,nl)}});var dZ=global.tab.DashboardGridViewModel=ss.mkType(a,'tab.DashboardGridViewModel',function(nk){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[dX]).call(this);this.$3=nk;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_sizeChanged(ss.mkdel(this,this.incrementProps));nl.add_gridOverlayModeChanged(ss.mkdel(this,this.incrementProps));nl.add_gridSizeChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.remove_sizeChanged(ss.mkdel(this,this.incrementProps));nl.remove_gridOverlayModeChanged(ss.mkdel(this,this.incrementProps));nl.remove_gridSizeChanged(ss.mkdel(this,this.incrementProps))}})))},{get_isGridOn:function(){var nk=this.$3.get_model();return ss.isValue(nk)&&nk.get_gridMode()==='gom-on'},createUpdatedProps:function(){var nk=this.$3.get_model();var nl=0,nm=0;var nn=true;var no=20;if(ss.isValue(nk)&&nk.get_isDashboard()&&ss.isValue(nk.get_dashboardSize())){nm=nk.get_dashboardSize().h;nl=nk.get_dashboardSize().w;nn=!this.get_isGridOn();no=nk.get_gridSize()}var np=new dX;np.isHidden=nn;np.gridCellSize=no;np.color='rgba(0, 220, 255, 0.35)';np.dashboardHeight=nm;np.dashboardWidth=nl;np.lineThickness=1;np.dashboardLeft=0;np.dashboardTop=0;np.onClick=ss.mkdel(this,this.onClick);return np},onClick:function(nk){tab.SelectionClientCommands.clearActiveZone()}});var ea=global.tab.DashboardLeftPaneConstants=ss.mkType(a,'tab.DashboardLeftPaneConstants',null,null,{get_titleHTMLAttr:function(){return{className:'tab-SectionTitle',key:'title'}},get_contentHTMLAttr:function(){return{className:'tab-SectionContent',key:'content'}}});var eb=global.tab.DashboardNewObjectsPaneComponent=ss.mkType(a,'tab.DashboardNewObjectsPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk={testId:'tiledOrFloating',selectedToggle:(this.props.addAsFloating?1:0),leftToggleText:tab.Strings.AuthDashboardPaneTiledButton,rightToggleText:tab.Strings.AuthDashboardPaneFloatingButton,handleLeftToggleSelected:ss.mkdel(this,function(){this.props.changeFloatingState(false)}),handleRightToggleSelected:ss.mkdel(this,function(){this.props.changeFloatingState(true)}),disabled:this.props.isCurrentLayoutAutoGenerated};return spiff.DOMElements.div({className:'tabDashboardPaneToggleButtons'},React.createElement(SharedWidgets.ToggleTextWidget,nk))}});var ec=global.tab.DashboardNewObjectsPaneViewModel=ss.mkType(a,'tab.DashboardNewObjectsPaneViewModel',function(nk,nl){ec.$ctor1.call(this,nk,nl,new eB)},{$5:function(){this.zoneObjectsViewModels=this.$8.createZoneObjectsViewModels(this.$7);this.incrementProps()},createInitialProps:function(){return{changeFloatingState:ss.mkdel(this,this.$4),changeFlexibleLayoutState:ss.mkdel(this,this.$3)}},createUpdatedProps:function(){return{addAsFloating:this.$7.get_addNewZoneAsFloating(),addToFlexibleLayout:this.$7.get_addToFlexibleDashboard(),isCurrentLayoutAutoGenerated:ss.isValue(this.$6.get_model())&&this.$6.get_model().get_isCurrentLayoutAutoGenerated()}},$4:function(nk){if(this.$7.get_addNewZoneAsFloating()!==nk){this.$7.set_addNewZoneAsFloating(nk);this.incrementProps()}},$3:function(nk){if(this.$7.get_addToFlexibleDashboard()!==nk){this.$7.set_addToFlexibleDashboard(nk);this.zoneObjectsViewModels=this.$8.createZoneObjectsViewModels(this.$7);if(nk){this.$4(true)}this.incrementProps()}}},{$ctor1:function(nk,nl,nm){this.$7=null;this.$6=null;this.$8=null;this.zoneObjectsViewModels=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=nl;this.$8=nm;if(tab.FeatureFlags.isEnabled('NLPDashboardObject')){this.$8.factoryIsInitialized=ss.delegateCombine(this.$8.factoryIsInitialized,ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.factoryIsInitialized=ss.delegateRemove(this.$8.factoryIsInitialized,ss.mkdel(this,this.$5))})));this.$8.initializeFactory()}else{this.zoneObjectsViewModels=this.$8.createZoneObjectsViewModels(this.$7)}this.$6=nk;this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nn){nn.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nn.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nn){nn.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nn.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))}});var ed=global.tab.DashboardObjectInfo=ss.mkType(a,'tab.DashboardObjectInfo',function(nk,nl,nm){this.objectStateInfo=null;this.localizedName=null;this.encodedSVGIcon=null;this.objectStateInfo=nk;this.localizedName=nl;this.encodedSVGIcon=nm});var ee=global.tab.DashboardObjectLibraryProvider=ss.mkType(a,'tab.DashboardObjectLibraryProvider',function(){ee.$ctor1.call(this,tab.ApplicationModel.get_instance().get_dashboardObjectsLibrary())},{$0:function(nk){this.$1={};if(tab.MiscUtil.isNullOrEmpty$3(nk)){return this.$1}for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new ed(nm.dashboardObjectStateInfo,nm.dashboardObjectLibraryTypeLocalizedName,nm.svgImage);this.$1[nm.dashboardObjectLibraryTypes]=nn}return this.$1},hasDashboardObjectType:function(nk){return ss.keyExists(this.$1,nk)},getDashboardObjectStateInfo:function(nk){return this.$1[nk].objectStateInfo},getDashboardObjectLocalizedName:function(nk){return this.$1[nk].localizedName},getDashboardObjectLibraryMap:function(){return this.$1},getDashboardObjectEncodedSVGIcon:function(nk){return this.$1[nk].encodedSVGIcon}},{$ctor1:function(nk){this.$1=null;this.$0(nk)}});var ef=global.tab.DashboardPaneComponent=ss.mkType(a,'tab.DashboardPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{$e:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},render:function(){var nk;if(this.props.currentDashboardDeviceLayout==='default'){nk=this.$1()}else{nk=this.$2()}return spiff.DOMElements.div({className:'tab-DashboardPane'},nk)},$1:function(){return[this.$4(),this.$9(),this.$7(),this.$6()]},$2:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){var nk=tab.Strings.ZoneListTitle(dM.getUserString(this.props.currentDashboardDeviceLayout));var nl=[this.$4(),this.$9()];if(this.props.dashboardZoneListProps.isLayoutCustomized){nl.push(spiff.DOMElements.div({className:['tab-Section','DeviceZoneLayoutSection',this.$e()].join(' '),key:'zoneLayout-control-section','data-tb-test-id':'DeviceZoneLayoutSection'},spiff.DOMElements.div(ea.get_titleHTMLAttr(),nk),spiff.DOMElements.div(ea.get_contentHTMLAttr(),this.$d(),this.$b(),this.$3())));nl.push(this.$6())}else{nl.push(spiff.DOMElements.div({className:['tab-Section','DeviceZoneLayoutSection',this.$e()].join(' '),key:'zoneLayout-control-section'},spiff.DOMElements.div(ea.get_titleHTMLAttr(),nk),spiff.DOMElements.div(ea.get_contentHTMLAttr(),this.$d(),spiff.DOMElements.div({className:'deviceLayoutDefaultMessage'},tab.Strings.DeviceLayoutDefaultMessagePart1),spiff.DOMElements.div({className:'deviceLayoutDefaultMessage'},tab.Strings.DeviceLayoutDefaultMessagePart2))))}return nl}return[this.$4(),this.$5()]},$b:function(){var nk=React.createElement(ev,this.props.dashboardZoneListProps);return spiff.DOMElements.div({className:'tab-zoneList',key:'zone-list-section'},nk)},$3:function(){var nk={handleClick:this.props.dashboardZoneListProps.clearAllClicked,buttonType:1,testId:'device-layout-clear-all',children:tab.Strings.DashboardLayoutClearAll,disabled:this.props.isDashboardEmpty||this.props.currentLayoutIsAutoGenerated};var nl=React.createElement(SharedWidgets.ButtonWidget,nk);return spiff.DOMElements.div({className:'tab-ClearAllButton'},nl)},$5:function(){var nk=this.props.currentDashboardDeviceLayout==='phone'&&this.props.currentLayoutIsAutoGenerated;var nl=(nk?tab.Strings.LeftPaneAutoGeneratedPhoneLayoutWarningMsg:tab.Strings.LeftPaneDSDWarningMsg);return spiff.DOMElements.div({className:['tab-Section','tab-SectionWarningMsg'].join(' '),key:'dsd-warning'},spiff.DOMElements.div(ea.get_contentHTMLAttr(),nl))},$6:function(){var nk=spiff.DOMElements.div({className:'tab-SectionContent'},this.$c(),this.$a(),this.$8());return spiff.DOMElements.div({className:['tab-Section','tab-SectionObjects',this.$e()].join(' '),key:'dashboard-objects-section','data-tb-test-id':'tab-SectionObjects'},spiff.DOMElements.div(ea.get_titleHTMLAttr(),tab.Strings.AuthDashboardPaneZoneObjects),nk)},$d:function(){var nk=React.createElement(SharedWidgets.ToggleTextWidget,this.props.dashboardZoneListProps.defaultCustomToggleProps);return spiff.DOMElements.div({className:'tab-SectionZoneToggleButtons'},nk)},$a:function(){if(this.props.isFlexibleLayoutEnabled){return null}var nk=React.createElement(eb,this.props.newObjPane);return spiff.DOMElements.div({className:'tab-SectionToggleButtons'},nk)},$c:function(){var nk=React.createElement(ez,{zoneObjectList:this.props.zoneObjects,isFlexibleLayoutEnabled:this.props.isFlexibleLayoutEnabled,currentLayoutIsAutoGenerated:this.props.currentLayoutIsAutoGenerated});return spiff.DOMElements.div({className:['tab-SectionZoneObjects',this.$e()].join(' ')},nk)},$8:function(){if(this.props.isFlexibleLayoutEnabled&&!tab.FeatureFlags.isEnabled('EnableHideShowTitleForFlexibleDashboard')){return null}var nk=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.AuthDashboardPaneTitleCheckbox,checked:this.props.dashTitleCheckbox.isChecked,handleChange:this.props.dashTitleCheckbox.changeDashboardTitle,testId:'dash-pane-show-title-checkbox',disabled:this.props.isFlexibleLayoutEnabled||this.props.currentLayoutIsAutoGenerated});return spiff.DOMElements.div({className:'tab-SectionDashboardTitleCheckbox'},nk)},$7:function(){var nk=React.createElement(em,this.props.sheets);var nl=new EventUtils.EventHandleSpec;nl.tap=ss.mkdel(this,this.$0);var nm=nl;return EventUtils.EventForwarder.div(nm,{className:['tab-Section','tab-SectionSheetList'].join(' '),key:'sheet-list-section'},spiff.DOMElements.div(ea.get_titleHTMLAttr(),tab.Strings.AuthDashboardPaneSheets),spiff.DOMElements.div(ea.get_contentHTMLAttr(),nk))},$4:function(){var nk=React.createElement(eR,this.props.deviceLayoutList);if(!tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){return(this.props.deviceLayoutList.hasDevices?(function(){return nk})():null)}return nk},$9:function(){var nk=React.createElement(eo,this.props.size);return spiff.DOMElements.div({className:['tab-Section','tab-SectionSizing',this.$e()].join(' '),key:'size-control-section','data-tb-test-id':'tab-SectionSizing'},spiff.DOMElements.div(ea.get_titleHTMLAttr(),this.props.size.sectionTitle),spiff.DOMElements.div(ea.get_contentHTMLAttr(),nk))},$0:function(nk){var nl=$(nk.target);var nm=nl.hasClass('tabAuthSheetListItem')||nl.parents('.'+'tabAuthSheetListItem').length>0;if(!nm){this.props.sheets.actions.select(null)}}});var eg=global.tab.DashboardPaneViewModel=ss.mkType(a,'tab.DashboardPaneViewModel',function(nk){this.$a=null;this.$9=null;this.$7=null;this.$5=null;this.$8=null;this.$6=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);var nl=new tab.DashboardNewObjectsModel;var nm=new el(nk,nl);this.$5=new et(nk);this.$8=new ec(nk,nl);this.$7=new eU(nk);this.$9=new lk(nk,nl,nm);this.$6=new eu(nk);this.$4=new dN(nk,nl);this.$a=nk;this.disposables.add$2([this.addChildViewModel(this.$7),this.addChildViewModel(this.$9),this.addChildViewModel(this.$5),this.addChildViewModel(this.$8),this.addChildViewModel(this.$6),this.addChildViewModel(this.$4),this.$7,this.$9,this.$5,this.$8,this.$6,this.$4]);this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nn){nn.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nn){nn.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})).addEventBinding(ss.mkdel(this,function(nn){nn.add_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nn){nn.remove_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))})).addEventBinding(ss.mkdel(this,function(nn){nn.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nn){nn.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){tab.ApplicationModel.get_instance().get_workbook().addDashboardUpdatedHandler(ss.mkdel(this,this.$3))}},{get_title:function(){return tab.Strings.AuthLeftPaneLabelDashboard},get_id:function(){return'dashboard'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[eg,ef,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthDashboardPane'},createUpdatedProps:function(){var nk=this.$a.get_model();var nl='default';var nm=false;var nn=false;var no=true;if(ss.isValue(nk)){nl=nk.get_currentDeviceLayout();nm=nk.get_isCurrentLayoutAutoGenerated();nn=nk.get_isFlexibleLayoutEnabled();no=nk.get_zoneModels().length<=0;if(this.$8.get_props().addToFlexibleLayout!==nn){this.$8.get_props().changeFlexibleLayoutState(nn)}}var np={deviceLayoutList:this.$7.get_props(),sheets:this.$9.get_props(),size:this.$5.get_props(),zoneObjects:_.map(this.$8.zoneObjectsViewModels,function(nq){return nq.get_props()}),newObjPane:this.$8.get_props(),dashTitleCheckbox:this.$6.get_props(),currentLayoutIsAutoGenerated:nm,currentDashboardDeviceLayout:nl,isFlexibleLayoutEnabled:nn,isDashboardEmpty:no};if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){np.dashboardZoneListProps=this.$4.get_props()}return np},$3:function(nk){if(nk.get_isFlexibleLayoutEnabled()&&(ss.isNullOrUndefined(this.$a.get_model())||!ss.referenceEquals(this.$a.get_model().get_sheetName(),nk.get_sheetName()))){this.$8.get_props().changeFloatingState(true);this.$8.get_props().changeFlexibleLayoutState(true)}else if(!nk.get_isFlexibleLayoutEnabled()){this.$8.get_props().changeFlexibleLayoutState(false)}}});var eh=global.tab.DashboardPortPreviewComponent=ss.mkType(a,'tab.DashboardPortPreviewComponent',function(){React.PureComponent.call(this)},{render:function(){if(this.props.isHidden){return null}if(!this.props.layoutExists){return spiff.DOMElements.div({className:'tab-dashboard-solid-device-preview-port-overlay',style:{height:this.props.height,width:this.props.width,zIndex:699}})}return spiff.DOMElements.div({className:'tab-dashboard-device-preview-container',style:{height:this.props.height,width:this.props.width,zIndex:699}},spiff.DOMElements.div({className:'tab-dashboard-device-preview-port-overlay'}),spiff.DOMElements.div({className:'overlay-top'},spiff.DOMElements.div({className:'overlay-corner-bracket--top-left'}),spiff.DOMElements.div({className:'overlay-corner-bracket--top-right'})),spiff.DOMElements.div({className:'overlay-bottom'},spiff.DOMElements.div({className:'overlay-corner-bracket--bottom-left'}),spiff.DOMElements.div({className:'overlay-corner-bracket--bottom-right'})))}});var ei=global.tab.DashboardPortPreviewViewModel=ss.mkType(a,'tab.DashboardPortPreviewViewModel',function(nk){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=nk;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.add_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nl.add_mobileAppEnabledInPreviewChanged(ss.mkdel(this,this.incrementProps));nl.add_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps));nl.add_sizeChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.remove_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nl.remove_mobileAppEnabledInPreviewChanged(ss.mkdel(this,this.incrementProps));nl.remove_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps));nl.remove_sizeChanged(ss.mkdel(this,this.incrementProps))}})))},{createUpdatedProps:function(){var nk=this.$3.get_model();if(ss.isNullOrUndefined(nk)||!nk.get_isDashboard()||nk.isStory()||ss.isNullOrUndefined(nk.get_previewPortSizeList())||nk.get_previewPortSizeList().length===0){return{width:0,height:0,isHidden:true,layoutExists:false}}var nl;if(nk.get_devicePreviewBarIsVisible()){nl=((nk.get_currentDeviceLayout()!=='default')?nk.get_currentDeviceLayout():nk.get_currentPreviewLayout())}else{nl=nk.get_currentDeviceLayout()}var nm=nk.previewPortSizeForDeviceLayout(nl);return{isHidden:nl==='default',layoutExists:ss.contains(nk.get_deviceLayouts(),nl),width:nm.w,height:nm.h}}});var ej=global.tab.DashboardSelectionView=ss.mkType(a,'tab.DashboardSelectionView',function(nk){this.$v=null;this.$w=null;this.$z=null;this.$y=false;this.$x=null;this.$A={};this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[ek]).call(this,nk,spiff.Template.fromHtml(''));this.set_zoneMultiselection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[mZ,mY,Object])).call(null,[this.get_viewModel().zoneMultiselectionViewModel]));this.get_viewModel().add_activeZonesAdded(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_activeZonesAdded(ss.mkdel(this,this.$9))})));this.get_viewModel().add_activeZonesRemoved(ss.mkdel(this,this.$j));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_activeZonesRemoved(ss.mkdel(this,this.$j))})));EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$f))})));if(tab.FeatureFlags.isEnabled('DashboardDesignMode')){this.$z=new dL}},{get_zoneMultiselection:function(){return this.$3$1},set_zoneMultiselection:function(nk){this.$3$1=nk},get_zoneSelections:function(){return this.$A},dispose:function(){var nk=ss.getEnumerator(Object.keys(this.$A));try{while(nk.moveNext()){var nl=nk.current();tab.MiscUtil.dispose$1(this.$A[nl])}}finally{nk.dispose()}ss.clearKeys(this.$A);this.get_zoneMultiselection().dispose();ss.makeGenericType(spiff.BaseView$1,[ek]).prototype.dispose.call(this);if(tab.FeatureFlags.isEnabled('DashboardDesignMode')){this.$x.dispose()}},$d:function(){ReactDOM.unmountComponentAtNode(this.get_zoneMultiselection().get_rootElement()[0]);var nk=ss.getEnumerator(Object.keys(this.get_zoneSelections()));try{while(nk.moveNext()){var nl=nk.current();ReactDOM.unmountComponentAtNode(this.get_zoneSelections()[nl].get_rootElement()[0])}}finally{nk.dispose()}},addToDom:function(nk){this.$d();this.$c();this.$b();this.onAddedToDom()},onAddedToDom:function(){var nk=new ss.ObjectEnumerator(this.get_viewModel().get_zoneSelectionViewModels());try{while(nk.moveNext()){var nl=nk.current();this.$8(nl.value)}}finally{nk.dispose()}this.get_zoneMultiselection().addToDom(this.$w);this.$u();spiff.Widget.prototype.onAddedToDom.call(this)},$u:function(){var nk=ss.mkdel(this,function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){var nl=new ss.ObjectEnumerator(this.get_viewModel().get_zoneSelectionViewModels());try{while(nl.moveNext()){var nm=nl.current();nm.value.updateZoneChromeOnScroll()}}finally{nl.dispose()}}this.get_viewModel().zoneMultiselectionViewModel.updateZoneChromeOnScroll()});this.$v.scroll(nk)},$c:function(){this.$v=tab.WorkbookView.findDashboardContainer();this.$w=$("<div class='"+'tab-dashSelection'+"'></div>");if(tab.FeatureFlags.isEnabled('DashboardDesignMode')){var nk=this.makeMouseSpec(this);this.$x=new EventUtils.TableauEventHandler(this.$v.get(0),nk)}},$b:function(){this.$v.append(this.$w)},$e:function(){this.$w.detach()},onViewModelPropertyChanged:function(nk,nl){if(nl.get_propertyName()==='visible'){this.$t()}},$t:function(){if(this.get_viewModel().get_visible()){this.$b()}else{this.$e()}},$9:function(nk){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$8(nm)}}},$8:function(nk){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){if(ss.isValue(nk)&&ss.isValue(nk.get_selectedZone())){var nl=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ng,nf,Object])).call(null,[nk]);this.$A[nk.get_selectedZone().get_zoneId()]=nl;this.$v=tab.WorkbookView.findDashboardContainer();nl.addToDom(this.$w)}}},$j:function(nk){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$i(nm)}}},$i:function(nk){var nl=this.$A[nk];if(ss.isValue(nl)){ReactDOM.unmountComponentAtNode(nl.get_rootElement()[0]);nl.dispose();delete this.$A[nk]}},$a:function(nk){nk.get_rootElement().addClass('tab-dashDragDrop');nk.get_rootElement().css({top:this.get_viewModel().get_dashboardContentOffsetTop()+'px',left:this.get_viewModel().get_dashboardContentOffsetLeft()+'px'});nk.addToDom(this.$v)},$m:function(nk,nl){this.$l(false);var nm=ss.safeCast(nk,fT);if(ss.isValue(nm)){nm.viewModel.add_disposed(nl);return}var nn=ss.safeCast(nk,dS);if(ss.isValue(nn)){nn.get_viewModel().add_disposed(nl)}},$f:function(nk){if(!this.get_viewModel().get_isDashboard()||this.get_viewModel().get_isStoryboard()||!tab.FeatureFlags.isEnabled('FlexibleDashboard')){return}if(this.get_viewModel().get_isFlexibleDashboard()){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$o))}this.$l(true);this.$n(nk);this.get_viewModel().zoneMultiselectionViewModel.hideZoneChrome();var nl=ss.getEnumerator(Object.keys(this.get_viewModel().get_zoneSelectionViewModels()));try{while(nl.moveNext()){var nm=nl.current();var nn=this.get_viewModel().get_zoneSelectionViewModels()[nm];nn.hideZoneChrome()}}finally{nl.dispose()}if(!this.get_viewModel().get_isFlexibleDashboard()||ss.isInstanceOfType(nk,fT)){EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$o))}},$n:function(nk){if(!tab.FeatureFlags.isEnabled('FlexibleDashboard')){return}var nl=ss.safeCast(nk,dS);var nm=null;if(ss.isValue(nl)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dO,dP,Object])).call(null,[nl.get_viewModel()])}var nn=ss.safeCast(nk,fT);if(ss.isValue(nn)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[fV,fU,Object])).call(null,[nn.viewModel])}var no=ss.safeCast(nk,dy);if(ss.isValue(no)){nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[dz,kE,Object])).call(null,[no.viewModel])}if(ss.isValue(nm)){this.$a(nm)}},$o:function(nk){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.get_viewModel().zoneMultiselectionViewModel.showZoneChrome();var nl=new ss.ObjectEnumerator(this.get_viewModel().get_zoneSelectionViewModels());try{while(nl.moveNext()){var nm=nl.current();nm.value.showZoneChrome()}}finally{nl.dispose()}}},get_isDragTracking:function(){return this.$y},set_isDragTracking:function(nk){this.$y=nk},$l:function(nk){if(this.get_viewModel().get_currentlyOnDesignDashboard()){this.set_isDragTracking(nk);if(!nk){this.$s(this.get_shapeSelector())}}else{this.set_isDragTracking(false)}},makeMouseSpec:function(nk){var nl=new EventUtils.EventHandleSpec;nl.dragStart=ss.mkdel(this,function(nn){this.dragToSelectOverride(nn,nk)});nl.dragMove=ss.mkdel(this,function(nn){this.$7(nn)});nl.dragEnd=ss.mkdel(this,this.$g);var nm=nl;return nm},dragToSelectOverride:function(nk,nl){if(this.get_viewModel().get_currentlyOnDesignDashboard()){if(this.get_isDragTracking()){return}this.$h(nl,nk)}},get_shapeSelector:function(){return this.$z},$h:function(nk,nl){this.$z=new dL;this.get_shapeSelector().createDomAndAppend($(tab.ApplicationView.dashboardViewportSelector));this.$q(this.get_shapeSelector());this.$p(nl)},$q:function(nk){if(ss.isValue(nk)&&!this.get_isDragTracking()){nk.show()}},$p:function(nk){if(nk.originalEvent['button']>1){return}if(this.get_isDragTracking()){return}this.$l(true);nk.preventDefault();var nl=nk.get_GestureInfo();this.get_shapeSelector().dragStarted(nl,this.getLocalOffsetForDBSpacer())},getLocalOffsetForDBSpacer:function(){var nk=$(tab.WorkbookView.dashboardSpacerSelector);return tab.DomUtil.getRectXY(nk)},getScrollOffsetForDBSpacer:function(){var nk=$(tab.WorkbookView.dashboardSpacerSelector);return{x:nk.scrollLeft(),y:tab.DoubleUtil.roundToInt(nk.scrollTop()),w:0,h:0}},$7:function(nk){if(this.get_isDragTracking()){nk.preventDefault();this.get_shapeSelector().updateAndRenderShape(nk.get_GestureInfo())}},$s:function(nk){if(ss.isValue(nk)){nk.hide();this.$k()}},$k:function(){if(ss.isValue(this.$z)){if(ss.isValue(this.$z.get_dom())){this.$z.get_dom().remove()}this.$z=null}},$r:function(nk,nl){if(!this.get_isDragTracking()){return}this.$l(false)},$g:function(nk){if(ss.isValue(this.get_shapeSelector())){var nl=this.get_shapeSelector().zonesTouchedByMarquee(this.get_viewModel().get_dashboardZones(),this.getScrollOffsetForDBSpacer());tab.SelectionClientCommands.setActiveZones(nl,null);this.$r(nk,this.get_shapeSelector())}}});var ek=global.tab.DashboardSelectionViewModel=ss.mkType(a,'tab.DashboardSelectionViewModel',function(nk){this.$6=null;this.$9={};this.$7=null;this.$8=false;this.$2$1=null;this.$2$2=null;this.zoneMultiselectionViewModel=null;this.zoneResizeViewModel=null;spiff.BaseViewModel.call(this);this.$6=nk;this.zoneMultiselectionViewModel=new mZ(nk);this.zoneResizeViewModel=new ne(nk);this.$7=[];this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.onDashboardModelChanged)).addEventBinding(ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_activeZoneChanged(ss.mkdel(this,this.$1));nl.add_zoneDragChanged(ss.mkdel(this,this.$5))}}),ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_activeZoneChanged(ss.mkdel(this,this.$1));nl.remove_zoneDragChanged(ss.mkdel(this,this.$5))}})))},{add_activeZonesAdded:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_activeZonesAdded:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_activeZonesRemoved:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_activeZonesRemoved:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_dashboardContentOffsetTop:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_dashboardContentOffsetLeft:function(){return tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()},get_isDashboard:function(){var nk=this.$6.get_model();return ss.isValue(nk)&&nk.get_isDashboard()},get_isFlexibleDashboard:function(){var nk=this.$6.get_model();return ss.isValue(nk)&&nk.get_isFlexibleLayoutEnabled()},get_isStoryboard:function(){var nk=this.$6.get_model();return ss.isValue(nk)&&nk.get_isStoryboard()},get_visible:function(){return this.$8},set_visible:function(nk){if(this.$8===nk){return}this.$8=nk;this.notifyPropertyChanged('visible')},get_currentlyOnDesignDashboard:function(){return this.$6.get_model().get_currentlyOnDesignDashboard()},get_selectedZones:function(){return this.$7},get_dashboardZones:function(){return this.$6.get_model().get_zoneModels()},get_hasSelectedFloatingZones:function(){if(this.get_selectedZones().length===0){return false}var nk=this.get_selectedZones();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(ss.isValue(nm)&&!nm.get_isFloating()){return false}}return true},get_hasSelectedZones:function(){return this.get_selectedZones().length>0},get_hasSelectedFloatingZonesOrGroupZones:function(){if(this.get_selectedZones().length===0){return false}var nk=this.get_selectedZones();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(ss.isValue(nm)&&!(nm.get_isFloating()||nm.get_isZoneInGroup())){return false}}return true},get_dashboardWidth:function(){return((ss.isValue(this.$6.get_model())&&ss.isValue(this.$6.get_model().get_dashboardSize()))?this.$6.get_model().get_dashboardSize().w:0)},get_dashboardHeight:function(){return((ss.isValue(this.$6.get_model())&&ss.isValue(this.$6.get_model().get_dashboardSize()))?this.$6.get_model().get_dashboardSize().h:0)},get_zoneSelectionViewModels:function(){return this.$9},dispose:function(){this.zoneMultiselectionViewModel.dispose();var nk=ss.getEnumerator(Object.keys(this.$9));try{while(nk.moveNext()){var nl=nk.current();tab.MiscUtil.dispose$1(this.$9[nl])}}finally{nk.dispose()}ss.clearKeys(this.$9);spiff.BaseViewModel.prototype.dispose.call(this)},onDashboardModelChanged:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.$4(true);if(ss.isValue(this.$6.get_model())&&this.$6.get_model().get_isDashboard()){this.$0()}}},moveZones:function(nk,nl){this.zoneMultiselectionViewModel.get_resizePreviewViewModel().delayMoveZonesCall(this.get_selectedZones(),nk,nl)},keyboardResizeZone:function(nk,nl){if(this.get_selectedZones().length===1){this.zoneMultiselectionViewModel.get_resizePreviewViewModel().updatePendingGeometry(this.get_selectedZones()[0]);this.zoneMultiselectionViewModel.get_resizePreviewViewModel().delayResizeZoneCall(this.get_selectedZones()[0],nk,nl)}},$1:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.$4(false);this.$0()}},$0:function(){var nk=this.$6.get_model();if(ss.isValue(nk)){var nl=nk.get_activeZoneIDs();var nm=[];for(var nn=0;nn<nl.length;nn++){var no=nl[nn];var np=nk.getZone(no);if(ss.isValue(np)&&!ss.keyExists(this.$9,no)){var nq=new ng(this.$6,ss.mkdel(this.zoneResizeViewModel,this.zoneResizeViewModel.isEdgeOrParentsResizable),np,true);this.$9[no]=nq;nm.push(nq);this.$7.push(np);np.get_zoneCommonModel().add_resizeZone(ss.mkdel(this.zoneMultiselectionViewModel,this.zoneMultiselectionViewModel.handleZoneSizeChanged))}}if(!tab.MiscUtil.isNullOrEmpty$3(nm)){this.zoneMultiselectionViewModel.handleZoneSizeChanged();this.$2(nm)}}},$4:function(nk){var nl=[];for(var nm=this.$7.length-1;nm>=0;nm--){var nn=this.$7[nm];if(ss.keyExists(this.$9,nn.get_zoneId())||nk){this.$9[nn.get_zoneId()].dispose();delete this.$9[nn.get_zoneId()];nl.push(nn.get_zoneId());ss.removeAt(this.$7,nm);nn.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this.zoneMultiselectionViewModel,this.zoneMultiselectionViewModel.handleZoneSizeChanged))}}if(!tab.MiscUtil.isNullOrEmpty$3(nl)){this.zoneMultiselectionViewModel.handleZoneSizeChanged();this.$3(nl)}},$5:function(){if(tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.zoneMultiselectionViewModel.showZoneChrome();var nk=new ss.ObjectEnumerator(this.get_zoneSelectionViewModels());try{while(nk.moveNext()){var nl=nk.current();nl.value.showZoneChrome()}}finally{nk.dispose()}}},$3:function(nk){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(nk)}},$2:function(nk){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(nk)}}});var el=global.tab.DashboardSheetListActionHandler=ss.mkType(a,'tab.DashboardSheetListActionHandler',function(nk,nl){this.$2=null;this.$3=null;this.$2=nk;this.$3=nl},{$1:function(){if(tab.ModelUtils.isMultiSelectFeatureEnabled(tab.ModelUtils.findContentDashboard(null))){return ss.isValue(this.$2.get_model())&&this.$2.get_model().get_activeZoneIDs().length===1}else{return ss.isValue(this.$2.get_model())&&this.$2.get_model().get_activeZoneID()!==0}},$0:function(){if(tab.ModelUtils.isMultiSelectFeatureEnabled(tab.ModelUtils.findContentDashboard(null))){return ss.isValue(this.$2.get_model())&&this.$2.get_model().get_activeZoneIDs().length>1}return false},getSelectedSheet:function(nk){if(ss.isValue(this.$2.get_model())&&ss.isValue(this.$2.get_model().sheetListModel)&&ss.isValue(this.$2.get_model().sheetListModel.get_sheets())&&this.$2.get_model().get_activeZoneID()!==0){var nl=this.$2.get_model().getZone(this.$2.get_model().get_activeZoneID());if(ss.isValue(nl)&&nl.get_zoneType()==='viz'){var nm=lk.findSheetListItemByName(this.$2.get_model().sheetListModel.get_sheets(),nl.get_worksheetName());return(ss.isNullOrUndefined(nm)?null:nm.pm)}}return nk},determineSelectedSheet:function(nk,nl){var nm=nk;if(nl===null){if(!this.$1()){nm=null}return nm}else{if(nl.isIncluded){var nn=tab.ModelUtils.getZoneIdForSheetName(nl.name);if(nn>-1){var no=this.$2.get_model().zonesModel.getZone(nn);tab.SelectionClientCommands.setActiveZone(no.get_zoneId(),'replace',null);return nm}}if(_.isEqual(nk,nl)){return nm}nm=nl;if(this.$1()||this.$0()){tab.SelectionClientCommands.clearActiveZone()}return nm}},onUpdatedSheetList:function(nk){return nk},onNewFlipboardNav:function(nk){return nk},onActiveZoneChanged:function(nk){if(this.$1()){return null}return nk},onDoubleClicked:function(nk,nl){if(tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()&&!nk.isIncluded){tab.DashboardClientCommands.addSheetToDashboard(nk.name,nl)}},getDragInstance:function(nk){var nl=false;if(ss.isValue(this.$3)){nl=this.$3.get_addNewZoneAsFloating()}if(nk.isIncluded){return null}var nm=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nn=$.Deferred();nm.done(function(nq){nn.resolve(nq.zoneDragDrop)}).fail(function(){nn.reject()});var no=mT.createDeferredRect(nn);var np;if(this.$2.get_model().get_isFlexibleLayoutEnabled()){np=li.createFlexible(new fo(nk.name,nl),nn,no)}else{np=li.create(new fo(nk.name,nl),nn,no)}return np}});var em=global.tab.DashboardSheetListComponent=ss.mkType(a,'tab.DashboardSheetListComponent',function(nk,nl){ss.makeGenericType(spiff.ListComponent$2,[Object,Object]).call(this,nk,nl);spiff.PureRender.mixIn(this)},{getItemKey:function(nk){return nk.name},isSelected:function(nk){return ss.isValue(this.props.selectedSheet)&&ss.referenceEquals(this.props.selectedSheet.name,nk.name)},buildItem:function(nk){return React.createElement(lj,{actions:this.props.actions,selected:this.isSelected(nk),sheet:nk,isReplaceSheetSource:this.props.hasReplaceableSheet&&!nk.isIncluded})}});var en=global.tab.DashboardShowGridShortcut=ss.mkType(a,'tab.DashboardShowGridShortcut',function(nk){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=nk},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['g',null].concat(null))},getAdditionalOptions:function(){var nk=new Object;nk.throttleTimeInMs=50;nk.shouldUseKeyUp=true;return nk},isAllowed:function(nk){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,nk)&&this.$0.addedToDom&&this.$0.get_viewModel().get_isDashboard()},executeShortcut:function(nk){tab.DashboardClientCommands.showGridOnDashboard(!this.$0.get_viewModel().dashboardGrid.get_isGridOn());dY.logGridStateChangeEvent(this.$0.get_viewModel().dashboardGrid.get_isGridOn(),true)},getTelemetryKey:function(){return'Dashboard Show Grid'}});var eo=global.tab.DashboardSizeComponent=ss.mkType(a,'tab.DashboardSizeComponent',function(nk,nl){this.$6=null;this.$7=null;this.$9=null;this.$8=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state={isPopupShowing:false};this.$6=ss.mkdel(this,function(nm){this.$9=ReactDOM.findDOMNode(ss.safeCast(nm,spiff.TextDropdownButtonComponent))});this.$7=ss.mkdel(this,function(nm){this.$8=ss.safeCast(nm,ss.isValue(nm)&&(ss.isInstanceOfType(nm,Element)&&nm.tagName==='INPUT'))})},{componentDidMount:function(){EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.$1))},componentWillUnmount:function(){EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.$1))},render:function(){var nk=((this.props.isNonDefaultLayout&&!this.props.isStory)?this.$4():this.$5());var nl=(this.state.isPopupShowing?ss.mkdel(this,this.$3)():null);return spiff.DOMElements.div({},nk,nl)},$5:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.$2);return EventUtils.EventForwarder.div(nk,{className:'tabAuthDashboardSizeSelector',title:this.props.currentSizeText},React.createElement(spiff.TextDropdownButtonComponent,{selectionText:this.props.currentSizeText,styleClass:'tab-unification-line-arrow-dropdown',key:'sizeButton',ref:this.$6}))},$3:function(){var nk=React.createElement(ep,this.props.popupProps);return React.createElement(SharedWidgets.DialogWidget,{anchorEl:this.$9,key:'sizePopup',anchorOrigin:{horizontal:'left',vertical:'bottom'},stackedOrigin:{horizontal:'left',vertical:'top'},zIndex:988,children:nk,dialogWidth:260,handleGlassClick:ss.mkdel(this,this.$1),onCloseRequest:ss.mkdel(this,this.$1),isModal:true,isGlassTransparent:true,positioningBehavior:3,type:2,title:tab.Strings.DashboardAuthoringSizePopupTitle,testId:'DashboardSizeAuthoringPopup'})},$4:function(){var nk='tabAuthDashboardSizeRadio';var nl=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{'aria-label':this.props.sectionTitle,buttonList:this.props.sizeRadioOptions,checkedIndex:this.props.sizeRadioSelectionIndex,handleChange:this.props.onSizeRadioChange});if(ss.isValue(this.props.heightStepperProps)){this.props.heightStepperProps.inputRef=this.$7;this.props.heightStepperProps.onValueUpdated=ss.mkdel(this,this.$0)}var nm=React.createElement(SharedWidgets.IntegerStepperWidget,this.props.heightStepperProps);return spiff.ReactElement.div$1(nk,[nl,nm])},$0:function(nk){this.props.onFitWidthStepperValueChange(nk,ss.referenceEquals(this.$8,document.activeElement))},$2:function(nk){this.setState({isPopupShowing:true})},$1:function(){this.setState({isPopupShowing:false})}});var ep=global.tab.DashboardSizePopupComponent=ss.mkType(a,'tab.DashboardSizePopupComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){return spiff.DOMElements.div({className:'tabAuthDashboardSizePopup'},this.$7(),this.$6())},$7:function(){var nk=_.map(this.props.sizeModeOptions,function(nm){return nm.sizeModeName.toString()});var nl=this.props.selectedSizeMode.sizeModeName;return this.$2(nk,ss.mkdel(this,this.$9),nl,'SizeMode')},$6:function(){var nk=null;switch(this.props.currentSizeMode){case'automatic':{nk=spiff.DOMElements.div(null,tab.Strings.AutomaticDashboardSizeText);break}case'fixed':{nk=this.$3();break}default:{nk=this.$5();break}}return spiff.DOMElements.div({className:'tabAuthDashboardSizeControls'},nk)},$5:function(){var nk=!this.props.maxSelected;var nl=!this.props.minSelected;var nm=this.$0(tab.Strings.DashboardAuthoringMinimumSizeLabel,'tabAuthDashboardMinSizeControls','dash-size-min-checkbox',ss.mkdel(this,function(no){this.props.toggleRangeBoundaries(no,this.props.maxSelected)}),ss.mkdel(this,function(no){this.props.setMinWidth(no)}),ss.mkdel(this,function(no){this.props.setMinHeight(no)}));var nn=this.$0(tab.Strings.DashboardAuthoringMaximumSizeLabel,'tabAuthDashboardMaxSizeControls','dash-size-max-checkbox',ss.mkdel(this,function(no){this.props.toggleRangeBoundaries(this.props.minSelected,no)}),ss.mkdel(this,function(no){this.props.setMaxWidth(no)}),ss.mkdel(this,function(no){this.props.setMaxHeight(no)}));return spiff.DOMElements.div(null,nm(this.props.minSelected,nk,this.props.minWidth,this.props.minHeight),nn(this.props.maxSelected,nl,this.props.maxWidth,this.props.maxHeight))},$0:function(nk,nl,nm,nn,no,np){return ss.mkdel(this,function(nq,nr,ns,nt){var nu=this.$8(nq,ns,nt,no,np);var nv=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:nk,checked:nq,handleChange:nn,testId:nm,disabled:nr});return spiff.DOMElements.div({className:nl},nv,nu)})},$8:function(nk,nl,nm,nn,no){var np=this.$1(nl,tab.Strings.DashboardAuthoringWidthSpinnerLabel,nn,!nk,'tabAuthDashboardWidthSpinner');var nq=this.$1(nm,tab.Strings.DashboardAuthoringHeightSpinnerLabel,no,!nk,'tabAuthDashboardHeightSpinner');return spiff.DOMElements.div({className:'tabAuthDashboardSpinnerPair'},np,nq)},$1:function(nk,nl,nm,nn,no){return spiff.DOMElements.div({className:no},React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'dashboard-size-component-'+nl+no,label:nl,max:this.props.maxDimension,min:this.props.minDimension,delta:this.props.stepSize,start:nk,onValueUpdated:nm,disabled:nn}))},$3:function(){var nk=this.$4();var nl=this.$8(true,this.props.width,this.props.height,ss.mkdel(this,function(nm){this.props.setWidth(nm)}),ss.mkdel(this,function(nm){this.props.setHeight(nm)}));return spiff.DOMElements.div(null,nk,nl)},$4:function(){var nk=(ss.isValue(this.props.selectedPreset)?this.props.selectedPreset.get_name():tab.Strings.DashboardAuthoringCustomSizeName);var nl=_.map(this.props.presets,function(nm){return nm.get_name()});return this.$2(nl,ss.mkdel(this,this.$a),nk,'Presets')},$2:function(nk,nl,nm,nn){return React.createElement(SharedWidgets.DropdownWidget,{dropdownType:1,maxHeight:300,menuItemInfos:_.map(nk,ss.mkdel(this,function(no){return{displayValue:no,value:no}})),testId:nn,onSelect:nl,selectedValue:nm,placeholder:nm,label:'',zIndex:988})},$a:function(nk){this.props.setToPresetFromName(nk)},$9:function(nk){this.props.setNewSizeModeFromName(nk)}});var eq=global.tab.DashboardSizePopupComponentConstants=ss.mkType(a,'tab.DashboardSizePopupComponentConstants');var er=global.tab.DashboardSizePopupViewModel=ss.mkType(a,'tab.DashboardSizePopupViewModel',function(nk){this.$e=null;this.$f=null;this.$h=null;this.$g=null;this.$i=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$e=nk;this.$f=nk.createChildModelHolder(tab.DashboardSizeControlModel).call(nk,function(nl){return nl.get_dashboardSizeControlModel()});this.disposables.add$2([this.$f.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_sizeInfoUpdated(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.add_sizeInfoUpdated(ss.mkdel(this,this.incrementProps))})),this.$f])},{get_minHeight:function(){return this.$9().get_currentMinHeight()},set_minHeight:function(nk){this.setRangedSize(this.get_minWidth(),nk,this.get_maxWidth(),this.get_maxHeight(),'minheight')},get_minWidth:function(){return this.$9().get_currentMinWidth()},set_minWidth:function(nk){this.setRangedSize(nk,this.get_minHeight(),this.get_maxWidth(),this.get_maxHeight(),'minwidth')},get_maxHeight:function(){return this.$9().get_currentMaxHeight()},set_maxHeight:function(nk){this.setRangedSize(this.get_minWidth(),this.get_minHeight(),this.get_maxWidth(),nk,'maxheight')},get_maxWidth:function(){return this.$9().get_currentMaxWidth()},set_maxWidth:function(nk){this.setRangedSize(this.get_minWidth(),this.get_minHeight(),nk,this.get_maxHeight(),'maxwidth')},get_height:function(){return this.$9().get_currentHeight()},set_height:function(nk){this.setFixedSize(this.get_width(),nk,'fixedheight')},get_width:function(){return this.$9().get_currentWidth()},set_width:function(nk){this.setFixedSize(nk,this.get_height(),'fixedwidth')},get_storedWidth:function(){var nk=this.$h;if(ss.isNullOrUndefined(nk)){nk=this.get_width()}return nk},set_storedWidth:function(nk){this.$h=nk},get_storedHeight:function(){var nk=this.$g;if(ss.isNullOrUndefined(nk)){nk=this.get_height()}return nk},set_storedHeight:function(nk){this.$g=nk},$b:function(){return this.$e.get_model().get_sheetName()},$c:function(){return this.$f.get_model()},$a:function(){return this.$f.get_model().layoutInfoModel},$9:function(){return this.$f.get_model().dashboardSizeModel},$d:function(){return this.$f.get_model().get_sizeModeOptions()},$5:function(){if(this.$9().get_sizeMode()!=='fixed'||ss.isNullOrUndefined(this.$a())||ss.isNullOrUndefined(this.$9())){return null}var nk=_.find(this.$a().get_presetSizes(),ss.mkdel(this,function(nl){return nl.get_width()===this.get_width()&&nl.get_height()===this.get_height()}));return((typeof(nk)==='undefined')?null:nk)},$6:function(){return _.find(this.$d(),ss.mkdel(this,function(nk){return nk.dashboardSizingMode===this.$9().get_sizeMode()}))},$7:function(nk){return _.find(this.$a().get_presetSizes(),function(nl){return ss.referenceEquals(nl.get_name(),nk)})},$8:function(nk){return _.find(this.$d(),function(nl){return ss.referenceEquals(nl.sizeModeName,nk)}).dashboardSizingMode},createInitialProps:function(){return{toggleRangeBoundaries:ss.mkdel(this,this.toggleRangeBoundaries),setToPresetFromName:ss.mkdel(this,this.setToPresetFromName),setNewSizeModeFromName:ss.mkdel(this,this.setNewSizeModeFromName),setHeight:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_height(nk)}))}),setMinHeight:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_minHeight(nk)}))}),setMaxHeight:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_maxHeight(nk)}))}),setWidth:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_width(nk)}))}),setMinWidth:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_minWidth(nk)}))}),setMaxWidth:ss.mkdel(this,function(nk){this.$4(ss.mkdel(this,function(){this.set_maxWidth(nk)}))})}},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$f.get_model())||ss.isNullOrUndefined(this.$c())||ss.isNullOrUndefined(this.$9())||ss.isNullOrUndefined(this.$a())){return null}var nk={minSelected:this.get_minWidth()>0||this.get_minHeight()>0,maxSelected:this.get_maxWidth()>0||this.get_maxHeight()>0,currentSizeMode:this.$9().get_sizeMode(),width:this.get_width(),height:this.get_height(),maxHeight:(this.get_props().maxSelected?this.get_maxHeight():this.get_storedHeight()),maxWidth:(this.get_props().maxSelected?this.get_maxWidth():this.get_storedWidth()),minWidth:(this.get_props().minSelected?this.get_minWidth():this.get_storedWidth()),minHeight:(this.get_props().minSelected?this.get_minHeight():this.get_storedHeight()),presets:this.$a().get_presetSizes(),selectedPreset:this.$5(),sizeModeOptions:this.$d(),selectedSizeMode:this.$6(),minDimension:this.$c().get_minDimension(),maxDimension:this.$c().get_maxDimension(),stepSize:this.$c().get_stepSize()};return nk},toggleRangeBoundaries:function(nk,nl){if(!nk&&!nl){this.setNewSizeMode('automatic')}else if(!nk){this.set_storedWidth(this.get_minWidth());this.set_storedHeight(this.get_minHeight());this.setRangedSize(null,null,this.get_maxWidth(),this.get_maxHeight(),'no')}else if(!nl){this.set_storedWidth(this.get_maxWidth());this.set_storedHeight(this.get_maxHeight());this.setRangedSize(this.get_minWidth(),this.get_minHeight(),null,null,'no')}else{var nm=((this.get_minWidth()!==0)?this.get_minWidth():Math.min(this.get_storedWidth(),this.get_maxWidth()));var nn=((this.get_minHeight()!==0)?this.get_minHeight():Math.min(this.get_storedHeight(),this.get_maxHeight()));var no=((this.get_maxWidth()!==0)?this.get_maxWidth():Math.max(this.get_storedWidth(),this.get_minWidth()));var np=((this.get_maxHeight()!==0)?this.get_maxHeight():Math.max(this.get_storedHeight(),this.get_minHeight()));this.setRangedSize(nm,nn,no,np,'no')}},setToPresetFromName:function(nk){var nl=this.$7(nk);if(ss.isValue(nl)){this.setToPreset(nl)}},setToPreset:function(nk){if(nk.get_width()===0&&nk.get_height()===0){this.setAutomaticSize()}else{this.setFixedSize(nk.get_width(),nk.get_height(),'no')}},setNewSizeModeFromName:function(nk){var nl=this.$8(nk);this.setNewSizeMode(nl)},setNewSizeMode:function(nk){switch(nk){case'automatic':{this.setAutomaticSize();break}case'fixed':{var nl=this.get_width();var nm=this.get_height();if(this.$9().get_sizeMode()==='range'&&this.get_minWidth()>0&&this.get_minHeight()>0){nl=this.get_minWidth();nm=this.get_minHeight()}this.setFixedSize(nl,nm,'no');break}default:{this.setRangedSize(this.get_width(),this.get_height(),this.get_width()+this.$c().get_stepSize(),this.get_height()+this.$c().get_stepSize(),'no');break}}},$4:function(nk){this.$3();this.$i=window.setTimeout(ss.mkdel(this,function(){this.$3();nk()}),450)},$3:function(){this.$i=tab.MiscUtil.clearTimeout(this.$i)},setAutomaticSize:function(){tab.DashboardClientCommands.setDashboardSizeAutomatic(this.$b(),this.$c())},setFixedSize:function(nk,nl,nm){tab.DashboardClientCommands.setDashboardSizeFixed(this.$b(),nm,nk,nl,this.$c())},setRangedSize:function(nk,nl,nm,nn,no){tab.DashboardClientCommands.setDashboardSizeRange(this.$b(),no,nk,nl,nm,nn,this.$c())}});var es=global.tab.DashboardSizeRadioOption=ss.mkEnum(a,'tab.DashboardSizeRadioOption',{default$1:0,fitAll:1,fitWidth:2});var et=global.tab.DashboardSizeViewModel=ss.mkType(a,'tab.DashboardSizeViewModel',function(nk){this.$m=null;var nl=[];nl.push({value:tab.Strings.AuthDashboardPaneSizeFitDefault,label:tab.Strings.AuthDashboardPaneSizeFitDefault,testId:'size-default-opt'});nl.push({value:tab.Strings.AuthDashboardPaneSizeFitAll,label:tab.Strings.AuthDashboardPaneSizeFitAll,testId:'size-fit-all-opt'});nl.push({value:tab.Strings.AuthDashboardPaneSizeFitWidth,label:tab.Strings.AuthDashboardPaneSizeFitWidth,testId:'size-fit-width-opt'});this.$n=nl;this.dashboardSizePopup=null;this.$l=null;this.$k=0;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$m=nk;this.dashboardSizePopup=new er(nk);this.disposables.add$1(this.$m.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nm){if(nm.get_isDashboard()&&!ss.referenceEquals(nm.get_sheetName(),this.$l)){this.$l=nm.get_sheetName();this.$k=0}nm.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nm.add_currentDeviceLayoutChanged(ss.mkdel(this,this.$4));if(ss.isValue(nm.get_dashboardSizeControlModel())){nm.get_dashboardSizeControlModel().add_sizeInfoUpdated(ss.mkdel(this,this.$6))}}),ss.mkdel(this,function(nm){nm.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nm.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.$4));if(ss.isValue(nm.get_dashboardSizeControlModel())){nm.get_dashboardSizeControlModel().remove_sizeInfoUpdated(ss.mkdel(this,this.$6))}})));this.disposables.add$2([this.addChildViewModel(this.dashboardSizePopup),this.dashboardSizePopup])},{$b:function(){return this.$m.get_model()},$c:function(){return this.$b().get_dashboardSizeControlModel()},$d:function(){return this.$c().dashboardSizeModel},$a:function(){return this.$b().get_currentDeviceLayout()},$e:function(){return this.$d().get_currentHeight()},$f:function(){return ss.isValue(this.$b())&&this.$b().get_isCurrentLayoutAutoGenerated()},$h:function(){if(this.$j()==='automatic'){if(this.$a()==='desktop'){return 0}return 1}else if(this.$j()==='vscroll'){return 2}return 0},$i:function(){return this.$b().get_sheetName()},$j:function(){return this.$d().get_sizeMode()},$g:function(){if(this.$a()==='default'){return tab.Strings.AuthDashboardPaneSizeDefault}return tab.Strings.AuthDashboardPaneSize(dM.getUserString(this.$a()))},$4:function(){this.$k=0;this.incrementProps()},$6:function(){this.$9();this.incrementProps()},$7:function(nk,nl){this.$9();var nm=nl;if(nm===0){tab.DashboardClientCommands.resetDashboardCurrentLayoutSizing(this.$i())}else if(nm===1){tab.DashboardClientCommands.setDashboardSizeAutomatic(this.$i(),this.$c())}else{this.$8()}},$8:function(){var nk=((this.$k>0)?this.$k:this.$e());tab.DashboardClientCommands.setDashboardSizeVscroll(this.$i(),'no',0,nk,this.$c(),'immediately')},$5:function(nk,nl){var nm=(nl?'immediately':'afterDelay');tab.DashboardClientCommands.setDashboardSizeVscroll(this.$i(),'scrollableheight',0,nk,this.$c(),nm)},$9:function(){if(this.$h()===2){this.$k=this.$e()}},$3:function(){var nk=this.$h()!==2||this.$f();var nl={containerStyle:et.$1,delta:this.$c().get_stepSize(),disabled:nk,inputStyle:et.$3,label:tab.Strings.DashboardAuthoringHeightSpinnerLabel,labelStyle:(nk?et.$2:et.$4),max:this.$c().get_maxDimension(),min:this.$c().get_minDimension(),pageDelta:this.$c().get_stepSize(),testId:'fit-width-height-stepper'};if(nk&&this.$k>0){nl.start=this.$k}else if(!nk){nl.start=this.$e()}return nl},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$b())||ss.isNullOrUndefined(this.$c())||ss.isNullOrUndefined(this.$d())){return null}return{currentSizeText:this.$d().get_currentSizeText(),heightStepperProps:this.$3(),isNonDefaultLayout:this.$a()!=='default',isStory:tsConfig.current_sheet_type==='story',onSizeRadioChange:ss.mkdel(this,this.$7),onFitWidthStepperValueChange:ss.mkdel(this,this.$5),popupProps:this.dashboardSizePopup.get_props(),sectionTitle:this.$g(),sizeRadioOptions:this.$n.map(ss.mkdel(this,function(nk){nk.disabled=this.$f();return nk})),sizeRadioSelectionIndex:this.$h()}}});var eu=global.tab.DashboardTitleCheckboxViewModel=ss.mkType(a,'tab.DashboardTitleCheckboxViewModel',function(nk){this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=nk;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{isChecked:false,changeDashboardTitle:ss.mkdel(this,this.toggleDashboardTitle)}},createUpdatedProps:function(){if(ss.isValue(this.$3.get_model())){return{isChecked:this.$3.get_model().get_isTitleVisible()}}return null},toggleDashboardTitle:function(nk){if(ss.isValue(this.$3)&&ss.isValue(this.$3.get_model())&&this.$3.get_model().get_isTitleVisible()!==nk){tab.DashboardClientCommands.showDashboardTitle(this.$3.get_model().get_sheetName())}}});var ev=global.tab.DashboardZoneListComponent=ss.mkType(a,'tab.DashboardZoneListComponent',function(nk,nl){this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$2={renderSingleNode:ss.mkdel(this,this.$1)}},{render:function(){var nk=[];for(var nl=0;nl<this.props.rootNodes.length;nl++){var nm=this.props.rootNodes[nl];nk.push(mf.create(tab.DeviceLayoutZoneInfo).call(null,this.$0(nm)))}return spiff.DOMElements.div({},nk)},$0:function(nk){var nl=nk.get_item().deviceZoneListItem;return $.extend({rootNode:nk,key:nl.get_zoneName()+'_'+nl.get_zoneId()},this.$2)},$1:function(nk){return ew.create({addToDashboard:this.props.addToDashboard,createDragInstance:this.props.createDragInstance,deviceLayoutZoneInfo:nk,disabled:this.props.isCurrentLayoutAutoGenerated,selected:this.props.selectedZone===nk.deviceZoneListItem.get_zoneId(),selectZone:this.props.selectZone,showContextMenu:this.props.showContextMenu})}});var ew=global.tab.DashboardZoneListNodeComponent=ss.mkType(a,'tab.DashboardZoneListNodeComponent',function(nk,nl){this.$5=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$5=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{componentDidMount:function(){if(this.props.selected){this.$4()}},componentDidUpdate:function(nk){var nl=nk.selected;if(this.props.selected&&!nl){this.$4()}},$4:function(){var nk=ReactDOM.findDOMNode(this);var nl=$(nk).closest('.'+'tab-zoneList').get(0);spiff.ScrollTo.elementInContainer(nk,nl)},startDrag:function(nk){if(!ss.staticEquals(this.props.createDragInstance,null)){return this.props.createDragInstance(this.props.deviceLayoutZoneInfo)}return null},acceptsDragType:function(){return 1},render:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.$2);nk.doubleTap=ss.mkdel(this,this.$0);nk.rightClick=ss.mkdel(this,this.$1);var nl=nk;var nm=['tab-zoneListNode'];if(this.props.disabled||!this.props.deviceLayoutZoneInfo.deviceZoneVisibilityListItem.get_isEnabled()){nm.push('disabledNode')}if(this.props.selected){nm.push('selected')}var nn=this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_label();return EventUtils.EventForwarder.div(nl,{className:nm.join(' '),ref:this.$5},this.$3(),spiff.DOMElements.div({className:'zoneLabel',title:nn,key:nn},nn))},$3:function(){var nk=['tab-zoneTypeIcon'];var nl=this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_zoneType();if(nl==='layout-flow'){if(this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_direction()==='vertical'){nk.push('vertical')}else{nk.push('horizontal')}}else if(nl==='dashboard-object'){nk.push(this.props.deviceLayoutZoneInfo.deviceZoneListItem.get_dashboardObjectType().toString())}else{nk.push(nl.toString())}if(this.props.deviceLayoutZoneInfo.deviceZoneVisibilityListItem.get_isVisible()){nk.push('zoneIsVisible')}return spiff.DOMElements.div({className:'tab-zoneTypeContainerIcon',key:'zone-list-icon-container'},spiff.DOMElements.div.apply(null,[{className:nk.join(' ')}].concat(null)))},$0:function(nk){if(!ss.staticEquals(this.props.addToDashboard,null)&&!this.props.disabled){this.props.addToDashboard(this.props.deviceLayoutZoneInfo)}},$1:function(nk){if(!ss.staticEquals(this.props.showContextMenu,null)&&!this.props.disabled){var nl=ReactDOM.findDOMNode(this);this.props.showContextMenu(this.props.deviceLayoutZoneInfo,new spiff.ShowMenuOptions($(nl),false))}},$2:function(nk){if(!ss.staticEquals(this.props.selectZone,null)&&!this.props.disabled){this.props.selectZone(this.props.deviceLayoutZoneInfo)}}},{create:function(nk){return React.createElement(ew,nk)}});var ex=global.tab.DashboardZoneObjectComponent=ss.mkType(a,'tab.DashboardZoneObjectComponent',function(nk){this.$d=null;this.$f=null;this.$e=null;spiff.PureRenderComponent.call(this,nk);var nl=new ey;nl.showFlyoutMenu=false;nl.selectedMenuItem=nk.zoneObjLocalizedName;nl.selectedIconPath=nk.encodedSVGIcon;this.state=nl;this.$d=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}));this.$f=ss.mkdel(this,function(nm){this.$e=nm})},{startDrag:function(nk){return this.props.createDragInstance(this.$2(this.state.selectedMenuItem))},acceptsDragType:function(){return 1},$7:function(nk){if(!this.props.disabled){this.props.addToDashboard(this.$2(this.state.selectedMenuItem))}},$8:function(nk){if(!this.props.disabled){this.$c()}},render:function(){var nk=(this.state.showFlyoutMenu?this.$b():null);var nl=this.$a();var nm=new EventUtils.EventHandleSpec;nm.doubleTap=ss.mkdel(this,this.$7);var nn=nm;if(ss.isValue(this.props.flyoutMenuInfo)){nn.rightClick=ss.mkdel(this,this.$8)}var no=(this.props.disabled?'disabled':'');return EventUtils.EventForwarder.div(nn,{ref:(this.props.disabled?null:this.$d),className:'tabDashboardZoneObject'+' '+no+' '+ex.getObjectClassFullName(this.props.zoneObj.toString()),title:this.state.selectedMenuItem},nl,spiff.DOMElements.span({key:'name',className:'tabDashboardZoneObjectName',ref:this.$f},this.state.selectedMenuItem),nk)},$6:function(nk){return ex.getObjectClassFullName(nk)+'Icon'},$b:function(){var nk={anchorEl:this.$e,toggleEl:this.$e,anchorOrigin:{vertical:'bottom',horizontal:'right'},stackedOrigin:{vertical:'top',horizontal:'right'},allowAutoPosition:true,onSelect:ss.mkdel(this,function(nl){this.onMenuSelection(nl)}),requestCloseAll:ss.mkdel(this,function(){this.onMenuSelection('')}),menuStyle:{width:250},menuItemInfos:ss.arrayClone(this.$5(this.props.flyoutMenuInfo)),testId:'dashboard-object-pane-flyout-menu'};return spiff.DOMElements.div({key:'flyout-menu'},React.createElement(SharedWidgets.FlyoutListMenuWidget,nk))},$a:function(){if(ss.isNullOrUndefined(this.props.encodedSVGIcon)){return spiff.DOMElements.span({key:'icon',className:'tabDashboardZoneObjectIcon'+' '+this.$6(this.props.zoneObj.toString())})}else{return spiff.DOMElements.img({key:'icon',src:'data:image/svg+xml;base64,'+this.state.selectedIconPath,className:'tabDashboardZoneObjectIcon'})}},onMenuSelection:function(nk){if(nk===''){var nl=new ey;nl.showFlyoutMenu=false;nl.selectedMenuItem=this.state.selectedMenuItem;nl.selectedIconPath=this.state.selectedIconPath;this.setState(nl)}else{var nm=new ey;nm.showFlyoutMenu=false;nm.selectedMenuItem=this.$0(nk);nm.selectedIconPath=this.$3(nk);this.setState(nm);var nn=this.$1(nk);this.props.addToDashboard(nn)}},$5:function(nk){var nl=[];var nm=new ss.ObjectEnumerator(nk);try{while(nm.moveNext()){var nn=nm.current();var no=nn.key.toString();nl.push({value:no,displayValue:nn.value.localizedName,checked:this.$9(no)})}}finally{nm.dispose()}return Array.prototype.slice.call(nl)},$c:function(){var nk=new ey;nk.showFlyoutMenu=!this.state.showFlyoutMenu;nk.selectedMenuItem=this.state.selectedMenuItem;nk.selectedIconPath=this.state.selectedIconPath;this.setState(nk)},$9:function(nk){return ss.referenceEquals(this.state.selectedMenuItem,this.$0(nk))},$0:function(nk){var nl=this.$4(nk);if(ss.isValue(nl)){return nl.localizedName}return''},$3:function(nk){var nl=this.$4(nk);if(ss.isValue(nl)){return nl.encodedSVGIcon}return''},$1:function(nk){var nl=this.$4(nk);if(ss.isValue(nl)){return nl.objectStateInfo}return null},$2:function(nk){if(ss.isNullOrUndefined(this.props.flyoutMenuInfo)){return null}var nl=new ss.ObjectEnumerator(this.props.flyoutMenuInfo);try{while(nl.moveNext()){var nm=nl.current();if(ss.referenceEquals(nm.value.localizedName,nk)){return nm.value.objectStateInfo}}}finally{nl.dispose()}return null},$4:function(nk){var nl=new ss.ObjectEnumerator(this.props.flyoutMenuInfo);try{while(nl.moveNext()){var nm=nl.current();if(ss.referenceEquals(nm.key.toString(),nk)){return nm.value}}}finally{nl.dispose()}return null}},{getObjectClassFullName:function(nk){return'tab'+nk+'ZoneObject'}});var ey=global.tab.DashboardZoneObjectComponentState=ss.mkType(a,'tab.DashboardZoneObjectComponentState',function(){this.showFlyoutMenu=false;this.selectedMenuItem=null;this.selectedIconPath=null});var ez=global.tab.DashboardZoneObjectsPaneComponent=ss.mkType(a,'tab.DashboardZoneObjectsPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{$0:function(nk){var nl=nk.renderContext;if(nl==='ShouldNotRender'){return false}var nm=this.props.isFlexibleLayoutEnabled;if(nm&&this.$1(nl)){return true}if(!nm&&this.$2(nl)){return true}return false},$1:function(nk){return nk==='FlexibleDashboardsOnly'||nk==='BothLegacyAndFlexibleDashboards'},$2:function(nk){return nk==='LegacyDashboardsOnly'||nk==='BothLegacyAndFlexibleDashboards'},render:function(){var nk=_.map(_.filter(this.props.zoneObjectList,ss.mkdel(this,this.$0)),ss.mkdel(this,function(nl){nl.disabled=this.props.currentLayoutIsAutoGenerated;return React.createElement(ex,nl)}));return spiff.DOMElements.div({className:'tabDashboardZoneObjects'},nk)}});var eA=global.tab.DashboardZoneObjectsProvider=ss.mkType(a,'tab.DashboardZoneObjectsProvider',function(){},{addExportButtonZoneObjectViewModel:function(nk,nl,nm){if(nk.hasDashboardObjectType('export-button')){var nn=nk.getDashboardObjectStateInfo('export-button');nm.push(eC.exportButtonZoneObjectViewModel(nl,nn.dashboardObjectHandle,nn.dashboardObjectStateHandle))}},$0:function(nk,nl,nm){if(nk.hasDashboardObjectType('navigation-button')){var nn=nk.getDashboardObjectStateInfo('navigation-button');nm.push(eC.navigationButtonZoneObjectViewModel(nl,nn.dashboardObjectHandle,nn.dashboardObjectStateHandle))}else{nm.push(eC.navigationButtonZoneObjectViewModel(nl,null,null))}},addNavigationButtonZoneForNonFlyOutMenu:function(nk,nl,nm){if(!tab.FeatureFlags.isEnabled('DashboardFlyoutMenu')){this.$0(nk,nl,nm)}},addSnapshotButtonZoneObjectViewModel:function(nk,nl,nm){if(nk.hasDashboardObjectType('snapshot-button')){var nn=nk.getDashboardObjectStateInfo('snapshot-button');nm.push(eC.snapshotButtonZoneObjectViewModel(nl,nn.dashboardObjectHandle,nn.dashboardObjectStateHandle))}},addObjectsSpecifiedInDashboardObjectPanePresModel:function(nk,nl,nm,nn){if(ss.isValue(nn)){for(var no=0;no<nn.length;no++){var np=nn[no];this.addFirstClassExtensionViewModel(np,nk,nl,nm)}}},addFirstClassExtensionViewModel:function(nk,nl,nm,nn){if(nl.hasDashboardObjectType(nk)){var no=nl.getDashboardObjectStateInfo(nk);var np=nl.getDashboardObjectEncodedSVGIcon(nk);var nq=nl.getDashboardObjectLocalizedName(nk);nn.push(eC.firstClassExtensionZoneObjectViewModel(nm,no.dashboardObjectHandle,no.dashboardObjectStateHandle,nq,np))}},addFlyoutMenuObjectViewModel:function(nk,nl,nm){var nn=nk.getDashboardObjectLibraryMap();var no=nk.getDashboardObjectEncodedSVGIcon('navigation-button');nm.push(eC.buttonFlyoutMenuZoneObjectViewModel(nl,nn,no))},createZoneObjectsViewModels:null});var eB=global.tab.DashboardZoneObjectsProviderFactory=ss.mkType(a,'tab.DashboardZoneObjectsProviderFactory',function(){this.$1=null;this.$2=null;this.factoryIsInitialized=null;this.$2=null;this.$1=(tab.FeatureFlags.isEnabled('NLPDashboardObject')?null:new ee)},{initializeFactory:function(){var nk=ss.mkdel(this,function(){tab.DashboardClientCommands.getDashboardObjectPane(tsConfig.is_ask_data_disabled_for_site).done(ss.mkdel(this,function(nl){if(true){this.$0(nl.dashboardObjectPane)}}))});if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){tab.StartupUtils.callAfterModelsInitialized(nk)}else{nk()}},$0:function(nk){this.$2=nk||{};var nl=(ss.isValue(this.$2.dashboardObjectsLibrary)?this.$2.dashboardObjectsLibrary:[]);this.$1=new ee.$ctor1(nl);if(ss.isValue(this.factoryIsInitialized)){this.factoryIsInitialized()}},createDashboardZoneObjectsProvider:function(){return new hS},createZoneObjectsViewModels:function(nk){var nl=this.createDashboardZoneObjectsProvider();if(tab.FeatureFlags.isEnabled('NLPDashboardObject')){return nl.createZoneObjectsViewModels(nk,this.$1,this.$2.dashboardObjectLibraryTypesToAdd)}else{return nl.createZoneObjectsViewModels(nk,this.$1,null)}}},{createDashboardZoneObjectsProviderFactoryForTest:function(nk){var nl=new eB;nl.$1=nk;return nl}});var eC=global.tab.DashboardZoneObjectViewModel=ss.mkType(a,'tab.DashboardZoneObjectViewModel',function(nk,nl,nm,nn,no,np,nq,nr,ns,nt){this.$h=null;this.$l=null;this.$f=false;this.$g=null;this.$d=null;this.$m=null;this.$k=null;this.$i=null;this.$j=null;this.$e=null;this.$c=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$l=nk;this.$f=np;this.$m=nl;this.$g=nm;this.$d=nt;this.$h=nn;this.$k=no;this.$i=nq;this.$j=nr;this.$e=ns},{$8:function(){if(tab.FeatureFlags.isEnabled('NLPDashboardObject')){return this.$l+this.$g}else{return this.$l}},createInitialProps:function(){return{key:this.$8(),zoneObj:this.$l,zoneObjLocalizedName:this.$g,addToDashboard:ss.mkdel(this,this.$3),createDragInstance:ss.mkdel(this,this.$5),encodedSVGIcon:this.$d,renderContext:this.$9(),flyoutMenuInfo:this.$e}},$3:function(nk){var nl=this.$b();tab.DashboardAuthoringObjectsPaneTelemetry.logAddNewObjectToDashboardEvent(false,!nl,((this.$m==='dashboard-object')?this.$l.toString():this.$m.toString()));var nm=(ss.isNullOrUndefined(nk)?this.$i:nk.dashboardObjectHandle);var nn=(ss.isNullOrUndefined(nk)?this.$j:nk.dashboardObjectStateHandle);if(this.$m==='web'){this.$c=mI.createWebZoneUrlDialog('',ss.mkdel(this,function(no){this.$4(nl,function(np){},no,null,null)}),ss.mkdel(this,function(){this.$7()}));this.$c.show()}else if(this.$m==='text'){this.$4(nl,eC.$0,null,null,null)}else if(this.$m==='bitmap'){this.$4(nl,tab.DashboardClientCommands.showImageObjectConfigDialog,null,null,null)}else if(tab.FeatureFlags.isEnabled('NLPDashboardObject')&&this.$m==='dashboard-object'&&this.$k==='extension'&&!ss.isNullOrUndefined(nm)){this.$4(nl,tab.DashboardClientCommands.addFirstClassExtension,'',nm,nn)}else if(this.$m==='dashboard-object'&&this.$k==='extension'){this.$4(nl,tab.ExtensionClientCommands.showChooseExtensionDialog,'',null,null)}else{this.$4(nl,function(no){},null,nm,nn)}},$b:function(){return ss.isValue(this.$h)&&this.$h.get_addNewZoneAsFloating()},$4:function(nk,nl,nm,nn,no){tab.DashboardClientCommands.addNewObjectToDashboard(this.$m,this.$f,nk,null,nm,this.$k,nn,no).done(function(np){if(np.zoneId!==undefined&&np.zoneId!==null){nl(np.zoneId)}});this.$7()},$7:function(){this.$c=tab.MiscUtil.dispose$1(this.$c)},$5:function(nk){var nl=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var nm=$.Deferred();nl.done(function(nq){nm.resolve(nq.zoneDragDrop)}).fail(function(){nm.reject()});var nn=mT.createDeferredRect(nm);var no=false;if(ss.isValue(this.$h)){no=this.$h.get_addNewZoneAsFloating()}var np=null;if(ss.isNullOrUndefined(nk)){np=this.$6(no,this.$i,this.$j,nm,nn)}else{np=this.$6(no,nk.dashboardObjectHandle,nk.dashboardObjectStateHandle,nm,nn)}return np},$9:function(){if(this.$a()){return'LegacyDashboardsOnly'}return'BothLegacyAndFlexibleDashboards'},$a:function(){return this.$m==='layout-flow'},$6:function(nk,nl,nm,nn,no){if(this.$h.get_addToFlexibleDashboard()){return na.createFlexible(new fp(this.$m,this.$f,nk,this.$k,nl,nm),nn,no)}else{return na.create(new fp(this.$m,this.$f,nk,this.$k,nl,nm),nn,no)}}},{blankZoneObjectViewModel:function(nk){return new eC('Blank','empty',tab.Strings.AuthDashboardPaneBlankZone,nk,'invalid',false,null,null,null,null)},horizontalZoneObjectViewModel:function(nk){return new eC('Horizontal','layout-flow',tab.Strings.AuthDashboardPaneHorizontalZone,nk,'invalid',true,null,null,null,null)},verticalZoneObjectViewModel:function(nk){return new eC('Vertical','layout-flow',tab.Strings.AuthDashboardPaneVerticalZone,nk,'invalid',false,null,null,null,null)},webZoneObjectViewModel:function(nk){return new eC('WebPage','web',tab.Strings.AuthDashboardPaneWebZone,nk,'invalid',false,null,null,null,null)},imageZoneObjectViewModel:function(nk){return new eC('Image','bitmap',tab.Strings.AuthDashboardPaneImageZone,nk,'image-object',false,null,null,null,null)},textZoneObjectViewModel:function(nk){return new eC('Text','text',tab.Strings.AuthDashboardPaneTextZone,nk,'invalid',false,null,null,null,null)},navigationButtonZoneObjectViewModel:function(nk,nl,nm){return new eC('NavigationButton','dashboard-object',tab.Strings.AuthDashboardPaneNavigationButtonZone,nk,'button',false,nl,nm,null,null)},snapshotButtonZoneObjectViewModel:function(nk,nl,nm){return new eC('SnapshotButton','dashboard-object',tab.Strings.AuthDashboardPaneSnapshotButtonZone,nk,'button',false,nl,nm,null,null)},buttonFlyoutMenuZoneObjectViewModel:function(nk,nl,nm){return new eC('ButtonFlyoutMenu','dashboard-object',tab.Strings.AuthDashboardPaneNavigationButtonZone,nk,'button',false,null,null,nl,nm)},exportButtonZoneObjectViewModel:function(nk,nl,nm){return new eC('ExportButton','dashboard-object',tab.Strings.AuthDashboardPaneExportButtonZone,nk,'button',false,nl,nm,null,null)},extensionZoneObjectViewModel:function(nk){return new eC('Extension','dashboard-object',tab.Strings.AuthDashboardPaneExtensionZone,nk,'extension',false,null,null,null,null)},carouselZoneObjectViewModel:function(nk){return new eC('Carousel','layout-carousel',tab.Strings.AuthDashboardPaneCarouselZone,nk,'invalid',false,null,null,null,null)},firstClassExtensionZoneObjectViewModel:function(nk,nl,nm,nn,no){return new eC('Extension','dashboard-object',nn,nk,'extension',false,nl,nm,null,no)},$0:function(nk){tab.RichTextClientCommands.launchTextObjectRichTextEditor(nk,true);tab.FormattingTelemetryClient.logRichTextEditorEvent(ss.mkdict(['RichTextEditorOpenedBy','AddNewTextZone','RichTextEditorOpenedFrom','Dashboard']))}});var eD=global.tab.DashZoneObject=ss.mkEnum(a,'tab.DashZoneObject',{Blank:'Blank',Horizontal:'Horizontal',Vertical:'Vertical',Image:'Image',WebPage:'WebPage',Text:'Text',NavigationButton:'NavigationButton',ExportButton:'ExportButton',SnapshotButton:'SnapshotButton',ButtonFlyoutMenu:'ButtonFlyoutMenu',Extension:'Extension',Carousel:'Carousel',HorizontalStack:'HorizontalStack',VerticalStack:'VerticalStack',Grid:'Grid'},true);var eE=global.tab.DataPreviewAreaCommandWaiter=ss.mkType(a,'tab.DataPreviewAreaCommandWaiter',function(){this.$3=null;this.$2=null},{handleCommandStarted:function(nk){this.$3=nk},handleCommandCompleted:function(){},handleCommandError:function(){},handleCancel:function(nk){var nl=this.$3.get_remoteCommands();if(nl.length===0){return}var nm=nl[0];this.$2=nk;tab.CancelCommands.cancelRunningCommand(nm,ss.mkdel(this,this.$0),ss.mkdel(this,this.$1))},$0:function(nk){this.$2.resolve()},$1:function(){this.$2.reject()}});var eF=global.tab.DataSchemaView=ss.mkType(a,'tab.DataSchemaView',function(nk,nl){this.dom=null;this.perInitDisposables=new tab.DisposableHolder;this.$1k={};this.$1m={};this.$1r=null;this.$1o=null;this.$1t=null;this.$1l=false;this.$1i=null;this.$1n=false;this.$1j=null;this.$1h=null;this.$1g=null;this.$1q=SharedWidgets.TabStyles.Sizing.RowHeight;this.$1u=null;this.$1s=null;this.$1p=null;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[kZ]).call(this,nk,nl);this.dom=this.get_template();this.dom.sourcesHeader.css('display','none');_.each(Object.keys(this.get_headers()),ss.mkdel(this,function(nm){this.get_headers()[nm].hide()}));_.each(Object.keys(this.get_sections()),ss.mkdel(this,function(nm){this.get_sections()[nm].hide()}));this.initContent();this.$1r={};this.$U();this.$R();this.$S(nk)},{get_sources:function(){return this.dom.sources},get_sections:function(){return this.dom.sections},get_headers:function(){return this.dom.headers},get_panes:function(){return this.dom.panes},get_domRoot:function(){return this.dom.domRoot},get_topLevelFieldsArea:function(){return this.dom.topLevelFieldsArea},get_sourceTitles:function(){return this.dom.sourceTitles},get_schemaElements:function(){return this.dom.get_schemaElements()},get_contentArea:function(){return this.dom.contentArea},get_schemaSearch:function(){return this.dom.schemaSearch},get_sourcesHeader:function(){return this.dom.sourcesHeader},get_contentAreaScroll:function(){return this.dom.contentAreaScroll},get_schemaViewerViewModel:function(){return this.get_viewModel()},get_contextMenuButton:function(){return this.$3$1},set_contextMenuButton:function(nk){this.$3$1=nk},get_width:function(){return tab.DoubleUtil.roundToInt(this.get_domRoot().width())},set_width:function(nk){this.get_domRoot().width(nk)},get_estimatedHeightOfSchemaRowItem:function(){return 21},get_estimatedHeightDeltaForSchemaFields:function(){return 120},get_estimatedHeightDeltaForLeftPanel:function(){return 230},get_estimatedHeightDeltaForDocumentBody:function(){return 382},get_dataSourceTitles:function(){return this.$3$2},set_dataSourceTitles:function(nk){this.$3$2=nk},$1f:function(){return this.get_schemaElements().toArray()},dispose:function(){this.$u();this.perInitDisposables.dispose();this.get_contextMenuButton().dispose();ss.makeGenericType(spiff.BaseView$1,[kZ]).prototype.dispose.call(this)},$u:function(){this.$1u=tab.MiscUtil.dispose$1(this.$1u);this.$1s=tab.MiscUtil.dispose$1(this.$1s);this.$1p=tab.MiscUtil.dispose$1(this.$1p)},findElement:function(nk){return this.get_domRoot().find(nk)},$U:function(){this.get_schemaViewerViewModel().add_dataSchemaModified(ss.mkdel(this,this.initFromModel));this.get_schemaViewerViewModel().add_dataSourceListChanged(ss.mkdel(this,this.$1b));this.get_schemaViewerViewModel().add_scrollToNodes(ss.mkdel(this,this.showAndScrollToNodes));this.get_schemaViewerViewModel().add_expandAllContainers(ss.mkdel(this,this.$z));this.get_schemaViewerViewModel().add_collapseAllContainers(ss.mkdel(this,this.$p));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_schemaViewerViewModel().remove_dataSchemaModified(ss.mkdel(this,this.initFromModel));this.get_schemaViewerViewModel().remove_dataSourceListChanged(ss.mkdel(this,this.$1b));this.get_schemaViewerViewModel().remove_scrollToNodes(ss.mkdel(this,this.showAndScrollToNodes));this.get_schemaViewerViewModel().remove_expandAllContainers(ss.mkdel(this,this.$z));this.get_schemaViewerViewModel().remove_collapseAllContainers(ss.mkdel(this,this.$p))})))},$Q:function(){this.$1i=this.get_viewModel().get_dragFeedback();this.$1i.fieldDragOver=ss.delegateCombine(this.$1i.fieldDragOver,ss.mkdel(this,this.$K));this.$1i.fieldDragExit=ss.delegateCombine(this.$1i.fieldDragExit,ss.mkdel(this,this.$J));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$1i.fieldDragOver=ss.delegateRemove(this.$1i.fieldDragOver,ss.mkdel(this,this.$K));this.$1i.fieldDragExit=ss.delegateRemove(this.$1i.fieldDragExit,ss.mkdel(this,this.$J))})))},$R:function(){this.$Q();if(ss.keyExists(this.get_sections(),0)){EventUtils.DragDropManager.attachDropTarget(this.get_sections()[0],this.$1i.get_dimensionsDropTarget())}if(ss.keyExists(this.get_sections(),1)){EventUtils.DragDropManager.attachDropTarget(this.get_sections()[1],this.$1i.get_measuresDropTarget())}EventUtils.DragDropManager.attachDropTarget(this.get_domRoot(),this.$1i.get_unnamedFieldsDropTarget());EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$x));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$v));EventUtils.DragDropManager.add_dragMoved(ss.mkdel(this,this.$w));this.$1i.get_unnamedFieldsDropTarget().add_dropStateChanged(ss.mkdel(this,this.$M));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$x));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$v));EventUtils.DragDropManager.remove_dragMoved(ss.mkdel(this,this.$w));this.$1i.get_unnamedFieldsDropTarget().remove_dropStateChanged(ss.mkdel(this,this.$M))})))},$x:function(nk){this.$1n=ss.isInstanceOfType(nk,jc);if(this.$1n){this.$1h=this.$f()}},$v:function(nk){this.$1j=tab.MiscUtil.clearInterval(this.$1j);this.$1n=false;this.$1g=null;this.$1h=null},$w:function(nk){if(!this.$1n){return}var nl=this.$B();if(ss.isNullOrUndefined(nl)&&ss.isValue(this.$1g)){this.$1j=tab.MiscUtil.clearInterval(this.$1j);this.$1g=null}else if(ss.isValue(nl)){this.$1g=nl;if(!ss.isValue(this.$1j)){this.$1j=window.setInterval(ss.mkdel(this,this.$10),200)}}},$f:function(){var nk=[];var nl=new ss.ObjectEnumerator(this.get_panes());try{while(nl.moveNext()){var nm=nl.current();var nn=nm.value;if(nn.is(':visible')){var no=tab.DomUtil.getRectXY(nn);var np=Math.min(25,ss.idiv(no.h,3));var nq=new f;nq.$2=nn;nq.$1=-1;nq.$0={x:no.x,y:no.y,w:no.w,h:np};nk.push(nq);var nr=new f;nr.$2=nn;nr.$1=1;nr.$0={x:no.x,y:no.y+no.h-np,w:no.w,h:np};nk.push(nr)}}}finally{nl.dispose()}return nk},$B:function(){if(ss.isNullOrUndefined(this.$1h)){return null}var nk=EventUtils.DragDropManager.get_lastDragEvent();for(var nl=0;nl<this.$1h.length;nl++){var nm=this.$1h[nl];if(tab.RectXYUtil.inRectOrSharedEdge(nm.$0,nk.pageX,nk.pageY)){return nm}}return null},$10:function(){if(ss.isNullOrUndefined(this.$1g)){return}var nk=this.$1q*this.$1g.$1;this.$1g.$2.scrollTop(this.$1g.$2.scrollTop()+nk)},initializeContextMenu:function(nk){this.set_contextMenuButton(new spiff.ToggleButton($("<span><span class='icon'></span></span>"),null));this.get_contextMenuButton().element.addClass('tab-schemaViewerHeaderButton  tab-schema-menu-button');nk.append(this.get_contextMenuButton().element);this.get_contextMenuButton().add_click(ss.mkdel(this,this.$q));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_contextMenuButton().remove_click(ss.mkdel(this,this.$q))})))},setUpDataPaneEmptySpaceEventListener:function(){if(!tab.FeatureFlags.isEnabled('WebAuthoringDataPaneContextMenu')){return}var nk=[];nk.push(this.dom.leftPaneEmptySpace);nk.push(this.dom.sections[0]);nk.push(this.dom.sections[1]);nk.push(this.dom.sections[2]);nk.push(this.dom.sections[3]);var nl=nk;nl.forEach(ss.mkdel(this,function(nm){nm.on('contextmenu',ss.mkdel(this,function(nn){var no=this.$E(nm);this.get_schemaViewerViewModel().showEmptySpaceContextMenu(nn,no,null)}))}))},$E:function(nk){var nl='common';if(ss.referenceEquals(nk,this.dom.sections[0])){nl='dimensions'}else if(ss.referenceEquals(nk,this.dom.sections[1])){nl='measure'}else if(ss.referenceEquals(nk,this.dom.sections[2])){nl='groups'}else if(ss.referenceEquals(nk,this.dom.sections[3])){nl='parameters'}return nl},$S:function(nk){var nl=new kv(nk);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(nl);this.disposables.add$1(new tab.CallOnDispose(function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(nl)}))},isSectionVisible:function(nk){return this.$1r[nk]},updateVisibilityOfPanesForViewType:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){this.$P()}else if(this.get_viewModel().get_selectedDataSource().get_isHierarchical()){this.$18()}else{this.$19()}this.$1e()},$F:function(){return this.findElement('.tab-topLevelColumnSeparator')},$P:function(){this.get_panes()[0].hide();this.get_headers()[0].hide();this.get_panes()[1].hide();this.get_headers()[1].hide();this.get_panes()[2].hide()},$18:function(){this.get_panes()[0].hide();this.get_headers()[0].show();this.get_panes()[1].show();this.get_headers()[1].show();this.get_panes()[2].show()},$19:function(){this.get_panes()[0].show();this.get_headers()[0].hide();this.get_panes()[1].hide();this.get_headers()[1].hide();this.get_panes()[2].hide();this.$F().show()},$1e:function(){if(this.get_viewModel().canSearchCurrentDataSource()){this.get_schemaSearch().show()}else{this.get_schemaSearch().hide();this.get_viewModel().updateSearchText('',true)}},renderSearchBox:function(nk){var nl=React.createElement(kS,{handleChange:ss.mkdel(this,function(nm){this.get_viewModel().updateSearchText(nm,false)}),handleClear:ss.mkdel(this,this.$o),handleCancelSearch:ss.mkdel(this,this.$o),handleCloseRequested:ss.mkdel(this,this.$o),searchFilterHelper:this.get_schemaViewerViewModel().get_searchFilterHelper()});ReactDOM.render(nl,nk)},$o:function(){this.get_schemaViewerViewModel().updateSearchText('',true)},$d:function(nk){nk.getMenuClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(nl){this.$H(nk)}));nk.getLabelClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(nl){this.$H(nk)}))},$H:function(nk){kZ.showDataSourceContextMenu(nk.domRoot.prop('DataSource'),nk.domRoot)},findFieldTemplate:function(nk){if(ss.isNullOrUndefined(nk)){return null}var nl=null;this.get_schemaElements().each(function(nm,nn){var no=fR.fromDom($(nn));var np=no.get_node();if(ss.isValue(np)&&ss.referenceEquals(np.globalFieldName,nk.globalFieldName)&&np.instanceType===nk.instanceType&&nk.schemaSection===np.schemaSection){nl=no;return false}return true});return nl},initFromModel:function(){this.perInitDisposables.dispose();this.initDataSources();kZ.sectionsInOrder.forEach(ss.mkdel(this,function(nk){this.initSection(nk,false)}))},fieldExpanded:function(){},expandCollapseAllComplete:function(nk){this.scrollSectionsToShowNodes(nk)},shouldExpandTopLevelNodes:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){return false}if(this.$N()){return false}this.$11();return this.$O(this.get_schemaViewerViewModel().get_numNodesIfTopLevelExpanded())},$O:function(nk){return 2*this.$D()>=nk*this.get_estimatedHeightOfSchemaRowItem()},$D:function(){if(this.addedToDom){var nk=this.getSchemaViewerElement();if(nk.length>0){var nl=tab.DoubleUtil.roundToInt(nk.innerHeight());if(nl>0){return nl-this.get_estimatedHeightDeltaForSchemaFields()}}}var nm=$(document.body).find('.tabAuthLeftViewArea');if(nm.length>0&&$.contains(document.body,nm[0])){return tab.DoubleUtil.roundToInt(nm.innerHeight())-this.get_estimatedHeightDeltaForLeftPanel()}return document.body.clientHeight-this.get_estimatedHeightDeltaForDocumentBody()},getSchemaViewerElement:function(){return this.get_domRoot().find('.tab-schemaViewerFields')},showAndScrollToNodes:function(nk){var nl={};for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];this.$A(nn);if(ss.isNullOrUndefined(nl[nn.get_node().schemaSection])){nl[nn.get_node().schemaSection]=nn.get_node()}}this.scrollSectionsToShowNodes(nl)},$A:function(nk){if(ss.isNullOrUndefined(nk)){return}nk.forEachParentNode(ss.mkdel(this,function(nl){var nm=this.findFieldTemplate(nl);if(ss.isValue(nm)&&!nm.isExpanded()){this.$13(nm,true,false)}}))},findFocalFieldTemplate:function(nk){if(ss.isNullOrUndefined(nk)||nk.length!==1){return null}var nl=null;var nm=this.get_viewModel().hasSelection();var nn=nk[0].getBoundingClientRect();var no=nk.find('.tab-schema-field:visible');for(var np=0,nq=no.length;np<nq;np++){var nr=fR.fromDom($(no[np]));var ns=nr.pill[0].getBoundingClientRect();if(ns.top>nn.bottom){break}if(ns.bottom>nn.top){if(ss.isNullOrUndefined(nl)&&ns.top>=nn.top){nl=nr;if(!nm){break}}if(this.get_viewModel().isSelected(nr.get_node())){return nr}}}return nl},findFocalFieldNode:function(nk,nl){if(ss.isNullOrUndefined(nk)){return null}var nm=nk.get_node();if(nl){var nn=this.get_viewModel().findNodePath(nm.globalFieldName);if(ss.isValue(nn)){nm=nn.getTopmostAncestor()}}return nm},findFocalFieldNodeInView:function(nk,nl,nm){var nn=this.findFocalFieldTemplate(nk);var no=this.findFocalFieldNode(nn,nl);if(ss.isValue(no)){nm[no.schemaSection]=no}},findAllFocalFieldNodes:function(nk){var nl={};var nm=new ss.ObjectEnumerator(this.get_panes());try{while(nm.moveNext()){var nn=nm.current();this.findFocalFieldNodeInView(nn.value,nk,nl)}}finally{nm.dispose()}return nl},$z:function(){var nk=this.findAllFocalFieldNodes(false);this.$12(this.get_schemaElements(),true);this.expandCollapseAllComplete(nk)},$p:function(){var nk=this.findAllFocalFieldNodes(true);this.$12(this.get_schemaElements(),false);this.expandCollapseAllComplete(nk)},$12:function(nk,nl){nk.each(ss.mkdel(this,function(nm,nn){var no=fR.fromDom($(nn));if(ss.isValue(no)&&no.isExpanded()!==nl){var np=no.get_node();if(ss.isValue(np)&&np.canHaveChildren&&np.children.length>0){var nq=nl&&!ss.staticEquals(no.deferredCreateChildren,null);this.$13(no,nl,false);if(nq){var nr=no.domRoot.find(fR.fieldDomSelector);this.$12(nr,nl)}}}}))},scrollSectionsToShowNodes:function(nk){var nl=ss.getEnumerator(Object.keys(nk));try{while(nl.moveNext()){var nm=nl.current();this.scrollFieldIntoView(nk[nm])}}finally{nl.dispose()}},scrollFieldIntoView:null,getScrollTopValueForNode:function(nk,nl,nm,nn){var no=null;var np=this.findFieldTemplate(nk);if(ss.isValue(np)){var nq=tab.DoubleUtil.roundToInt(tab.DomUtil.getPageOffset$1(np.pill).top);var nr=nq-nm;var ns=nr+tab.DoubleUtil.roundToInt(np.pill.height());if(nr<0){no=nl+nr-10}else if(ns>nn){no=nl+ns-nn+10}}return no},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[kZ]).prototype.onViewModelPropertyChanged.call(this,nk,nl);if(nl.get_propertyName()==='SelectedField'){this.$L()}},$M:function(nk){this.dom.dropInviteElements.toggle(nk===1)},$K:function(nk,nl,nm){switch(nl){case 0:{this.$9(nk);break}case 2:{this.$a(nk);break}case 3:{if(tab.FeatureFlags.isEnabled('SchemaViewerEasyLODCalculation')&&nm){this.$9(nk)}else{this.$a(nk)}break}}},$J:function(nk,nl){switch(nl){case 0:{this.$V(nk);break}case 2:{this.$W(nk);break}case 3:{this.$W(nk);this.$V(nk);break}}},$9:function(nk){var nl=this.findFieldTemplate(nk);if(ss.isValue(nl)){nl.pill.addClass('dragHover')}},$V:function(nk){var nl=this.findFieldTemplate(nk);if(ss.isValue(nl)){nl.pill.removeClass('dragHover')}},$a:function(nk){var nl=this.findFieldTemplate(nk);if(ss.isValue(nl)){nl.labelArea.css('border-bottom','1px solid black')}},$W:function(nk){var nl=this.findFieldTemplate(nk);if(ss.isValue(nl)){nl.labelArea.css('border-bottom','')}},$q:function(){this.get_contextMenuButton().set_selected(true);this.get_schemaViewerViewModel().showContextMenu(this.get_contextMenuButton().element,ss.mkdel(this,this.$G))},$G:function(){this.get_contextMenuButton().set_selected(false)},$L:function(){var nk='selected';if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){nk+=' '+'tab-schema-field-pill-touchScreenSelected'}this.get_domRoot().find('.tab-schema-field-pill.selected, .tab-schema-field-label.selected').removeClass(nk);if(this.get_schemaViewerViewModel().hasSelection()){this.get_schemaElements().each(ss.mkdel(this,function(nl,nm){return this.applySelection(fR.fromDom($(nm)))}))}else{this.$1o=null}},applySelection:function(nk){if(ss.isValue(nk)&&this.get_schemaViewerViewModel().isSelected(nk.get_node())){var nl=(nk.get_node().isUnsortedContainer?nk.name:nk.pill);nl.addClass('selected');EventUtils.DragDropManager.attachDragSource(nl,this.$1i.createFieldDragSource());if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){nl.addClass('tab-schema-field-pill-touchScreenSelected');this.$1l=true}}return true},$I:function(nk){var nl=$(nk.target).parents(ss.formatString('.{0}','tab-schema-field')).first();var nm=fR.fromDom(nl);var nn=nm.get_node();if(ss.isValue(nn)&&nn.canHaveChildren){var no=nm.expandoIcon.hasClass('tab-schema-collapsed');this.$13(nm,no,true)}},$N:function(){var nk=this.get_viewModel().get_selectedDataSource().get_name();return ss.keyExists(this.$1m,nk)},$11:function(){if(this.get_viewModel().get_numNodesIfTopLevelExpanded()===0){return}if(tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='document'){return}if(ss.isValue(this.get_viewModel().get_selectedDataSource())){var nk=this.get_viewModel().get_selectedDataSource().get_name();this.$1m[nk]=true}},$13:function(nk,nl,nm){if(!this.get_viewModel().get_isSearching()){this.$1k[nk.get_node().get_comparisonKey()]=nl;if(ss.isValue(this.get_viewModel().get_selectedDataSource())&&ss.referenceEquals(this.get_viewModel().get_selectedDataSource().get_name(),nk.get_node().dataSourceName)){this.$11()}}var nn=ss.mkdel(this,this.fieldExpanded);if(nl){nk.domRoot.addClass('expanded');if(ss.isValue(nk.deferredCreateChildren)){nk.deferredCreateChildren();nk.deferredCreateChildren=null}if(nm){nk.children.slideDown('fast',nn)}else{nk.children.show()}}else{nk.domRoot.removeClass('expanded');if(nm){nk.children.slideUp('fast',nn)}else{nk.children.hide()}}if(nk.get_node().isCubeFolder){nk.icon.toggleClass('tab-schema-folder-closed-icon',!nl).toggleClass('tab-schema-folder-open-icon',nl)}else if(nk.get_node().isFolder){nk.icon.toggleClass('tab-schema-folder-closed-icon',!nl).toggleClass('tab-schema-folder-open-icon',nl)}nk.expandoIcon.toggleClass('tab-schema-expanded',nl).toggleClass('tab-schema-collapsed',!nl)},$t:function(nk){var nl=new fR;nl.set_node(nk);var nm=nl;nm.domRoot.addClass('tab-field-column').attr('title',nk.tooltip);nm.name.text(nk.schemaViewerDisplayName);spiff.Widget.disableTextSelectionOnElement(nm.name);eF.$5(nm,nk);if(nk.instanceType==='column'){var nn=this.$C(nk);if(tab.MiscUtil.isNullOrEmpty$1(nk.userDescription)&&ss.isValue(nn)&&!tab.MiscUtil.isNullOrEmpty$1(nn.get_description())){var no=nm.domRoot.addClass('tab-field-column');no.attr('ParentContentType',((nn.get_parentType()===2)?'table':'datasource'));no.attr('IsParentCertified',(nn.get_isParentCertified()?'true':'false'));no.attr('ParentName',nn.get_parentName());no.attr('InheritedDescription',nn.get_description());no.attr('FieldName',nn.get_fieldName());no.attr('InheritedColumnName',nn.get_inheritedColumnName());no.removeAttr('title')}}return nm},$C:function(nk){var nl=this.get_viewModel().get_dataSchema().getMetadataForDatasource(nk.dataSourceName);if(ss.isValue(nl)){return nl.getAssetMetadata(nk.localName)||nl.getAssetMetadata(nk.displayName)}return null},$e:function(nk,nl,nm,nn){if(nl.isSelectable||nk.children.length>0||nl.isFolder){var no=nl.childToSelect;this.attachFieldEventHandlers(nm.get_node(),no,nm,nn)}},$1a:function(nk,nl){if(this.get_schemaViewerViewModel().isSelected(nk)){this.get_schemaViewerViewModel().deSelectNode(nk)}else{this.get_schemaViewerViewModel().addNodeToSelection(nk);this.$1o=nl}},$14:function(nk){if(ss.isNullOrUndefined(this.$1o)||ss.isNullOrUndefined(nk)){return}var nl=this.$1f();var nm=ss.indexOf(nl,nk);var nn=ss.indexOf(nl,this.$1o);var no=Math.min(nm,nn);var np=Math.max(nm,nn);if(this.$15(no,np)){if(ss.isValue(this.$1t)){no=Math.min(no,this.$1t.item1);np=Math.max(np,this.$1t.item2)}this.$b(no,np)}else{this.$X(no,np)}},$15:function(nk,nl){return ss.isNullOrUndefined(this.$1t)||(this.$1t.item1>nk||this.$1t.item2<nl)},$b:function(nk,nl){var nm=this.$1f().length;if(nk<0||nl<0||nk>=nm||nl>=nm){return}var nn=[];var no=this.$1f();for(var np=nk;np<=nl;np++){var nq=fR.fromDom($(no[np])).get_node();nn.push(nq)}this.$1t={item1:nk,item2:nl};this.get_schemaViewerViewModel().addNodesToSelection(nn)},$X:function(nk,nl){var nm=[];var nn=this.$1f();for(var no=this.$1t.item1;no<=this.$1t.item2;no++){if(no<nk||no>nl){var np=fR.fromDom($(nn[no])).get_node();nm.push(np)}}this.$1t={item1:nk,item2:nl};this.get_schemaViewerViewModel().deSelectNodes(nm)},attachSelectionEventHandler:function(nk){nk.getLabelClickHandler(this.perInitDisposables).onPress(ss.mkdel(this,function(nl){var nm=nk.domRoot.get(0);if(nl.shiftKey){if(ss.isValue(this.$1o)&&this.get_schemaViewerViewModel().hasSelection()){this.$14(nm)}else{this.get_schemaViewerViewModel().clearAllAndSelect(nk.get_node())}this.$1o=nm}else if(nl.get_IsCtrlKey()){this.$1a(nk.get_node(),nm);this.$1t=null}else if(!this.get_schemaViewerViewModel().isSelected(nk.get_node())){this.$Y(nk)}})).onClick(ss.mkdel(this,function(nl){if(!nl.shiftKey&&!nl.get_IsCtrlKey()){this.$Y(nk)}})).onRightClick(ss.mkdel(this,function(nl){if(!this.get_schemaViewerViewModel().isSelected(nk.get_node())){this.$Y(nk)}}))},$Y:function(nk){if(this.get_schemaViewerViewModel().get_selectedNodes().length!==1||!ss.referenceEquals(this.get_schemaViewerViewModel().get_selectedNodes()[0],nk.get_node())||this.$Z()){this.get_schemaViewerViewModel().clearAllAndSelect(nk.get_node());this.$1o=nk.domRoot.get(0);this.$1t=null}},attachFieldEventHandlers:function(nk,nl,nm,nn){if(!nn){if(nk.isDraggable){nm.labelArea.dblclick(ss.mkdel(this,function(no){if(no.altKey){this.get_schemaViewerViewModel().launchEditingUI(nl)}else{this.get_schemaViewerViewModel().addFieldToSheet(nl)}}))}else if(nk.isUnsortedContainer){nm.getLabelClickHandler(this.perInitDisposables).onDoubleClick(ss.mkdel(this,this.$I))}}this.attachSelectionEventHandler(nm);if(nk.canHaveChildren){nm.getExpandoClickHandler(this.perInitDisposables).onPress(ss.mkdel(this,this.$I))}},$T:function(nk,nl){var nm=this.$t(nk);if(nk.isSelectable){nm.pill.addClass(eF.$2(nk.fieldType,nl))}if(!nk.hasContextMenu){nm.menuButton.hide()}if(nk.isGenerated&&nk.children.length===0){nm.domRoot.addClass('tab-field-generated')}if(nk.isHierarchyRoot&&nk.children.length>0){nm.name.addClass('tab-schema-dimension-label')}if(nk.isGroup){nm.domRoot.add('tab-set')}return nm},$i:function(nk,nl){var nm=this.$T(nk,nk.isHidden);if(this.get_schemaViewerViewModel().isSelected(nk)){this.applySelection(nm)}if(nk.isHidden){nm.name.addClass('tab-schema-field-hidden')}if(nk.instanceType==='relationalTable'){nm.name.addClass('tab-container')}this.$j(nk,nm,nl);this.$8(nk,nm);this.$e(nk,nk,nm,nk.isHidden);this.$n(nk,nm);return nm.domRoot},$j:function(nk,nl,nm){if(nk.children.length===0){nl.children.hide();return}var nn=nm||(this.$1k[nk.get_comparisonKey()]||false);var no=ss.mkdel(this,function(){var np=false;for(var nq=0;nq<nk.children.length;nq++){var nr=nk.children[nq];if(nr.role==='measure'&&np){nl.children.append(eF.$0())}np=nr.role==='dimension'&&!nk.isDrillPath;nl.children.append(this.$i(nr,false))}});if(nn||this.get_viewModel().get_isSearching()){no()}else{nl.deferredCreateChildren=no;nl.children.hide()}if(this.get_viewModel().get_isSearching()){nn=nk.hasFilteredChildren}this.$13(nl,nn,false)},$8:function(nk,nl){if(ss.contains(this.get_viewModel().get_dataSchema().get_currentBlendingFields(),nk.globalFieldName)){this.$7(nl,'tab-schema-blending-icon',tab.Strings.StopUsingAsLinkingField(nk.displayName))}if(ss.contains(this.get_viewModel().get_dataSchema().get_blendingFieldCandidates(),nk.globalFieldName)){this.$7(nl,'tab-schema-blending-candidate-icon',tab.Strings.UseAsLinkingField(nk.displayName))}},$n:function(nk,nl){if(nk.schemaSection===2||nk.schemaSection===3){if(nk.instanceType==='folderNew'){var nm=((nk.schemaSection===2)?'groups':'parameters');var nn=kU.createContainerSectionDropTarget(nk.dataSourceName,nm,nl.domRoot,nk,null);this.perInitDisposables.add$1(nn)}}else{var no=this.$1i.tryCreateFieldDropTarget(nk);if(ss.isValue(no)){EventUtils.DragDropManager.attachDropTarget(nl.labelArea,no);this.perInitDisposables.add$1(no)}}},$g:function(nk,nl){var nm=this.$T(nk,nk.isHidden);var nn=$('<div class="dimensions"></div>');nm.children.append(nn);var no=eF.$0();nm.children.append(no);var np=$('<div class="measures"></div>');nm.children.append(np);if(this.get_schemaViewerViewModel().isSelected(nk)){this.applySelection(nm)}if(nk.isHidden){nm.name.addClass('tab-schema-field-hidden')}if(nk.children.length>0){var nq=nl||(this.$1k[nk.get_comparisonKey()]||false);var nr=ss.mkdel(this,function(){for(var nu=0;nu<nk.children.length;nu++){var nv=nk.children[nu];var nw=this.$i(nv,false);if(nv.role==='measure'){np.append(nw)}else{nn.append(nw)}}});if(nq||this.get_viewModel().get_isSearching()){nr()}else{nm.deferredCreateChildren=nr;nm.children.hide()}if(this.get_viewModel().get_isSearching()){nq=nk.hasFilteredChildren}this.$13(nm,nq,false)}else{nm.children.hide()}this.$e(nk,nk,nm,nk.isHidden);var ns=this.dom.getDimMeasSeparatorForSection(nm.domRoot);var nt=kU.createContainerSectionDropTarget(nk.dataSourceName,'common',nm.domRoot,nk,ns);this.perInitDisposables.add$1(nt);return nm.domRoot},$7:function(nk,nl,nm){var nn=$("<div class='tab-schema-blending-button'></div>");nk.getElementBySelector('.tab-schema-field-pill').after(nn);var no=$(ss.formatString('<div class="{0} {1}"></div>','blend-icon-element',nl));nk.getElementBySelector('.tab-schema-blending-button').append(no);nk.getElementBySelector('.tab-schema-field-pill').addClass('blendable');var np=new spiff.Button(nn);np.set_hoverTooltipText(nm);var nq=np;nq.onClick(function(nr){eF.$3(nk)});this.perInitDisposables.add$1(nq)},initSection:function(nk,nl){if(!ss.keyExists(this.get_sections(),nk)){return false}this.$y(nk);var nm=this.get_schemaViewerViewModel().nodeTreeForSection(nk);var nn=this.$17(nk,nm);var no=this.$16(nk,nn);this.$1d(nk,nn);var np=this.getContentTreeNodeForSection(nk);np.append(Array.prototype.slice.call(this.$l(nk,nm,nl)));var nq=nm.some(function(nr){return nr.children.length>0});np.toggleClass('tab-schema-has-hierarchies',nq);np.toggleClass('tab-schema-no-hierarchies',!nq);return no},initTopLevelDragDrop:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_selectedDataSource())){return}this.$u();var nk=this.get_viewModel().get_selectedDataSource().get_name();if(ss.isValue(this.get_topLevelFieldsArea())&&this.get_topLevelFieldsArea().length>0){var nl=this.dom.getDimMeasSeparatorForSection(this.get_topLevelFieldsArea());this.$1u=kU.createContainerSectionDropTarget(nk,'common',this.get_topLevelFieldsArea(),null,nl)}var nm=this.get_sections()[2];if(ss.isValue(nm)&&nm.length>0){this.$1s=kU.createContainerSectionDropTarget(nk,'groups',nm,null,null)}var nn=this.get_sections()[3];if(ss.isValue(nn)&&nn.length>0){var no=this.get_viewModel().get_dataSchema().get_parametersDataSource();if(ss.isValue(no)){this.$1p=kU.createContainerSectionDropTarget(no.get_name(),'parameters',nn,null,null)}}},getContentTreeNodeForSection:function(nk){return this.get_sections()[nk]},initContent:function(){},layoutSections:function(){},initDataSources:function(){this.set_dataSourceTitles([]);var nk=this.get_schemaViewerViewModel().get_selectableDataSources();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new eH;tab.DomUtil.setNativeTooltip(nn.domRoot,nm.get_caption());nn.domRoot.prop('DataSource',nm);this.$1c(nn,nm);if(tab.MiscUtil.shouldShowDataTab()&&nm.get_isDataTabViewSupported()){var no=new EventUtils.EventHandleSpec;no.SetHandler('cancelPotentialDoubleTap',this.$r(nm,nn.domRoot));no.SetHandler('doubleTap',this.$s(nm));var np=spiff.TableauClickHandler.targetAndConfig(nn.domRoot[0],no);this.perInitDisposables.add$1(np)}else{this.perInitDisposables.add$1(spiff.TableauClickHandler.target(nn.domRoot[0]).onClick(this.$r(nm,nn.domRoot)))}this.get_dataSourceTitles().push(nn);this.$d(nn)}this.get_dataSourceTitles().sort(function(nq,nr){return nq.labelArea.text().localeCompare(nr.labelArea.text())});this.get_sourceTitles().empty();this.get_dataSourceTitles().forEach(ss.mkdel(this,function(nq){this.get_sourceTitles().append(nq.domRoot)}))},$y:function(nk){this.get_sections()[nk].empty()},$17:function(nk,nl){switch(nk){case 2:{return nl.length>0}case 3:{return nl.length>0&&this.get_viewModel().get_dataSchema().getDataSourceCount(false)>0}case 0:case 1:case 4:case 5:case 6:default:{return true}}},$16:function(nk,nl){if(this.get_viewModel().get_isSearching()){return false}if(nk===2||nk===3){var nm=this.$1r[nk]!==nl;if(nm){return true}}return false},$1d:function(nk,nl){if(!this.get_viewModel().get_isSearching()){if(ss.keyExists(this.get_headers(),nk)){this.get_headers()[nk].toggle(nl)}this.get_sections()[nk].toggle(nl);this.$1r[nk]=nl}},$c:function(nk,nl){var nm=eF.$4(nk)||this.isCurrentlyVisible(nk);if(nm&&nl.length===0&&this.get_viewModel().get_isSearching()){return true}return false},$l:function(nk,nl,nm){if(this.$c(nk,nl)){var nn=[];nn.push(this.$m(nk));return nn}else{if(nk===3||nk===2){nm=false}return((nk===4)?this.$h(nl,nm):this.$k(nl,nm))}},$m:function(nk){if(nk===5||nk===6||nk===4&&this.get_schemaViewerViewModel().getNodeCountForPane(0)>0){return null}return $('<div></div>').addClass('tab-schema-empty-section').text(tab.Strings.AuthSchemaViewerNoSearchMatches)},$h:function(nk,nl){var nm=[];for(var nn=0;nn<nk.length;nn++){var no=nk[nn];var np=this.$g(no,nl);np.addClass('tab-container');nm.push(np);nm.push(eF.$1())}return nm},$k:function(nk,nl){var nm=[];for(var nn=0;nn<nk.length;nn++){var no=nk[nn];nm.push(this.$i(no,nl))}return nm},isCurrentlyVisible:function(nk){return this.$1r[nk]},$1b:function(){this.initDataSources();var nk=this.get_dataSourceTitles();for(var nl=0;nl<nk.length;nl++){var nm={$:nk[nl]};var nn=_.find(this.get_schemaViewerViewModel().get_selectableDataSources(),ss.mkdel({dataSourceTitle:nm},function(no){return ss.referenceEquals(this.dataSourceTitle.$.domRoot.prop('DataSource'),no)}));if(ss.isValue(nn)){this.$1c(nm.$,nn)}}},$1c:function(nk,nl){var nm=this.get_schemaViewerViewModel().get_currentSheetSchema();if(ss.isNullOrUndefined(nm)){return}var nn=nl.get_caption().toString();var no=(nl.get_shouldShowDataSourceConnectionError()?tab.Strings.DataSourceConnectionErrorTitleText(nn):nn);nk.domRoot.attr('title',no);var np=nm.datasourceIcons;nk.labelArea.text(nl.get_caption());nk.icon.removeClass();nk.icon.addClass('tab-schema-dataSourceIcon');nk.icon.addClass(gN.getDataSourceIcon(np,nl));nk.brokenIndicatorArea.toggleClass('tab-schema-dataSourceBroken',nl.get_shouldShowDataSourceConnectionError());if(ss.referenceEquals(nl,this.get_schemaViewerViewModel().get_selectedDataSource())){nk.domRoot.addClass('tab-schema-dataSourceSelected');if(this.get_schemaViewerViewModel().get_selectableDataSources().length===1){nk.domRoot.addClass('tab-schema-singleDataSource')}if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){nk.domRoot.addClass('tab-dataSource-touchScreenSelected')}}},$r:function(nk,nl){return ss.mkdel(this,function(){eF.$6(nl);this.get_schemaViewerViewModel().set_selectedDataSource(nk)})},$s:function(nk){return ss.mkdel(this,function(){if(!ss.referenceEquals(nk,this.get_schemaViewerViewModel().get_selectedDataSource())){tab.SchemaClientCommands.setActiveDataSourceName(nk.get_name(),false)}tab.VizClientCommands.setUIMode('data-tab','EditDataSource','')})},$Z:function(){return BrowserSupport.BrowserSupport.IsTouchAndNonMobile()&&!this.$1l}},{$2:function(nk,nl){if(nl){return'tab-schema-field-pill-inactive'}switch(nk){case'quantitative':{return'tab-schema-field-pill-measure'}case'ordinal':case'nominal':default:{return'tab-schema-field-pill-dimension'}}},$3:function(nk){tab.SchemaClientCommands.toggleFieldBlending(nk.get_node().globalFieldName,function(nl){var nm=nk.domRoot.find('.'+'blend-icon-element');nm.toggleClass('tab-schema-blending-candidate-icon');nm.toggleClass('tab-schema-blending-icon')})},$0:function(){var nk="<div class='tab-columnSeparator'>\n  <div class='separatorLabel dimLabel'><span class='separatorLabelText'>"+tab.Strings.AuthSchemaViewerHeaderDimensions+"</span></div>\n  <div class='separatorLine'></div>\n  <div class='separatorLabel measLabel'><span class='separatorLabelText'>"+tab.Strings.AuthSchemaViewerHeaderMeaures+'</span></div>\n</div>';return $(nk)},$1:function(){return $('<div class="tab-containerSeparator"></div>')},$4:function(nk){return nk===0||nk===1||nk===4},$5:function(nk,nl){if(ss.isNullOrUndefined(nl.fieldIconResource)||nl.fieldIconResource.length===0){nk.iconArea.toggleClass('no-icon',true);return}nk.iconArea.toggleClass('no-icon',false);nk.icon.addClass(gN.getFieldIcon$1(nl));spiff.Widget.disableTextSelectionOnElement(nk.icon)},$6:function(nk){if(BrowserSupport.BrowserSupport.IsTouchAndNonMobile()){nk.addClass('tab-dataSource-touchScreenSelected')}}});var eG=global.tab.DataSourceDataModelUpdateProxy=ss.mkType(a,'tab.DataSourceDataModelUpdateProxy',null,null,{set:function(nk){eG.$2=nk},clear:function(){eG.$2=null},$0:function(){return(ss.isValue(eG.$2)?eG.$2.returnDataSourceDataModel():null)}});var eH=global.tab.DataSourceTemplate=ss.mkType(a,'tab.DataSourceTemplate',function(){this.icon=null;this.labelArea=null;this.menuButton=null;this.brokenIndicatorArea=null;this.$1=null;this.$2=null;spiff.Template.call(this,$("<div class='tab-dataSource'><div class='tab-schema-dataSourceIcon'></div><div class='tab-schema-dataSourceName'></div><div class='tab-schema-dataSourceBrokenIndicatorArea'><div class='tab-schema-dataSourceBrokenIndicatorIcon'></div></div><div class='tab-schema-dataSourceMenuButton'><div class='tab-schema-dataSourceMenuIcon'></div></div></div>"));this.icon=this.getElementBySelector('.'+'tab-schema-dataSourceIcon');this.labelArea=this.getElementBySelector('.'+'tab-schema-dataSourceName');this.brokenIndicatorArea=this.getElementBySelector('.'+'tab-schema-dataSourceBrokenIndicatorArea');this.menuButton=this.getElementBySelector('.'+'tab-schema-dataSourceMenuButton')},{getMenuClickHandler:function(nk){if(ss.isNullOrUndefined(this.$2)){this.$2=spiff.TableauClickHandler.target(this.menuButton[0]);nk.add$1(this.$2)}return this.$2},getLabelClickHandler:function(nk){if(ss.isNullOrUndefined(this.$1)){this.$1=spiff.TableauClickHandler.target(this.labelArea[0]);nk.add$1(this.$1)}return this.$1}});var eI=global.tab.DataSourceUpdateNeededProxy=ss.mkType(a,'tab.DataSourceUpdateNeededProxy',null,null,{set:function(nk){eI.$2=nk},clear:function(){eI.$2=null},$0:function(){if(ss.isNullOrUndefined(eI.$2)){return null}return eI.$2.returnNotificationHandler()}});var eJ=global.tab.DataTabMenuBarBuilder=ss.mkType(a,'tab.DataTabMenuBarBuilder',function(){iE.call(this)},{addModeSpecificMenus:function(nk){},addModeSpecificHelpItems:function(nk,nl){}});var eK=global.tab.DataTabProxy=ss.mkType(a,'tab.DataTabProxy',function(){this.$b=null;this.$4=null;this.$8=null;this.$6=null;this.$9=null;this.$3='';this.$a=null;this.$7=null;this.$5=null;var nk=tab.ModuleManager.registerRawJsModule('@tableau/'+'data-tab-components','data-tab-components'+'.min','data-tab-components').moduleBeingConfigured;var nl=tab.ModuleManager.register(tab.IDataTabIsolatedModule).call(null,'DataTabIsolated',null).andLoadOnDemandIf(!tsConfig.isUnitTestRun).moduleBeingConfigured;nl.addDependency(nk);var nm=tab.ModuleManager.registerRawJsModule('@tableau/'+'extract-widgetry','extract-widgetry'+'.min','extract-widgetry').moduleBeingConfigured;nl.addDependency(nm);var nn=tab.ModuleManager.register(tab.IDataTabModule).call(null,'DataTab',null).andLoadOnDemandIf(!tsConfig.isUnitTestRun).moduleBeingConfigured;nn.addDependency(new tab.JsModuleInfo(ss.getTypeFullName(tab.IDataTabIsolatedModule),null))},{setWorkbook:function(nk){if(ss.isValue(this.$b)){this.$b.remove_uiModeChanged(ss.mkdel(this,this.$2))}if(!ss.staticEquals(this.$9,null)){this.$9();this.$9=null}if(!ss.staticEquals(this.$a,null)){this.$a();this.$a=null}tab.MiscUtil.dispose$1(this.$4);tab.MiscUtil.dispose$1(this.$8);tab.MiscUtil.dispose$1(this.$6);this.$b=nk;if(ss.isValue(this.$b)){this.$b.add_uiModeChanged(ss.mkdel(this,this.$2));this.$4=new tab.NotificationForwarder('doc:update-data-preparation-event');this.$8=new tab.NotificationForwarder('doc:show-join-area-event');this.$6=new tab.NotificationForwarder('doc:update-join-description-event');this.$9=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:get-active-object-pres-model-notification-event',ss.mkdel(this,this.$0));this.$a=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:get-object-graph-pres-model-notification-event',ss.mkdel(this,this.$1));if(this.$b.get_uiMode()==='data-tab'){this.$2()}}},$2:function(){if('data-tab'===this.$b.get_uiMode()){tab.ModuleManager.load$1(tab.IDataTabModule).call(null,[]).done(ss.mkdel(this,function(nk){this.$5=nk;var nl=this.$5.showDataTab(this.$b.get_dataSchema(),this.$3,this.$7,tab.PluginPresentationLayer.get_instance());this.$4.setReceiver(nl.updateDataPrepHandler);this.$8.setReceiver(nl.showJoinAreaHandler);this.$6.setReceiver(nl.updateJoinAreaHandler)}))}else if(ss.isValue(this.$5)){this.$5.hideDataTab()}},$0:function(nk){var nl=nk;this.$3=nl.dataObjectModelObjectId},$1:function(nk){this.$7=nk}},{new$1:function(nk){var nl=new eK;nl.setWorkbook(nk);return nl},$0:function(nk){eK.$1()},$1:function(){if(ss.isNullOrUndefined(eK.$3)){eK.$3=eK.new$1(tab.ApplicationModel.get_instance().get_workbook())}else{eK.$3.setWorkbook(tab.ApplicationModel.get_instance().get_workbook())}}});var eL=global.tab.DateModifiedDriver=ss.mkType(a,'tab.DateModifiedDriver',function(nk,nl){this.$2=null;this.$3=null;this.$4=null;this.$1$1=null;this.$3=nl;this.$2=nk},{add_onNewModifiedTextBuilt:function(nk){this.$1$1=ss.delegateCombine(this.$1$1,nk)},remove_onNewModifiedTextBuilt:function(nk){this.$1$1=ss.delegateRemove(this.$1$1,nk)},stopDateGeneration:function(){this.$4=tab.MiscUtil.clearTimeout(this.$4)},startDateGeneration:function(nk){this.$4=tab.MiscUtil.clearTimeout(this.$4);if(ss.staticEquals(nk,null)){return}this.$1(nk)},$1:function(nk){var nl=this.$0(nk);var nm=this.$2[nl].get_builder().buildDisplayTextForDate(nk,this.$3);if(!ss.staticEquals(this.$1$1,null)){this.$1$1(nm)}if(nl<this.$2.length-1){this.$4=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.startDateGeneration(nk)}),this.$2[nl].get_nextUpdateIntervalMs())}},$0:function(nk){var nl=0;var nm=tab.DateUtil.differenceInMinutes(tab.DateUtil.get_utcNow(),ss.toUTC(nk));while(nl<this.$2.length&&nm>=this.$2[nl].get_minutesDisplayIsValid()){nl++}return nl}});var eM=global.tab.DebouncedTextInputComponent=ss.mkType(a,'tab.DebouncedTextInputComponent',function(){this.$0=null;React.Component.call(this);this.$0=ss.mkdel(this,function(nk){this.props.onElementUpdatedHandler(nk)})},{render:function(){var nk={text:this.props.value,handleChange:this.props.onChangedHandler,handleClearText:this.props.onClearTextHandler,disabled:!this.props.enabled,testId:this.props.testId,shouldSelectTextOnFocus:this.props.shouldSelectTextOnFocus};if(ss.isValue(this.props.containerStyle)){nk.containerStyle=this.props.containerStyle}if(!ss.staticEquals(this.props.onSubmitHandler,null)){nk.handleBlur=ss.mkdel(this,function(nl){this.props.onSubmitHandler()});nk.handleEnter=this.props.onSubmitHandler}if(!ss.staticEquals(this.props.onElementUpdatedHandler,null)){nk.inputRef=this.$0}return React.createElement(SharedWidgets.OutlineTextFieldWidget,nk)}});var eN=global.tab.DebouncedTextInputViewModel=ss.mkType(a,'tab.DebouncedTextInputViewModel',function(nk){this.$j=null;this.$g=false;this.$h=null;this.$i=false;this.$3$1=null;this.$3$2=false;this.$3$3=false;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$j=nk;this.$h='';this.$g=true;this.set_shouldSelectTextOnFocus(true);this.$f(new tab.Debouncer(ss.mkdel(this,this.$4),eN.defaultDebounceTimeout));this.disposables.add$1(this.$e())},{add_onValueChanged:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_onValueChanged:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_shouldSelectTextOnRender:function(){return this.$i},set_shouldSelectTextOnRender:function(nk){this.$i=nk},get_shouldSelectTextOnFocus:function(){return this.$3$2},set_shouldSelectTextOnFocus:function(nk){this.$3$2=nk},get_enabled:function(){return this.$g},set_enabled:function(nk){this.$g=nk;this.incrementProps()},get_allowEmpty:function(){return this.$3$3},set_allowEmpty:function(nk){this.$3$3=nk},$e:function(){return this.$3$4},$f:function(nk){this.$3$4=nk},$c:function(){return this.$h},$d:function(nk){this.$h=nk;this.incrementProps()},$a:function(){return this.$3$5},$b:function(nk){this.$3$5=nk},$8:function(){return this.$3$6},$9:function(nk){this.$3$6=nk},get_hasChangedSinceLastValueCommit:function(){return this.$3$7},set_hasChangedSinceLastValueCommit:function(nk){this.$3$7=nk},updateFromModel:function(nk){this.$b(nk);if(!this.get_hasChangedSinceLastValueCommit()){this.$d(nk)}},insertText:function(nk){if(ss.isNullOrUndefined(this.$8())){return}var nl=this.$8().selectionStart;tab.DomUtil.replaceSelection(this.$8(),nk);if(BrowserSupport.BrowserSupport.SetSelectionRange()){this.$8().selectionStart=this.$8().selectionEnd=nl+nk.length}this.$5(this.$8().value)},selectText:function(){if(ss.isNullOrUndefined(this.$8())){return}this.$8().select()},createUpdatedProps:function(){return{value:this.$c(),enabled:this.get_enabled(),onChangedHandler:ss.mkdel(this,this.$5),onSubmitHandler:ss.mkdel(this,this.$6),onElementUpdatedHandler:ss.mkdel(this,this.$7),onClearTextHandler:ss.mkdel(this,this.$3),shouldSelectTextOnFocus:this.get_shouldSelectTextOnFocus(),testId:this.$j,key:'dti_'+this.$j}},$4:function(){this.set_hasChangedSinceLastValueCommit(false);if(!ss.staticEquals(this.$3$1,null)){this.$3$1(this.$c())}},$3:function(){this.$5('');this.$8().focus()},$7:function(nk){this.$9(nk);if(this.$i){this.selectText();this.set_shouldSelectTextOnRender(false)}},$6:function(){if(tab.MiscUtil.isNullOrEmpty$1(this.$c())&&!this.get_allowEmpty()){this.$d(this.$a())}else if(!ss.referenceEquals(this.$c(),this.$a())){this.$e().invokeActionImmediate()}},$5:function(nk){this.$d(nk);this.set_hasChangedSinceLastValueCommit(true);if(tab.MiscUtil.isNullOrEmpty$1(nk)&&!this.get_allowEmpty()){this.$e().cancel()}else{this.$e().invokeActionDelayed()}}});var eO=global.tab.DeleteSelectedZonesShortcut=ss.mkType(a,'tab.DeleteSelectedZonesShortcut',function(nk,nl){this.$1=null;this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$1=nk;this.$0=nl},{getAdditionalOptions:function(){var nk=new Object;nk.propagation=2;return nk},getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(new KeyboardShortcuts.KeyCombo('Backspace',null))},isAllowed:function(nk){var nl=$(nk.target);var nm=!nl.is('.'+'tab-LayoutTree');if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){nm=nm&&!nl.is('.'+'tab-LayoutTreeNode')}return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,nk)&&nm&&this.$1()},executeShortcut:function(nk){this.$0()},getTelemetryKey:function(){return'Delete Selected Zones'}});var eP=global.tab.DeleteSheetCommandRedirectHandler=ss.mkType(a,'tab.DeleteSheetCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['sheet'.toString()];var nn=tab.ConfirmationViewModel.create(tab.Strings.DeleteSheetWithVizInTooltipDialogMessage,function(no){if(no==='confirm'){tab.SheetClientCommands.deleteSheet(nm)}nl.resolve()});nn.set_titleText(tab.Strings.DeleteSheetWithVizInTooltipDialogTitle);nn.set_confirmText(tab.Strings.DeleteSheetWithVizInTooltipDialogButton);nn.set_denyText(tab.Strings.DialogButtonCancel);nn.show();return nl.promise()}});var eQ=global.tab.DestroyVQLSessionCommand=ss.mkType(a,'tab.DestroyVQLSessionCommand',function(){tab.DestroyVQLSessionCmd.call(this)},{get_isEnabled:function(){return true},do$1:function(){tab.SessionServerCommands.destroySessionAndForward(function(){bf.redirectToView(null,null)},cd.get_instance().get_autoSaveEnabled())}});var eR=global.tab.DeviceLayoutListComponent=ss.mkType(a,'tab.DeviceLayoutListComponent',function(nk,nl){this.$3=null;React.PureComponent.call(this,nk,nl)},{render:function(){var nk=[this.$2(),this.renderDevicePreviewButton()];var nl=['tab-Section','tab-DeviceLayoutList'].join(' ');if(tab.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.div({className:nl,key:'device-layout-list-section',onContextMenu:ss.mkdel(this,function(nn){nn.preventDefault();var no=new spiff.ShowMenuOptions($(nn.target),false);no.cursorPosition={left:nn.clientX,top:nn.clientY};var np=no;this.$1(np)})},spiff.DOMElements.div(ea.get_contentHTMLAttr(),nk))}else{var nm=new EventUtils.EventHandleSpec;nm.rightClick=ss.mkdel(this,function(nn){var no=new spiff.ShowMenuOptions($(nn.target),false);no.cursorPosition={left:nn.clientX,top:nn.clientY};var np=no;this.$1(np)});return EventUtils.EventForwarder.div(nm,{className:nl,key:'device-layout-list-section'},spiff.DOMElements.div(ea.get_contentHTMLAttr(),nk))}},renderDevicePreviewButton:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&tab.FeatureFlags.isEnabled('BEAuthoring_DevicePreviewBar')){var nk={handleClick:this.props.setDevicePreviewBarVisibility,buttonType:(this.props.devicePreviewBarIsVisible?2:3),testId:'device-preview',buttonRef:ss.mkdel(this,function(nl){this.$3=nl}),children:tab.Strings.DevicePreview,disabled:this.props.devicePreviewButtonDisabled,title:(this.props.devicePreviewBarIsVisible?tab.Strings.DevicePreviewOffTooltip:tab.Strings.DevicePreviewTooltip)};return spiff.DOMElements.div({key:'device-preview-button'},spiff.DOMElements.div({className:'tab-DevicePreview',onContextMenu:ss.mkdel(this,function(nl){nl.stopPropagation();nl.preventDefault();var nm=new spiff.ShowMenuOptions($(this.$3),false);nm.cursorPosition={left:nl.clientX,top:nl.clientY};var nn=nm;this.$1(nn)})},React.createElement(SharedWidgets.ButtonWidget,nk)))}return null},$2:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&tab.FeatureFlags.isEnabled('BEAuthoring_DevicePreviewBar')&&this.props.modifiedLayouts.length===0){return null}var nk=[this.$0('default')];ss.arrayAddRange(nk,_.map(this.props.modifiedLayouts,ss.mkdel(this,this.$0)));return spiff.DOMElements.div({key:'device-list',className:'tab-LayoutList'},nk)},$0:function(nk){return eS.create({dashboardDeviceLayout:nk,isSelected:nk===this.props.currentLayout,isAutoGenerated:ss.contains(this.props.autoGeneratedLayouts,nk),select:this.props.selectDeviceLayout,toggleAutoGenerated:this.props.toggleAutoGenerated,openMoreActionsMenu:this.props.openMoreActionsMenu,moreActionsMenuTargetLayout:this.props.moreActionsMenuTargetLayout,key:'device-layout-list-item-'+nk.toString()})},$1:function(nk){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){this.props.openDeviceLayoutContextMenu(nk)}}});var eS=global.tab.DeviceLayoutListItemComponent=ss.mkType(a,'tab.DeviceLayoutListItemComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state={}},{render:function(){var nk=this.props.dashboardDeviceLayout;var nl=this.$0(nk);var nm=((nk!=='default')?'tabAuthModifiedDevice':'tabAuthDefaultLayout');var nn=(this.props.isSelected?'selected':'');var no=(this.$2(nk)?'menuOpened':'');var np=['tabAuthDevice',nm,nn,no].join(' ');var nq=nk!=='default';if(tab.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.div({className:np,key:nl,onClick:ss.mkdel(this,function(ns){this.$1()})},nl,this.$5(nk),(nq?ss.mkdel(this,function(){return this.$6(nk)})():null))}else{var nr=new EventUtils.EventHandleSpec;nr.tap=ss.mkdel(this,function(ns){this.$1()});return EventUtils.EventForwarder.div(nr,{className:np,key:nl},nl,this.$5(nk),(nq?ss.mkdel(this,function(){return this.$6(nk)})():null))}},$5:function(nk){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&nk==='phone'){var nl=(this.props.isAutoGenerated?'-locked':'-unlocked');var nm=(this.props.isAutoGenerated?tab.Strings.DashboardAuthoringCustomizeLayoutTooltip:tab.Strings.DashboardAuthoringAutoGenerateLayoutTooltip);if(tab.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.span({className:'tabAuthAutoGenerateLayoutIcon'+nl,key:'autoGenerateLayout',role:'button',title:nm,onClick:ss.mkdel(this,function(no){this.props.toggleAutoGenerated(nk)})})}else{var nn=new EventUtils.EventHandleSpec;nn.tap=ss.mkdel(this,function(no){this.props.toggleAutoGenerated(nk)});return EventUtils.EventForwarder.span.apply(null,[nn,{className:'tabAuthAutoGenerateLayoutIcon'+nl,key:'autoGenerateLayout',role:'button',title:nm}].concat(null))}}return null},$6:function(nk){if(tab.FeatureFlags.isEnabled('EventUtilsEventHandlingRework')){return spiff.DOMElements.span({key:'moreActions',role:'button',className:'tabAuthMoreActionsIcon',title:tab.Strings.MoreActions,onClick:ss.mkdel(this,function(nm){this.$3(nm,nk)})})}else{var nl=new EventUtils.EventHandleSpec;nl.tap=ss.mkdel(this,function(nm){this.$4(nm,nk)});return EventUtils.EventForwarder.span.apply(null,[nl,{key:'moreActions',role:'button',className:'tabAuthMoreActionsIcon',title:tab.Strings.MoreActions}].concat(null))}},$1:function(){if(!ss.staticEquals(this.props.select,null)){this.props.select(this.props.dashboardDeviceLayout)}},$4:function(nk,nl){if(!ss.staticEquals(this.props.openMoreActionsMenu,null)){this.props.openMoreActionsMenu(nl,new spiff.ShowMenuOptions($(nk.target),false))}nk.stopPropagation()},$3:function(nk,nl){if(!ss.staticEquals(this.props.openMoreActionsMenu,null)){this.props.openMoreActionsMenu(nl,new spiff.ShowMenuOptions($(nk.target),false))}nk.stopPropagation()},$2:function(nk){return nk===this.props.moreActionsMenuTargetLayout},$0:function(nk){return dM.getUserString(nk)}},{create:function(nk){return React.createElement(eS,nk)}});var eT=global.tab.DeviceLayoutListTelemetry=ss.mkType(a,'tab.DeviceLayoutListTelemetry',null,null,{logDeleteLayoutEvent:function(nk,nl){var nm=ss.mkdict(['Layout',nk,'IsAutoGenerated',nl]);tab.OnlineAnalyticsClient.logEvent('Authoring_DSD_DeleteLayout',nm)}});var eU=global.tab.DeviceLayoutListViewModel=ss.mkType(a,'tab.DeviceLayoutListViewModel',function(nk){this.$8=null;this.$a=null;this.$9=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$8=nk;this.disposables.add$1(this.$8.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.add_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nl.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.remove_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nl.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{selectDeviceLayout:function(nk){if(nk!==this.$8.get_model().get_currentDeviceLayout()){tab.DashboardClientCommands.setDashboardDeviceLayout(nk)}},$3:function(nk){if(ss.isValue(this.$8.get_model())){tab.DashboardClientCommands.newDashboardLayout(this.$8.get_model().get_sheetName(),nk,true)}},setDevicePreviewBarVisibility:function(nk){if(ss.isValue(this.$8.get_model())){this.$9=true;tab.DashboardClientCommands.setIsDevicePreviewVisible(!this.$8.get_model().get_devicePreviewBarIsVisible(),ss.mkdel(this,function(){this.$9=false;this.incrementProps()}));this.incrementProps()}},openMoreActionsMenu:function(nk,nl){var nm=ss.mkdel(this,function(nn){var no=nn.commands;var np=tab.WidgetUtil.menuViewModelFromCommands(no,tab.WidgetUtil.commandMenuItemClicked,ss.mkdel(this,this.$6),null,ss.mkdel(this,function(nq){return this.createDropdownMenuCommandHandler(nq,nk)}));np.show(nl)});this.$a=nk;this.incrementProps();tab.DashboardClientCommands.getDeviceLayoutListContextMenu(nk,nm)},openDeviceLayoutContextMenu:function(nk){var nl=this.$4();if(nl.length===0){return}var nm=spiff.MenuViewModel.createForMenu(new spiff.Menu(nl),ss.mkdel(this,function(nn){var no=nn.data;this.$3(no)}),null,null);nm.show(nk)},createDropdownMenuCommandHandler:function(nk,nl){var nm=tab.WidgetUtil.createDropdownMenuCommandHandler(nk);var nn=tab.CommandItemWrapper.create(nk);var no=tab.CommandSerializer.deserialize(nn.get_command(),false);return ss.mkdel(this,function(){if(ss.referenceEquals(no.commandName,{ns:'tabdoc',cmd:'delete-dashboard-layout'}.cmd)){eT.logDeleteLayoutEvent(nl,this.$5(nl))}nm()})},$6:function(){this.$a=null;this.incrementProps()},$5:function(nk){var nl=this.$8.get_model();return ss.isValue(nl)&&ss.isValue(nl.get_autoGeneratedDeviceLayouts())&&ss.contains(nl.get_autoGeneratedDeviceLayouts(),nk)},$7:function(nk){tab.DashboardClientCommands.toggleAutomaticLayoutMode(this.$8.get_model().get_sheetName(),nk)},createInitialProps:function(){var nk=this.$8.get_model();var nl=((ss.isValue(nk)&&ss.isValue(nk.get_deviceLayouts()))?nk.get_deviceLayouts():[]);return{autoGeneratedLayouts:nl.filter(ss.mkdel(this,function(nm){return this.$5(nm)})),selectDeviceLayout:ss.mkdel(this,this.selectDeviceLayout),toggleAutoGenerated:ss.mkdel(this,this.$7),openMoreActionsMenu:ss.mkdel(this,this.openMoreActionsMenu),openDeviceLayoutContextMenu:ss.mkdel(this,this.openDeviceLayoutContextMenu),setDevicePreviewBarVisibility:ss.mkdel(this,this.setDevicePreviewBarVisibility),devicePreviewBarIsVisible:ss.isValue(nk)&&nk.get_devicePreviewBarIsVisible(),devicePreviewButtonDisabled:this.$9,hasMaxDeviceLayouts:false,key:'device-layout-list'}},$4:function(){var nk=[];var nl=this.$8.get_model();if(ss.isNullOrUndefined(nl)){return nk}if(ss.isValue(nl.get_deviceLayouts())&&nl.get_deviceLayouts().length!==3){if(!ss.contains(nl.get_deviceLayouts(),'desktop')){nk.push(spiff.MenuItem.newItem('desktop',tab.Strings.AddDesktopLayout,tab.Strings.AddDesktopLayout,null,null))}if(!ss.contains(nl.get_deviceLayouts(),'tablet')){nk.push(spiff.MenuItem.newItem('tablet',tab.Strings.AddTabletLayout,tab.Strings.AddTabletLayout,null,null))}if(!ss.contains(nl.get_deviceLayouts(),'phone')){nk.push(spiff.MenuItem.newItem('phone',tab.Strings.AddPhoneLayout,tab.Strings.AddPhoneLayout,null,null))}}return nk},createUpdatedProps:function(){var nk=this.$8.get_model();if(ss.isNullOrUndefined(nk)){return eU.$1}var nl=nk.get_deviceLayouts()||[];return{modifiedLayouts:nl,autoGeneratedLayouts:nl.filter(ss.mkdel(this,function(nm){return this.$5(nm)})),hasDevices:ss.isValue(nk.get_deviceLayouts())&&nk.get_deviceLayouts().length>0,currentLayout:this.$8.get_model().get_currentDeviceLayout(),moreActionsMenuTargetLayout:this.$a,devicePreviewBarIsVisible:nk.get_devicePreviewBarIsVisible(),devicePreviewButtonDisabled:this.$9,hasMaxDeviceLayouts:ss.isValue(nk.get_deviceLayouts())&&nk.get_deviceLayouts().length===3,key:'device-layout-list'}}});var eV=global.tab.DevicePreviewBarHostComponent=ss.mkType(a,'tab.DevicePreviewBarHostComponent',function(nk){ss.makeGenericType(tab.PureComponentWithAsyncDependencies$3,[Object,Object,Object]).call(this,nk)},{fetchAsyncDependencies:function(){return tab.ModuleManager.load('device-preview-bar',[]).pipe(function(nk){return nk})},renderWhileWaiting:function(){return null},renderWithDependencies:function(nk){if(!this.props.isVisible){return null}var nl=bu.computeSizing({leftAreaWidth:this.props.leftAreaWidth,isMobile:tsConfig.is_mobile,isDevicePreviewBarVisible:true,sheetType:'dashboard'});var nm={currentLayout:this.props.currentLayout,dashboard:tsConfig.current_sheet_name,deviceLayoutList:this.props.deviceLayoutList,existingLayouts:Array.prototype.slice.call(this.props.existingLayouts),isMobileAppChecked:this.props.isMobileAppChromeVisible,isOrientationPortrait:this.props.isPortraitMode,portPreviewList:Array.prototype.slice.call(this.props.previewPortSizeList),overlayPropsOverride:{zIndex:702+1}};return spiff.DOMElements.div({className:eV.devicePreviewBarClass,style:{height:tabBootstrap.VizLayoutConstants.get_authoringDevicePreviewBarHeight(),top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px',left:nl.left,right:0}},React.createElement(nk.DevicePreviewBar,nm))}});var eW=global.tab.DevicePreviewBarViewModel=ss.mkType(a,'tab.DevicePreviewBarViewModel',function(nk,nl){this.$3=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=nk;this.$4=nl;this.disposables.add$1(this.$3.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nm){if(nm.get_isDashboard()){nm.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nm.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nm.add_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nm.add_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nm.add_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps));nm.add_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(nm){if(nm.get_isDashboard()){nm.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nm.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nm.remove_currentDeviceLayoutListChanged(ss.mkdel(this,this.incrementProps));nm.remove_currentPreviewLayoutChanged(ss.mkdel(this,this.incrementProps));nm.remove_devicePreviewBarVisibilityChanged(ss.mkdel(this,this.incrementProps));nm.remove_previewPortSizeListChanged(ss.mkdel(this,this.incrementProps))}})))},{update:function(){this.incrementProps()},createInitialProps:function(){return{isVisible:false,leftAreaWidth:this.$4.get_leftAreaWidth(),currentLayout:'default',existingLayouts:[],deviceLayoutList:{},isMobileAppChromeVisible:false,isPortraitMode:true,previewPortSizeList:[]}},createUpdatedProps:function(){var nk=this.$3.get_model();if(ss.isNullOrUndefined(nk)||!nk.get_isDashboard()||nk.isStory()||ss.isNullOrUndefined(nk.get_previewPortSizeList())||nk.get_previewPortSizeList().length===0){return{isVisible:false}}var nl='default';if(ss.isValue(nk)&&nk.get_isDashboard()&&ss.isValue(nk.get_dashboardSize())){nl=((nk.get_currentDeviceLayout()!=='default')?nk.get_currentDeviceLayout():nk.get_currentPreviewLayout())}var nm=nk.previewPortSizeForDeviceLayout(nl);return{isVisible:nk.get_devicePreviewBarIsVisible(),leftAreaWidth:this.$4.get_leftAreaWidth(),currentLayout:nl,existingLayouts:nk.get_deviceLayouts(),deviceLayoutList:nk.get_deviceLayoutInfoList(),isPortraitMode:nm.h>nm.w,isMobileAppChromeVisible:nk.get_isMobileAppChromeVisible(),previewPortSizeList:nk.get_previewPortSizeList()}}});var eX=global.tab.DifferenceTableCalcViewModel=ss.mkType(a,'tab.DifferenceTableCalcViewModel',function(nk){this.$0=null;this.$1=null;mi.call(this);this.$0=nk;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$1=new lP(nk.get_referenceModel());this.disposables.add$1(this.$1)},{get_differenceFromComboBoxVM:function(){return this.$1.get_referenceComboBoxVM()},get_computeCompoundedRate:function(){return this.$0.get_computeCompoundedRate()},get_computeCompoundedRateState:function(){return this.$0.get_computeCompoundedRateState()},get_model:function(){return this.$0},get_referenceViewModel:function(){return this.$1},onModelUpdated:function(){},computeCompoundedRateChanged:function(nk){if(nk===this.$0.get_computeCompoundedRate()){return}var nl=new tab.TableCalcSetCompoundRateCmd;nl.set_uiBlocking('immediately');nl.c['bool']=nk;nl.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var eY=global.tab.DisplayBuilderEntry=ss.mkType(a,'tab.DisplayBuilderEntry',function(){this.$1$1=0;this.$1$2=0;this.$1$3=null},{get_minutesDisplayIsValid:function(){return this.$1$1},set_minutesDisplayIsValid:function(nk){this.$1$1=nk},get_nextUpdateIntervalMs:function(){return this.$1$2},set_nextUpdateIntervalMs:function(nk){this.$1$2=nk},get_builder:function(){return this.$1$3},set_builder:function(nk){this.$1$3=nk}});var eZ=global.tab.DistributionPercentagesComponent=ss.mkType(a,'tab.DistributionPercentagesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-percentages'},spiff.DOMElements.div({className:'tab-percentagesSection'},spiff.DOMElements.span({className:'tab-percentagesTitle tab-componentLabel'},tab.Strings.AODialogPercentagesLabel),spiff.DOMElements.div({className:'tab-percentagesSectionInner'},React.createElement(eM,this.props.percentagesProps))),spiff.DOMElements.div({className:'tab-percentOfSection'},spiff.DOMElements.span({className:'tab-percentOfTitle tab-componentLabel'},tab.Strings.AODialogPercentOfLabel),spiff.DOMElements.div({className:'tab-percentagesSectionInner'},(this.props.isConstantSelected?React.createElement(eM,this.props.constantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.valueProps)),React.createElement(spiff.ComboBoxComponent,this.props.formulaProps))))}});var fa=global.tab.DistributionPercentagesState=ss.mkType(a,'tab.DistributionPercentagesState',function(){});var fb=global.tab.DistributionPercentagesViewModel=ss.mkType(a,'tab.DistributionPercentagesViewModel',function(nk){fb.$ctor1.call(this,nk,spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel(),new fO(nk.get_fieldPickerCombo()),new eN(fb.percentagesTestId),new eN(fb.constantValueTestId))},{get_percentagesViewModel:function(){return this.$3$1},set_percentagesViewModel:function(nk){this.$3$1=nk},get_constantValueViewModel:function(){return this.$3$2},set_constantValueViewModel:function(nk){this.$3$2=nk},get_distributionPercentagesModel:function(){return this.$3$3},set_distributionPercentagesModel:function(nk){this.$3$3=nk},get_formulaViewModel:function(){return this.$3$4},set_formulaViewModel:function(nk){this.$3$4=nk},get_valueViewModel:function(){return this.$3$5},set_valueViewModel:function(nk){this.$3$5=nk},get_visualId:function(){return this.get_distributionPercentagesModel().get_visualID()},get_referenceLineId:function(){return this.get_distributionPercentagesModel().get_refLineID()},get_isParameterSelected:function(){return this.get_distributionPercentagesModel().get_isParameterSelected()},get_isConstantSelected:function(){return this.get_distributionPercentagesModel().get_formulaType()==='constant'},$8:function(){var nk=[];var nl=null;var nm=this.get_distributionPercentagesModel().get_validFormulaTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.displayText,no.referenceLineFormulaType,null,null);if(ss.equals(no.referenceLineFormulaType,this.get_distributionPercentagesModel().get_formulaType())){nl=np}nk.push(np)}this.get_formulaViewModel().setItemsWithInitialSelection(nk,nl);this.get_formulaViewModel().set_selectedItem(nl);this.get_formulaViewModel().set_enabled(!this.get_isParameterSelected())},$4:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['percentagesStr']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke().always(ss.mkdel(this,this.$6))},$3:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['constantValue']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke().always(ss.mkdel(this,this.$6))},$7:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(!ss.referenceEquals(nl,this.get_distributionPercentagesModel().get_fieldPickerCombo().get_selectedField())){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['fn']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$5:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_distributionPercentagesModel().get_formulaType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineFormulaType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$6:function(){this.get_percentagesViewModel().updateFromModel(this.get_distributionPercentagesModel().get_percentages());this.get_constantValueViewModel().updateFromModel(this.get_distributionPercentagesModel().get_formattedConstantValue());this.$8();this.get_valueViewModel().updateDomFromModel();this.incrementProps()},createUpdatedProps:function(){return{percentagesProps:this.get_percentagesViewModel().get_props(),valueProps:this.get_valueViewModel().get_props(),formulaProps:this.get_formulaViewModel().get_props(),isParameterSelected:this.get_isParameterSelected(),isConstantSelected:this.get_isConstantSelected(),constantValueProps:this.get_constantValueViewModel().get_props()}}},{$ctor1:function(nk,nl,nm,nn,no){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionPercentagesModel(nk);this.set_formulaViewModel(nl);this.get_formulaViewModel().set_dropdownStyleClass(fb.formulaCssClass);this.disposables.add$1(this.addChildViewModel(this.get_formulaViewModel()));this.set_valueViewModel(nm);this.get_valueViewModel().set_dropdownStyleClass(fb.valueCssClass);this.disposables.add$1(this.addChildViewModel(this.get_valueViewModel()));this.set_percentagesViewModel(nn);this.disposables.add$1(this.addChildViewModel(this.get_percentagesViewModel()));this.set_constantValueViewModel(no);this.disposables.add$1(this.addChildViewModel(this.get_constantValueViewModel()));this.get_distributionPercentagesModel().add_modelUpdated(ss.mkdel(this,this.$6));this.get_percentagesViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_constantValueViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_formulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$5));this.get_valueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$7));this.get_formulaViewModel().set_hasTooltip(false);this.get_valueViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionPercentagesModel().remove_modelUpdated(ss.mkdel(this,this.$6));this.get_percentagesViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_constantValueViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_formulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$5));this.get_valueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$7))})))}});var fc=global.tab.DistributionPercentilesComponent=ss.mkType(a,'tab.DistributionPercentilesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-percentiles'},spiff.DOMElements.div({className:'tab-percentilesSection'},spiff.DOMElements.span({className:'tab-percentilesTitle tab-componentLabel'},tab.Strings.AODialogPercentilesLabel),spiff.DOMElements.div({className:'tab-percentilesSectionInner'},React.createElement(fx,this.props.percentilesProps))))}});var fd=global.tab.DistributionPercentilesState=ss.mkType(a,'tab.DistributionPercentilesState',function(){});var fe=global.tab.DistributionPercentilesViewModel=ss.mkType(a,'tab.DistributionPercentilesViewModel',function(nk){fe.$ctor1.call(this,nk,new fz(nk.get_percentileComboModel(),fe.percentileTestId))},{get_distributionPercentilesModel:function(){return this.$3$1},set_distributionPercentilesModel:function(nk){this.$3$1=nk},get_percentilesComboViewModel:function(){return this.$3$2},set_percentilesComboViewModel:function(nk){this.$3$2=nk},get_visualID:function(){return this.get_distributionPercentilesModel().get_visualID()},get_refLineID:function(){return this.get_distributionPercentilesModel().get_refLineID()},$3:function(){this.incrementProps()},createUpdatedProps:function(){return{percentilesProps:this.get_percentilesComboViewModel().get_props()}},$6:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['referenceParam']=nk;nl.c['visualIdPresModel']=this.get_visualID();nl.c['referenceLineId']=this.get_refLineID();nl.invoke()},$5:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['percentilesString']=nk;nl.c['visualIdPresModel']=this.get_visualID();nl.c['referenceLineId']=this.get_refLineID();nl.invoke()},$4:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['percentilesString']=nk;nl.c['visualIdPresModel']=this.get_visualID();nl.c['referenceLineId']=this.get_refLineID();var nm=nl.invoke();var nn=this.get_percentilesComboViewModel();nm.always(ss.mkdel(nn,nn.updateDomFromModel))}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionPercentilesModel(nk);this.set_percentilesComboViewModel(nl);this.get_distributionPercentilesModel().add_modelUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(this.addChildViewModel(nl));this.get_percentilesComboViewModel().add_dataValueUpdated(ss.mkdel(this,this.$5));this.get_percentilesComboViewModel().add_customDataValueUpdated(ss.mkdel(this,this.$4));this.get_percentilesComboViewModel().add_parameterSelected(ss.mkdel(this,this.$6));this.get_percentilesComboViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionPercentilesModel().remove_modelUpdated(ss.mkdel(this,this.$3));this.get_percentilesComboViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$5));this.get_percentilesComboViewModel().remove_parameterSelected(ss.mkdel(this,this.$6));this.get_percentilesComboViewModel().remove_customDataValueUpdated(ss.mkdel(this,this.$4))})))}});var ff=global.tab.DistributionQuantilesComponent=ss.mkType(a,'tab.DistributionQuantilesComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-quantiles'},spiff.DOMElements.div({className:'tab-numTilesSection'},spiff.DOMElements.span({className:'tab-numTilesTitle tab-componentLabel'},tab.Strings.AODialogNumberOfTilesLabel),spiff.DOMElements.div({className:'tab-numTilesSectionInner'},React.createElement(fx,this.props.quantilesProps))))}});var fg=global.tab.DistributionQuantilesState=ss.mkType(a,'tab.DistributionQuantilesState',function(){});var fh=global.tab.DistributionQuantilesViewModel=ss.mkType(a,'tab.DistributionQuantilesViewModel',function(nk){fh.$ctor1.call(this,nk,new fz(nk.get_distributionQuantilesCombo(),fh.quantilesTestId))},{get_distributionQuantilesModel:function(){return this.$3$1},set_distributionQuantilesModel:function(nk){this.$3$1=nk},get_quantilesComboViewModel:function(){return this.$3$2},set_quantilesComboViewModel:function(nk){this.$3$2=nk},get_visualID:function(){return this.get_distributionQuantilesModel().get_visualID()},get_refLineID:function(){return this.get_distributionQuantilesModel().get_refLineID()},$3:function(){this.incrementProps()},createUpdatedProps:function(){return{quantilesProps:this.get_quantilesComboViewModel().get_props()}},$5:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['referenceParam']=nk;nl.c['visualIdPresModel']=this.get_visualID();nl.c['referenceLineId']=this.get_refLineID();nl.invoke()},$4:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['quantilesValue']=nk;nl.c['visualIdPresModel']=this.get_visualID();nl.c['referenceLineId']=this.get_refLineID();nl.invoke()}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionQuantilesModel(nk);this.set_quantilesComboViewModel(nl);this.get_distributionQuantilesModel().add_modelUpdated(ss.mkdel(this,this.$3));this.get_quantilesComboViewModel().add_dataValueUpdated(ss.mkdel(this,this.$4));this.get_quantilesComboViewModel().add_parameterSelected(ss.mkdel(this,this.$5));this.get_quantilesComboViewModel().set_hasTooltip(false);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionQuantilesModel().remove_modelUpdated(ss.mkdel(this,this.$3));this.get_quantilesComboViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$4));this.get_quantilesComboViewModel().remove_parameterSelected(ss.mkdel(this,this.$5))})))}});var fi=global.tab.DistributionStandardDeviationComponent=ss.mkType(a,'tab.DistributionStandardDeviationComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-standardDeviation'},spiff.DOMElements.div({className:'tab-factorsSection'},spiff.DOMElements.span({className:'tab-factorsTitle tab-componentLabel'},tab.Strings.AODialogFactorsLabel),spiff.DOMElements.div({className:'tab-factorsSectionInner'},React.createElement(eM,this.props.factorsProps))),spiff.DOMElements.div({className:'tab-stdDevTypeSection'},spiff.DOMElements.div({className:'tab-stdDevSectionInner'},React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,this.props.stdDevTypeProps))))}});var fj=global.tab.DistributionStandardDeviationState=ss.mkType(a,'tab.DistributionStandardDeviationState',function(){});var fk=global.tab.DistributionStandardDeviationViewModel=ss.mkType(a,'tab.DistributionStandardDeviationViewModel',function(nk){fk.$ctor1.call(this,nk,new eN(fk.factorsTestId))},{get_factorsViewModel:function(){return this.$3$1},set_factorsViewModel:function(nk){this.$3$1=nk},get_distributionStandardDeviationModel:function(){return this.$3$2},set_distributionStandardDeviationModel:function(nk){this.$3$2=nk},get_visualId:function(){return this.get_distributionStandardDeviationModel().get_visualID()},get_referenceLineId:function(){return this.get_distributionStandardDeviationModel().get_refLineID()},$3:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['factorsStr']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke().always(ss.mkdel(this,this.$5))},onStdDevTypeUpdated:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['stdevType']=nk;nl.c['visualIdPresModel']=this.get_distributionStandardDeviationModel().get_visualID();nl.c['referenceLineId']=this.get_distributionStandardDeviationModel().get_refLineID();nl.invoke()},$5:function(){this.get_factorsViewModel().updateFromModel(this.get_distributionStandardDeviationModel().get_factors());this.incrementProps()},createUpdatedProps:function(){return{factorsProps:this.get_factorsViewModel().get_props(),stdDevTypeProps:this.$4()}},$4:function(){var nk=[];var nl=0;for(var nm=0;nm<this.get_distributionStandardDeviationModel().get_validStDevTypes().length;nm++){var nn=this.get_distributionStandardDeviationModel().get_validStDevTypes()[nm];nk.push({value:nn.key,label:nn.value,testId:nn.key.toString()});if(nn.key===this.get_distributionStandardDeviationModel().get_stDevType()){nl=nm}}return{buttonList:nk,checkedIndex:nl,handleChange:ss.mkdel(this,function(no,np){this.onStdDevTypeUpdated(no)})}}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionStandardDeviationModel(nk);this.set_factorsViewModel(nl);this.disposables.add$1(this.addChildViewModel(this.get_factorsViewModel()));this.get_distributionStandardDeviationModel().add_modelUpdated(ss.mkdel(this,this.$5));this.get_factorsViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionStandardDeviationModel().remove_modelUpdated(ss.mkdel(this,this.$5));this.get_factorsViewModel().remove_onValueChanged(ss.mkdel(this,this.$3))})))}});var fl=global.tab.DownloadDraftErrorDialog=ss.mkType(a,'tab.DownloadDraftErrorDialog',function(){this.$1=null;this.$0=null;tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fl.$0)){return}this.$1=new kI;this.$0=new kH;this.parentNode=document.createElement('div');var nk=tab.Strings.DownloadWorkbookErrorContent;var nl={title:tab.Strings.DownloadDraftErrorTitle,secondaryChoiceAction:ss.mkdel(this,this.close),secondaryChoiceButtonString:tab.Strings.DialogButtonCancel,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.DialogButtonPublishChanges,primaryChoiceAction:ss.mkdel(this,function(){if(this.$1.get_isEnabled()){this.$1.invoke().done(ss.mkdel(this,this.close))}else{this.$0.invoke().done(ss.mkdel(this,this.close))}}),secondMessage:nk,dialogWidth:400};fl.$0=React.createElement(ce,nl);ReactDOM.render(fl.$0,this.parentNode)},close:function(){fl.$0=null;_.defer(ss.mkdel(this,this.dispose))}},{showDownloadDraftErrorDialog:function(){(new fl).showDialog()}});var fm=global.tab.DownloadWorkbookCommand=ss.mkType(a,'tab.DownloadWorkbookCommand',function(){tab.DownloadWorkbookCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='data-tab'},get_isEnabled:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isEnabled.call(this)&&tsConfig.allow_save_as},do$1:function(){var nk=tsConfig.downloadURIReadonly;if(!bX.tryShowDownloadOrEditInDesktopErrorDialog(true)){tab.ToolbarServerCommands.downloadWorkbook(nk,null)}}});var fn=global.tab.DraftNotCurrentDialog=ss.mkType(a,'tab.DraftNotCurrentDialog',function(){tab.BaseDisposableDialog.call(this)},{showDialog:function(){if(ss.isValue(fn.$0)){return}this.parentNode=document.createElement('div');var nk=ss.isValue(tsConfig.revisionInfo.newerRevisionAuthor)&&tsConfig.revisionInfo.newerRevisionAuthor!=='';var nl=tsConfig.revisionInfo.newerRevisionPublishedAt;var nm={format:tab.ApplicationModel.get_instance().get_localeDateFormat(),locale:tsConfig.locale,timeFormat:tab.ApplicationModel.get_instance().get_localeTimeFormat(),locale_formatting_strings:tableau.format.defaultLocaleStrings};var nn=tab.DateUtil.formatISO8601DateTimeToLocalDateTime(nl,nm,2);var no={title:tab.Strings.AuthDraftNotCurrentDialogTitle,firstMessage:(nk?tab.Strings.AuthDraftNotCurrentDialogMessage(nn,tsConfig.revisionInfo.newerRevisionAuthor):tab.Strings.AuthDraftNotCurrentDialogMessage_NoUsername(nn)),secondaryChoiceAction:ss.mkdel(this,this.loadNewestRevision),secondaryChoiceButtonString:tab.Strings.AuthDraftNotCurrentDialogEditNewestRevision,primaryChoiceButtonIsAvailable:true,doPrimaryActionOnCloseRequest:true,primaryChoiceButtonString:tab.Strings.AuthDraftNotCurrentDialogResumeEditingDraft,primaryChoiceAction:ss.mkdel(this,this.close),dialogWidth:700};fn.$0=React.createElement(ce,no);ReactDOM.render(fn.$0,this.parentNode)},$0:function(){var nk=tsConfig.revisionInfo.newerRevisionPublishedAt;var nl={format:'M/d/yyyy',locale:'en_US',timeFormat:'h:mm tt',locale_formatting_strings:tableau.format.defaultLocaleStrings};return tab.DateUtil.formatISO8601DateTimeToLocalDateTime(nk,nl,2)},close:function(){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftNotCurrent',ss.mkdict(['Event','Resume Editing My Draft','TimeNewerVersionPublished',this.$0()]))}fn.$0=null;_.defer(ss.mkdel(this,this.dispose))},loadNewestRevision:function(){if(tab.OnlineAnalyticsClient.get_telemetryEnabled()){tab.OnlineAnalyticsClient.logEvent('AutoSave_DraftNotCurrent',ss.mkdict(['Event','Edit Newest Revision','TimeNewerVersionPublished',this.$0()]))}tab.SessionServerCommands.destroySessionAndForward(function(){},false);var nk=tab.VizUriModel.createForCurrentWindowLocation(null);nk.set_loadNewestRevision(true);tab.SessionServerCommands.switchToViz$1(nk,null,null);nk.set_loadNewestRevision(false);nk.replaceState(null);this.close()}},{showDraftNotCurrentDialog:function(){(new fn).showDialog()}});var fo=global.tab.DraggedSheetItem=ss.mkType(a,'tab.DraggedSheetItem',function(nk,nl){this.sheetName=null;this.addAsFloating=false;this.sheetName=nk;this.addAsFloating=nl});var fp=global.tab.DraggedZoneObject=ss.mkType(a,'tab.DraggedZoneObject',function(nk,nl,nm,nn,no,np){this.zoneType=null;this.isHorizontal=false;this.addAsFloating=false;this.objectHandle=null;this.objectState=null;this.objectType=null;this.zoneType=nk;this.isHorizontal=nl;this.addAsFloating=nm;this.objectType=nn;this.objectHandle=no;this.objectState=np});var fq=global.tab.DragToShowMeDropTarget=ss.mkType(a,'tab.DragToShowMeDropTarget',function(){this.$9=null;this.dropAreaParent=null;this.$7=null;this.$6=null;this.pillDragAvatar=null;this.$5=null;this.$8=false;this.$9=$('<div></div>').addClass('tabAuth-ShowMe_BarsIcon')},{get_feedbackType:function(){return'dropfeedbackuponentry'},update:function(nk){var nl=fD.get_isEmptyWorksheet();this.dropAreaParent=((nl||tsConfig.is_mobile)?ca.findVizZone():ca.findVizView());this.$5=ss.safeCast(nk,cf);if(ss.isNullOrUndefined(this.$5)||!ss.isInstanceOfType(this.$5.get_dragAvatar(),jb)||nk.get_dragType()!=='dragdrop'||tsConfig.current_sheet_type!=='worksheet'||this.dropAreaParent.length!==1||nl&&this.areAllParameters(this.$5.get_fields())){this.$1();return}this.createDropAreaTarget();EventUtils.DragDropManager.attachDropTarget(this.$7,this);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));if(nl){this.moveTargetBelowTitle()}},dragEnded:function(nk){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));if(ss.isValue(this.$7)&&EventUtils.DragDropManager.isDropTarget(this.$7)){this.$1();this.removeUI();this.$4()}},moveTargetBelowTitle:function(){var nk=ca.findVisibleTitle(false);if(ss.isNullOrUndefined(nk)){return false}var nl=nk.height();this.$7.css('margin-top',nl+'px');this.$7.css('height',this.$7.height()-nl+'px');return true},createDropAreaTarget:function(){this.$4();this.$7=$('<div></div>').addClass('showMeVizDropArea');this.dropAreaParent.append(this.$7)},$4:function(){if(ss.isValue(this.$7)){this.$7.remove()}},areAllParameters:function(nk){return ss.isValue(nk)&&nk.length>0&&nk.filter(function(nl){return!nl.get_isParameter()}).length===0},$0:function(){this.pillDragAvatar=this.$5.get_dragAvatar();this.pillDragAvatar.setCustomLabel(tab.Strings.AuthToolbarShowMe)},removeUI:function(){this.$8=false;if(ss.isValue(this.$6)){this.$6.removeClass('tabAuthPillShowMe')}if(ss.isValue(this.pillDragAvatar)){this.pillDragAvatar.removeCustomLabel();this.$9.remove()}if(ss.isValue(this.$7)){this.$7.removeClass('showMeDropAreaBorder')}},$1:function(){if(ss.isValue(this.$7)){EventUtils.DragDropManager.detachDropTarget(this.$7)}},populateInfoWrapperThenExecute:function(nk){if(ss.isNullOrUndefined(this.$5)){return}var nl=this.$5.hasOnlyFields();var nm=new tab.DragToShowMeInfoWrapper(nl,this.$5.isCopyDrag,this.$5.isShiftDrag);for(var nn=0;nn<nk.length;nn++){var no=nk[nn];nm.add(new tab.DragToShowMeInfo(no,'invalid-encoding'))}this.$2(nm)},$2:function(nk){var nl=tab.ModelUtils.findActiveOrDefaultVisual(null);var nm=nl.get_marksCardModel();tab.ShelfClientCommands.executeDragToShowMe(nl.get_visualId(),nk,(ss.isValue(nm)?nm.get_activePaneSpecId():null))},dragOver:function(nk){if(this.$8){return this}this.$8=true;this.$0();this.$6=nk.get_dragAvatar().get_rootElement();this.$6.addClass('tabAuthPillShowMe');this.$6.prepend(this.$9);this.$7.addClass('showMeDropAreaBorder');return this},$3:function(nk){var nl=ss.safeCast(nk,jc);return ss.isValue(nl)&&!nl.get_canDropOnShowMe()},acceptDrop:function(nk){var nl=$.Deferred();if(this.$3(nk)){return nl.resolve(false)}this.$5.get_drop().always(ss.mkdel(this,function(){var nm=this.$5.fieldsToDropOnShelf('encoding-shelf');if(this.$5.shouldGetAggregationOfField(nm)){this.$5.selectAggregationForField('show-me-shelf',nm[0],ss.mkdel(this,function(nn){var no=[];no.push(nn.selectedField);this.populateInfoWrapperThenExecute(no)}))}else{this.populateInfoWrapperThenExecute(nm)}nl.resolve()}));return nl},getDropCursor:function(nk){if(this.$3(nk)){return spiff.CustomCursor.delete$1}return spiff.CustomCursor.copy},getDropTarget:function(nk){return this},dragExit:function(nk){this.removeUI()}});var fr=global.tab.DrillPathRedirectHandler=ss.mkType(a,'tab.DrillPathRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['datasource'];var nn=nk['newDrillPath'];var no=nk['fieldVector'];var np=nk['dialogTitle'];var nq=kt.new$1(nn,nn,function(nr,ns){_.defer(function(){tab.SchemaClientCommands.validateDrillPathName(nm,null,nr,ns)})},function(nr){tab.SchemaClientCommands.addDrillPath(nm,nr,no);nl.resolve()});nq.set_titleUnescaped(np);nq.show();return nl},$1:function(nk){var nl=$.Deferred();var nm=nk['datasource'];var nn=nk['drillPathName'];var no=nk['newDrillPath'];var np=nk['dialogTitle'];var nq=kt.new$1(nn,no,function(nr,ns){_.defer(function(){tab.SchemaClientCommands.validateDrillPathName(nm,nn,nr,ns)})},function(nr){if(!ss.referenceEquals(nr,nn)){tab.SchemaClientCommands.renameDrillPath(nm,nn,nr)}nl.resolve()});nq.set_titleUnescaped(np);nq.show();return nl}});var fs=global.tab.DropIndicationState=ss.mkEnum(a,'tab.DropIndicationState',{rest:0,dropInvited:1,dropNotValid:2});var ft=global.tab.DropTargetWithDropState=ss.mkType(a,'tab.DropTargetWithDropState',function(){this.$2=0;this.$1$1=null;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$1));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$0))},{add_dropStateChanged:function(nk){this.$1$1=ss.delegateCombine(this.$1$1,nk)},remove_dropStateChanged:function(nk){this.$1$1=ss.delegateRemove(this.$1$1,nk)},get_feedbackType:function(){return'dropfeedbackuponentry'},get_dropState:function(){return this.$2},set_dropState:function(nk){if(this.$2===nk){return}this.$2=nk;if(ss.isValue(this.$1$1)){this.$1$1(this.$2)}},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$1));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$0))},$1:function(nk){var nl=ss.safeCast(nk,cf);if(ss.isValue(nl)){nl.get_drop().always(ss.mkdel(this,function(nm){if(!EventUtils.DragDropManager.get_isDragging()){return}this.set_dropState((this.canAccept(nm)?1:2))}))}this.set_dropState((this.canAccept(nk)?1:2))},$0:function(nk){this.set_dropState(0)},canAccept:null,dragOver:null,dragExit:null,acceptDrop:null,getDropTarget:null,getDropCursor:null});var fu=global.tab.DuplicateSheetKeyboardShortcut=ss.mkType(a,'tab.DuplicateSheetKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var nk=new Object;nk.alt='required';return new KeyboardShortcuts.KeyCombo('Enter',nk)},getCommandId:function(){return{ns:'tabdoc',cmd:'duplicate-sheet'}}});var fv=global.tab.EdgeWithTargetHandleRenderHelpers=ss.mkType(a,'tab.EdgeWithTargetHandleRenderHelpers',null,null,{$5:function(nk,nl){var nm=fv.$3();return nk>nl&&nk>nm+nl},$8:function(nk,nl){var nm=fv.$3();return nk+nl>nm&&nk>=-ss.idiv(2,2)},$3:function(){var nk=tab.WorkbookView.findDashboardContainer();return tab.DoubleUtil.roundToInt(nk.scrollTop())},$2:function(){var nk=tab.WorkbookView.findDashboardContainer();return nk.scrollLeft()},shouldShowTarget:function(nk,nl,nm,nn){var no=fv.$8(nk,nl);var np=no&&nm===2||!no&&nm===3;np=np&&nn;return np},isTargetInverted:function(nk,nl,nm){return!fv.$5(nk,nl)||nm===3},createLine:function(nk,nl,nm,nn){var no={x1:nk,y1:nl,x2:nm,y2:nn,stroke:tab.ColorModel.white.toRgb(),strokeWidth:1,strokeLinecap:'round'};return spiff.DOMElements.line(no)},$6:function(nk,nl,nm){var nn=nk+ss.idiv(nl,2);var no=nn-ss.idiv(nm,2);var np=fv.$2();return np>no},$7:function(nk,nl,nm,nn,no){var np=nk+ss.idiv(nl,2);var nq=np+ss.idiv(no,2);var nr=fv.$2();var ns=fv.$4(nm,nn,nr);return ns<nq},$0:function(nk,nl,nm){var nn=nk-mO.dashContentOffsetLeft;var no=fv.$2();return Math.min(no-nn,nl-nm)},$1:function(nk,nl,nm,nn,no){var np=nk+nl-mO.dashContentOffsetLeft;var nq=fv.$2();var nr=fv.$4(nm,nn,nq);return Math.min(np-nr,nl-no)},generateZoneChromeStyleProperties:function(nk,nl,nm,nn,no,np){var nq={left:0,right:0,display:(np?null:'none')};if(fv.$6(nk,nl,no)){nq.left=fv.$0(nk,nl,no);nq.right=null}else if(fv.$7(nk,nl,nm,nn,no)){nq.right=fv.$1(nk,nl,nm,nn,no);nq.left=null}return nq},$4:function(nk,nl,nm){var nn=Math.min(nk,nl+nm);return nn}});var fw=global.tab.EditCommandRedirectHandler=ss.mkType(a,'tab.EditCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred().resolve();return nl.promise()},$1:function(nk){var nl=$.Deferred();var nm=nk['zoneId'.toString()];var nn=nk['urlString'.toString()];fw.$3=mI.createWebZoneUrlDialog(nn,function(no){nl.resolve();tab.DashboardZoneCommands.editWebZoneUrl(nm,no);fw.$3=tab.MiscUtil.dispose$1(fw.$3)},function(){nl.resolve();fw.$3=tab.MiscUtil.dispose$1(fw.$3)});fw.$3.show();return nl.promise()}});var fx=global.tab.EditValueWidgetComponent=ss.mkType(a,'tab.EditValueWidgetComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){return(this.props.textBoxActive?spiff.DOMElements.div({className:'customValueTextDropdown '},React.createElement(eM,this.props.inputProps),React.createElement(spiff.ComboBoxComponent,this.props.comboBoxProps)):React.createElement(spiff.ComboBoxComponent,this.props.comboBoxProps))}});var fy=global.tab.EditValueWidgetProps=ss.mkType(a,'tab.EditValueWidgetProps',function(){this.inputProps=null;this.comboBoxProps=null;this.textBoxActive=false});var fz=global.tab.EditValueWidgetViewModel=ss.mkType(a,'tab.EditValueWidgetViewModel',function(nk,nl){fz.$ctor1.call(this,nk,spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel(),new eN(nl))},{add_dataValueUpdated:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_dataValueUpdated:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},add_customDataValueUpdated:function(nk){this.$3$2=ss.delegateCombine(this.$3$2,nk)},remove_customDataValueUpdated:function(nk){this.$3$2=ss.delegateRemove(this.$3$2,nk)},add_parameterSelected:function(nk){this.$3$3=ss.delegateCombine(this.$3$3,nk)},remove_parameterSelected:function(nk){this.$3$3=ss.delegateRemove(this.$3$3,nk)},get_hasTooltip:function(){return this.$f},set_hasTooltip:function(nk){this.$b.set_hasTooltip(nk);this.$f=nk},get_model:function(){return this.$3$4},set_model:function(nk){this.$3$4=nk},get_selectedParameter:function(){return this.get_model().get_selectedParameter()},get_textBoxActive:function(){return this.$3$5},set_textBoxActive:function(nk){this.$3$5=nk},get_enabled:function(){return this.$d},set_enabled:function(nk){this.$b.set_enabled(nk);this.$c.set_enabled(nk);this.$d=nk},onDataValueUpdated:function(nk){this.raiseActionEvent$1(String).call(this,this.$3$1,nk)},onCustomDataValueUpdated:function(nk){this.raiseActionEvent$1(String).call(this,this.$3$2,nk)},onComboSelectedItemChanged:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(!nl.$0){this.$4(nl)}else{this.$3(nl)}this.incrementProps()},$4:function(nk){if(ss.referenceEquals(nk.$1,this.get_model().get_enterValueText())){this.set_textBoxActive(true);this.$c.set_shouldSelectTextOnRender(true);this.incrementProps();this.onCustomDataValueUpdated(this.get_model().get_selectedValue())}else{this.set_textBoxActive(false);this.onDataValueUpdated(nk.$1)}},$3:function(nk){this.set_textBoxActive(false);if(!ss.staticEquals(this.$3$3,null)){this.$3$3(nk.$1)}},updateDomFromModel:function(){if(this.$e||this.get_model().get_precannedValues().length===0){this.set_textBoxActive(this.$7());this.$e=false}this.$9();this.$a();this.incrementProps()},$9:function(){var nk=this.buildPrecannedItems();var nl=nk.concat.apply(nk,this.$8());var nm=this.$5(nl)||new spiff.ComboBoxItem(null,this.get_model().get_selectedValue(),null,null,null);this.$b.setItemsWithInitialSelection(nl,nm)},$a:function(){this.$c.updateFromModel(this.get_model().get_selectedValue())},buildPrecannedItems:function(){var nk=[];if(this.get_model().get_isCustomValueEnabled()){nk.push(this.$6())}return nk.concat.apply(nk,_.map(this.get_model().get_precannedValues(),ss.mkdel(this,function(nl){var nm=new l;nm.$0=false;nm.$1=nl;var nn=nm;return new spiff.ComboBoxItem(null,nl,nn,null,null)})))},$6:function(){var nk=new l;nk.$0=false;nk.$1=this.get_model().get_enterValueText();var nl=nk;return new spiff.ComboBoxItem(null,this.get_model().get_enterValueText(),nl,null,null)},$8:function(){return _.map(this.get_model().get_parameters(),ss.mkdel(this,function(nk){var nl=new l;nl.$0=true;nl.$1=nk.value;var nm=nl;return new spiff.ComboBoxItem(null,nk.key,nm,null,null)}))},$5:function(nk){if(ss.isValue(this.get_model().get_selectedParameter())){return _.find(nk,ss.mkdel(this,function(nl){var nm=nl.get_data();return nm.$0&&ss.referenceEquals(ss.unbox(this.get_model().get_selectedParameter()).value,nm.$1)}))}else{return _.find(nk,ss.mkdel(this,function(nl){var nm=nl.get_data();return!nm.$0&&ss.referenceEquals(nm.$1,this.get_model().get_selectedValue())}))}},$7:function(){if(ss.isValue(this.get_model().get_selectedParameter())){return false}var nk=this.get_model().get_precannedValues();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(ss.referenceEquals(nm,this.get_model().get_selectedValue())){return false}}return true},createUpdatedProps:function(){var nk=new fy;nk.comboBoxProps=this.$b.get_props();nk.textBoxActive=this.get_textBoxActive();nk.inputProps=this.$c.get_props();return nk}},{$ctor1:function(nk,nl,nm){this.$b=null;this.$c=null;this.$d=false;this.$e=false;this.$f=true;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[fy]).call(this);this.set_model(nk);this.get_model().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.$e=true;this.$b=nl;this.disposables.add$1(this.$b);this.disposables.add$1(this.addChildViewModel(this.$b));this.$c=nm;this.disposables.add$1(this.$c);this.disposables.add$1(this.addChildViewModel(this.$c));this.$b.add_selectedItemChanged(ss.mkdel(this,this.onComboSelectedItemChanged));this.$c.add_onValueChanged(ss.mkdel(this,this.onCustomDataValueUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$b.remove_selectedItemChanged(ss.mkdel(this,this.onComboSelectedItemChanged));this.$c.remove_onValueChanged(ss.mkdel(this,this.onCustomDataValueUpdated));this.get_model().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel))})))}});var fA=global.tab.EditWorkbookInDesktopCommand=ss.mkType(a,'tab.EditWorkbookInDesktopCommand',function(){tab.EditWorkbookInDesktopCmd.call(this)},{get_isVisible:function(){return tsConfig.allow_connected_experience&&!tsConfig.is_desktop},get_isEnabled:function(){return!tab.CurrentLocation.get_isLocationPersonalSpace()},do$1:function(){if(!bX.tryShowDownloadOrEditInDesktopErrorDialog(false)){fA.$0()}}},{$3:function(){return{serverHost:tabBootstrap.BaseUrlFormatter.formatBaseUrl(),siteLuid:tsConfig.site_luid,workbookLuid:tsConfig.current_workbook_luid,viewLuid:tsConfig.current_view_luid,size:tsConfig.current_workbook_twbx_size}},$0:function(){var nk={primaryActionButtonLabel:tab.Strings.OpenOnDesktopDialogPrimaryActionLabel,isTableauOnline:tsConfig.is_saas,handlePrimaryAction:function(){tab.WindowHelper.setLocationHref(tab.WindowHelper.get_windowParent(),tsConfig.external_workbook_url)},handlePublishDatasources:function(){var nl={};tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nl),'immediately',null,null)},logTelemetry:tab.OnlineAnalyticsClient.logEvent,source:(tsConfig.is_authoring?2:3),workbookInfo:fA.$3()};if(tsConfig.is_authoring){nk.onExitButtonClicked=function(){tab.WindowHelper.reload(tabBootstrap.Utility.get_locationWindow(),false)}}fA.$1(nk)},$1:function(nk){var nl=React.createElement(tab.OpenWorkbookInDesktopDialog,nk);ReactDOM.render(nl,document.createElement('div'))}});var fB=global.tab.EffectColorPickerViewModel=ss.mkType(a,'tab.EffectColorPickerViewModel',function(nk,nl){this.$4=null;dp.call(this,nk,false);this.$4=nl},{sendColorUpdate:function(){if(ss.isValue(this.get_selectedColor())){this.$4.update(false,false,this.get_selectedColor())}}});var fC=global.tab.EmptyAuthoringWorksheetView=ss.mkType(a,'tab.EmptyAuthoringWorksheetView',function(nk){this.$9=0;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[fD]).call(this,nk,new fH);this.get_viewModel().add_updateVisibility(ss.mkdel(this,this.onUpdateVisibility));tab.WorkbookViewModel.add_workbookResized(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){tab.WorkbookViewModel.remove_workbookResized(ss.mkdel(this,this.$7))}))},{get_scale:function(){return this.$9},set_scale:function(nk){this.$9=nk;this.get_template().domRoot.find('.'+'emptyWorksheetText').css(BrowserSupport.BrowserSupport.CssTransformName(),'scale('+this.$9+')');this.get_template().domRoot.find('.'+'emptyWorksheetText').css(BrowserSupport.BrowserSupport.CssTransitionName(),this.get_transition())},get_transition:function(){return this.$3$1},set_transition:function(nk){this.$3$1=nk},onUpdateVisibility:function(){fC.$0();if(fD.get_isEmptyWorksheet()){var nk='.'+'tabZone-viz'+' .'+'tab-zone-padding';var nl=$(nk);if(nl.length>0){this.addToDom(nl);this.$8()}}},$7:function(){_.defer(ss.mkdel(this,this.$8))},$8:function(){var nk=ca.findVisibleTitle(false);if(ss.isValue(nk)){var nl=nk.height()+'px';var nm=this.get_template().domRoot;nm.css('margin-top',nl);nm.height('calc(100% - '+nl+')')}}},{$0:function(){var nk=document.body.getElementsByClassName('emptyWorksheet');for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.parentElement.removeChild(nm)}}});var fD=global.tab.EmptyAuthoringWorksheetViewModel=ss.mkType(a,'tab.EmptyAuthoringWorksheetViewModel',function(){this.$2$1=null;spiff.BaseViewModel.call(this)},{add_updateVisibility:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_updateVisibility:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},updateIfEmptySheet:function(){this.raiseActionEvent(this.$2$1)}},{get_isEmptyWorksheet:function(){if(tsConfig.current_sheet_type!=='worksheet'){return false}var nk=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nk)){return false}var nl=nk.get_shelves();if(ss.isNullOrUndefined(nl)){return false}var nm=nl.get_shelves();if(ss.isNullOrUndefined(nm)){return false}return _.every(nm,function(nn){return nn.get_pills().length===0||nn.get_shelfType()==='filter-shelf'||nn.get_shelfType()==='measures-shelf'})},isDragHintEnabled:function(){return tsConfig.current_sheet_type==='worksheet'}});var fE=global.tab.EmptyDashboardTemplate=ss.mkType(a,'tab.EmptyDashboardTemplate',function(){spiff.Template.call(this,$("<div class='tabEmptyDashboardContainer'><div class='tabEmptyDashboardMessage'></div><div class='tabEmptyDashboardSubMessage'></div></div>"));if(!tsConfig.is_mobile){this.domRoot.find('.'+'tabEmptyDashboardMessage').text(tab.Strings.EmptyDashboardMessage);this.domRoot.find('.'+'tabEmptyDashboardSubMessage').text(tab.Strings.EmptyDashboardSubMessage)}});var fF=global.tab.EmptyDashboardView=ss.mkType(a,'tab.EmptyDashboardView',function(nk){ss.makeGenericType(spiff.BaseView$1,[fG]).call(this,nk,new fE);this.get_viewModel().add_zoneQuantityChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_zoneQuantityChanged(ss.mkdel(this,this.$7))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7()},$7:function(){this.get_template().domRoot.toggle(this.get_viewModel().get_dashboardEmpty())}});var fG=global.tab.EmptyDashboardViewModel=ss.mkType(a,'tab.EmptyDashboardViewModel',function(nk){this.$0=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$0=nk;this.disposables.add$1(this.$0.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleZoneQuantityChanged)).addEventBinding(ss.mkdel(this,function(nl){nl.zonesModel.add_newZone(ss.mkdel(this,this.handleZoneQuantityChanged$1));nl.zonesModel.add_removedZone(ss.mkdel(this,this.handleZoneQuantityChanged$1))}),ss.mkdel(this,function(nl){nl.zonesModel.remove_newZone(ss.mkdel(this,this.handleZoneQuantityChanged$1));nl.zonesModel.remove_removedZone(ss.mkdel(this,this.handleZoneQuantityChanged$1))})))},{add_zoneQuantityChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_zoneQuantityChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_dashboardEmpty:function(){return this.$0.get_model().get_zoneModels().length<=0},handleZoneQuantityChanged$1:function(nk){this.handleZoneQuantityChanged()},handleZoneQuantityChanged:function(){this.raiseActionEvent(this.$2$1)}});var fH=global.tab.EmptyWorksheetTemplate=ss.mkType(a,'tab.EmptyWorksheetTemplate',function(){spiff.Template.call(this,$("<div class='emptyWorksheet'><div class='emptyWorksheetText'></div></div>"));this.domRoot.find('.'+'emptyWorksheetText').text(tab.Strings.DropFieldHintText)});var fI=global.tab.EncodingTypeButtonTemplate=ss.mkType(a,'tab.EncodingTypeButtonTemplate',function(){this.name=null;this.nameWrapper=null;this.icon=null;this.button=null;spiff.Template.call(this,$("<span class='tabAuthEncodingButtonArea'><span class='tabAuthEncodingButton'><div class='tabAuthEncodingButtonIcon'></div><span class='tabAuthEncodingButtonNameWrapper'><div class='tabAuthEncodingButtonName'></div></span></span></span>"));this.button=this.getElementBySelector('.tabAuthEncodingButton');this.name=this.getElementBySelector('.tabAuthEncodingButtonName');this.icon=this.getElementBySelector('.tabAuthEncodingButtonIcon');this.nameWrapper=this.getElementBySelector('.tabAuthEncodingButtonNameWrapper')});var fJ=global.tab.ExistingZoneDragObject=ss.mkType(a,'tab.ExistingZoneDragObject',function(nk,nl,nm,nn){this.dragged=null;dS.call(this,nk,nl,mT.forNewZone(nn));this.dragged=nk;this.set_dragDropPresModel(nm)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(nk,nl,nm,nn,no){if(this.dragged.get_zoneType()==='viz'){tab.DashboardClientCommands.dropVizZoneOnDashboard(tsConfig.current_sheet_name,this.dragged.get_zoneName(),nk,this.get_isFloating(),this.dragged.get_zoneId()).always(nl)}else{tab.DashboardClientCommands.dropNonVizZoneOnDashboard(tsConfig.current_sheet_name,this.dragged.get_zoneType(),this.dragged.get_direction()==='horizontal',this.get_isFloating(),nk,this.dragged.get_formattedText(),this.dragged.get_zoneParam(),this.dragged.get_zoneName(),this.dragged.get_zoneId(),this.dragged.get_dashboardObjectType()).always(nl)}}},{create:function(nk,nl,nm,nn){var no=new fJ(nk,nl,nm,nn);no.initialize();return no}});var fK=global.tab.FieldDragSource=ss.mkType(a,'tab.FieldDragSource',function(nk,nl,nm){this.$2=null;this.$1=null;this.$0=null;this.$1=nk;this.$2=nl;this.$0=nm},{startDrag:function(nk){var nl=this.$1();var nm=fK.concreteFieldsToDragFrom(nl);if(nm.length===0){return null}var nn=nm[0];var no=(nn.get_isColumn()?nn.asColumn().get_defaultFieldType():'unknown');var np=new kR(nm,nl,nn.get_description(),no);np.isShiftDrag=nk.shiftKey;np.isRightDrag=nk.get_IsRightMouseEvent();np.isCopyDrag=nk.get_IsCtrlKey();var nq=np;this.updateText(ss.safeCast(nq.get_dragAvatar(),jb));var nr=tab.ShelfClientCommands.startDrag(nm,'invalid-encoding',tab.ModelUtils.findActivePaneSpecId(),nq.isRightDrag,'drag-drop-schema');nr.done(function(ns){if(ss.isValue(ns.shelfDropModels)){nq.resolve(ns)}});if(ss.isValue(this.$2)){this.$2()}return nq},acceptsDragType:function(){return 0},updateText:function(nk){var nl=this.$0();if(ss.isValue(nl)){nk.setCustomLabel(nl)}}},{concreteFieldsToDragFrom:function(nk){return nk.filter(function(nl){return nl.get_isDraggable()&&ss.isValue(nl.get_childToSelect())}).map(function(nl){return nl.get_childToSelect()})}});var fL=global.tab.FieldDropTarget=ss.mkType(a,'tab.FieldDropTarget',function(nk,nl,nm,nn){this.$9=null;this.$7=null;this.$6=null;this.$8=null;ft.call(this);this.$9=nk;this.$7=nl;this.$6=nm;this.$8=nn},{getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy},dragOver:function(nk){if(!this.canAccept(nk)){return null}this.$7(this.$9,nk);return this},dragExit:function(nk){this.$6(this.$9,nk)},canAccept:function(nk){if(!nk.get_readyToDrop()){return false}var nl=ss.safeCast(nk,kR);if(ss.isNullOrUndefined(nl)||this.$5(nl)){return false}if(nl.get_fieldsInfo().drillPaths!==0){return false}if(tab.FeatureFlags.isEnabled('SchemaViewerEasyLODCalculation')&&nl.isCopyDrag){return this.$3(nl)}if(this.$9.get_isColumn()){return this.$4(nl)}else if(this.$9.get_isDrillPath()){if(nl.get_fieldsInfo().canAddToDrillPath!==2){return false}}return true},$3:function(nk){if(!nk.isCopyDrag||nk.isRightDrag){return false}if(nk.get_fields().length!==1){return false}var nl=nk.get_fields()[0];if(!this.$9.get_isColumn()||!nl.get_isColumn()){return false}var nm=nl.asColumn().get_baseColumn();if(nm.get_defaultRole()!=='measure'){return false}var nn=this.$9.asColumn().get_baseColumn();if(nn.get_defaultRole()!=='dimension'){return false}return nm.get_canBeInEasyLODCalc()&&nn.get_canBeInEasyLODCalc()},$4:function(nk){if(!this.$9.get_isColumn()){return false}var nl=this.$9.asColumn().get_baseColumn();if(!nl.get_canAddToDrillPath()||nk.get_fieldsInfo().canAddToDrillPath!==2){return false}if(nk.get_fieldsInfo().columnsInDrillPath!==0&&!nl.get_isInDrillPath()){return false}if(nl.get_isInDrillPath()){return true}if(!ss.isNullOrEmptyString(nl.get_parentFolderName())&&!ss.referenceEquals(nl.get_parentFolderName(),nk.get_allFieldsFolderName())){return false}return true},acceptDrop:function(nk){var nl=$.Deferred();this.$6(this.$9,nk);if(!this.canAccept(nk)){return nl.resolve(false)}return nl.resolve(this.$8(this.$9,nk))},$5:function(nk){return ss.isValue(nk)&&nk.get_originalFields().some(ss.mkdel(this,function(nl){return nl.get_isColumn()&&ss.referenceEquals(nl.asColumn().get_baseColumnName(),this.$9.get_globalName())}))}});var fM=global.tab.FieldDropType=ss.mkEnum(a,'tab.FieldDropType',{dimensionColumn:0,measureColumn:1,drillPath:2,drillPathItem:3,unknown:4});var fN=global.tab.FieldFolderCommandRedirectHandler=ss.mkType(a,'tab.FieldFolderCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['datasource'];var nn=nk['folderRole'];var no=nk['newFieldFolderName'];var np=nk['fieldVector'];var nq=nk['drillpathVector'];var nr=nk['dialogTitle'];var ns=kt.new$1(no,no,function(nt,nu){_.defer(function(){tab.SchemaClientCommands.validateFieldFolderName(nm,null,nt,nn,nu)})},function(nt){tab.SchemaClientCommands.addFieldFolder(nm,nt,np,nq,nn);nl.resolve()});ns.set_titleUnescaped(nr);ns.show();return nl},$1:function(nk){var nl=$.Deferred();var nm=nk['datasource'];var nn=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(nm);if(ss.isNullOrUndefined(nn)){return nl}var no=nk['fn'];var np=nk['folderRole'];var nq=nn.getFolderModel(no,np);var nr=nq.get_fieldCaptionForReset();var ns=nq.get_displayName();var nt=kt.new$1(ns,nr,function(nu,nv){_.defer(function(){tab.SchemaClientCommands.validateFieldFolderName(nn.get_name(),null,nu,np,nv)})},function(nu){_.defer(function(){tab.SchemaClientCommands.renameFieldFolder(nn.get_name(),ns,nu,np);nl.resolve()})});nt.set_titleUnescaped(nk['dialogTitle']);nt.show();return nl}});var fO=global.tab.FieldPickerComboViewModel=ss.mkType(a,'tab.FieldPickerComboViewModel',function(nk){this.$F=null;this.$4$1=null;spiff.ComboBoxViewModel.call(this);this.generateProps=true;this.set_model(nk)},{get_model:function(){return this.$4$1},set_model:function(nk){this.$4$1=nk},get_selectedField:function(){return this.$F},get_selectedText:function(){return(ss.isValue(this.get_selectedField())?this.get_selectedField().fieldSummary:null)},get_selectedIconClass:function(){return this.getIconFromField(this.get_selectedField())},updateDomFromModel:function(){var nk=null;this.clearItems();var nl=[];var nm=this.get_model().get_fields();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(this.getIconFromField(no),no.fieldCaption,no.fieldName,null,null);if(ss.equalsT(no.fieldName,this.get_model().get_selectedField())){nk=np;this.$F=no}nl.push(np)}this.setItemsWithInitialSelection(nl,nk)},getIconFromField:function(nk){if(ss.isNullOrUndefined(nk)){return null}if(nk.isTableCalc&&!nk.isInPrimaryDataSource){return fO.secondaryDSTableCalcIcon}if(nk.isTableCalc){return fO.tableCalcIcon}if(!nk.isInPrimaryDataSource&&!nk.isFieldParameter){return fO.secondaryDSIcon}return null}});var fP=global.tab.FieldPillView=ss.mkType(a,'tab.FieldPillView',function(nk,nl){this.$g=null;this.$j=false;this.$i=null;this.$h=null;this.$k=null;ss.makeGenericType(spiff.BaseView$1,[jg]).call(this,nk,nl);this.$k=nl;this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$k.domRoot[0],ss.mkdel(this,this.handlePillClick)).onRightClick(ss.mkdel(this,this.handleRightClick)).onDoubleClick(ss.mkdel(this,this.handlePillDoubleClick)));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$k.drillIcon[0],ss.mkdel(this,this.handleIconClick)));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$k.menuButton[0],ss.mkdel(this,this.handleMenuButtonClick)));EventUtils.DragDropManager.attachDragSource(this.$k.dragSource,nk);EventUtils.DragDropManager.attachDropTarget(this.$k.domRoot,nk);this.updateDom();this.get_viewModel().add_showDragAccept(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_showDragAccept(ss.mkdel(this,this.$8))})));_.defer(ss.mkdel(this,function(){this.updateLabelSizeForIcons()}))},{get_hasExternalIcon:function(){return this.$j},get_dom:function(){return this.$k},dispose:function(){if(ss.isValue(this.$i)){this.$i.dispose()}ss.makeGenericType(spiff.BaseView$1,[jg]).prototype.dispose.call(this)},handlePillExit:function(nk){$(nk.currentTarget).removeClass('hover');this.$k.icons.css('display','');this.updateLabelSizeForIcons()},handlePillEnter:function(nk){if(EventUtils.DragDropManager.get_isDragging()){return}$(nk.currentTarget).addClass('hover');this.$k.icons.css('display','none');this.updateLabelSizeForIcons()},handleRightClick:function(nk){spiff.EventUtil.stopEvent$1(nk);this.get_viewModel().menuButtonClicked(this.$k.content,'right-click')},handleMenuButtonClick:function(nk){spiff.EventUtil.stopEvent$1(nk);this.get_viewModel().menuButtonClicked(this.$k.content,'dropdown-arrow')},handleIconClick:function(nk){spiff.EventUtil.stopEvent$1(nk);this.get_viewModel().iconClicked();this.$f()},handlePillClick:function(nk){spiff.EventUtil.stopEvent$1(nk);this.get_viewModel().pillClicked()},handlePillDoubleClick:function(nk){spiff.EventUtil.stopEvent$1(nk);this.get_viewModel().pillDoubleClicked()},updateDom:function(){this.$c();this.$d();this.$e();this.$f();this.$9();this.$b();this.$a();this.$k.label.text(this.get_viewModel().get_displayName());this.$k.label.attr('title',this.get_viewModel().get_pill().get_tooltip());this.$k.domRoot.get(0).id=this.get_viewModel().get_pillIdentifier();spiff.Widget.disableTextSelectionOnElement(this.$k.label)},updateLabelSizeForIcons:function(){var nk=(this.$k.icons.is(':visible')?tab.DoubleUtil.roundToInt(this.$k.icons.outerWidth(true)):10);this.$k.label.css('padding-right',ss.formatString('{0}px',nk))},$a:function(){if(this.get_viewModel().get_pill().get_alternateEncodings().length===0){return}if(ss.isNullOrUndefined(this.$i)){this.$k.externalIcon.hide();this.$j=true;this.$i=new spiff.ComboBoxViewModel;this.$i.set_theme(1);this.$i.set_showSelectedItem(false);this.$i.set_showDropdownIcon(this.get_viewModel().get_pill().get_encodingType()==='invalid-encoding');this.$i.set_enabled(!this.get_viewModel().get_pill().get_isMultipleFields());this.$i.add_selectedItemChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$i.remove_selectedItemChanged(ss.mkdel(this,this.$7))})));this.$h=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$i]);this.$k.encodingType.append(this.$h.element)}this.$i.clearItems();var nk=this.get_viewModel().get_pill().get_alternateEncodings();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new spiff.ComboBoxItem(gN.getEncodingTypeIcon(nm.encodingType),nm.name,nm.encodingType,null,null);this.$i.addItem(nn);if(nm.encodingType===this.get_viewModel().get_pill().get_encodingType()){this.$i.set_selectedItem(nn)}}if(ss.isNullOrUndefined(this.$i.get_selectedItem())){var no=this.get_viewModel().get_pill().pm.encodingUiItems;for(var np=0;np<no.length;np++){var nq=no[np];if(nq.encodingType===this.get_viewModel().get_pill().get_encodingType()){var nr=new spiff.ComboBoxItem(gN.getEncodingTypeIcon(nq.encodingType),nq.name,nq.encodingType,null,null);this.$i.set_selectedItem(nr);break}}}},$7:function(nk){this.get_viewModel().updateEncodingType(nk.get_data())},$b:function(){var nk=gN.getPillFilterTypeIcon(this.get_viewModel().get_pill());this.$j=ss.isValue(nk);if(ss.isValue(nk)){this.$k.externalIcon.addClass('tabAuthPillFilter').addClass(nk);this.$k.externalIcon.attr('title',this.get_viewModel().get_pill().get_sideIconToolip())}},$9:function(){var nk=false;var nl=false;switch(this.get_viewModel().get_item().itemDrawStyle){case'opened':{nk=true;break}case'closed':{nl=true;break}}this.$k.content.toggleClass('tabAuthPillOpened',nk);this.$k.content.toggleClass('tabAuthPillClosed',nl)},$f:function(){this.$k.drillIcon.removeClass(this.$g);if(this.get_viewModel().get_pill().get_hasDrill()){this.$g=(this.get_viewModel().get_pill().get_shouldDrill()?'tabAuthPillIconDrillDown':'tabAuthPillIconDrillUp')}else{this.$g=''}this.$k.drillIcon.addClass(this.$g);this.$k.content.toggleClass('tabAuthPillHasDrill',this.get_viewModel().get_pill().get_hasDrill());this.$k.icons.empty();var nk=gN.getPillIcons(this.get_viewModel().get_pill());for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$k.icons.append($('<span></span>').addClass(nm).addClass('tabAuthPillIcon'))}this.updateLabelSizeForIcons()},$d:function(){this.$k.content.toggleClass('tabAuthPillOrdinal',this.get_viewModel().get_displayAsOrdinal());this.$k.content.toggleClass('tabAuthPillQuantatative',this.get_viewModel().get_displayAsQuantitative());this.$k.content.toggleClass('tabAuthPillNominal',this.get_viewModel().get_displayAsNominal());this.$k.content.toggleClass('tabAuthPillOther',this.get_viewModel().get_displayAsOther());this.$k.content.toggleClass('tabAuthPillMultiple',this.get_viewModel().get_displayAsMultipleFields());this.$k.content.toggleClass('tabAuthPillInvalid',this.get_viewModel().get_displayAsInvalid())},$c:function(){this.$k.content.toggleClass('tabAuthPillDimension',this.get_viewModel().get_displayAsDimension());this.$k.content.toggleClass('tabAuthPillMeasure',this.get_viewModel().get_displayAsMeasure())},$e:function(){this.$k.content.toggleClass('tabAuthPillContext',this.get_viewModel().get_displayAsContext())},$8:function(nk){this.$k.content.toggleClass('tabDropInvited',nk)}});var fQ=global.tab.FieldsInfo=ss.mkType(a,'tab.FieldsInfo',function(nk){this.dimensionColumns=0;this.measureColumns=0;this.schemaCommonRootColumns=0;this.columnsInDrillPath=0;this.columnsInFolder=0;this.canAddToDrillPath=0;this.drillPaths=0;var nl=nk.length;var nm=0;var nn=0;var no=0;var np=0;var nq=0;var nr=0;var ns=0;for(var nt=0;nt<nk.length;nt++){var nu=nk[nt];if(nu.get_isColumn()){var nv=nu.asColumn().get_baseColumn();if(nv.get_defaultRole()==='dimension'){nm++;if(this.$0(nu,5)){no++}}else if(nv.get_defaultRole()==='measure'){nn++;if(this.$0(nu,6)){no++}}if(nv.get_isInDrillPath()){np++}if(nv.get_canAddToDrillPath()){nr++}}else if(nu.get_isDrillPath()){ns++;if(this.$0(nu,5)){no++}}if(!ss.isNullOrEmptyString(nu.get_parentFolderName())){nq++}}this.dimensionColumns=this.$2(nm,nl);this.measureColumns=this.$2(nn,nl);this.schemaCommonRootColumns=this.$2(no,nl);this.columnsInDrillPath=this.$2(np,nl);this.columnsInFolder=this.$2(nq,nl);this.canAddToDrillPath=this.$2(nr,nl);this.drillPaths=this.$2(ns,nl)},{$1:function(nk,nl){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.rootFieldsNew)){return[]}return nk.rootFieldsNew[nl]},$0:function(nk,nl){if(ss.isNullOrUndefined(nk)){return false}var nm=this.$1(nk.get_fieldsModel(),nl);var nn=_.find(nm,function(no){if(ss.referenceEquals(nk,no)){return true}else if(no.get_isRelationalTable()&&ss.isInstanceOfType(no,tab.RelationalTableModel)){return _.contains(ss.safeCast(no,tab.RelationalTableModel).get_columns(),nk)}else if(no.get_isDrillPath()&&ss.isInstanceOfType(no,tab.DrillPathModel)){return _.contains(ss.safeCast(no,tab.DrillPathModel).get_levels(),nk)}return false});return ss.isValue(nn)},$2:function(nk,nl){if(nk>nl){throw new ss.Exception('Count is greater than total')}return((nk===0)?0:((nk===nl)?2:1))}});var fR=global.tab.FieldTemplate=ss.mkType(a,'tab.FieldTemplate',function(){this.expandoIcon=null;this.icon=null;this.iconArea=null;this.name=null;this.labelArea=null;this.children=null;this.pill=null;this.menuButton=null;this.deferredCreateChildren=null;this.$4=null;this.$3=null;this.$1=null;this.$2=null;spiff.Template.call(this,$(fR.template));this.domRoot.data('FieldTemplate',this);this.icon=this.getElementBySelector('.tab-schema-field-icon');this.iconArea=this.getElementBySelector('.tab-schema-field-icon-area');this.name=this.getElementBySelector('.tab-schema-field-label');this.children=this.getElementBySelector('.tab-schema-field-children');this.expandoIcon=this.getElementBySelector('.tab-schema-field-expando-icon');this.labelArea=this.getElementBySelector('.tab-schema-field-label-area');this.pill=this.getElementBySelector('.tab-schema-field-pill');this.menuButton=this.getElementBySelector('.tab-schema-field-pill-menu-btn')},{get_node:function(){return this.domRoot.data('Node')},set_node:function(nk){this.domRoot.data('Node',nk)},firstChild:function(){return fR.fromDom(this.children.find(ss.formatString('.{0}','tab-schema-field')).first())},getMenuClickHandler:function(nk){if(ss.isNullOrUndefined(this.$4)){this.$4=spiff.TableauClickHandler.target(this.menuButton[0]);nk.add$1(this.$4)}return this.$4},getExpandoClickHandler:function(nk){if(ss.isNullOrUndefined(this.$1)){this.$1=spiff.TableauClickHandler.target(this.expandoIcon[0]);nk.add$1(this.$1)}return this.$1},getLabelClickHandler:function(nk){if(ss.isNullOrUndefined(this.$3)){this.$3=spiff.TableauClickHandler.target(this.labelArea[0]);nk.add$1(this.$3)}return this.$3},getIconAreaClickHandler:function(nk){if(ss.isNullOrUndefined(this.$2)){this.$2=spiff.TableauClickHandler.target(this.iconArea[0]);nk.add$1(this.$2)}return this.$2},isExpanded:function(){return this.expandoIcon.hasClass('tab-schema-expanded')}},{fromDom:function(nk){return nk.data('FieldTemplate')}});var fS=global.tab.FloatingDirectedInformationComponent=ss.mkType(a,'tab.FloatingDirectedInformationComponent',function(nk){this.$5=null;this.$4=new tab.DisposableHolder;spiff.PureRenderComponent.call(this,nk);this.$5=_.throttle(ss.mkdel(this,this.handleResize),50,{leading:false,trailing:true})},{$0:function(){var nk=React.createElement('div',{className:'tabAuthFloatingInfoContentClose'});return function(nl){return nk}},handleResize:function(){this.forceUpdate()},componentDidMount:function(){this.$4.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,function(nk){this.$5()})))},componentWillUnmount:function(){this.$4.dispose()},render:function(){var nk=tab.DomUtil.getRectXY($(this.props.anchorElement));return spiff.DOMElements.div({className:'tabAuthFloatingInfoContainer',style:{width:250,left:nk.x+ss.idiv(nk.w,2)-ss.idiv(250,2),top:nk.y+nk.h},'data-tb-test-id':'tabAuthFloatingInfoTestId'},spiff.ReactElement.div$1('tabAuthFloatingInfoArrow',[]),this.$2())},$2:function(){return spiff.DOMElements.div({className:'tabAuthFloatingInfoContent'},this.$3(),this.$1())},$3:function(){var nk=null;if(ss.isValue(this.props.learnMoreToken)){var nl=tab.UriUtil.makeHelpUri(this.props.learnMoreToken,'');nk=spiff.DOMElements.a({href:nl,target:'_blank',className:'tabAuthFloatingInfoContentLearnMore'},tab.Strings.AuthAutosaveLearnMore)}return spiff.DOMElements.div({className:'tabAuthFloatingInfoContentTextContainer'},spiff.DOMElements.div({className:'tabAuthFloatingInfoContentTitle'},this.props.contentTitle),spiff.DOMElements.div({className:'tabAuthFloatingInfoContentText'},this.props.contentText,nk))},$1:function(){return spiff.DOMElements.div({className:'tabAuthFloatingInfoCloseContainer'},React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nk){this.props.onClose()}),buttonType:10,testId:'tabAuthFloatingInfoCloseContainer',children:'',title:tab.Strings.AuthoringMenuBarCloseButtonLabel,getContent:this.$0()}))}});var fT=global.tab.FloatingResizeDragInstance=ss.mkType(a,'tab.FloatingResizeDragInstance',function(nk,nl,nm,nn,no){this.viewModel=null;spiff.MoveDragInstance.call(this,nk,nm,nn,no);this.viewModel=nl});var fU=global.tab.FloatingResizeFeedbackComponent=ss.mkType(a,'tab.FloatingResizeFeedbackComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){var nk=null;if(ss.isValue(this.props.preview)){nk=spiff.DOMElements.rect({x:this.props.preview.x,y:this.props.preview.y,width:this.props.preview.w,height:this.props.preview.h,className:'tab-dashFloatingResizePreview'})}var nl=this.props.dashboardGeometry();return spiff.DOMElements.svg({width:nl.w,height:nl.h,className:'tab-dashDropTargetContainer'},nk)}});var fV=global.tab.FloatingResizeViewModel=ss.mkType(a,'tab.FloatingResizeViewModel',function(nk,nl,nm,nn,no){this.$9=null;this.$a=null;this.$5=0;this.$6=0;this.$8=null;this.$7=null;this.$3=0;this.$4=0;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$8=nl;this.$7=nk;this.$9=nm;this.$3=nn;this.$4=no},{setOriginalRect:function(nk){this.$8=nk},startDrag:function(nk){this.$a=this.$2(nk);this.updateProps$1({preview:this.$8,dashboardGeometry:bg.dashboardGeometry});if(ss.contains(this.$9,1)){this.$5=Math.max(-1*this.$8.w,-1*(this.$8.w+this.$8.x)+5)}else if(ss.contains(this.$9,0)){this.$5=Math.min(this.$8.w,this.$4-this.$8.x-5)}if(ss.contains(this.$9,3)){this.$6=Math.max(-1*this.$8.h,-1*(this.$8.h+this.$8.y)+5)}else if(ss.contains(this.$9,2)){this.$6=Math.min(this.$8.h,this.$3-this.$8.y-5)}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$1));return this.createDragIntance(nk)},createDragIntance:function(nk){return new fT($(nk.target),this,ss.mkdel(this,this.onMove),ss.mkdel(this,this.onDrop),null)},onMove:function(nk){var nl=this.$2(nk);var nm=nl.x-this.$a.x;var nn=nl.y-this.$a.y;var no={h:this.$8.h,w:this.$8.w,x:this.$8.x,y:this.$8.y};if(ss.contains(this.$9,1)){nm=Math.max(nm,this.$5);no.w=this.$8.w+nm}else if(ss.contains(this.$9,0)){nm=Math.min(nm,this.$5);no.x=this.$8.x+nm;no.w=this.$8.w-nm}if(ss.contains(this.$9,3)){nn=Math.max(nn,this.$6);no.h=this.$8.h+nn}else if(ss.contains(this.$9,2)){nn=Math.min(nn,this.$6);no.y=this.$8.y+nn;no.h=this.$8.h-nn}this.updateProps$1({dashboardGeometry:this.get_props().dashboardGeometry,preview:no})},$2:function(nk){var nl=bg.dashboardGeometry();return{x:nk.clientX-nl.l,y:nk.clientY-nl.t}},onDrop:function(nk){if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')){this.dispose()}if(_.isEqual(this.get_props().preview,this.$8)){return}EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$1));this.$7(this.get_props().preview).done([ss.mkdel(this,this.dispose)]).fail([ss.mkdel(this,this.dispose)])},$1:function(nk){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$1));this.dispose()}});var fW=global.tab.FloatingZoneDragInstanceWithPreview=ss.mkType(a,'tab.FloatingZoneDragInstanceWithPreview',function(nk,nl,nm){mU.call(this,nk,nl,nm,mT.forZoneMove($.Deferred()))},{get_dragType:function(){return'dragmovedrop'},moveTo:function(nk){if(!this.get_isFloating()||this.isShiftDrag){return}var nl=bg.dashboardGeometry();var nm=nk.pageY-nl.t;var nn=nk.pageX-nl.l;var no=nm-this.grabPoint.y;var np=nn-this.grabPoint.x;var nq=this.get_dragged().get_zoneCommonModel().get_zoneCommonPresModel().y;var nr=this.get_dragged().get_zoneCommonModel().get_zoneCommonPresModel().x;var ns=no-(this.get_dragged().get_y()-nq);var nt=np-(this.get_dragged().get_x()-nr);this.get_dragged().updateLocalPropertiesForZonePreview(nt,ns)}},{create:function(nk,nl,nm){var nn=new fW(nk,nl,nm);nn.initialize();return nn}});var fX=global.tab.FontPickerPopupTemplate=ss.mkType(a,'tab.FontPickerPopupTemplate',function(){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Template.call(this,$("\n        <div class='tabFontPickerContainer'>\n            <div class='tabFontFamilyPickerContainer'></div>\n            <div class='tabFontSizePickerContainer'></div>\n            <div class='tabFontStyleButtonsContainer'></div>\n            <div class='tabFontColorPickerContainer'></div>\n        </div>"));this.set_fontFamily(this.getElementBySelector('.tabFontFamilyPickerContainer'));this.set_fontSize(this.getElementBySelector('.tabFontSizePickerContainer'));this.set_fontStyle(this.getElementBySelector('.tabFontStyleButtonsContainer'));this.set_fontColor(this.getElementBySelector('.tabFontColorPickerContainer'))},{get_fontFamily:function(){return this.$2$1},set_fontFamily:function(nk){this.$2$1=nk},get_fontSize:function(){return this.$2$2},set_fontSize:function(nk){this.$2$2=nk},get_fontStyle:function(){return this.$2$3},set_fontStyle:function(nk){this.$2$3=nk},get_fontColor:function(){return this.$2$4},set_fontColor:function(nk){this.$2$4=nk}});var fY=global.tab.FontPickerPopupView=ss.mkType(a,'tab.FontPickerPopupView',function(nk){this.views=null;ss.makeGenericType(spiff.BaseView$1,[Object]).call(this,nk,new fX);this.$8();this.get_viewModel().add_updated(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.$8))})))},{$9:function(){return this.get_template()},$8:function(){if(ss.isValue(this.views)){tab.MiscUtil.dispose(this.views)}this.$7()},$7:function(){this.views=[];var nk=this.get_viewModel().get_childViewModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=ss.safeCast(nm,gm);if(ss.isNullOrUndefined(nn)){continue}var no=tab.ObjectRegistry.newView(gl).call(null,[nn]);this.views.push(no);switch(nn.get_widgetKey()){case'fontFamily':{no.addToDom(this.$9().get_fontFamily());break}case'fontSize':{no.addToDom(this.$9().get_fontSize());break}case'bold':case'italics':case'underline':{no.addToDom(this.$9().get_fontStyle());break}case'colorSwatch':{no.addToDom(this.$9().get_fontColor());break}default:{no.addToDom(this.$9().domRoot);break}}}}});var fZ=global.tab.FontPickerPreviewTemplate=ss.mkType(a,'tab.FontPickerPreviewTemplate',function(){this.fontSize=null;this.fontFamily=null;spiff.Template.call(this,$("<div class='tabFontPickerPreview'><div class='tabFontPickerFontFamily'></div><div class='tabFontPickerFontSize'></div></div>"));this.fontSize=this.getElementBySelector('.tabFontPickerFontSize');this.fontFamily=this.getElementBySelector('.tabFontPickerFontFamily')});var ga=global.tab.FormatColorPickerViewModel=ss.mkType(a,'tab.FormatColorPickerViewModel',function(nk,nl,nm){this.$4=null;this.$2=null;this.$3=false;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$0(new dl);this.$3=nm;this.$4=(ss.isNullOrEmptyString(nk)?ga.defaultColor:tab.ColorModel.fromColorCode(nk));if(nl){this.$2=new gb(this.get_enabled());this.$2.setCurrentFraction(this.get_selectedColor().get_a());this.$2.add_sliderFractionUpdated(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_sliderFractionUpdated(ss.mkdel(this,this.$1));this.$2.dispose()})))}},{add_enabledChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_enabledChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_updateCommand:function(){return this.$2$2},set_updateCommand:function(nk){this.$2$2=nk},get_colorTransparencyControlViewModel:function(){return this.$2},get_colorProvider:function(){return this.$2$3},$0:function(nk){this.$2$3=nk},get_selectedColor:function(){return this.$4},set_selectedColor:function(nk){this.$4=nk;this.raiseActionEvent$1(tab.ColorModel).call(this,this.get_updateCommand(),nk)},get_isTransparencyVisible:function(){return ss.isValue(this.$2)},get_enabled:function(){return this.$3},set_enabled:function(nk){if(this.$3===nk){return}this.$3=nk;if(ss.isValue(this.$2)){this.$2.set_enabled(nk)}this.raiseActionEvent(this.$2$1)},$1:function(nk){this.set_selectedColor(tab.ColorModel.fromColorModelPlusAlpha(this.get_selectedColor(),nk))},addUpdated:function(nk){this.set_updateCommand(ss.delegateCombine(this.get_updateCommand(),nk));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.set_updateCommand(ss.delegateRemove(this.get_updateCommand(),nk))})))}});var gb=global.tab.FormatColorTransparencySliderViewModel=ss.mkType(a,'tab.FormatColorTransparencySliderViewModel',function(nk){this.$4=false;this.$5=null;this.$3=0;this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=nk},{add_sliderFractionUpdated:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_sliderFractionUpdated:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},add_enabledChanged:function(nk){this.$3$2=ss.delegateCombine(this.$3$2,nk)},remove_enabledChanged:function(nk){this.$3$2=ss.delegateRemove(this.$3$2,nk)},get_currentFraction:function(){return this.$3},get_enabled:function(){return this.$4},set_enabled:function(nk){if(this.$4===nk){return}this.$4=nk;this.incrementProps();this.raiseActionEvent(this.$3$2)},get_tabIndex:function(){return this.$5},set_tabIndex:function(nk){if(ss.referenceEquals(this.$5,nk)){return}this.$5=nk;this.incrementProps()},createInitialProps:function(){return ds.getDefaultProps(this.get_currentFraction(),this.get_enabled(),ss.mkdel(this,function(nk){this.setCurrentFraction(nk/100)}),this.$5)},createUpdatedProps:function(){return{disabled:!this.$4,tabIndex:this.$5}},setCurrentFraction:function(nk){this.$3=tab.DoubleUtil.truncateTwoDecimalPlaces(nk);this.raiseActionEvent$1(Number).call(this,this.$3$1,this.$3)}});var gc=global.tab.FormatContainerButtonContainerTemplate=ss.mkType(a,'tab.FormatContainerButtonContainerTemplate',function(){this.pickerButton=null;this.buttonTemplate=null;spiff.Template.call(this,$("<div class='tabFormatContainerButtonContainer'></div>"));this.pickerButton=spiff.LabelButton.newTextButton(null,null);this.buttonTemplate=new gd;this.pickerButton.setLabelContents(this.buttonTemplate.domRoot);this.domRoot.append(this.pickerButton.element);this.disposables.add(ss.mkdel(this,function(){tab.MiscUtil.dispose$1(this.pickerButton)}))});var gd=global.tab.FormatContainerButtonTemplate=ss.mkType(a,'tab.FormatContainerButtonTemplate',function(){this.label=null;this.showPopup=null;spiff.Template.call(this,$("<div class='tabFormatContainerButton'><div class='tabFormatContainerButtonLabel'></div><div class='tabFormatContainerShowPopupButtonHolder'><div class='tabFormatContainerShowPopupButton'></div></div></div>"));this.label=this.getElementBySelector('.tabFormatContainerButtonLabel');this.showPopup=this.getElementBySelector('.tabFormatContainerShowPopupButton')});var ge=global.tab.FormatContainerButtonView=ss.mkType(a,'tab.FormatContainerButtonView',function(nk){this.$9=null;ss.makeGenericType(spiff.BaseView$1,[gj]).call(this,nk,new gc);this.get_viewModel().add_updated(ss.mkdel(this,this.$8));this.get_viewModel().add_disposed(ss.mkdel(this,function(nl){this.get_viewModel().remove_updated(ss.mkdel(this,this.$8))}));this.$9=ge.$2(nk)},{get_formatContainerButtonTemplate:function(){return this.get_template()},get_buttonTemplate:function(){return this.get_formatContainerButtonTemplate().buttonTemplate},addToDom:function(nk){spiff.Widget.prototype.addToDom.call(this,nk);this.$8();var nl=this.$7(this.get_template().domRoot);this.get_formatContainerButtonTemplate().pickerButton.add_click(nl);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_formatContainerButtonTemplate().pickerButton.remove_click(nl)})))},$7:function(nk){return ss.mkdel(this,function(){var nl=tab.DateUtil.get_nowAsTime();var nm=false;var nn=ss.mkdel(this,function(nq,nr){var ns=0;if(ss.isValue(tab.FormattingUtil.get_getBrowserStoredFontString())){ns=tab.FormattingUtil.get_getBrowserStoredFontString().split(',').length}tab.FormattingTelemetryClient.logPerformanceEvent(ss.mkdict(['PerformanceMetric','OpenFontUberpicker','IsInitial',nr,'ItemCount',ns,'WidgetIdentifiers',_.map(this.get_viewModel().get_containerModel().get_items(),function(nt){return nt.get_widgetIdentifier()}).join(','),'ElapsedTime',tab.DateUtil.get_nowAsTime()-nq]))});if(this.get_viewModel().get_pickerType()==='font'&&!tab.FormattingUtil.get_hasBrowserStoredFontList()){nm=true;var no=this.get_buttonTemplate().label.find('.tabFontPickerFontFamily');var np=no.text();no.text(tab.Strings.AuthFontListLoading);window.setTimeout(ss.mkdel(this,function(){this.get_viewModel().pickerClicked(nk);no.text(np);nn(nl,nm)}),17)}else{this.get_viewModel().pickerClicked(nk);if(this.get_viewModel().get_pickerType()==='font'){nn(nl,nm)}}})},$8:function(){this.get_buttonTemplate().label.html(this.$9(this.get_viewModel().get_previewProperties()))}},{$2:function(nk){switch(nk.get_pickerType()){case'font':{return ge.$0}case'line':{return ge.$1}default:{return null}}},$0:function(nk){var nl=new fZ;var nm=ss.coalesce(nk['fontFamily'],'');nl.fontFamily.text(nm);var nn=nk['fontSize'];if(ss.isValue(nn)){nl.fontSize.text(nn.toString())}var no=new jk;no.set_fontFamily(nm);no.set_fontColor(ss.coalesce(nk['colorSwatch'],''));no.set_bold(ss.coalesce(nk['bold'],false));no.set_italic(ss.coalesce(nk['italics'],false));no.set_underline(ss.coalesce(nk['underline'],false));nl.fontFamily.css(no.build());return nl.domRoot},$1:function(nk){var nl=new ia;var nm=nk['lineVisibility'];if(nm==='off'){nl.lineDescription.text(tab.Strings.AuthLineOffPreview);nl.lineDescription.show();nl.lineSwatch.hide()}else{nl.lineDescription.hide();var nn=ss.coalesce(nk['linePattern'],'solid');var no=ss.coalesce(nk['lineSize'],1);var np=ss.coalesce(nk['colorSwatch'],'rgba(0,0,0,255)');var nq=tab.ColorModel.fromColorCode(np);var nr=tab.ColorModel.fromColorCode('#fafafa');if(nq.isLuminanceAgainstBackgroundAboveThreshold(nr,0.800000011920929)){nq=nq.getApparentColor(nr)}var ns={};ns['border-top-style']=nn;ns['border-top-width']=no+'px';ns['border-top-color']=nq.toRgb();ns.opacity=nq.get_a().toString();nl.lineSwatch.css(ns);nl.lineSwatch.show()}return nl.domRoot}});var gf=global.tab.FormatContainerPopupTemplate=ss.mkType(a,'tab.FormatContainerPopupTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthFormatContainerPopup'></div>"))});var gg=global.tab.FormatContainerPopupView=ss.mkType(a,'tab.FormatContainerPopupView',function(nk){this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[gj]).call(this,nk,new gf);this.$8();this.get_viewModel().add_updated(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.$8))})))},{get_popupTemplate:function(){return this.get_template()},get_pickerView:function(){return this.$3$1},set_pickerView:function(nk){this.$3$1=nk},dispose:function(){tab.MiscUtil.dispose$1(this.get_pickerView());ss.makeGenericType(spiff.BaseView$1,[gj]).prototype.dispose.call(this)},$8:function(){tab.MiscUtil.dispose$1(this.get_pickerView());if(this.get_viewModel().get_model().get_isTabGroup()){var nk=this.get_viewModel().get_childViewModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=nm.asContainerViewModel();this.get_popupTemplate().domRoot.append($('<div></div>').text(nn.get_containerModel().get_label()));this.$7(this.get_popupTemplate().domRoot,nn,this.get_viewModel().get_pickerType())}}else{this.$7(this.get_popupTemplate().domRoot,this.get_viewModel(),this.get_viewModel().get_pickerType())}},$7:function(nk,nl,nm){switch(nm){case'font':{this.set_pickerView(tab.ObjectRegistry.newView(fY).call(null,[nl]));break}case'line':{this.set_pickerView(tab.ObjectRegistry.newView(hZ).call(null,[nl]));break}case'number':{var nn=new bs(nl.get_containerModel());this.set_pickerView(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[bs,br,Object])).call(null,[nn]));break}case'none':{this.set_pickerView(tab.ObjectRegistry.newView(gi).call(null,[nl]));break}}if(ss.isValue(this.get_pickerView())){this.get_pickerView().addToDom(nk);this.disposables.add$1(this.get_pickerView())}}});var gh=global.tab.FormatContainerTemplate=ss.mkType(a,'tab.FormatContainerTemplate',function(){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;gn.call(this);this.domRoot.addClass('tabAuthFormatContainer');this.set_dirtyDotContainer($('<div></div>').addClass('tabAuthFormatDirtyDotContainer'));this.set_dirtyDot($('<div></div>').attr('title',tab.Strings.AuthWorkbookFormatPaneClearOne).addClass('tabAuthFormatDirtyDot'));this.set_dirtyDotHolder($('<div></div>').addClass('tabAuthFormatDirtyDotHolder'));this.get_dirtyDotHolder().append(this.get_dirtyDot());this.get_dirtyDotContainer().append(this.get_dirtyDotHolder());this.set_sectionHeader($('<div></div>').addClass('tabAuthFormatSectionHeader'));this.set_containerItems($('<div></div>').addClass('tabAuthFormatContainerItems'));this.set_expandSection($('<div></div>').addClass('tabAuthFormatExpandSection'));this.set_collapseSection($('<div></div>').addClass('tabAuthFormatCollapseSection'));this.get_expandSection().append($('<span></span>').addClass('tabAuthExpandSectionLabel').text(tab.Strings.AuthFormatSectionExpand));this.get_expandSection().append($('<span></span>').addClass('tabAuthExpandSectionIcon'));this.get_collapseSection().append($('<span></span>').addClass('tabAuthCollapseSectionLabel').text(tab.Strings.AuthFormatSectionCollapse));this.get_collapseSection().append($('<span></span>').addClass('tabAuthCollapseSectionIcon'))},{get_containerItems:function(){return this.$3$1},set_containerItems:function(nk){this.$3$1=nk},get_sectionHeader:function(){return this.$3$2},set_sectionHeader:function(nk){this.$3$2=nk},get_expandSection:function(){return this.$3$3},set_expandSection:function(nk){this.$3$3=nk},get_collapseSection:function(){return this.$3$4},set_collapseSection:function(nk){this.$3$4=nk},get_dirtyDot:function(){return this.$3$5},set_dirtyDot:function(nk){this.$3$5=nk},get_dirtyDotHolder:function(){return this.$3$6},set_dirtyDotHolder:function(nk){this.$3$6=nk},get_dirtyDotContainer:function(){return this.$3$7},set_dirtyDotContainer:function(nk){this.$3$7=nk}});var gi=global.tab.FormatContainerView=ss.mkType(a,'tab.FormatContainerView',function(nk){this.$k=null;this.$4$1=null;ss.makeGenericType(go,[gj]).call(this,nk,new gh);this.$k=[];this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.MiscUtil.dispose(this.$k)})))},{add_updated:function(nk){this.$4$1=ss.delegateCombine(this.$4$1,nk)},remove_updated:function(nk){this.$4$1=ss.delegateRemove(this.$4$1,nk)},$j:function(){return this.get_viewModel().get_containerModel()},get_containerTemplate:function(){return this.get_template()},get_canHaveDirtyDot:function(){return this.$j().get_typeOfFormatContainer()==='unitContainer'||this.$j().get_typeOfFormatContainer()==='tabGroup'},addToDom:function(nk){switch(this.$j().get_typeOfFormatContainer()){case'formatPane':{this.$a();break}case'formatSection':{this.$b();break}case'collapsibleSection':{this.$8();break}case'unitContainer':{this.$c();break}case'tabGroup':case'compositeContainer':{this.$9();break}case'tab':{break}}if(this.$j().get_typeOfFormatContainer()!=='compositeContainer'){this.$i();this.get_viewModel().add_updated(ss.mkdel(this,this.$i));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.$i))}))}nk.append(this.element);this.onAddedToDom()},$7:function(nk){if(this.$k.length===this.get_viewModel().get_childViewModels().length){return}var nl=this.get_viewModel().get_childViewModels();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=nn.createView();if(ss.isValue(no)){no.addToDom(nk);this.$k.push(no)}if(nn.get_typeOfFormatItem()==='formatContainer'){no.add_updated(ss.mkdel(this,this.$g))}}},$a:function(){this.get_containerTemplate().domRoot.addClass('tabAuthFormatPane');this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_containerItems())},$b:function(){this.get_containerTemplate().domRoot.addClass('tabAuthFormatSection');this.get_containerTemplate().get_sectionHeader().text(this.get_viewModel().get_name());this.get_containerTemplate().get_sectionHeader().addClass('tabAuthFormatSectionHeaderTitle');this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_sectionHeader());this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_containerItems())},$8:function(){this.get_containerTemplate().domRoot.addClass('tabAuthFormatCollapsibleSection');this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.get_containerTemplate().get_collapseSection()[0],ss.mkdel(this,this.$d)));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.get_containerTemplate().get_expandSection()[0],ss.mkdel(this,this.$f)))},$c:function(){this.get_containerTemplate().domRoot.addClass('tabAuthFormatUnitContainer');this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.get_containerTemplate().get_dirtyDot()[0],ss.mkdel(this,this.$e)));this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_sectionHeader());this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_dirtyDotContainer());this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_containerItems())},$e:function(nk){this.get_viewModel().sendClear()},$f:function(nk){this.get_viewModel().expandContainer()},$d:function(nk){this.get_viewModel().collapseContainer()},$9:function(){this.get_containerTemplate().domRoot.addClass('tabAuthFormatContainerPreview tab-unification-line-arrow-dropdown');tab.ObjectRegistry.newView(ge).call(null,[this.get_viewModel()]).addToDom(this.get_template().domRoot)},$i:function(){var nk=ss.mkdel(this,function(nl){this.get_containerTemplate().get_sectionHeader().text(nl);this.get_containerTemplate().get_sectionHeader().attr('title',nl)});switch(this.$j().get_typeOfFormatContainer()){case'unitContainer':case'tab':{nk(this.$j().get_label());this.$7(this.get_containerTemplate().get_containerItems());break}case'formatSection':{nk(this.get_viewModel().get_name());this.$7(this.get_containerTemplate().get_containerItems());break}case'collapsibleSection':{this.$h();break}default:{this.$7(this.get_containerTemplate().get_containerItems());break}}if(this.get_canHaveDirtyDot()){this.get_containerTemplate().get_dirtyDot().toggle(this.$j().get_isChanged())}},$h:function(){if(this.get_viewModel().get_isCollapsed()){this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_expandSection());tab.MiscUtil.dispose(this.$k);this.get_containerTemplate().get_containerItems().detach();this.get_containerTemplate().get_collapseSection().detach()}else{this.get_containerTemplate().get_expandSection().detach();this.$7(this.get_containerTemplate().get_containerItems());this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_containerItems());this.get_containerTemplate().domRoot.append(this.get_containerTemplate().get_collapseSection())}this.$g()},$g:function(){if(!ss.staticEquals(this.$4$1,null)){this.$4$1()}}});var gj=global.tab.FormatContainerViewModel=ss.mkType(a,'tab.FormatContainerViewModel',function(){this.itemViewModelList=[];this.shouldUpdateViewModelList=true;this.$3$1=null;this.$3$2=false;this.$3$3=null;gp.call(this)},{add_updated:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_updated:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_childViewModels:function(){return this.itemViewModelList},get_containerModel:function(){return this.get_model()},get_name:function(){return this.get_containerModel().get_name()},get_pickerType:function(){return this.get_containerModel().get_pickerType()},get_isCollapsed:function(){return this.$3$2},set_isCollapsed:function(nk){this.$3$2=nk},get_previewProperties:function(){return this.get_model().asFormatContainer().get_previewProperties()},get_viewType:function(){return gg},get_viewModel:function(){return this},get_popupViewModel:function(){return this.$3$3},set_popupViewModel:function(nk){this.$3$3=nk},$1:function(){tab.MiscUtil.dispose(this.get_childViewModels())},$2:function(){if(ss.isNullOrUndefined(this.get_containerModel())||ss.isNullOrUndefined(this.get_containerModel().get_items())){return}if(this.get_childViewModels().length===this.get_containerModel().get_items().length){for(var nk=0;nk<this.get_childViewModels().length;nk++){this.get_childViewModels()[nk].update(this.get_containerModel().get_items()[nk])}}else{this.$1();ss.clear(this.get_childViewModels());this.$0()}this.raiseUpdated()},$0:function(){var nk=this.get_containerModel().get_items();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.get_childViewModels().push(gp.createFromModel(nm))}},sendClear:function(){if(ss.isValue(this.get_containerModel().get_clearCommand())){tab.CommandUtils.executeSimpleCommand(this.get_containerModel().get_clearCommand(),'immediately')}},raiseUpdated:function(){this.raiseActionEvent(this.$3$1)},update:function(nk){gp.prototype.update.call(this,nk);if(this.shouldUpdateViewModelList){this.$2()}else{this.updatePreview();if(ss.isValue(this.get_popupViewModel())){var nl=new gj;nl.update(this.get_containerModel());this.get_popupViewModel().set_content(nl)}}},dispose:function(){this.$1();tab.MiscUtil.dispose$1(this.get_popupViewModel());spiff.BaseViewModel.prototype.dispose.call(this)},expandContainer:function(){this.set_isCollapsed(false);this.raiseUpdated()},collapseContainer:function(){this.set_isCollapsed(true);this.raiseUpdated()},pickerClicked:function(nk){var nl=new gj;nl.update(this.get_containerModel());this.set_popupViewModel(spiff.UberPopupViewModel.createForContent$1(nl,nk,null,true));this.get_popupViewModel().options=new spiff.UberPopupShowOptions.$ctor1(0,0,0,false,false,false,null,null,false,0,null,987,true);this.get_popupViewModel().show()},updatePreview:function(){this.raiseUpdated()},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){}},{createContainerFromModel:function(nk,nl){var nm=new gj;if(tab.FormatItemExtensions.hasPreview(nk.get_typeOfFormatContainer())){nm.shouldUpdateViewModelList=false}if(nk.get_isCollapsibleSection()){var nn=nl;if(ss.isNullOrUndefined(nn)){nn=nk.get_isCollapsedByDefault()}nm.set_isCollapsed(nn)}nm.update(nk);return nm}});var gk=global.tab.FormatControlTemplate=ss.mkType(a,'tab.FormatControlTemplate',function(){this.$1=null;gn.call(this);this.domRoot.addClass('tabAuthFormatControl');this.domRoot.append($(ss.formatString("<div class='{0}'></div>",'tabAuthFormatControlHeader')));this.$1=this.getElementBySelector('.'+'tabAuthFormatControlHeader')},{get_controlHeader:function(){return this.$1}});var gl=global.tab.FormatControlView=ss.mkType(a,'tab.FormatControlView',function(nk){ss.makeGenericType(go,[gm]).call(this,nk,new gk);this.get_template().domRoot.addClass(ss.formatString('{0}_{1}','tabAuthFormatControl',nk.get_widgetKey()))},{get_controlTemplate:function(){return this.get_template()},addToDom:function(nk){this.$7();nk.append(this.get_template().domRoot)},$7:function(){var nk=this.get_viewModel().get_innerViewModel();if(ss.isInstanceOfType(nk,spiff.ComboBoxViewModel)){tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[nk]).addToDom(this.get_template().domRoot)}else if(ss.isInstanceOfType(nk,ga)){var nl=tab.ObjectRegistry.newView(dn).call(null,[nk]);this.disposables.add$1(nl);nl.addToDom(this.get_template().domRoot)}else if(ss.isInstanceOfType(nk,spiff.ToggleButtonViewModel)){var nm=$('<div></div>').addClass('tabAuthFormatToggleButton');switch(nk.get_data()['widgetKey']){case'bold':{nm.addClass('tabAuthFontBoldButton');break}case'italics':{nm.addClass('tabAuthFontItalicsButton');break}case'underline':{nm.addClass('tabAuthFontUnderlineButton');break}}var nn=spiff.ToggleButton.createButton(nm,'tabAuthToggleSelected',nk);this.disposables.add$1(nn);nn.addToDom(this.get_template().domRoot)}}});var gm=global.tab.FormatControlViewModel=ss.mkType(a,'tab.FormatControlViewModel',function(){this.$3$1=null;gp.call(this)},{get_controlModel:function(){return this.get_model()},get_widgetKey:function(){return this.get_controlModel().get_widgetKey()},get_innerViewModel:function(){return this.$3$1},set_innerViewModel:function(nk){this.$3$1=nk},dispose:function(){tab.MiscUtil.dispose$1(this.get_innerViewModel());spiff.BaseViewModel.prototype.dispose.call(this)},$1:function(){switch(this.get_controlModel().get_typeOfFormatControl()){case'numeric-control':{return this.$2()}case'text-control':{return this.$4()}case'color-control':{return this.$0()}case'toggle-control':{return this.$5()}case'selector-control':{return this.$3()}}return null},$2:function(){var nk;switch(this.get_widgetKey()){case'fontSize':{nk=this.$7(this.get_controlModel());break}case'lineSize':{nk=this.$9(this.get_controlModel());break}default:{nk=spiff.ComboBoxViewModel.newUnificationComboBoxViewModel();break}}if(ss.isValue(this.get_controlModel().get_formatCommand())){var nl=ss.mkdel(this,function(nm){var nn=new tab.CommandBuilder(this.get_controlModel().get_simpleCommand());nn.toCommandAction$2(spiff.ComboBoxItem).call(nn,'valueInt',function(no){return no.get_data()},'immediately',null)(nm)});nk.add_selectedItemChanged(nl);this.disposables.add$1(new tab.CallOnDispose(function(){nk.remove_selectedItemChanged(nl);nk.dispose()}))}else{this.disposables.add$1(new tab.CallOnDispose(function(){nk.dispose()}))}return nk},$4:function(){var nk;switch(this.get_widgetKey()){case'fontFamily':{nk=this.$6(this.get_controlModel());break}default:{nk=spiff.ComboBoxViewModel.newUnificationComboBoxViewModel();break}}var nl=ss.mkdel(this,function(nm){var nn=new tab.CommandBuilder(this.get_controlModel().get_simpleCommand());nn.toCommandAction$2(spiff.ComboBoxItem).call(nn,'valueString',function(no){return no.get_data()},'immediately',null)(nm)});nk.add_selectedItemChanged(nl);this.disposables.add$1(new tab.CallOnDispose(function(){nk.remove_selectedItemChanged(nl);nk.dispose()}));return nk},$5:function(){var nk=ss.mkdel(this,function(){tab.ServerCommands.executeServerCommand(this.get_controlModel().get_simpleCommand(),'immediately',null,null)});var nl=new spiff.ToggleButtonViewModel(nk,this.get_controlModel().get_toggleValue());nl.get_data()['widgetKey']=this.get_widgetKey();return nl},$3:function(){var nk;switch(this.get_widgetKey()){case'lineVisibility':{nk=this.$a(this.get_controlModel(),gm.$7);break}case'dividerVisibility':{nk=this.$a(this.get_controlModel(),gm.$3);break}case'linePattern':{nk=this.$8(this.get_controlModel());break}default:{nk=spiff.ComboBoxViewModel.newUnificationComboBoxViewModel();break}}if(ss.isValue(this.get_controlModel().get_formatCommand())){var nl=ss.mkdel(this,function(nm){var nn=new tab.CommandBuilder(this.get_controlModel().get_simpleCommand());nn.toCommandAction$2(spiff.ComboBoxItem).call(nn,'valueString',function(no){return no.get_data()},'immediately',null)(nm)});nk.add_selectedItemChanged(nl);this.disposables.add$1(new tab.CallOnDispose(function(){nk.remove_selectedItemChanged(nl);nk.dispose()}))}else{this.disposables.add$1(new tab.CallOnDispose(function(){nk.dispose()}))}return nk},$0:function(){var nk=this.get_model().pm;var nl=new ga(nk.color,nk.hasOpacity,nk.isEnabled);var nm=ss.mkdel(this,function(nn){var no=new tab.CommandBuilder(this.get_controlModel().get_simpleCommand());no.toCommandAction$2(tab.ColorModel).call(no,'color',function(np){return np.toRgba255()},'immediately',null)(nn)});nl.set_updateCommand(ss.delegateCombine(nl.get_updateCommand(),nm));this.disposables.add$1(new tab.CallOnDispose(function(){nl.set_updateCommand(ss.delegateRemove(nl.get_updateCommand(),nm));nl.dispose()}));return nl},$7:function(nk){var nl=nk.get_numericValue();var nm=false;var nn=[];for(var no=0;no<tab.FormattingUtil.fontSizes.length;no++){var np=tab.FormattingUtil.fontSizes[no];if(np===nl){nm=true}if(!nm&&np>nl){nn.push(gm.$1(nl.toString()));nm=true}nn.push(gm.$1(np.toString()))}if(!nm){nn.push(gm.$1(nl.toString()))}var nq=gm.$0(nn,nl.toString(),nk.get_isEnabled());nq.set_sizing(1);return nq},$6:function(nk){var nl=nk.get_textValue();var nm=false;var nn=[];var no=tab.FormattingUtil.compatibleFontNameList();for(var np=0;np<no.length;np++){var nq=no[np];nn.push(gm.$1(nq));if(ss.referenceEquals(nq,nl)){nm=true}}if(!nm){nn.push(gm.$1(nl))}var nr=gm.$0(nn,nl,nk.get_isEnabled());nr.set_theme(3);return nr},$a:function(nk,nl){var nm=nk.get_selectorValue();var nn=[];for(var no=0;no<nl.length;no+=2){nn.push(new spiff.ComboBoxItem(null,nl[no+1],nl[no],null,null))}var np=gm.$0(nn,nm,nk.get_isEnabled());np.set_theme(3);return np},$8:function(nk){var nl=nk.get_selectorValue();var nm=[];for(var nn=0;nn<gm.$5.length;nn++){var no=gm.$5[nn];nm.push(new spiff.ComboBoxItem('linepattern-'+no.toString()+'-small',null,no.toString(),null,gm.$4[no]))}var np=gm.$0(nm,nl,nk.get_isEnabled());return np},$9:function(nk){var nl=nk.get_numericValue();var nm=[];for(var nn=0;nn<gm.$6.length;nn++){var no=gm.$6[nn];nm.push(new spiff.ComboBoxItem('linesize-'+no.toString(),tab.Strings.AuthLineSizePixels(no),no.toString(),no.toString(),null))}var np=gm.$0(nm,nl.toString(),nk.get_isEnabled());np.set_additionalMenuClass('tabLinePickerMenu');return np},update:function(nk){gp.prototype.update.call(this,nk);this.set_innerViewModel(this.$1())}},{$0:function(nk,nl,nm){var nn=spiff.ComboBoxViewModel.newUnificationComboBoxViewModel();for(var no=0;no<nk.length;no++){var np=nk[no];nn.addItem(np);if(ss.equals(np.get_data(),nl)){nn.set_selectedItem(nn.get_items()[nn.get_items().length-1])}}nn.set_allowSetToSameValue(true);nn.set_enabled(nm);return nn},$1:function(nk){return new spiff.ComboBoxItem(null,nk,nk,null,null)}});var gn=global.tab.FormatItemTemplate=ss.mkType(a,'tab.FormatItemTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthFormatItem'></div>"))});var go=global.tab.FormatItemView$1=ss.mkType(a,'tab.FormatItemView$1',function(nk){var nl=ss.registerGenericClassInstance(go,[nk],function(nm,nn){ss.makeGenericType(spiff.BaseView$1,[nk]).call(this,nm,nn);this.get_template().domRoot.attr('id','tabFormatItem_'+nm.get_model().get_widgetIdentifier())},null,null,function(){return ss.makeGenericType(spiff.BaseView$1,[nk])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[nk]),ss.IDisposable,tab.IAppendableView]});return nl});ss.initGenericClass(go,1);var gp=global.tab.FormatItemViewModel=ss.mkType(a,'tab.FormatItemViewModel',function(){this.$2$1=null;spiff.BaseViewModel.call(this)},{get_model:function(){return this.$2$1},set_model:function(nk){this.$2$1=nk},get_typeOfFormatItem:function(){return this.get_model().get_typeOfFormatItem()},createView:function(){switch(this.get_model().get_typeOfFormatItem()){case'formatContainer':{return tab.ObjectRegistry.newView(gi).call(null,[this])}case'formatControl':{return tab.ObjectRegistry.newView(gl).call(null,[this])}}return null},update:function(nk){this.set_model(nk)},asContainerViewModel:function(){return this}},{createFromModel:function(nk){switch(nk.get_typeOfFormatItem()){case'formatContainer':{return gj.createContainerFromModel(nk.asFormatContainer(),null)}case'formatControl':{var nl=new gm;nl.update(nk.asFormatControl());return nl}}return null}});var gq=global.tab.FormatPaneTemplate=ss.mkType(a,'tab.FormatPaneTemplate',function(){this.title=null;this.paneBodyContainer=null;this.paneBody=null;this.closer=null;this.footer=null;spiff.Template.call(this,$("\n            <div class='tabAuthFormatPane'>\n                <div class='tabAuthFormatPaneTitleContainer'>\n                    <div class='tabAuthFormatPaneTitle'></div>\n                </div>\n                <div class='tabAuthFormatPaneCloser'></div>\n                <div class='tabAuthFormatPaneBodyContainer'><div class='tabAuthFormatPaneBody'></div></div>\n                <div class='tabAuthFormatPaneFooter'></div>\n            </div>"));this.title=this.getElementBySelector('.tabAuthFormatPaneTitle');this.paneBodyContainer=this.getElementBySelector('.tabAuthFormatPaneBodyContainer');this.paneBody=this.getElementBySelector('.tabAuthFormatPaneBody');this.closer=this.getElementBySelector('.tabAuthFormatPaneCloser');this.footer=this.getElementBySelector('.tabAuthFormatPaneFooter')});var gr=global.tab.FormatPaneView=ss.mkType(a,'tab.FormatPaneView',function(nk){this.$c=null;ss.makeGenericType(spiff.BaseView$1,[gs]).call(this,nk,new gq);this.$c=[];this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.MiscUtil.dispose(this.$c)})));var nl=spiff.TableauClickHandler.targetAndClick(this.get_dom().closer[0],ss.mkdel(this,this.$8));this.disposables.add$1(nl);this.get_viewModel().add_shown(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_shown(ss.mkdel(this,this.$a))})));this.get_viewModel().add_hidden(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_hidden(ss.mkdel(this,this.$9))})));this.$a()},{get_dom:function(){return this.get_template()},addToDom:function(nk){spiff.Widget.prototype.addToDom.call(this,nk);var nl=this.get_viewModel().get_title();this.get_dom().title.text(nl);this.get_dom().title.get(0).title=nl;tab.MiscUtil.dispose(this.$c);ss.clear(this.$c);var nm=this.get_viewModel().get_formatViewModels();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];switch(no.get_typeOfFormatItem()){case'formatContainer':{var np=tab.ObjectRegistry.newView(gi).call(null,[no]);this.$c.push(np);np.addToDom(this.get_dom().paneBody);break}case'formatControl':{var nq=tab.ObjectRegistry.newView(gl).call(null,[no]);this.$c.push(nq);nq.addToDom(this.get_dom().paneBody);break}}}this.$b()},$b:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nl){this.$7()}),buttonType:3,testId:gr.clearButtonClass,key:gr.clearButtonClass,children:tab.Strings.AuthWorkbookFormatPaneClear,density:'high',style:{width:'100%',textOverflow:'ellipsis',overflow:'hidden',whiteSpace:'nowrap'},title:tab.Strings.AuthWorkbookFormatPaneClearTooltip});ReactDOM.render(nk,this.get_dom().footer.get(0))},$9:function(){$(document.body).removeClass(gr.formatPaneShownClass);tab.MiscUtil.dispose(this.$c);ss.clear(this.$c);this.get_dom().domRoot.detach()},$a:function(){if(this.$c.length!==this.get_viewModel().get_formatViewModels().length&&ss.isValue(bY.get_instance())){bY.get_instance().get_leftArea().get_floatingLeftPanel().addFloatingPanelToDom(this)}$(document.body).addClass(gr.formatPaneShownClass)},$8:function(nk){this.get_viewModel().hide()},$7:function(){tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'clear-workbook-formatting'},null),'immediately',null,null)}});var gs=global.tab.FormatPaneViewModel=ss.mkType(a,'tab.FormatPaneViewModel',function(nk){this.$5=[];this.$3$1=null;this.$3$2=null;this.$3$3=null;gp.call(this);this.$4(nk);nk.add_updated(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){nk.remove_updated(ss.mkdel(this,this.$3))})))},{add_shown:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_shown:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},add_hidden:function(nk){this.$3$2=ss.delegateCombine(this.$3$2,nk)},remove_hidden:function(nk){this.$3$2=ss.delegateRemove(this.$3$2,nk)},get_title:function(){return this.$3$3},$0:function(nk){this.$3$3=nk},get_id:function(){return'format'},get_contentViewType:function(){return gr},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthFormat'},get_formatViewModels:function(){return this.$5},hide:function(){tab.FormatCommands.hideFormatPane()},$3:function(){if(this.get_model().asFormatContainer().get_isVisible()){this.raiseActionEvent(this.$3$1)}else{this.raiseActionEvent(this.$3$2)}},$2:function(){tab.MiscUtil.dispose(this.$5)},update:function(nk){this.$4(nk);gp.prototype.update.call(this,nk);this.$0(nk.asFormatContainer().get_name());var nl=nk.asFormatContainer().get_subsections();if(this.$5.length===nl.length){for(var nm=0;nm<nl.length;nm++){this.$5[nm].update(nl[nm])}}else{this.$1(nl)}},$1:function(nk){this.$2();ss.clear(this.$5);for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$5.push(gp.createFromModel(nm))}},dispose:function(){this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},$4:function(nk){if(ss.isNullOrUndefined(nk)||!nk.get_isFormatSection()&&!nk.get_isFormatPane()){throw new ss.Exception('FormatPane is supposed to be a format pane or a format section, but it is not')}}},{create:function(nk){var nl=new gs(nk);nl.update(nk);return nl}});var gt=global.tab.FormattingPaneComponent=ss.mkType(a,'tab.FormattingPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){gt.$2++;var nk={};nk['openTime']=(new Date).getTime();nk['openCount']=gt.$2;var nl=nk;var nm=new tab.WidgetPluginContainerProps;nm.moduleName=gt.$1;var nn={};nn['presModel']=this.props.formatPanePresModel;nn['originIsWeb']=true;nn['fontList']=function(){tab.FormattingUtil.compatibleFontNameList()};nn['telemetry']=nl;nn['isAnimated']=tab.FeatureFlags.isEnabled('AnimateFormattingPane');nm.initialProps=nn;return React.createElement(tab.WidgetPluginContainer,nm)}});var gu=global.tab.FormattingPaneProps=ss.mkType(a,'tab.FormattingPaneProps',function(){this.formatPanePresModel=null});var gv=global.tab.FormattingPaneState=ss.mkType(a,'tab.FormattingPaneState',function(){this.formatPanePresModel=null});var gw=global.tab.FormattingSidePaneProxy=ss.mkType(a,'tab.FormattingSidePaneProxy',function(){},null,{get_isShown:function(){return ss.isValue(gw.$1)&&gw.$1.isShown()},handleWebContextChange:function(nk){if(nk==='workbook'||gw.get_isShown()&&tsConfig.current_sheet_type==='worksheet'){if(nk==='workbook'){window.sessionStorage.setItem('format-update-context','toolbarButton')}else{window.sessionStorage.setItem('format-update-context','leftClickOnElement')}var nl=new tab.OpenFormattingSidePaneCmd;nl.c['formattingCtx']=nk;nl.set_uiBlocking('none');var nm=nl;nm.invoke()}},openCallback:function(nk,nl){var nm=new gu;nm.formatPanePresModel=nk;var nn=React.createElement(gt,nm);ReactDOM.render(nn,nl)},updateCallback:function(nk,nl){},closeCallback:function(){}});var gx=global.tab.FormatWorkbookRedirectHandler=ss.mkType(a,'tab.FormatWorkbookRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();tab.FormatCommands.showFormatPane();nl.resolve();return nl.promise()}});var gy=global.tab.FullDateBuilder=ss.mkType(a,'tab.FullDateBuilder',function(nk){this.$1$1=false;this.set_isDraft(nk)},{get_isDraft:function(){return this.$1$1},set_isDraft:function(nk){this.$1$1=nk},buildDisplayTextForDate:function(nk,nl){if(ss.staticEquals(nk,null)){return''}var nm=new Date(Date.UTC(nk.getFullYear(),nk.getMonth(),nk.getDate(),nk.getHours(),nk.getMinutes(),nk.getSeconds(),nk.getMilliseconds()));var nn=tableau.format.formatJsDateTime(nm,nl,2,'t');return(this.get_isDraft()?tab.Strings.AutoSaveEditedAt(nn):tab.Strings.AutoSavePublishedAt(nn))}});var gz=global.tab.FunctionFlyoutControlTemplate=ss.mkType(a,'tab.FunctionFlyoutControlTemplate',function(){spiff.Template.call(this,$("\n<div class='tabCalcEditorFuncFlyoutControl'>\n    <div class='tabCalcEditorFuncFlyoutExpander'></div>\n    <div class='tabCalcEditorFuncFlyoutCollapser'></div>\n    <div class='tabCalcEditorFuncFlyoutControlHit'></div>\n</div>"))});var gA=global.tab.GeneralEdgeRender=ss.mkType(a,'tab.GeneralEdgeRender',function(nk,nl,nm,nn){mQ.call(this);this.chromeRect=nk;this.className=nl;this.side=nm;this.zindex=nn},{render:function(){return this.renderEdge(null)}});var gB=global.tab.GlassDropTarget=ss.mkType(a,'tab.GlassDropTarget',function(nk){spiff.Glass.call(this,nk,false)},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){return this},dragExit:function(nk){},acceptDrop:function(nk){var nl=ss.safeCast(nk.get_payload(),P);var nm=$.Deferred();var nn=ss.isValue(nl);nm.resolve(nn);if(nn){nl.executeDefaultAddCommand()}return nm},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy}});var gC=global.tab.GroupingComponent=ss.mkType(a,'tab.GroupingComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){var nk=(this.props.enableGroupButton?'enabled ':'disabled ');var nl=spiff.DOMElements.div({className:'tab-LayoutGroupIcon'});var nm=React.createElement(SharedWidgets.SingleSelectDropdown,{testId:'LayoutGroupButton',type:3,disabled:!this.props.enableGroupButton,children:nl,'aria-labelledby':'LayoutGroupControl',list:this.$0(),onChange:ss.mkdel(this,function(nn){this.props.selectGroupAction(nn)}),className:nk});return spiff.DOMElements.div({className:'tab-LayoutGroupSection'},[nm,spiff.DOMElements.div({className:nk+'tab-LayoutGroupTitle',id:'LayoutGroupControl'},tab.Strings.DashboardLayoutGroup)])},$0:function(){return React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.props.groupMenuItems),testId:'GroupMenu'})}},{create:function(nk){return React.createElement(gC,nk)}});var gD=global.tab.GroupingDropDownListItemComponent=ss.mkType(a,'tab.GroupingDropDownListItemComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){return spiff.DOMElements.div({className:'groupMenuDropDownItem'},spiff.DOMElements.span({className:'groupMenuDropDownItemName'},this.props.name),spiff.DOMElements.div({className:'groupMenuDropDownItemDescription'},this.props.description))}},{create:function(nk){return React.createElement(gD,nk)}});var gE=global.tab.HeatmapColorOptionView=ss.mkType(a,'tab.HeatmapColorOptionView',function(nk){this.$h=null;ss.makeGenericType(spiff.BaseView$1,[gF]).call(this,nk,new gG);this.$h=this.get_template();this.get_viewModel().add_heatmapSettingsUpdated(ss.mkdel(this,this.$g));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_heatmapSettingsUpdated(ss.mkdel(this,this.$g))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$h.heatmapColorLabel.text(tab.Strings.TabAuthColorEditLabel);this.$d();this.disposables.add(ss.mkdel(this,this.$f));this.$h.heatmapIntensityLabel.text(tab.Strings.AuthHeatmapIntensityLabel);this.$c();this.disposables.add(ss.mkdel(this,this.$e));var nk=this.$a();this.disposables.add$1(nk);nk.addToDom(this.$h.transparencyControlContainer);var nl=this.$7();this.disposables.add$1(nl);nl.addToDom(this.$h.colorEffectsContainer)},$a:function(){return tab.ObjectRegistry.newView$1(dr).call(null,dr,[this.get_viewModel().get_colorTransparencyControlViewModel()])},$7:function(){return tab.ObjectRegistry.newView$1(cV).call(null,cV,[this.get_viewModel().get_colorOptionEffectsViewModel()])},$g:function(){this.$d();this.$c()},$c:function(){var nk=ss.round(tab.DoubleUtil.multiplyBy100(this.get_viewModel().get_intensity()));var nl=this.get_viewModel();var nm=React.createElement(spiff.HorizontalSliderComponent,{minValue:0,maxValue:100,initialValue:nk,disabled:false,width:100,onValueChanged:ss.mkdel(nl,nl.onIntensitySliderChange),showValueTextBox:true,showPercentageSign:true,tabIndex:0});ReactDOM.render(nm,this.$h.heatmapIntensityHolder.get(0))},$e:function(){ReactDOM.unmountComponentAtNode(this.$h.heatmapIntensityHolder.get(0))},$d:function(){var nk=React.createElement(spiff.DropdownComponent,{styleClass:'tab-ColorPaletteDropdown',resetSelector:true,getDesiredHeight:function(nl){return 350},getMinimumWidth:function(nl){return 230},renderButton:ss.mkdel(this,this.$8)},this.$9());ReactDOM.render(nk,this.$h.heatmapColorHolder.get(0))},$f:function(){ReactDOM.unmountComponentAtNode(this.$h.heatmapColorHolder.get(0))},$8:function(){var nk='';var nl='';if(ss.isValue(this.get_viewModel().get_selectedPalette())){nk='tabAuthPalette-small-'+this.get_viewModel().get_selectedPalette().colorPaletteId;nl=this.get_viewModel().get_selectedPalette().colorPaletteName}return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:nk,selectionText:nl})},$9:function(){var nk=new Object;nk.borders=false;nk.allOption=false;nk.items=this.get_viewModel().getAllPalettes().map(ss.mkdel(this,function(nm){var nn=new spiff.SelectableButtonGroupItem;nn.label=nm.colorPaletteName;nn.getCustomContentBefore=ss.mkdel(this,function(){return this.$b(nm)});return nn}));nk.selection=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,this.get_viewModel().getAllPalettes(),ss.mkdel(this,function(nm){return ss.referenceEquals(nm.colorPaletteId,this.get_viewModel().get_selectedPalette().colorPaletteId)}));nk.showApplyAndCancelButtons=false;nk.onSelectionChanged=ss.mkdel(this,function(nm){var nn=null;nm.mapSelected(Object).call(nm,ss.mkdel(this,function(no){nn=this.get_viewModel().getAllPalettes()[no];return nn}));this.get_viewModel().onSelectedPaletteChange((ss.isValue(nn)?nn.colorPaletteId.toString():''))});var nl=nk;return React.createElement(spiff.SelectableButtonGroupComponent,nl)},$b:function(nk){return[(nk.isCustomPalette?dk.renderCustomPaletteIcon(nk,false):spiff.DOMElements.div({key:nk.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+nk.colorPaletteId}))]}});var gF=global.tab.HeatmapColorOptionViewModel=ss.mkType(a,'tab.HeatmapColorOptionViewModel',function(nk){this.$4=null;this.$3=null;this.$2=null;this.$1=[];this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=nk;this.$3=new ds(this.$4);this.$2=new cW(this.$4);this.$4.add_newMarksCardTabEncoding(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$0))})));tab.PaneClientCommands.getHeatmapColorPalettes(this.$4,ss.mkdel(this,function(nl){this.$1=nl;this.$2$1()}))},{add_heatmapSettingsUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_heatmapSettingsUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_colorTransparencyControlViewModel:function(){return this.$3},get_colorOptionEffectsViewModel:function(){return this.$2},get_intensity:function(){return this.$4.get_heatmapSettingsPresModel().densityIntensityPercentage},get_selectedPalette:function(){if(ss.isNullOrUndefined(this.$1)||this.$1.length<=0){return null}var nk=_.find(this.$1,ss.mkdel(this,function(nl){return ss.referenceEquals(nl.colorPaletteId,this.$4.get_heatmapSettingsPresModel().densityColorPalette)}));if(ss.isValue(nk)){return nk}nk=_.find(this.$1,function(nl){return nl.colorPaletteName==='Automatic'});if(ss.isValue(nk)){return nk}return this.$1[0]},get_viewType:function(){return gE},get_viewModel:function(){return this},getAllPalettes:function(){return(ss.isValue(this.$1)?this.$1:[])},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();this.$2.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},$0:function(){this.$2$1()},onIntensitySliderChange:function(nk){var nl=nk/100;tab.PaneClientCommands.setDensityIntensity(this.$4,nl)},onSelectedPaletteChange:function(nk){tab.PaneClientCommands.setDensityColorEncoding(this.$4,nk)},updateUberPopupViewModel:function(nk){nk.options.additionalClassNames=['tabAuthHeatmapColorOptionUberPopup']}});var gG=global.tab.HeatmapColorOptionViewTemplate=ss.mkType(a,'tab.HeatmapColorOptionViewTemplate',function(){this.heatmapColorHolder=null;this.heatmapColorLabel=null;this.heatmapIntensityHolder=null;this.heatmapIntensityLabel=null;this.transparencyControlContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthHeatmapColorOptionContent'>\n            <div class='tabAuthHeatmapEffectsContainer'>\n              <div class='tabAuthHeatmapColorControl'>\n                <div class='tabAuthHeatmapColorLabel'></div>\n                <div class='tabAuthHeatmapColorHolder'></div>\n              </div>\n              <div class='tabAuthHeatmapIntensityControl'>\n                <div class='tabAuthHeatmapIntensityLabel'></div>\n                <div class='tabAuthHeatmapIntensityHolder'></div>\n              </div>\n            </div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.heatmapColorLabel=this.getElementBySelector('.tabAuthHeatmapColorLabel');this.heatmapColorHolder=this.getElementBySelector('.tabAuthHeatmapColorHolder');this.heatmapIntensityLabel=this.getElementBySelector('.tabAuthHeatmapIntensityLabel');this.heatmapIntensityHolder=this.getElementBySelector('.tabAuthHeatmapIntensityHolder');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var gH=global.tab.HideZoneWithPreviewCommand=ss.mkType(a,'tab.HideZoneWithPreviewCommand',function(){tab.HideZoneWithPreviewCmd.call(this)},{do$1:function(){tab.DashboardZoneCommands.hideZone(this.c['zoneId'])}});var gI=global.tab.IAccordionContent=ss.mkType(a,'tab.IAccordionContent');var gJ=global.tab.ICardContent=ss.mkType(a,'tab.ICardContent');var gK=global.tab.IColorOptionViewModel=ss.mkType(a,'tab.IColorOptionViewModel');var gL=global.tab.IColorPickerViewModel=ss.mkType(a,'tab.IColorPickerViewModel');var gM=global.tab.IColorTransparencyControlViewModel=ss.mkType(a,'tab.IColorTransparencyControlViewModel');var gN=global.tab.IconUtils=ss.mkType(a,'tab.IconUtils',null,null,{getPrimitiveTypeIcon:function(nk){var nl=nk.primitiveType;return'tabAuthPrimitive-'+nl},getFieldIcon$1:function(nk){if(!ss.isValue(nk.fieldIconResource)){return''}return gN.getFieldIcon(nk.fieldIconResource)},getFieldIcon:function(nk){var nl=new ss.StringBuilder('tab-schema-');nl.append(nk);nl.append('-icon');return nl.toString()},getDataSourceIcon:function(nk,nl){if(ss.isNullOrUndefined(nk)){return''}var nm=(ss.keyExists(nk,nl.get_name())?nk[nl.get_name()]:null);if(!ss.isValue(nm)){return''}var nn=new ss.StringBuilder('tab-schema-');nn.append(nm);nn.append('-icon');return nn.toString()},getPillEncodingTypeIcon:function(nk){if(ss.isNullOrUndefined(nk.get_encodingType())){return null}return gN.getEncodingTypeIcon(nk.get_encodingType())},getEncodingTypeIcon:function(nk){switch(nk){case'color-encoding':case'size-encoding':case'text-encoding':case'shape-encoding':case'sort-encoding':case'wedge-size-encoding':case'level-of-detail-encoding':case'tooltip-encoding':{return'tabAuth-'+nk}default:{return'tabAuth-lod-encoding'}}},getPillFilterTypeIcon:function(nk){if(ss.isNullOrUndefined(nk.get_filterType())){return null}switch(nk.get_filterType()){case'global-filter':{return'tabAuthPillGlobalFilter'}case'shared-filter':{return'tabAuthPillSharedFilter'}case'slice-filter':{return'tabAuthPillSliceFilter'}case'mapped-global-source-filter':{return'tabAuthPillMappedGlobalSourceFilter'}case'mapped-global-target-filter':{return'tabAuthPillMappedGlobalTargetFilter'}case'mapped-shared-source-filter':{return'tabAuthPillMappedSharedSourceFilter'}case'mapped-shared-target-filter':{return'tabAuthPillMappedSharedTargetFilter'}default:{return null}}},getPillIcons:function(nk){var nl=nk.pm.shelfIconTypes;if(ss.isNullOrUndefined(nl)||nl.length===0){return[]}var nm=[];for(var nn=0;nn<nl.length;nn++){var no=nl[nn];switch(no){case'secondary-datasource':{nm.push('tabAuthPillIconSecondary');break}case'table-calc':{nm.push('tabAuthPillIconTableCalc');break}case'table-calc-secondary':{nm.push('tabAuthPillIconTableCalcSecondary');break}case'sort-asc':{nm.push('tabAuthPillIconSortAscending');break}case'sort-desc':{nm.push('tabAuthPillIconSortDescending');break}case'sort-alphabetic-asc':{nm.push('tabAuthPillIconSortAlphabeticAscending');break}case'sort-alphabetic-desc':{nm.push('tabAuthPillIconSortAlphabeticDescending');break}case'forecast':{nm.push('tabAuthPillIconForecast');break}case'remote':{break}}if(no.toString()==='group'){nm.push('tabAuthPillIconSet')}}return nm},getMarksCardTabIcon:function(nk){return((ss.isValue(nk.get_currentPrimitiveType())&&nk.get_currentPrimitiveType().primitiveType==='multiple')?'':gN.getPrimitiveTypeIcon(nk.get_currentPrimitiveType()))}});var gO=global.tab.IDashboardZoneObjectsProvider=ss.mkType(a,'tab.IDashboardZoneObjectsProvider');var gP=global.tab.IDataSourceNeedsUpdate=ss.mkType(a,'tab.IDataSourceNeedsUpdate');var gQ=global.tab.IDateModifiedBuilder=ss.mkType(a,'tab.IDateModifiedBuilder');var gR=global.tab.IFloatingLeftPanel=ss.mkType(a,'tab.IFloatingLeftPanel');var gS=global.tab.IHasScrollableContentHeight=ss.mkType(a,'tab.IHasScrollableContentHeight');var gT=global.tab.InstantAnalyticsViewModel=ss.mkType(a,'tab.InstantAnalyticsViewModel',function(nk){this.$3=false;this.$4=false;this.$5=null;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$5=nk},{add_instantAnalyticsUpdated:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_instantAnalyticsUpdated:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},get_instantAnalyticsEnabled:function(){return this.$3},get_isInstantAnalyticsAllowed:function(){return this.$4},createUpdatedProps:function(){return{label:this.$5,checked:this.$3,handleChange:ss.mkdel(this,this.setIfInstantAnalyticsEnabled),testId:'instant-analytics-checkbox',disabled:!this.get_isInstantAnalyticsAllowed()}},updateFromModel:function(nk,nl){this.$3=nk;this.$4=nl;this.incrementProps()},setIfInstantAnalyticsEnabled:function(nk){this.$3=nk;if(!ss.staticEquals(this.$3$1,null)){this.$3$1(nk)}}});var gU=global.tab.IPaneContentSidebarProvider=ss.mkType(a,'tab.IPaneContentSidebarProvider');var gV=global.tab.IPillStrategy=ss.mkType(a,'tab.IPillStrategy');var gW=global.tab.IReferenceLineDialogTabViewModel=ss.mkType(a,'tab.IReferenceLineDialogTabViewModel');var gX=global.tab.ISheetListActionHandler=ss.mkType(a,'tab.ISheetListActionHandler');var gY=global.tab.ITreeNode$1=ss.mkType(a,'tab.ITreeNode$1',function(nk){var nl=ss.registerGenericInterfaceInstance(gY,[nk],{get_item:null,get_children:null,get_expanded:null,get_key:null});ss.setMetadata(nl,{variance:[1]});return nl});ss.initGenericInterface(gY,1);var gZ=global.tab.IUpdateCommand$1=ss.mkType(a,'tab.IUpdateCommand$1',function(nk){var nl=ss.registerGenericInterfaceInstance(gZ,[nk],{get_updateCommand:null,set_updateCommand:null});return nl});ss.initGenericInterface(gZ,1);var ha=global.tab.JustSavedOrPublishedDateBuilder=ss.mkType(a,'tab.JustSavedOrPublishedDateBuilder',function(nk){this.$1$1=null;this.set_displayMessage((nk?tab.Strings.AutoSaveAllChangesSaved:tab.Strings.AutoSaveJustPublished))},{get_displayMessage:function(){return this.$1$1},set_displayMessage:function(nk){this.$1$1=nk},buildDisplayTextForDate:function(nk,nl){return this.get_displayMessage()}});var hb=global.tab.KeyboardResizePreviewViewModel=ss.mkType(a,'tab.KeyboardResizePreviewViewModel',function(nk,nl){this.$g=null;this.$f=null;this.$h=null;this.$d=null;this.$e=null;this.$c=null;this.$b=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$c=nk;this.$b=nk;this.$f={x:0,y:0}},{createUpdatedProps:function(){return{hasPendingResize:ss.isValue(this.$h),pendingZoneGeometry:this.$g}},resetLocalSize:function(nk){this.$6();this.$7();this.$g=null;if(ss.isValue(nk)&&nk.get_isZoneResizable()){this.$g={l:nk.get_x(),t:nk.get_y(),w:nk.get_width(),h:nk.get_height()}}},updatePendingGeometry:function(nk){if(ss.isValue(nk)&&nk.get_isZoneResizable()&&ss.isNullOrUndefined(this.$g)){this.$g={l:nk.get_x(),t:nk.get_y(),w:nk.get_width(),h:nk.get_height()}}this.incrementProps()},delayMoveZoneCall:function(nk,nl,nm){if(ss.isValue(this.$h)){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(nk,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}if(this.$4(nl,nm,0,0)){nk.updateLocalPropertiesForZonePreview(nl,nm);this.$8(nk)}},delayMoveZonesCall:function(nk,nl,nm){if(ss.isValue(this.$h)&&ss.isValue(nk[0])){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(nk[0],this.$g.l,this.$g.t,this.$g.w,this.$g.h)}this.$3(nl,nm);for(var nn=0;nn<nk.length;nn++){var no=nk[nn];no.set_blockLocalReset(true);no.updateLocalPropertiesForZonePreview(nl,nm)}this.$9(nk)},delayResizeZoneCall:function(nk,nl,nm){if(ss.isValue(this.$d)){this.$6();tab.DashboardZoneCommands.resizeFreeFormZone(nk,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}if(this.$4(0,0,nm,nl)){this.$a(nk)}},$4:function(nk,nl,nm,nn){if(ss.isValue(this.$g)){var no=this.$g.w+nm;var np=this.$g.h+nn;var nq=no>=1&&no<=9999;var nr=np>=1&&np<=9999;var ns=nq&&nr;var nt=this.$g.l+this.$g.w+nk<0;var nu=this.$g.l+nk>this.$c();var nv=nt||nu;var nw=this.$g.t+this.$g.h+nl<0;var nx=this.$g.t+nl>this.$b();var ny=nw||nx;if(ns&&!nv&&!ny){this.$g.w+=nm;this.$g.h+=nn;this.$g.l+=nk;this.$g.t+=nl;return true}}return false},$3:function(nk,nl){this.$f.x+=nk;this.$f.y+=nl},$a:function(nk){this.$7();this.$h=window.setTimeout(ss.mkdel(this,function(){this.$7();this.incrementProps();tab.DashboardZoneCommands.resizeFreeFormZone(nk,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}),1000);this.incrementProps()},$8:function(nk){this.$6();this.$d=window.setTimeout(ss.mkdel(this,function(){this.$6();tab.DashboardZoneCommands.resizeFreeFormZone(nk,this.$g.l,this.$g.t,this.$g.w,this.$g.h)}),1000)},$9:function(nk){var nl=ss.arrayClone(nk);this.$5();this.$e=window.setTimeout(ss.mkdel(this,function(){this.$5();tab.DashboardZoneCommands.moveZones(nl,this.$f,true);this.$f={x:0,y:0}}),1000)},$7:function(){this.$h=tab.MiscUtil.clearTimeout(this.$h)},$6:function(){this.$d=tab.MiscUtil.clearTimeout(this.$d)},$5:function(){this.$e=tab.MiscUtil.clearTimeout(this.$e)}});var hc=global.tab.LaunchAnimationPaneKeyboardShortcut=ss.mkType(a,'tab.LaunchAnimationPaneKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var nk=new Object;nk.controlOrCommand='required';nk.alt='required';return new KeyboardShortcuts.KeyCombo('a',nk)},getCommandId:function(){return{ns:'tabdoc',cmd:'launch-animation-side-pane'}},executeShortcut:function(nk){var nl=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'launch-animation-side-pane'},null);tab.ServerCommands.executeServerCommand(nl,'immediately',null,null)},shouldRequireCommandCheck:function(){return false}});var hd=global.tab.LayerDragInstance=ss.mkType(a,'tab.LayerDragInstance',function(nk,nl,nm,nn){this.indexOfLayerBeingDragged=-1;this.marksSpecificationId=-1;EventUtils.DragInstance.call(this,nk,nl);this.indexOfLayerBeingDragged=nm;this.marksSpecificationId=nn},{get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},dropToNowhereAction:function(){var nk={};nk['worksheet']=tsConfig.current_sheet_name;nk['layerIndex']=this.indexOfLayerBeingDragged;var nl=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'remove-layer'},nk);tab.ServerCommands.executeServerCommand(nl,'none',null,null)}});var he=global.tab.LayerReorderDropTarget=ss.mkType(a,'tab.LayerReorderDropTarget',function(nk){this.$0=null;this.$0=nk},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){var nl=ss.safeCast(nk,hd);if(nl.indexOfLayerBeingDragged!==this.$0.reorderIndex||nl.indexOfLayerBeingDragged!==this.$0.reorderIndex+1){this.$0.set_hovering(true)}return this},dragExit:function(nk){this.$0.set_hovering(false)},acceptDrop:function(nk){this.$0.set_hovering(false);var nl=ss.safeCast(nk,hd);var nm=$.Deferred();var nn=false;var no=nl.indexOfLayerBeingDragged;if(no!==this.$0.reorderIndex||no!==this.$0.reorderIndex+1){var np=((no<this.$0.reorderIndex)?1:0);var nq=this.$0.reorderIndex-np;var nr={};nr['worksheet']=tsConfig.current_sheet_name;nr['paneSpec']=nl.marksSpecificationId;nr['layerIndex']=nq;var ns=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-layer-index'},nr);tab.ServerCommands.executeServerCommand(ns,'none',null,null);this.$0.setLayerIndexClientSideCallback(no+1,nq+1);nn=true}return nm.resolve(nn)},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.move}});var hf=global.tab.LayerReorderDropTargetTemplate=ss.mkType(a,'tab.LayerReorderDropTargetTemplate',function(nk){this.dropTarget=null;this.indicator=null;this.indicatorTop=null;this.indicatorBottom=null;spiff.Template.call(this,$("<div class='layerReorderDropTargetItem'>\n            <div class='layerReorderDropTarget'>\n                <div class='layerReorderDropTargetIndicatorTop'></div>\n                <div class='layerReorderDropTargetIndicator'></div>\n                <div class='layerReorderDropTargetIndicatorBottom'></div>\n            </div>\n        </div>"));this.dropTarget=this.getElementBySelector('.layerReorderDropTarget');this.indicator=this.getElementBySelector('.layerReorderDropTargetIndicator');this.indicatorTop=this.getElementBySelector('.layerReorderDropTargetIndicatorTop');this.indicatorBottom=this.getElementBySelector('.layerReorderDropTargetIndicatorBottom');if(nk>0){this.dropTarget.height(nk+3)}});var hg=global.tab.LayerReorderDropTargetView=ss.mkType(a,'tab.LayerReorderDropTargetView',function(nk,nl){this.$a=null;this.$9=null;this.$8=null;ss.makeGenericType(spiff.BaseView$1,[hh]).call(this,nk,nl);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.$9=nl;this.$a=nk;this.$8=new he(this.$a);EventUtils.DragDropManager.attachDropTarget(this.element,this.$8);this.update()},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[hh]).prototype.dispose.call(this)},$7:function(nk){this.dispose()},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[hh]).prototype.onViewModelPropertyChanged.call(this,nk,nl);switch(nl.get_propertyName()){case'LayerReorderHoverProperty':{this.update();break}}},update:function(){if(!this.$a.get_hovering()){this.$9.indicatorTop.hide();this.$9.indicatorBottom.hide();return}if(this.$a.reorderIndex===0){this.$9.indicatorTop.show();this.$9.indicatorBottom.hide()}else if(this.$a.isTopMostDropTarget){this.$9.indicatorTop.hide();this.$9.indicatorBottom.show()}else{this.$9.indicatorTop.show();this.$9.indicatorBottom.show()}}});var hh=global.tab.LayerReorderDropTargetViewModel=ss.mkType(a,'tab.LayerReorderDropTargetViewModel',function(nk,nl){this.setLayerIndexClientSideCallback=null;this.reorderIndex=0;this.isTopMostDropTarget=false;this.$0=false;spiff.BaseViewModel.call(this);this.setLayerIndexClientSideCallback=nk;this.reorderIndex=nl},{get_hovering:function(){return this.$0},set_hovering:function(nk){this.$0=nk;this.notifyPropertyChanged('LayerReorderHoverProperty')}});var hi=global.tab.LayerReorderSpacerDropTarget=ss.mkType(a,'tab.LayerReorderSpacerDropTarget',function(){},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){return this},dragExit:function(nk){return},acceptDrop:function(nk){var nl=$.Deferred();return nl.resolve(true)},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.move}});var hj=global.tab.LayerReorderSpacerDropTargetTemplate=ss.mkType(a,'tab.LayerReorderSpacerDropTargetTemplate',function(nk){this.spacer=null;spiff.Template.call(this,$("<div class='layerReorderSpacerDropTargetContainer'>\n            <div class='layerReorderSpacerDropTarget'></div>\n        </div>"));this.spacer=this.getElementBySelector('.layerReorderSpacerDropTarget');this.spacer.height(nk)});var hk=global.tab.LayerReorderSpacerDropTargetView=ss.mkType(a,'tab.LayerReorderSpacerDropTargetView',function(nk,nl){this.$8=null;ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]).call(this,nk,nl);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.$8=new hi;EventUtils.DragDropManager.attachDropTarget(this.element,this.$8)},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]).prototype.dispose.call(this)},$7:function(nk){this.dispose()}});var hl=global.tab.LayersDropTarget=ss.mkType(a,'tab.LayersDropTarget',function(nk){this.$0=null;this.$0=nk},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(nk){this.$0.setHoverState(true);return this},dragExit:function(nk){this.$0.setHoverState(false)},acceptDrop:function(nk){var nl=$.Deferred();var nm=ss.safeCast(nk,jc);if(ss.isNullOrUndefined(nm)){return nl.resolve(false)}var nn=nm.get_fields();var no=false;for(var np=0;np<nn.length;np++){var nq=nn[np];if(nq.get_isGenerated()){continue}var nr=nq.asColumn();if(nr.get_isGeoSpatial()){no=true;break}}nl.resolve(no);if(!no){return nl}this.$0.executeDropCommand(nn);return nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.copy}});var hm=global.tab.LayersDropTargetTemplate=ss.mkType(a,'tab.LayersDropTargetTemplate',function(){spiff.Template.call(this,$("<div class='tabLayerDropTarget'><div class='tabAdHeaderRow'><span class='tabAdDropTitle tabAdAxisCell'><div class='tabAdDropInstructionTextPre'></div><div class='tabAdDropLabel'></div><div class='tabAdDropInstructionTextPost'></div></span></div></div>"))},{setDropLabel:function(nk,nl){this.getElementBySelector('.tabAdDropInstructionTextPre').text(nk);this.getElementBySelector('.tabAdDropLabel').text(nl)},addDropIcon:function(nk){var nl=$("<span class='tabAdAreaDropSpot tabAdDropCell'><div class='tabAdAreaDropImage'></div></span>");nl.find('.tabAdAreaDropImage').addClass(nk);this.getElementBySelector('.tabAdHeaderRow').append(nl);return nl}});var hn=global.tab.LayersDropTargetView=ss.mkType(a,'tab.LayersDropTargetView',function(nk){this.$b=null;ss.makeGenericType(spiff.BaseView$1,[ho]).call(this,nk,new hm);EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));var nl=tab.Strings.AddALayer;var nm=nl.split('|');this.$9().setDropLabel(nm[0],nm[1]);var nn=this.$9().addDropIcon('tabAuthLayersPaneDrop');this.$b=nn;var no=new hl(this.$a());EventUtils.DragDropManager.attachDropTarget(this.element,no);this.element.get(0).id=tab.DomUtil.makeHtmlSafeId('tabLayersDropTarget')},{dispose:function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));ss.makeGenericType(spiff.BaseView$1,[ho]).prototype.dispose.call(this)},$7:function(nk){this.dispose()},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[ho]).prototype.onViewModelPropertyChanged.call(this,nk,nl);this.$8()},$8:function(){this.$b.toggleClass('tabDirectHover',this.$a().getHoverState());this.$b.toggleClass('tabIndirectHover',this.$a().getHoverState())},$9:function(){return this.get_template()},$a:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.element.css('visibility','visible')},show:function(){this.addToDom(ca.findVizZone())}});var ho=global.tab.LayersDropTargetViewModel=ss.mkType(a,'tab.LayersDropTargetViewModel',function(){this.$0=false;spiff.BaseViewModel.call(this)},{executeDropCommand:function(nk){var nl={};var nm=tab.ModelUtils.findActiveOrDefaultVisual(null);nl['visualIdPresModel']=JSON.stringify(nm.get_visualId());nl['shelfDropContext']='none';nl['isCopy']=false;nl['isDeadDrop']=false;nl['dragSource']='drag-drop-schema';nl['dropTarget']='drag-drop-layers';nl['dragDescription']='';var nn={shelfPosIndex:-1,shelfDropAction:'insert'};nn.shelfType='none-shelf';nl['shelfDragSourcePosition']=nn;nl['shelfDropTargetPosition']={shelfType:'show-me-shelf',shelfPosIndex:0,shelfDropAction:'replace',isFolded:false,isOverlay:true};var no=_.map(nk,ss.mkdel(this,function(ns){return{fn:ns.get_globalName()}}));nl['fieldEncodings']=JSON.stringify(no);var np=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'add-layer-and-drop-on-show-me'},nl);var nq=$.Deferred();var nr=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'drop-prepare'},np.commandParams);tab.ServerCommands.executeServerCommand(nr,'immediately',function(ns){tab.ServerCommands.executeServerCommand(np,'immediately',function(nt){nq.resolve(nt)},function(nt){nq.reject()})},function(ns){})},setHoverState:function(nk){this.$0=nk;this.notifyPropertyChanged('Hover')},getHoverState:function(){return this.$0}},{$0:function(){return tab.Logger.getLoggerWithName(ss.getTypeName(tab.ShelfClientCommands)+tsConfig.layoutid)}});var hp=global.tab.LayoutBackgroundPickerComponent=ss.mkType(a,'tab.LayoutBackgroundPickerComponent',function(nk){this.$6=null;this.$7=null;spiff.PureRenderComponent.call(this,nk);this.state={isOpacityTextBoxEmpty:false};this.$6=ss.mkdel(this,function(nl,nm){this.$0(nl,true)});this.$7=ss.mkdel(this,function(nl){this.$0(nl,false)})},{render:function(){var nk=(this.props.hasBackground?this.props.backgroundColor.toRgbHex():'');var nl=this.$4(nk);var nm=tab.DoubleUtil.roundToInt(this.props.backgroundColor.get_a()*100);var nn=this.$5(nm,this.state.isOpacityTextBoxEmpty);var no='tab-BackgroundNoneButton'+(this.props.hasBackground?'':ss.formatString(' {0}','selected'));var np=this.$3(no);return spiff.DOMElements.div({className:'tabLayoutBackgroundPicker'},React.createElement(spiff.InteractAsButtonWrapperComponent,np),this.createColorGrid(nl),spiff.DOMElements.div({},tab.Strings.AuthColorTransparencyLabel,spiff.StatelessHorizontalSliderComponent.create(nn)))},$4:function(nk){var nl={handleSwatchClicked:ss.mkdel(this,this.$2),testId:'ZoneBorder',selectedColor:nk,colorsPreset:1};return nl},$3:function(nk){return{buttonContent:ss.mkdel(this,function(){return spiff.DOMElements.div({className:nk},tab.Strings.DashboardSpacingNone)}),handleAllTriggers:ss.mkdel(this,this.$1)}},$5:function(nk,nl){return{disabled:false,commitValue:this.$6,displayValueChanged:this.$7,minValue:0,maxValue:100,value:nk,emptyTextBox:nl,showValueTextBox:true,showPercentageSign:true,width:120,styleClass:'tabLayoutBackgroundOpacity'}},createColorGrid:function(nk){return spiff.DOMElements.div({},React.createElement(SharedWidgets.ColorGridWidget,nk))},$0:function(nk,nl){var nm=(ss.isNullOrUndefined(nk)?0:ss.Nullable$1.mul(nk,0.01));if(this.state.isOpacityTextBoxEmpty!==ss.isNullOrUndefined(nk)){this.setState({isOpacityTextBoxEmpty:ss.isNullOrUndefined(nk)})}var nn=tab.ColorModel.fromColorModelPlusAlpha(this.props.backgroundColor,nm);this.props.handleBackgroundChanged(nn,this.props.hasBackground,nl)},$1:function(){this.props.handleBackgroundChanged(this.props.backgroundColor,false,true)},$2:function(nk){var nl=tab.ColorModel.fromColorCode(nk);if(this.props.backgroundColor.get_a()!==0){nl=tab.ColorModel.fromColorModelPlusAlpha(nl,this.props.backgroundColor.get_a())}this.props.handleBackgroundChanged(nl,true,true)}},{create:function(nk){return React.createElement(hp,nk)}});var hq=global.tab.LayoutBorderPickerComponent=ss.mkType(a,'tab.LayoutBorderPickerComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{$3:function(){var nk=tab.ColorModel.fromColorCode(this.props.currentBorder.color);return nk.toRgbHex()},render:function(){var nk={handleSwatchClicked:ss.mkdel(this,this.handleColorChanged),testId:'ZoneBorder',selectedColor:this.$3()};var nl={handlePatternSelected:ss.mkdel(this,this.$1),selectedPattern:hY.borderStyleToLinePattern(this.props.currentBorder.style)};var nm={handleStrokeWidthSelected:ss.mkdel(this,this.$2),selectedStrokeWidth:this.props.currentBorder.width};return spiff.DOMElements.div({className:'tabLayoutBorderPicker'},hV.create(nl),lB.create(nm),this.createColorGrid(nk))},createColorGrid:function(nk){return React.createElement(SharedWidgets.ColorGridWidget,nk)},$2:function(nk){var nl=this.$0(nk,null,null,null);this.props.handleBorderChanged(nl)},$1:function(nk){var nl=this.$0(null,hY.linePatternToBorderStyle(nk),null,null);this.props.handleBorderChanged(nl)},handleColorChanged:function(nk){var nl=this.$0(null,null,nk,null);this.props.handleBorderChanged(nl)},$0:function(nk,nl,nm,nn){var no=nk;if(ss.isNullOrUndefined(no)){no=this.props.currentBorder.width}var np=nl;if(ss.isNullOrUndefined(np)){np=this.props.currentBorder.style}var nq=nm||this.props.currentBorder.color;var nr=nn;if(ss.isNullOrUndefined(nr)){nr=this.props.currentBorder.side}return new tab.BorderDefinition(no,np,nq,nr)}},{create:function(nk){return React.createElement(hq,nk)}});var hr=global.tab.LayoutCustomizationToggleViewModel=ss.mkType(a,'tab.LayoutCustomizationToggleViewModel',function(nk){this.$a=null;this.$b=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=nk;this.$b=nk.createChildModelHolder(tab.DeviceLayoutMetadataModel).call(nk,function(nl){return nl.deviceLayoutMetadataModel});this.disposables.add$2([this.$b,this.$b.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_isLayoutCustomizedChanged(ss.mkdel(this,this.incrementProps))}))]);this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps));nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))},{$6:function(){return this.$a.get_model()},$7:function(){return this.$b.get_model()},$8:function(){return ss.isValue(this.$6())&&this.$6().get_isCurrentLayoutAutoGenerated()},$9:function(){return ss.isValue(this.$7())&&this.$7().get_isLayoutCustomized()},createUpdatedProps:function(){return{selectedToggle:(this.$9()?1:0),leftToggleText:tab.Strings.LayoutToggleOptionDefault,rightToggleText:tab.Strings.LayoutToggleOptionCustom,handleLeftToggleSelected:ss.mkdel(this,this.$4),handleRightToggleSelected:ss.mkdel(this,this.$3),testId:hr.$1,disabled:this.$8()}},$4:function(){if(ss.isValue(this.$6())){tab.DashboardClientCommands.resetDashboardCurrentLayout(this.$6().get_sheetName(),this.$5(false))}},$3:function(){if(ss.isValue(this.$6())){tab.DashboardClientCommands.editDashboardDeviceLayout(this.$6().get_sheetName(),this.$5(true))}},$5:function(nk){return ss.mkdel(this,function(nl){if(ss.isValue(this.$7())){var nm=nl.makeMutablePresModel(this.$7(),false);nm.isDeviceLayoutCustomized=nk;this.$7().update(nm,nl.modelUpdateContext)}})}});var hs=global.tab.LayoutPaneArrangeViewModel=ss.mkType(a,'tab.LayoutPaneArrangeViewModel',function(nk){this.$7=null;this.$6=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=nk;this.$6=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$7.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addModelChangedHandler(ss.mkdel(this,this.$4)).addEventBinding(ss.mkdel(this,function(nl){nl.add_activeZoneChanged(ss.mkdel(this,this.$3));nl.add_dashboardTypeChanged(ss.mkdel(this,this.$4));nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_activeZoneChanged(ss.mkdel(this,this.$3));nl.remove_dashboardTypeChanged(ss.mkdel(this,this.$4));nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$4)).addEventBinding(ss.mkdel(this,function(nl){nl.get_zoneCommonModel().add_changeZoneGroupingState(ss.mkdel(this,this.$4))}),ss.mkdel(this,function(nl){nl.get_zoneCommonModel().remove_changeZoneGroupingState(ss.mkdel(this,this.$4))})))},{createInitialProps:function(){return{}},createUpdatedProps:function(){return{}},$3:function(){var nk=null;if(ss.isValue(this.$7.get_model())){nk=this.$7.get_model().getZone(this.$7.get_model().get_activeZoneID())}this.$6.set_Model(nk);this.$4()},$4:function(){this.incrementProps()},$5:function(){return ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var ht=global.tab.LayoutPaneComponent=ss.mkType(a,'tab.LayoutPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){return spiff.DOMElements.div({className:'tab-LayoutPane'},this.$2(),this.$3())},$2:function(){return(this.props.isFlexibleLayoutEnabled?bd.create($.extend({key:'layout-arrange-section'},this.props.layoutPaneArrangeProps)):null)},$3:function(){this.props.resizablePaneProps.renderScrollHandlers=ss.mkdel(this,this.$4);return kz.create(this.props.resizablePaneProps)},$4:function(nk,nl,nm){var nn=ss.mkdel(this,function(){this.$0(nk)});var no={onHover:nn,direction:nk,sectionContentClass:nl,shouldRenderScrollHandlers:this.props.shouldRenderScrollHandlers,heightPercent:nm};return hL.create(no)},$0:function(nk){var nl=$('.'+'layout-tree-section-content');if(nl.length>0){var nm=this.$1(nk,nl);var nn=((nk===0||nk===1)?'scrollTop':'scrollLeft');nl.animate(ss.mkdict([nn,nm]),'fast','swing')}},$1:function(nk,nl){var nm;var nn;if(nk===0||nk===1){var no=nl[0].clientHeight;nm=no*0.5*((nk===0)?-1:1);nn=nl.scrollTop()}else{var np=nl[0].clientWidth;nm=np*0.5*((nk===2)?-1:1);nn=nl.scrollLeft()}return Math.round(nn+nm)}});var hu=global.tab.LayoutPaneConstants=ss.mkType(a,'tab.LayoutPaneConstants',null,null,{renderInfoItemTitle:function(nk){return spiff.DOMElements.div({className:'tab-ZoneLayoutInfoTitle'},nk)}});var hv=global.tab.LayoutPaneGeometryComponent=ss.mkType(a,'tab.LayoutPaneGeometryComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){var nk='tab-ZoneLayoutInfoItem';var nl=[nk,'geometrySpace'].join(' ');var nm=hA.create($.extend({},this.props,{key:'position'}));var nn=hB.create(this.props.sizeProps);return spiff.DOMElements.div({className:'tab-ZoneGeometrySection',key:'layout-geometry-section'},[spiff.DOMElements.div({className:nl,key:'layout-position-spinners'},nm),spiff.DOMElements.div({className:nl,key:'layout-size-spinners'},nn)])}},{create:function(nk){return React.createElement(hv,nk)}});var hw=global.tab.LayoutPaneGeometryViewModel=ss.mkType(a,'tab.LayoutPaneGeometryViewModel',function(nk,nl){this.$m=0;this.$l=null;this.$k=null;this.$p=0;this.$q=0;this.$o=0;this.$n=0;this.$r=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$l=nk;this.$k=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.$m=nl;this.disposables.add(ss.mkdel(this,this.$7));this.disposables.add$1(this.$l.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$g)).addEventBinding(ss.mkdel(this,function(nm){nm.add_activeZoneChanged(ss.mkdel(this,this.$g));nm.add_sizeChanged(ss.mkdel(this,this.$h));nm.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nm){nm.remove_activeZoneChanged(ss.mkdel(this,this.$g));nm.remove_sizeChanged(ss.mkdel(this,this.$h));nm.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$k.newDisposableContext().addEventBinding(ss.mkdel(this,function(nm){nm.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$i));nm.get_zoneCommonModel().add_changeZoneFloatingState(ss.mkdel(this,this.$i));nm.get_zoneCommonModel().add_changeZoneIsFixedSize(ss.mkdel(this,this.$i))}),ss.mkdel(this,function(nm){nm.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$i));nm.get_zoneCommonModel().remove_changeZoneFloatingState(ss.mkdel(this,this.$i));nm.get_zoneCommonModel().remove_changeZoneIsFixedSize(ss.mkdel(this,this.$i))})))},{createInitialProps:function(){return{changeX:ss.mkdel(this,this.$5),changeY:ss.mkdel(this,this.$6),sizeProps:{changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a)}}},createUpdatedProps:function(){var nk=this.$k.get_model();var nl=(ss.isNullOrUndefined(nk)?this.$c():this.$b());return nl},$h:function(){if(ss.isNullOrUndefined(this.$k.get_model())){this.$i()}},$g:function(){var nk=null;if(ss.isValue(this.$l.get_model())){nk=this.$l.get_model().getZone(this.$l.get_model().get_activeZoneID())}this.$k.set_Model(nk);this.$i()},$i:function(){this.$7();var nk=this.$k.get_model();if(ss.isValue(nk)){this.$p=nk.get_zoneCommonModel().get_x();this.$q=nk.get_zoneCommonModel().get_y();this.$o=nk.get_zoneCommonModel().get_width();this.$n=nk.get_zoneCommonModel().get_height()}this.incrementProps()},$c:function(){var nk={x:0,y:0,isZone:false,disablePositionControls:true,shouldRenderPendingGeometry:false,sizeProps:{key:'size',disableHeightControl:true,disableWidthControl:true,showFixWidth:false,showFixHeight:false,isFixedSize:false}};if(ss.isValue(this.$l.get_model())&&ss.isValue(this.$l.get_model().get_dashboardSize())){var nl=this.$l.get_model().get_dashboardSize();nk.sizeProps.width=nl.w;nk.sizeProps.height=nl.h}return nk},$b:function(){var nk=this.$9();return{x:this.$p,y:this.$q,disablePositionControls:!nk||this.$j(),isZone:true,shouldRenderPendingGeometry:ss.isValue(this.$r)&&nk,sizeProps:this.$e()}},$e:function(){var nk=this.$l.get_model();if(ss.isValue(nk)&&nk.get_isFlexibleLayoutEnabled()){return this.$d()}else{return this.$f()}},$f:function(){var nk=this.$9();return{key:'size',changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a),width:this.$o,height:this.$n,disableHeightControl:!nk||this.$j(),disableWidthControl:!nk||this.$j(),showFixHeight:false,showFixWidth:false,isFixedSize:false}},$d:function(){var nk=this.$k.get_model();var nl=this.$9();var nm=this.$l.get_model().getZone(nk.get_parentZoneId());var nn=false;return{key:'size',changeWidth:ss.mkdel(this,this.$4),changeHeight:ss.mkdel(this,this.$3),fixDimension:ss.mkdel(this,this.$a),width:this.$o,height:this.$n,disableHeightControl:!(nl||nn&&!nm.get_isHorizontal())||this.$j(),disableWidthControl:!(nl||nn&&nm.get_isHorizontal())||this.$j(),showFixHeight:nn&&!nm.get_isHorizontal(),showFixWidth:nn&&nm.get_isHorizontal(),isFixedSize:nk.get_zoneCommonModel().get_isFixedSize()}},$9:function(){var nk=this.$k.get_model();return nk.get_zoneCommonModel().get_isFloating()||nk.get_zoneCommonModel().get_isZoneInGroup()},$5:function(nk){var nl=nk-this.$p;this.$p=nk;this.$k.get_model().updateLocalPropertiesForZonePreview(nl,0);this.$8(false)},$6:function(nk){var nl=nk-this.$q;this.$q=nk;this.$k.get_model().updateLocalPropertiesForZonePreview(0,nl);this.$8(false)},$4:function(nk){this.$o=nk;this.$8(true)},$3:function(nk){this.$n=nk;this.$8(true)},$8:function(nk){this.$7();this.$r=window.setTimeout(ss.mkdel(this,function(){this.$7();if(nk){this.incrementProps()}if(this.$9()){tab.DashboardZoneCommands.resizeFreeFormZone(this.$k.get_model(),this.$p,this.$q,this.$o,this.$n)}}),this.$m);if(nk){this.incrementProps()}},$7:function(){this.$r=tab.MiscUtil.clearTimeout(this.$r)},$a:function(){var nk=this.$k.get_model();tab.DashboardZoneCommands.setZoneIsFixedSize(nk.get_zoneId(),!nk.get_zoneCommonModel().get_isFixedSize())},$j:function(){return ss.isValue(this.$l.get_model())&&this.$l.get_model().get_isCurrentLayoutAutoGenerated()}});var hx=global.tab.LayoutPaneSpacingComponent=ss.mkType(a,'tab.LayoutPaneSpacingComponent',function(nk){this.maxSpacingSize=1000;this.$e=null;this.$f=null;this.$9=null;this.$8=null;this.$c=null;this.$d=null;this.$b=null;this.$a=null;spiff.PureRenderComponent.call(this,nk);this.state={showingState:'none'};this.$d=ss.mkdel(this,function(nl){this.$f=nl});this.$c=ss.mkdel(this,function(nl){this.$e=nl});this.$b=ss.mkdel(this,function(nl){this.$9=nl});this.$a=ss.mkdel(this,function(nl){this.$8=nl})},{componentDidMount:function(){EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.$2))},componentWillUnmount:function(){EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.$2))},render:function(){return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'border-section','data-test-id':'tab-Border-Section-Id'},hu.renderInfoItemTitle(tab.Strings.LayoutPaneBorderButtonTitle),this.renderBorderButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'background-color-section','data-test-id':'tab-Background-Color-Section-Id'},hu.renderInfoItemTitle(tab.Strings.LayoutPaneBackgroundColorTitle),this.renderBackgroundColorButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'margin-section','data-test-id':'tab-Margin-Section-Id'},hu.renderInfoItemTitle(tab.Strings.LayoutPaneMarginButtonTitle),this.renderMarginButton()),spiff.DOMElements.div({className:'tab-ZoneLayoutInfoItem',key:'padding-section','data-test-id':'tab-Padding-Section-Id'},hu.renderInfoItemTitle(tab.Strings.LayoutPanePaddingButtonTitle),this.renderPaddingButton()),this.$6())},$1:function(){switch(this.state.showingState){case'borderShowing':{return tab.Strings.LayoutPaneBorderButtonTitle}case'backgroundShowing':{return tab.Strings.LayoutPaneBackgroundColorTitle}case'marginShowing':{return tab.Strings.LayoutPaneMarginButtonTitle}case'paddingShowing':{return tab.Strings.LayoutPanePaddingButtonTitle}default:{return null}}},$4:function(nk,nl,nm){return spiff.DOMElements.div({className:'tab-LayoutIconValuePair'+(ss.isValue(nl)?'':(' '+'no-value')),key:nm},nk(nm),hx.$0(nl))},$3:function(nk,nl){return spiff.DOMElements.div({className:'tab-LayoutSpacingButtonContent',key:nl},nk)},renderMarginButton:function(){return spiff.DOMElements.div({key:'spacing-uber-button-margin',ref:this.$c},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('marginShowing')}),buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'margin-button-content',isDisabled:!this.props.isEnabled,testId:'tab-Margin-Button-Id',selectionDisplay:ss.mkdel(this,function(){return[this.$3([this.$4(hx.$1,this.props.marginLeft,'Left'),this.$4(hx.$1,this.props.marginTop,'Top'),this.$4(hx.$1,this.props.marginRight,'Right'),this.$4(hx.$1,this.props.marginBottom,'Bottom')],'margin-button')]})})})}))},renderBorderButton:function(){var nk;if(ss.isNullOrUndefined(this.props.border)||this.props.border.width===0||this.props.border.style==='bs-none'){nk=tab.Strings.DashboardSpacingNone}else{nk=spiff.DOMElements.div({style:{borderTopWidth:this.props.border.width+'px',borderTopStyle:tab.BorderDefinition.borderStyleToCss(this.props.border.style),borderTopColor:this.props.border.color}})}return spiff.DOMElements.div({key:'spacing-uber-button-border',ref:this.$b},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('borderShowing')}),buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'border-button-dropdown',isDisabled:!this.props.isEnabled,selectionDisplay:ss.mkdel(this,function(){return[this.$3([spiff.DOMElements.div({key:'border-button-content',className:'tab-LayoutBorderButtonContent'},nk)],'border-button')]})})})}))},renderBackgroundColorButton:function(){var nk;var nl;var nm=null;var nn;var no;if(ss.isNullOrUndefined(this.props.backgroundColor)||!this.props.hasFill){nk=spiff.DOMElements.div({},tab.Strings.DashboardSpacingNone);no={backgroundColor:new tab.ColorModel(0,0,0,0)};nm=spiff.DOMElements.div({className:'tab-SwatchDiagonalLine'})}else{no={backgroundColor:this.props.backgroundColor.toRgb()};var np=tab.DoubleUtil.roundToInt(this.props.backgroundColor.get_a()*100).toString()+'%';nk=spiff.DOMElements.div({},np)}nn=spiff.DOMElements.div({className:'tab-LayoutColorOuterCircle'});nl=spiff.DOMElements.div({className:'tab-LayoutColorSwatch',style:no},nm,nn);return spiff.DOMElements.div({key:'spacing-uber-button-background-color',ref:this.$a},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('backgroundShowing')}),buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'background-color-content',isDisabled:!this.props.isEnabled,disableArrowDown:true,selectionDisplay:ss.mkdel(this,function(){return this.$5(nk,nl)})})})}))},renderPaddingButton:function(){return spiff.DOMElements.div({key:'spacing-uber-button-padding',ref:this.$d},spiff.InteractAsButtonWrapperComponent.create({disabled:!this.props.isEnabled,handleAllTriggers:ss.mkdel(this,function(){this.$0('paddingShowing')}),buttonContent:ss.mkdel(this,function(){return spiff.GenericDropdownButtonComponent.create({key:'padding-button-content',isDisabled:!this.props.isEnabled,testId:'tab-Padding-Button-Id',selectionDisplay:ss.mkdel(this,function(){return[this.$3([this.$4(hx.$2,this.props.paddingLeft,'Left'),this.$4(hx.$2,this.props.paddingTop,'Top'),this.$4(hx.$2,this.props.paddingRight,'Right'),this.$4(hx.$2,this.props.paddingBottom,'Bottom')],'padding-button')]})})})}))},$5:function(nk,nl){return[this.$3([spiff.DOMElements.div({key:'background-color-button-content',className:'tab-LayoutBackgroundColorButtonContent'},nk,nl)],'background-color-button')]},$6:function(){var nk;var nl={paddingTop:4,paddingBottom:21,paddingLeft:11,paddingRight:11,width:205};switch(this.state.showingState){case'marginShowing':{nk={leftValue:ss.coalesce(this.props.marginLeft,0),rightValue:ss.coalesce(this.props.marginRight,0),bottomValue:ss.coalesce(this.props.marginBottom,0),topValue:ss.coalesce(this.props.marginTop,0),allSidesTheSame:this.props.allMarginTheSame,isEnabled:this.props.isEnabled,changeAllSidesTheSame:this.props.setAllMarginTheSame,setNewValue:this.props.changeMargin,spacingUberType:'marginUber',maxValue:this.maxSpacingSize};return this.$7(this.$e,hC.create(nk),'LayoutMarginSpinners','margin-button-popup',nl)}case'paddingShowing':{nk={leftValue:ss.coalesce(this.props.paddingLeft,0),rightValue:ss.coalesce(this.props.paddingRight,0),topValue:ss.coalesce(this.props.paddingTop,0),bottomValue:ss.coalesce(this.props.paddingBottom,0),allSidesTheSame:this.props.allPaddingTheSame,isEnabled:this.props.isEnabled,changeAllSidesTheSame:this.props.setAllPaddingTheSame,setNewValue:this.props.changePadding,spacingUberType:'paddingUber',maxValue:this.maxSpacingSize};return this.$7(this.$f,hC.create(nk),'LayoutPaddingSpinners','padding-button-popup',nl)}case'borderShowing':{var nm={currentBorder:this.props.border,handleBorderChanged:this.props.changeBorder};return this.$7(this.$9,hq.create(nm),'LayoutBorderControl','border-button-popup',null)}case'backgroundShowing':{var nn={backgroundColor:this.props.backgroundColor,handleBackgroundChanged:this.props.changeBackgroundColor,hasBackground:this.props.hasFill};return this.$7(this.$8,hp.create(nn),'LayoutBackgroundControl','background-button-popup',null)}}return null},$0:function(nk){if(this.props.isEnabled){this.setState({showingState:nk});if(nk==='none'){if(!tab.FeatureFlags.isEnabled('FlexibleDashboard')){this.props.commitImmediately()}}}},$2:function(){this.$0('none')},$7:function(nk,nl,nm,nn,no){var np=React.createElement(SharedWidgets.DialogWidget,{anchorOrigin:{horizontal:'left',vertical:'bottom'},stackedOrigin:{horizontal:'left',vertical:'top'},anchorEl:nk,children:nl,handleGlassClick:ss.mkdel(this,this.$2),onCloseRequest:ss.mkdel(this,this.$2),shouldReturnFocusOnClose:true,isGlassTransparent:true,isModal:true,positioningBehavior:3,testId:nm,key:nn,type:2,title:this.$1(),dialogBodyStyle:no,zIndex:988});return np}},{$3:function(nk){return(ss.isValue(nk)?nk.toString():'—')},$0:function(nk){return spiff.DOMElements.div({className:'tab-LayoutSpacingButtonValue',title:ss.formatString('{0}',nk)},hx.$3(nk))},$1:function(nk){return spiff.DOMElements.div({className:'tab-LayoutMargin'+nk})},$2:function(nk){return spiff.DOMElements.div({className:'tab-LayoutPadding'+nk})}});var hy=global.tab.LayoutPaneSpacingViewModel=ss.mkType(a,'tab.LayoutPaneSpacingViewModel',function(nk,nl){this.$v=null;this.$u=null;this.$w=0;this.$D=null;this.$B=null;this.$C=null;this.$z=null;this.$y=null;this.$A=false;this.$x=1;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$w=nl;this.$v=nk;this.$u=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$v.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$d)).addEventBinding(ss.mkdel(this,function(nm){nm.add_activeZoneChanged(ss.mkdel(this,this.$d));nm.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nm){nm.remove_activeZoneChanged(ss.mkdel(this,this.$d));nm.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$u.newDisposableContext().addEventBinding(ss.mkdel(this,function(nm){nm.get_styledBoxModel().add_styleUpdated(ss.mkdel(this,this.$g))}),ss.mkdel(this,function(nm){nm.get_styledBoxModel().remove_styleUpdated(ss.mkdel(this,this.$g))})))},{$t:function(){return(ss.isValue(this.$u.get_model())?this.$u.get_model().get_styledBoxModel():null)},$p:function(){if(ss.isValue(this.$v.get_model())){return this.$v.get_model().get_sheetName()}return''},$o:function(){if(ss.isValue(this.$v.get_model())){return this.$v.get_model().get_activeZoneID()}return 0},$q:function(){return this.$z.get_hasColor()&&this.$z.get_hasStyle()&&this.$z.get_hasWidth()},$s:function(){if(ss.isValue(this.$v.get_model())){return this.$v.get_model().get_isFlexibleLayoutEnabled()}return false},$r:function(){return ss.isValue(this.$v.get_model())&&this.$v.get_model().get_isCurrentLayoutAutoGenerated()},$d:function(){var nk=null;if(ss.isValue(this.$v.get_model())){nk=this.$v.get_model().getZone(this.$v.get_model().get_activeZoneID())}this.$u.set_Model(nk);this.$g(true)},$g:function(nk){if(ss.isValue(this.$t())){this.$B=this.$t().get_marginDefinition();this.$C=this.$t().get_paddingDefinition();this.$z=this.$t().get_border();this.$y=tab.ColorModel.fromColorCode(this.$t().get_fillColor());this.$A=this.$t().get_hasFill()}if(nk){this.$x=(this.$A?this.$y.get_a():1)}this.$D=tab.MiscUtil.clearTimeout(this.$D);this.incrementProps()},createInitialProps:function(){return{changeMargin:ss.mkdel(this,this.$7),setAllMarginTheSame:ss.mkdel(this,this.$i),changePadding:ss.mkdel(this,this.$8),setAllPaddingTheSame:ss.mkdel(this,this.$j),changeBorder:ss.mkdel(this,this.$6),changeBackgroundColor:ss.mkdel(this,this.$5),commitImmediately:ss.mkdel(this,this.$b)}},createUpdatedProps:function(){if(ss.isValue(this.$t())){return{marginLeft:this.$B.get_leftValue(),marginRight:this.$B.get_rightValue(),marginBottom:this.$B.get_bottomValue(),marginTop:this.$B.get_topValue(),allMarginTheSame:this.$B.get_allSidesTheSame(),paddingLeft:this.$C.get_leftValue(),paddingRight:this.$C.get_rightValue(),paddingBottom:this.$C.get_bottomValue(),paddingTop:this.$C.get_topValue(),border:this.$z,allPaddingTheSame:this.$C.get_allSidesTheSame(),backgroundColor:(this.$A?this.$y:new tab.ColorModel(0,0,0,this.$x)),hasFill:this.$A,isEnabled:!this.$r()}}return{marginLeft:null,marginRight:null,marginBottom:null,marginTop:null,paddingLeft:null,paddingRight:null,paddingBottom:null,paddingTop:null,isEnabled:false,border:null,backgroundColor:null,hasFill:false,allMarginTheSame:false,allPaddingTheSame:false}},$a:function(){this.$D=tab.MiscUtil.clearTimeout(this.$D)},$h:function(nk){this.$D=window.setTimeout(nk,this.$w)},$6:function(nk){if(ss.isNullOrUndefined(this.$t())){return}if(!this.$q()){nk=this.$c(nk)}this.$z=nk;if(this.$s()){this.$a();var nl=this.$3();tab.DashboardZoneStyleCommands.modifyZoneBorder(this.$o(),nl.borderColor,nl.uw,nl.borderStyle);this.incrementProps()}else{this.$e()}},$c:function(nk){var nl=(nk.get_hasColor()?nk.color:tab.ColorModel.black.toRgb());var nm=(nk.get_hasWidth()?nk.width:1);var nn=(nk.get_hasStyle()?nk.style:'bs-solid');return new tab.BorderDefinition(nm,nn,nl,nk.side)},$5:function(nk,nl,nm){if(ss.isNullOrUndefined(this.$t())){return}this.$y=(nl?nk:tab.ColorModel.fromColorCode('rgba(0, 0, 0, 0)'));this.$A=nl;this.$x=nk.get_a();if(nm){this.$4()}this.incrementProps()},$4:function(){var nk=tab.ColorModel.fromColorCode(this.$t().get_fillColor()).toRgba();if(this.$A!==this.$t().get_hasFill()||!ss.referenceEquals(this.$y.toRgba(),nk)){if(this.$s()){this.$a();this.$3();tab.DashboardZoneStyleCommands.modifyBackgroundShading(this.$o(),this.$y.toRgba255())}else{this.$e()}}},$8:function(nk,nl){this.$9(nk,nl,this.$C.get_allSidesTheSame(),this.$C);if(this.$s()){this.$a();this.$3();this.$h(ss.mkdel(this,this.$n));this.incrementProps()}else{this.$f()}},$7:function(nk,nl){this.$9(nk,nl,this.$B.get_allSidesTheSame(),this.$B);if(this.$s()){this.$a();this.$3();this.$h(ss.mkdel(this,this.$m));this.incrementProps()}else{this.$f()}},$9:function(nk,nl,nm,nn){if(ss.isNullOrUndefined(this.$t())){return}if(nm){nn.set_defaultValue(nk)}else{switch(nl){case 3:{nn.set_bottomValue(nk);break}case 0:{nn.set_leftValue(nk);break}case 1:{nn.set_rightValue(nk);break}case 2:{nn.set_topValue(nk);break}}}},$n:function(){var nk={padding:this.$C.get_defaultValue(),paddingBottom:this.$C.get_bottomValue(),paddingLeft:this.$C.get_leftValue(),paddingRight:this.$C.get_rightValue(),paddingTop:this.$C.get_topValue()};tab.DashboardZoneStyleCommands.modifyPadding(this.$o(),nk,this.$C.get_allSidesTheSame())},$m:function(){var nk={margin:this.$B.get_defaultValue(),marginBottom:this.$B.get_bottomValue(),marginLeft:this.$B.get_leftValue(),marginRight:this.$B.get_rightValue(),marginTop:this.$B.get_topValue()};tab.DashboardZoneStyleCommands.modifyMargins(this.$o(),nk,this.$B.get_allSidesTheSame())},$i:function(nk){if(this.$s()){this.$B.set_allSidesTheSame(nk);if(nk){this.$a();this.$3();this.$m()}this.incrementProps()}else{this.$k(nk,this.$B)}},$j:function(nk){if(this.$s()){this.$C.set_allSidesTheSame(nk);if(nk){this.$a();this.$3();this.$n()}this.incrementProps()}else{this.$k(nk,this.$C)}},$k:function(nk,nl){nl.set_allSidesTheSame(nk);if(nk){this.$e()}else{this.incrementProps()}},$b:function(){if(ss.isValue(this.$D)){this.$e()}},$f:function(){this.$a();this.$h(ss.mkdel(this,this.$l));this.incrementProps()},$e:function(){this.$a();this.$l();this.incrementProps()},$3:function(){var nk=(ss.isValue(this.$t())?this.$t().get_styledBoxPresModel():null);if(ss.isNullOrUndefined(nk)){return null}var nl=this.$B.mergeWithExisitingStyle(nk);nl=this.$C.mergeWithExisitingStyle(nl);var nm={fillColor:this.$y.toRgba255(),hasFill:this.$A};$.extend(nl,this.$z.get_styledBoxPresModel(),nm);return nl},$l:function(){var nk=this.$3();tab.DashboardZoneCommands.setZoneStyle(this.$o(),nk,this.$p())}});var hz=global.tab.LayoutPaneViewModel=ss.mkType(a,'tab.LayoutPaneViewModel',function(nk){this.$7=null;this.$8=false;this.$4=null;this.$6=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$7=nk;this.$4=new hs(this.$7);this.$5=new hN(this.$7);this.$5.add_updateScrollHandlerVisibility(ss.mkdel(this,this.$3));var nl=new kC;nl.sectionKey='layout-tree-section';nl.minSize=45;nl.initialSizePercent=35;nl.sectionContentProvider=new(ss.makeGenericType(kD,[hD,Object,Object]))('layout-tree-section-content',this.$5);var nm=nl;var nn=new kC;nn.sectionKey='selected-item-section';nn.minSize=45;nn.initialSizePercent=65;nn.sectionContentProvider=new(ss.makeGenericType(kD,[lc,ld,Object]))('selected-item-section-content',new le(this.$7));var no=nn;var np=[];np.push(no);np.push(nm);var nq=np;this.$6=new kA.$ctor1(nq,this.$7);this.disposables.add$2([this.addChildViewModel(this.$6),this.addChildViewModel(this.$4),this.$6,this.$4]);this.$8=false},{get_title:function(){return tab.Strings.AuthLeftLayoutPaneLabel},get_id:function(){return'layout'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[hz,ht,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthLayoutPane'},createUpdatedProps:function(){return{resizablePaneProps:this.$6.get_props(),isFlexibleLayoutEnabled:(ss.isValue(this.$7.get_model())?this.$7.get_model().get_isFlexibleLayoutEnabled():false),layoutPaneArrangeProps:this.$4.get_props(),shouldRenderScrollHandlers:this.$8}},$3:function(nk){this.$8=nk;this.incrementProps()}});var hA=global.tab.LayoutPositionSpinnersComponent=ss.mkType(a,'tab.LayoutPositionSpinnersComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk={testId:'x-stepper',label:tab.Strings.LayoutPaneXPositionSpinner,min:-9999,max:9999,onValueUpdated:this.props.changeX,disabled:this.props.disablePositionControls,pageDelta:10};var nl={testId:'y-stepper',label:tab.Strings.LayoutPaneYPositionSpinner,min:-9999,max:9999,onValueUpdated:this.props.changeY,disabled:this.props.disablePositionControls,pageDelta:10};if(!this.props.disablePositionControls||this.props.isZone){nk.start=this.props.x;nl.start=this.props.y}var nm=React.createElement(SharedWidgets.IntegerStepperWidget,nk);var nn=React.createElement(SharedWidgets.IntegerStepperWidget,nl);return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-LayoutZoneGeometry'},spiff.DOMElements.div({className:'tab-LayoutXPositionSpinner',key:'x-layout-spinner','data-test-id':'tab-LayoutXPositionSpinner'},nm),spiff.DOMElements.div({className:'tab-LayoutYPositionSpinner',key:'y-layout-spinner','data-test-id':'tab-LayoutYPositionSpinner'},nn)))}},{create:function(nk){return React.createElement(hA,nk)}});var hB=global.tab.LayoutSizeSpinnersComponent=ss.mkType(a,'tab.LayoutSizeSpinnersComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){return spiff.DOMElements.div({},spiff.DOMElements.div({className:'tab-LayoutZoneGeometry'},spiff.DOMElements.div({className:'tab-LayoutWidthSpinnerSection',key:'width-layout-spinner','data-test-id':'tab-LayoutWidthSpinnerSection'},this.$3(),this.$1(this.props.showFixWidth)),spiff.DOMElements.div({className:'tab-LayoutHeightSpinnerSection',key:'height-layout-spinner','data-test-id':'tab-LayoutHeightSpinnerSection'},this.$2(),this.$1(this.props.showFixHeight))))},$3:function(){var nk={testId:'width-stepper',label:tab.Strings.LayoutPaneWSizeSpinner,min:1,max:9999,start:this.props.width,onValueUpdated:this.props.changeWidth,disabled:this.props.disableWidthControl,pageDelta:10};return React.createElement(SharedWidgets.IntegerStepperWidget,nk)},$2:function(){return React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'height-stepper',label:tab.Strings.LayoutPaneHSizeSpinner,min:1,max:9999,start:this.props.height,onValueUpdated:this.props.changeHeight,disabled:this.props.disableHeightControl,pageDelta:10})},$1:function(nk){if(nk){var nl=this.$0();var nm=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(nn){this.props.fixDimension()}),buttonType:10,testId:'layout-fixed-size-button',children:spiff.DOMElements.div({className:nl}),hidden:!nk});return spiff.DOMElements.div({className:'layoutFixButton',key:'layout-fix-button','data-test-id':'layoutFixButton'},nm)}else{return null}},$0:function(){if(this.props.isFixedSize){return(this.props.showFixHeight?'fixHeightSelected':'fixWidthSelected')}else{return(this.props.showFixHeight?'fixHeightUnselected':'fixWidthUnselected')}}},{create:function(nk){return React.createElement(hB,nk)}});var hC=global.tab.LayoutSpacingSpinnersComponent=ss.mkType(a,'tab.LayoutSpacingSpinnersComponent',function(nk){spiff.PureRenderComponent.call(this,nk)},{render:function(){return spiff.DOMElements.div({className:'tab-LayoutMarginSpinnersSection'},this.$1(),this.$4(2),this.$2(),this.$4(3))},$1:function(){return spiff.DOMElements.div({className:'tab-SpacingPopUp-AllSidesCheckbox'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.LayoutPaneSpacingAllSidesEqual,checked:this.props.allSidesTheSame,handleChange:this.props.changeAllSidesTheSame,testId:this.props.spacingUberType+'AllSidesCheckbox'}))},$2:function(){return spiff.DOMElements.div({className:'tab-LayoutSpinnerLeftRight'},this.$4(0),this.$3(),this.$4(1))},$3:function(){var nk=(this.props.allSidesTheSame?'-locked':'-unlocked');var nl=spiff.DOMElements.div({className:'tab-SpacingPopupLockIcon-'+this.props.spacingUberType+nk});return React.createElement(spiff.InteractAsButtonWrapperComponent,{buttonContent:function(){return nl},handleAllTriggers:ss.mkdel(this,function(){this.props.changeAllSidesTheSame(!this.props.allSidesTheSame)}),key:'lock-button'})},$4:function(nk){var nl=this.$0(nk);var nm=ss.mkdel(this,function(np){this.props.setNewValue(np,nk)});var nn=this.$5(nl.value,nl.label,nl.classPrefix+this.props.spacingUberType,nm);var no={className:'tab-LayoutSpinner',key:nl.keyPrefix+this.props.spacingUberType,'data-test-id':nl.classPrefix+this.props.spacingUberType};return spiff.DOMElements.div(no,nn)},$0:function(nk){var nl=null;switch(nk){case 2:{nl={value:this.props.topValue,label:tab.Strings.LayoutPaneSpacingTop,keyPrefix:'top-layout-spinner-',classPrefix:'tab-LayoutTopSpinner'};break}case 0:{nl={value:this.props.leftValue,label:tab.Strings.LayoutPaneSpacingLeft,keyPrefix:'left-layout-spinner-',classPrefix:'tab-LayoutLeftSpinner'};break}case 3:{nl={value:this.props.bottomValue,label:tab.Strings.LayoutPaneSpacingBottom,keyPrefix:'bottom-layout-spinner-',classPrefix:'tab-LayoutBottomSpinner'};break}case 1:{nl={value:this.props.rightValue,label:tab.Strings.LayoutPaneSpacingRight,keyPrefix:'right-layout-spinner-',classPrefix:'tab-LayoutRightSpinner'};break}}return nl},$5:function(nk,nl,nm,nn){var no=ss.coalesce(nk,0);return React.createElement(SharedWidgets.IntegerStepperWidget,{testId:nm,start:no,label:nl,min:0,max:this.props.maxValue,disabled:!this.props.isEnabled,onValueUpdated:nn})}},{create:function(nk){return React.createElement(hC,nk)}});var hD=global.tab.LayoutTreeComponent=ss.mkType(a,'tab.LayoutTreeComponent',function(nk,nl){this.$f=null;React.Component.call(this,nk,nl);if(tab.FeatureFlags.isEnabled('LayoutTreeDragDrop')){this.$f={renderSingleNode:ss.mkdel(this,this.$b),renderToggle:ss.mkdel(this,this.$c),renderReorderAllZonesTarget:ss.mkdel(this,this.$a)}}else{this.$f={renderSingleNode:ss.mkdel(this,this.$b),renderToggle:ss.mkdel(this,this.$c)}}},{render:function(){var nk=new EventUtils.EventHandleSpec;nk.firstTouch=ss.mkdel(this,this.$7);return EventUtils.EventForwarder.div(nk,{className:['tab-LayoutTreeSection',this.$e()].join(' '),key:'layout-tree-section'},this.renderTitleContainer(),this.renderScrollingContent())},renderTitleContainer:function(){var nk=spiff.DOMElements.div({className:'tab-LayoutTreeTitle',key:'layout-tree-title'},this.props.layoutTreeTitle);var nl=$.Deferred();window.setTimeout(ss.mkdel(this,function(){nl.resolve(spiff.DOMElements.div({className:'tab-LayoutTreeSubtitleTooltip'},this.props.layoutTreeSubtitle))}),1000);var nm=React.createElement(SharedWidgets.Tooltip,{getContent:function(){return nl},position:'Bottom',onlyShowWhenClipped:true},spiff.DOMElements.div({className:'tab-LayoutTreeSubtitle',key:'layout-tree-subtitle'},this.props.layoutTreeSubtitle));return spiff.DOMElements.div({className:'tab-LayoutTreeTitleContainer',key:'layout-tree-title-container'},nk,nm)},renderScrollingContent:function(){var nk=[];var nl='LayoutTreeReorderTargetComponent[zoneId: {0}]';if(this.$1()){var nm={zoneId:2147483647,key:ss.formatString.apply(null,[nl].concat(null)),parentId:this.props.moveZoneWithinLayoutTreeProps.get_getParentId()(null),insertBeforeId:this.props.moveZoneWithinLayoutTreeProps.get_getNextSibling()(null),autoExpand:null,parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,className:'dummy-drop-target',moveZoneInLayoutTree:this.props.moveZoneInLayoutTree};nk.push(hJ.create(nm))}else if(this.$0()){nk.push(hK.create(this.$3(0,null)))}for(var nn=0;nn<this.props.rootNodes.length;nn++){var no=this.props.rootNodes[nn];var np={$:this.$5(no)};if(this.$0()&&ss.keyExists(this.props.floatingOrderMap,no.get_item().get_zoneID())&&!tab.FeatureFlags.isEnabled('LayoutTreeDragDrop')){var nq=this.props.floatingOrderMap[no.get_item().get_zoneID()];var nr=this.$3(nq,ss.mkdel({treeProps:np},function(){return mf.create(tab.LayoutTreeItem).call(null,this.treeProps.$)}));nk.push(hK.create(nr))}else{nk.push(mf.create(tab.LayoutTreeItem).call(null,np.$))}}var ns=['tab-LayoutTree'];if(this.props.disableFeedback){ns.push('feedback-disabled')}if(this.props.reorderDragInProgress){ns.push('reorder-in-progress')}return spiff.DOMElements.div({className:ns.join(' '),onKeyDown:ss.mkdel(this,this.$8),tabIndex:-1,key:'scrolling-layout-tree'},nk)},$b:function(nk){var nl=this.$2(nk,nk.get_zoneID()===this.props.selectedZone&&!this.props.shouldHideSelectionOnDrag);if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){if(this.$1()){return hE.create({renderContent:function(){return hG.create(nl)},layoutTreeItem:nk,dragInstanceFactory:this.props.dragInstanceFactory,reshowSelectionAfterDrag:this.props.reshowSelectionAfterDrag,hideSelectionOnDrag:this.props.hideSelectionOnDrag})}else if(!this.$0()||!ss.keyExists(this.props.floatingOrderMap,nk.get_zoneID())||this.props.inlineEditProps.currentEditingItem===nk.get_zoneID()||this.props.currentLayoutIsAutoGenerated){return hG.create(nl)}return hE.create({renderContent:function(){return hG.create(nl)},floatingOrder:this.props.floatingOrderMap[nk.get_zoneID()],layoutTreeItem:nk,dragInstanceFactory:this.props.dragInstanceFactory})}else{if(!this.$0()||!ss.keyExists(this.props.floatingOrderMap,nk.get_zoneID())||this.props.currentLayoutIsAutoGenerated){return hG.create(nl)}return hE.create({renderContent:function(){return hG.create(nl)},floatingOrder:this.props.floatingOrderMap[nk.get_zoneID()],layoutTreeItem:nk,dragInstanceFactory:this.props.dragInstanceFactory})}},$a:function(nk){if(this.$1()){var nl=ss.mkdel(this,function(){this.props.toggleExpand(nk.get_zoneID(),true)});var nm={autoExpand:nl,item:nk,getParentId:this.props.moveZoneWithinLayoutTreeProps.get_getParentId(),getNextSibling:this.props.moveZoneWithinLayoutTreeProps.get_getNextSibling(),getItemLevel:this.props.getItemLevel,parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,moveZoneInLayoutTree:this.props.moveZoneInLayoutTree};return hH.create(nm)}else{return null}},$7:function(nk){if(!ss.staticEquals(this.props.clearSelectedZone,null)){var nl=$(nk.target);var nm=nl.hasClass('tab-tree-component-node')||nl.parents('.'+'tab-tree-component-node').length>0;if(!nm&&!this.props.currentLayoutIsAutoGenerated){this.props.clearSelectedZone()}}},$d:function(nk){this.props.findPrevOrNextItemAndSelect(nk,false)},$6:function(nk){this.props.findPrevOrNextItemAndSelect(nk,true)},$8:function(nk){switch(nk.which){case 38:{this.$d(this.props.selectedZone);break}case 40:{this.$6(this.props.selectedZone);break}case 37:{this.props.toggleExpand(this.props.selectedZone,false);break}case 39:{this.props.toggleExpand(this.props.selectedZone,true);break}default:{return}}},$0:function(){if(ss.isValue(this.props.floatingOrderMap)){return ss.getKeyCount(this.props.floatingOrderMap)>1}return false},$1:function(){if(tab.FeatureFlags.isEnabled('LayoutTreeDragDrop')&&!this.props.currentLayoutIsAutoGenerated){return true}return false},$c:function(nk,nl){return hM.create(this.$4(nk,nl))},$5:function(nk){return $.extend({rootNode:nk,key:'Tree'+nk.get_item().get_itemKey()},this.$f)},$2:function(nk,nl){var nm=ss.mkdel(this,function(){this.props.selectZone(nk)});var nn=ss.mkdel(this,function(nq){this.props.showContextMenu(nk,nq)});var no=ss.mkdel(this,function(nq,nr){this.props.inlineEditProps.setZoneCustomFriendlyName(nq,nr)});var np=ss.mkdel(this,function(){this.props.inlineEditProps.saveEditingItem(nk.get_zoneID())});if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){return{key:ss.formatString('LayoutTreeItemComponent[itemKey: {0}]',nk.get_itemKey()),layoutTreeItem:nk,selected:nl,currentLayoutIsAutoGenerated:this.props.currentLayoutIsAutoGenerated,selectZone:nm,showContextMenu:nn,toggleExpand:this.props.toggleExpand,clearSelectedZone:this.props.clearSelectedZone,layoutTreeItemInlineEditProps:{isEditing:this.$9(nk),saveEditingItem:np,setZoneCustomFriendlyName:no,exitInlineEditingMode:this.props.inlineEditProps.exitInlineEditingMode},reorderInProgress:this.props.reorderDragInProgress}}else{return{key:ss.formatString('LayoutTreeItemComponent[itemKey: {0}]',nk.get_itemKey()),layoutTreeItem:nk,selected:nl,selectZone:nm,showContextMenu:nn,toggleExpand:this.props.toggleExpand,reorderInProgress:this.props.reorderDragInProgress}}},$4:function(nk,nl){return{layoutTreeItem:nk,expanded:nl,toggleExpand:this.props.toggleExpand,key:ss.formatString('LayoutTreeToggleComponent[itemKey: {0}]',nk.get_itemKey())}},$9:function(nk){return this.props.inlineEditProps.currentEditingItem===nk.get_zoneID()},$e:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},$3:function(nk,nl){return{modifyFloatingOrder:this.props.modifyFloatingOrder,floatingOrder:nk,renderContent:nl,key:ss.formatString('LayoutTreeReorderTargetComponent[floatOrder: {0}]',nk)}}});var hE=global.tab.LayoutTreeDragSourceComponent=ss.mkType(a,'tab.LayoutTreeDragSourceComponent',function(nk,nl){this.$1=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$1=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{render:function(){return spiff.DOMElements.div({className:'layout-tree-drag-source',ref:this.$1,key:'DragSource'+this.props.layoutTreeItem.get_itemKey(),'data-tb-test-id':'layout-tree-drag-source'+this.props.layoutTreeItem.get_name()},this.$0())},$0:function(){if(!ss.staticEquals(this.props.renderContent,null)){return this.props.renderContent()}return null},startDrag:function(nk){if(!ss.staticEquals(this.props.dragInstanceFactory,null)){if(!ss.isNullOrUndefined(this.props.hideSelectionOnDrag)){this.props.hideSelectionOnDrag()}return this.props.dragInstanceFactory(this.props.layoutTreeItem,this.props.floatingOrder,this.props.reshowSelectionAfterDrag)}return null},acceptsDragType:function(){return 1}},{create:function(nk){return React.createElement(hE,nk)}});var hF=global.tab.LayoutTreeFloatingReorderDragInstance=ss.mkType(a,'tab.LayoutTreeFloatingReorderDragInstance',function(nk,nl,nm,nn){this.floatingOrder=0;this.zoneId=0;this.$2$1=null;EventUtils.DragInstance.call(this,nk,nl);this.floatingOrder=nm;this.zoneId=nk.get_zoneID();this.set_reshowSelectionAction(nn)},{get_dragged:function(){return this.get_payload()},get_reshowSelectionAction:function(){return this.$2$1},set_reshowSelectionAction:function(nk){this.$2$1=nk},dropToNowhereAction:function(){if(ss.isValue(this.get_reshowSelectionAction())){this.get_reshowSelectionAction()()}},cancelDrag:function(){this.$0('current-target');this.$0('tab-ParentContainerHighlight')},$0:function(nk){var nl=$('.'+nk);if(ss.isValue(nl)){nl.removeClass(nk)}}});var hG=global.tab.LayoutTreeItemComponent=ss.mkType(a,'tab.LayoutTreeItemComponent',function(nk){spiff.PureRenderComponent.call(this,nk);this.state={customFriendlyName:this.props.layoutTreeItem.get_name()}},{render:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.$a);nk.rightClick=ss.mkdel(this,this.$0);var nl=nk;var nm=(this.props.selected?'selected':'');var nn=spiff.DOMElements.div({className:'tab-LayoutTreeNodeContent'+' '+this.props.layoutTreeItem.get_zoneID().toString(),key:this.props.layoutTreeItem.get_zoneID().toString(),ref:'tab-LayoutTreeNodeRef'},this.$e(),this.$f());if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){return EventUtils.EventForwarder.div(nl,this.$c(nm),nn)}else{return EventUtils.EventForwarder.div(nl,{className:'tab-LayoutTreeNode'+' '+nm,title:this.props.layoutTreeItem.get_name(),'data-test-id':'tab-LayoutTreeNode'},nn)}},$c:function(nk){return{className:'tab-LayoutTreeNode'+' '+nk,ref:'tab-LayoutTreeNodeRef',title:this.props.layoutTreeItem.get_name(),tabIndex:0,onKeyPress:ss.mkdel(this,this.$1),'data-test-id':'tab-LayoutTreeNode'}},$1:function(nk){if(nk.which===13&&(nk.metaKey||nk.ctrlKey)){this.props.layoutTreeItemInlineEditProps.saveEditingItem()}},$e:function(){var nk=this.$4();var nl=['tab-LayoutTreeNodeIcon',nk,this.$i()].join(' ');return spiff.DOMElements.div.apply(null,[{key:ss.formatString('LayoutTreeNodeIcon[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),className:nl}].concat(null))},$4:function(){var nk=this.props.layoutTreeItem;var nl=nk.get_zoneType();var nm=nl.toString();if(nl==='dashboard-object'){if(nk.get_dashboardObjectType()==='button'){nm=nk.get_iconData().toString()}else{nm=nk.get_dashboardObjectType().toString()}}nm=this.$5(nm);return nm},$5:function(nk){if(this.props.layoutTreeItem.get_zoneType()==='layout-flow'){if(this.props.layoutTreeItem.get_isHorizontal()){nk='horizontal'}else{nk='vertical'}}return nk},$f:function(){if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){return this.$d()}else{return spiff.DOMElements.div({key:ss.formatString('LayoutTreeNodeName[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),className:'tab-LayoutTreeNodeName'},this.$3())}},$a:function(nk){if(!ss.staticEquals(this.props.selectZone,null)){this.props.selectZone()}},$i:function(){return(this.props.currentLayoutIsAutoGenerated?'disabled':'')},$0:function(nk){if(!ss.staticEquals(this.props.showContextMenu,null)){var nl=ReactDOM.findDOMNode(this.refs['tab-LayoutTreeNodeRef']);this.props.showContextMenu(new spiff.ShowMenuOptions($(nl),false))}},$g:function(nk,nl){if(ss.isValue(nk)&&!!(ss.isValue(nl)&!this.props.reorderInProgress)){window.setTimeout(function(){var nm=nk.getBoundingClientRect();var nn=nl.getBoundingClientRect();var no=nm.x<nn.x||nm.y<nn.y||nm.x>nn.x+nn.width||nm.y+nm.height>nn.y+nn.height;if(no){nk.scrollIntoView()}},0)}},componentDidUpdate:function(){this.$2()},componentDidMount:function(){this.$2()},$2:function(){if(this.props.selected){var nk=ReactDOM.findDOMNode(this.refs['tab-LayoutTreeNodeRef']);var nl=$(nk).closest('.'+'layout-tree-section-content').get(0);this.$g(nk,nl)}},$3:function(){return ss.replaceAllString(this.props.layoutTreeItem.get_name(),' ',' ')},$d:function(){if(ss.isValue(this.props.layoutTreeItemInlineEditProps)){if(this.props.layoutTreeItemInlineEditProps.isEditing){return React.createElement(SharedWidgets.TextFieldWidget,{kind:'outline',className:'tab-EditableLayoutTreeNodeName',key:ss.formatString('LayoutTreeNodeName[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),testId:'item-inline-input',autoFocus:true,value:this.state.customFriendlyName,onBlur:ss.mkdel(this,this.$7),onKeyUp:ss.mkdel(this,this.$8),onKeyDown:ss.mkdel(this,this.$6),onChange:ss.mkdel(this,this.$9),selectOnFocus:true})}}return spiff.DOMElements.div({key:ss.formatString('LayoutTreeNodeName[itemKey: {0}]',this.props.layoutTreeItem.get_itemKey()),className:'tab-LayoutTreeNodeName',autoFocus:true,onDoubleClick:ss.mkdel(this,this.$b)},this.state.customFriendlyName)},$b:function(nk){this.props.layoutTreeItemInlineEditProps.saveEditingItem()},$9:function(nk){var nl=nk.target;this.setState({customFriendlyName:nl.value})},$7:function(nk){var nl=nk.target;this.$h();var nm=$(nk.currentTarget);var nn=nm.hasClass('tab-tree-component-node')||nm.parents('.'+'tab-tree-component-node').length>0;if(!nn){this.props.clearSelectedZone()}},$6:function(nk){if(nk.which===13){this.$h()}else if(nk.which===40||nk.which===38){nk.preventDefault();nk.stopPropagation()}},$8:function(nk){if(nk.which===27){this.setState({customFriendlyName:this.props.layoutTreeItem.get_name()});this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}},$h:function(){if(ss.referenceEquals(this.state.customFriendlyName,this.props.layoutTreeItem.get_name())){this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}else if(tab.MiscUtil.isNullOrEmpty$1(this.state.customFriendlyName)){this.setState({customFriendlyName:this.props.layoutTreeItem.get_name()});this.props.layoutTreeItemInlineEditProps.exitInlineEditingMode()}else{this.props.layoutTreeItemInlineEditProps.setZoneCustomFriendlyName(tsConfig.current_sheet_name,this.state.customFriendlyName)}}},{create:function(nk){return React.createElement(hG,nk)}});var hH=global.tab.LayoutTreeMultipleReorderTargetsComponent=ss.mkType(a,'tab.LayoutTreeMultipleReorderTargetsComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=this.$6();return spiff.DOMElements.div({className:'multiple-reorder-targets'},nk)},$6:function(){var nk=[];var nl=this.props.item;if(this.$3(nl)&&nl.get_children().length>0){nk.push(hJ.create(this.$1(nl,'no-indicator-target')));nk.push(hJ.create(this.$1(nl,'')));return nk}else if(this.$3(nl)&&nl.get_children().length===0){if(nl.get_zoneID()===this.props.rootTiledZoneId){nk.push(hJ.create(this.$1(nl,'no-indicator-target')))}nk.push(hJ.create(this.$1(nl,'')))}while(nl.get_parentZoneId()!==2147483647){nk.push(hJ.create(this.$2(nl,'')));if(!this.$5(nl)){break}if(nl.get_parentZoneId()===this.props.rootTiledZoneId){var nm=hJ.create(this.$2(nl,'no-indicator-target'));nk.push(nm)}nl=nl.parent}if(nl.get_parentZoneId()===2147483647&&nl.get_zoneID()!==this.props.rootTiledZoneId){nk.push(hJ.create(this.$2(nl,'')))}if(nl.get_zoneID()!==this.props.rootTiledZoneId){var nn=hJ.create(this.$2(nl,'no-indicator-target'));nk.push(nn)}nk.reverse();return nk},$3:function(nk){return nk.get_zoneType()==='layout-flow'||nk.get_zoneType()==='layout-basic'},$2:function(nk,nl){return this.$0(nk.get_zoneID(),this.props.getParentId(nk),this.props.getNextSibling(nk),nl)},$1:function(nk,nl){if(nk.get_children().length===0){return this.$0(nk.get_zoneID(),nk.get_zoneID(),2147483647,nl)}return this.$0(nk.get_zoneID(),nk.get_zoneID(),nk.get_children()[0].get_zoneID(),nl)},$5:function(nk){if(ss.isValue(nk.parent)){var nl=nk.parent.get_children();if(nl.length>0){return ss.equals(nk,nl[nl.length-1])}}return false},$0:function(nk,nl,nm,nn){var no='LayoutTreeReorderTargetComponent[zoneId: {0}] [parentId: {0}] [insertBeforeId: {0}]';return{key:ss.formatString(no,nk,nl,nm),zoneId:nk,parentId:nl,insertBeforeId:nm,autoExpand:this.props.autoExpand,getItemLevel:((nn==='')?this.$4(nk,nl):0),parentZoneIsDescendant:this.props.parentZoneIsDescendant,rootTiledZoneId:this.props.rootTiledZoneId,className:nn,moveZoneInLayoutTree:this.props.moveZoneInLayoutTree}},$4:function(nk,nl){if(nk===nl){return this.props.getItemLevel(nk)+1}return this.props.getItemLevel(nk)}},{create:function(nk){return React.createElement(hH,nk)}});var hI=global.tab.LayoutTreeNode=ss.mkType(a,'tab.LayoutTreeNode',function(nk,nl,nm){this.$2=null;this.$1$1=null;this.$1$2=null;this.$0(nk);this.$1(nl);this.$2=nm},{get_item:function(){return this.$1$1},$0:function(nk){this.$1$1=nk},get_children:function(){return this.$1$2},$1:function(nk){this.$1$2=nk},get_expanded:function(){if(ss.isValue(this.$2.get_model())){return this.$2.get_model().isItemExpanded(this.get_item().get_zoneID())}return false},get_key:function(){return this.get_item().get_itemKey()}});var hJ=global.tab.LayoutTreeReorderAllZonesTargetComponent=ss.mkType(a,'tab.LayoutTreeReorderAllZonesTargetComponent',function(nk,nl){this.$5=null;this.$6=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state={currentTarget:false};this.$5=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}))},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){var nk=this.$1();var nl=((this.props.zoneId===2147483647)?this.props.className:ss.formatString('parent-id-{0} insert-id-{1}',this.props.parentId,this.props.insertBeforeId));var nm=['layout-tree-reorder-target-all-zones'];nm.push(this.props.className);if(this.state.currentTarget&&!this.$3()){nm.push('current-target')}return spiff.DOMElements.div({className:nm.join(' '),key:'zoneId-'+this.props.zoneId+', parentId-'+this.props.parentId+', insertId-'+this.props.insertBeforeId,ref:this.$5,'data-tb-test-id':'layout-tree-reorder-target-all-zones'+nl,style:{width:'calc(100% - '+nk+'px)'}})},$1:function(){return this.props.getItemLevel*20},$3:function(){var nk=2147483647;return this.props.zoneId!==nk&&this.props.zoneId===this.props.parentId&&this.props.insertBeforeId===nk},$0:function(){this.$6=tab.MiscUtil.clearTimeout(this.$6)},dragOver:function(nk){if(ss.isInstanceOfType(nk,hF)){var nl=nk;this.$6=window.setTimeout(ss.mkdel(this,function(){if(!ss.staticEquals(this.props.autoExpand,null)&&nl.zoneId!==this.props.zoneId){this.props.autoExpand()}}),400);if(this.$4(nk)){this.shouldHighlightParent(true);this.setState({currentTarget:true});return this}}this.setState({currentTarget:false});return null},dragExit:function(nk){this.$0();var nl=nk;this.shouldHighlightParent(false);this.setState({currentTarget:false})},acceptDrop:function(nk){if(ss.isInstanceOfType(nk,hF)){if(this.$4(nk)){var nl=nk;this.props.moveZoneInLayoutTree(nl.zoneId,this.props.parentId,this.props.insertBeforeId)}}this.shouldHighlightParent(false);this.setState({currentTarget:false});return $.Deferred().resolve(true)},getDropTarget:function(nk){return this},getDropCursor:function(nk){return(this.$2(nk)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},shouldHighlightParent:function(nk){var nl=$('.tab-LayoutTreeNodeContent.'+this.props.parentId);if(ss.isValue(nl)){if(nk){nl.addClass('tab-ParentContainerHighlight')}else{nl.removeClass('tab-ParentContainerHighlight')}}},$2:function(nk){var nl=nk;var nm=nl.get_dragged();return nm.get_zoneID()!==this.props.rootTiledZoneId&&!this.props.parentZoneIsDescendant(nm,this.props.parentId)},$4:function(nk){var nl=nk;var nm=nl.get_dragged();return nl.zoneId!==this.props.insertBeforeId&&nl.zoneId!==this.props.zoneId&&this.$2(nk)}},{create:function(nk){return React.createElement(hJ,nk)}});var hK=global.tab.LayoutTreeReorderTargetComponent=ss.mkType(a,'tab.LayoutTreeReorderTargetComponent',function(nk,nl){this.$3=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state={currentTarget:false};this.$3=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}))},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){return spiff.DOMElements.div({className:'layout-tree-reorder-target-container'},spiff.DOMElements.div({className:'layout-tree-reorder-target'+' '+ss.formatString('float-order-{0}',this.props.floatingOrder),ref:this.$3}),this.$1(),this.$2(this.state.currentTarget))},$2:function(nk){var nl=['layout-tree-reorder-target-indicator'];if(nk){nl.push('current-target')}return spiff.DOMElements.div({key:'indicator',className:nl.join(' ')})},$1:function(){if(!ss.staticEquals(this.props.renderContent,null)){return this.props.renderContent()}return null},dragOver:function(nk){if(ss.isInstanceOfType(nk,hF)){var nl=nk;var nm=this.$0(nl);if(nm!==0){this.setState({currentTarget:true});return this}}this.setState({currentTarget:false});return null},dragExit:function(nk){this.setState({currentTarget:false})},acceptDrop:function(nk){if(ss.isInstanceOfType(nk,hF)){var nl=nk;var nm=this.$0(nl);if(nm!==0&&!ss.staticEquals(this.props.modifyFloatingOrder,null)){this.props.modifyFloatingOrder(nl.get_dragged().get_zoneID(),nm)}}this.setState({currentTarget:false});return $.Deferred().resolve(true)},$0:function(nk){var nl=nk.floatingOrder-this.props.floatingOrder;if(nl>0){nl=nl-1}return nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return spiff.CustomCursor.move}},{create:function(nk){return React.createElement(hK,nk)}});var hL=global.tab.LayoutTreeScrollHandler=ss.mkType(a,'tab.LayoutTreeScrollHandler',function(nk,nl){this.$5=800;this.$4=false;this.$3=null;this.$6=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$3=spiff.ReactRefs.attachDropTarget(ss.mkdel(this,function(){return this}));this.$4=false},{get_feedbackType:function(){return'dropfeedbackuponentry'},render:function(){if(this.props.sectionContentClass==='layout-tree-section-content'&&this.props.shouldRenderScrollHandlers){var nk={};if(this.props.heightPercent>0){nk.height=this.props.heightPercent+'%'}return spiff.DOMElements.div({className:'layoutTreeScrollHandler'+' '+this.$2(),style:nk,ref:this.$3})}return null},dragOver:function(nk){if(!this.$1(nk)){return null}if(this.$4){return this}this.$4=true;if(!ss.staticEquals(this.props.onHover,null)){this.props.onHover()}if(!ss.isValue(this.$6)){this.$6=tab.WindowHelper.setInterval(this.props.onHover,this.$5)}return this},dragExit:function(nk){this.$4=false;this.$0(nk)},acceptDrop:function(nk){this.$0(nk);return $.Deferred().resolve(true)},getDropTarget:function(nk){return this},getDropCursor:function(nk){return(this.$1(nk)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},$1:function(nk){var nl=ss.safeCast(nk,hF);return ss.isValue(nl)},$0:function(nk){if(!this.$1(nk)){return}this.$6=tab.MiscUtil.clearInterval(this.$6);$('.'+'layout-tree-section-content').stop()},$2:function(){var nk='';switch(this.props.direction){case 0:{nk='scrollUp';break}case 1:{nk='scrollDown';break}case 2:{nk='scrollLeft';break}case 3:{nk='scrollRight';break}}return nk}},{create:function(nk){return React.createElement(hL,nk)}});var hM=global.tab.LayoutTreeToggleComponent=ss.mkType(a,'tab.LayoutTreeToggleComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.handleTap);var nl=nk;var nm=(this.props.expanded?'expanded':'collapsed');var nn=ss.coalesce(this.props.layoutTreeItem.get_name(),'');return EventUtils.EventForwarder.div(nl,{key:'expandIcon',className:'tab-LayoutTreeExpandButton'+' '+nm,'data-tb-test-id':'tab-LayoutTreeExpandButton'+nn})},handleTap:function(nk){if(!ss.staticEquals(this.props.toggleExpand,null)){this.props.toggleExpand(this.props.layoutTreeItem.get_zoneID(),null)}}},{create:function(nk){return React.createElement(hM,nk)}});var hN=global.tab.LayoutTreeViewModel=ss.mkType(a,'tab.LayoutTreeViewModel',function(nk){this.$r=null;this.$t=null;this.$w=null;this.$u=null;this.$s=false;this.$q=null;this.$v=false;this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$r=nk;this.$t=this.$r.createChildModelHolder(tab.LayoutTreeModel).call(this.$r,function(nl){return nl.layoutTreeModel});this.$u=[];this.$w=null;this.$s=false;this.$v=false;EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$c));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$b));this.disposables.add$1(this.$t);this.disposables.add$1(this.$r.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$o)).addModelChangedHandler(ss.mkdel(this,this.$e)).addEventBinding(ss.mkdel(this,function(nl){nl.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.add_activeZoneChanged(ss.mkdel(this,this.$o));nl.add_dashboardNameChanged(ss.mkdel(this,this.$e));nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps));nl.remove_activeZoneChanged(ss.mkdel(this,this.$o));nl.remove_dashboardNameChanged(ss.mkdel(this,this.$e));nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})));this.disposables.add$1(this.$t.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$i)).addEventBinding(ss.mkdel(this,function(nl){nl.add_layoutTreeUpdated(ss.mkdel(this,this.$i))}),ss.mkdel(this,function(nl){nl.remove_layoutTreeUpdated(ss.mkdel(this,this.$i))})));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$c));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$b))}))},{add_updateScrollHandlerVisibility:function(nk){this.$3$1=ss.delegateCombine(this.$3$1,nk)},remove_updateScrollHandlerVisibility:function(nk){this.$3$1=ss.delegateRemove(this.$3$1,nk)},$e:function(){this.$q='';var nk=this.$r.get_model();if(ss.isValue(nk)&&nk.get_isDashboard()){this.$q=nk.get_sheetName()}this.incrementProps()},createInitialProps:function(){return{modifyFloatingOrder:ss.mkdel(this,this.$d),dragInstanceFactory:hN.$0,toggleExpand:ss.mkdel(this,this.$m),selectZone:ss.mkdel(this,this.selectZone),showContextMenu:ss.mkdel(this,this.showContextMenu),findPrevOrNextItemAndSelect:ss.mkdel(this,this.findPrevOrNextItemAndSelect),key:'layout-tree',clearSelectedZone:ss.mkdel(this,this.$4),moveZoneWithinLayoutTreeProps:new iI(ss.mkdel(this,this.$a),ss.mkdel(this,this.$9)),currentLayoutIsAutoGenerated:this.$p(),getItemLevel:ss.mkdel(this,this.$7),parentZoneIsDescendant:ss.mkdel(this,this.$h),shouldHideSelectionOnDrag:false,hideSelectionOnDrag:ss.mkdel(this,this.$f),reshowSelectionAfterDrag:ss.mkdel(this,this.$j),moveZoneInLayoutTree:ss.mkdel(this,this.moveZoneInLayoutTree)}},createUpdatedProps:function(){var nk=false;var nl=0;var nm=null;if(ss.isValue(this.$r.get_model())){nk=this.$r.get_model().get_currentDeviceLayout()!=='default'||this.$p();nl=this.$r.get_model().get_activeZoneID()}if(ss.isValue(this.$t.get_model())){nm=this.$t.get_model().floatingOrderMap}return{disableFeedback:nk,reorderDragInProgress:this.$s,selectedZone:nl,rootNodes:this.$u,rootTiledZoneId:this.getRootTiledZoneId(),floatingOrderMap:nm,layoutTreeTitle:tab.Strings.LayoutTreeSectionTitle,layoutTreeSubtitle:this.$q,inlineEditProps:{currentEditingItem:this.$6(),saveEditingItem:ss.mkdel(this,this.$k),setZoneCustomFriendlyName:ss.mkdel(this,this.$l),exitInlineEditingMode:ss.mkdel(this,this.$5)},moveZoneWithinLayoutTreeProps:new iI(ss.mkdel(this,this.$a),ss.mkdel(this,this.$9)),currentLayoutIsAutoGenerated:this.$p(),getItemLevel:ss.mkdel(this,this.$7),parentZoneIsDescendant:ss.mkdel(this,this.$h),shouldHideSelectionOnDrag:this.$v,hideSelectionOnDrag:ss.mkdel(this,this.$f),reshowSelectionAfterDrag:ss.mkdel(this,this.$j),moveZoneInLayoutTree:ss.mkdel(this,this.moveZoneInLayoutTree)}},$i:function(){if(ss.isValue(this.$t.get_model())){this.$u=this.$t.get_model().rootNodes.map(ss.mkdel(this,this.$n));this.$w=this.$t.get_model().get_zoneCommonList()}this.incrementProps()},$7:function(nk){if(ss.isValue(this.$t.get_model())&&nk!==2147483647){return this.$t.get_model().getItemLevel(nk)}return 0},$a:function(nk){if(ss.isNullOrUndefined(nk)){return 2147483647}return nk.get_parentZoneId()},getRootTiledZoneId:function(){for(var nk=0;nk<this.$u.length;nk++){var nl=this.$u[nk];if(!nl.get_item().get_isFloating()){return nl.get_item().get_zoneID()}}return 2147483647},$9:function(nk){if(ss.isNullOrUndefined(nk)){if(ss.isNullOrUndefined(this.$t.get_model())||tab.MiscUtil.isNullOrEmpty$3(this.$t.get_model().rootNodes)){return 2147483647}return this.$t.get_model().rootNodes[0].get_zoneID()}else{var nl=this.$8(nk);return(ss.isNullOrUndefined(nl)?2147483647:nl.get_zoneID())}},$8:function(nk){if(nk.get_parentZoneId()===2147483647&&ss.isValue(this.$t.get_model())){var nl=this.$t.get_model().floatingOrderMap;var nm=nl[nk.get_zoneID()];var nn=new ss.ObjectEnumerator(nl);try{while(nn.moveNext()){var no=nn.current();if(no.value===nm+1){return this.$t.get_model().getItemFromIndex(no.key)}}}finally{nn.dispose()}}else if(ss.isValue(nk.parent)){var np=nk.parent.get_children();for(var nq=0;nq<np.length;nq++){if(np[nq].get_zoneID()===nk.get_zoneID()){if(nq+1<np.length){return np[nq+1]}}}}return null},$6:function(){if(ss.isValue(this.$t.get_model())){return this.$t.get_model().currentEditingItem}return 2147483647},$n:function(nk){return new hI(nk,_.map(nk.get_children(),ss.mkdel(this,this.$n)),this.$t)},selectZone:function(nk){if((tab.FeatureFlags.isEnabled('ItemHierarchyForBE')||this.$g())&&!this.$p()){tab.SelectionClientCommands.setActiveZone(nk.get_zoneID(),'replace',null)}},showContextMenu:function(nk,nl){if((tab.FeatureFlags.isEnabled('ItemHierarchyForBE')||this.$g())&&!this.$p()){var nm=function(nn){var no=nn.commands;var np=tab.WidgetUtil.menuViewModelFromCommands(no,tab.WidgetUtil.commandMenuItemClicked,null,null,null);np.show(nl)};tab.SheetClientCommands.getLayoutTreeContextMenu(this.$r.get_model().get_sheetName(),nk.get_zoneID(),nm);tab.SelectionClientCommands.setActiveZone(nk.get_zoneID(),'replace',null)}},moveZoneInLayoutTree:function(nk,nl,nm){tab.DashboardZoneCommands.moveZoneWithinLayoutTree(nk,nl,nm).done(ss.mkdel(this,this.$j))},findPrevOrNextItemAndSelect:function(nk,nl){var nm=null;for(var nn=0;nn<this.$w.length;nn++){if(this.$w[nn].zoneId===nk){if(nl&&nn+1<this.$w.length){nm=this.$t.get_model().getItemFromIndex(this.$w[nn+1].zoneId)}if(!nl&&nn>1){nm=this.$t.get_model().getItemFromIndex(this.$w[nn-1].zoneId)}}}if(ss.isValue(nm)){this.selectZone(nm)}},$g:function(){return ss.isValue(this.$r.get_model())&&this.$r.get_model().get_currentDeviceLayout()==='default'},$o:function(){this.$3();this.incrementProps()},$j:function(){if(this.$v){this.$v=false;this.incrementProps()}},$f:function(){if(!this.$v){this.$v=true;this.incrementProps()}},$c:function(nk){var nl=ss.isInstanceOfType(nk,hF);if(this.$s!==nl){this.$s=nl;this.incrementProps()}this.raiseActionEvent$1(Boolean).call(this,this.$3$1,true)},$b:function(nk){if(this.$s){this.$s=false;this.incrementProps()}this.raiseActionEvent$1(Boolean).call(this,this.$3$1,false);if(nk.canceled){this.$j()}},$m:function(nk,nl){if(!this.$p()){var nm=this.$t.get_model();var nn=nm.getItemFromIndex(nk);if(nn.get_children().length>0&&ss.isValue(this.$r.get_model())&&ss.isValue(nm)){var no=nl;if(ss.isNullOrUndefined(no)){no=!nm.isItemExpanded(nk)}var np=no;nm.saveExpandedState(nn.get_zoneID(),np);this.incrementProps()}}},$k:function(nk){if(!this.$p()){var nl=this.$t.get_model();nl.saveCurrentEditingItem(nk);this.incrementProps()}},$d:function(nk,nl){tab.DashboardZoneCommands.modifyZoneZOrder(nk,'rel-pos',nl)},$3:function(){if(ss.isValue(this.$t.get_model())){this.$t.get_model().expandTreeToCurrent(this.$r.get_model().get_activeZoneID())}},$4:function(){tab.SelectionClientCommands.clearActiveZone()},$p:function(){return ss.isValue(this.$r.get_model())&&this.$r.get_model().get_isCurrentLayoutAutoGenerated()},$h:function(nk,nl){if(nk.get_zoneID()===nl){return true}if(nk.get_zoneType()==='layout-flow'||nk.get_zoneType()==='layout-basic'||ss.isValue(nk.get_children())&&nk.get_children().length>0){var nm=nk.get_children();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(this.$h(no,nl)){return true}}}return false},$l:function(nk,nl){var nm=this.$6();if(nm!==2147483647){var nn=this.$r.get_model().getZone(nm).get_zoneCommonModel();var no=function(np){var nq=np.makeMutablePresModel(nn,false);nq.name=nl};tab.DashboardZoneCommands.setZoneCustomFriendlyName(nm,nk,nl,no)}this.$5()},$5:function(){this.$t.get_model().saveCurrentEditingItem(2147483647);this.incrementProps()}},{$0:function(nk,nl,nm){var nn=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[n,hG,Object])).call(null,[new n(nk)]);return new hF(nk,nn,nl,nm)}});var hO=global.tab.LeftHybridSidePaneProxy=ss.mkType(a,'tab.LeftHybridSidePaneProxy');var hP=global.tab.LeftHybridSidePaneProxyHelper=ss.mkType(a,'tab.LeftHybridSidePaneProxyHelper',function(nk,nl,nm,nn,no,np,nq){tab.BaseHybridSidePaneProxyHelper.call(this,nk,nl,nm,nn,no,np,nq)},{get_containerClass:function(){return'tabAuthLeftPane'},openPane:function(nk){if(this.isShown()||ss.isNullOrUndefined(bY.get_instance())){return}if(tab.FormatContainerModel.get_formatPaneModel().get_isVisible()){tab.FormatCommands.hideFormatPane()}var nl=$('<div></div>').addClass(this.get_containerClass());bY.get_instance().get_leftArea().get_viewModel().set_sidePaneExpansionState('expanded');bY.get_instance().get_leftArea().get_floatingLeftPanel().addFloatingPanelToDom$1(nl);bY.get_instance().get_leftArea().get_floatingLeftPanel().add_contentChanged(ss.mkdel(this,this.closePane));nl.get(0).setAttribute(this.sidePaneIdAttr,this.sidePaneId);this.openCallback(nk,nl.get(0))},updatePane:function(nk){if(!this.isShown()){return}this.updateCallback(nk,this.getContainer().get(0))},closePane:function(){if(!this.isShown()){return}var nk=this.getContainer();ReactDOM.unmountComponentAtNode(nk.get(0));nk.remove();bY.get_instance().get_leftArea().get_floatingLeftPanel().remove_contentChanged(ss.mkdel(this,this.closePane));this.closeCallback()}});var hQ=global.tab.LeftPanelView=ss.mkType(a,'tab.LeftPanelView',function(nk){ss.makeGenericType(spiff.BaseView$1,[hR]).call(this,nk,new spiff.Template($("<div class='tabAuthLeftPanel'></div>")))});var hR=global.tab.LeftPanelViewModel=ss.mkType(a,'tab.LeftPanelViewModel',function(){this.$6=null;this.$5=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.set_currentSheetType(tab.ApplicationModel.get_instance().get_workbook().get_sheetType());this.$6={};this.$6['worksheet']={};this.$6['dashboard']={};this.$6['story']={};this.set_paneTypesForSheet({});this.get_paneTypesForSheet()['worksheet']=[0,1];this.get_paneTypesForSheet()['dashboard']=[3,6];this.get_paneTypesForSheet()['story']=[4,5];this.$1();if(!tsConfig.is_mobile){tab.FormatContainerModel.get_formatPaneModel().add_updated(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.FormatContainerModel.get_formatPaneModel().remove_updated(ss.mkdel(this,this.$4))})))}},{add_sheetTypeChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_sheetTypeChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_formatPaneCreated:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_formatPaneCreated:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_currentSheetType:function(){return this.$2$3},set_currentSheetType:function(nk){this.$2$3=nk},get_paneTypesForSheet:function(){return this.$2$4},set_paneTypesForSheet:function(nk){this.$2$4=nk},get_schemaViewerViewModel:function(){return this.$0(0)},get_analyticsPaneViewModel:function(){return this.$0(1)},get_dashboardPaneViewModel:function(){return this.$0(3)},get_layoutPaneViewModel:function(){return this.$0(6)},get_formattingPaneViewModel:function(){return this.$5.promise()},get_storyContentPaneViewModel:function(){return this.$0(4)},get_storyLayoutPaneViewModel:function(){return this.$0(5)},get_paneViewModels:function(){return this.$6},get_activePanes:function(){var nk=this.get_currentSheetType();var nl=[];var nm=this.get_paneTypesForSheet()[nk];for(var nn=0;nn<nm.length;nn++){var no=nm[nn];nl.push(this.get_paneViewModels()[nk][no])}return nl},dispose:function(){this.$2('worksheet');this.$2('dashboard');this.$2('story');ss.clearKeys(this.get_paneViewModels());spiff.BaseViewModel.prototype.dispose.call(this)},$2:function(nk){var nl=this.get_paneViewModels()[nk];if(ss.isNullOrUndefined(nl)||ss.getKeyCount(nl)===0){return}var nm=this.get_paneTypesForSheet()[nk];for(var nn=0;nn<nm.length;nn++){var no=nm[nn];nl[no].done(function(np){if(ss.isValue(np)){tab.MiscUtil.dispose$1(np.get_contentViewModel())}})}},$1:function(){var nk=ss.Enum.getValues(bn);for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(nm===2){this.$5=$.Deferred()}else{var nn={};if(this.$3(nm,nn)){this.$6[nn.$][nm]=$.Deferred()}}}},updatePaneForSheetType:function(nk){this.set_currentSheetType(nk);this.raiseActionEvent$1(Object).call(this,this.$2$1,nk)},setPaneViewModel:function(nk,nl){var nm={};var nn=this.$3(nk,nm);if(nk===2){this.$5.resolve(nl);this.raiseActionEvent(this.$2$2)}else if(nn){this.$6[nm.$][nk].resolve(nl)}},$0:function(nk){var nl={};var nm=this.$3(nk,nl);if(!nm){var nn=$.Deferred();var no=null;nn.resolve(no);return nn.promise()}return this.get_paneViewModels()[nl.$][nk]},$4:function(){if(tab.FormatContainerModel.get_formatPaneModel().get_isVisible()){if(this.$5.state()!=='resolved'){this.setPaneViewModel(2,gs.create(tab.FormatContainerModel.get_formatPaneModel()))}else{this.get_formattingPaneViewModel().done(function(nk){nk.update(tab.FormatContainerModel.get_formatPaneModel())})}}},$3:function(nk,nl){var nm=_.keys(this.get_paneTypesForSheet());for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(_.contains(this.get_paneTypesForSheet()[no],nk)){nl.$=no;return true}}nl.$='worksheet';return false}});var hS=global.tab.LegacyDashboardZoneObjectsProvider=ss.mkType(a,'tab.LegacyDashboardZoneObjectsProvider',function(){eA.call(this)},{createZoneObjectsViewModels:function(nk,nl,nm){var nn=[];nn.push(eC.horizontalZoneObjectViewModel(nk));var no=nn;no.push(eC.blankZoneObjectViewModel(nk));no.push(eC.verticalZoneObjectViewModel(nk));this.addNavigationButtonZoneForNonFlyOutMenu(nl,nk,no);no.push(eC.textZoneObjectViewModel(nk));if(!tab.FeatureFlags.isEnabled('DashboardFlyoutMenu')){this.addExportButtonZoneObjectViewModel(nl,nk,no)}no.push(eC.imageZoneObjectViewModel(nk));if(tab.FeatureFlags.isEnabled('DashboardCarouselObject')){no.push(eC.carouselZoneObjectViewModel(nk))}no.push(eC.extensionZoneObjectViewModel(nk));if(tab.FeatureFlags.isEnabled('SnapshotButton')&&!tab.FeatureFlags.isEnabled('DashboardFlyoutMenu')){this.addSnapshotButtonZoneObjectViewModel(nl,nk,no)}if(tab.FeatureFlags.isEnabled('DashboardFlyoutMenu')){this.addFlyoutMenuObjectViewModel(nl,nk,no)}no.push(eC.webZoneObjectViewModel(nk));if(tab.FeatureFlags.isEnabled('NLPDashboardObject')){this.addObjectsSpecifiedInDashboardObjectPanePresModel(nl,nk,no,nm)}return no}});var hT=global.tab.LegacyEdgeWithTargetHandleRender=ss.mkType(a,'tab.LegacyEdgeWithTargetHandleRender',function(nk,nl,nm,nn,no,np){this.$2=null;this.$3=null;mQ.call(this);this.$3=nk;this.chromeRect=nl;this.className=nm;this.side=nn;this.$2=no;this.zindex=np},{render:function(){return this.renderEdge(this.$1())},$1:function(){var nk=fv.createLine(5,3,50-5,3);var nl=fv.createLine(5,3+3+1,50-5,3+3+1);var nm=fv.isTargetInverted(this.chromeRect.t,10,this.side);var nn=(nm?'tabAuthZoneDragTarget-inverted':'');var no=spiff.DOMElements.svg({className:'DragHandle-svg',height:11,width:50},nk,nl);var np=fv.shouldShowTarget(this.chromeRect.t,10,this.side,this.$3.dragEnabled);var nq=fv.generateZoneChromeStyleProperties(this.chromeRect.l,this.chromeRect.w,this.$3.dashWidth,this.$3.dashboardContentWidth,38,np);var nr={className:[nn,'tabAuthZoneDragTarget'].join(' '),style:nq};var ns={className:'tabAuthZoneDragTargetIcon',key:this.side.toString(),ref:this.$2};return this.$0(nr,ns,no)},$0:function(nk,nl,nm){if(!this.$3.areMultipleZonesSelected){var nn=new EventUtils.EventHandleSpec;nn.doubleTap=ss.mkdel(this,function(no){this.$3.selectParent()});return EventUtils.EventForwarder.div(nn,nk,spiff.DOMElements.div(nl,nm))}else{return spiff.DOMElements.div(nk,spiff.DOMElements.div(nl,nm))}}});var hU=global.tab.LevelComboBoxUpdater=ss.mkType(a,'tab.LevelComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.isSelectionInvalid=false;this.invalidFieldCaption=null;this.specialCaption=null;this.specialValue=null},{update:function(nk){this.$0();var nl=[];var nm=!ss.isNullOrEmptyString(this.specialCaption);if(nm){nl.push(new spiff.ComboBoxItem(null,this.specialCaption,this.specialValue,null,null))}for(var nn=0,no=this.fieldNames.length;nn<no;nn++){nl.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nn],this.fieldNames[nn],null,null))}nk.setItems(nl);if(this.isSelectionInvalid){nk.set_selectedItem(new spiff.ComboBoxItem(null,this.invalidFieldCaption,null,null,null))}else if(nm||this.selectionIndex>=0){nk.set_selectedItem(nk.get_items()[this.selectionIndex+(nm?1:0)])}nk.set_isSelectionInvalid(this.isSelectionInvalid);nk.set_enabled(true)},$0:function(){tab.Param.verifyValue(this.fieldNames,'FieldNames');tab.Param.verifyValue(this.fieldCaptions,'FieldCaptions');tab.Param.verifyValue(this.selectionIndex,'SelectionIndex');if(!ss.isNullOrEmptyString(this.specialCaption)){}if(this.isSelectionInvalid){}}});var hV=global.tab.LinePatternPickerComponent=ss.mkType(a,'tab.LinePatternPickerComponent',function(nk,nl){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[hW,Object,Object]).call(this,tab.ObjectRegistry.newView(hW).call(null,[new hX]),nk,nl);this.get_widget().get_viewModel().set_selectedLinePattern(nk.selectedPattern);this.get_widget().get_viewModel().addUpdated(nk.handlePatternSelected)},{handleWidgetPropertyChanged:function(nk,nl){},updateWidgetState:function(nk){this.get_widget().get_viewModel().set_selectedLinePattern(nk.selectedPattern)}},{create:function(nk){return React.createElement(hV,nk)}});var hW=global.tab.LinePatternPickerView=ss.mkType(a,'tab.LinePatternPickerView',function(nk){this.$9=['solid','dashed','dotted'];ss.makeGenericType(lE,[hX]).call(this,nk,spiff.Template.fromHtml("<div class='tabLinePatternPicker'></div>"))},{$8:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.updateContent()},onViewModelPropertyChanged:function(nk,nl){this.updateContent()},createPicker:function(){spiff.ClickHandler.targetAndClick($('<div></div>').html(tab.Strings.LinePatternNone).addClass('tabLinePatternTextButton').addClass('tabStylePickerButton').toggleClass('tabStylePickerButtonSelected','none'===this.$8().get_selectedLinePattern()).appendTo(this.element),this.$7('none'));for(var nk=0;nk<this.$9.length;nk++){var nl=this.$9[nk];var nm=hW.patternToSpriteName(nl);var nn=$('<div></div>').addClass('tabLinePattern').addClass('tabStylePickerButton').toggleClass('tabStylePickerButtonSelected',nl===this.$8().get_selectedLinePattern()).appendTo(this.element);$('<div></div>').addClass(nm).appendTo(nn);spiff.ClickHandler.targetAndClick(nn,this.$7(nl))}},$7:function(nk){return ss.mkdel(this,function(){this.$8().set_selectedLinePattern(nk)})},updateContent:function(){this.removePicker();this.createPicker()},removePicker:function(){this.element.children().remove()}},{patternToSpriteName:function(nk){return'linepattern-'+nk.toString()}});var hX=global.tab.LinePatternPickerViewModel=ss.mkType(a,'tab.LinePatternPickerViewModel',function(){this.$0='none';this.$2$1=null;spiff.BaseViewModel.call(this)},{add_selectedLinePatternUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_selectedLinePatternUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_selectedLinePattern:function(){return this.$0},set_selectedLinePattern:function(nk){if(this.$0===nk){return}this.$0=nk;this.raiseActionEvent$1(Object).call(this,this.$2$1,nk);this.notifyPropertyChanged('SelectedLinePattern')},addUpdated:function(nk){this.add_selectedLinePatternUpdated(nk);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_selectedLinePatternUpdated(nk)})))}},{stringToPattern:function(nk){switch(nk){case'none':{return'none'}case'solid':{return'solid'}case'dashed':{return'dashed'}case'dotted':{return'dotted'}default:{return'none'}}}});var hY=global.tab.LinePatternUtils=ss.mkType(a,'tab.LinePatternUtils',null,null,{linePatternToBorderStyle:function(nk){switch(nk){case'none':{return'bs-none'}case'solid':{return'bs-solid'}case'dotted':{return'bs-dotted'}case'dashed':{return'bs-dashed'}}return'bs-none'},borderStyleToLinePattern:function(nk){switch(nk){case'bs-dashed':{return'dashed'}case'bs-dotted':{return'dotted'}case'bs-none':{return'none'}case'bs-solid':{return'solid'}}return'none'}});var hZ=global.tab.LinePickerPopupView=ss.mkType(a,'tab.LinePickerPopupView',function(nk){this.views=null;ss.makeGenericType(spiff.BaseView$1,[Object]).call(this,nk,new ib);this.get_viewModel().add_updated(ss.mkdel(this,this.update));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.update))})))},{get_linePickerTemplate:function(){return this.get_template()},addToDom:function(nk){spiff.Widget.prototype.addToDom.call(this,nk);this.$7()},update:function(){this.$8();this.$7()},dispose:function(){this.$8();ss.makeGenericType(spiff.BaseView$1,[Object]).prototype.dispose.call(this)},$8:function(){tab.MiscUtil.dispose(this.views)},$7:function(){this.views=[];var nk=this.get_viewModel().get_childViewModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(ss.isNullOrUndefined(nm)){continue}var nn=tab.ObjectRegistry.newView(gl).call(null,[nm]);this.views.push(nn);switch(nm.get_widgetKey()){case'dividerVisibility':case'lineVisibility':{nn.addToDom(this.get_linePickerTemplate().get_lineVisibility());break}case'linePattern':{nn.addToDom(this.get_linePickerTemplate().get_linePattern());break}case'lineSize':{nn.addToDom(this.get_linePickerTemplate().get_lineSize());break}case'colorSwatch':{nn.addToDom(this.get_linePickerTemplate().get_lineColor());break}}}}});var ia=global.tab.LinePickerPreviewTemplate=ss.mkType(a,'tab.LinePickerPreviewTemplate',function(){this.lineDescription=null;this.lineSwatch=null;spiff.Template.call(this,$("<div class='tabLinePickerPreview'><div class='tabLinePickerDescription'></div><div class='tabLinePickerSwatch'></div></div>"));this.lineDescription=this.getElementBySelector('.tabLinePickerDescription');this.lineSwatch=this.getElementBySelector('.tabLinePickerSwatch');this.lineDescription.hide();this.lineSwatch.hide()});var ib=global.tab.LinePickerTemplate=ss.mkType(a,'tab.LinePickerTemplate',function(){this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.Template.call(this,$("<div class='tabLinePickerContainer'>\n            <div class='tabLineVisibilityContainer'></div>\n            <div class='tabLinePatternContainer'></div>\n            <div class='tabLineSizeContainer'></div>\n            <div class='tabLineColorPickerContainer'></div>\n        </div>"));this.set_lineVisibility(this.getElementBySelector('.tabLineVisibilityContainer'));this.set_linePattern(this.getElementBySelector('.tabLinePatternContainer'));this.set_lineSize(this.getElementBySelector('.tabLineSizeContainer'));this.set_lineColor(this.getElementBySelector('.tabLineColorPickerContainer'))},{get_lineVisibility:function(){return this.$2$1},set_lineVisibility:function(nk){this.$2$1=nk},get_linePattern:function(){return this.$2$2},set_linePattern:function(nk){this.$2$2=nk},get_lineSize:function(){return this.$2$3},set_lineSize:function(nk){this.$2$3=nk},get_lineColor:function(){return this.$2$4},set_lineColor:function(nk){this.$2$4=nk}});var ic=global.tab.LineTypeComponent=ss.mkType(a,'tab.LineTypeComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tabAuthLineTypeContainer'},spiff.DOMElements.div({className:'tabAuthPrimitiveOptionHeader'},spiff.DOMElements.div({className:'tabAuthPrimitiveOptionLabel'},tab.Strings.LineTypeHeading)),spiff.DOMElements.div({className:'tabAuthLineTypesChoices'},this.$1()))},$1:function(){var nk=[];this.props.items.forEach(ss.mkdel(this,function(nl){if(nl.isVisible){nk.push(this.$0(nl))}}));return Array.prototype.slice.call(nk)},$0:function(nk){var nl=ic.getClassNameForMode(nk.interpolationMode);var nm=nl;if(nk.isSelected){nl+=' '+'selected'}if(!nk.isEnabled){nl+=' '+'disabled'}var nn=new EventUtils.EventHandleSpec;nn.tap=ss.mkdel(this,function(no){this.$2(nk.interpolationMode)});return EventUtils.EventForwarder.div(nn,{className:nl,title:nk.tooltip,key:nm},spiff.DOMElements.div({className:'tab-Icon',key:'tab-Icon'}),spiff.DOMElements.div({className:'tab-HitTestArea',key:'tab-HitTestArea'}))},$2:function(nk){if(this.props.items.filter(function(nl){return nl.interpolationMode===nk&&nl.isEnabled}).length===1){this.props.onChangeLineInterpolationMode(nk)}}},{getClassNameForMode:function(nk){var nl='';switch(nk){case'lim-linear':{nl='tabAuthPrimitiveOptionLinear';break}case'lim-step':{nl='tabAuthPrimitiveOptionStep';break}case'lim-jump':{nl='tabAuthPrimitiveOptionJump';break}default:{break}}return nl}});var id=global.tab.LineTypeViewModel=ss.mkType(a,'tab.LineTypeViewModel',function(nk){this.$3=null;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$3=nk;this.$1(null)},{update:function(nk){this.$3=nk;this.$1(null);this.updateProps()},$2:function(nk){this.$1(nk);this.updateProps();var nl=new tab.ChangeLineInterpolationCmd;nl.c['lineInterpolationMode']=nk;nl.c['paneSpec']=this.$3.get_id()|0;nl.invoke()},$1:function(nk){var nl=this.$3.get_sortEncodingOptions();var nm=nl.lineInterpolationModeUiItemSet;var nn=nm.length;var no=new Array(nn);for(var np=0;np<nn;np++){var nq=nm[np];no[np]={interpolationMode:nq.lineInterpolationMode,isEnabled:nq.isEnabled,isSelected:(ss.isValue(nk)?(nq.lineInterpolationMode===ss.unbox(nk)):nq.isSelected),isVisible:nq.isVisible,tooltip:nq.tooltipText}}this.set_Props({items:no,onChangeLineInterpolationMode:ss.mkdel(this,this.$2)})}});var ie=global.tab.MapLayersPaneComponent=ss.mkType(a,'tab.MapLayersPaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=new tab.WidgetPluginContainerProps;nk.moduleName=ie.$1;var nl={};nl['presModel']=this.props.mapLayersPanePresModel;nl['originIsWeb']=true;nk.initialProps=nl;return React.createElement(tab.WidgetPluginContainer,nk)}});var ig=global.tab.MapLayersPaneProps=ss.mkType(a,'tab.MapLayersPaneProps',function(){this.mapLayersPanePresModel=null});var ih=global.tab.MapLayersPaneProxy=ss.mkType(a,'tab.MapLayersPaneProxy',function(){new hP(ih.id,ss.mkdel(this,this.openCallback),null,ss.mkdel(this,this.closeCallback),'doc:open-map-layers-pane-event',null,'doc:close-map-layers-pane-event')},{openCallback:function(nk,nl){var nm=new ig;nm.mapLayersPanePresModel=nk;var nn=React.createElement(ie,nm);ReactDOM.render(nn,nl)},closeCallback:function(){var nk=new tab.CloseMapLayersPaneCmd;nk.invoke()}});var ii=global.tab.MapOptionsCheckBoxEventProperties=ss.mkType(a,'tab.MapOptionsCheckBoxEventProperties');var ij=global.tab.MapOptionsComponent=ss.mkType(a,'tab.MapOptionsComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=this.$0();var nl=React.createElement(SharedWidgets.DialogWidget,nk);return nl},$0:function(){var nk={testId:'mapOptionsDialog',isModal:true,type:0,dialogWidth:200,showCloseButton:true,title:this.props.dialogTitle,positioningBehavior:2,zIndex:1000,handleGlassClick:ss.mkdel(this,this.$1),isGlassTransparent:true,onCloseRequest:ss.mkdel(this,this.$1)};var nl=[this.$5(),this.$6('MapSearch-LayerControl'),this.$3(),this.$6('LayerControl-ZoomControl'),this.$8(),this.$6('ZoomControl-MapScale'),this.$4(),this.$7()];nk.children=nl;return nk},$2:function(){var nk=[];nk.push({label:tab.Strings.MapVizNavCheckBox,checked:this.props.isToggleVisToolbarChecked,handleChange:this.props.setAllowPanAndZoom,testId:'MapVizNavToolbarVis'});if(this.props.isGeoSearchVisible){nk.push({label:tab.Strings.MapGeoSearchVizCheckBox,checked:this.props.isGeoSearchChecked,handleChange:this.props.setMapSearchVisibility,testId:'MapGeoSearchVis'})}nk.push({label:tab.Strings.MapFloatingToolbarVizCheckBox,checked:this.props.isFloatingToolbarChecked,handleChange:this.props.setFloatingToolbarVisibility,testId:'MapFloatingToolbarVis'});if(this.props.isMapScaleVisible){nk.push({label:tab.Strings.MapScaleVizibilityCheckBox,checked:this.props.isMapScaleChecked,handleChange:this.props.setMapScaleVisibility,testId:'MapScaleVis'})}for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.containerStyle={marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace}}var nn={checkBoxWithLabelPropsList:nk};nn.key='mapOptionsCheckboxPropsList';return React.createElement(SharedWidgets.CheckBoxWithLabelGroupWidget,nn)},$6:function(nk){return spiff.DOMElements.hr({className:'mapOptionsDialogSeparator_'+nk,style:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace,border:'none',backgroundColor:SharedWidgets.TabStyles.Colors.L5,height:'1px'},key:'MapOptionsDialogSeparator_'+nk})},$5:function(){if(!this.props.isGeoSearchVisible){return null}var nk={label:tab.Strings.MapGeoSearchVizCheckBox,checked:this.props.isGeoSearchChecked,handleChange:this.props.setMapSearchVisibility,testId:'MapGeoSearchVis',containerStyle:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace},removeLeftMargin:true,key:'MapGeoSearchVis'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,nk)},$3:function(){var nk={label:tab.Strings.MapOptionsLayerControlCheckbox,checked:this.props.isLayerControlChecked,handleChange:this.props.setLayerControlVisibility,testId:'LayerControlToggle',containerStyle:{marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace},removeLeftMargin:true,key:'LayerControlToggle'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,nk)},$8:function(){var nk=[];nk.push({label:tab.Strings.MapFloatingToolbarVizCheckBox,checked:this.props.isFloatingToolbarChecked,handleChange:this.props.setFloatingToolbarVisibility,testId:'MapFloatingToolbarVis'});nk.push({label:tab.Strings.MapVizNavCheckBox,checked:this.props.isToggleVisToolbarChecked,handleChange:this.props.setAllowPanAndZoom,testId:'MapVizNavToolbarVis'});for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.containerStyle={marginBottom:SharedWidgets.TabStyles.Spacing.DefaultSpace};nm.removeLeftMargin=true;nm.key=nm.testId}var nn={checkBoxWithLabelPropsList:nk};nn.key='mapOptionsCheckboxPropsList';return React.createElement(SharedWidgets.CheckBoxWithLabelGroupWidget,nn)},$4:function(){if(!this.props.isMapScaleVisible){return null}var nk={label:tab.Strings.MapScaleVizibilityCheckBox,checked:this.props.isMapScaleChecked,handleChange:this.props.setMapScaleVisibility,testId:'MapScaleVis',removeLeftMargin:true,key:'MapScaleVis'};return React.createElement(SharedWidgets.CheckBoxWithLabelWidget,nk)},$7:function(){if(!this.props.isMapUnitsVisible){return null}var nk={disabled:false,dropdownType:0,menuItemInfos:this.props.unitsMenuOptions,selectedValue:this.props.selectedUnitsOption,onSelect:this.props.unitOptionsChangedAction,label:tab.Strings.MapOptionsDropDownLabel,maxHeight:200,testId:'UnitsDropDown',zIndex:1031,containerStyle:{marginTop:SharedWidgets.TabStyles.Spacing.DefaultSpace}};nk.key='mapOptionsDropdownLabelProps';var nl={key:'mapOptionsUnitsContainerProps'};return spiff.DOMElements.div(nl,React.createElement(SharedWidgets.DropdownWidget,nk))},$1:function(){_.defer(ss.mkdel(this,function(){this.props.onCloseDialog()}))}});var ik=global.tab.MapOptionsProxy=ss.mkType(a,'tab.MapOptionsProxy',null,null,{$0:function(){var nk=new tab.MapOptionsInfoModel;nk.add_updatedMapOptionsInfo(function(){ik.handleModelUpdated(nk)});return nk},handleModelUpdated:function(nk){var nl=new im(nk);var nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[im,ij,Object])).call(null,[nl]);nm.get_rootElement()[0].id='mapOptionsDialog';nm.addToDom($(document.body))}});var il=global.tab.MapOptionsTelemetry=ss.mkType(a,'tab.MapOptionsTelemetry',null,null,{trackCheckboxAction:function(nk,nl){tab.OnlineAnalyticsClient.logEvent('Viz_MapOptions',ss.mkdict(['MapOptionName',nk,'OptionSetTo',nl]))}});var im=global.tab.MapOptionsViewModel=ss.mkType(a,'tab.MapOptionsViewModel',function(nk){this.mapOptionsInfoModel=null;this.isMapScaleAllowed=false;this.isMapScaleChecked=false;this.isGeoSearchAllowed=false;this.isGeoSearchChecked=false;this.isMapUnitsAllowed=false;this.isFloatingToolbarChecked=false;this.isToggleVisToolbarChecked=false;this.unitsOptionValue=null;this.isLayerControlChecked=false;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.mapOptionsInfoModel=nk;this.disposables.add(ss.mkdel(nk,nk.detachNotifications));this.mapOptionsInfoModel.add_updatedMapOptionsInfo(ss.mkdel(this,this.$4));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.mapOptionsInfoModel.remove_updatedMapOptionsInfo(ss.mkdel(this,this.$4))})));this.isMapScaleAllowed=this.mapOptionsInfoModel.get_canToggleMapScale();this.isMapScaleChecked=this.mapOptionsInfoModel.get_shouldShowMapScale();this.isGeoSearchAllowed=this.mapOptionsInfoModel.get_canToggleGeographicSearch();this.isGeoSearchChecked=this.mapOptionsInfoModel.get_shouldShowGeographicSearch();this.isMapUnitsAllowed=this.mapOptionsInfoModel.get_canSetMapUnit();this.isFloatingToolbarChecked=this.mapOptionsInfoModel.get_shouldShowFloatingZoomToolbar();this.isToggleVisToolbarChecked=this.mapOptionsInfoModel.get_shouldAllowPanZoom();this.unitsOptionValue=this.mapOptionsInfoModel.get_mapUnitSelection().toString();this.isLayerControlChecked=this.mapOptionsInfoModel.get_shouldShowLayerControl()},{createInitialProps:function(){return{onCloseDialog:ss.mkdel(this,this.onClose),setMapScaleVisibility:ss.mkdel(this,this.$7),setMapSearchVisibility:ss.mkdel(this,this.$8),setFloatingToolbarVisibility:ss.mkdel(this,this.$6),setAllowPanAndZoom:ss.mkdel(this,this.$5),unitOptionsChangedAction:ss.mkdel(this,this.$3),setLayerControlVisibility:ss.mkdel(this,this.$9)}},createUpdatedProps:function(){var nk=this.isMapScaleAllowed;var nl=this.isMapScaleChecked;var nm=this.isGeoSearchAllowed;var nn=this.isGeoSearchChecked;var no=this.isMapUnitsAllowed;var np=this.isFloatingToolbarChecked;var nq=this.isToggleVisToolbarChecked;var nr=this.unitsOptionValue;var ns=im.generateUnitsMenuOptions();var nt=this.isLayerControlChecked;return{isMapScaleVisible:nk,isMapScaleChecked:nl,isGeoSearchVisible:nm,isGeoSearchChecked:nn,isMapUnitsVisible:no,isFloatingToolbarChecked:np,isToggleVisToolbarChecked:nq,dialogTitle:this.mapOptionsInfoModel.get_dialogTitle(),selectedUnitsOption:nr,unitsMenuOptions:ns,isLayerControlChecked:nt}},onClose:function(){this.dispose()},$7:function(nk){var nl={};nl['mapScaleVisibility']='off';if(nk){nl['mapScaleVisibility']='on'}nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'map-scale-visibility'},nl);this.isMapScaleChecked=nk;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);il.trackCheckboxAction('SetMapScaleVisibility',nk);this.incrementProps()},$8:function(nk){var nl={};nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'geographic-search-toggle-visibility'},nl);this.isGeoSearchChecked=nk;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);il.trackCheckboxAction('SetMapSearchVisibility',nk);this.incrementProps()},$6:function(nk){var nl={};nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'zoom-controls-toggle'},nl);this.isFloatingToolbarChecked=nk;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);il.trackCheckboxAction('SetFloatingToolbarVisibility',nk);this.incrementProps()},$5:function(nk){var nl={};nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-viz-navigation-setting'},nl);this.isToggleVisToolbarChecked=nk;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);il.trackCheckboxAction('SetAllowPanAndZoom',nk);this.incrementProps()},$3:function(nk){this.unitsOptionValue=nk;var nl={};nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();nl['defaultMapUnitEnum']='automatic';if(nk==='metric'){nl['defaultMapUnitEnum']='metric'}else if(nk==='us'){nl['defaultMapUnitEnum']='us'}var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'default-map-unit-selection'},nl);tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);this.incrementProps()},$9:function(nk){var nl={};nl['visualIdPresModel']=this.mapOptionsInfoModel.get_vizID();var nm=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-layer-control-toolbar-button-visibility'},nl);this.isLayerControlChecked=nk;tab.ServerCommands.executeServerCommand(nm,'immediately',null,null);this.incrementProps()},$4:function(){this.isMapScaleAllowed=this.mapOptionsInfoModel.get_canToggleMapScale();this.isMapScaleChecked=this.mapOptionsInfoModel.get_shouldShowMapScale();this.isGeoSearchAllowed=this.mapOptionsInfoModel.get_canToggleGeographicSearch();this.isGeoSearchChecked=this.mapOptionsInfoModel.get_shouldShowGeographicSearch();this.isMapUnitsAllowed=this.mapOptionsInfoModel.get_canSetMapUnit();this.isFloatingToolbarChecked=this.mapOptionsInfoModel.get_shouldShowFloatingZoomToolbar();this.isToggleVisToolbarChecked=this.mapOptionsInfoModel.get_shouldAllowPanZoom();this.unitsOptionValue=this.mapOptionsInfoModel.get_mapUnitSelection().toString();this.isLayerControlChecked=this.mapOptionsInfoModel.get_shouldShowLayerControl();this.incrementProps()}},{generateUnitsMenuOptions:function(){var nk=[];nk.push({displayValue:tab.Strings.MapOptionsUnitAutomatic,value:'automatic'.toString()});nk.push({displayValue:tab.Strings.MapOptionsUnitMetric,value:'metric'.toString()});nk.push({displayValue:tab.Strings.MapOptionsUnitUS,value:'us'.toString()});return nk}});var io=global.tab.MarkLabelsEditButtonComponent=ss.mkType(a,'tab.MarkLabelsEditButtonComponent',function(){React.Component.call(this)},{render:function(){var nk=React.createElement(SharedWidgets.ButtonWidget,{buttonType:3,handleClick:this.props.launchMarkLabelsRichTextEditor,testId:'tabEditMarkLabels',children:this.props.text,disabled:!this.props.buttonEnabled,title:this.props.tooltip,className:'tabEditLabelButton'});return spiff.DOMElements.div({className:'tabEditMarkLabelsButtonControl'},spiff.DOMElements.div({className:'tabEditMarkLabelsButtonHolder'},nk))}});var ip=global.tab.MarkLabelsEditButtonViewModel=ss.mkType(a,'tab.MarkLabelsEditButtonViewModel',function(nk,nl,nm,nn){this.$4=false;this.$5=null;this.$8=null;this.$6=null;this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=nl;this.$5=nk;this.$6=nm;this.$7=nn},{createInitialProps:function(){return{launchMarkLabelsRichTextEditor:ss.mkdel(this,this.$3),buttonEnabled:this.$4,text:this.$6,tooltip:this.$7}},createUpdatedProps:function(){if(this.get_props().buttonEnabled!==this.$4||!ss.staticEquals(this.get_props().launchMarkLabelsRichTextEditor,ss.mkdel(this,this.$3))||!ss.referenceEquals(this.get_props().text,this.$6)||!ss.referenceEquals(this.get_props().tooltip,this.$7)){return{buttonEnabled:this.$4,launchMarkLabelsRichTextEditor:ss.mkdel(this,this.$3),text:this.$6,tooltip:this.$7}}else{return null}},setButtonEnabledState:function(nk,nl){this.$4=nk;this.$7=nl;this.incrementProps()},$3:function(nk){this.setButtonEnabledState(false,null);tab.RichTextClientCommands.callRichTextEditingCommand(this.$5);this.$8.hide(false)},get_viewType:function(){return io},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){this.$8=nk}});var iq=global.tab.MarksCardHeaderDropdownMenuProps=ss.mkType(a,'tab.MarksCardHeaderDropdownMenuProps',null,null,{getMenuData:function(nk){var nl=[{value:'disableSelection',displayValue:tab.Strings.MarksCardDropdownDisableSelection,disabled:false,checked:nk.get_isLayerSelectionDisabled()},{value:'addToZoom',displayValue:tab.Strings.MarksCardDropdownAddZoom,disabled:false,checked:nk.get_isInExtent()},{isDivider:true},{value:'moveUp',displayValue:tab.Strings.MarksCardDropdownMoveUp,disabled:nk.get_layerIndex()+1>=nk.get_totalLayerCount()},{value:'moveDown',displayValue:tab.Strings.MarksCardDropdownMoveDown,disabled:nk.get_layerIndex()===0},{isDivider:true},{value:'renameLayer',displayValue:tab.Strings.MarksCardDropdownRename,disabled:false},{value:'hideLayer',displayValue:tab.Strings.MarksCardDropdownHide,disabled:false,checked:nk.get_isHidden()},{isDivider:true},{value:'removeLayer',displayValue:tab.Strings.MarksCardDropdownRemove,disabled:false}];return Array.prototype.slice.call(nl)}});var ir=global.tab.MarksCardTabEncodingTemplate=ss.mkType(a,'tab.MarksCardTabEncodingTemplate',function(){this.encodingButtonsRow0=null;this.encodingButtonsRow1=null;this.encodingShelf=null;this.primitives=null;this.primitivesOptions=null;spiff.Template.call(this,$("\n<div class='tabAuthLayerEncoding'>\n    <div class='tabAuthLayerEncodingPrimitivesContainer'>\n        <div class='tabAuthLayerEncodingPrimitives'></div>\n    </div>\n    <div class='tabAuthLayerEncodingButtonRow'></div>\n    <div class='tabAuthLayerEncodingButtonRow'></div>\n    <div class='tabAuthLayerEncodingShelf'></div>\n</div>"));this.primitives=this.getElementBySelector('.tabAuthLayerEncodingPrimitives');this.encodingButtonsRow0=this.getElementsBySelector('.tabAuthLayerEncodingButtonRow').first();this.encodingButtonsRow1=this.getElementsBySelector('.tabAuthLayerEncodingButtonRow').slice(1);this.encodingShelf=this.getElementsBySelector('.tabAuthLayerEncodingShelf')},{get_encodingButtons:function(){return this.getElementsBySelector('.tabAuthEncodingButtonArea')}});var it=global.tab.MarksCardTabEncodingView=ss.mkType(a,'tab.MarksCardTabEncodingView',function(nk){this.marksCardTabViewModel=null;this.$h=null;this.$i=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[iu]).call(this,nk,new ir);this.$g=[];this.marksCardTabViewModel=nk;this.marksCardTabViewModel.add_modelChanged(ss.mkdel(this,this.$b));this.marksCardTabViewModel.add_dragOverEncodingChanged(ss.mkdel(this,this.$a));this.marksCardTabViewModel.add_validDropEncodingsChanged(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.remove_modelChanged(ss.mkdel(this,this.$b));this.marksCardTabViewModel.remove_dragOverEncodingChanged(ss.mkdel(this,this.$a));this.marksCardTabViewModel.remove_validDropEncodingsChanged(ss.mkdel(this,this.$f))})));this.$h=new spiff.ComboBoxViewModel;this.$h.set_theme(2);this.$h.set_menuTheme(0);this.$h.add_selectedItemChanged(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$h.remove_selectedItemChanged(ss.mkdel(this,this.$e))})));this.marksCardTabViewModel.get_encodingShelf().add_shelfChanged(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.get_encodingShelf().remove_shelfChanged(ss.mkdel(this,this.$c))})));this.marksCardTabViewModel.add_popupHidden(ss.mkdel(this,this.$d));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.marksCardTabViewModel.remove_popupHidden(ss.mkdel(this,this.$d))})));this.get_dom().primitives.append(tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$h]).get_rootElement());this.$i=tab.ObjectRegistry.newView(ln).call(null,[this.marksCardTabViewModel.get_encodingShelf()]);this.disposables.add$1(this.$i);this.get_dom().encodingShelf.append(this.$i.element);if(this.addedToDom){this.$i.onAddedToDom()}this.update()},{get_dom:function(){return this.get_template()},dispose:function(){this.$h.dispose();this.$9();ss.makeGenericType(spiff.BaseView$1,[iu]).prototype.dispose.call(this)},$9:function(){this.$g.forEach(function(nk){nk.dispose()});ss.clear(this.$g)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$i)){this.$i.onAddedToDom()}},update:function(){this.get_dom().get_encodingButtons().off(this.get_eventNamespace());this.$9();this.get_dom().encodingButtonsRow0.children().remove();this.get_dom().encodingButtonsRow1.children().remove();this.$h.clearItems();if(ss.isValue(this.marksCardTabViewModel.get_marksCardTabEncoding())){var nk=null;var nl=this.marksCardTabViewModel.get_marksCardTabEncoding().get_primitiveTypes();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=new spiff.ComboBoxItem(gN.getPrimitiveTypeIcon(nn),nn.name,nn,null,null);this.$h.addItem(no);if(nn.isSelected){nk=no}}this.$h.set_selectedItem(nk)}var np=((ss.isValue(this.marksCardTabViewModel.get_marksCardTabEncoding())&&ss.isValue(this.marksCardTabViewModel.get_marksCardTabEncoding().get_encodings()))?this.marksCardTabViewModel.get_marksCardTabEncoding().get_encodings():[]);np=_.sortBy(np,function(nu){if(ss.keyExists(it.$1,nu.encodingType.toString())){return it.$1[nu.encodingType.toString()]}return np.length});for(var nq=0;nq<6;nq++){var nr;if(np.length>nq){var ns=new fI;ns.domRoot.addClass('tabAuthEncodingButtonType-'+np[nq].encodingType);ns.name.text(np[nq].name);ns.button.addClass(this.$7(np[nq].encodingType));switch(np[nq].encodingType){case'text-encoding':case'size-encoding':case'color-encoding':case'shape-encoding':case'sort-encoding':case'wedge-size-encoding':case'level-of-detail-encoding':case'tooltip-encoding':{ns.icon.addClass(gN.getEncodingTypeIcon(np[nq].encodingType));break}default:{ns.domRoot.addClass('tabAuthEncodingButtonNoIcon');break}}EventUtils.DragDropManager.attachDropTarget(ns.domRoot,this.marksCardTabViewModel.createEncodingButtonDropTarget(np[nq].encodingType));ns.domRoot.data('tabAuthEncodingType',np[nq].encodingType);var nt=new spiff.Button(ns.domRoot);nt.set_hoverTooltipText(this.marksCardTabViewModel.getEncodingTypeTooltip(np[nq].encodingType));nt.add_click(this.$8(np[nq].encodingType,ns.button));if(this.marksCardTabViewModel.isEncodingClickable(np[nq].encodingType)){ns.domRoot.addClass('clickable')}this.$g.push(nt);nr=ns.domRoot}else{nr=$("<span class='tabAuthEncodingButtonArea'><span class='tabAuthEmptyEncodingButton'></span></span>")}((nq<3)?this.get_dom().encodingButtonsRow0:this.get_dom().encodingButtonsRow1).append(nr)}this.$f(null)},$c:function(nk){this.update()},$b:function(nk){this.update()},$7:function(nk){return'tabAuthEncodingButton-'+nk},$8:function(nk,nl){var nm='.'+this.$7(nk);return ss.mkdel(this,function(){nl.parent().addClass('pressed');var nn=ss.mkdel(this,function(){return $(nm,this.element)});this.marksCardTabViewModel.encodingTypeClicked(nk,nn)})},$d:function(nk){nk().parent().removeClass('pressed')},$e:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl.isSelected){return}this.marksCardTabViewModel.updatePrimitive(nl)},$f:function(nk){if(ss.isNullOrUndefined(nk)){this.get_dom().get_encodingButtons().toggleClass('tabDropInvalid',false).toggleClass('tabDropInvited',false)}else{this.get_dom().get_encodingButtons().each(function(nl,nm){var nn=$(nm);var no=nn.data('tabAuthEncodingType');var np=ss.contains(nk,no);nn.toggleClass('tabDropInvalid',!np).toggleClass('tabDropInvited',np)})}},$a:function(nk){this.get_dom().get_encodingButtons().each(function(nl,nm){var nn=$(nm);nn.toggleClass('tabDragOver',nn.data('tabAuthEncodingType')===nk)})}});var iu=global.tab.MarksCardTabViewModel=ss.mkType(a,'tab.MarksCardTabViewModel',function(){this.marksCardTabEncoding=null;this.$b=new lo;this.$a='invalid-encoding';this.$c=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded))},{add_modelChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_modelChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_dragOverEncodingChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_dragOverEncodingChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_validDropEncodingsChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_validDropEncodingsChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_popupHidden:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_popupHidden:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},get_validDropEncodings:function(){return this.$c},set_validDropEncodings:function(nk){this.$c=nk;if(ss.isValue(this.$2$3)){this.$2$3(this.$c)}},get_marksCardTabEncoding:function(){return this.marksCardTabEncoding},get_encodingShelf:function(){return this.$b},get_dragOverEncoding:function(){return this.$a},set_dragOverEncoding:function(nk){if(this.$a===nk){return}this.$a=nk;if(ss.isValue(this.$2$2)){this.$2$2(this.$a)}},get_hasSortEncodingOptions:function(){return ss.isValue(this.marksCardTabEncoding)&&ss.isValue(this.marksCardTabEncoding.get_sortEncodingOptions())},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));this.$b.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},getEncodingTypeTooltip:function(nk){return(this.isEncodingClickable(nk)?tab.Strings.AuthMarksCardEncodingTooltipOptions:tab.Strings.AuthMarksCardEncodingTooltipBasic)},createEncodingButtonDropTarget:function(nk){return new o(this,ss.mkdel(this,function(){this.set_dragOverEncoding(nk)}),ss.mkdel(this,function(){this.set_dragOverEncoding('invalid-encoding')}),nk)},getDropPositionPresModel:function(nk,nl){var nm=ss.safeCast(nk,cf);if(ss.isNullOrUndefined(nm)){return null}var nn=null;if(nm.get_drop().state()==='resolved'){if(nl!=='invalid-encoding'){var no=this.$b.matchingDropsFrom(nm);if(ss.isValue(no)){nn=_.find(no.shelfDropPositions,function(np){return np.encodingType===nl})}}}return nn},acceptDrop:function(nk,nl){var nm=$.Deferred();if(!ss.isInstanceOfType(nk,cf)){nm.resolve(false);return nm}var nn=ss.mkdel(this,function(no){var np=ss.safeCast(no,cf);var nq=this.getDropPositionPresModel(nk,nl);var nr=ss.isValue(nq);if(nr){if(np.hasOnlyPills()){var ns=np.get_pill();tab.ShelfClientCommands.movePillToEncoding(ns.shelfVM.get_shelf(),this.get_encodingShelf().get_shelf(),nl,ns.get_pill(),np.isCopyDrag,nq)}else if(np.hasOnlyFields()){var nt=np.fieldsToDropOnShelf(this.get_encodingShelf().get_shelfType());if(np.shouldGetAggregationOfField(nt)){np.selectAggregationForField(this.get_encodingShelf().get_shelfType(),nt[0],ss.mkdel(this,function(nu){var nv=this.get_encodingShelf();var nw=[];nw.push(nu.selectedField);np.addEncodingFields(nv,nw,nl,nq,nu.isRelativeDate)}))}else{np.addEncodingFields(this.get_encodingShelf(),nt,nl,nq,false)}}}nm.resolve(nr)});if(nk.get_drop().state()==='resolved'){nn(nk)}else{nk.get_drop().done(nn)}return nm},init:function(nk){this.marksCardTabEncoding=nk;this.$1()},isColorEncodingClickable:function(){if(!this.$0('color-encoding')){return true}if(ss.isNullOrUndefined(this.get_marksCardTabEncoding())||ss.isNullOrUndefined(this.get_marksCardTabEncoding().get_colorEncodingDropdown())){return false}return ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().quantitativeColor)||ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().categoricalColor)},isSortEncodingButtonClickable:function(){return this.get_hasSortEncodingOptions()&&this.marksCardTabEncoding.get_sortEncodingOptions().actualPrimitiveType==='line'},isEncodingClickable:function(nk){switch(nk){case'color-encoding':{return this.isColorEncodingClickable()}case'text-encoding':{return ss.isValue(this.get_marksCardTabEncoding())&&ss.isValue(this.get_marksCardTabEncoding().get_textEncodingDropdown())}case'tooltip-encoding':{return true}case'shape-encoding':{return!this.$0(nk)}case'size-encoding':{return true}case'sort-encoding':{return this.isSortEncodingButtonClickable()}default:{return false}}},encodingTypeClicked:function(nk,nl){if(this.isEncodingClickable(nk)){switch(nk){case'size-encoding':{this.$4(nl);break}case'shape-encoding':{this.$3(nl);break}case'color-encoding':{this.$2(nl);break}case'tooltip-encoding':{this.$7(nl);break}case'text-encoding':{this.$6(nl);break}case'sort-encoding':{this.$5(nl);break}}}},updatePrimitive:function(nk){tab.PaneClientCommands.setPanePrimitive(this.marksCardTabEncoding,nk.actualPrimitiveType)},dragEnded:function(nk){this.set_validDropEncodings(null);this.set_dragOverEncoding('invalid-encoding')},dragStarted:function(nk){var nl=ss.safeCast(nk,cf);if(ss.isNullOrUndefined(nl)){return}nl.get_drop().always(ss.mkdel(this,this.$9));if(nk.get_readyToDrop()){var nm=[];if(ss.isValue(this.marksCardTabEncoding)&&ss.isValue(this.marksCardTabEncoding.get_encodings())){var nn=this.marksCardTabEncoding.get_encodings();for(var no=0;no<nn.length;no++){var np=nn[no];nm.push(np.encodingType)}}this.set_validDropEncodings(nm)}},$8:function(nk,nl,nm){var nn=ss.mkdel(this,function(){if(ss.isValue(this.$2$4)){this.$2$4(nl)}});var no=spiff.UberPopupViewModel.createForContent(nk,nl,nn,true);no.options.glassZIndex=spiff.UberPopupShowOptions.startingGlassZIndex+1;no.options.horizontalAlign=nm;if(tab.FeatureFlags.isEnabled('MttwMarksToLabel')){no.options.additionalClassNames=['tabMarksCardUberPopup']}no.show();return no},$4:function(nk){var nl=new iz(this.get_marksCardTabEncoding().get_markSizeModel());this.$8(nl,nk,0)},$3:function(nk){tab.PaneClientCommands.getDefaultShapeType(this.marksCardTabEncoding,ss.mkdel(this,function(nl){var nm=new lh;if(ss.isValue(nl)){nm.set_selectedShape(nl)}nm.add_propertyChanged(ss.mkdel(this,function(nn,no){tab.PaneClientCommands.setDefaultShapeType(this.marksCardTabEncoding,nm.get_selectedShape())}));this.$8(nm,nk,0)}))},$0:function(nk){return _.any(this.$b.get_pills(),function(nl){return iu.$0(nl,nk)})},$2:function(nk){if(this.get_marksCardTabEncoding().get_currentPrimitiveType().actualPrimitiveType==='heatmap'){var nl=new gF(this.get_marksCardTabEncoding());this.$8(nl,nk,0)}else if(this.$0('color-encoding')){if(ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().quantitativeColor)){var nm=new ju(this.get_marksCardTabEncoding());this.$8(nm,nk,0)}else if(ss.isValue(this.get_marksCardTabEncoding().get_colorEncodingDropdown().categoricalColor)){var nn=new cK(this.get_marksCardTabEncoding());this.$8(nn,nk,0)}}else{tab.PaneClientCommands.getDefaultColor(this.marksCardTabEncoding,ss.mkdel(this,function(no){var np=new iO(this.get_marksCardTabEncoding());if(ss.isValue(no)){np.get_colorPicker().update(no)}this.$8(np,nk,0)}))}},$7:function(nk){if(!tsConfig.is_mobile){if(ss.isValue(this.$2$4)){this.$2$4(nk)}var nl=this.marksCardTabEncoding;var nm=(ss.isValue(nl)?nl.get_id():0);tab.RichTextClientCommands.launchCustomTooltipRichTextEditor(nm)}else{var nn=new md(this.get_marksCardTabEncoding());nn.add_resetClicked(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){nn.remove_resetClicked(ss.mkdel(this,this.$1))})));this.$8(nn,nk,0)}},$6:function(nk){var nl=new lY(this.marksCardTabEncoding);var nm=this.$8(nl,nk,0);nl.updateUberPopupViewModel(nm)},$5:function(nk){var nl=new lv(this.marksCardTabEncoding);this.$8(nl,nk,0)},$1:function(){if(ss.isNullOrUndefined(this.$2$1)){return}this.$2$1(this)},$9:function(nk){if(!EventUtils.DragDropManager.get_isDragging()){return}var nl=this.$b.matchingDropsFrom(nk);if(ss.isValue(nl)){this.set_validDropEncodings(_.filter(nl.encodingTypes,ss.mkdel(this,function(nm){return _.any(this.get_marksCardTabEncoding().get_encodings(),function(nn){return nn.encodingType===nm&&nn.isEnabled})})))}else{this.set_validDropEncodings(null)}}},{$0:function(nk,nl){return nk.get_item().encodingType===nl}});var iv=global.tab.MarksContentTemplate=ss.mkType(a,'tab.MarksContentTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthMarksContent'></div>"))});var iw=global.tab.MarksContentView=ss.mkType(a,'tab.MarksContentView',function(nk,nl){this.$o=null;this.$q=null;this.$j=32;this.$p=3;this.$l=null;this.$k=null;this.$n=null;this.$m=null;ss.makeGenericType(cy,[ix]).call(this,nk,nl);this.$q=nk;this.$q.add_marksCardTabsChanged(ss.mkdel(this,this.handleMarksCardTabsChanged));this.$o=nl},{get_scrollContent:function(){if(this.$q.get_marksCardTabViewModels().length===0){return $('')}return this.$o.domRoot.find('.tabAuthMarksContent')},get_scrollableContentPreferredHeight:function(){var nk=this.get_scrollContent().find('.tabAccordionItem').length;var nl=this.$j;var nm=nk*nl;nm+=tab.DoubleUtil.roundToInt(this.get_scrollContent().find('.tabAccordionItemContent:visible').height());return((nm>0)?nm:tab.DoubleUtil.roundToInt(this.$o.domRoot.outerHeight(true)))},get_maxMarksCardTabsToDisplay:function(){return 7},$g:function(){if(ss.isNullOrUndefined(this.$k)){this.$k=tab.ObjectRegistry.newView(B).call(null,[this.$h()])}return this.$k},$h:function(){if(ss.isNullOrUndefined(this.$l)){this.$l=new C;this.$l.add_slideDownTriggered(ss.mkdel(this.$q,this.$q.triggerUpdateScrollContentAction));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){if(ss.isValue(this.$l)){this.$l.remove_slideDownTriggered(ss.mkdel(this.$q,this.$q.triggerUpdateScrollContentAction))}})));this.$l.add_propertyChanged(ss.mkdel(this,function(nk,nl){if(nl.get_propertyName()!=='ActiveItem'){return}var nm=this.$l.get_activeItem();if(ss.isNullOrUndefined(nm)){return}var nn=nm.get_content().get_viewModel();this.$q.selectMarksCardTab(nn)}))}return this.$l},$i:function(){if(ss.isNullOrUndefined(this.$m)){this.$m=$("<div class='tabAuthMarksContentMore'></div>");this.$m.append($('<span></span>').text(tab.Strings.AuthMarksCardChooseField));this.$m.append($('<span></span>').addClass('tabAuthMarksContentMoreIcon'));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.$m[0],ss.mkdel(this,this.$9)))}return this.$m},dispose:function(){this.$q.remove_marksCardTabsChanged(ss.mkdel(this,this.handleMarksCardTabsChanged));if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}if(ss.isValue(this.$l)){this.$l.dispose();this.$l=null}if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}ss.makeGenericType(spiff.BaseView$1,[ix]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b()},$b:function(){if(!this.addedToDom){return}if(ss.isValue(this.$n)){this.$n.onAddedToDom()}if(ss.isValue(this.$k)){this.$k.onAddedToDom()}},setScrollableContentActualHeight:function(nk){this.$g().element.css({'overflow-y':'auto','max-height':(ss.isValue(nk)?(ss.unbox(nk)+'px'):'none')});this.$7()},$7:function(){var nk=this.$g().element.height()<this.$g().element.get(0).scrollHeight;if(!nk){return}var nl=this.$g().element.find('.tabAuthLayerEncodingButtonRow:visible');if(nl.length===0){return}var nm=nl[0].clientWidth;var nn=nm-SharedWidgets.TabStyles.Spacing.DefaultSpace*this.$p;var no=ss.idiv(nn,this.$p)-SharedWidgets.TabStyles.Spacing.SmallSpace-2;this.$g().element.find('.tabAuthEncodingButtonArea').each(ss.mkdel(this,function(np,nq){$(nq).css({'max-width':no+'px'})}))},onViewModelPropertyChanged:function(nk,nl){if(nl.get_propertyName()==='CurrentLayer'){this.$a()}ss.makeGenericType(spiff.BaseView$1,[ix]).prototype.onViewModelPropertyChanged.call(this,nk,nl)},handleMarksCardTabsChanged:function(){if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}if(this.$q.get_marksCardTabViewModels().length===1){this.$n=tab.ObjectRegistry.newView(it).call(null,[this.$q.get_currentMarksCardTab()]);if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}}else{this.$f()}this.$e()},$f:function(){this.$h().set_defaultMarksSpecId(this.$q.get_marksModel().get_defaultMarksSpecId());this.$h().set_isLayered(this.$q.get_marksModel().get_isLayered());if(this.$h().get_isLayered()||this.$q.get_marksCardTabViewModels().length<=this.get_maxMarksCardTabsToDisplay()){var nk=(this.$h().get_isLayered()?(this.$q.get_marksCardTabViewModels().length-1):1);var nl=[];for(var nm=0;nm<this.$q.get_marksCardTabViewModels().length;++nm){var nn=((nm>0&&this.$h().get_isLayered())?(nm-1):0);nl.push(this.$8(this.$q.get_marksCardTabViewModels()[nm],nn,nk))}this.$h().updateItems(nl)}else{this.$h().updateItems([this.$8(this.$q.get_currentMarksCardTab(),0,1)])}this.$c()},$8:function(nk,nl,nm){var nn=new y(this.$l,nk.get_marksCardTabEncoding(),new g(nk),nl,nm);return nn},$c:function(){this.$h().set_activeItem(_.find(this.$h().get_items(),ss.mkdel(this,function(nk){var nl=nk.get_content();return nl.$0()===this.$q.get_currentMarksCardTab().get_marksCardTabEncoding().get_id()})));this.raiseScrollContentChanged()},$a:function(){if(this.$q.get_marksCardTabViewModels().length===1){this.handleMarksCardTabsChanged()}else if(this.$h().get_isLayered()||this.$q.get_marksCardTabViewModels().length<=this.get_maxMarksCardTabsToDisplay()){this.$c()}else{this.$f()}},$e:function(){this.$o.domRoot.children().detach();if(this.$q.get_marksCardTabViewModels().length===0){return}if(this.$q.get_marksCardTabViewModels().length===1){this.$o.domRoot.append(this.$n.element)}else{this.$o.domRoot.append(this.$g().element);if(!this.$h().get_isLayered()&&this.$q.get_marksCardTabViewModels().length>this.get_maxMarksCardTabsToDisplay()){this.$o.domRoot.append(this.$i())}}this.$b();this.raiseScrollContentChanged()},$9:function(nk){var nl=[];var nm=this.$q.get_marksCardTabViewModels();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=(new spiff.MenuItemBuilder).data(no).name(no.get_marksCardTabEncoding().get_name()).iconClass(gN.getMarksCardTabIcon(no.get_marksCardTabEncoding())).iconClassTwo(null).enabled(true).build();if(ss.referenceEquals(no,this.$q.get_currentMarksCardTab())){np.itemClass='tabMenuSelectedItem'}if(no.get_marksCardTabEncoding().get_isTableCalc()){np.iconClassTwo='tabAuthPillIconTableCalc'}nl.push(np)}var nq=$(nk.target);var nr=new spiff.ShowMenuOptions(nq,true);var ns=new spiff.Menu(nl);var nt=spiff.MenuViewModel.createForMenu(ns,ss.mkdel(this,this.$d),null,null);nt.set_theme(new spiff.ComboBoxMenuTheme);nt.show(nr)},$d:function(nk){this.$q.selectMarksCardTab(nk.data)}});var ix=global.tab.MarksContentViewModel=ss.mkType(a,'tab.MarksContentViewModel',function(nk){this.$8=null;this.$4=null;this.$7=[];this.$6={};this.$5=0;this.$9=true;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);this.$8=nk;this.$8.add_newMarksCard(ss.mkdel(this,this.$3));this.$8.add_activePaneSpecIdChanged(ss.mkdel(this,this.$2));var nl=tab.PluginPresentationLayer.get_instance().registerNotificationHandler('doc:active-marks-card-tab-changed-event',ss.mkdel(this,this.$1));this.disposables.add(nl);this.$3()},{add_dropStateChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_dropStateChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_marksCardTabsChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_marksCardTabsChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_visibleChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_visibleChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},get_isVisible:function(){return this.$9},set_IsVisible:function(nk){if(this.$9===nk){return}this.$9=nk;this.raiseActionEvent(this.$2$3)},get_dropState:function(){return this.$5},set_DropState:function(nk){this.$5=nk;if(ss.isValue(this.$2$1)){this.$2$1(this.$5)}},get_currentMarksCardTab:function(){return this.$4},set_currentMarksCardTab:function(nk){if(ss.referenceEquals(this.$4,nk)){return}this.$4=nk;this.notifyPropertyChanged('CurrentLayer')},get_currentPaneSpecId:function(){if(ss.isValue(this.$4)){return this.$4.get_marksCardTabEncoding().get_id()}return null},get_marksCardTabViewModels:function(){return this.$7},get_marksModel:function(){return this.$8},get_dropTarget:function(){return null},get_title:function(){return tab.Strings.AuthCardTitleMarks},get_name:function(){return'marks'},get_collapsedTitleDetail:function(){return''},get_viewType:function(){return iw},get_viewModel:function(){return this},dispose:function(){this.$8.remove_newMarksCard(ss.mkdel(this,this.$3));this.$8.remove_activePaneSpecIdChanged(ss.mkdel(this,this.$2));this.$0();spiff.BaseViewModel.prototype.dispose.call(this)},addEncodingShelf:function(nk){this.$6[nk.get_paneId().toString()]=nk;if(this.$7.length===1){this.$7[0].get_encodingShelf().set_shelf(nk)}else{for(var nl=0;nl<this.$7.length;nl++){var nm=this.$7[nl];if(nm.get_marksCardTabEncoding().get_id()===nk.get_paneId()){nm.get_encodingShelf().set_shelf(nk);return}}}},triggerUpdateScrollContentAction:function(){this.$4.get_encodingShelf().triggerUpdateScrollContentAction()},$0:function(){for(var nk=0;nk<this.$7.length;nk++){var nl=this.$7[nk];nl.dispose()}ss.clear(this.$7)},$3:function(){this.$0();var nk=this.$8.get_marksCardTabEncodingModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new iu;nn.init(nm);if(ss.getKeyCount(this.$6)===1){var no=_.first(Object.keys(this.$6));nn.get_encodingShelf().set_shelf(this.$6[no])}else if(ss.keyExists(this.$6,nm.get_id().toString())){nn.get_encodingShelf().set_shelf(this.$6[nm.get_id().toString()])}this.$7.push(nn)}this.$4=_.find(this.$7,ss.mkdel(this,function(np){return np.get_marksCardTabEncoding().get_id()===this.$8.get_activePaneSpecId()}));if(ss.isValue(this.$2$2)){this.$2$2()}},$2:function(){var nk=_.find(this.$7,ss.mkdel(this,function(nl){return nl.get_marksCardTabEncoding().get_id()===this.$8.get_activePaneSpecId()}));if(ss.isValue(nk)){this.set_currentMarksCardTab(nk)}},$1:function(nk){this.$8.set_activePaneSpecId(nk.paneSpec)},selectMarksCardTab:function(nk){this.$8.set_activePaneSpecId(nk.get_marksCardTabEncoding().get_id())}});var iy=global.tab.MarkSizePickerView=ss.mkType(a,'tab.MarkSizePickerView',function(nk){this.$b=null;ss.makeGenericType(spiff.BaseView$1,[iz]).call(this,nk,new iA);this.$b=this.get_template();this.get_viewModel().add_modelUpdated(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$7))}))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b.label.text(tab.Strings.AuthMarkSizeLabel);this.$8();this.disposables.add(ss.mkdel(this,this.$a))},$8:function(){var nk=React.createElement(spiff.HorizontalSliderComponent,{minValue:0,maxValue:100,initialValue:ss.round(this.get_viewModel().get_currentFraction()*100),disabled:false,width:200,onValueChanged:ss.mkdel(this,this.$9),showValueTextBox:false,showPercentageSign:false,tabIndex:0});ReactDOM.render(nk,this.$b.slider.get(0))},$a:function(){ReactDOM.unmountComponentAtNode(this.$b.slider.get(0))},$7:function(){this.$8()},$9:function(nk){this.get_viewModel().set_currentFraction(nk/100)}});var iz=global.tab.MarkSizePickerViewModel=ss.mkType(a,'tab.MarkSizePickerViewModel',function(nk){this.$1=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$1=nk;this.$1.add_newMarkSize(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){this.$1.remove_newMarkSize(ss.mkdel(this,this.$0))}))},{add_modelUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_modelUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_viewType:function(){return iy},get_viewModel:function(){return this},get_currentFraction:function(){return this.$1.get_currentSliderFraction()},set_currentFraction:function(nk){var nl=this.$1.get_transform().fractionToValue(nk);if(Math.abs(this.$1.get_currentMarkSize()-nl)>0.001){if(this.$1.get_parentModel().get_currentPrimitiveType().actualPrimitiveType==='heatmap'){tab.PaneClientCommands.setDensityKernelSize(this.$1.get_parentModel(),nl)}else{tab.PaneClientCommands.setMarkSize(this.$1.get_parentModel(),nl)}}},$0:function(){this.$2$1()},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){}});var iA=global.tab.MarkSizePickerViewTemplate=ss.mkType(a,'tab.MarkSizePickerViewTemplate',function(){this.label=null;this.slider=null;spiff.Template.call(this,$("<div class='tabAuthMarkSizePickerContent'>\n            <div class='tabAuthMarkSizeLabel'></div>\n            <div class='tabAuthMarkSizeSlider'></div>\n        </div>"));this.label=this.getElementBySelector('.tabAuthMarkSizeLabel');this.slider=this.getElementBySelector('.tabAuthMarkSizeSlider')});var iB=global.tab.MarksToLabelComponent=ss.mkType(a,'tab.MarksToLabelComponent',function(nk){this.$n=null;this.$m=null;this.$o=null;spiff.PureRenderComponent.call(this,nk);var nl=new iD;nl.marksToLabelDropdownEnabled=nk.marksToLabelDropdownEnabled;nl.marksToLabelCurrentMode=nk.marksToLabelCurrentMode;nl.currentScope=nk.currentScope;nl.currentFieldCaption=nk.currentFieldCaption;nl.lineEndsFirstChecked=nk.lineEndFirstChecked;nl.lineEndsLastChecked=nk.lineEndLastChecked;nl.minMaxStartChecked=nk.minMaxStartChecked;nl.minMaxEndChecked=nk.minMaxEndChecked;nl.allowLabelOverlapChecked=nk.allowLabelOverlapChecked;this.state=nl;this.$n=this.$0(this.props.marksToLabelEnabledModes);this.$m=this.$0(this.props.enabledScopes);this.$o=this.$0(this.props.fieldsCaptions)},{$0:function(nk){var nl=[];for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];nl.push({value:nn})}return nl},$l:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)||ss.equalsT(tab.Strings.MarksToLabelModeMostRecent,this.state.marksToLabelCurrentMode)},$h:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)},$j:function(){return ss.equalsT(tab.Strings.MarksToLabelModeRange,this.state.marksToLabelCurrentMode)},$i:function(){return ss.equalsT(tab.Strings.MarksToLabelModeLineEnds,this.state.marksToLabelCurrentMode)},$k:function(){return this.props.shouldShowAllowLabelOverlapCheckbox||this.$i()||this.$j()},$3:function(){return React.createElement(SharedWidgets.SingleSelectDropdown,{className:'tabMarksToLabelModeDropdownContainer',label:tab.Strings.MarksToLabelControlLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$n)}),value:this.state.marksToLabelCurrentMode,onChange:ss.mkdel(this,this.$a),testId:'MarksToLabelModeDropdown'})},$5:function(){if(!this.$l()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelScopeContainer'},React.createElement(SharedWidgets.SingleSelectDropdown,{label:tab.Strings.MarksToLabelScopeLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$m)}),value:this.state.currentScope,onChange:ss.mkdel(this,this.$d),testId:'MarksToLabelScopeDropdown'}))}},$2:function(){if(!this.$h()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelFieldsContainer'},React.createElement(SharedWidgets.SingleSelectDropdown,{label:tab.Strings.MarksToLabelFieldLabel,type:1,disabled:!this.state.marksToLabelDropdownEnabled,list:React.createElement(SharedWidgets.List,{items:Array.prototype.slice.call(this.$o)}),value:this.state.currentFieldCaption,onChange:ss.mkdel(this,this.$7),testId:'MarksToLabelFieldsDropdown'}))}},$g:function(){if(!this.$j()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelMinValueLabel,checked:this.state.minMaxStartChecked,testId:'MarksToLabelMinMaxCheckboxShowStart',handleChange:ss.mkdel(this,this.$c),disabled:!this.state.marksToLabelDropdownEnabled}),React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelMaxValueLabel,checked:this.state.minMaxEndChecked,testId:'MarksToLabelMinMaxCheckboxShowEnd',handleChange:ss.mkdel(this,this.$b),disabled:!this.state.marksToLabelDropdownEnabled}))}},$f:function(){if(!this.$i()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelStartOfLine,checked:this.state.lineEndsFirstChecked,testId:'MarksToLabelLineEndsShowFirst',handleChange:ss.mkdel(this,this.$8),disabled:!this.state.marksToLabelDropdownEnabled}),React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelLabelEndOfLine,checked:this.state.lineEndsLastChecked,testId:'MarksToLabelLineEndsShowLast',handleChange:ss.mkdel(this,this.$9),disabled:!this.state.marksToLabelDropdownEnabled}))}},$e:function(){if(!this.props.shouldShowAllowLabelOverlapCheckbox){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelCheckboxContainer'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.MarksToLabelAllowOverlapLabel,checked:this.state.allowLabelOverlapChecked,testId:'MarksToLabelAllowOverlap',handleChange:ss.mkdel(this,this.$6),disabled:!this.state.marksToLabelDropdownEnabled}))}},$4:function(){if(!this.$k()){return null}else{return spiff.DOMElements.div({className:'tabMarksToLabelOptionsContainer'},spiff.DOMElements.span({},tab.Strings.MarksToLabelOptionsLabel),spiff.DOMElements.div({className:'tabMarksToLabelCheckboxesContainer'},this.$e(),this.$g(),this.$f()))}},render:function(){return spiff.DOMElements.div({},spiff.DOMElements.hr({className:'tabMarksToLabelComponentSeparator'}),this.$3(),this.$5(),this.$2(),this.$4())},$1:function(){var nk=new iD;nk.allowLabelOverlapChecked=this.state.allowLabelOverlapChecked;nk.marksToLabelCurrentMode=this.state.marksToLabelCurrentMode;nk.marksToLabelDropdownEnabled=this.state.marksToLabelDropdownEnabled;nk.currentScope=this.state.currentScope;nk.currentFieldCaption=this.state.currentFieldCaption;nk.minMaxStartChecked=this.state.minMaxStartChecked;nk.minMaxEndChecked=this.state.minMaxEndChecked;nk.lineEndsFirstChecked=this.state.lineEndsFirstChecked;nk.lineEndsLastChecked=this.state.lineEndsLastChecked;return nk},$d:function(nk){var nl=this.$1();nl.currentScope=nk;this.setState(nl);this.props.scopeChanged(nk)},$7:function(nk){var nl=this.$1();nl.currentFieldCaption=nk;this.setState(nl);this.props.fieldCaptionChanged(nk)},$8:function(nk){var nl=this.$1();nl.lineEndsFirstChecked=nk;this.setState(nl);this.props.lineEndsFirstChanged(nk)},$9:function(nk){var nl=this.$1();nl.lineEndsLastChecked=nk;this.setState(nl);this.props.lineEndsLastChanged(nk)},$c:function(nk){var nl=this.$1();nl.minMaxStartChecked=nk;this.setState(nl);this.props.minMaxStartChanged(nk)},$b:function(nk){var nl=this.$1();nl.minMaxEndChecked=nk;this.setState(nl);this.props.minMaxEndChanged(nk)},$6:function(nk){var nl=this.$1();nl.allowLabelOverlapChecked=nk;this.setState(nl);this.props.allowLabelOverlapChanged(nk)},$a:function(nk){var nl=this.$1();nl.marksToLabelCurrentMode=nk;this.setState(nl);this.props.marksToLabelModeChanged(nk)}});var iC=global.tab.MarksToLabelProps=ss.mkType(a,'tab.MarksToLabelProps',function(){this.marksToLabelDropdownEnabled=false;this.marksToLabelEnabledModes=null;this.marksToLabelCurrentMode=null;this.marksToLabelModeChanged=null;this.enabledScopes=null;this.currentScope=null;this.scopeChanged=null;this.fieldsCaptions=null;this.currentFieldCaption=null;this.fieldCaptionChanged=null;this.lineEndFirstChecked=false;this.lineEndLastChecked=false;this.lineEndsFirstChanged=null;this.lineEndsLastChanged=null;this.minMaxStartChecked=false;this.minMaxEndChecked=false;this.minMaxStartChanged=null;this.minMaxEndChanged=null;this.allowLabelOverlapChecked=false;this.allowLabelOverlapChanged=null;this.shouldShowAllowLabelOverlapCheckbox=false});var iD=global.tab.MarksToLabelState=ss.mkType(a,'tab.MarksToLabelState',function(){this.marksToLabelDropdownEnabled=false;this.marksToLabelCurrentMode=null;this.currentScope=null;this.currentFieldCaption=null;this.lineEndsFirstChecked=false;this.lineEndsLastChecked=false;this.minMaxStartChecked=false;this.minMaxEndChecked=false;this.allowLabelOverlapChecked=false});var iE=global.tab.MenuBarBuilder=ss.mkType(a,'tab.MenuBarBuilder',function(){},{buildMenuItems:function(){var nk=[];nk.push({itemId:'file',title:tab.Strings.AuthMenuBarFile,cssClassName:'fileMenu'});nk.push({itemId:'data',title:tab.Strings.AuthMenuBarData,cssClassName:'dataMenu'});this.addModeSpecificMenus(nk);nk.push({itemId:'help',title:tab.Strings.AuthMastheadHelp,cssClassName:'helpMenu'});return nk},addModeSpecificMenus:null,buildHelpMenu:function(nk,nl,nm,nn,no){nk.additionalMenuClass='tabHelpContextMenu';var np=[];np.push((new spiff.MenuItemBuilder).isTextInput(true).data(nm).enabled(true).description(tab.Strings.AuthMastheadHelpSearch).build());var nq=np;this.addModeSpecificHelpItems(nl,nq);iE.$0(nq);var nr=spiff.MenuViewModel.createForMenu(new spiff.Menu(nq),function(ns){var nt=_.indexOf(nq,ns);bp.$2('Help',ns,nt);tab.WidgetUtil.commandMenuItemClicked(ns)},nn,null);nr.set_shouldAnimateOnClose(false);return nr},addModeSpecificHelpItems:null},{create:function(){return iE.create$1('document')},create$1:function(nk){if(nk==='data-tab'){return new eJ}else if(tsConfig.is_metrics_authoring){return new iF}else if(nk==='document'){return new mk}else{return new mk}},$0:function(nk){if(tsConfig.is_saas){ss.add(nk,iE.newMenuLink(tab.Strings.HelpMenuItemContactSupport,tsConfig.contact_support_uri,'_blank',null,'Support'))}else if(!tsConfig.isPublic){var nl=(tsConfig.useOfflineHelp?tab.UriUtil.getOfflineHelpHref(''):ss.formatString('{0}/support','https://www.tableau.com'));ss.add(nk,iE.newMenuLink(tab.Strings.HelpMenuItemContactSupport,nl,'_blank',null,'Support'))}},$1:function(){var nk=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(nk)&&nk.get_isEditingPublishedDatasource()},newMenuLink:function(nk,nl,nm,nn,no){var np=new spiff.MenuItem;np.data=function(){tab.WindowHelper.open(nl,nm)};np.name=nk;np.readId=no;np.enabled=ss.isValue(nl);np.description=nn;var nq=np;return nq},makeWebAuthorHelpUri:function(nk){if(tsConfig.isPublic&&!tab.FeatureFlags.isEnabled('PublicWebAuthoring_M3')){return tab.UriUtil.getPublicHelpHref()}var nl=bq.$0[nk-1];var nm=ss.formatString('server-webauthor{0}',nk);if(iE.$1()){nm='server-edit-data';return tab.UriUtil.makeHelpUri(nm,'')}return tab.UriUtil.makeHelpUri(nm,nl)}});var iF=global.tab.MetricsMenuBarBuilder=ss.mkType(a,'tab.MetricsMenuBarBuilder',function(){iE.call(this)},{addModeSpecificMenus:function(nk){},addModeSpecificHelpItems:function(nk,nl){}});var iG=global.tab.MonotonicallyIncreasingKeyFactory=ss.mkType(a,'tab.MonotonicallyIncreasingKeyFactory',function(){this.$0=0},{generate:function(nk){this.$0++;return this.$0.toString()}});var iH=global.tab.MoveSelectedZoneShortcut=ss.mkType(a,'tab.MoveSelectedZoneShortcut',function(nk,nl){this.$0=null;this.$1=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=nk;this.$1=nl},{getAdditionalOptions:function(){var nk=new Object;nk.propagation=2;return nk},getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(iH.$0('ArrowLeft'),iH.$0('ArrowRight'),iH.$0('ArrowUp'),iH.$0('ArrowDown'))},isAllowed:function(nk){var nl=$(nk.target);var nm=!nl.is('.'+'tab-LayoutTree');if(tab.FeatureFlags.isEnabled('ItemHierarchyForBE')){nm=nm&&!nl.is('.'+'tab-LayoutTreeNode')}return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,nk)&&nm&&this.$0()},executeShortcut:function(nk){var nl=(nk.shiftKey?10:1);var nm=nk.which;switch(nm){case 39:{this.$1(nl,0);break}case 37:{this.$1(-nl,0);break}case 40:{this.$1(0,nl);break}case 38:{this.$1(0,-nl);break}default:{return}}},getTelemetryKey:function(){return'Move Selected Zone'}},{$0:function(nk){var nl=new Object;nl.shift='optional';return new KeyboardShortcuts.KeyCombo(nk,nl)}});var iI=global.tab.MoveZoneWithinLayoutTreeProps=ss.mkType(a,'tab.MoveZoneWithinLayoutTreeProps',function(nk,nl){this.$1$1=null;this.$1$2=null;this.set_getParentId(nk);this.set_getNextSibling(nl)},{get_getParentId:function(){return this.$1$1},set_getParentId:function(nk){this.$1$1=nk},get_getNextSibling:function(){return this.$1$2},set_getNextSibling:function(nk){this.$1$2=nk}});var iJ=global.tab.NewDashboardButtonModel=ss.mkType(a,'tab.NewDashboardButtonModel',function(nk){lH.call(this,tab.Strings.NewDashboardName,'tabAuthTabNewDashboardBtn','tabAuthNewDashboardIcon',function(){nk.createNewDashboard(true)},null)});var iK=global.tab.NewStoryboardButtonModel=ss.mkType(a,'tab.NewStoryboardButtonModel',function(nk){lH.call(this,tab.Strings.NewStoryName,'tabAuthTabNewStoryBtn','tabAuthNewStoryIcon',function(){nk.createNewStoryboard(true)},null)});var iL=global.tab.NewWorksheetButtonModel=ss.mkType(a,'tab.NewWorksheetButtonModel',function(nk){lH.call(this,tab.Strings.NewWorksheetName,'tabAuthTabNewWorksheetBtn','tabAuthNewWorksheetIcon',function(){nk.createNewWorksheet(true)},iM.keyCombo.getHintText())});var iM=global.tab.NewWorksheetKeyboardShortcut=ss.mkType(a,'tab.NewWorksheetKeyboardShortcut',function(nk){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=nk},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(nk){this.$0.createNewWorksheet(false)},getCommandId:function(){return{ns:'tabdoc',cmd:'new-worksheet'}},getKeyComboOrKeyCombos:function(){return iM.keyCombo}});var iN=global.tab.NoFieldColorOptionView=ss.mkType(a,'tab.NoFieldColorOptionView',function(nk){this.$8=null;this.$7=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[iO]).call(this,nk,new iP);this.dom=this.get_template();this.$8=tab.ObjectRegistry.newView(dn).call(null,[this.get_viewModel().get_colorPicker()]);this.disposables.add$1(this.$8);this.$7=tab.ObjectRegistry.newView(cV).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);this.disposables.add$1(this.$7)},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$8.addToDom(this.dom.colorPickerContainer);this.$7.addToDom(this.dom.colorEffectsContainer)}});var iO=global.tab.NoFieldColorOptionViewModel=ss.mkType(a,'tab.NoFieldColorOptionViewModel',function(nk){this.$2=null;this.$1=null;this.$0=null;spiff.BaseViewModel.call(this);this.$2=nk;this.$1=new dp(this.$2,true);this.$0=new cW(this.$2)},{get_colorPicker:function(){return this.$1},get_colorOptionEffectsViewModel:function(){return this.$0},get_viewType:function(){return iN},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},dispose:function(){this.$1.dispose();this.$0.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},updateUberPopupViewModel:function(nk){}});var iP=global.tab.NoFieldColorOptionViewTemplate=ss.mkType(a,'tab.NoFieldColorOptionViewTemplate',function(){this.colorPickerContainer=null;this.colorEffectsContainer=null;spiff.Template.call(this,$("<div class='tabAuthNoFieldsColorOptionContent'>\n            <div class='tabColorPickerContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorPickerContainer=this.getElementBySelector('.tabColorPickerContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var iQ=global.tab.NotificationCommandRedirectHandler=ss.mkType(a,'tab.NotificationCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['notificationPresModel'.toString()];tab.ConfirmationViewModel.showNotification(ss.htmlEncode(nm.notificationMsg.toString()),function(){nl.resolve()});return nl.promise()}});var iR=global.tab.NumberFormattingRedirectHandler=ss.mkType(a,'tab.NumberFormattingRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();var nm=nk['compositeContainer'];if(ss.isNullOrUndefined(nm)){nl.resolve();return nl.promise()}var nn=new tab.FormatContainerModel(null);tab.Model.nonWorldUpdate(function(ns){nn.update(nm,ns)});var no=gj.createContainerFromModel(nn,null);no.pickerClicked(bY.get_instance().get_viewModel().get_worksheet().lastClickedPill);var np=no.get_popupViewModel();var nq=_.throttle(ss.mkdel(np,np.updatePosition),150);var nr=spiff.EventUtil.bindWithDispose($(window),'resize',function(ns){nq()});no.get_popupViewModel().add_disposed(function(ns){nr.dispose()});nl.resolve();return nl.promise()}});var iS=global.tab.NumericBinEditProxy=ss.mkType(a,'tab.NumericBinEditProxy');var iT=global.tab.OpenFormatWorkbookSidePaneModel=ss.mkType(a,'tab.OpenFormatWorkbookSidePaneModel',function(){this.$2$1=null;tab.Model.call(this,null,new tab.PresModelPathItem('',null))},{get_notificationId:function(){return'doc:open-format-workbook-side-pane-event'},add_stopNotifying:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_stopNotifying:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},onNotify:function(nk,nl){(new mD).invoke()}});var iU=global.tab.OrderingAddressingListItemViewModel=ss.mkType(a,'tab.OrderingAddressingListItemViewModel',function(){this.$1$1=null;this.$1$2=null},{get_addressingName:function(){return this.$1$1},set_addressingName:function(nk){this.$1$1=nk},get_addressingValue:function(){return this.$1$2},set_addressingValue:function(nk){this.$1$2=nk}});var iV=global.tab.OrderingTypeListItemCreator=ss.mkType(a,'tab.OrderingTypeListItemCreator',function(){},{createListItemContent:function(nk){var nl="<span class='tab-list-item-label'></span>";var nm=$(nl);var nn=nk.get_data();if(ss.isValue(nn)){nm.text(nn.get_orderingTypeCaption())}return nm}});var iW=global.tab.OrderingTypeListItemViewModel=ss.mkType(a,'tab.OrderingTypeListItemViewModel',function(){this.$1$1=null;this.$1$2=null},{get_orderingTypeCaption:function(){return this.$1$1},set_orderingTypeCaption:function(nk){this.$1$1=nk},get_orderingTypeValue:function(){return this.$1$2},set_orderingTypeValue:function(nk){this.$1$2=nk}});var iX=global.tab.PalettePage=ss.mkType(a,'tab.PalettePage',function(){this.$1$1=null;this.$1$2=null;this.set_paletteGroups([])},{get_warningPageModel:function(){return this.$1$1},set_warningPageModel:function(nk){this.$1$1=nk},get_paletteGroups:function(){return this.$1$2},set_paletteGroups:function(nk){this.$1$2=nk},get_isWarningPage:function(){return ss.isValue(this.get_warningPageModel())},addGroup:function(nk){this.get_paletteGroups().push(new de(nk))}});var iY=global.tab.PanelControlMode=ss.mkEnum(a,'tab.PanelControlMode',{dataAnalytics:0,workbookFormat:1});var iZ=global.tab.PaneView$1=ss.mkType(a,'tab.PaneView$1',function(nk){var nl=ss.registerGenericClassInstance(iZ,[nk],function(nm){this.$8=null;this.$7=null;this.$3$1=null;ss.makeGenericType(spiff.BaseView$1,[nk]).call(this,nm,new i);this.$8=this.get_template();var nn=ss.safeCast(nm,tab.IPaneContent);this.$8.$2.text(nn.get_title());this.$7=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nn.get_contentViewType(),[nn.get_contentViewModel()]);if(!ss.isNullOrEmptyString(nn.get_additionalContentViewClass())){this.$7.get_rootElement().addClass(nn.get_additionalContentViewClass())}},{get_paneContents:function(){return[this.get_viewModel()]},get_activePaneTitle:function(){return this.$3$1},set_activePaneTitle:function(nm){this.$3$1=nm},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7.addToDom(this.$8.$1)},dispose:function(){this.$7.dispose();ss.makeGenericType(spiff.BaseView$1,[nk]).prototype.dispose.call(this)}},null,function(){return ss.makeGenericType(spiff.BaseView$1,[nk])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[nk]),ss.IDisposable,tab.IAppendableView,gU]});tab.ObjectRegistry.registerType(nl,nl).call(null);return nl});ss.initGenericClass(iZ,1);var ja=global.tab.PercentTotalTableCalcViewModel=ss.mkType(a,'tab.PercentTotalTableCalcViewModel',function(nk){this.$0=null;mi.call(this);this.$0=nk;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})))},{get_allPages:function(){return this.$0.get_allPages()},get_allPagesState:function(){return this.$0.get_allPagesState()},get_model:function(){return this.$0},onModelUpdated:function(){},allPagesChanged:function(nk){if(nk===this.get_allPages()){return}var nl=new tab.TableCalcSetPercentTotalOptionsCmd;nl.set_uiBlocking('immediately');nl.c['includeAllPages']=nk;nl.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var jb=global.tab.PillDragAvatar=ss.mkType(a,'tab.PillDragAvatar',function(nk,nl){this.$7=null;this.$5=null;this.$6=false;spiff.Widget.call(this,$("\n<span class='tabAuthPillAvatar'>\n    <div class='tabAuthPillAvatarLabel'>{0}</div>\n</span>"));this.set_label(nk);this.set_fieldType(nl)},{get_rootElement:function(){return this.element},get_viewModel:function(){return null},get_label:function(){return this.$7},set_label:function(nk){this.$7=nk;if(!this.$6){this.$4(null)}},get_fieldType:function(){return this.$5},set_fieldType:function(nk){this.$5=nk;var nl=false;var nm=false;var nn=false;var no=false;switch(this.$5){case'ordinal':{nl=true;break}case'quantitative':{nm=true;break}case'nominal':{nn=true;break}default:{no=true;break}}this.element.toggleClass('tabAuthPillOrdinal',nl);this.element.toggleClass('tabAuthPillQuantatative',nm);this.element.toggleClass('tabAuthPillNominal',nn);this.element.toggleClass('tabAuthPillOther',no)},$4:function(nk){var nl=this.element.find('.'+'tabAuthPillAvatarLabel');var nm=nk;if(ss.isNullOrUndefined(nm)){nm=this.get_label()}nl.text(nm)},setCustomLabel:function(nk){this.$6=true;this.$4(nk)},removeCustomLabel:function(){if(this.$6){this.$4(null)}this.$6=false}});var jc=global.tab.PillDragInstance=ss.mkType(a,'tab.PillDragInstance',function(nk,nl,nm,nn){this.$1=null;this.$2=null;this.$4$1=false;cf.call(this,nk,new jb(nl,nm));this.$1=this.get_dragAvatar();this.$2=nn||jd.noOp},{get_fields:function(){if(this.hasOnlyFields()){return this.draggedObject}else if(this.hasOnlyPills()){var nk=_.map(this.draggedObject,function(nl){return nl.get_field()});return nk}return null},get_fieldNames:function(){return _.map(this.get_fields(),function(nk){return nk.get_globalName()})},get_pills:function(){return(this.hasOnlyPills()?this.draggedObject:null)},get_pill:function(){var nk=this.get_pills();return nk[0]},get_defaultDropCursor:function(){return this.$2.cursor(this.isCopyDrag)},get_readyToDrop:function(){return this.finalDrop.state()==='resolved'},get_canDropOnShowMe:function(){return this.$4$1},set_canDropOnShowMe:function(nk){this.$4$1=nk},hasOnlyFields:function(){if(ss.isInstanceOfType(this.draggedObject,Array)){var nk=this.draggedObject;return _.every(nk,function(nl){return ss.isInstanceOfType(nl,tab.FieldModel)})}return ss.isInstanceOfType(this.draggedObject,tab.FieldModel)},hasOnlyPills:function(){if(ss.isInstanceOfType(this.draggedObject,Array)){var nk=this.draggedObject;return _.every(nk,function(nl){return ss.isInstanceOfType(nl,jg)})}return ss.isInstanceOfType(this.draggedObject,jg)},resolve:function(nk){if(this.finalDrop.state()==='resolved'||ss.isNullOrUndefined(nk)){return}this.drag=nk;this.set_canDropOnShowMe(this.drag.canDropOnShowme);if(this.hasOnlyFields()){this.updateDraggedFieldFromServer(this.drag)}if(ss.isValue(EventUtils.DragDropManager.get_currentTarget())){var nl=EventUtils.DragDropManager.get_currentTarget().getDropCursor(this);EventUtils.DragDropManager.setDragCursor(nl)}this.finalDrop.resolve(this)},updateDraggedFieldFromServer:function(nk){var nl=[];var nm=this.get_fields();var nn=true;for(var no=0;no<nk.shelfDropModels.length;no++){var np=nk.shelfDropModels[no];if(np.fieldEncodings.length===0){continue}for(var nq=0;nq<np.fieldEncodings.length;nq++){var nr=np.fieldEncodings[nq];var ns={$:nr.fn};nn=nn&&_.any(nm,ss.mkdel({newGlobalName:ns},function(nv){return ss.referenceEquals(nv.get_globalName(),this.newGlobalName.$)}));if(ss.isValue(ns.$)){var nt=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var nu=nt.findField(ns.$);if(ss.isValue(nu)&&!ss.contains(nl,nu)){nl.push(nu)}}}break}if(nl.length>0&&!nn){this.draggedObject=nl;this.$1.set_label(nl[0].get_description())}},reject:function(nk){if(this.finalDrop.state()==='resolved'||!ss.isNullOrUndefined(nk)){return}if(ss.isNullOrUndefined(this.drag)){this.drag=nk}this.finalDrop.reject(this)},dropToNowhereAction:function(){this.$2.action(this.isCopyDrag)}});var jd=global.tab.PillDropDefaultAction=ss.mkType(a,'tab.PillDropDefaultAction',function(){this.action=null;this.cursor=null});var je=global.tab.PillTelemetry=ss.mkType(a,'tab.PillTelemetry',null,null,{logPillMenuItemEvent:function(nk,nl,nm,nn,no){var np=new tab.MenuItemTelemetryConfigOptions;np.set_commands(nm);np.menuItems=nn;np.set_menuItem(no);np.set_menuPrefix('');np.set_menuTextMayBeSensitive(false);var nq=np;var nr=tab.CommandsTelemetryUtils.getMenuItemTelemetryInfoFromMenuAndCommands(nq);var ns=ss.mkdict(['TriggerMethod',nl,'ShelfType',nk.shelfVM.get_shelfType(),'EncodingType',nk.get_pill().get_encodingType(),'FieldRole',nk.get_role(),'FieldType',nk.get_field().get_fieldType(),'Command',(ss.isValue(nr)?nr.get_commandName():''),'FullName',(ss.isValue(nr)?nr.fullMenuItemName:no.name)]);var nt=nk.get_field().pm;if(ss.isValue(nt)){ns['DataType']=nt.dataType;ns['Aggregation']=nt.aggregation}if(nk.get_field().get_isParameter()){ns['IsParameter']=true}if(nk.get_field().get_isInvalid()){ns['IsInvalid']=true}if(no.checkState!==0){ns['CurrentCheckState']=true}tab.OnlineAnalyticsClient.logEvent('Authoring_PillMenu',ns)}});var jf=global.tab.PillView=ss.mkType(a,'tab.PillView',function(nk,nl){this.pillStrategy=null;ss.makeGenericType(spiff.BaseView$1,[jg]).call(this,nk,nl);this.pillStrategy=new fP(nk,nl)},{get_hasExternalIcon:function(){return this.pillStrategy.get_hasExternalIcon()},get_dom:function(){return this.pillStrategy.get_dom()},dispose:function(){this.pillStrategy.dispose();ss.makeGenericType(spiff.BaseView$1,[jg]).prototype.dispose.call(this)}});var jg=global.tab.PillViewModel=ss.mkType(a,'tab.PillViewModel',function(nk){this.$c=null;this.$b=null;this.$2$1=null;this.$2$2=null;this.shelfVM=null;spiff.BaseViewModel.call(this);this.shelfVM=nk;EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$3));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$3))}))},{add_pillChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_pillChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_showDragAccept:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_showDragAccept:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_pill:function(){return this.$c},set_pill:function(nk){if(ss.referenceEquals(this.$c,nk)){return}this.$c=nk;this.handlePillChanged()},get_item:function(){return this.$c.pm},get_field:function(){return this.$c.get_column()},get_indexInShelf:function(){return ss.indexOf(this.shelfVM.get_pills(),this)},get_displayName:function(){return this.$c.get_displayName()},get_role:function(){return this.$c.get_column().get_role()},get_displayAsMultipleFields:function(){return this.$c.get_isMultipleFields()},get_displayAsInvalid:function(){return!!this.get_item().isInvalid},get_displayAsOrdinal:function(){return this.$a()&&this.get_field().get_fieldType()==='ordinal'},get_displayAsQuantitative:function(){return this.$a()&&this.get_field().get_fieldType()==='quantitative'},get_displayAsNominal:function(){return this.$a()&&this.get_field().get_fieldType()==='nominal'},get_displayAsOther:function(){return this.$a()&&!this.get_displayAsOrdinal()&&!this.get_displayAsQuantitative()&&!this.get_displayAsNominal()},get_displayAsMeasure:function(){return this.$c.get_column().get_role()==='measure'},get_displayAsDimension:function(){var nk=this.$c.get_column().get_role()==='dimension';var nl=this.$c.get_column().get_role()==='unknown';return nk||nl},get_feedbackType:function(){return'dropfeedbackuponentry'},get_displayAsContext:function(){return!!this.$c.get_isContextFilter()},get_pillIdentifier:function(){return'tabPill'+this.get_item().shelfItemId},$a:function(){return!this.get_item().isInvalid&&!this.$c.get_isMultipleFields()},$8:function(){return this.$b},$9:function(nk){if(ss.referenceEquals(this.$b,nk)){return}this.$2();this.$b=nk;if(ss.isValue(this.$b)){this.$b.add_ctrlStateChanged(ss.mkdel(this,this.$7))}},dispose:function(){this.$2();spiff.BaseViewModel.prototype.dispose.call(this)},$3:function(nk){this.$2()},$2:function(){if(ss.isValue(this.$b)){this.$b.remove_ctrlStateChanged(ss.mkdel(this,this.$7));this.$b=null}},dragOver:function(nk){var nl=this.$1(nk);if(nl){this.$4(true);return this}return this.shelfVM.createPillDividerDropTarget(this.get_indexInShelf())},dragExit:function(nk){this.$4(false)},$4:function(nk){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(nk)}},acceptDrop:function(nk){var nl=$.Deferred();if(ss.isInstanceOfType(nk,cf)){var nm=ss.mkdel(this,function(nn){var no=ss.safeCast(nn,cf);var np=this.$1(no);if(!np){}else if(no.hasOnlyPills()){var nq=no.get_pill();var nr=no.dropPositionToReplacePill(this);if(!tsConfig.is_mobile&&tab.FeatureFlags.isEnabled('WebFilterDialog')&&this.shelfVM.get_shelfType()==='filter-shelf'){var ns={shelfType:nq.shelfVM.get_shelfType(),shelfPosIndex:nq.get_indexInShelf(),shelfDropAction:'replace'};tab.ShelfClientCommands.launchFilterDialog(nq.get_pill().get_column().get_globalName(),'drag-drop-shelf',nr,ns,false,no.isCopyDrag)}else{tab.ShelfClientCommands.replaceShelfPill(nq.shelfVM.get_shelf(),nq.get_pill(),this.shelfVM.get_shelf(),this.$c,nr,no.isCopyDrag)}}else if(no.hasOnlyFields()){var nt=no.fieldsToDropOnShelf(this.shelfVM.get_shelfType());var nu=no.dropPositionToReplacePill(this);if(!tsConfig.is_mobile&&tab.FeatureFlags.isEnabled('WebFilterDialog')&&this.shelfVM.get_shelfType()==='filter-shelf'&&nt.length===1){tab.ShelfClientCommands.launchFilterDialog(nt[0].get_globalName(),'drag-drop-schema',nu,null,no.isRightDrag,no.isCopyDrag)}else if(no.shouldGetAggregationOfField(nt)){no.selectAggregationForField(this.shelfVM.get_shelfType(),nt[0],ss.mkdel(this,function(nv){var nw=this.shelfVM.get_shelf();var nx=this.$c;var ny=[];ny.push(nv.selectedField);tab.ShelfClientCommands.replaceShelfPillWithField(nw,nx,ny,nu,nv.isRelativeDate)}))}else{tab.ShelfClientCommands.replaceShelfPillWithField(this.shelfVM.get_shelf(),this.$c,nt,nu,false)}}nl.resolve(np)});if(nk.get_drop().state()==='resolved'){nm(nk)}else{nk.get_drop().done(nm)}}else{nl.resolve(false)}return nl},getDropTarget:function(nk){return this},getDropCursor:function(nk){return this.shelfVM.getDropCursor(nk)},$7:function(){EventUtils.DragDropManager.setDragCursor(this.getDropCursor(EventUtils.DragDropManager.get_currentDrag()))},startDrag:function(nk){var nl=new jc([this],this.get_displayName(),this.get_field().get_fieldType(),(ss.isValue(this.shelfVM)?this.shelfVM.getPillDropDefaultAction(this):jd.noOp));nl.isCopyDrag=nk.get_IsCtrlKey();this.$9(nl);var nm=tab.ShelfClientCommands.startDrag([this.$c.get_column()],this.$c.get_encodingType(),tab.ModelUtils.findActivePaneSpecId(),false,'drag-drop-none');nm.done(ss.mkdel(this,function(nn){if(ss.isNullOrUndefined(this.$8())){return}if(ss.isValue(nn)&&ss.isValue(nn.shelfDropModels)){this.$8().resolve(nn)}else{this.$8().reject(nn)}}));return this.$8()},acceptsDragType:function(){return 1},menuButtonClicked:function(nk,nl){tab.ShelfClientCommands.getShelfItemContextMenu(this.$c.pm.shelfItemId,this.shelfVM.get_shelfType(),this.shelfVM.get_shelf().get_paneId()).done(ss.mkdel(this,function(nm){if(nk.parents().find(document.body).length===0){nk=$('#'+this.get_pillIdentifier())}if(nk.length>0){var nn=nm.commands;this.$5(nn,nk,nl);this.setWorksheetLastPillClickedProperty(nk)}else{this.setWorksheetLastPillClickedProperty(null)}}))},$5:function(nk,nl,nm){var nn=this.$0(nk);var no=spiff.MenuViewModel.createForMenu(nn,ss.mkdel(this,function(np){je.logPillMenuItemEvent(this,nm,nk,nn.menuItems,np);tab.WidgetUtil.commandMenuItemClicked(np)}),null,null);no.show(new spiff.ShowMenuOptions(nl,true))},setWorksheetLastPillClickedProperty:function(nk){if(ss.isValue(bY.get_instance().get_viewModel().get_worksheet())){bY.get_instance().get_viewModel().get_worksheet().lastClickedPill=nk}},iconClicked:function(){if(this.get_pill().get_hasDrill()){tab.ShelfClientCommands.drillOnPill(this.shelfVM.get_shelf(),this.get_pill(),this.get_indexInShelf())}},pillClicked:function(){},pillDoubleClicked:function(){if(tsConfig.is_mobile){return}this.$6(this.$c.get_defaultMenuCommand())},$6:function(nk){var nl=this.$0(nk);var nm=nl.defaultItem;if(ss.isValue(nm)){je.logPillMenuItemEvent(this,'double-click',nk,nl.menuItems,nm);tab.WidgetUtil.commandMenuItemClicked(nm)}},updateEncodingType:function(nk){if(nk===this.$c.get_encodingType()){return}tab.ShelfClientCommands.setItemEncodingType(this.shelfVM.get_shelf(),this.$c,nk)},handlePillChanged:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1(this)}},$1:function(nk){if(!nk.get_hasPayload()||!ss.isInstanceOfType(nk,cf)){return false}if(this.shelfVM.get_dropState()===2&&!nk.payloadEquals(this)){return false}var nl=nk.dropPositionToReplacePill(this);return ss.isValue(nl)},$0:function(nk){var nl=[];if(ss.isValue(nk)){tab.WidgetUtil.newMenuItemsFromCommands(nl,nk,tab.WidgetUtil.createDropdownMenuCommandHandler,false)}return new spiff.Menu(nl)}});var jh=global.tab.PillViewTemplate=ss.mkType(a,'tab.PillViewTemplate',function(nk){this.drillIcon=null;this.icons=null;this.label=null;this.menuButton=null;this.dragSource=null;this.content=null;this.externalIcon=null;this.encodingType=null;spiff.Template.call(this,$(nk));var nl=ss.mkdel(this,this.getElementBySelector);this.drillIcon=nl('.tabAuthPillDrillIcon');this.icons=nl('.tabAuthPillIcons');this.label=nl('.tabAuthPillLabel');this.menuButton=nl('.tabAuthPillMenuBtn');this.content=nl('.tabAuthPillContent');this.externalIcon=nl('.tabAuthPillExternalIcon');this.encodingType=nl('.tabAuthPillEncodingType');this.dragSource=this.domRoot});var ji=global.tab.PlaceholderToolbarItems=ss.mkType(a,'tab.PlaceholderToolbarItems',null,null,{get_items:function(){return ji.$2},$0:function(){var nk=ji.$2;var nl=new tab.CommandItemWrapper(null);nl.set_commandsType('item');nl.set_name('Undo');nl.set_enabled(false);nl.set_iconRes('undo');nk.push(nl.get_item());var nm=ji.$2;var nn=new tab.CommandItemWrapper(null);nn.set_commandsType('item');nn.set_name('Redo');nn.set_enabled(false);nn.set_iconRes('redo');nm.push(nn.get_item());var no=ji.$2;var np=new tab.CommandItemWrapper(null);np.set_commandsType('item');np.set_name('Save');np.set_enabled(false);np.set_iconRes('save');no.push(np.get_item());var nq=ji.$2;var nr=new tab.CommandItemWrapper(null);nr.set_commandsType('separator');nq.push(nr.get_item());var ns=ji.$2;var nt=new tab.CommandItemWrapper(null);nt.set_commandsType('item');nt.set_name('New Data Source');nt.set_enabled(false);nt.set_iconRes('new-connect');ns.push(nt.get_item());var nu=ji.$2;var nv=new tab.CommandItemWrapper(null);nv.set_commandsType('item');nv.set_name('Pause Auto Updates');nv.set_enabled(false);nv.set_iconRes('pause-updates');nu.push(nv.get_item());var nw=ji.$2;var nx=new tab.CommandItemWrapper(null);nx.set_commandsType('separator');nw.push(nx.get_item());var ny=ji.$2;var nz=new tab.CommandItemWrapper(null);nz.set_commandsType('item');nz.set_name('New Worksheet');nz.set_enabled(false);nz.set_iconRes('new-sheet');ny.push(nz.get_item());var nA=ji.$2;var nB=new tab.CommandItemWrapper(null);nB.set_commandsType('item');nB.set_name('Duplicate');nB.set_enabled(false);nB.set_iconRes('duplicate-sheet');nA.push(nB.get_item());var nC=ji.$2;var nD=new tab.CommandItemWrapper(null);nD.set_commandsType('item');nD.set_name('Clear Sheet');nD.set_enabled(false);nD.set_iconRes('clear-sheet');nC.push(nD.get_item());var nE=ji.$2;var nF=new tab.CommandItemWrapper(null);nF.set_commandsType('separator');nE.push(nF.get_item());var nG=ji.$2;var nH=new tab.CommandItemWrapper(null);nH.set_commandsType('item');nH.set_name('Swap Rows and Columns');nH.set_enabled(false);nH.set_iconRes('swap');nG.push(nH.get_item());var nI=ji.$2;var nJ=new tab.CommandItemWrapper(null);nJ.set_commandsType('item');nJ.set_name('Sort Ascending');nJ.set_enabled(false);nJ.set_iconRes('sort-ascending');nI.push(nJ.get_item());var nK=ji.$2;var nL=new tab.CommandItemWrapper(null);nL.set_commandsType('item');nL.set_name('Sort Descending');nL.set_enabled(false);nL.set_iconRes('sort-descending');nK.push(nL.get_item());var nM=ji.$2;var nN=new tab.CommandItemWrapper(null);nN.set_commandsType('item');nN.set_name('Totals');nN.set_enabled(false);nN.set_iconRes('totals');nM.push(nN.get_item());var nO=ji.$2;var nP=new tab.CommandItemWrapper(null);nP.set_commandsType('separator');nO.push(nP.get_item());var nQ=ji.$2;var nR=new tab.CommandItemWrapper(null);nR.set_commandsType('item');nR.set_name('Highlight');nR.set_enabled(false);nR.set_iconRes('highlight-enable');nQ.push(nR.get_item());var nS=ji.$2;var nT=new tab.CommandItemWrapper(null);nT.set_commandsType('item');nT.set_name('Show Labels');nT.set_enabled(false);nT.set_iconRes('show-labels');nS.push(nT.get_item());var nU=ji.$2;var nV=new tab.CommandItemWrapper(null);nV.set_commandsType('item');nV.set_name('Format Workbook');nV.set_enabled(false);nV.set_iconRes('format-workbook');nU.push(nV.get_item());var nW=ji.$2;var nX=new tab.CommandItemWrapper(null);nX.set_commandsType('item');nX.set_name('Fit');nX.set_enabled(false);nX.set_iconRes('viewsize');nW.push(nX.get_item());var nY=ji.$2;var nZ=new tab.CommandItemWrapper(null);nZ.set_commandsType('separator');nY.push(nZ.get_item());var oa=ji.$2;var ob=new tab.CommandItemWrapper(null);ob.set_commandsType('item');ob.set_name('Show/Hide Cards');ob.set_enabled(false);ob.set_iconRes('window-options');oa.push(ob.get_item());var oc=ji.$2;var od=new tab.CommandItemWrapper(null);od.set_commandsType('separator');oc.push(od.get_item());var oe=ji.$2;var of=new tab.CommandItemWrapper(null);of.set_commandsType('item');of.set_name('Download');of.set_enabled(false);of.set_iconRes('export');oe.push(of.get_item());if(tab.FeatureFlags.isEnabled('ConnectedExperience')){var og=ji.$2;var oh=new tab.CommandItemWrapper(null);oh.set_commandsType('item');oh.set_name('Open in Desktop');oh.set_enabled(false);oh.set_iconRes('open-on-desktop');og.push(oh.get_item())}var oi=ji.$2;var oj=new tab.CommandItemWrapper(null);oj.set_commandsType('item');oj.set_name('Show Me');oj.set_enabled(false);oj.set_iconRes('showme');oj.set_command('tabdoc:web-show-me');oi.push(oj.get_item())}});var jj=global.tab.PluggableCardItemView$1=ss.mkType(a,'tab.PluggableCardItemView$1',function(nk){var nl=ss.registerGenericClassInstance(jj,[nk],function(nm,nn){ss.makeGenericType(spiff.BaseView$1,[nk]).call(this,nm,nn)},{appendToParentCardView:null},null,function(){return ss.makeGenericType(spiff.BaseView$1,[nk])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[nk]),ss.IDisposable,tab.IAppendableView]});return nl});ss.initGenericClass(jj,1);var jk=global.tab.PreviewStyleBuilder=ss.mkType(a,'tab.PreviewStyleBuilder',function(){this.$1$1=null;this.$1$2=null;this.$1$3=false;this.$1$4=false;this.$1$5=false},{get_fontFamily:function(){return this.$1$1},set_fontFamily:function(nk){this.$1$1=nk},get_fontColor:function(){return this.$1$2},set_fontColor:function(nk){this.$1$2=nk},get_bold:function(){return this.$1$3},set_bold:function(nk){this.$1$3=nk},get_italic:function(){return this.$1$4},set_italic:function(nk){this.$1$4=nk},get_underline:function(){return this.$1$5},set_underline:function(nk){this.$1$5=nk},build:function(){var nk={};nk['font-family']=tab.FontUtil.addQuotationMarks(this.get_fontFamily(),false);nk.color=this.get_fontColor();if(!ss.isNullOrEmptyString(this.get_fontColor())){var nl=tab.ColorModel.fromColorCode(this.get_fontColor());if(nl.isLStarAboveThreshold(85)){nk['background-color']='rgb(180, 180, 180)';nk['padding-bottom']='2px'}}if(this.get_bold()){nk['font-weight']='bold'}if(this.get_italic()){nk['font-style']='italic'}if(this.get_underline()){nk['text-decoration']='underline'}return nk}});var jl=global.tab.PublishOption=ss.mkType(a,'tab.PublishOption',function(nk,nl,nm){this.displayName=null;this.onExecute=null;this.isEnabled=false;this.displayName=nk;this.onExecute=nl;this.isEnabled=nm});var jm=global.tab.PublishToastAfterPublishAs=ss.mkType(a,'tab.PublishToastAfterPublishAs',null,null,{showToastIfNeeded:function(){var nk=(ss.isValue(window.sessionStorage)?window.sessionStorage.getItem(jm.publishToastLocation):null);if(!tab.MiscUtil.isNullOrEmpty$1(nk)){window.sessionStorage.removeItem(jm.publishToastLocation);var nl=tab.Strings.AuthoringToastMessagePublishedWorkbookToLocation(tsConfig.workbookName,nk);var nm=tab.Strings.AuthoringToastActionMessageGoToWorkbook;jm.$0(nl,nm)}},$0:function(nk,nl){var nm=tab.URIUtil.get_workbookViewsUri();SharedWidgets.ToastWidget.show({message:nk,toastType:'success',actionMessage:nl,actionHref:nm})}});var jn=global.tab.PublishUploadedFileDialog=ss.mkType(a,'tab.PublishUploadedFileDialog',function(){this.$2=null;tab.BaseDisposableDialog.call(this)},{$1:function(){if(ss.isNullOrUndefined(jn.$0)){this.$2=new kI;this.parentNode=document.createElement('div');var nk={title:tab.Strings.AuthPublishUploadedFileDialogTitle,secondaryChoiceAction:ss.mkdel(this,this.$0),secondaryChoiceButtonString:(this.$2.get_isEnabled()?tab.Strings.AuthAutoSaveWarningDialogCancel:tab.Strings.DialogButtonOK),primaryChoiceButtonIsAvailable:this.$2.get_isEnabled(),doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogPublishButton,primaryChoiceAction:ss.mkdel(this,function(){this.$2.invoke().done(ss.mkdel(this,this.$0))}),firstMessage:tab.Strings.AuthPublishUploadedFileDialogPublish,dialogWidth:400};jn.$0=React.createElement(ce,nk);ReactDOM.render(jn.$0,this.parentNode)}},$0:function(){jn.$0=null;_.defer(ss.mkdel(this,this.dispose))}},{showPublishUploadedFileDialog:function(){(new jn).$1()}});var jo=global.tab.QuantitativeColorEditorComponent=ss.mkType(a,'tab.QuantitativeColorEditorComponent',function(nk,nl){this.$H=1;React.Component.call(this,nk,nl);this.state=this.$2(this.props)},{componentWillReceiveProps:function(nk){this.setState(this.$2(nk))},componentDidUpdate:function(){if(this.state.dropdownOpen){var nk=$('.tab-quantitativeColorEditor .tab-Dropdown .tab-vScrollable');var nl=nk.innerHeight();var nm=nk.children().outerHeight(true);this.$H=Math.floor(nl/nm);var nn=nk.find('.selected');if(nn.length===1){var no=nn.position().top;var np=no+nm;if(no<0){nn.get(0).scrollIntoView(true)}else if(np>nl){nn.get(0).scrollIntoView(false)}}}},$2:function(nk){var nl=nk.stepsValue;if(ss.isNullOrUndefined(this.state)){var nm=false;if(!nk.stepsEnabled||nl===0){nl=5}if(nk.canShowAdvancedSettings){if(nk.startChecked||nk.centerChecked||nk.endChecked){nm=true}}return{dropdownOpen:false,paletteGroupSelection:null,stepsValue:nl,showAdvancedOptions:nm}}var nn={};if(nk.stepsEnabled&&nl!==0){nn.stepsValue=nl}return nn},$0:function(){var nk=this.props.colorPalettes[this.props.selectedColorPaletteIndex];return spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,Array.prototype.slice.call(this.props.colorPalettes),function(nl){return ss.equals(nl,nk)})},render:function(){return spiff.ReactElement.div$1('tab-quantitativeColorEditor',[this.$f('tab-quantitativeColorPaletteSelector',[this.$w()]),this.$f('tab-quantitativeColorCustomization',[this.$p()]),this.$f('tab-quantitativeColorOptions',[this.$s()]),(this.props.canShowAdvancedSettings?ss.mkdel(this,function(){return this.$f('tab-quantitativeColorAdvancedToggle',[this.$l()])})():null),this.$f('tab-quantitativeColorReset',[this.$x()])])},$f:function(nk,nl){return spiff.DOMElements.div({className:nk,key:nk},nl)},$w:function(){return[this.$f('tab-quantitativeColorPaletteLabel',[tab.Strings.QuantitativeColorPaletteLabel]),this.$t()]},$t:function(){var nk;if(this.props.selectedColorPaletteIndex>=0){nk=this.props.selectedPalette}else{nk={colorPaletteId:'',colorPaletteName:tab.Strings.AuthColorPaletteLegacy}}if(!this.state.dropdownOpen&&ss.isValue(this.state.paletteGroupSelection)){var nl=this.state.paletteGroupSelection.mapSelected(ss.Int32).call(this.state.paletteGroupSelection,function(nn){return nn})[0];nk=this.props.colorPalettes[nl]}var nm=new Object;nm.styleClass='tab-ColorPaletteDropdown';nm.isSelecting=this.state.dropdownOpen;nm.getDesiredHeight=function(nn){return 190};nm.renderButton=ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,{selectionIconClass:'tabAuthPalette-small-'+nk.colorPaletteId,selectionText:nk.colorPaletteName,key:nk.colorPaletteId.toString()})});nm.onFocusLost=ss.mkdel(this,this.$g);nm.onSelectorToggled=ss.mkdel(this,this.$i);nm.onKeyDown=ss.mkdel(this,this.$h);nm.key='tab-quantitativeColorPaletteDropdown';return React.createElement(spiff.StatelessDropdownComponent,nm,this.$v())},$i:function(){this.$C(!this.state.dropdownOpen)},$g:function(){this.$5()},$5:function(){if(this.state.dropdownOpen||ss.isValue(this.state.paletteGroupSelection)){var nk={dropdownOpen:false,paletteGroupSelection:null};this.setState(nk)}},$6:function(){if(ss.isValue(this.state.paletteGroupSelection)){this.$4(this.state.paletteGroupSelection)}this.$C(false)},$C:function(nk){this.setState({dropdownOpen:nk})},$h:function(nk){var nl=nk.which;var nm=this.state.dropdownOpen;switch(nl){case 38:case 40:{if(nk.altKey){this.$C(!nm)}else{this.$d(nl)}break}case 36:case 35:case 33:case 34:{this.$d(nl);break}case 13:{this.$6();break}case 27:{this.$5();if(!nm){return}break}case 32:{this.$C(true);break}case 9:{this.$5();if(!nm){return}break}default:{return}}nk.stopPropagation();nk.preventDefault()},$d:function(nk){var nl;if(ss.isNullOrUndefined(this.state.paletteGroupSelection)){nl=this.$0()}else{nl=this.state.paletteGroupSelection.clone()}switch(nk){case 38:{nl.selectPrevious(1);break}case 40:{nl.selectNext(1);break}case 36:{nl.selectFirst();break}case 35:{nl.selectLast();break}case 33:{nl.selectPrevious(this.$H);break}case 34:{nl.selectNext(this.$H);break}default:{return}}this.setState({paletteGroupSelection:nl})},$v:function(){return React.createElement(spiff.SelectableButtonGroupComponent,this.$1())},$1:function(){var nk=this.state.paletteGroupSelection||this.$0();var nl=new Object;nl.allOption=false;nl.borders=false;nl.showApplyAndCancelButtons=false;nl.items=_.map(this.props.colorPalettes,ss.mkdel(this,function(nm){var nn=new spiff.SelectableButtonGroupItem;nn.label=nm.colorPaletteName;nn.getCustomContentBefore=ss.mkdel(this,function(){return this.$a(nm)});return nn}));nl.selection=nk;nl.onSelectionChanged=ss.mkdel(this,this.$j);return nl},$a:function(nk){return[(nk.isCustomPalette?dk.renderCustomPaletteIcon(nk,this.props.stepsEnabled):spiff.DOMElements.div({key:nk.colorPaletteId.toString(),className:'tab-AuthPaletteIcon tabAuthPalette-small-'+nk.colorPaletteId}))]},$p:function(){return[((this.props.isDiverging||this.props.reverse)?ss.mkdel(this,function(){return this.$o(true)})():null),this.$f('tab-quantitativeColorCustomizationPalette',[this.$q()]),((this.props.isDiverging||!this.props.reverse)?ss.mkdel(this,function(){return this.$o(false)})():null)]},$o:function(nk){var nl=(nk?'tab-quantitativeColorSwatchMin':'tab-quantitativeColorSwatchMax');var nm=(nk?this.props.minColor:this.props.maxColor);var nn=(nk?tab.Strings.QuantitativeColorStartSwatch(nm):tab.Strings.QuantitativeColorEndSwatch(nm));var no=new EventUtils.EventHandleSpec;no.tap=ss.mkdel(this,function(np){this.$7(nk)});return EventUtils.EventForwarder.div(no,{className:nl,style:{backgroundColor:nm},title:nn,key:nl,tabIndex:0,role:'button',onKeyDown:ss.mkdel(this,function(np){this.$G(np.which,nk)})})},$q:function(){return[React.createElement(jv,{stepped:this.props.stepsEnabled,colors:this.props.colors,key:'tab-quantitativeColorCustomPalette'}),this.$f('tab-quantitativeColorCustomPaletteMinMaxContainer',[this.$u()])]},$u:function(){return[this.$f('tab-quantitativeColorPaletteMin',[this.props.minValue]),this.$f('tab-quantitativeColorPaletteMax',[this.props.maxValue])]},$s:function(){return[this.$f('tab-quantitativeColorSteps',[this.$z()]),this.$f('tab-quantitativeReverse',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorReverse,checked:this.props.reverse,handleChange:ss.mkdel(this,this.$B),testId:'Reverse',disabled:false,key:'Reverse'})]),this.$f('tab-quantitativeFullColorRange',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorFullColorRange,checked:this.props.fullColorRange,handleChange:ss.mkdel(this,this.$9),testId:'FullColorRange',disabled:!this.props.canUseFullColorRange,key:'FullColorRange'})]),this.$f('tab-quantitativeIncludeTotals',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorIncludeTotals,checked:this.props.includeTotals,handleChange:ss.mkdel(this,this.$e),testId:'IncludeTotals',disabled:!this.props.includeTotalsOptionEnabled,key:'IncludeTotals'})])]},$z:function(){return[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorEnableSteps,checked:this.props.stepsEnabled,handleChange:ss.mkdel(this,this.$E),testId:'Steps',disabled:false,key:'Steps'}),React.createElement(SharedWidgets.IntegerStepperWidget,{containerStyle:{width:'48px',paddingLeft:SharedWidgets.TabStyles.Spacing.DefaultSpace,paddingRight:SharedWidgets.TabStyles.Spacing.DefaultSpace},start:this.state.stepsValue,max:255,min:2,onValueUpdated:ss.mkdel(this,this.$F),disabled:!this.props.stepsEnabled,testId:'StepsSpinner'}),React.createElement(SharedWidgets.InputLabelWidget,{testId:'StepsLabel',key:'StepsLabel'},tab.Strings.QuantitativeColorSteps)]},$l:function(){var nk={isExpanded:this.state.showAdvancedOptions,onExpand:ss.mkdel(this,this.$c),onCollapse:ss.mkdel(this,this.$b),direction:1,testId:'find-show-advanced-test-id',key:'tab-quantitativeColorExpandoWidget',label:(this.state.showAdvancedOptions?tab.Strings.QuantitativeColorHideAdvanced:tab.Strings.QuantitativeColorShowAdvanced)};return React.createElement(SharedWidgets.ExpandoWidget,nk,this.$k())},$k:function(){return this.$f('tab-quantitativeColorAdvancedItems',[this.$m()])},$m:function(){return[this.$f('tab-quantitativeColorStartAndEndContainer',[this.$f('tab-quantitativeColorStart',[this.$y()]),this.$f('tab-quantitativeColorEnd',[this.$r()])]),this.$f('tab-quantitativeColorCenterContainer',[this.$f('tab-quantitativeColorCenter',[this.$n()])])]},$y:function(){return[this.$f('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorStart,checked:this.props.startChecked,handleChange:ss.mkdel(this,this.$D),testId:'Start',disabled:false,key:'Start'})]),this.$f('tab-quantitativeColorAdvancedInput',[React.createElement(eM,this.props.startValueInputProps)])]},$r:function(){return[this.$f('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorEnd,checked:this.props.endChecked,handleChange:ss.mkdel(this,this.$8),testId:'End',disabled:false,key:'End'})]),this.$f('tab-quantitativeColorAdvancedInput',[React.createElement(eM,this.props.endValueInputProps)])]},$n:function(){return[this.$f('tab-quantitativeColorAdvancedCheckBox',[React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.QuantitativeColorCenter,checked:this.props.centerChecked,handleChange:ss.mkdel(this,this.$3),testId:'Center',disabled:!this.props.canEnableCenter,key:'Center'})]),this.$f('tab-quantitativeColorAdvancedInput',[React.createElement(eM,this.props.centerValueInputProps)])]},$x:function(){var nk=[this.$f('tab-quantitativeColorResetIcon',['']),this.$f('tab-quantitativeColorResetLabel',[tab.Strings.QuantitativeColorReset])];return React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,this.$A),buttonType:9,testId:'Reset',children:nk,disabled:false,key:'Reset',density:'high',style:{display:'flex',alignItems:'center',justifyContent:'center'}})},$j:function(nk){var nl=nk;this.$5();this.$4(nl)},$4:function(nk){var nl=nk.mapSelected(ss.Int32).call(nk,function(nm){return nm})[0];this.props.setSelectedPaletteIndex(nl)},$7:function(nk){var nl=function(){return $((nk?'.tab-quantitativeColorSwatchMin':'.tab-quantitativeColorSwatchMax'))};var nm=(nk?this.props.minColor:this.props.maxColor);var nn=new dI;var no=ss.mkdel(this,function(nq){if(ss.isNullOrUndefined(nq)){return}var nr=nq.toRgb();if(nk){this.props.setMinColor(nr)}else{this.props.setMaxColor(nr)}});var np=function(nq){no(nq);nl().focus()};nn.showWithCallbacks(nl,tab.ColorModel.fromColorCode(nm),no,np)},$G:function(nk,nl){if(nk===13||nk===32){this.$7(nl)}},$B:function(nk){this.props.reverseChanged(nk)},$E:function(nk){this.props.stepsEnabledChanged(nk,this.state.stepsValue)},$F:function(nk){this.props.stepsValueChanged(nk)},$9:function(nk){this.props.fullColorRangeChanged(nk)},$e:function(nk){this.props.includeTotalsChanged(nk)},$c:function(){this.setState({showAdvancedOptions:true})},$b:function(){this.setState({showAdvancedOptions:false})},$D:function(nk){this.props.startCheckedChanged(nk)},$8:function(nk){this.props.endCheckedChanged(nk)},$3:function(nk){this.props.centerCheckedChanged(nk)},$A:function(nk){this.props.resetValues()}});var jp=global.tab.QuantitativeColorEditorDialog=ss.mkType(a,'tab.QuantitativeColorEditorDialog',function(nk,nl){this.$3=null;this.$2=null;this.$1=null;React.Component.call(this);this.$2=document.createElement('div');this.$1=ss.mkdel(this,function(){this.$3=null;var nm=this.$2;this.$2=null;_.defer(function(){ReactDOM.unmountComponentAtNode(nm)});var nn=new tab.ReleaseComponentCmd;nn.c['componentId']=nk|0;nn.invoke();nl()})},{removeFromDOM:function(){this.$1()},showOrUpdate:function(nk){var nl={title:tab.Strings.QuantitativeColorDialogTitle(nk.title),onClose:ss.mkdel(this,function(){this.removeFromDOM()}),editorProps:nk};this.$3=React.createElement(jp,nl);ReactDOM.render(this.$3,this.$2)},$0:function(){var nk=React.createElement(jo,this.props.editorProps);var nl={testId:'tab-quantitativeColorDialog',isModal:true,type:0,isGlassTransparent:true,showCloseButton:true,title:this.props.title,positioningBehavior:2,dialogWidth:400,showFooter:false,shouldReturnFocusOnClose:false,children:nk,onCloseRequest:this.props.onClose,zIndex:1000,shouldAdjustPositionOnWindowResize:!tsConfig.is_mobile};return nl},render:function(){var nk=this.$0();return React.createElement(SharedWidgets.DialogWidget,nk)}});var jq=global.tab.QuantitativeColorEditorDialogNotificationProxy=ss.mkType(a,'tab.QuantitativeColorEditorDialogNotificationProxy');var jr=global.tab.QuantitativeColorEditorDialogViewModel=ss.mkType(a,'tab.QuantitativeColorEditorDialogViewModel',function(nk){this.$p=null;this.$o=null;this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$o=nk;nk.add_modelUpdated(ss.mkdel(this,this.$d));this.set_startValueInputViewModel(new eN('StartInput'));this.disposables.add$1(this.addChildViewModel(this.get_startValueInputViewModel()));this.set_endValueInputViewModel(new eN('EndInput'));this.disposables.add$1(this.addChildViewModel(this.get_endValueInputViewModel()));this.set_centerValueInputViewModel(new eN('CenterInput'));this.disposables.add$1(this.addChildViewModel(this.get_centerValueInputViewModel()));this.get_startValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$m));this.get_endValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$8));this.get_centerValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.add_propsUpdated(ss.mkdel(this,this.$k));this.disposables.add(ss.mkdel(this,function(){this.get_component().removeFromDOM();nk.remove_modelUpdated(ss.mkdel(this,this.$d));this.get_startValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$m));this.get_endValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$8));this.get_centerValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5));this.remove_propsUpdated(ss.mkdel(this,this.$k))}))},{get_component:function(){return this.$3$1},set_component:function(nk){this.$3$1=nk},get_startValueInputViewModel:function(){return this.$3$2},set_startValueInputViewModel:function(nk){this.$3$2=nk},get_endValueInputViewModel:function(){return this.$3$3},set_endValueInputViewModel:function(nk){this.$3$3=nk},get_centerValueInputViewModel:function(){return this.$3$4},set_centerValueInputViewModel:function(nk){this.$3$4=nk},cleanUp:function(){this.$o.detachNotifications()},$a:function(){var nk=this.$o.get_colorPalettes();var nl=nk.length;var nm=this.$o.get_selectedColorPalette();var nn=nm.colorPaletteId;for(var no=0;no<nl;no++){var np=nk[no];if(ss.referenceEquals(np.colorPaletteId,nn)){if(ss.referenceEquals(np.colorPaletteName,nm.colorPaletteName)){return no}}}return-1},$9:function(nk){var nl=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'set-quantitative-color'},null);nl.commandParams={};nl.commandParams['encodingFieldVector']=this.$o.get_encodingFields();nl.commandParams['sendNotifications']=true;nk(nl);tab.CommandController.SendCommand(new tab.RemoteClientCommand(nl,'immediately',null,ss.mkdel(this,function(nm){this.get_component().removeFromDOM()})))},$i:function(nk){var nl=this.$o.get_colorPalettes()[nk];if(!ss.isNullOrEmptyString(nl.colorPaletteId)||!nl.isCustomPalette){this.$9(function(nm){nm.commandParams['colorPaletteId']=nl.colorPaletteId})}else{this.$9(ss.mkdel(this,function(nm){if(nl.colorPaletteType==='palette-ordered-diverging'){nm.commandParams['color1']=this.$o.get_minColor();nm.commandParams['color2']=this.$o.get_maxColor()}else if(this.$o.get_reverse()){nm.commandParams['color1']=this.$o.get_minColor()}else{nm.commandParams['color2']=this.$o.get_maxColor()}}))}},$3:function(nk,nl){var nm=tab.ColorModel.fromColorCode(nk);var nn=tab.ColorModel.fromColorCode(nl);return ss.equals(nm,nn)},$h:function(nk){if(!this.$3(nk,this.$o.get_minColor())){this.$9(ss.mkdel(this,function(nl){nl.commandParams['color1']=nk;if(this.$o.get_isDiverging()){nl.commandParams['color2']=this.$o.get_maxColor()}}))}},$g:function(nk){if(!this.$3(nk,this.$o.get_maxColor())){this.$9(ss.mkdel(this,function(nl){nl.commandParams['color2']=nk;if(this.$o.get_isDiverging()){nl.commandParams['color1']=this.$o.get_minColor()}}))}},$f:function(nk){this.$9(function(nl){nl.commandParams['isReversed']=nk})},$j:function(nk,nl){if(nk===true){this.$9(function(nm){nm.commandParams['steps']=nl})}else{this.$9(function(nm){nm.commandParams['steps']=0})}},$n:function(nk){this.$6();this.$p=window.setTimeout(ss.mkdel(this,function(){this.$9(function(nl){nl.commandParams['steps']=nk})}),500)},$6:function(){this.$p=tab.MiscUtil.clearTimeout(this.$p)},$b:function(nk){this.$9(function(nl){nl.commandParams['useFullColorRange']=nk})},$c:function(nk){this.$9(function(nl){nl.commandParams['totalsInclusionValue']=(nk?'include-totals':'exclude-totals')})},$l:function(nk){this.$9(ss.mkdel(this,function(nl){nl.commandParams['useStartValue']=nk;nl.commandParams['startValue']=this.$o.get_startValue()}))},$m:function(nk){this.$9(function(nl){nl.commandParams['useStartValue']=true;nl.commandParams['startValue']=nk})},$7:function(nk){this.$9(ss.mkdel(this,function(nl){nl.commandParams['useEndValue']=nk;nl.commandParams['endValue']=this.$o.get_endValue()}))},$8:function(nk){this.$9(function(nl){nl.commandParams['useEndValue']=true;nl.commandParams['endValue']=nk})},$4:function(nk){this.$9(ss.mkdel(this,function(nl){nl.commandParams['useCenterValue']=nk;nl.commandParams['centerValue']=this.$o.get_centerValue()}))},$5:function(nk){this.$9(function(nl){nl.commandParams['useCenterValue']=true;nl.commandParams['centerValue']=nk})},$e:function(){var nk=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'reset-quantitative-color'},null);nk.commandParams={};nk.commandParams['encodingFieldVector']=this.$o.get_encodingFields();nk.commandParams['sendNotifications']=true;tab.CommandController.SendCommand(new tab.RemoteClientCommand(nk,'immediately',null,null))},$d:function(){this.get_startValueInputViewModel().updateFromModel(this.$o.get_startValue());this.get_startValueInputViewModel().set_enabled(this.$o.get_startChecked());this.get_endValueInputViewModel().updateFromModel(this.$o.get_endValue());this.get_endValueInputViewModel().set_enabled(this.$o.get_endChecked());this.get_centerValueInputViewModel().updateFromModel(this.$o.get_centerValue());this.get_centerValueInputViewModel().set_enabled(this.$o.get_centerChecked()&&this.$o.get_canEnableCenter());this.incrementProps()},createInitialProps:function(){return{setSelectedPaletteIndex:ss.mkdel(this,this.$i),setMinColor:ss.mkdel(this,this.$h),setMaxColor:ss.mkdel(this,this.$g),reverseChanged:ss.mkdel(this,this.$f),stepsEnabledChanged:ss.mkdel(this,this.$j),stepsValueChanged:ss.mkdel(this,this.$n),fullColorRangeChanged:ss.mkdel(this,this.$b),includeTotalsChanged:ss.mkdel(this,this.$c),startCheckedChanged:ss.mkdel(this,this.$l),endCheckedChanged:ss.mkdel(this,this.$7),centerCheckedChanged:ss.mkdel(this,this.$4),resetValues:ss.mkdel(this,this.$e)}},createUpdatedProps:function(){var nk=this.get_startValueInputViewModel().get_props();var nl=this.get_endValueInputViewModel().get_props();var nm=this.get_centerValueInputViewModel().get_props();var nn={title:this.$o.get_title(),selectedPalette:this.$o.get_selectedColorPalette(),selectedColorPaletteIndex:this.$a(),colorPalettes:this.$o.get_colorPalettes(),minColor:this.$o.get_minColor(),maxColor:this.$o.get_maxColor(),colors:this.$o.get_rampColors(),isDiverging:this.$o.get_isDiverging(),minValue:this.$o.get_minValue(),maxValue:this.$o.get_maxValue(),reverse:this.$o.get_reverse(),stepsEnabled:this.$o.get_stepsEnabled(),stepsValue:this.$o.get_stepsValue(),canUseFullColorRange:this.$o.get_canUseFullColorRange(),fullColorRange:this.$o.get_useFullColorRange(),includeTotalsOptionEnabled:this.$o.get_includeTotalsOptionEnabled(),includeTotals:this.$o.get_includeTotals(),startChecked:this.$o.get_startChecked(),startValueInputProps:nk,endChecked:this.$o.get_endChecked(),endValueInputProps:nl,centerChecked:this.$o.get_centerChecked(),centerValueInputProps:nm,canEnableCenter:this.$o.get_canEnableCenter(),canShowAdvancedSettings:this.$o.get_canShowAdvancedSettings()};return nn},$k:function(){if(ss.isNullOrUndefined(this.get_component())){this.set_component(new jp(this.$o.get_componentID(),ss.mkdel(this,this.cleanUp)))}this.get_component().showOrUpdate(this.get_props())}});var js=global.tab.QuantitativeColorOptionTemplate=ss.mkType(a,'tab.QuantitativeColorOptionTemplate',function(){this.transparencyControlContainer=null;this.colorEffectsContainer=null;this.colorEditButtonContainer=null;spiff.Template.call(this,$("<div class='tabAuthQuantitativeColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"));this.colorEditButtonContainer=this.getElementBySelector('.tabColorEditButtonContainer');this.transparencyControlContainer=this.getElementBySelector('.tabAuthTransparencyControlContainer');this.colorEffectsContainer=this.getElementBySelector('.tabColorEffectsContainer')});var jt=global.tab.QuantitativeColorOptionView=ss.mkType(a,'tab.QuantitativeColorOptionView',function(nk){this.$d=0;this.$b=null;this.$c={};ss.makeGenericType(spiff.BaseView$1,[ju]).call(this,nk,new js);this.$b=this.get_template();this.$c[tab.Strings.AuthReverseColorLabel]=4;this.$c[tab.Strings.AuthSteppedColorLabel]=5;this.$c[tab.Strings.AuthIncludeTotalsLabel]=7;this.$d=8},{$7:function(){this.$9();this.$b.domRoot.addClass('tabAuthColorEditingHideContinuousControls')},$9:function(){var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[cQ,cO,Object])).call(null,[this.get_viewModel().get_colorOptionEditButtonViewModel()]);nk.addToDom(this.$b.colorEditButtonContainer);this.disposables.add$1(nk)},$a:function(){var nk=tab.ObjectRegistry.newView$1(dr).call(null,dr,[this.get_viewModel().get_colorTransparencyControlViewModel()]);nk.tabIndex(this.$d);nk.addToDom(this.$b.transparencyControlContainer);this.disposables.add$1(nk)},$8:function(){var nk=tab.ObjectRegistry.newView(cV).call(null,[this.get_viewModel().get_colorOptionEffectsViewModel()]);nk.addToDom(this.$b.colorEffectsContainer);this.disposables.add$1(nk)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7();this.$a();this.$8()}});var ju=global.tab.QuantitativeColorOptionViewModel=ss.mkType(a,'tab.QuantitativeColorOptionViewModel',function(nk){this.$3=null;this.$7=0;this.$6=false;this.$5=false;this.$4=false;this.$8=null;dd.call(this,nk);this.$7=nk.get_colorEncodingDropdown().quantitativeColor.steps;this.$6=this.$7>=2;this.$5=nk.get_colorEncodingDropdown().quantitativeColor.isReversed;this.$4=nk.get_colorEncodingDropdown().quantitativeColor.canEditLegendColor;this.$8=nk.get_colorEncodingDropdown().quantitativeColor.totalsInclusionValue;if(!this.$6){this.$7=5}this.$3=new cQ(this.get_marksCardTabEncodingModel(),1,this.get_isColorEditingEnabled())},{get_viewType:function(){return jt},get_colorOptionEditButtonViewModel:function(){return this.$3},get_isStepped:function(){return this.$6},set_isStepped:function(nk){if(this.$6===nk){return}this.$6=nk},get_stepCount:function(){return this.$7},set_stepCount:function(nk){if(ju.$0(nk)&&this.$7!==nk){this.$7=nk;tab.PaneClientCommands.setSteppedColor(this.get_marksCardTabEncodingModel(),this.$7)}},get_totalsInclusionValue:function(){return this.$8},set_totalsInclusionValue:function(nk){if(this.$8===nk){return}this.$8=nk},get_areTotalsUsed:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.areTotalsUsed},get_isReversed:function(){return this.$5},set_isReversed:function(nk){if(this.$5===nk){return}this.$5=nk},get_isColorEditingEnabled:function(){return this.$4},get_selectedColorPalette:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.colorPaletteId},set_selectedColorPalette:function(nk){tab.PaneClientCommands.setQuantColorPalette(this.get_marksCardTabEncodingModel(),nk)},get_selectedPaletteflags:function(){return this.get_marksCardTabEncodingModel().get_colorEncodingDropdown().quantitativeColor.paletteFlagsVal},get_viewModel:function(){return this},toggleTotalsInEncoding:function(){this.set_totalsInclusionValue(((this.get_totalsInclusionValue()==='include-totals')?'exclude-totals':'include-totals'));tab.PaneClientCommands.setTotalsInEncoding(this.get_marksCardTabEncodingModel(),this.get_totalsInclusionValue())},toggleColorReversal:function(){tab.PaneClientCommands.reverseColor(this.get_marksCardTabEncodingModel(),!this.get_isReversed())},toggleIsStepped:function(){this.set_isStepped(!this.get_isStepped());tab.PaneClientCommands.setSteppedColor(this.get_marksCardTabEncodingModel(),(this.get_isStepped()?this.get_stepCount():0))},disposeViewModel:function(){this.dispose()},dispose:function(){this.$3.dispose();dd.prototype.dispose.call(this)},updateUberPopupViewModel:function(nk){}},{$0:function(nk){return ss.isValue(nk)&&nk>0&&isFinite(nk)}});var jv=global.tab.QuantitativeColorRampComponent=ss.mkType(a,'tab.QuantitativeColorRampComponent',function(nk){this.$0='canvasContainer';this.$1='canvas';this.$3=null;this.$2=50;React.PureComponent.call(this,nk)},{componentDidMount:function(){this.$3=tab.MiscUtil.clearTimeout(this.$3);this.drawIfReady()},componentWillUnmount:function(){this.$3=tab.MiscUtil.clearTimeout(this.$3)},componentDidUpdate:function(){this.draw()},render:function(){return spiff.DOMElements.div({className:'tab-quantitativeColorRamp',ref:this.$0},spiff.DOMElements.canvas({ref:this.$1,height:0,width:0}))},drawIfReady:function(){this.$3=null;var nk=ReactDOM.findDOMNode(this.refs[this.$0]);var nl=nk.clientWidth;var nm=nk.clientHeight;if(nl!==0&&nm!==0){this.draw()}else{this.$3=window.setTimeout(ss.mkdel(this,this.drawIfReady),this.$2)}},draw:function(){var nk=ReactDOM.findDOMNode(this.refs[this.$0]);var nl=ReactDOM.findDOMNode(this.refs[this.$1]);nl.height=0;nl.width=0;nl.style.width='0';nl.style.height='0';var nm=nk.clientWidth;var nn=nk.clientHeight;var no=tab.CanvasRenderer.getRenderContext(nl,'opaque');var np={w:nm,h:nn};tab.CanvasUtil.sizeCanvasWithHighDPISupport(nl,no,np);no.clearRect(0,0,nm,nn);no.save();if(this.props.stepped){this.drawStepped(no,nm,nn)}else{this.drawGradient(no,nm,nn)}no.restore()},drawStepped:function(nk,nl,nm){var nn=ss.arrayFromEnumerable(Object.keys(this.props.colors));var no=nn.length;var np=0;var nq=nl/no;for(var nr=0;nr<no;nr++){var ns=Math.round((nr+1)*nq);var nt=ns-np+1;nk.set_shapeFillStyle(this.props.colors[nn[nr]]);nk.fillRect(np,0,nt,nm);np=ns}},drawGradient:function(nk,nl,nm){var nn=ss.arrayFromEnumerable(Object.keys(this.props.colors));var no=nk.createLinearGradient(0,0,nl,0);for(var np=0;np<nn.length;np++){var nq=nn[np];var nr=tab.DoubleUtil.parseDouble(nq);if(ss.isValue(nr)){no.addColorStop(ss.unbox(nr),this.props.colors[nq])}}nk.set_shapeFillStyle(no);nk.fillRect(0,0,nl,nm)}});var jw=global.tab.Quantity=ss.mkEnum(a,'tab.Quantity',{none:0,some:1,all:2});var jx=global.tab.QuickSortAscendingCommand=ss.mkType(a,'tab.QuickSortAscendingCommand',function(){tab.QuickSortAscendingCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},do$1:function(){tab.SortServerCommands.quickSort('asc')}});var jy=global.tab.QuickSortDescendingCommand=ss.mkType(a,'tab.QuickSortDescendingCommand',function(){tab.QuickSortDescendingCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},do$1:function(){tab.SortServerCommands.quickSort('desc')}});var jz=global.tab.RankTableCalcViewModel=ss.mkType(a,'tab.RankTableCalcViewModel',function(nk){this.$4=null;this.$5=null;this.$6=null;mi.call(this);this.$4=nk;this.$4.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$5=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$5.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$5.dispose()})));this.$6=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$6.add_selectedItemChanged(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_selectedItemChanged(ss.mkdel(this,this.$3));this.$6.dispose()})))},{get_model:function(){return this.$4},get_rankType:function(){return this.$4.get_rankType()},get_rankTypeState:function(){return this.$4.get_rankTypeState()},get_rankComboBoxVM:function(){return this.$5},get_sortDirection:function(){return this.$4.get_sortDirection()},get_sortDirectionComboBoxVM:function(){return this.$6},onModelUpdated:function(){this.$0();this.$1()},$0:function(){var nk=[];for(var nl=0,nm=this.$4.get_rankTypeValues().length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.$4.get_rankTypeCaptions()[nl],this.$4.get_rankTypeValues()[nl],null,null))}this.$5.setItems(nk);if(this.$4.get_rankTypeIndex()>=0&&this.$4.get_rankTypeIndex()<nk.length){this.$5.set_selectedItem(this.$5.get_items()[this.$4.get_rankTypeIndex()])}},$1:function(){var nk=[];for(var nl=0,nm=this.$4.get_sortDirectionValues().length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.$4.get_sortDirectionCaptions()[nl],this.$4.get_sortDirectionValues()[nl],null,null))}this.$6.setItems(nk);this.$6.set_selectedItem(this.$6.get_items()[this.$4.get_sortDirectionIndex()])},$2:function(nk){var nl=nk.get_data();if(nl===this.get_rankType()){return}var nm=new tab.TableCalcSetRankTypeCmd;nm.c['rankType']=nl;nm.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nm.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nm.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))},$3:function(nk){var nl=nk.get_data();if(nl===this.get_sortDirection()){return}var nm=new tab.TableCalcSetRankSortDirectionCmd;nm.c['sortOrder']=nl;nm.c['calcNestingLevel']=this.get_model().get_tableCalcIdentifier().get_nestingLevel();nm.c['nestedCalcFn']=this.get_model().get_tableCalcIdentifier().get_fieldName();nm.invoke().fail(ss.mkdel(this,this.raiseViewModelUpdated))}});var jA=global.tab.ReferenceItemData=ss.mkType(a,'tab.ReferenceItemData',function(nk){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-parameter';this.parameterName=nk},null,{$ctor2:function(nk){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-relative';this.relativeAddress=nk},$ctor1:function(nk){this.set=null;this.relativeAddress=null;this.fixedTupleIndex=0;this.parameterName=null;this.set='reference-options-set-fixed';this.fixedTupleIndex=nk}});var jB=global.tab.ReferenceLineConstantValueEditorView=ss.mkType(a,'tab.ReferenceLineConstantValueEditorView',function(nk){this.$g=null;this.$h=null;ss.makeGenericType(spiff.BaseView$1,[jC]).call(this,nk,new j);this.$a()},{$f:function(){return this.get_viewModel()},$e:function(){return this.get_template()},$7:function(){this.$f().commitConstantValue(this.$e().$1.val());this.$8()},$9:function(){this.$7()},$a:function(){this.$e().$1.attr('tabindex','1');this.$e().$1.attr('value',this.$f().get_constantValue());this.$g=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.DialogButtonOK,'refLineConstantValueEditorButton',0,2);this.$g.addToDom(this.element);this.disposables.add$1(this.$g);this.disposables.add$1(spiff.EventUtil.bindWithDispose(this.element,'keydown',ss.mkdel(this,this.$b)))},$8:function(){this.$f().dispose()},$b:function(nk){switch(nk.which){case 27:{this.$8();break}case 108:case 13:{this.$7();break}}},onAddedToDom:function(){this.$d();tab.CommandController.get().add_undoCommand(ss.mkdel(this,this.dispose));this.$e().$1.focus();tab.DomUtil.selectAllInputText(this.$e().$1);spiff.Widget.prototype.onAddedToDom.call(this)},$d:function(){if(ss.isNullOrUndefined(this.$h)){this.$h=new spiff.Glass(null,false);this.$h.set_zIndex(988);this.$h.add_click(ss.mkdel(this,this.$9))}this.$h.show()},$c:function(){if(ss.isValue(this.$h)){this.$h.remove_click(ss.mkdel(this,this.$9));this.$h.dispose();this.$h=null}},dispose:function(){this.element.remove();this.$c();tab.CommandController.get().remove_undoCommand(ss.mkdel(this,this.dispose));ss.makeGenericType(spiff.BaseView$1,[jC]).prototype.dispose.call(this)}},{show:function(nk){var nl=new jB(nk);nl.addToDom($(document.body));var nm=tab.PointUtil.add(tab.DomUtil.getElementPosition(nl.element),tab.DomUtil.getElementPosition($('.dashboardSpacer')));tab.DomUtil.setElementPosition(nl.element,nm.x,nm.y,null,null)}});var jC=global.tab.ReferenceLineConstantValueEditorViewModel=ss.mkType(a,'tab.ReferenceLineConstantValueEditorViewModel',function(nk){this.$0=null;spiff.BaseViewModel.call(this);this.$0=nk},{get_constantValue:function(){return this.$0.formattedValue},get_refLineId:function(){return this.$0.refLineId},commitConstantValue:function(nk){if(!ss.referenceEquals(nk,this.get_constantValue())){tab.PaneClientCommands.setReferenceLineConstantValue(nk,this.get_refLineId())}}});var jD=global.tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler=ss.mkType(a,'tab.ReferenceLineConstantValueQuickEditCommandRedirectHandler',null,null,{$0:function(nk){var nl=$.Deferred();if(ss.isValue(nk)){var nm=nk['referenceLine'];if(ss.isValue(nm)){jB.show(new jC(nm))}nl.resolve()}return nl.promise()}});var jE=global.tab.ReferenceLineDialogBandTabComponent=ss.mkType(a,'tab.ReferenceLineDialogBandTabComponent',function(){React.Component.call(this)},{render:function(){var nk=spiff.DOMElements.div;var nl=spiff.DOMElements.div;var nm=new ke;nm.viewModel=this.props.scopeViewModel;return nk({className:'tab-referenceBandTab'},nl({className:'tab-scopeWrapper'},React.createElement(kd,nm)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogBandTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-fromValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogFromValueLabel),(this.props.isFromConstantSelected?React.createElement(eM,this.props.fromConstantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.fromValueProps))),spiff.DOMElements.div({className:'tab-fromComputationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.fromFormulaProps))),React.createElement(ka,this.props.fromLabelProps),React.createElement(kj,this.props.fromTooltipProps),spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-toValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogToValueLabel),(this.props.isToConstantSelected?React.createElement(eM,this.props.toConstantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.toValueProps))),spiff.DOMElements.div({className:'tab-toComputationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.toFormulaProps))),React.createElement(ka,this.props.toLabelProps),React.createElement(kj,this.props.toTooltipProps))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))}});var jF=global.tab.ReferenceLineDialogBandTabProps=ss.mkType(a,'tab.ReferenceLineDialogBandTabProps',function(){this.fromValueProps=null;this.fromLabelProps=null;this.fromTooltipProps=null;this.fromFormulaProps=null;this.toValueProps=null;this.toLabelProps=null;this.toTooltipProps=null;this.toFormulaProps=null;this.fromConstantValueProps=null;this.toConstantValueProps=null;this.instantAnalyticsProps=null;this.isFromConstantSelected=false;this.isToConstantSelected=false;this.scopeViewModel=null});var jG=global.tab.ReferenceLineDialogBandTabState=ss.mkType(a,'tab.ReferenceLineDialogBandTabState',function(){});var jH=global.tab.ReferenceLineDialogBandTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogBandTabViewModel',function(nk){var nl=new jI;nl.set_scopeViewModel(new ki);nl.set_fromLabelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_fromTooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_fromCustomLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_fromCustomTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_fromValueViewModel(new fO(nk.get_fromFieldPickerCombo()));nl.set_fromFormulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_toLabelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_toTooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_toCustomLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_toCustomTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_toValueViewModel(new fO(nk.get_toFieldPickerCombo()));nl.set_toFormulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_instantAnalyticsViewModel(new gT(jH.$1));nl.set_fromConstantValueInputViewModel(new eN('FromConstantValue'));nl.set_toConstantValueInputViewModel(new eN('ToConstantValue'));var nm=new eN('FromCustomLabel');nm.set_allowEmpty(true);nm.set_shouldSelectTextOnFocus(false);nl.set_fromCustomLabelInputViewModel(nm);var nn=new eN('FromCustomTooltip');nn.set_allowEmpty(true);nn.set_shouldSelectTextOnFocus(false);nl.set_fromCustomTooltipInputViewModel(nn);var no=new eN('ToCustomLabel');no.set_allowEmpty(true);no.set_shouldSelectTextOnFocus(false);nl.set_toCustomLabelInputViewModel(no);var np=new eN('ToCustomTooltip');np.set_allowEmpty(true);np.set_shouldSelectTextOnFocus(false);nl.set_toCustomTooltipInputViewModel(np);jH.$ctor1.call(this,nk,nl)},{get_bandModel:function(){return this.$3$1},set_bandModel:function(nk){this.$3$1=nk},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(nk){this.$3$2=nk},get_fromLabelViewModel:function(){return this.$3$3},set_fromLabelViewModel:function(nk){this.$3$3=nk},get_fromTooltipViewModel:function(){return this.$3$4},set_fromTooltipViewModel:function(nk){this.$3$4=nk},get_fromCustomLabelTagViewModel:function(){return this.$3$5},set_fromCustomLabelTagViewModel:function(nk){this.$3$5=nk},get_fromCustomTooltipTagViewModel:function(){return this.$3$6},set_fromCustomTooltipTagViewModel:function(nk){this.$3$6=nk},get_fromValueViewModel:function(){return this.$3$7},set_fromValueViewModel:function(nk){this.$3$7=nk},get_fromFormulaViewModel:function(){return this.$3$8},set_fromFormulaViewModel:function(nk){this.$3$8=nk},get_toLabelViewModel:function(){return this.$3$9},set_toLabelViewModel:function(nk){this.$3$9=nk},get_toTooltipViewModel:function(){return this.$3$10},set_toTooltipViewModel:function(nk){this.$3$10=nk},get_toCustomLabelTagViewModel:function(){return this.$3$11},set_toCustomLabelTagViewModel:function(nk){this.$3$11=nk},get_toCustomTooltipTagViewModel:function(){return this.$3$12},set_toCustomTooltipTagViewModel:function(nk){this.$3$12=nk},get_toValueViewModel:function(){return this.$3$13},set_toValueViewModel:function(nk){this.$3$13=nk},get_toFormulaViewModel:function(){return this.$3$14},set_toFormulaViewModel:function(nk){this.$3$14=nk},get_instantAnalyticsViewModel:function(){return this.$3$15},set_instantAnalyticsViewModel:function(nk){this.$3$15=nk},get_fromConstantValueInputViewModel:function(){return this.$3$16},set_fromConstantValueInputViewModel:function(nk){this.$3$16=nk},get_toConstantValueInputViewModel:function(){return this.$3$17},set_toConstantValueInputViewModel:function(nk){this.$3$17=nk},get_fromCustomLabelInputViewModel:function(){return this.$3$18},set_fromCustomLabelInputViewModel:function(nk){this.$3$18=nk},get_fromCustomTooltipInputViewModel:function(){return this.$3$19},set_fromCustomTooltipInputViewModel:function(nk){this.$3$19=nk},get_toCustomLabelInputViewModel:function(){return this.$3$20},set_toCustomLabelInputViewModel:function(nk){this.$3$20=nk},get_toCustomTooltipInputViewModel:function(){return this.$3$21},set_toCustomTooltipInputViewModel:function(nk){this.$3$21=nk},get_isFromCustomLabelSelected:function(){return this.get_bandModel().get_fromLabelType()==='custom'},get_isFromCustomTooltipSelected:function(){return this.get_bandModel().get_fromTooltipType()==='custom'},get_isToCustomLabelSelected:function(){return this.get_bandModel().get_toLabelType()==='custom'},get_isToCustomTooltipSelected:function(){return this.get_bandModel().get_toTooltipType()==='custom'},get_isFromConstantSelected:function(){return this.get_bandModel().get_fromFormulaType()==='constant'},get_isToConstantSelected:function(){return this.get_bandModel().get_toFormulaType()==='constant'},get_isFromParameterSelected:function(){return this.get_bandModel().get_isParameterSelectedOnFrom()},get_isToParameterSelected:function(){return this.get_bandModel().get_isParameterSelectedOnTo()},get_isInstantAnalyticsAllowed:function(){return this.get_bandModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_bandModel().get_visualId()},get_referenceLineId:function(){return this.get_bandModel().get_refLineId()},$r:function(){var nk=null;this.get_fromFormulaViewModel().clearItems();var nl=[];var nm=this.get_bandModel().get_validFormulaTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.displayText,no.referenceLineFormulaType,null,null);if(ss.equals(no.referenceLineFormulaType,this.get_bandModel().get_fromFormulaType())){nk=np}nl.push(np)}this.get_fromFormulaViewModel().setItemsWithInitialSelection(nl,nk);this.get_fromFormulaViewModel().set_enabled(!this.get_isFromParameterSelected())},$w:function(){var nk=null;this.get_toFormulaViewModel().clearItems();var nl=[];var nm=this.get_bandModel().get_validPairedFormulaTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.displayText,no.referenceLineFormulaType,null,null);if(ss.equals(no.referenceLineFormulaType,this.get_bandModel().get_toFormulaType())){nk=np}nl.push(np)}this.get_toFormulaViewModel().setItemsWithInitialSelection(nl,nk);this.get_toFormulaViewModel().set_enabled(!this.get_isToParameterSelected())},$u:function(){this.get_fromValueViewModel().updateDomFromModel()},$z:function(){this.get_toValueViewModel().updateDomFromModel()},$s:function(){var nk=null;var nl=[];var nm=this.get_bandModel().get_validLabelTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_bandModel().get_fromLabelType())){nk=np}}this.get_fromLabelViewModel().setItemsWithInitialSelection(nl,nk)},$t:function(){var nk=null;var nl=[];var nm=this.get_bandModel().get_validTooltipTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_bandModel().get_fromTooltipType())){nk=np}}this.get_fromTooltipViewModel().setItemsWithInitialSelection(nl,nk)},$x:function(){var nk=null;var nl=[];var nm=this.get_bandModel().get_validLabelTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_bandModel().get_toLabelType())){nk=np}}this.get_toLabelViewModel().setItemsWithInitialSelection(nl,nk)},$y:function(){var nk=null;var nl=[];var nm=this.get_bandModel().get_validTooltipTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_bandModel().get_toTooltipType())){nk=np}}this.get_toTooltipViewModel().setItemsWithInitialSelection(nl,nk)},$o:function(){var nk=_.map(this.get_bandModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_fromCustomLabelTagViewModel().setItemsWithInitialSelection(nk,null);this.get_toCustomLabelTagViewModel().setItemsWithInitialSelection(nk,null)},$q:function(){var nk=_.map(this.get_bandModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_fromCustomTooltipTagViewModel().setItemsWithInitialSelection(nk,null);this.get_toCustomTooltipTagViewModel().setItemsWithInitialSelection(nk,null)},$g:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_bandModel().get_scopeType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.c['referenceLineScopeType']=this.get_scopeViewModel().get_selectedScope();nk.c['visualIdPresModel']=this.get_visualId();nk.c['referenceLineId']=this.get_bandModel().get_refLineId();nk.invoke()}},$b:function(nk){if(ss.isValue(nk)){var nl=nk.get_data();if(nl!==this.get_bandModel().get_fromFormulaType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineFormulaType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_bandModel().get_refLineId();nm.invoke()}}},$j:function(nk){if(ss.isValue(nk)){var nl=nk.get_data();if(nl!==this.get_bandModel().get_toFormulaType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineFormulaType']=nl;nm.c['referenceLineId']=this.get_bandModel().get_pairedId();nm.c['visualIdPresModel']=this.get_visualId();nm.invoke()}}},$c:function(nk){this.$v(nk,this.get_bandModel().get_fromLabelType(),this.get_bandModel().get_refLineId())},$k:function(nk){this.$v(nk,this.get_bandModel().get_toLabelType(),this.get_bandModel().get_pairedId())},$v:function(nk,nl,nm){if(ss.isNullOrUndefined(nk)){return}var nn=nk.get_data();if(nn!==nl){var no=new tab.UpdateReferenceLineCmd;no.set_uiBlocking('immediately');no.c['referenceLineLabelType']=nn;no.c['referenceLineId']=nm;no.c['visualIdPresModel']=this.get_visualId();no.invoke()}},$d:function(nk){this.$A(nk,this.get_bandModel().get_fromTooltipType(),this.get_bandModel().get_refLineId())},$l:function(nk){this.$A(nk,this.get_bandModel().get_toTooltipType(),this.get_bandModel().get_pairedId())},$A:function(nk,nl,nm){if(ss.isNullOrUndefined(nk)){return}var nn=nk.get_data();if(nn!==nl){var no=new tab.UpdateReferenceLineCmd;no.set_uiBlocking('immediately');no.c['referenceLineTooltipType']=nn;no.c['visualIdPresModel']=this.get_visualId();no.c['referenceLineId']=nm;no.invoke()}},$9:function(nk){this.get_fromCustomLabelInputViewModel().insertText(nk.get_data())},$a:function(nk){this.get_fromCustomTooltipInputViewModel().insertText(nk.get_data())},$h:function(nk){this.get_toCustomLabelInputViewModel().insertText(nk.get_data())},$i:function(nk){this.get_toCustomTooltipInputViewModel().insertText(nk.get_data())},$e:function(nk){if(ss.isValue(nk)){var nl=nk.get_data();if(!ss.referenceEquals(nl,this.get_bandModel().get_fromFieldPickerCombo().get_selectedField())){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['fn']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_bandModel().get_refLineId();nm.invoke()}}},$m:function(nk){if(ss.isValue(nk)){var nl=nk.get_data();if(!ss.referenceEquals(nl,this.get_bandModel().get_toFieldPickerCombo().get_selectedField())){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['fn']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_bandModel().get_pairedId();nm.invoke()}}},$f:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['enableInstantAnalytics']=nk;nl.c['visualIdPresModel']=this.get_bandModel().get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$3:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['constantValue']=nk;nl.c['referenceLineId']=this.get_bandModel().get_refLineId();nl.c['visualIdPresModel']=this.get_visualId();nl.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$6:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['constantValue']=nk;nl.c['referenceLineId']=this.get_bandModel().get_pairedId();nl.c['visualIdPresModel']=this.get_visualId();nl.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$4:function(nk){this.$n(nk,this.get_bandModel().get_fromCustomLabel(),this.get_bandModel().get_refLineId())},$7:function(nk){this.$n(nk,this.get_bandModel().get_toCustomLabel(),this.get_bandModel().get_pairedId())},$n:function(nk,nl,nm){if(ss.equalsT(nk,nl)){return}var nn=new tab.UpdateReferenceLineCmd;nn.set_uiBlocking('afterDelay');nn.c['label']=nk;nn.c['referenceLineId']=nm;nn.c['visualIdPresModel']=this.get_visualId();nn.invoke()},$5:function(nk){this.$p(nk,this.get_bandModel().get_fromCustomTooltip(),this.get_bandModel().get_refLineId())},$8:function(nk){this.$p(nk,this.get_bandModel().get_toCustomTooltip(),this.get_bandModel().get_pairedId())},$p:function(nk,nl,nm){if(ss.equalsT(nk,nl)){return}var nn=new tab.UpdateReferenceLineCmd;nn.set_uiBlocking('afterDelay');nn.c['tooltipText']=nk;nn.c['referenceLineId']=nm;nn.c['visualIdPresModel']=this.get_visualId();nn.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_bandModel().get_refBandPresModel())){this.get_scopeViewModel().updateFromModel(this.get_bandModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_bandModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.$r();this.$w();this.$u();this.$z();this.$s();this.$t();this.$x();this.$y();this.$o();this.$q();this.get_fromConstantValueInputViewModel().updateFromModel(this.get_bandModel().get_fromFormattedConstantValue());this.get_toConstantValueInputViewModel().updateFromModel(this.get_bandModel().get_toFormattedConstantValue());this.get_fromCustomLabelInputViewModel().updateFromModel(this.get_bandModel().get_fromCustomLabel());this.get_toCustomLabelInputViewModel().updateFromModel(this.get_bandModel().get_toCustomLabel());this.get_fromCustomTooltipInputViewModel().updateFromModel(this.get_bandModel().get_fromCustomTooltip());this.get_toCustomTooltipInputViewModel().updateFromModel(this.get_bandModel().get_toCustomTooltip())}},createUpdatedProps:function(){var nk=new jF;nk.scopeViewModel=this.get_scopeViewModel();nk.fromFormulaProps=this.get_fromFormulaViewModel().get_props();nk.fromValueProps=this.get_fromValueViewModel().get_props();var nl=new kb;nl.labelDropdownProps=this.get_fromLabelViewModel().get_props();nl.isCustomLabelSelected=this.get_isFromCustomLabelSelected();nl.customLabelInputProps=this.get_fromCustomLabelInputViewModel().get_props();nl.customLabelTagProps=this.get_fromCustomLabelTagViewModel().get_props();nl.cssClass='tab-fromLabelComponent';nk.fromLabelProps=nl;var nm=new kk;nm.tooltipDropdownProps=this.get_fromTooltipViewModel().get_props();nm.isCustomTooltipSelected=this.get_isFromCustomTooltipSelected();nm.customTooltipInputProps=this.get_fromCustomTooltipInputViewModel().get_props();nm.customTooltipTagProps=this.get_fromCustomTooltipTagViewModel().get_props();nm.cssClass='tab-fromLabelComponent';nk.fromTooltipProps=nm;nk.toFormulaProps=this.get_toFormulaViewModel().get_props();nk.toValueProps=this.get_toValueViewModel().get_props();var nn=new kb;nn.labelDropdownProps=this.get_toLabelViewModel().get_props();nn.isCustomLabelSelected=this.get_isToCustomLabelSelected();nn.customLabelInputProps=this.get_toCustomLabelInputViewModel().get_props();nn.customLabelTagProps=this.get_toCustomLabelTagViewModel().get_props();nn.cssClass='tab-toLabelComponent';nk.toLabelProps=nn;var no=new kk;no.tooltipDropdownProps=this.get_toTooltipViewModel().get_props();no.isCustomTooltipSelected=this.get_isToCustomTooltipSelected();no.customTooltipInputProps=this.get_toCustomTooltipInputViewModel().get_props();no.customTooltipTagProps=this.get_toCustomTooltipTagViewModel().get_props();no.cssClass='tab-toLabelComponent';nk.toTooltipProps=no;nk.isFromConstantSelected=this.get_isFromConstantSelected();nk.fromConstantValueProps=this.get_fromConstantValueInputViewModel().get_props();nk.toConstantValueProps=this.get_toConstantValueInputViewModel().get_props();nk.isToConstantSelected=this.get_isToConstantSelected();nk.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return nk}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;this.$3$11=null;this.$3$12=null;this.$3$13=null;this.$3$14=null;this.$3$15=null;this.$3$16=null;this.$3$17=null;this.$3$18=null;this.$3$19=null;this.$3$20=null;this.$3$21=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jF]).call(this);this.set_bandModel(nk);this.set_scopeViewModel(nl.get_scopeViewModel());this.disposables.add$1(this.get_scopeViewModel());this.set_fromLabelViewModel(nl.get_fromLabelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromLabelViewModel()));this.set_fromTooltipViewModel(nl.get_fromTooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromTooltipViewModel()));this.set_fromCustomLabelTagViewModel(nl.get_fromCustomLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomLabelTagViewModel()));this.set_fromCustomTooltipTagViewModel(nl.get_fromCustomTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomTooltipTagViewModel()));this.set_fromValueViewModel(nl.get_fromValueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromValueViewModel()));this.set_fromFormulaViewModel(nl.get_fromFormulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromFormulaViewModel()));this.set_toLabelViewModel(nl.get_toLabelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toLabelViewModel()));this.set_toTooltipViewModel(nl.get_toTooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toTooltipViewModel()));this.set_toCustomLabelTagViewModel(nl.get_toCustomLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomLabelTagViewModel()));this.set_toCustomTooltipTagViewModel(nl.get_toCustomTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomTooltipTagViewModel()));this.set_toValueViewModel(nl.get_toValueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toValueViewModel()));this.set_toFormulaViewModel(nl.get_toFormulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toFormulaViewModel()));this.set_instantAnalyticsViewModel(nl.get_instantAnalyticsViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_fromConstantValueInputViewModel(nl.get_fromConstantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromConstantValueInputViewModel()));this.set_toConstantValueInputViewModel(nl.get_toConstantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toConstantValueInputViewModel()));this.set_fromCustomLabelInputViewModel(nl.get_fromCustomLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomLabelInputViewModel()));this.set_fromCustomTooltipInputViewModel(nl.get_fromCustomTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_fromCustomTooltipInputViewModel()));this.set_toCustomLabelInputViewModel(nl.get_toCustomLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomLabelInputViewModel()));this.set_toCustomTooltipInputViewModel(nl.get_toCustomTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_toCustomTooltipInputViewModel()));this.get_bandModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$g));this.get_fromFormulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$b));this.get_toFormulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$j));this.get_fromLabelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$c));this.get_fromTooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$d));this.get_toLabelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$k));this.get_toTooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$l));this.get_fromValueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$e));this.get_toValueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$m));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$f));this.get_fromCustomLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$9));this.get_fromCustomTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_toCustomLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$h));this.get_toCustomTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$i));this.get_fromConstantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_toConstantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$6));this.get_fromCustomLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_fromCustomTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.get_toCustomLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$7));this.get_toCustomTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$8));this.get_fromLabelViewModel().set_hasTooltip(false);this.get_fromTooltipViewModel().set_hasTooltip(false);this.get_fromCustomLabelTagViewModel().set_hasTooltip(false);this.get_fromCustomTooltipTagViewModel().set_hasTooltip(false);this.get_fromValueViewModel().set_hasTooltip(false);this.get_fromFormulaViewModel().set_hasTooltip(false);this.get_toLabelViewModel().set_hasTooltip(false);this.get_toTooltipViewModel().set_hasTooltip(false);this.get_toCustomLabelTagViewModel().set_hasTooltip(false);this.get_toCustomTooltipTagViewModel().set_hasTooltip(false);this.get_toValueViewModel().set_hasTooltip(false);this.get_toFormulaViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_fromLabelViewModel(),this.get_fromTooltipViewModel(),this.get_toLabelViewModel(),this.get_toTooltipViewModel(),this.get_fromCustomLabelTagViewModel(),this.get_fromCustomTooltipTagViewModel(),this.get_toCustomLabelTagViewModel(),this.get_toCustomTooltipTagViewModel(),this.get_fromValueViewModel(),this.get_toValueViewModel(),this.get_fromFormulaViewModel(),this.get_toFormulaViewModel(),this.get_fromConstantValueInputViewModel(),this.get_toConstantValueInputViewModel(),this.get_fromCustomLabelInputViewModel(),this.get_fromCustomTooltipInputViewModel(),this.get_toCustomLabelInputViewModel(),this.get_toCustomTooltipInputViewModel(),this.get_instantAnalyticsViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_bandModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_fromFormulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$b));this.get_toFormulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$j));this.get_fromLabelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$c));this.get_fromTooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$d));this.get_toLabelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$k));this.get_toTooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$l));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$g));this.get_fromValueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$e));this.get_toValueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$m));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$f));this.get_fromCustomLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$9));this.get_fromCustomTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_toCustomLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$h));this.get_toCustomTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$i));this.get_fromConstantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_toConstantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$6));this.get_fromCustomLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_fromCustomTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5));this.get_toCustomLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$7));this.get_toCustomTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$8))}))])}});var jI=global.tab.ReferenceLineDialogBandTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogBandTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.$1$10=null;this.$1$11=null;this.$1$12=null;this.$1$13=null;this.$1$14=null;this.$1$15=null;this.$1$16=null;this.$1$17=null;this.$1$18=null;this.$1$19=null;this.$1$20=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(nk){this.$1$1=nk},get_fromLabelViewModel:function(){return this.$1$2},set_fromLabelViewModel:function(nk){this.$1$2=nk},get_fromTooltipViewModel:function(){return this.$1$3},set_fromTooltipViewModel:function(nk){this.$1$3=nk},get_fromCustomLabelTagViewModel:function(){return this.$1$4},set_fromCustomLabelTagViewModel:function(nk){this.$1$4=nk},get_fromCustomTooltipTagViewModel:function(){return this.$1$5},set_fromCustomTooltipTagViewModel:function(nk){this.$1$5=nk},get_fromValueViewModel:function(){return this.$1$6},set_fromValueViewModel:function(nk){this.$1$6=nk},get_fromFormulaViewModel:function(){return this.$1$7},set_fromFormulaViewModel:function(nk){this.$1$7=nk},get_toLabelViewModel:function(){return this.$1$8},set_toLabelViewModel:function(nk){this.$1$8=nk},get_toTooltipViewModel:function(){return this.$1$9},set_toTooltipViewModel:function(nk){this.$1$9=nk},get_toCustomLabelTagViewModel:function(){return this.$1$10},set_toCustomLabelTagViewModel:function(nk){this.$1$10=nk},get_toCustomTooltipTagViewModel:function(){return this.$1$11},set_toCustomTooltipTagViewModel:function(nk){this.$1$11=nk},get_toValueViewModel:function(){return this.$1$12},set_toValueViewModel:function(nk){this.$1$12=nk},get_toFormulaViewModel:function(){return this.$1$13},set_toFormulaViewModel:function(nk){this.$1$13=nk},get_instantAnalyticsViewModel:function(){return this.$1$14},set_instantAnalyticsViewModel:function(nk){this.$1$14=nk},get_fromConstantValueInputViewModel:function(){return this.$1$15},set_fromConstantValueInputViewModel:function(nk){this.$1$15=nk},get_toConstantValueInputViewModel:function(){return this.$1$16},set_toConstantValueInputViewModel:function(nk){this.$1$16=nk},get_fromCustomLabelInputViewModel:function(){return this.$1$17},set_fromCustomLabelInputViewModel:function(nk){this.$1$17=nk},get_fromCustomTooltipInputViewModel:function(){return this.$1$18},set_fromCustomTooltipInputViewModel:function(nk){this.$1$18=nk},get_toCustomLabelInputViewModel:function(){return this.$1$19},set_toCustomLabelInputViewModel:function(nk){this.$1$19=nk},get_toCustomTooltipInputViewModel:function(){return this.$1$20},set_toCustomTooltipInputViewModel:function(nk){this.$1$20=nk}});var jJ=global.tab.ReferenceLineDialogDistributionPopupComponent=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){var nk=React.createElement(spiff.DropdownComponent,this.$0(),spiff.DOMElements.div({className:'tabDistributionPopup'},spiff.DOMElements.div({className:'tabDistributionTypeButtons'},React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,this.props.radioProps)),spiff.DOMElements.div({className:'tabDistributionActivePane'},this.$1())));return nk},$1:function(){switch(this.props.distributionType){case'percentages':{return React.createElement(eZ,this.props.activePaneProps)}case'percentiles':{return React.createElement(fc,this.props.activePaneProps)}case'quantiles':{return React.createElement(ff,this.props.activePaneProps)}case'standard-deviation':{return React.createElement(fi,this.props.activePaneProps)}default:{return spiff.DOMElements.div({})}}},$0:function(){return{getDesiredHeight:jJ.$0,getMinimumWidth:jJ.$1,tabIndex:-1,renderButton:ss.mkdel(this,function(){return React.createElement(spiff.TextDropdownButtonComponent,this.props.dropdownButtonProps)})}}},{$1:function(nk){return 360},$0:function(nk){return 137}});var jK=global.tab.ReferenceLineDialogDistributionPopupComponentConstants=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupComponentConstants');var jL=global.tab.ReferenceLineDialogDistributionPopupViewModel=ss.mkType(a,'tab.ReferenceLineDialogDistributionPopupViewModel',function(nk){jL.$ctor1.call(this,nk,new fb(nk.get_distributionPercentagesModel()),new fe(nk.get_distributionPercentilesModel()),new fh(nk.get_distributionQuantilesModel()),new fk(nk.get_distributionStandardDeviationModel()))},{get_distributionModel:function(){return this.$3$1},set_distributionModel:function(nk){this.$3$1=nk},get_distributionPercentagesViewModel:function(){return this.$3$2},set_distributionPercentagesViewModel:function(nk){this.$3$2=nk},get_distributionPercentilesViewModel:function(){return this.$3$3},set_distributionPercentilesViewModel:function(nk){this.$3$3=nk},get_distributionQuantilesViewModel:function(){return this.$3$4},set_distributionQuantilesViewModel:function(nk){this.$3$4=nk},get_distributionStandardDeviationViewModel:function(){return this.$3$5},set_distributionStandardDeviationViewModel:function(nk){this.$3$5=nk},get_visualId:function(){return this.get_distributionModel().get_visualId()},get_isPercentilesAllowed:function(){return this.get_distributionModel().get_isPercentilesAllowed()},get_isQuantilesAllowed:function(){return this.get_distributionModel().get_isQuantilesAllowed()},get_isStandardDeviationAllowed:function(){return this.get_distributionModel().get_isStandardDeviationAllowed()},createUpdatedProps:function(){return{dropdownButtonProps:{styleClass:'tab-unification-line-arrow-dropdown',selectionText:this.get_distributionModel().get_selectedText()},radioProps:{checkedIndex:this.getIndexFromDistributionType(this.get_distributionModel().get_distributionType()),buttonList:this.$3(),handleChange:ss.mkdel(this,function(nk,nl){this.$5(nk)})},distributionType:this.get_distributionModel().get_distributionType(),activePaneProps:this.$4(this.get_distributionModel().get_distributionType())}},$4:function(nk){switch(nk){case'percentages':{return this.get_distributionPercentagesViewModel().get_props()}case'percentiles':{return this.get_distributionPercentilesViewModel().get_props()}case'quantiles':{return this.get_distributionQuantilesViewModel().get_props()}case'standard-deviation':{return this.get_distributionStandardDeviationViewModel().get_props()}default:{return null}}},getIndexFromDistributionType:function(nk){return ss.indexOf(jL.distributionTypes,nk)},$3:function(){var nk=[];for(var nl=0;nl<jL.distributionTypes.length;nl++){var nm=jL.distributionTypes[nl];nk.push({value:nm,label:jL.distributionTypeStrings[nm].item1,testId:jL.distributionTypeStrings[nm].item2,disabled:this.$6(nm)})}return nk},$6:function(nk){return nk==='percentiles'&&!this.get_isPercentilesAllowed()||nk==='quantiles'&&!this.get_isQuantilesAllowed()||nk==='standard-deviation'&&!this.get_isStandardDeviationAllowed()},$5:function(nk){if(nk!==this.get_distributionModel().get_distributionType()){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['distributionType']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_distributionModel().get_refLineId();nl.invoke()}}},{$ctor1:function(nk,nl,nm,nn,no){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_distributionModel(nk);this.addChildViewModel(nl);this.set_distributionPercentagesViewModel(nl);this.addChildViewModel(nm);this.set_distributionPercentilesViewModel(nm);this.addChildViewModel(nn);this.set_distributionQuantilesViewModel(nn);this.addChildViewModel(no);this.set_distributionStandardDeviationViewModel(no);this.get_distributionModel().add_modelUpdated(ss.mkdel(this,this.incrementProps));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionModel().remove_modelUpdated(ss.mkdel(this,this.incrementProps))})))}});var jM=global.tab.ReferenceLineDialogDistributionState=ss.mkType(a,'tab.ReferenceLineDialogDistributionState',function(){});var jN=global.tab.ReferenceLineDialogDistributionTabComponent=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:'tab-distributionTab'},(this.props.enabled?ss.mkdel(this,function(){var nk=spiff.DOMElements.div;var nl=spiff.DOMElements.div;var nm=new ke;nm.viewModel=this.props.scopeViewModel;return nk({},nl({className:'tab-scopeWrapper'},React.createElement(kd,nm)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogDistributionTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-distrValueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogValueLabel),React.createElement(jJ,this.props.popupProps))),React.createElement(ka,this.props.labelProps),React.createElement(kj,this.props.tooltipProps))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))})():null))}});var jO=global.tab.ReferenceLineDialogDistributionTabProps=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabProps',function(){this.enabled=false;this.popupProps=null;this.labelProps=null;this.tooltipProps=null;this.instantAnalyticsProps=null;this.scopeViewModel=null});var jP=global.tab.ReferenceLineDialogDistributionTabState=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabState',function(){});var jQ=global.tab.ReferenceLineDialogDistributionTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabViewModel',function(nk){var nl=new jR;nl.set_scopeViewModel(new ki);nl.set_labelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_tooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_customLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_customTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_popupViewModel(new jL(nk));nl.set_instantAnalyticsViewModel(new gT(jQ.$3));var nm=new eN('CustomLabel');nm.set_allowEmpty(true);nm.set_shouldSelectTextOnFocus(false);nl.set_customLabelInputViewModel(nm);var nn=new eN('CustomTooltip');nn.set_allowEmpty(true);nn.set_shouldSelectTextOnFocus(false);nl.set_customTooltipInputViewModel(nn);jQ.$ctor1.call(this,nk,nl)},{get_distributionModel:function(){return this.$3$1},set_distributionModel:function(nk){this.$3$1=nk},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(nk){this.$3$2=nk},get_labelViewModel:function(){return this.$3$3},set_labelViewModel:function(nk){this.$3$3=nk},get_tooltipViewModel:function(){return this.$3$4},set_tooltipViewModel:function(nk){this.$3$4=nk},get_customLabelTagViewModel:function(){return this.$3$5},set_customLabelTagViewModel:function(nk){this.$3$5=nk},get_customTooltipTagViewModel:function(){return this.$3$6},set_customTooltipTagViewModel:function(nk){this.$3$6=nk},get_popupViewModel:function(){return this.$3$7},set_popupViewModel:function(nk){this.$3$7=nk},get_instantAnalyticsViewModel:function(){return this.$3$8},set_instantAnalyticsViewModel:function(nk){this.$3$8=nk},get_customLabelInputViewModel:function(){return this.$3$9},set_customLabelInputViewModel:function(nk){this.$3$9=nk},get_customTooltipInputViewModel:function(){return this.$3$10},set_customTooltipInputViewModel:function(nk){this.$3$10=nk},get_isCustomLabelSelected:function(){return this.get_distributionModel().get_labelType()==='custom'},get_isCustomTooltipSelected:function(){return this.get_distributionModel().get_tooltipType()==='custom'},get_isValid:function(){return this.get_distributionModel().get_isValid()},get_isInstantAnalyticsAllowed:function(){return this.get_distributionModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_distributionModel().get_visualId()},get_referenceLineId:function(){return this.get_distributionModel().get_refLineId()},$d:function(){var nk=null;var nl=[];var nm=this.get_distributionModel().get_validLabelTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_distributionModel().get_labelType())){nk=np}}this.get_labelViewModel().setItemsWithInitialSelection(nl,nk)},$e:function(){var nk=null;var nl=[];var nm=this.get_distributionModel().get_validTooltipTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_distributionModel().get_tooltipType())){nk=np}}this.get_tooltipViewModel().setItemsWithInitialSelection(nl,nk)},$8:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_distributionModel().get_labelType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineLabelType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$a:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_distributionModel().get_tooltipType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineTooltipType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$b:function(){var nk=_.map(this.get_distributionModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_customLabelTagViewModel().setItemsWithInitialSelection(nk,null)},$c:function(){var nk=_.map(this.get_distributionModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_customTooltipTagViewModel().setItemsWithInitialSelection(nk,null)},$3:function(nk){if(ss.equalsT(nk,this.get_distributionModel().get_customLabel())){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['label']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$4:function(nk){if(ss.equalsT(nk,this.get_distributionModel().get_customTooltip())){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['tooltipText']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$5:function(nk){this.get_customLabelInputViewModel().insertText(nk.get_data())},$6:function(nk){this.get_customTooltipInputViewModel().insertText(nk.get_data())},$9:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_distributionModel().get_scopeType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.c['referenceLineScopeType']=this.get_scopeViewModel().get_selectedScope();nk.c['visualIdPresModel']=this.get_distributionModel().get_visualId();nk.c['referenceLineId']=this.get_distributionModel().get_refLineId();nk.invoke()}},$7:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['enableInstantAnalytics']=nk;nl.c['visualIdPresModel']=this.get_distributionModel().get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_distributionModel().get_distributionPresModel())){this.get_scopeViewModel().updateFromModel(this.get_distributionModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_distributionModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.get_customLabelInputViewModel().updateFromModel(this.get_distributionModel().get_customLabel());this.get_customTooltipInputViewModel().updateFromModel(this.get_distributionModel().get_customTooltip());this.$d();this.$e();this.$b();this.$c()}},createUpdatedProps:function(){var nk=new jO;nk.enabled=this.get_distributionModel().get_isValid();nk.scopeViewModel=this.get_scopeViewModel();nk.popupProps=this.get_popupViewModel().get_props();var nl=new kb;nl.cssClass='tab-distrLabelComponentWrapper';nl.labelDropdownProps=this.get_labelViewModel().get_props();nl.isCustomLabelSelected=this.get_isCustomLabelSelected();nl.customLabelInputProps=this.get_customLabelInputViewModel().get_props();nl.customLabelTagProps=this.get_customLabelTagViewModel().get_props();nk.labelProps=nl;var nm=new kk;nm.cssClass='tab-distrTooltipComponentWrapper';nm.tooltipDropdownProps=this.get_tooltipViewModel().get_props();nm.isCustomTooltipSelected=this.get_isCustomTooltipSelected();nm.customTooltipInputProps=this.get_customTooltipInputViewModel().get_props();nm.customTooltipTagProps=this.get_customTooltipTagViewModel().get_props();nk.tooltipProps=nm;nk.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return nk}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jO]).call(this);this.set_distributionModel(nk);this.set_scopeViewModel(nl.get_scopeViewModel());this.set_labelViewModel(nl.get_labelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_labelViewModel()));this.set_tooltipViewModel(nl.get_tooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_tooltipViewModel()));this.set_customLabelTagViewModel(nl.get_customLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelTagViewModel()));this.set_customTooltipTagViewModel(nl.get_customTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipTagViewModel()));this.set_popupViewModel(nl.get_popupViewModel());this.disposables.add$1(this.addChildViewModel(this.get_popupViewModel()));this.set_instantAnalyticsViewModel(nl.get_instantAnalyticsViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_customLabelInputViewModel(nl.get_customLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelInputViewModel()));this.set_customTooltipInputViewModel(nl.get_customTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipInputViewModel()));this.get_distributionModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$9));this.get_labelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$8));this.get_tooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$5));this.get_customTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$6));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$7));this.get_customLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_customTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_labelViewModel().set_hasTooltip(false);this.get_tooltipViewModel().set_hasTooltip(false);this.get_customLabelTagViewModel().set_hasTooltip(false);this.get_customTooltipTagViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_labelViewModel(),this.get_tooltipViewModel(),this.get_customLabelTagViewModel(),this.get_customTooltipTagViewModel(),this.get_popupViewModel(),this.get_instantAnalyticsViewModel(),this.get_customLabelInputViewModel(),this.get_customTooltipInputViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_distributionModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$9));this.get_labelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$8));this.get_tooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$5));this.get_customTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$6));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$7));this.get_customLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_customTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4))}))])}});var jR=global.tab.ReferenceLineDialogDistributionTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogDistributionTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(nk){this.$1$1=nk},get_labelViewModel:function(){return this.$1$2},set_labelViewModel:function(nk){this.$1$2=nk},get_tooltipViewModel:function(){return this.$1$3},set_tooltipViewModel:function(nk){this.$1$3=nk},get_customLabelTagViewModel:function(){return this.$1$4},set_customLabelTagViewModel:function(nk){this.$1$4=nk},get_customTooltipTagViewModel:function(){return this.$1$5},set_customTooltipTagViewModel:function(nk){this.$1$5=nk},get_popupViewModel:function(){return this.$1$6},set_popupViewModel:function(nk){this.$1$6=nk},get_instantAnalyticsViewModel:function(){return this.$1$7},set_instantAnalyticsViewModel:function(nk){this.$1$7=nk},get_customLabelInputViewModel:function(){return this.$1$8},set_customLabelInputViewModel:function(nk){this.$1$8=nk},get_customTooltipInputViewModel:function(){return this.$1$9},set_customTooltipInputViewModel:function(nk){this.$1$9=nk}});var jS=global.tab.ReferenceLineDialogLineTabComponent=ss.mkType(a,'tab.ReferenceLineDialogLineTabComponent',function(){React.Component.call(this)},{render:function(){var nk=spiff.DOMElements.div;var nl=spiff.DOMElements.div;var nm=new ke;nm.viewModel=this.props.scopeViewModel;return nk({className:'tab-referenceLineTab'},nl({className:'tab-scopeWrapper'},React.createElement(kd,nm)),spiff.DOMElements.div({className:'tab-editReferenceLineLineSection'},spiff.DOMElements.span({className:'tab-sectionTitle'},tab.Strings.AODialogLineTabTitle),spiff.DOMElements.div({className:'tab-editReferenceLineLineSectionInner'},spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-valueComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogValueLabel),(this.props.isConstantSelected?React.createElement(eM,this.props.constantValueProps):React.createElement(spiff.ComboBoxComponent,this.props.valueProps))),spiff.DOMElements.div({className:'tab-computationComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogComputationLabel),React.createElement(spiff.ComboBoxComponent,this.props.formulaProps))),React.createElement(ka,this.props.labelProps),React.createElement(kj,this.props.tooltipProps),spiff.DOMElements.div({className:'tab-dialogRow'},spiff.DOMElements.div({className:'tab-confidenceIntervalStateComponentWrapper tab-componentWrapper'},React.createElement(spiff.ComboBoxComponent,this.props.confidenceIntervalStateProps)),spiff.DOMElements.div({className:'tab-percentileComponentWrapper tab-componentWrapper'},React.createElement(fx,this.props.confidenceLevelProps))))),spiff.DOMElements.div({className:'tab-instantAnalytics'},React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.instantAnalyticsProps)))}});var jT=global.tab.ReferenceLineDialogLineTabProps=ss.mkType(a,'tab.ReferenceLineDialogLineTabProps',function(){this.valueProps=null;this.formulaProps=null;this.labelProps=null;this.tooltipProps=null;this.confidenceIntervalStateProps=null;this.confidenceLevelProps=null;this.constantValueProps=null;this.instantAnalyticsProps=null;this.isConstantSelected=false;this.isConfidenceIntervalAllowed=false;this.scopeViewModel=null});var jU=global.tab.ReferenceLineDialogLineTabState=ss.mkType(a,'tab.ReferenceLineDialogLineTabState',function(){});var jV=global.tab.ReferenceLineDialogLineTabViewModel=ss.mkType(a,'tab.ReferenceLineDialogLineTabViewModel',function(nk){var nl=new jW;nl.set_scopeViewModel(new ki);nl.set_labelViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_tooltipViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_customLabelTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_customTooltipTagViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_valueViewModel(new fO(nk.get_fieldPickerCombo()));nl.set_formulaViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_confidenceIntervalStateViewModel(spiff.ComboBoxViewModel.newReactLineAndArrowComboBoxViewModel());nl.set_confidenceLevelViewModel(new fz(nk.get_confidenceLevelCombo(),'ConfidenceLevel'));nl.set_instantAnalyticsCheckboxViewModel(new gT(jV.$5));nl.set_constantValueInputViewModel(new eN('ConstantValue'));var nm=new eN('CustomLabel');nm.set_allowEmpty(true);nm.set_shouldSelectTextOnFocus(false);nl.set_customLabelInputViewModel(nm);var nn=new eN('CustomTooltip');nn.set_allowEmpty(true);nn.set_shouldSelectTextOnFocus(false);nl.set_customTooltipInputViewModel(nn);jV.$ctor1.call(this,nk,nl)},{get_lineModel:function(){return this.$3$1},set_lineModel:function(nk){this.$3$1=nk},get_scopeViewModel:function(){return this.$3$2},set_scopeViewModel:function(nk){this.$3$2=nk},get_labelViewModel:function(){return this.$3$3},set_labelViewModel:function(nk){this.$3$3=nk},get_tooltipViewModel:function(){return this.$3$4},set_tooltipViewModel:function(nk){this.$3$4=nk},get_customLabelTagViewModel:function(){return this.$3$5},set_customLabelTagViewModel:function(nk){this.$3$5=nk},get_customTooltipTagViewModel:function(){return this.$3$6},set_customTooltipTagViewModel:function(nk){this.$3$6=nk},get_valueViewModel:function(){return this.$3$7},set_valueViewModel:function(nk){this.$3$7=nk},get_formulaViewModel:function(){return this.$3$8},set_formulaViewModel:function(nk){this.$3$8=nk},get_confidenceIntervalStateViewModel:function(){return this.$3$9},set_confidenceIntervalStateViewModel:function(nk){this.$3$9=nk},get_confidenceLevelViewModel:function(){return this.$3$10},set_confidenceLevelViewModel:function(nk){this.$3$10=nk},get_instantAnalyticsViewModel:function(){return this.$3$11},set_instantAnalyticsViewModel:function(nk){this.$3$11=nk},get_constantValueInputViewModel:function(){return this.$3$12},set_constantValueInputViewModel:function(nk){this.$3$12=nk},get_customLabelInputViewModel:function(){return this.$3$13},set_customLabelInputViewModel:function(nk){this.$3$13=nk},get_customTooltipInputViewModel:function(){return this.$3$14},set_customTooltipInputViewModel:function(nk){this.$3$14=nk},get_isConstantSelected:function(){return this.get_lineModel().get_formulaType()==='constant'},get_isParameterSelected:function(){return this.get_lineModel().get_isParameterSelected()},get_isCustomLabelSelected:function(){return this.get_lineModel().get_labelType()==='custom'},get_isCustomTooltipSelected:function(){return this.get_lineModel().get_tooltipType()==='custom'},get_isConfidenceIntervalAllowed:function(){return this.get_lineModel().get_isConfidenceIntervalAllowed()},get_isInstantAnalyticsAllowed:function(){return this.get_lineModel().get_isInstantAnalyticsAllowed()},get_visualId:function(){return this.get_lineModel().get_visualId()},get_referenceLineId:function(){return this.get_lineModel().get_refLineId()},$j:function(){var nk=this.get_lineModel().get_isConfidenceIntervalAllowed()&&this.get_lineModel().get_confidenceIntervalSelectedState()!=='line-only';this.get_confidenceLevelViewModel().set_enabled(nk)},$m:function(){var nk=null;this.get_formulaViewModel().clearItems();var nl=[];var nm=this.get_lineModel().get_validFormulaTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.displayText,no.referenceLineFormulaType,null,null);if(ss.equals(no.referenceLineFormulaType,this.get_lineModel().get_formulaType())){nk=np}nl.push(np)}this.get_formulaViewModel().setItemsWithInitialSelection(nl,nk);this.get_formulaViewModel().set_selectedItem(nk);this.get_formulaViewModel().set_enabled(!this.get_isParameterSelected())},$p:function(){this.get_valueViewModel().updateDomFromModel()},$n:function(){var nk=null;var nl=[];var nm=this.get_lineModel().get_validLabelTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_lineModel().get_labelType())){nk=np}}this.get_labelViewModel().setItemsWithInitialSelection(nl,nk)},$o:function(){var nk=null;var nl=[];var nm=this.get_lineModel().get_validTooltipTypes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_lineModel().get_tooltipType())){nk=np}}this.get_tooltipViewModel().setItemsWithInitialSelection(nl,nk)},$k:function(){var nk=_.map(this.get_lineModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_customLabelTagViewModel().setItemsWithInitialSelection(nk,null)},$l:function(){var nk=_.map(this.get_lineModel().get_validCustomLabelTags(),function(nl){return new spiff.ComboBoxItem(null,nl,ss.formatString('<{0}>',nl),null,null)});this.get_customTooltipTagViewModel().setItemsWithInitialSelection(nk,null)},$i:function(){var nk=null;var nl=[];var nm=this.get_lineModel().get_confidenceIntervalStates();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=new spiff.ComboBoxItem(null,no.value,no.key,null,null);nl.push(np);if(ss.equals(no.key,this.get_lineModel().get_confidenceIntervalSelectedState())){nk=np}}this.get_confidenceIntervalStateViewModel().setItemsWithInitialSelection(nl,nk);this.get_confidenceIntervalStateViewModel().set_enabled(this.get_lineModel().get_isConfidenceIntervalAllowed())},$f:function(){if(this.get_scopeViewModel().get_selectedScope()!==this.get_lineModel().get_scopeType()){var nk=new tab.UpdateReferenceLineCmd;nk.set_uiBlocking('immediately');nk.c['referenceLineScopeType']=this.get_scopeViewModel().get_selectedScope();nk.c['visualIdPresModel']=this.get_visualId();nk.c['referenceLineId']=this.get_referenceLineId();nk.invoke()}},$d:function(nk){if(nk!==this.get_lineModel().get_instantAnalyticsEnabled()){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['enableInstantAnalytics']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()}},$c:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_lineModel().get_formulaType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineFormulaType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$e:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_lineModel().get_labelType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineLabelType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$g:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_lineModel().get_tooltipType()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['referenceLineTooltipType']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$a:function(nk){this.get_customLabelInputViewModel().insertText(nk.get_data())},$b:function(nk){this.get_customTooltipInputViewModel().insertText(nk.get_data())},$h:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(!ss.referenceEquals(nl,this.get_lineModel().get_fieldPickerCombo().get_selectedField())){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['fn']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$6:function(nk){if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data();if(nl!==this.get_lineModel().get_confidenceIntervalSelectedState()){var nm=new tab.UpdateReferenceLineCmd;nm.set_uiBlocking('immediately');nm.c['confidenceIntervalState']=nl;nm.c['visualIdPresModel']=this.get_visualId();nm.c['referenceLineId']=this.get_referenceLineId();nm.invoke()}},$9:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['referenceParam']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$8:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['confidenceLevelValue']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$7:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['confidenceLevelValue']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();var nm=nl.invoke();var nn=this.get_confidenceLevelViewModel();nm.always(ss.mkdel(nn,nn.updateDomFromModel))},$3:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['constantValue']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke().always(ss.mkdel(this,this.updateDomFromModel))},$4:function(nk){if(ss.equalsT(nk,this.get_lineModel().get_customLabel())){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['label']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},$5:function(nk){if(ss.equalsT(nk,this.get_lineModel().get_customTooltip())){return}var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('afterDelay');nl.c['tooltipText']=nk;nl.c['visualIdPresModel']=this.get_visualId();nl.c['referenceLineId']=this.get_referenceLineId();nl.invoke()},updateDomFromModel:function(){if(ss.isValue(this.get_lineModel().get_refLinePresModel())){this.get_scopeViewModel().updateFromModel(this.get_lineModel().get_scopeType());this.get_instantAnalyticsViewModel().updateFromModel(this.get_lineModel().get_instantAnalyticsEnabled(),this.get_isInstantAnalyticsAllowed());this.get_constantValueInputViewModel().updateFromModel(this.get_lineModel().get_formattedConstantValue());this.get_customLabelInputViewModel().updateFromModel(this.get_lineModel().get_customLabel());this.get_customTooltipInputViewModel().updateFromModel(this.get_lineModel().get_customTooltip());this.$m();this.$p();this.$n();this.$o();this.$k();this.$l();this.$i();this.$j()}},createUpdatedProps:function(){var nk=new jT;nk.scopeViewModel=this.get_scopeViewModel();nk.isConstantSelected=this.get_isConstantSelected();nk.isConfidenceIntervalAllowed=this.get_isConfidenceIntervalAllowed();nk.constantValueProps=this.get_constantValueInputViewModel().get_props();nk.formulaProps=this.get_formulaViewModel().get_props();nk.valueProps=this.get_valueViewModel().get_props();var nl=new kb;nl.labelDropdownProps=this.get_labelViewModel().get_props();nl.isCustomLabelSelected=this.get_isCustomLabelSelected();nl.customLabelInputProps=this.get_customLabelInputViewModel().get_props();nl.customLabelTagProps=this.get_customLabelTagViewModel().get_props();nk.labelProps=nl;var nm=new kk;nm.tooltipDropdownProps=this.get_tooltipViewModel().get_props();nm.isCustomTooltipSelected=this.get_isCustomTooltipSelected();nm.customTooltipInputProps=this.get_customTooltipInputViewModel().get_props();nm.customTooltipTagProps=this.get_customTooltipTagViewModel().get_props();nk.tooltipProps=nm;nk.confidenceIntervalStateProps=this.get_confidenceIntervalStateViewModel().get_props();nk.confidenceLevelProps=this.get_confidenceLevelViewModel().get_props();nk.instantAnalyticsProps=this.get_instantAnalyticsViewModel().get_props();return nk}},{$ctor1:function(nk,nl){this.$3$1=null;this.$3$2=null;this.$3$3=null;this.$3$4=null;this.$3$5=null;this.$3$6=null;this.$3$7=null;this.$3$8=null;this.$3$9=null;this.$3$10=null;this.$3$11=null;this.$3$12=null;this.$3$13=null;this.$3$14=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[jT]).call(this);this.set_lineModel(nk);this.set_scopeViewModel(nl.get_scopeViewModel());this.set_labelViewModel(nl.get_labelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_labelViewModel()));this.set_tooltipViewModel(nl.get_tooltipViewModel());this.disposables.add$1(this.addChildViewModel(this.get_tooltipViewModel()));this.set_customLabelTagViewModel(nl.get_customLabelTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelTagViewModel()));this.set_customTooltipTagViewModel(nl.get_customTooltipTagViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipTagViewModel()));this.set_valueViewModel(nl.get_valueViewModel());this.disposables.add$1(this.addChildViewModel(this.get_valueViewModel()));this.set_formulaViewModel(nl.get_formulaViewModel());this.disposables.add$1(this.addChildViewModel(this.get_formulaViewModel()));this.set_confidenceIntervalStateViewModel(nl.get_confidenceIntervalStateViewModel());this.disposables.add$1(this.addChildViewModel(this.get_confidenceIntervalStateViewModel()));this.set_confidenceLevelViewModel(nl.get_confidenceLevelViewModel());this.disposables.add$1(this.addChildViewModel(this.get_confidenceLevelViewModel()));this.set_instantAnalyticsViewModel(nl.get_instantAnalyticsCheckboxViewModel());this.disposables.add$1(this.addChildViewModel(this.get_instantAnalyticsViewModel()));this.set_constantValueInputViewModel(nl.get_constantValueInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_constantValueInputViewModel()));this.set_customLabelInputViewModel(nl.get_customLabelInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customLabelInputViewModel()));this.set_customTooltipInputViewModel(nl.get_customTooltipInputViewModel());this.disposables.add$1(this.addChildViewModel(this.get_customTooltipInputViewModel()));this.get_lineModel().add_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().add_scopeUpdated(ss.mkdel(this,this.$f));this.get_formulaViewModel().add_selectedItemChanged(ss.mkdel(this,this.$c));this.get_valueViewModel().add_selectedItemChanged(ss.mkdel(this,this.$h));this.get_labelViewModel().add_selectedItemChanged(ss.mkdel(this,this.$e));this.get_tooltipViewModel().add_selectedItemChanged(ss.mkdel(this,this.$g));this.get_customLabelTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customTooltipTagViewModel().add_selectedItemChanged(ss.mkdel(this,this.$b));this.get_confidenceIntervalStateViewModel().add_selectedItemChanged(ss.mkdel(this,this.$6));this.get_confidenceLevelViewModel().add_dataValueUpdated(ss.mkdel(this,this.$8));this.get_confidenceLevelViewModel().add_customDataValueUpdated(ss.mkdel(this,this.$7));this.get_confidenceLevelViewModel().add_parameterSelected(ss.mkdel(this,this.$9));this.get_instantAnalyticsViewModel().add_instantAnalyticsUpdated(ss.mkdel(this,this.$d));this.get_constantValueInputViewModel().add_onValueChanged(ss.mkdel(this,this.$3));this.get_customLabelInputViewModel().add_onValueChanged(ss.mkdel(this,this.$4));this.get_customTooltipInputViewModel().add_onValueChanged(ss.mkdel(this,this.$5));this.get_labelViewModel().set_hasTooltip(false);this.get_customLabelTagViewModel().set_hasTooltip(false);this.get_tooltipViewModel().set_hasTooltip(false);this.get_customTooltipTagViewModel().set_hasTooltip(false);this.get_valueViewModel().set_hasTooltip(false);this.get_formulaViewModel().set_hasTooltip(false);this.get_confidenceIntervalStateViewModel().set_hasTooltip(false);this.get_confidenceLevelViewModel().set_hasTooltip(false);this.disposables.add$2([this.get_scopeViewModel(),this.get_labelViewModel(),this.get_tooltipViewModel(),this.get_customLabelTagViewModel(),this.get_customTooltipTagViewModel(),this.get_valueViewModel(),this.get_formulaViewModel(),this.get_confidenceIntervalStateViewModel(),this.get_confidenceLevelViewModel(),this.get_instantAnalyticsViewModel(),this.get_constantValueInputViewModel(),this.get_customLabelInputViewModel(),this.get_customTooltipInputViewModel(),new tab.CallOnDispose(ss.mkdel(this,function(){this.get_lineModel().remove_modelUpdated(ss.mkdel(this,this.updateDomFromModel));this.get_scopeViewModel().remove_scopeUpdated(ss.mkdel(this,this.$f));this.get_formulaViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$c));this.get_valueViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$h));this.get_labelViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$e));this.get_tooltipViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$g));this.get_customLabelTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$a));this.get_customTooltipTagViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$b));this.get_confidenceIntervalStateViewModel().remove_selectedItemChanged(ss.mkdel(this,this.$6));this.get_confidenceLevelViewModel().remove_dataValueUpdated(ss.mkdel(this,this.$8));this.get_confidenceLevelViewModel().remove_customDataValueUpdated(ss.mkdel(this,this.$7));this.get_confidenceLevelViewModel().remove_parameterSelected(ss.mkdel(this,this.$9));this.get_instantAnalyticsViewModel().remove_instantAnalyticsUpdated(ss.mkdel(this,this.$d));this.get_constantValueInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$3));this.get_customLabelInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$4));this.get_customTooltipInputViewModel().remove_onValueChanged(ss.mkdel(this,this.$5))}))])}});var jW=global.tab.ReferenceLineDialogLineTabViewModels=ss.mkType(a,'tab.ReferenceLineDialogLineTabViewModels',function(){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.$1$9=null;this.$1$10=null;this.$1$11=null;this.$1$12=null;this.$1$13=null},{get_scopeViewModel:function(){return this.$1$1},set_scopeViewModel:function(nk){this.$1$1=nk},get_labelViewModel:function(){return this.$1$2},set_labelViewModel:function(nk){this.$1$2=nk},get_tooltipViewModel:function(){return this.$1$3},set_tooltipViewModel:function(nk){this.$1$3=nk},get_customLabelTagViewModel:function(){return this.$1$4},set_customLabelTagViewModel:function(nk){this.$1$4=nk},get_customTooltipTagViewModel:function(){return this.$1$5},set_customTooltipTagViewModel:function(nk){this.$1$5=nk},get_valueViewModel:function(){return this.$1$6},set_valueViewModel:function(nk){this.$1$6=nk},get_formulaViewModel:function(){return this.$1$7},set_formulaViewModel:function(nk){this.$1$7=nk},get_confidenceIntervalStateViewModel:function(){return this.$1$8},set_confidenceIntervalStateViewModel:function(nk){this.$1$8=nk},get_confidenceLevelViewModel:function(){return this.$1$9},set_confidenceLevelViewModel:function(nk){this.$1$9=nk},get_instantAnalyticsCheckboxViewModel:function(){return this.$1$10},set_instantAnalyticsCheckboxViewModel:function(nk){this.$1$10=nk},get_constantValueInputViewModel:function(){return this.$1$11},set_constantValueInputViewModel:function(nk){this.$1$11=nk},get_customLabelInputViewModel:function(){return this.$1$12},set_customLabelInputViewModel:function(nk){this.$1$12=nk},get_customTooltipInputViewModel:function(){return this.$1$13},set_customTooltipInputViewModel:function(nk){this.$1$13=nk}});var jX=global.tab.ReferenceLineDialogTemplate=ss.mkType(a,'tab.ReferenceLineDialogTemplate',function(nk){this.$2=null;this.$1=null;spiff.Template.call(this,nk||$("<div><div class='tab-editReferenceLineTabs'></div><div class='tab-editReferenceLineTabContentArea'></div></div>"));this.$2=this.getElementBySelector('.tab-editReferenceLineTabs');this.$1=this.getElementBySelector('.tab-editReferenceLineTabContentArea')},{get_root:function(){return this.domRoot},get_tabs:function(){return this.$2},get_contentArea:function(){return this.$1},createTabLabel:function(nk,nl){return new m(nk,nl)}});var jY=global.tab.ReferenceLineDialogView=ss.mkType(a,'tab.ReferenceLineDialogView',function(nk){this.$n=null;this.$j=null;this.$m=null;this.$k=null;this.$l=null;this.defaultStartingPosition=null;ss.makeGenericType(spiff.BaseView$1,[jZ]).call(this,nk,new jX(null));this.get_viewModel().add_updated(ss.mkdel(this,this.$e));this.get_viewModel().add_activate(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_updated(ss.mkdel(this,this.$e));this.get_viewModel().remove_activate(ss.mkdel(this,this.$a))})))},{get_dialog:function(){return this.$j},$h:function(){return this.get_template()},$i:function(){return this.get_viewModel().get_dialogPosition()||this.defaultStartingPosition},dispose:function(){this.$7();ss.makeGenericType(spiff.BaseView$1,[jZ]).prototype.dispose.call(this)},$9:function(){this.$n=new spiff.TabControl(this.get_template());this.$m=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jV,jS,jT])).call(null,[this.get_viewModel().get_lineTabViewModel()]);this.$m.addToDom(this.$h().get_contentArea());this.$k=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jH,jE,jF])).call(null,[this.get_viewModel().get_bandTabViewModel()]);this.$k.addToDom(this.$h().get_contentArea());this.$n.addTab('line'.toString(),tab.Strings.AODialogLineTabTitle,this.$m,true);this.$n.addTab('band'.toString(),tab.Strings.AODialogBandTabTitle,this.$k,true);this.$l=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[jQ,jN,jO])).call(null,[this.get_viewModel().get_distributionTabViewModel()]);this.$l.addToDom(this.$h().get_contentArea());this.$n.addTab('distribution'.toString(),tab.Strings.AODialogDistributionTabTitle,this.$l,this.get_viewModel().get_distributionTabViewModel().get_isValid());this.$n.selectTab(this.get_viewModel().get_currentTab().toString());this.$n.add_tabChanged(ss.mkdel(this,this.$d))},$d:function(){this.get_viewModel().onTabChanged(this.$n.get_activeTabId())},$e:function(){if(ss.isValue(this.get_viewModel().get_model())&&this.get_viewModel().get_model().get_isEditing()){if(ss.isNullOrUndefined(this.$j)){this.createDialog()}else{this.$g();this.$f()}if(!this.$j.get_isShown()){this.onAddedToDom();this.$j.set_setFocusOnShow(!tsConfig.is_mobile);this.get_dialog().show()}this.$n.enableTab('distribution'.toString(),this.get_viewModel().get_distributionTabViewModel().get_isValid())}else{this.$7()}},$f:function(){if(!ss.referenceEquals(this.$n.get_activeTabId(),this.get_viewModel().get_currentTab().toString())){this.$n.remove_tabChanged(ss.mkdel(this,this.$d));this.$n.selectTab(this.get_viewModel().get_currentTab().toString());this.$n.add_tabChanged(ss.mkdel(this,this.$d))}},createDialog:function(){var nk=new spiff.Dialog('',this.element);nk.set_stayInWindow(true);this.$j=nk;if(ss.isValue(this.$i())){this.$j.set_startingPositionX(this.$i().x);this.$j.set_startingPositionY(this.$i().y)}this.$j.add_propertyChanged(ss.mkdel(this,this.$c));this.$j.get_dialogElement().addClass('tabReferenceLineEditDialog');this.$j.disableTextSelection();this.$j.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$j.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$j.add_closed(ss.mkdel(this,this.$b));this.$g();this.$9()},$a:function(){if(ss.isValue(this.$j)){this.$j.moveToTop()}},$g:function(){this.$j.set_titleUnescaped(tab.Strings.AODialogTitleString(jY.getTitleStringFromTab(this.get_viewModel().get_currentTab())))},$c:function(nk,nl){if(nl.get_propertyName()==='position'){this.get_viewModel().set_dialogPosition(this.$j.get_position())}},$7:function(){if(ss.isNullOrUndefined(this.$j)){return}this.$8();this.$j.remove_closed(ss.mkdel(this,this.$b));this.$j.remove_propertyChanged(ss.mkdel(this,this.$c));this.$j=tab.MiscUtil.dispose$1(this.$j)},$8:function(){if(ss.isValue(this.$m)){this.$m.dispose();this.$m=null}if(ss.isValue(this.$k)){this.$k.dispose();this.$k=null}if(ss.isValue(this.$l)){this.$l.dispose();this.$l=null}if(ss.isValue(this.$n)){this.$n.remove_tabChanged(ss.mkdel(this,this.$d));this.$n.dispose();this.$n=null}},$b:function(nk,nl){this.get_viewModel().endEdit()}},{getTitleStringFromTab:function(nk){switch(nk){case'line':{return tab.Strings.AODialogLineTabTitle}case'band':{return tab.Strings.AODialogBandTabTitle}case'distribution':{return tab.Strings.AODialogDistributionTabTitle}default:{return''}}}});var jZ=global.tab.ReferenceLineEditorViewModel=ss.mkType(a,'tab.ReferenceLineEditorViewModel',function(nk){this.$2=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;spiff.BaseViewModel.call(this);this.$2=nk;nk.add_modelUpdated(ss.mkdel(this,this.$0));var nl=[{ns:'tabdoc',cmd:'show-reference-line-editor'},{ns:'tabdoc',cmd:'set-reference-line-formula'}];var nm=tab.ServerCommands.intercept(nl,ss.mkdel(this,function(nn){this.raiseActionEvent(this.$2$2);return 0}));this.set_lineTabViewModel(new jV(nk.get_lineModel()));this.set_bandTabViewModel(new jH(nk.get_bandModel()));this.set_distributionTabViewModel(new jQ(nk.get_distributionModel()));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_modelUpdated(ss.mkdel(this,this.$0));tab.ServerCommands.removeIntercept(nl,nm)})))},{add_updated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_updated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_activate:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_activate:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_model:function(){return this.$2},get_dialogPosition:function(){return this.$2$3},set_dialogPosition:function(nk){this.$2$3=nk},get_currentTab:function(){return this.$2.get_activePane()},get_currentTabViewModel:function(){switch(this.get_currentTab()){case'line':{return this.get_lineTabViewModel()}case'band':{return this.get_bandTabViewModel()}case'distribution':{return this.get_distributionTabViewModel()}default:{return null}}},get_lineTabViewModel:function(){return this.$2$4},set_lineTabViewModel:function(nk){this.$2$4=nk},get_bandTabViewModel:function(){return this.$2$5},set_bandTabViewModel:function(nk){this.$2$5=nk},get_distributionTabViewModel:function(){return this.$2$6},set_distributionTabViewModel:function(nk){this.$2$6=nk},$0:function(){this.raiseActionEvent(this.$2$1)},endEdit:function(){var nk=new tab.CloseRefLineEditorCmd;nk.c['visualIdPresModel']=this.get_lineTabViewModel().get_lineModel().get_visualId();nk.invoke()},onTabChanged:function(nk){var nl=new tab.UpdateReferenceLineCmd;nl.set_uiBlocking('immediately');nl.c['visualIdPresModel']=this.get_currentTabViewModel().get_visualId();nl.c['referenceLineId']=this.get_currentTabViewModel().get_referenceLineId();nl.c['reflineFormulaGroup']=this.$1(nk);nl.invoke()},$1:function(nk){return jZ.$1[nk]},dispose:function(){this.get_lineTabViewModel().dispose();this.get_bandTabViewModel().dispose();this.get_distributionTabViewModel().dispose();spiff.BaseViewModel.prototype.dispose.call(this)}},{new$1:function(nk){return new jZ(nk)}});var ka=global.tab.ReferenceLineLabelComponent=ss.mkType(a,'tab.ReferenceLineLabelComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:ss.coalesce('tab-dialogRow '+this.props.cssClass,'')},spiff.DOMElements.div({className:'tab-labelTypeComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogLabelLabel),React.createElement(spiff.ComboBoxComponent,this.props.labelDropdownProps)),(!this.props.isCustomLabelSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customLabelComponentWrapper tab-componentWrapper'},'')})():null),(this.props.isCustomLabelSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customLabelComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogCustomLabelLabel),spiff.DOMElements.div({className:'tab-customLabelInput'},React.createElement(eM,this.props.customLabelInputProps),React.createElement(spiff.ComboBoxComponent,this.props.customLabelTagProps)))})():null))}});var kb=global.tab.ReferenceLineLabelProps=ss.mkType(a,'tab.ReferenceLineLabelProps',function(){this.customLabelInputProps=null;this.labelDropdownProps=null;this.customLabelTagProps=null;this.isCustomLabelSelected=false;this.cssClass=null});var kc=global.tab.ReferenceLineLabelState=ss.mkType(a,'tab.ReferenceLineLabelState',function(){});var kd=global.tab.ReferenceLineScopeComponent=ss.mkType(a,'tab.ReferenceLineScopeComponent',function(nk,nl){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[kh,ke,kf]).call(this,new kh(nk.viewModel,null),nk,nl)},{handleWidgetPropertyChanged:function(nk,nl){},updateWidgetState:function(nk){this.get_widget().onUpdatedFromModel()}});var ke=global.tab.ReferenceLineScopeProperties=ss.mkType(a,'tab.ReferenceLineScopeProperties',function(){this.viewModel=null});var kf=global.tab.ReferenceLineScopeState=ss.mkType(a,'tab.ReferenceLineScopeState',function(){});var kg=global.tab.ReferenceLineScopeTemplate=ss.mkType(a,'tab.ReferenceLineScopeTemplate',function(nk){spiff.Template.call(this,nk||$("<div class='tab-editReferenceLineScopeSection'>\n              </div>"))});var kh=global.tab.ReferenceLineScopeView=ss.mkType(a,'tab.ReferenceLineScopeView',function(nk,nl){this.$9={};this.$a=null;ss.makeGenericType(spiff.BaseView$1,[ki]).call(this,nk,nl||new kg(null));this.$a=new spiff.SelectableGroup;var nm=nk.get_referenceLineScopeOptions();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];var np=spiff.LabelToggleButton.newRadioButton(this.$7(no),false);np.set_selectionId(no.toString());np.addToDom(this.element);np.addClass(no.toString());this.disposables.add$1(np);this.$a.addItem(np);this.$9[no.toString()]=np}this.onUpdatedFromModel();this.$a.add_selectionChanged(ss.mkdel(this,this.$8));this.get_viewModel().add_updatedFromModel(ss.mkdel(this,this.onUpdatedFromModel));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$a.remove_selectionChanged(ss.mkdel(this,this.$8));this.get_viewModel().remove_updatedFromModel(ss.mkdel(this,this.onUpdatedFromModel))})))},{$8:function(){this.get_viewModel().setSelectedScope(this.$a.get_selectedItem().get_selectionId())},onUpdatedFromModel:function(){this.$a.selectItem(this.$9[this.get_viewModel().get_selectedScope().toString()])},$7:function(nk){switch(nk){case'per-table':{return tab.Strings.AODialogTableScope}case'per-pane':{return tab.Strings.AODialogPaneScope}case'per-cell':{return tab.Strings.AODialogCellScope}default:{throw new ss.ArgumentException('Unexpected scopeType value','scopeType')}}}});var ki=global.tab.ReferenceLineScopeViewModel=ss.mkType(a,'tab.ReferenceLineScopeViewModel',function(){this.$0=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;spiff.BaseViewModel.call(this);var nk=[];nk.push('per-table');nk.push('per-pane');nk.push('per-cell');this.set_referenceLineScopeOptions(nk);this.$0='per-table'},{add_updatedFromModel:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_updatedFromModel:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_scopeUpdated:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_scopeUpdated:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_referenceLineScopeOptions:function(){return this.$2$3},set_referenceLineScopeOptions:function(nk){this.$2$3=nk},get_selectedScope:function(){return this.$0},updateFromModel:function(nk){this.$0=nk;if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},setSelectedScope:function(nk){this.$0=nk;if(!ss.staticEquals(this.$2$2,null)){this.$2$2()}}});var kj=global.tab.ReferenceLineTooltipComponent=ss.mkType(a,'tab.ReferenceLineTooltipComponent',function(){React.Component.call(this)},{render:function(){return spiff.DOMElements.div({className:ss.coalesce('tab-dialogRow '+this.props.cssClass,'')},spiff.DOMElements.div({className:'tab-labelTypeComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogTooltipLabel),React.createElement(spiff.ComboBoxComponent,this.props.tooltipDropdownProps)),(!this.props.isCustomTooltipSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customTooltipComponentWrapper tab-componentWrapper'},'')})():null),(this.props.isCustomTooltipSelected?ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-customTooltipComponentWrapper tab-componentWrapper'},spiff.DOMElements.span({className:'tab-componentLabel'},tab.Strings.AODialogCustomTooltipLabel),spiff.DOMElements.div({className:'tab-customLabelInput'},React.createElement(eM,this.props.customTooltipInputProps),React.createElement(spiff.ComboBoxComponent,this.props.customTooltipTagProps)))})():null))}});var kk=global.tab.ReferenceLineTooltipProps=ss.mkType(a,'tab.ReferenceLineTooltipProps',function(){this.customTooltipInputProps=null;this.tooltipDropdownProps=null;this.customTooltipTagProps=null;this.isCustomTooltipSelected=false;this.cssClass=null});var kl=global.tab.RefreshDataServerKeyboardShortcut=ss.mkType(a,'tab.RefreshDataServerKeyboardShortcut',function(){KeyboardShortcuts.CommandKeyboardShortcut.call(this)},{getKeyComboOrKeyCombos:function(){var nk=new Object;nk.alt='required';var nl=new KeyboardShortcuts.KeyCombo('F5',nk);var nm=new Object;nm.alt='required';var nn=new KeyboardShortcuts.KeyCombo('r',nm);return new KeyboardShortcuts.KeyCombos(nl,nn)},getCommandId:function(){return{ns:'tabsrv',cmd:'refresh-data-server'}},getHintText:function(){return((tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab')?KeyboardShortcuts.KeyCombos.CoerceToKeyCombos(this.getKeyComboOrKeyCombos()).getHintText():null)},isAllowed:function(nk){return KeyboardShortcuts.CommandKeyboardShortcut.prototype.isAllowed.call(this,nk)&&tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'}});var km=global.tab.RemoteComponent=ss.mkType(a,'tab.RemoteComponent',function(nk){this.$3=null;spiff.PureRenderComponent.call(this,nk)},{$0:function(){var nk=$('<div></div>')[0];nk.id='remote-component-container-'+km.$1++;this.props.destination.appendChild(nk);this.$3=nk},$1:function(nk){if(ss.isValue(this.$3)){ReactDOM.unmountComponentAtNode(this.$3);nk.destination.removeChild(this.$3);this.$3=null}},$2:function(){if(ss.isValue(this.$3)){ReactDOM.render(spiff.DOMElements.div({},this.props.element()),this.$3)}},componentDidUpdate:function(nk){if(!ss.referenceEquals(nk.destination,this.props.destination)){this.$1(nk);this.$0()}this.$2()},componentWillMount:function(){this.$0();this.$2()},componentWillUnmount:function(){this.$1(this.props)},render:function(){return null}},{create:function(nk){return React.createElement(km,nk)},renderZoneRectPreview:function(nk,nl){if(ss.isNullOrUndefined(nk)){return null}return km.create({destination:tab.DashboardView.findDashboard()[0],element:ss.mkdel(this,function(){return spiff.DOMElements.div({className:'tab-pendingResizeFeedback',style:{left:nk.l,top:nk.t,width:nk.w,height:nk.h,zIndex:700}})}),key:nl})}});var kn=global.tab.RemoveZoneFromDeviceLayoutWithPreviewCommand=ss.mkType(a,'tab.RemoveZoneFromDeviceLayoutWithPreviewCommand',function(){tab.RemoveZoneFromDeviceLayoutWithPreviewCmd.call(this)},{do$1:function(){tab.DashboardClientCommands.removeZoneFromDeviceLayout(this.c['dashboard'],this.c['zoneId'])}});var ko=global.tab.RenameCalcKeyboardShortcut=ss.mkType(a,'tab.RenameCalcKeyboardShortcut',function(nk){this.$0=null;KeyboardShortcuts.BaseKeyboardShortcut.call(this);this.$0=nk},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['F2',null].concat(null))},getElement:function(){return this.$0.get_rootElement().get(0)},isAllowed:function(nk){return this.$0.addedToDom&&this.$0.get_dialog().get_isShown()&&this.$0.get_dialog().get_isActive()},executeShortcut:function(nk){this.$0.get_editableCaption().edit()},getTelemetryKey:function(){return'Rename Calculated Field'}});var kp=global.tab.RenameCommandRedirectHandler=ss.mkType(a,'tab.RenameCommandRedirectHandler',null,null,{handleRenameField:function(nk){var nl=$.Deferred();var nm=nk.get_globalName();var nn=nk.get_fieldCaptionForReset();var no=nk.get_displayName();kt.new$1(no,nn,function(np,nq){_.defer(function(){tab.SchemaClientCommands.validateFieldCaption(nm,np,nq)})},function(np){_.defer(function(){tab.SchemaClientCommands.editFieldCaption(nm,np,nk);nl.resolve()})}).show();return nl.promise()},$0:function(nk){var nl=nk['uniqueName'];var nm=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().findField(nl);return kp.handleRenameField(nm)},$1:function(nk){var nl=$.Deferred();var nm=nk['sheet'.toString()];var nn=tab.ApplicationModel.get_instance().get_workbook().get_sheetsInfo().map(function(no){return no.sheet});kw.new$1(nm,nn,function(){nl.resolve()}).show();return nl.promise()}});var kq=global.tab.RenameDatasourceCaptionDialog=ss.mkType(a,'tab.RenameDatasourceCaptionDialog',function(nk){this.$1=null;this.$0=null;this.$1=nk},{show:function(){this.$0=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ks,kr,Object])).call(null,[this.$1]);this.$0.addToDom($(document.body))},dispose:function(){this.$1=tab.MiscUtil.dispose$1(this.$1)}},{createRenameDatasourceCaptionDialog:function(nk,nl,nm){var nn=new ks(nk,nl,nm);return new kq(nn)}});var kr=global.tab.RenameDatasourceCaptionDialogComponent=ss.mkType(a,'tab.RenameDatasourceCaptionDialogComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state=new Object},{render:function(){return React.createElement(SharedWidgets.DialogWidget,{testId:'RenameDatasourceCaption',isModal:true,title:(tab.FeatureFlags.isEnabled('RenamePublishedDataSource')?tab.Strings.AuthRenameDatasourceAliasHeader:tab.Strings.AuthRenameDataSource),showCloseButton:false,type:0,positioningBehavior:0,onCloseRequest:this.props.cancel,children:this.$1(),footerContent:this.$0(),showFooter:true,shouldReturnFocusOnClose:true,dialogWidth:350,isGlassTransparent:true,zIndex:988,shouldAdjustPositionOnWindowResize:true})},$0:function(){var nk={marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace};var nl={handleClick:ss.mkdel(this,function(nn){_.defer(this.props.cancel)}),buttonType:3,testId:'Cancel',children:tab.Strings.DialogButtonCancel,style:nk,key:'cancel-button'};var nm={handleClick:ss.mkdel(this,function(nn){_.defer(this.props.submit)}),buttonType:2,testId:'Submit',children:tab.Strings.DialogButtonOK,style:nk,key:'submit-button',disabled:!this.props.valid};return spiff.DOMElements.div({className:'tab-renameDataSourceCaptionDialogButtons',key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,nl),React.createElement(SharedWidgets.ButtonWidget,nm))},$1:function(){var nk={text:this.props.text,handleChange:this.props.changeText,handleEnter:ss.mkdel(this,function(){_.defer(this.props.submit)}),testId:'RenameDatasourceCaptionInput',key:'text-input',containerStyle:{width:'100%',minHeight:'60px'},errorText:this.props.errorText};if(tab.FeatureFlags.isEnabled('RenamePublishedDataSource')){return spiff.DOMElements.div({className:'tab-renameDatasourceCaptionDialogInputs',key:'inputs'},spiff.ReactElement.div$1('tab-renameDatasourceCaptionDialogInfo',[tab.Strings.AuthRenameDatasourceInfoMessage]),spiff.ReactElement.br(null),React.createElement(SharedWidgets.LineTextFieldWidget,nk))}else{return spiff.DOMElements.div({className:'tab-renameDatasourceCaptionDialogInputs',key:'inputs'},React.createElement(SharedWidgets.LineTextFieldWidget,nk))}}});var ks=global.tab.RenameDatasourceCaptionViewModel=ss.mkType(a,'tab.RenameDatasourceCaptionViewModel',function(nk,nl,nm){this.$7=null;this.$b=null;this.$8=null;this.$9=null;this.$a=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=nk;this.$7=nm;this.$9=nl;this.set_text(nk.get_caption())},{get_text:function(){return this.$b},set_text:function(nk){this.$b=nk;if(!this.$3(nk)&&ss.contains(this.$9,nk.trim())){this.$6(tab.Strings.AuthRenameDatasourceError)}else{this.$6('')}this.incrementProps()},$5:function(){return this.$8},$6:function(nk){this.$8=nk;this.incrementProps()},$3:function(nk){return ss.referenceEquals(nk.trim(),this.$a.get_caption())},submit:function(){var nk=this.get_text().trim();if(!this.$3(nk)&&tab.SchemaUtils.isValidNewDatasourceCaption(this.$a.get_caption(),this.$9,nk)){tab.SchemaClientCommands.renameDataSource(this.$a.get_name(),nk,null)}this.$7()},$4:function(){return this.$3(this.get_text())||tab.SchemaUtils.isValidNewDatasourceCaption(this.$a.get_caption(),this.$9,this.get_text())},createInitialProps:function(){return{submit:ss.mkdel(this,this.submit),cancel:this.$7,changeText:ss.mkdel(this,function(nk){this.set_text(((nk.length<=254)?nk:this.get_text()))}),clearText:ss.mkdel(this,function(){this.set_text('')}),valid:this.$4()}},createUpdatedProps:function(){return{text:this.get_text(),errorText:this.$5(),valid:this.$4()}}});var kt=global.tab.RenameFieldDialog=ss.mkType(a,'tab.RenameFieldDialog',function(nk,nl,nm,nn){this.$Y=null;this.$X=null;this.$Z=null;this.$10=null;this.validateAction=null;this.dom=null;this.resetButton=null;this.$11=0;spiff.ModalDialog.call(this,nk,new ku);this.dom=this.template;this.$Y=nk;this.$X=nl;this.$Z=nn;this.validateAction=nm;this.$11=0;this.$R();this.$Q();this.$10=new tab.Debouncer(ss.mkdel(this,function(){this.$U()}),kt.debounceTimeoutMs);this.disposables.add$1(this.$10)},{$V:function(){return this.dom.statusMessage.text()},$W:function(nk){this.dom.statusMessage.text(nk);this.dom.statusMessage.prop('title',nk)},show:function(){spiff.Dialog.prototype.show.call(this);this.dom.inputField.select();if(!BrowserSupport.BrowserSupport.IsTouch()){this.dom.inputField.focus()}},$T:function(){var nk=this.dom.inputField.val();if(!ss.isNullOrEmptyString(this.$X)&&!ss.referenceEquals(nk,this.$X)){this.resetButton.element.show();this.dom.inputField.addClass('tab-rename-input-field-button-padding')}else{this.resetButton.element.hide();this.dom.inputField.removeClass('tab-rename-input-field-button-padding')}},$K:function(nk){if(nk.which===13){this.$M()}if(nk.which===27){this.$J()}},$L:function(nk){this.$T();this.$10.invokeActionDelayed()},$M:function(){this.dom.inputField.attr('disabled','');var nk=this.dom.inputField.val();this.validateAction(nk,ss.mkdel(this,function(nl){this.$O(nk,nl)}))},$J:function(){this.closeAndDispose()},$N:function(){this.dom.inputField.val(this.$X);this.$T();this.$U()},$O:function(nk,nl){if(nl.isValid){this.$W('');this.$Z(nk);this.closeAndDispose()}else{this.$W(nl.errorMessage);this.dom.inputField.removeAttr('disabled');this.dom.inputField.focus();this.$S()}},$P:function(nk){this.$11--;if(nk.isValid){this.$W('')}else if(this.$11===0){this.$W(nk.errorMessage)}this.$S()},$U:function(){this.$11++;var nk=this.dom.inputField.val();_.defer(ss.mkdel(this,function(){this.validateAction(nk,ss.mkdel(this,this.$P))}))},$R:function(){this.dom.inputField.keydown(ss.mkdel(this,this.$K));this.dom.inputField.keyup(ss.mkdel(this,this.$L));this.resetButton=new spiff.IconButton;this.resetButton.setIcon('tab-schema-name-reset-icon');this.resetButton.set_hoverTooltipText(tab.Strings.DialogButtonReset);this.resetButton.addClass('tab-schema-name-reset');this.resetButton.add_click(ss.mkdel(this,this.$N));this.dom.inputField.parent().append(this.resetButton.element);this.disposables.add$1(this.resetButton);this.$S()},$S:function(){var nk={handleClick:ss.mkdel(this,function(nm){this.$J()}),buttonType:3,testId:'cancel',key:'cancelFieldRename',children:tab.Strings.DialogButtonCancel};var nl={handleClick:ss.mkdel(this,function(nm){this.$M()}),buttonType:2,testId:'commit',key:'commitFieldRename',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.$V()!==''};ReactDOM.render(spiff.DOMElements.div({key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,nk),React.createElement(SharedWidgets.ButtonWidget,nl)),this.dom.dialogActionArea.get(0))},$Q:function(){this.set_closeButtonVisible(false);this.set_titleUnescaped(tab.Strings.AuthRenameField);this.dom.inputField.val(this.$Y);this.set_setFocusOnShow(false);this.$W('');this.$T()}},{new$1:function(nk,nl,nm,nn){return new kt(nk,nl,nm,nn)}});var ku=global.tab.RenameFieldDialogTemplate=ss.mkType(a,'tab.RenameFieldDialogTemplate',function(){this.inputField=null;this.statusMessage=null;this.dialogActionArea=null;spiff.Template.call(this,$(ku.renameTemplate));this.inputField=this.getElementBySelector('.tab-rename-input-field');this.statusMessage=this.getElementBySelector('.tab-dialog-status-msg');this.dialogActionArea=this.getElementBySelector('.tab-dialog-actions-top-spacing')});var kv=global.tab.RenameFieldKeyboardShortcut=ss.mkType(a,'tab.RenameFieldKeyboardShortcut',function(nk){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=nk},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['F2',null].concat(null))},isAllowed:function(nk){var nl=$(nk.target);var nm=nl.is('body')||nl.hasClass('tab-schema-field-label');return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,nk)&&this.$0.get_selectedFields().length===1&&this.$0.get_selectedFields()[0].get_isColumn()&&!this.$0.get_selectedFields()[0].get_isGenerated()&&nm},executeShortcut:function(nk){var nl=this.$0.get_selectedFields()[0];kp.handleRenameField(nl)},getTelemetryKey:function(){return'Rename Field'}});var kw=global.tab.RenameSheetDialog=ss.mkType(a,'tab.RenameSheetDialog',function(nk,nl,nm){this.$O=null;this.$N=null;this.$P=null;this.$Q=null;this.$R=null;this.$K=false;spiff.ModalDialog.$ctor1.call(this,nk,$(kw.renameTemplate));this.$O=nk;this.$N=nl;this.$P=nm;this.set_closeButtonVisible(false);this.set_titleUnescaped(tab.Strings.AuthRenameSheet);this.$J();this.$Q=this.get_body().find('.newSheetName');this.$Q.val(this.$O);this.$Q.on('change keyup paste',ss.mkdel(this,function(nn){window.setTimeout(ss.mkdel(this,function(){var no=this.$Q.val();this.$K=!tab.SheetClientCommands.validateNewSheetName(nk,no.trim(),nl);this.$J()}),50)}));this.$Q.keydown(ss.mkdel(this,function(nn){if(nn.which===13){this.handleRename()}}));this.$R=this.get_body().find('.tab-dialog-status-msg');this.$R.hide();this.set_setFocusOnShow(false)},{$L:function(){return(ss.isValue(this.$R)?this.$R.text():null)},$M:function(nk){this.$R.text(nk);if(ss.isNullOrUndefined(nk)){this.$R.hide()}else{this.$R.show()}},$J:function(){var nk=this.element.find('.tab-dialog-actions-top-spacing').get(0);if(ss.isNullOrUndefined(nk)){return}var nl={handleClick:ss.mkdel(this,function(nn){this.handleCancel()}),buttonType:3,testId:'cancel',key:'cancelSheetRename',children:tab.Strings.DialogButtonCancel};var nm={handleClick:ss.mkdel(this,function(nn){this.handleRename()}),buttonType:2,testId:'commit',key:'commitSheetRename',children:tab.Strings.DialogButtonOK,style:{marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.$K};ReactDOM.render(spiff.DOMElements.div({key:'buttons',style:{display:'flex',justifyContent:'flex-end'}},React.createElement(SharedWidgets.ButtonWidget,nl),React.createElement(SharedWidgets.ButtonWidget,nm)),nk)},handleRename:function(){var nk=this.$Q.val();if(!tab.SheetClientCommands.tryRenameSheet(this.$O,nk,this.$N)){this.$M(tab.Strings.AuthRenameSheetError);this.$K=true;this.$J()}else{this.$M(null);if(!ss.staticEquals(this.$P,null)){this.$P()}this.closeAndDispose()}},handleCancel:function(){this.closeAndDispose()},show:function(){spiff.Dialog.prototype.show.call(this);this.$Q.select();if(!BrowserSupport.BrowserSupport.IsTouch()){this.$Q.focus()}}},{new$1:function(nk,nl,nm){return new kw(nk,nl,nm)}});var kx=global.tab.ReplaceZoneEventData=ss.mkType(a,'tab.ReplaceZoneEventData',function(){this.currentZoneType=null;this.newZoneType=null;this.isFloating=false;this.currentDeviceLayout=null;this.numOfZonesInDashboard=0;this.isSheetHidden=false});var ky=global.tab.ReplaceZoneTelemetry=ss.mkType(a,'tab.ReplaceZoneTelemetry',null,null,{logReplaceZoneEvent:function(nk){ky.$1('DashboardAuthoring_ReplaceZone',ky.$0(nk))},$0:function(nk){var nl={};nl['CurrentZoneType']=(ss.isNullOrUndefined(nk.currentZoneType)?'':nk.currentZoneType.toString());nl['NewZoneType']=(ss.isNullOrUndefined(nk.newZoneType)?'':nk.newZoneType.toString());nl['IsFloatingZone']=nk.isFloating;nl['DeviceLayoutType']=(ss.isNullOrUndefined(nk.currentDeviceLayout)?'':nk.currentDeviceLayout.toString());nl['NumOfZonesInDashboard']=nk.numOfZonesInDashboard;nl['IsSheetHidden']=nk.isSheetHidden;return nl},$1:function(nk,nl){tab.OnlineAnalyticsClient.logEvent(nk,nl)}});var kz=global.tab.ResizablePaneComponent=ss.mkType(a,'tab.ResizablePaneComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=[];for(var nl=0;nl<this.props.sections.length;nl++){this.props.sections[nl].renderScrollHandlers=this.props.renderScrollHandlers;nk.push(kB.create(this.props.sections[nl]));if(nl<this.props.sections.length-1){nk.push(lb.create({resizerIndex:nl,dragInstanceFactory:this.props.dragInstanceFactory,key:'section-resizer-'+nl}))}}var nm=spiff.DOMElements.div({ref:this.props.onPaneMountOrUnmount,className:'resizable-pane',key:'resizable-pane-component'},nk);return spiff.DOMElements.div({className:(this.props.isFlexibleLayoutEnabled?['resizable-pane-container','resizable-pane-container-flexible'].join(' '):'resizable-pane-container'),key:'resizable-pane-container'},nm)}},{create:function(nk){return React.createElement(kz,nk)}});var kA=global.tab.ResizablePaneViewModel=ss.mkType(a,'tab.ResizablePaneViewModel',function(){kA.$ctor1.call(this,[],new(ss.makeGenericType(tab.ModelHolder$1,[tab.DashboardModel])))},{createInitialProps:function(){return{onPaneMountOrUnmount:ss.mkdel(this,this.$9),dragInstanceFactory:ss.mkdel(this,this.$6)}},createUpdatedProps:function(){return{sections:this.$j.map(ss.mkdel(this,this.$c)),isFlexibleLayoutEnabled:(ss.isValue(this.$g.get_model())?this.$g.get_model().get_isFlexibleLayoutEnabled():false)}},$3:function(nk){this.disposables.add$1(this.addChildViewModel(nk.sectionContentProvider));this.$j.push({sizePercent:nk.initialSizePercent,resizableSectionMetadata:nk})},$b:function(nk,nl){this.$i[nk]=nl},$9:function(nk){this.$h=nk},$c:function(nk){var nl=nk.resizableSectionMetadata.sectionContentProvider.get_props();return $.extend({},this.$f,{sizePercent:nk.sizePercent,sectionKey:nk.resizableSectionMetadata.sectionKey,sectionContentProps:nl,key:'resizable-'+nk.resizableSectionMetadata.sectionKey})},$a:function(nk,nl){var nm=this.$7(nk);var nn=nk;var no=[];var np=nl-nm;if(np>0){no=kA.$0(this.$j,nk+1)}else if(np<0){nn=nk+1;no=kA.$1(this.$j,nk)}var nq=this.$e(no,Math.abs(np));this.$j[nn].sizePercent+=nq;this.$d();this.incrementProps()},$e:function(nk,nl){var nm=0;var nn=ss.getEnumerator(nk);try{while(nn.moveNext()){var no=nn.current();var np=no.sizePercent;var nq=no.resizableSectionMetadata.minSize;var nr=this.$5(nq);if(np>nr){var ns=this.$4(no,nl);var nt=no.sizePercent-ns;nm+=nt;no.sizePercent=ns;nl-=nt;if(nl<=0){break}}}}finally{nn.dispose()}return nm},$4:function(nk,nl){var nm=nk.resizableSectionMetadata.minSize;var nn=this.$5(nm);var no=nk.sizePercent-nn;var np=nn;if(nl<no){np=nk.sizePercent-nl}return np},$7:function(nk){var nl=0;for(var nm=0;nm<=nk;nm++){nl+=this.$j[nm].sizePercent}return nl},$5:function(nk){var nl=this.$8(this.$h);return ss.idiv(100*nk,nl)},$d:function(){var nk=_.reduce(this.$j,function(nn,no){return nn+no.sizePercent},0);for(var nl=0;nl<this.$j.length;nl++){var nm=this.$j[nl];nm.sizePercent=ss.idiv(100*nm.sizePercent,nk)}},$8:function(nk){var nl=$(nk);return ss.round(nl.height())},$6:function(nk,nl){return new spiff.MoveDragInstance.$ctor1($(nk),ss.mkdel(this,function(nm){var nn=tab.DomUtil.getPageOffset$1($(this.$h));var no=ss.round(nm.pageY-nn.top);this.$a(nl,this.$5(no))}),function(nm){},function(){},null)}},{$ctor1:function(nk,nl){this.$i=null;this.$j=null;this.$f=null;this.$g=null;this.$h=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$f={onMountOrUnmount:ss.mkdel(this,this.$b)};this.$j=[];this.$i={};this.$g=nl;for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];this.$3(nn)}},$1:function(nk,nl){return new ss.IteratorBlockEnumerable(function(){return(function(nk,nl){var nm,nn=0,no;return new ss.IteratorBlockEnumerator(function(){$sm1:for(;;){switch(nn){case 0:{nn=-1;no=nl;nn=1;continue $sm1}case 1:{nn=-1;if(!(no>=0)){nn=-1;break $sm1}nm=nk[no];nn=2;return true}case 2:{nn=-1;no--;nn=1;continue $sm1}default:{break $sm1}}}return false},function(){return nm},null,this)}).call(this,nk,nl)},this)},$0:function(nk,nl){return new ss.IteratorBlockEnumerable(function(){return(function(nk,nl){var nm,nn=0,no;return new ss.IteratorBlockEnumerator(function(){$sm1:for(;;){switch(nn){case 0:{nn=-1;no=nl;nn=1;continue $sm1}case 1:{nn=-1;if(!(no<nk.length)){nn=-1;break $sm1}nm=nk[no];nn=2;return true}case 2:{nn=-1;no++;nn=1;continue $sm1}default:{break $sm1}}}return false},function(){return nm},null,this)}).call(this,nk,nl)},this)}});var kB=global.tab.ResizableSectionComponent=ss.mkType(a,'tab.ResizableSectionComponent',function(nk,nl){this.$1=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$1=ss.mkdel(this,function(nm){this.props.onMountOrUnmount(this.props.sectionKey,nm)})},{render:function(){return spiff.DOMElements.div({ref:this.$1,className:'resizable-section',style:{flexBasis:this.props.sizePercent+'%'}},this.props.renderScrollHandlers(2,this.props.sectionContentProps.sectionContentClass,this.props.sizePercent),this.$0(),this.props.renderScrollHandlers(3,this.props.sectionContentProps.sectionContentClass,this.props.sizePercent))},$0:function(){var nk=spiff.DOMElements.div({className:'resizable-section-content'+' '+this.props.sectionContentProps.sectionContentClass,key:'resizable-'+this.props.sectionKey+'-content'},this.props.sectionContentProps.children);if(tab.FeatureFlags.isEnabled('LayoutTreeDragDrop')){var nl=spiff.DOMElements.div({className:'resizable-content-container'},this.props.renderScrollHandlers(0,this.props.sectionContentProps.sectionContentClass,-1),nk,this.props.renderScrollHandlers(1,this.props.sectionContentProps.sectionContentClass,-1));return nl}return nk}},{create:function(nk){return React.createElement(kB,nk)}});var kC=global.tab.ResizableSectionMetadata=ss.mkType(a,'tab.ResizableSectionMetadata',function(){this.sectionKey=null;this.sectionContentProvider=null;this.minSize=0;this.initialSizePercent=0});var kD=global.tab.ResizableSectionViewModel$3=ss.mkType(a,'tab.ResizableSectionViewModel$3',function(nk,nl,nm){var nn=ss.registerGenericClassInstance(kD,[nk,nl,nm],function(no,np){this.$4=null;this.$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=no;this.$3=np;this.disposables.add$1(this.addChildViewModel(np))},{createInitialProps:function(){return{sectionContentClass:this.$4}},createUpdatedProps:function(){return{children:React.createElement(nk,this.$3.get_props())}}},null,function(){return ss.makeGenericType(spiff.BaseReactViewModel$1,[Object])},function(){return[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]});return nn});ss.initGenericClass(kD,3);var kE=global.tab.ResizeFeedbackComponent=ss.mkType(a,'tab.ResizeFeedbackComponent',function(nk,nl){React.Component.call(this,nk,nl)},{render:function(){if(ss.isNullOrUndefined(this.props.edge)){return null}var nk=[];var nl=this.props.splitOnEdgeSnap&&ss.isValue(this.props.container)&&ss.isValue(this.props.currentSnapPoint)&&this.props.currentSnapPoint.zoneEdgeMoveType==='edge-snap-align';if(nl){if(ss.isValue(this.props.container)){ss.arrayAddRange(nk,this.$2())}}else{nk.push(this.$0());if(ss.isValue(this.props.container)){nk.push(spiff.DOMElements.rect({x:this.props.container.x,y:this.props.container.y,width:this.props.container.w,height:this.props.container.h,className:'tab-dashContainerGuideBorder',key:'container feedback'}))}}if(ss.isValue(this.props.snapPoints)){ss.arrayAddRange(nk,this.props.snapPoints.map(ss.mkdel(this,this.$1)))}var nm=this.props.dashboardGeometry();return spiff.DOMElements.svg({width:nm.w,height:nm.h,className:'tab-dashDropTargetContainer'},nk)},$2:function(){var nk=[];var nl=this.props.container.x;var nm=this.props.container.y;var nn=nl+this.props.container.w;var no=nm+this.props.container.h;var np,nq,nr,ns;if(this.props.dragHorz){np=this.props.currentSnapPoint.snapLocation-2;nq=no;nr=this.props.currentSnapPoint.snapLocation+2;ns=nm}else{np=nn;nq=this.props.currentSnapPoint.snapLocation-2;nr=nl;ns=this.props.currentSnapPoint.snapLocation+2}nk.push(spiff.DOMElements.rect({x:nl,y:nm,width:np-nl,height:nq-nm,className:'tab-dashContainerGuideBorder',key:'split container 1 feedback'}));nk.push(spiff.DOMElements.rect({x:nr,y:ns,width:nn-nr,height:no-ns,className:'tab-dashContainerGuideBorder',key:'split container 2 feedback'}));return nk},$0:function(){if(this.props.dragHorz){return spiff.DOMElements.line({x1:this.props.position,y1:this.props.edge.y,x2:this.props.position,y2:this.props.edge.y+this.props.edge.h,className:'tab-dashZoneEdgeResizer',key:'edge feedback'})}return spiff.DOMElements.line({x1:this.props.edge.x,y1:this.props.position,x2:this.props.edge.x+this.props.edge.w,y2:this.props.position,className:'tab-dashZoneEdgeResizer',key:'edge feedback'})},$1:function(nk){if(nk.zoneEdgeMoveType!=='edge-snap-align'){return null}var nl='';var nm=[];switch(nk.zoneSide){case'left':{var nn=this.props.edge.x;var no=nk.snapLocation;nl='tab-snapPointLeft';nm.push({x:nn-5,y:no-5});nm.push({x:nn,y:no});nm.push({x:nn-5,y:no+5});break}case'top':{var np=nk.snapLocation;var nq=this.props.edge.y;nl='tab-snapPointTop';nm.push({x:np-5,y:nq-5});nm.push({x:np,y:nq});nm.push({x:np+5,y:nq-5});break}case'right':{var nr=this.props.edge.x+this.props.edge.w;var ns=nk.snapLocation;nl='tab-snapPointRight';nm.push({x:nr+5,y:ns-5});nm.push({x:nr,y:ns});nm.push({x:nr+5,y:ns+5});break}case'bottom':{var nt=nk.snapLocation;var nu=this.props.edge.y+this.props.edge.h;nl='tab-snapPointBottom';nm.push({x:nt-5,y:nu+5});nm.push({x:nt,y:nu});nm.push({x:nt+5,y:nu+5});break}}var nv=nm.map(function(nw){return ss.formatString('{0},{1}',nw.x,nw.y)}).join(' ');return spiff.DOMElements.polygon({className:'tab-snapPointIndicator'+' '+nl,points:nv,key:nv})}});var kF=global.tab.ResizeSelectedZoneShortcut=ss.mkType(a,'tab.ResizeSelectedZoneShortcut',function(nk,nl){this.$0=null;this.$1=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=nk;this.$1=nl},{getKeyComboOrKeyCombos:function(){return new KeyboardShortcuts.KeyCombos(kF.$0('ArrowLeft'),kF.$0('ArrowRight'),kF.$0('ArrowUp'),kF.$0('ArrowDown'))},isAllowed:function(nk){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,nk)&&this.$0()},executeShortcut:function(nk){var nl=(nk.shiftKey?10:1);if(kF.$1(nk,'ArrowRight')){this.$1(0,nl)}else if(kF.$1(nk,'ArrowLeft')){this.$1(0,-nl)}else if(kF.$1(nk,'ArrowDown')){this.$1(nl,0)}else if(kF.$1(nk,'ArrowUp')){this.$1(-nl,0)}else{}},getTelemetryKey:function(){return'Resize Selected Zone'}},{$0:function(nk){var nl=new Object;nl.alt='required';nl.shift='optional';return new KeyboardShortcuts.KeyCombo(nk,nl)},$1:function(nk,nl){return ss.staticEquals(KeyboardShortcuts.KeyboardUtilities.NormalizeKey(nk.key),nl)}});var kG=global.tab.RestartEveryComboBoxUpdater=ss.mkType(a,'tab.RestartEveryComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.specialCaption=null;this.specialValue=null;this.isSelectionInvalid=false},{update:function(nk){this.$0();var nl=[];nl.push(new spiff.ComboBoxItem(null,this.specialCaption,this.specialValue,null,null));var nm=nl;for(var nn=0,no=this.fieldNames.length;nn<no;nn++){nm.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nn],this.fieldNames[nn],null,null))}nk.setItems(nm);if(this.isSelectionInvalid){nk.set_selectedItem(new spiff.ComboBoxItem(null,tab.Strings.TableCalcInvalidRestartEveryField,null,null,null))}else{nk.set_selectedItem(nk.get_items()[this.selectionIndex+1])}nk.set_isSelectionInvalid(this.isSelectionInvalid);nk.set_enabled(true)},$0:function(){tab.Param.verifyValue(this.fieldNames,'FieldNames');tab.Param.verifyValue(this.fieldCaptions,'FieldCaptions');tab.Param.verifyValue(this.selectionIndex,'SelectionIndex');tab.Param.verifyValue(this.specialCaption,'SpecialCaption');tab.Param.verifyValue(this.specialValue,'SpecialValue')}});var kH=global.tab.SaveAsCommand=ss.mkType(a,'tab.SaveAsCommand',function(){tab.SaveAsCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveAsEnabled()},do$1:function(){if(tab.SavingUtil.isSaveAsEnabled()){tab.SavingUtil.saveWorkbookAs(function(nk){cd.get_instance().onPublishSuccess()},null)}else{tab.NotificationViewModel.showNotification(tab.Strings.SaveAsFailedMessage,null)}}});var kI=global.tab.SaveCommand=ss.mkType(a,'tab.SaveCommand',function(){tab.SaveCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveEnabled()},do$1:function(){tab.SavingUtil.saveWorkbook(function(nk){cd.get_instance().onPublishSuccess()},null)}});var kJ=global.tab.SaveDatasourceComponent=ss.mkType(a,'tab.SaveDatasourceComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){return(this.props.dialogIsVisible?this.$4():spiff.ReactElement.div$1('tab-saveDatasourceHidden',[]))},$4:function(){return React.createElement(SharedWidgets.DialogWidget,this.$0(),spiff.ReactElement.div$1('tab-saveDatasourceContainer',[tab.Strings.TabAuthSaveDatasourceConfirmMsg(this.props.datasourceCaption),spiff.ReactElement.div$1('tab-saveDatasourceCheckbox',[(tab.FeatureFlags.isEnabled('EditPublishedDataSource')?React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.$1()):null),React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.$2())])]))},$2:function(){return{label:tab.Strings.TabAuthSaveDatasourceReplaceCheckboxLabel,checked:this.props.replaceCheckboxState,handleChange:this.props.onReplaceCheckboxClicked,testId:'replace-ds-after-save'}},$1:function(){return{label:tab.Strings.TabAuthSaveDatasourceOverwriteCheckboxLabel,checked:this.props.overwriteDSCheckboxState,handleChange:this.props.onOverwriteDSCheckboxClicked,testId:'overwrite-published-ds'}},$3:function(){var nk={buttons:[],testId:'DialogButtons'};nk.buttons.push({handleClick:ss.mkdel(this,function(nl){this.props.onSaveConfirm()}),buttonType:5,testId:'YesBtn',children:tab.Strings.DialogYesButtonText});nk.buttons.push({handleClick:ss.mkdel(this,function(nl){this.props.onSaveDecline()}),buttonType:3,testId:'NoBtn',children:tab.Strings.DialogNoButtonText});return React.createElement(SharedWidgets.DialogFooterButtonsWidget,nk)},$0:function(){var nk={dialogWidth:400,testId:'Save-Datasource-Dialog',isModal:true,type:0,showCloseButton:true,title:tab.Strings.TabAuthSaveDatasourceDialogTitle,positioningBehavior:2,zIndex:1000,onCloseRequest:this.props.onSaveDecline,footerContent:this.$3(),showFooter:true};if(ss.isValue(this.props.dialogStackingRootId)){nk.stackingRootId=this.props.dialogStackingRootId}return nk}});var kK=global.tab.SaveDatasourceDialogViewModel=ss.mkType(a,'tab.SaveDatasourceDialogViewModel',function(nk){this.$j=null;this.$l=true;this.$k=false;this.$i=true;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$j=nk;nk.add_modelUpdated(ss.mkdel(this,this.$3));this.disposables.add(ss.mkdel(nk,nk.detachNotifications));this.disposables.add(ss.mkdel(this,function(){nk.remove_modelUpdated(ss.mkdel(this,this.$3))}))},{get_datasourceId:function(){return this.$j.get_datasourceId()},get_datasourceCaption:function(){return this.$j.get_datasourceCaption()},$c:function(){return this.$i},$d:function(nk){this.$i=nk;this.incrementProps()},$g:function(){return this.$l},$h:function(nk){this.$l=nk;this.incrementProps()},$e:function(){return this.$k},$f:function(nk){this.$k=nk;this.incrementProps()},createInitialProps:function(){return{datasourceCaption:this.get_datasourceCaption(),onSaveConfirm:ss.mkdel(this,this.$a),onSaveDecline:ss.mkdel(this,function(){_.defer(ss.mkdel(this,this.dispose))}),onReplaceCheckboxClicked:ss.mkdel(this,this.$9),replaceCheckboxState:this.$g(),overwriteDSCheckboxState:this.$e(),onOverwriteDSCheckboxClicked:ss.mkdel(this,this.$8),dialogIsVisible:this.$c()}},createUpdatedProps:function(){return{datasourceCaption:this.get_datasourceCaption(),replaceCheckboxState:this.$g(),overwriteDSCheckboxState:this.$e(),dialogIsVisible:this.$c()}},$3:function(){this.incrementProps()},$9:function(nk){this.$h(nk)},$8:function(nk){this.$f(nk)},$a:function(){this.$d(false);tab.LegacySessionWaitHandler.incrementWait(true,true);tab.SaveServerCommands.SaveDatasource(this.get_datasourceId(),this.get_datasourceCaption(),!this.$e(),tsConfig.current_project_id,ss.mkdel(this,this.$7),ss.mkdel(this,this.$6))},$6:function(nk){tab.Application.get_commonDialogProvider().ShowErrorDialog(nk.message,tab.Strings.TabAuthSaveDatasourceErrorDialogTitle,null);_.defer(ss.mkdel(this,this.dispose));tab.LegacySessionWaitHandler.decrementWait()},$7:function(nk){if(this.$g()){var nl=new tab.ReplaceDataSourceWithDataServerDataSourceServerCmd;nl.c['datasource']=this.get_datasourceId();nl.c['repositoryUrl']=nk.datasource.repositoryUrl;nl.c['datasourceDatabaseName']=nk.datasource.name;nl.set_uiBlocking('immediately');var nm=nl;nm.invoke().then(ss.mkdel(this,this.$5),ss.mkdel(this,this.$4))}else{this.$b(tab.Strings.TabAuthSaveDatasourceSuccessMessage,tab.Strings.TabAuthSaveDatasourceSuccessDialogTitle)}tab.LegacySessionWaitHandler.decrementWait()},$5:function(nk){this.$b(tab.Strings.TabAuthSaveDatasourceReplacedSuccessMessage,tab.Strings.TabAuthSaveDatasourceReplacedSuccessTitle)},$4:function(nk){this.$b(tab.Strings.TabAuthSaveDatasourceNotReplacedSuccessMessage(this.get_datasourceCaption()),tab.Strings.TabAuthSaveDatasourceNotReplacedSuccessTitle)},$b:function(nk,nl){tab.Application.get_commonDialogProvider().showAlertDialog(nk,nl);_.defer(ss.mkdel(this,this.dispose))}});var kL=global.tab.SaveDatasourceProxy=ss.mkType(a,'tab.SaveDatasourceProxy',null,null,{launchDialog:function(){if(!tsConfig.allow_save_data_source){tab.Application.get_commonDialogProvider().showAlertDialog(tab.Strings.CannotSaveDataSourcePersonalSpaceContent,tab.Strings.CannotSaveDataSourcePersonalSpaceTitle);return null}var nk=new tab.SaveDatasourceDialogModel;var nl=new kK(nk);var nm=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[kK,kJ,Object])).call(null,[nl]);nm.get_rootElement()[0].id='saveDSDialog';nm.addToDom($(document.body));return nk}});var kM=global.tab.SaveGoneDialog=ss.mkType(a,'tab.SaveGoneDialog',function(){this.$3=null;this.$2=null;tab.BaseDisposableDialog.call(this)},{$1:function(){if(ss.isNullOrUndefined(kM.$1)){this.$3=new kI;this.$2=new kH;this.parentNode=document.createElement('div');var nk=tab.VizUriModel.createForCurrentWindowLocation(null).get_isAuthorNewWorkbookUri();var nl=(nk?cd.get_instance().get_willAutoSaveEnableOnPublish():cd.get_instance().get_autoSaveEnabled());var nm=((nk||!nl)?tab.Strings.AuthSaveGoneDialogContentExplainPublish:tab.Strings.AuthSaveGoneDialogContentAutosaveOn);var nn=((nk&&nl)?tab.Strings.AuthSaveGoneDialogContentNotPublished:null);var no=this.$3.get_isEnabled()||this.$2.get_isEnabled();var np={title:((nk||!nl)?tab.Strings.AuthSaveGoneDialogTitleBefore:tab.Strings.AuthSaveGoneDialogTitleAfter),secondaryChoiceAction:ss.mkdel(this,this.$0),secondaryChoiceButtonString:(no?tab.Strings.AuthAutoSaveWarningDialogCancel:tab.Strings.DialogButtonOK),primaryChoiceButtonIsAvailable:no,doPrimaryActionOnCloseRequest:false,primaryChoiceButtonString:tab.Strings.AuthAutoSaveWarningDialogPublishButton,primaryChoiceAction:ss.mkdel(this,function(){if(this.$3.get_isEnabled()){this.$3.invoke().done(ss.mkdel(this,this.$0))}else{this.$2.invoke().done(ss.mkdel(this,this.$0))}}),firstMessage:nm,secondMessage:nn,learnMoreToken:(nl?'server-autosave-publish':null),dialogWidth:400};kM.$1=React.createElement(ce,np);ReactDOM.render(kM.$1,this.parentNode)}},$0:function(){kM.$1=null;_.defer(ss.mkdel(this,this.dispose))}},{showSaveGoneDialog:function(){(new kM).$1()}});var kN=global.tab.SaveOrSaveAsCommand=ss.mkType(a,'tab.SaveOrSaveAsCommand',function(){tab.SaveOrSaveAsCmd.call(this)},{get_isEnabled:function(){return tab.SavingUtil.isSaveEnabled()||tab.SavingUtil.isSaveAsEnabled()},do$1:function(){if(tab.SavingUtil.isSaveEnabled()){tab.SavingUtil.saveWorkbook(null,null)}else if(tab.SavingUtil.isSaveAsEnabled()){tab.SavingUtil.saveWorkbookAs(null,null)}else{tab.NotificationViewModel.showNotification(tab.Strings.SaveAsFailedMessage,null)}}});var kO=global.tab.SchemaNode=ss.mkType(a,'tab.SchemaNode',function(nk,nl){this.canHaveChildren=false;this.children=[];this.numNodesIfTopLevelExpanded=0;this.childToSelect=null;this.dataSourceName=null;this.fieldIconResource=null;this.fieldType=null;this.globalFieldName=null;this.hasFilteredChildren=false;this.instanceType=null;this.isCalculated=false;this.isCustomCalculation=false;this.isColumn=false;this.isCubeFolder=false;this.isDerived=false;this.isLayered=false;this.isDraggable=false;this.isDrillPath=false;this.isFolder=false;this.isGenerated=false;this.isGroup=false;this.isHidden=false;this.isInvalid=false;this.isObject=false;this.isTableType=false;this.isOrphaned=false;this.isAutoHidden=false;this.isHierarchy=false;this.isHierarchyRoot=false;this.isMeasureNamesOrValues=false;this.isSelectable=false;this.hasContextMenu=false;this.isUnsortedContainer=false;this.hierarchyName=null;this.localName=null;this.ordinal=0;this.tooltip=null;this.userDescription=null;this.displayName=null;this.schemaViewerDisplayName=null;this.role=null;this.schemaSection=0;this.section=null;this.schemaSection=nl;if(ss.isValue(nk)){this.canHaveChildren=nk.get_canHaveChildren();if(ss.isValue(nk.get_childToSelect())){this.childToSelect=nk.get_childToSelect().get_globalName()}this.dataSourceName=nk.get_dataSourceName();this.displayName=nk.get_displayName();this.schemaViewerDisplayName=nk.get_schemaViewerDisplayName();this.fieldIconResource=nk.get_fieldIconResource();this.fieldType=nk.get_defaultFieldType();this.globalFieldName=nk.get_globalName();this.instanceType=nk.get_instanceType();this.isCalculated=nk.get_isColumn()&&nk.asColumn().get_isCalculated();this.isCustomCalculation=nk.get_isColumn()&&nk.asColumn().get_isCustomCalculation();this.isColumn=nk.get_isColumn();this.isCubeFolder=nk.get_isCubeFolder();this.isDerived=nk.get_isDerived();this.isLayered=nk.get_isLayered();this.isDraggable=nk.get_isDraggable();this.isDrillPath=nk.get_isDrillPath();this.isFolder=nk.get_isFolder()||nk.get_isFolderNew();this.isGenerated=nk.get_isGenerated();this.isGroup=nk.get_isGroup();this.isHidden=nk.get_isHidden();this.isInvalid=nk.get_isInvalid();this.isObject=nk.get_isObject();this.isTableType=nk.get_isTableType();this.isOrphaned=nk.get_isOrphaned();this.isAutoHidden=nk.get_isAutoHidden();if(nk.get_isCubeDimension()||nk.get_isCubeBaseDimension()){this.isHierarchyRoot=true}if(nk.get_isDrillPath()||nk.get_isCubeHierarchy()||nk.get_isCubeDimension()||nk.get_isCubeStandardDimension()){this.isHierarchy=true;this.hierarchyName=nk.get_displayName()}this.isMeasureNamesOrValues=nk.get_isMeasureNamesOrValues();this.isSelectable=nk.get_isSelectable();this.hasContextMenu=nk.get_isSelectable()||nk.get_isFolder()||nk.get_isObject();this.isUnsortedContainer=nk.get_isUnsortedContainer();this.localName=nk.get_localName();this.ordinal=nk.get_ordinal();this.tooltip=nk.get_tooltip();this.userDescription=nk.get_userDescription();this.role=nk.get_defaultRole()}else{this.isHidden=true}},{get_comparisonKey:function(){return this.dataSourceName+this.localName+ss.coalesce(this.section,'')},find:function(nk){var nl=new Array;nl.push(this);while(nl.length>0){var nm=nl.shift();if(ss.referenceEquals(nm.globalFieldName,nk)){return nm}for(var nn=0;nn<nm.children.length;nn++){var no=nm.children[nn];nl.push(no)}}return null},findPath:function(nk){var nl=new Array;nl.push(new kQ(null,this));while(nl.length>0){var nm=nl.shift();if(ss.referenceEquals(nm.get_node().globalFieldName,nk)){return nm}var nn=nm.get_node().children;for(var no=0;no<nn.length;no++){var np=nn[no];nl.push(nm.createChildPath(np))}}return null},equals$1:function(nk){return ss.referenceEquals(this.globalFieldName,nk.globalFieldName)&&ss.referenceEquals(this.localName,nk.localName)&&this.section===nk.section}});var kP=global.tab.SchemaNodeFactory=ss.mkType(a,'tab.SchemaNodeFactory',null,null,{create:function(nk,nl,nm,nn,no){var np=[];var nq=nk.showHiddenFields;var nr=0;nm=kZ.filterFieldsForViewing(nm,nq);for(var ns=0;ns<nm.length;ns++){var nt=nm[ns];if(nt.get_isCubeBaseDimension()&&nt.asCubeBaseDimension().get_dimensionIsEffectivelyEmpty()){continue}var nu=new kO(nt,nl);switch(nt.get_instanceType()){case'drillPath':{var nv=nt.asDrillPath().get_levels();nv=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nv),nq));for(var nw=0;nw<nv.length;nw++){var nx=nv[nw];var ny=new kO(nx,nl);nu.children.push(ny)}break}case'folderNew':{kP.$6(nt.asFolderNew(),nu,nq);break}case'fieldContainer':{kP.$5(nt.asFieldContainer(),nu,nq);break}case'relationalTable':{var nz=nt.asRelationalTable().get_columns();nz=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nz),nq));if(nz.length===0){continue}for(var nA=0;nA<nz.length;nA++){var nB=nz[nA];var nC=new kO(nB,nl);nu.children.push(nC)}break}case'cubeFolder':{var nD=nt.asCubeFolder();kP.$2(nu,nD,nn,nq);break}case'cubeStandardDimension':{var nE=nt.asCubeStandardDimension();kP.$c(nu,nE,nn,nq);break}case'cubeAttributeDimension':{var nF=nt.asCubeAttributeDimension();kP.$0(nu,nF,nn,nq);break}case'structuredMeasure':{var nG=nt.asStructuredMeasure();kP.$d(nG,nu,nq);break}case'column':case'cubeDimension':case'group':case'cubeHierarchy':case'folder':case'multiple':case'level':default:{break}}nr+=nu.children.length+1;if(ss.isValue(no)){var nH=kP.$f(nu,no);if(nH){np.push(nu)}}else{np.push(nu)}}var nI=new kO(null,nl);nI.numNodesIfTopLevelExpanded=nr;ss.arrayAddRange(nI.children,np);return nI},$f:function(nk,nl){var nm=kP.$i(nk,nl);var nn=[];var no=false;for(var np=0;np<nk.children.length;np++){var nq=nk.children[np];if(nk.isObject&&nq.isTableType){if(!kP.$i(nq,nl)){nn.push(nq)}else if(!nm){no=true}continue}var nr=kP.$f(nq,nl);if(nr){no=true}else{nn.push(nq)}}if(tab.FeatureFlags.isEnabled('SchemaViewerObjectModelSearch')){if(no){kP.$g(nk,nn)}}else{kP.$g(nk,nn)}return no||nm},$g:function(nk,nl){nk.hasFilteredChildren=true;for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];ss.remove(nk.children,nn)}},$i:function(nk,nl){if(kP.$l(nk,nl.filterType)){return kP.$j(nk,nl)}return kP.$k(nk.displayName,nl.fullSearchString)},$j:function(nk,nl){if(nl.filterType==='comment'){return tab.FeatureFlags.isEnabled('SchemaViewerSearchDescriptionOperator')&&kP.$h(nk.userDescription,nl.parsedSearchString)||kP.$k(nk.displayName,nl.fullSearchString)}return kP.$k(nk.displayName,nl.parsedSearchString)},$l:function(nk,nl){if(nk.schemaSection===3){return'comment'===nl}switch(nl){case'calculation':{return nk.isCustomCalculation}case'dimension':{return nk.role==='dimension'}case'measure':{return nk.role==='measure'}case'comment':{return tab.FeatureFlags.isEnabled('SchemaViewerSearchDescriptionOperator')}default:{return false}}},$h:function(nk,nl){return!tab.MiscUtil.isNullOrEmpty$1(nk)&&nk.toLowerCase().indexOf(nl)!==-1},$k:function(nk,nl){return nk.toLowerCase().indexOf(nl)!==-1},$m:function(nk){return function(nl){return nl}},$n:function(nk){return function(nl){return nl}},$3:function(nk,nl,nm,nn){var no=nl.get_cubeFolders();for(var np=0;np<no.length;np++){var nq=no[np];var nr=new kO(nq,nk.schemaSection);nk.children.push(nr);kP.$2(nr,nq,nm,nn)}},$2:function(nk,nl,nm,nn){var no=nl.get_hierarchies();no=kP.$n(tab.CubeHierarchyModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.CubeHierarchyModel).call(null,no),nn));for(var np=0;np<no.length;np++){var nq=no[np];kP.$7(nk,nq,nm,nn)}var nr=nl.get_columns();nr=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nr),nn));for(var ns=0;ns<nr.length;ns++){var nt=nr[ns];var nu=new kO(nt,nk.schemaSection);nk.children.push(nu)}kP.$1(nk,nl.get_hierarchies(),nn)},$9:function(nk,nl,nm,nn){if(nl.get_hasOnlyOneHierarchy()){kP.$8(nk,nl.get_defaultCubeHierarchy(),nm,nn)}else{var no=nl.get_cubeHierarchies();no=kP.$n(tab.CubeHierarchyModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.CubeHierarchyModel).call(null,no),nn));for(var np=0;np<no.length;np++){var nq=no[np];kP.$7(nk,nq,nm,nn)}}},$7:function(nk,nl,nm,nn){if(nl.get_isAttributeHierarchy()&&nl.get_levels().length===1){return}var no=new kO(nl,nk.schemaSection);nk.children.push(no);kP.$8(no,nl,nm,nn);kP.$e(no,nl,nn)},$b:function(nk,nl,nm){if(nl.get_hasOnlyOneHierarchy()){return}kP.$1(nk,nl.get_cubeHierarchies(),nm)},$1:function(nk,nl,nm){var nn=kP.$n(tab.CubeHierarchyModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.CubeHierarchyModel).call(null,nl),nm));for(var no=0;no<nn.length;no++){var np=nn[no];if(np.get_isAttributeHierarchy()&&np.get_levels().length===1){kP.$a(nk,np,nm)}}},$8:function(nk,nl,nm,nn){var no=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nl.get_levels()),nn));for(var np=0;np<no.length;np++){var nq=no[np];var nr=new kO(nq,nk.schemaSection);nk.children.push(nr);if(nq.get_isLevel()){var ns=kP.$n(tab.CubeAttributeDimensionModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.CubeAttributeDimensionModel).call(null,nq.asLevel().get_linkedAttributes()),nn));for(var nt=0;nt<ns.length;nt++){var nu=ns[nt];kP.$0(nr,nu,nm,nn)}}}},$a:function(nk,nl,nm){var nn=[];nn.push(nl);if(kZ.filterFieldsForViewing(kP.$m(tab.CubeHierarchyModel).call(null,nn),nm).length===0){return}var no=new kO(nl.get_levels()[0],nk.schemaSection);nk.children.push(no)},$e:function(nk,nl,nm){var nn=kP.$n(tab.GroupModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.GroupModel).call(null,nl.get_userDefinedAttributes()),nm));for(var no=0;no<nn.length;no++){var np=nn[no];var nq=new kO(np,nk.schemaSection);nk.children.push(nq)}},$0:function(nk,nl,nm,nn){if(nl.get_dimensionIsEffectivelyEmpty()){return}var no=nl.get_defaultCubeHierarchy();if(no.get_levels().length===1){kP.$a(nk,no,nn);return}var np=new kO(nl,nk.schemaSection);nk.children.push(np);kP.$4(np,nl,nm,nn)},$c:function(nk,nl,nm,nn){kP.$4(nk,nl,nm,nn);var no=kP.$n(tab.CubeAttributeDimensionModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.CubeAttributeDimensionModel).call(null,nl.asCubeStandardDimension().get_cubeAttributeDimensions()),nn));for(var np=0;np<no.length;np++){var nq=no[np];kP.$0(nk,nq,nm,nn)}},$4:function(nk,nl,nm,nn){if(nm.get_canUseMultipleHierarchies()){kP.$3(nk,nl,nm,nn);kP.$9(nk,nl,nm,nn);kP.$b(nk,nl,nn)}else{var no=nl.get_defaultCubeHierarchy();kP.$8(nk,no,nm,nn);kP.$e(nk,no,nn)}if(nl.get_isTimeIntelligence()){var np=nl.get_timeIntelligenceColumn();var nq=new kO(np,nk.schemaSection);nk.children.push(nq)}},$d:function(nk,nl,nm){var nn=nk.get_measures();nn=kP.$n(tab.StructuredMeasureModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.StructuredMeasureModel).call(null,nn),nm));for(var no=0;no<nn.length;no++){var np=nn[no];var nq=new kO(np,1);nl.children.push(nq);if(np.get_measures().length>0){kP.$d(np,nq,nm)}}},$5:function(nk,nl,nm){var nn=nk.get_fields();if(ss.isValue(nn)){nn=kZ.filterFieldsForViewing(nn,nm)}for(var no=0;no<nn.length;no++){var np=nn[no];var nq=new kO(np,nl.schemaSection);nl.children.push(nq);if(np.get_isDrillPath()){var nr=np.asDrillPath().get_levels();nr=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nr),nm));for(var ns=0;ns<nr.length;ns++){var nt=nr[ns];var nu=new kO(nt,nl.schemaSection);nq.children.push(nu)}}}},$6:function(nk,nl,nm){var nn=nk.get_fields();if(ss.isValue(nn)){nn=kZ.filterFieldsForViewing(nn,nm)}for(var no=0;no<nn.length;no++){var np=nn[no];var nq=new kO(np,nl.schemaSection);nl.children.push(nq);if(np.get_isDrillPath()){var nr=np.asDrillPath().get_levels();nr=kP.$n(tab.FieldColumnModel).call(null,kZ.filterFieldsForViewing(kP.$m(tab.FieldColumnModel).call(null,nr),nm));for(var ns=0;ns<nr.length;ns++){var nt=nr[ns];var nu=new kO(nt,nl.schemaSection);nq.children.push(nu)}}}}});var kQ=global.tab.SchemaNodePath=ss.mkType(a,'tab.SchemaNodePath',function(nk,nl){this.$1$1=null;this.$1$2=null;this.set_node(nl);this.set_path(nk||[])},{get_path:function(){return this.$1$1},set_path:function(nk){this.$1$1=nk},get_node:function(){return this.$1$2},set_node:function(nk){this.$1$2=nk},createChildPath:function(nk){return new kQ(this.get_path().concat(this.get_node()),nk)},forEachParentNode:function(nk){var nl=this.get_path();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];nk(nn)}},getTopmostAncestor:function(){return((this.get_path().length>1)?this.get_path()[1]:this.get_node())}});var kR=global.tab.SchemaPillDragInstance=ss.mkType(a,'tab.SchemaPillDragInstance',function(nk,nl,nm,nn){this.$5$1=null;this.$5$2=null;this.$5$3=false;this.$5$4=null;jc.call(this,nk,nm,nn,null);this.set_originalFields(nl);this.set_fieldsInfo(new fQ(nl));this.set_canDropToConvert(false);this.set_allFieldsFolderName('');if(nl.length>0){this.set_allFieldsFolderName(nl[0].get_parentFolderName());for(var no=1,np=nl.length;no<np;no++){if(!ss.referenceEquals(nl[no].get_parentFolderName(),this.get_allFieldsFolderName())){this.set_allFieldsFolderName('');break}}}},{get_originalFields:function(){return this.$5$1},set_originalFields:function(nk){this.$5$1=nk},get_fieldsInfo:function(){return this.$5$2},set_fieldsInfo:function(nk){this.$5$2=nk},get_canDropToConvert:function(){return this.$5$3},set_canDropToConvert:function(nk){this.$5$3=nk},get_allFieldsFolderName:function(){return this.$5$4},set_allFieldsFolderName:function(nk){this.$5$4=nk},updateDraggedFieldFromServer:function(nk){jc.prototype.updateDraggedFieldFromServer.call(this,nk);this.set_canDropToConvert(nk.canDropToConvert&&this.get_fieldsInfo().columnsInDrillPath!==2);if(this.drag.canAddToNewLayer){var nl=new ho;var nm=new hn(nl);nm.show()}}});var kS=global.tab.SchemaSearchComponent=ss.mkType(a,'tab.SchemaSearchComponent',function(nk){this.$n=SharedWidgets.TabStyles.Spacing.DefaultSpace+SharedWidgets.TabStyles.Spacing.SmallSpace;this.$k=null;this.$p=null;this.$j=null;this.$l=null;this.$h=null;this.$m=null;this.$i=false;this.$q={flexGrow:1,width:'100%'};this.$e={marginLeft:'3px',paddingLeft:'2px'};this.$o=spiff.DOMElements.div({key:'searchFilterIcon',className:'tabSchemaViewerFilterIcon-xsmall'});this.$f={minWidth:'22px',display:'inline-block'};this.$g={display:'inline-block'};spiff.PureRenderComponent.call(this,nk);this.state={searchText:''};if(tab.FeatureFlags.isEnabled('SchemaViewerSearchDropdown')){this.$h=this.$2()}this.$k=ss.mkdel(this,function(nl){this.$p=nl});this.$j=ss.mkdel(this,function(nl){this.$l=$(nl)})},{$2:function(){var nk=[];this.props.searchFilterHelper.forEach(ss.mkdel(this,function(nl,nm){nk.push(this.$1(nl.toUpperCase(),nm.caption,nm.value))}));return nk},$1:function(nk,nl,nm){var nn=spiff.DOMElements.div({},spiff.DOMElements.div({style:this.$f},nm),spiff.DOMElements.div({style:this.$g},nl));return{testId:'schema-search-filter-item-'+nk,content:nn,value:nm}},render:function(){if(tab.FeatureFlags.isEnabled('SchemaViewerObjectModelSearch')&&tab.FeatureFlags.isEnabled('SchemaViewerSearchDropdown')){return spiff.DOMElements.div({className:'tab-schema-search-and-filter-component',id:'schema-search-id'},React.createElement(SharedWidgets.TextFieldWidget,this.$5()),React.createElement(SharedWidgets.DropdownButton,this.$0(),this.$o),spiff.DOMElements.div({className:'vertical-separator'}))}else{return spiff.DOMElements.div({className:'tab-schema-search-component'},React.createElement(SharedWidgets.SearchFieldWidget,{handleChange:ss.mkdel(this,this.$7),testId:'Search-text-input',placeholder:tab.Strings.AuthSchemaViewerSearchPlaceholderText,text:this.state.searchText,handleCancelSearch:ss.mkdel(this,this.$6),handleEscape:ss.mkdel(this,this.$8),inputRef:function(nk){if(ss.isValue(nk)){nk.focus()}}}))}},$5:function(){return{testId:'Search-text-input',kind:'search',placeholder:tab.Strings.AuthSchemaViewerSearchPlaceholderText,onChange:ss.mkdel(this,this.$9),onClear:ss.mkdel(this,this.$a),value:this.state.searchText,style:this.$q,ref:this.$k}},$0:function(){return{'aria-controls':'schemaSearchPopupId','aria-haspopup':'listbox',testId:'schema-search-filter-button',type:3,style:this.$e,focusOnClose:false,closeOnPopupBlur:'true',onOpen:ss.mkdel(this,this.$c),onClose:ss.mkdel(this,this.$b),popupContent:this.$4(),stackingRootId:'stackToTheBodyUsingThisMagicNonExistantId',title:tab.Strings.SchemaSearchFilterTitle,zIndex:1000}},$4:function(){return spiff.DOMElements.div({id:'schemaSearchPopupId',role:'listbox',className:'tabSchemaSearchFilterPopup',ref:this.$j},spiff.DOMElements.div({className:'tabSchemaSearchFilterPopupTitle'},tab.Strings.SchemaSearchFilterTitle),React.createElement(SharedWidgets.List,this.$3()))},$3:function(){return{id:'tab-shared-widget-schemaSearchListId',items:this.$h,testId:'schema-search-filter-list',onSelect:ss.mkdel(this,this.$d),selectOnEnterKey:true}},$9:function(nk){var nl=nk.target.value;this.setState({searchText:nl});this.props.handleChange(nl)},$a:function(){this.setState({searchText:''});this.props.handleClear()},$c:function(nk,nl){this.$m=nk;var nm=nl.right-this.$n+SharedWidgets.TabStyles.Sizing.BorderWidth*2;this.$l.css('min-width',nm);var nn=this.$l.closest("div[data-tb-test-id*='DropdownOverlay-Root']");if(nn.length===1){nn.addClass('tabSchemaSearchFilterPopupRoot')}},$b:function(){if(this.$i){this.$p.focus();this.$i=false}this.$m=null},$d:function(nk){var nl=this.props.searchFilterHelper.addFilterToText(this.state.searchText,nk);this.setState({searchText:nl});this.props.handleChange(nl);this.$i=true;this.$m()},$7:function(nk,nl){this.setState({searchText:nk});if(!nl){this.props.handleChange(nk)}},$6:function(){this.setState({searchText:''});this.props.handleCancelSearch()},$8:function(){if(!ss.isNullOrEmptyString(this.state.searchText)){this.$6()}else{this.props.handleCloseRequested()}}});var kT=global.tab.SchemaSearchInfo=ss.mkType(a,'tab.SchemaSearchInfo',function(nk,nl){this.fullSearchString='';this.parsedSearchString='';this.filterType='unknown';if(ss.isValue(nk)){this.fullSearchString=nk.toLowerCase();this.parsedSearchString=nl.getSearchText(this.fullSearchString).trim();this.filterType=nl.getFilterType(nk)}});var kU=global.tab.SchemaViewerDragFeedback=ss.mkType(a,'tab.SchemaViewerDragFeedback',function(nk){this.$2=null;this.fieldDragOver=null;this.fieldDragExit=null;this.$3=null;this.$0=null;this.$1=null;this.$2=nk;this.$3=new dE;this.$0=new dD('dimensions');this.$1=new dD('measure')},{get_unnamedFieldsDropTarget:function(){return this.$3},get_dimensionsDropTarget:function(){return this.$0},get_measuresDropTarget:function(){return this.$1},createFieldDragSource:function(){var nk=ss.mkdel(this,function(){return this.$2.get_selectedFields()});var nl=ss.mkdel(this,function(){return this.$2.get_firstSelectedHierarchyName()});return new fK(nk,ss.mkdel(this.$2,this.$2.clearSelection),nl)},tryCreateFieldDropTarget:function(nk){var nl=this.$2.findFieldModel(nk);if(ss.isNullOrUndefined(nl)||nl.get_isRelationalTable()||nl.get_isObject()){return null}var nm=ss.mkdel(this,function(no,np){if(!ss.staticEquals(this.fieldDragOver,null)){this.fieldDragOver(nk,kU.$0(no),np.isCopyDrag)}});var nn=ss.mkdel(this,function(no,np){if(!ss.staticEquals(this.fieldDragExit,null)){this.fieldDragExit(nk,kU.$0(no))}});return new fL(nl,nm,nn,kU.$1)},dispose:function(){this.$3.dispose()}},{$1:function(nk,nl){var nm=ss.safeCast(nl,kR);if(ss.isNullOrUndefined(nm)){return false}var nn=nk.get_fieldsModel().get_dataSource();var no=nm.get_originalFields();var np=function(nq){if(ss.isValue(nq)){var nr=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(nq).get_simpleCommand(),false);var ns=tab.CommandUtils.createCommandRedirectSuccessHandler(null);tab.ServerCommands.executeServerCommand(nr,'immediately',ns,null)}};if(nk.get_isDrillPath()){tab.SchemaClientCommands.dropOnSchemaDrillPath(nn.get_name(),no,nk.asDrillPath(),np)}else if(tab.FeatureFlags.isEnabled('SchemaViewerEasyLODCalculation')&&nm.isCopyDrag){tab.SchemaClientCommands.dropOnSchemaFieldWithCopyDrag(nn.get_name(),no,nk,np)}else{tab.SchemaClientCommands.dropOnSchemaField(nn.get_name(),no,nk,np)}return true},dropOnSchemaSection:function(nk,nl,nm,nn){tab.SchemaClientCommands.dropOnSchemaSection(nk,nl,nm,nn,function(no){if(ss.isValue(no)){var np=tab.CommandSerializer.deserialize(tab.SimpleCommandsPresModelWrapper.create(no).get_simpleCommand(),false);tab.ServerCommands.executeServerCommand(np,'immediately',null,null)}})},createContainerSectionDropTarget:function(nk,nl,nm,nn,no){return new dA(nk,nl,nm,nn,no)},$0:function(nk){if(nk.get_isColumn()){var nl=nk.asColumn().get_baseColumn();if(nl.get_isInDrillPath()){return 3}else if(nl.get_defaultRole()==='dimension'){return 0}else if(nl.get_defaultRole()==='measure'){return 1}}else if(nk.get_isDrillPath()){return 2}return 4}});var kV=global.tab.SchemaViewerPaneType=ss.mkEnum(a,'tab.SchemaViewerPaneType',{common:0,dimensions:1,measures:2,sets:3,parameters:4});var kW=global.tab.SchemaViewerSearchFilter=ss.mkType(a,'tab.SchemaViewerSearchFilter',function(){this.$2={};this.$1=null;var nk=this.$2;var nl=new kX;nl.value='C:';nl.filterType='calculation';nl.caption=tab.Strings.SchemaSearchFilterCalculation;nk['c']=nl;var nm=this.$2;var nn=new kX;nn.value='D:';nn.filterType='dimension';nn.caption=tab.Strings.SchemaSearchFilterDimension;nm['d']=nn;var no=this.$2;var np=new kX;np.value='M:';np.filterType='measure';np.caption=tab.Strings.SchemaSearchFilterMeasure;no['m']=np;if(tab.FeatureFlags.isEnabled('SchemaViewerSearchDescriptionOperator')){var nq=this.$2;var nr=new kX;nr.value='F:';nr.filterType='comment';nr.caption=tab.Strings.SchemaSearchFilterComment;nq['f']=nr}this.$1=this.$0()},{$0:function(){var nk='';var nl=ss.getEnumerator(Object.keys(this.$2));try{while(nl.moveNext()){var nm=nl.current();nk+=nm+nm.toUpperCase()}}finally{nl.dispose()}return new RegExp('^(['+nk+']):')},forEach:function(nk){var nl=ss.getEnumerator(Object.keys(this.$2));try{while(nl.moveNext()){var nm=nl.current();nk(nm,this.$2[nm])}}finally{nl.dispose()}},getFilterType:function(nk){if(!tab.FeatureFlags.isEnabled('SchemaViewerObjectModelSearch')){return'unknown'}var nl=nk.match(this.$1);if(ss.isValue(nl)&&nl.length>1){var nm=nl[1].toLowerCase();return this.$2[nm].filterType}return'unknown'},getSearchText:function(nk){if(!tab.FeatureFlags.isEnabled('SchemaViewerObjectModelSearch')){return nk}return nk.replace(this.$1,'')},addFilterToText:function(nk,nl){if(tab.MiscUtil.isNullOrEmpty$1(nl)){return nk}return nl+' '+nk}});var kX=global.tab.SchemaViewerSearchFilter$SchemaSearchFilter=ss.mkType(a,'tab.SchemaViewerSearchFilter$SchemaSearchFilter',function(){this.value=null;this.filterType=null;this.caption=null});var kY=global.tab.SchemaViewerTemplate=ss.mkType(a,'tab.SchemaViewerTemplate',function(nk){this.sources=null;this.sourceTitles=null;this.connectToData=null;this.sourcesHeader=null;this.sections={};this.headers={};this.panes={};this.contentArea=null;this.contentAreaScroll=null;this.dropInviteElements=null;this.schemaViewer=null;this.schemaSearch=null;this.fieldViewer=null;this.schemaCommonArea=null;this.topLevelFieldsArea=null;this.leftPaneEmptySpace=null;spiff.Template.call(this,$(nk));this.sources=this.getElementBySelector('.tab-dataSources');this.sourceTitles=this.getElementBySelector('.tab-dataSourceTitles');this.connectToData=this.getElementBySelector('.tab-connectToData');this.sourcesHeader=this.getElementBySelector('.tab-schemaDataSourcesHeader');this.schemaSearch=this.getElementBySelector('.tab-schemaSearch');this.contentArea=this.getElementBySelector('.tab-schemaViewerContentArea');this.contentAreaScroll=this.getElementBySelector('.tab-schemaViewerScroll');this.dropInviteElements=this.getElementsBySelector('.tab-schemaDropInviteTop, .tab-schemaDropInviteLeft, .tab-schemaDropInviteBottom, .tab-schemaDropInviteRight');this.schemaViewer=this.getElementBySelector('.tab-schemaViewerScroll');this.fieldViewer=this.getElementsBySelector('.tab-schemaViewerFields');var nl=this.getElementsBySelector('.tab-schemaCommon');this.schemaCommonArea=((nl.length===1)?nl:null);var nm=this.getElementsBySelector('.tab-schemaCommonArea');this.topLevelFieldsArea=((nm.length===1)?nm:null);this.leftPaneEmptySpace=this.getElementBySelector('.tab-schemaPane')},{get_schemaElements:function(){return this.domRoot.find(fR.fieldDomSelector)},getDimMeasSeparatorForSection:function(nk){return nk.find('.tab-columnSeparator')}});var kZ=global.tab.SchemaViewerViewModel=ss.mkType(a,'tab.SchemaViewerViewModel',function(){this.$D={};this.$y={};this.$z={};this.$E=[];this.$F=null;this.$A=null;this.$H=null;this.$v=null;this.$u=null;this.$x=false;this.$w=false;this.$C=null;this.$G=null;this.$B=new kW;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=0;spiff.BaseViewModel.call(this);this.$A=new(ss.makeGenericType(tab.ModelHolder$1,[tab.DataSchemaModel]));this.$A.addModelChangedHandler(ss.mkdel(this,this.handleModelChanged)).addEventBinding(ss.mkdel(this,function(nl){nl.add_newDataSchema(ss.mkdel(this,this.$9));nl.add_newDataSourceAdded(ss.mkdel(this,this.$8))}),ss.mkdel(this,function(nl){nl.remove_newDataSchema(ss.mkdel(this,this.$9));nl.remove_newDataSourceAdded(ss.mkdel(this,this.$8))}));var nk=tab.ApplicationModel.get_instance();this.$F=nk.modelInstance(tab.DataSchemaSelectionModel).call(nk);this.$F.add_selectionChanged(ss.mkdel(this,this.$j));this.$G=_.debounce(ss.mkdel(this,this.$p),300);this.set_dragFeedback(new kU(this));this.$b()},{add_dataSchemaModified:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_dataSchemaModified:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_newDataSourceAdded:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_newDataSourceAdded:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_selectedDataSourceChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_selectedDataSourceChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_dataSourceListChanged:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_dataSourceListChanged:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},add_scrollToNodes:function(nk){this.$2$5=ss.delegateCombine(this.$2$5,nk)},remove_scrollToNodes:function(nk){this.$2$5=ss.delegateRemove(this.$2$5,nk)},add_expandAllContainers:function(nk){this.$2$6=ss.delegateCombine(this.$2$6,nk)},remove_expandAllContainers:function(nk){this.$2$6=ss.delegateRemove(this.$2$6,nk)},add_collapseAllContainers:function(nk){this.$2$7=ss.delegateCombine(this.$2$7,nk)},remove_collapseAllContainers:function(nk){this.$2$7=ss.delegateRemove(this.$2$7,nk)},add_dataSchemaModelChanged:function(nk){this.$2$8=ss.delegateCombine(this.$2$8,nk)},remove_dataSchemaModelChanged:function(nk){this.$2$8=ss.delegateRemove(this.$2$8,nk)},get_isSearching:function(){return!ss.isNullOrEmptyString(this.$C)},get_title:function(){return tab.Strings.AuthSchemaViewerHeaderData},get_id:function(){return'data'},get_contentViewType:function(){return eF},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return null},get_dataSchema:function(){return this.$A.get_model()},set_dataSchema:function(nk){this.$A.set_Model(nk)},get_currentSheetSchema:function(){if(ss.isNullOrUndefined(this.get_dataSchema().get_dataSchemaPresModel())||ss.isNullOrUndefined(this.get_dataSchema().get_dataSchemaPresModel().worksheetDataSchemaMap)){return null}return this.get_dataSchema().get_dataSchemaPresModel().worksheetDataSchemaMap[kZ.$3()]},get_selectedDataSource:function(){if(ss.isNullOrUndefined(this.$A.get_model())){return null}if(ss.isNullOrUndefined(this.$D[kZ.$3()])){this.$D[kZ.$3()]=this.$A.get_model().getDefaultDataSourceForSheet(kZ.$3())}return this.$D[kZ.$3()]},set_selectedDataSource:function(nk){var nl=this.$r(nk,false);if(nl){tab.SchemaClientCommands.setActiveDataSourceName((ss.isNullOrUndefined(nk)?'':nk.get_name().toString()),false)}},get_selectableDataSources:function(){var nk=[];if(ss.isValue(this.$A.get_model())){var nl=this.$A.get_model().get_dataSourcesList();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(!ss.referenceEquals(nn,this.$A.get_model().get_parametersDataSource())){nk.push(nn)}}}return nk},get_selectedNodes:function(){return this.$E},get_selectedFields:function(){return this.$E.map(ss.mkdel(this,this.findFieldModel)).filter(ss.isValue)},get_selectedFieldNames:function(){var nk=[];var nl=this.get_selectedFields();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];var no=nn.get_globalName();if(ss.isValue(no)&&!ss.contains(nk,no)){nk.push(no)}}return nk},get_firstSelectedHierarchyName:function(){if(ss.isNullOrUndefined(this.get_selectedNodes())||this.get_selectedNodes().length===0){return null}var nk=this.get_selectedNodes()[0];return(nk.isHierarchy?nk.hierarchyName:null)},get_lastSelection:function(){if(ss.isValue(this.$E)&&this.$E.length===0){return null}else{return this.$E[this.$E.length-1]}},get_lastSelectedFieldName:function(){return(ss.isNullOrUndefined(this.get_lastSelection())?null:this.get_lastSelection().globalFieldName)},get_currentLayout:function(){if(ss.isNullOrUndefined(this.get_selectedDataSource())){return{dsoDimensionSortOrder:'dso-alphabetic',dsoMeasureSortOrder:'dso-alphabetic',showHiddenFields:false,showStructure:true}}return this.get_selectedDataSource().get_dataSourceLayoutPresModel()},get_dragFeedback:function(){return this.$2$9},set_dragFeedback:function(nk){this.$2$9=nk},get_numNodesIfTopLevelExpanded:function(){return this.$2$10},set_numNodesIfTopLevelExpanded:function(nk){this.$2$10=nk},get_searchFilterHelper:function(){return this.$B},handleModelChanged:function(){this.$H=(ss.isNullOrUndefined(this.$H)?new tab.WorkbookDataCatalogMetadata:this.$H);this.$A.get_model().set_workbookDataCatalogMetadata(this.$H);this.$9();if(!ss.staticEquals(this.$2$8,null)){this.$2$8(this.get_dataSchema())}},$b:function(){if(!tab.FeatureFlags.isEnabled('SchemaExpandCollapseAll')){return}tab.ApplicationModel.get_instance().registerNotificationHandler('doc:expand-all-containers-event',ss.mkdel(this,this.$7));tab.ApplicationModel.get_instance().registerNotificationHandler('doc:collapse-all-containers-event',ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:expand-all-containers-event',ss.mkdel(this,this.$7));tab.ApplicationModel.get_instance().unRegisterNotificationHandler('doc:collapse-all-containers-event',ss.mkdel(this,this.$6))})))},getNodeForSection:function(nk){return(ss.keyExists(this.$y,nk)?this.$y[nk]:null)},nodeTreeForSection:function(nk){return(ss.keyExists(this.$y,nk)?this.$y[nk].children:null)},getNodeCountForPane:function(nk){return(!ss.keyExists(this.$z,nk)?0:this.$z[nk])},$3:function(nk){var nl=this.nodeTreeForSection(nk);return(ss.isValue(nl)?nl.length:0)},canSearchCurrentDataSource:function(){return ss.isValue(this.get_selectedDataSource())},hasSelection:function(){return ss.isValue(this.$E)&&this.$E.length>0},isSelected:function(nk){return _.any(this.$E,function(nl){return nk.equals$1(nl)})},$d:function(){this.notifyPropertyChanged('SelectedField');if(tsConfig.current_sheet_type==='worksheet'){this.$s()}},$s:function(){if(ss.isNullOrUndefined(this.get_selectedDataSource())){return}var nk=this.get_selectedFieldNames();tab.SelectionClientCommands.updateShowMeCommandsForSelectedFields(nk,this.get_selectedDataSource().get_name(),ss.mkdel(this,function(nl){if(_.isEqual(this.get_selectedFieldNames(),nk)){var nm=tab.ModelUtils.findActiveOrDefaultVisual(null).get_showMeModel();tab.Model.nonWorldUpdate(function(nn){nm.forceUpdate(nl,nn)});nm.set_shouldUpdate(nk.length===0)}}))},addNodeToSelection:function(nk){if(!this.isSelected(nk)){this.$E.push(nk);this.$d()}},addNodesToSelection:function(nk){var nl=false;for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];if(!this.isSelected(nn)){this.$E.push(nn);nl=true}}if(nl){this.$d()}},clearAllAndSelect:function(nk){this.$0();if(ss.isValue(nk)){this.$E.push(nk)}this.$d()},deSelectNode:function(nk){if(ss.remove(this.$E,nk)){this.$d()}},deSelectNodes:function(nk){var nl=false;for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];if(ss.remove(this.$E,nn)){nl=true}}if(nl){this.$d()}},clearSelection:function(){if(this.$E.length!==0){this.$0();this.$d()}},$j:function(nk){this.$k(nk);this.$0();var nl=this.$m(nk);this.$d();this.raiseActionEvent$1(Object).call(this,this.$2$5,nl)},$m:function(nk){var nl=[];var nm=this.get_selectedDataSource();for(var nn=0;nn<nk.length;nn++){var no=nk[nn];if(this.$1(no,nm)){this.$l(no,nl)}}return nl},$7:function(nk,nl){this.raiseActionEvent(this.$2$6)},$6:function(nk,nl){this.raiseActionEvent(this.$2$7)},updateSearchText:function(nk,nl){this.$C=nk;if(nl){this.$p()}else{this.$G()}},findNode:function(nk){var nl=new ss.ObjectEnumerator(this.$y);try{while(nl.moveNext()){var nm=nl.current();var nn=nm.value.find(nk);if(ss.isValue(nn)){return nn}}}finally{nl.dispose()}return null},findNodePath:function(nk){var nl=new ss.ObjectEnumerator(this.$y);try{while(nl.moveNext()){var nm=nl.current();var nn=nm.value.findPath(nk);if(ss.isValue(nn)){return nn}}}finally{nl.dispose()}return null},findFieldModel:function(nk){var nl=this.get_dataSchema().findDataSourceByName(nk.dataSourceName);if(ss.isNullOrUndefined(nl)){return null}switch(nk.instanceType){case'drillPath':{return nl.findDrillPath(nk.globalFieldName)}case'folderNew':{return nl.findFolderNew(nk.globalFieldName)}case'relationalTable':{return nl.findRelationalTable(nk.globalFieldName)}case'cubeFolder':{return nl.findCubeFolder(nk.globalFieldName)}}return nl.findField(nk.globalFieldName)},launchEditingUI:function(nk){if(!this.$x){this.$x=true;var nl=new tab.ShowFieldEditingUICmd;nl.c['fn']=nk;var nm=nl;nm.invoke().done(ss.mkdel(this,function(){this.$x=false}))}},addFieldToSheet:function(nk){if(!this.$x){this.$x=true;tab.SchemaClientCommands.addFieldToSheet(nk,ss.mkdel(this,function(){this.$x=false}))}},showContextMenu:function(nk,nl){if(ss.isNullOrUndefined(this.get_selectedDataSource())){if(ss.isValue(nl)){nl()}return}tab.SchemaClientCommands.requestSchemaContextMenu(this.get_selectedDataSource().get_name(),'common',true,function(nm){var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,kZ.$1,nl,null,null);if(ss.isValue(nn)){nn.show(new spiff.ShowMenuOptions(nk,false))}})},showEmptySpaceContextMenu:function(nk,nl,nm){if(ss.isNullOrUndefined(this.get_selectedDataSource())){if(ss.isValue(nm)){nm()}return}var nn=new spiff.ShowMenuOptions($(nk.target),false);nn.cursorPosition={left:nk.clientX,top:nk.clientY};var no=nn;tab.SchemaClientCommands.requestSchemaContextMenu(this.get_selectedDataSource().get_name(),nl,false,function(np){tab.WidgetUtil.showMenu(np,no)})},showFieldContextMenu:function(nk,nl){var nm=function(no){var np=tab.WidgetUtil.menuViewModelFromCommands(no,kZ.$1,null,null,null);if(ss.isValue(np)&&np.hasMenuItems()){np.show(new spiff.ShowMenuOptions(nl,true))}};var nn=!this.isSelected(nk)||this.get_selectedNodes().length===1;if(nn){this.$o(nk,nm)}else if(tab.FeatureFlags.isEnabled('SchemaViewerWebMultiFieldContextMenus')){this.$n(nk,nm)}},$o:function(nk,nl){var nm=function(nr){nl(nr.commands)};if(nk.isDrillPath){var nn=nk.hierarchyName;tab.SchemaClientCommands.requestSchemaDrillPathContextMenu(this.get_selectedDataSource().get_name(),nn,nl)}else if(nk.isFolder){var no=nk.localName;var np=kZ.$0(nk.schemaSection);tab.SchemaClientCommands.requestSchemaFieldFolderContextMenu(nk.dataSourceName,no,np,nl)}else if(nk.isObject){tab.ObjectClientCommands.requestObjectContextMenu(this.get_selectedDataSource().get_name(),nk.localName,nk.globalFieldName,nm)}else{var nq=nk.globalFieldName;tab.SchemaClientCommands.requestSchemaFieldContextMenu(this.get_selectedDataSource().get_name(),nq,nl)}},$n:function(nk,nl){if(nk.isDrillPath||nk.isFolder||nk.isObject){return}var nm=this.$5();tab.SchemaClientCommands.requestSchemaMultipleFieldsContextMenu(this.get_selectedDataSource().get_name(),nm,nl)},$5:function(){var nk=[];var nl=this.get_selectedFields();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(nn.get_isDrillPath()||nn.get_isObject()||nn.get_isFolder()){continue}nk.push(nn.get_globalName())}return nk},$0:function(){ss.clear(this.$E)},$1:function(nk,nl){if(ss.isNullOrUndefined(this.$A.get_model())){return false}var nm=this.$A.get_model().findDataSourceFromGlobalFieldName(nk);if(ss.isNullOrUndefined(nm)){return false}if(nm.get_isParametersDataSource()){return true}return ss.referenceEquals(nm,nl)},$l:function(nk,nl){var nm=this.findNodePath(nk);if(ss.isValue(nm)){this.$E.push(nm.get_node());nl.push(nm)}},$k:function(nk){var nl=this.get_selectableDataSources();var nm=this.get_selectedDataSource();var nn=null;for(var no=0;no<nk.length;no++){var np=nk[no];var nq=this.$A.get_model().findDataSourceFromGlobalFieldName(np);if(ss.isNullOrUndefined(nq)){continue}if(ss.referenceEquals(nq,nm)){nn=nm;break}if(nq.get_isParametersDataSource()){continue}if(ss.isNullOrUndefined(nn)&&ss.contains(nl,nq)){nn=nq}}if(ss.isValue(nn)){this.set_selectedDataSource(nn)}},$a:function(nk){if(ss.isNullOrUndefined(nk)){return false}if(!ss.keyExists(this.$D,kZ.$3())){return true}var nl=this.$D[kZ.$3()];if(ss.isNullOrUndefined(nl)){return false}if(!ss.referenceEquals(nl.get_name(),nk.get_name())){return true}if(this.$w!==nk.get_dataSourceLayoutPresModel().showStructure){return true}if(!_.isEqual(nl.get_rootFieldsNew(),nk.get_rootFieldsNew())){return true}return false},$r:function(nk,nl){if(!this.$a(nk)&&!nl){return false}this.clearSelection();this.$D[kZ.$3()]=nk;this.$p();this.raiseActionEvent(this.$2$3);return true},$8:function(nk){this.raiseActionEvent(this.$2$2);var nl=_.find(this.get_selectableDataSources(),function(nm){return ss.referenceEquals(nm.get_name(),nk)});if(ss.isValue(nl)){this.$r(nl,false)}},$9:function(){var nk=null;if(ss.isValue(this.get_dataSchema())){nk=this.get_dataSchema().get_activeDataSource();this.get_dataSchema().updatePublishedDsPermissions()}var nl=this.get_selectableDataSources();var nm=false;var nn=Object.keys(this.$D);_.each(nn,ss.mkdel(this,function(nr){var ns=this.$D[nr];if(ss.isValue(ns)&&!_.any(nl,function(nt){return ss.referenceEquals(nt.get_name(),ns.get_name())})){nm=true;delete this.$D[nr]}}));var no=nk||(this.$D[kZ.$3()]||this.get_dataSchema().getDefaultDataSourceForSheet(kZ.$3()));var np=false;if(ss.isNullOrUndefined(no)){if(!nm){return}np=this.$r(null,true)}if(ss.isValue(no)){var nq=_.find(nl,function(nr){return ss.referenceEquals(nr.get_name(),no.get_name())});if(ss.isValue(nq)){np=this.$r(nq,false)}}if(!np){this.$p()}},$p:function(){var nk=tabBootstrap.MetricsController.createContext('Update DataSchema',32,null);{this.$w=!ss.isNullOrUndefined(this.get_selectedDataSource())&&this.get_selectedDataSource().get_dataSourceLayoutPresModel().showStructure;if(ss.isValue(this.get_selectedDataSource())){this.$w=this.get_selectedDataSource().get_dataSourceLayoutPresModel().showStructure}var nl=this.$2();nl[3]=this.$4();var nm=this.$i(nl);this.$h();nm=this.$q(nm);this.$t();this.$g(nm)}nk.dispose()},$h:function(){var nk={};nk[0]=this.$3(4)+this.$3(5)+this.$3(6);nk[1]=this.$3(0);nk[2]=this.$3(1);nk[3]=this.$3(2);nk[4]=this.$3(3);this.$z=nk},$c:function(){return ss.isValue(this.get_selectedDataSource())&&this.get_selectedDataSource().get_shouldShowInSchemaViewer()},$2:function(){var nk={};kZ.sectionsInOrder.forEach(function(nn){nk[nn]=[]});if(this.$c()){for(var nl=0;nl<kZ.sectionsInOrder.length;nl++){var nm=kZ.sectionsInOrder[nl];if(ss.isValue(this.get_selectedDataSource().get_rootFieldsNew()[nm])){ss.arrayAddRange(nk[nm],this.get_selectedDataSource().get_rootFieldsNew()[nm])}}}return nk},$4:function(){var nk=[];var nl=(ss.isValue(this.$A.get_model())?this.$A.get_model().get_parametersDataSource():null);if(ss.isValue(nl)){ss.arrayAddRange(nk,nl.get_rootFieldsNew()[3])}return nk},$i:function(nk){var nl=false;this.set_numNodesIfTopLevelExpanded(0);var nm=(ss.isValue(this.$C)?new kT(this.$C,this.get_searchFilterHelper()):null);kZ.sectionsInOrder.forEach(ss.mkdel(this,function(nn){var no=kP.create(this.get_currentLayout(),nn,nk[nn],this.get_selectedDataSource(),nm);if(nn!==2&&nn!==3){this.set_numNodesIfTopLevelExpanded(this.get_numNodesIfTopLevelExpanded()+no.numNodesIfTopLevelExpanded)}if(!nl&&!_.isEqual(this.$y[nn],no)){nl=true}this.$y[nn]=no}));return nl},$q:function(nk){if(ss.isNullOrUndefined(this.$A.get_model())){return false}nk=nk||!_.isEqual(this.$v,this.$A.get_model().get_currentBlendingFields())||!_.isEqual(this.$u,this.$A.get_model().get_blendingFieldCandidates());this.$v=this.$A.get_model().get_currentBlendingFields();this.$u=this.$A.get_model().get_blendingFieldCandidates();return nk},$t:function(){if(ss.isValue(this.$A.get_model())&&!ss.contains(this.get_selectableDataSources(),this.get_selectedDataSource())){this.set_selectedDataSource(this.$A.get_model().getDefaultDataSourceForSheet(kZ.$3()))}},$g:function(nk){if(nk){this.$e()}else{this.$f()}},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);this.get_dragFeedback().dispose();this.$F.remove_selectionChanged(ss.mkdel(this,this.$j))},$e:function(){this.raiseActionEvent(this.$2$1)},$f:function(){this.raiseActionEvent(this.$2$4)}},{$3:function(){return tsConfig.current_sheet_name},filterFieldsForViewing:function(nk,nl){return nk.filter(function(nm){return!nm.get_isUnnamedCalc()&&(!nm.get_isOrphaned()||!nm.get_isHidden())&&(!nm.get_isHidden()||!nm.get_isAutoHidden()&&nl)})},showDataSourceContextMenu:function(nk,nl){tab.SchemaClientCommands.requestSchemaDataSourceContextMenu(nk.get_name(),function(nm){var nn=tab.WidgetUtil.menuViewModelFromCommands(nm,kZ.$1,null,null,null);if(ss.isValue(nn)){nn.show(new spiff.ShowMenuOptions(nl,true))}})},$0:function(nk){switch(nk){case 4:{return'common'}case 0:{return'dimensions'}case 1:{return'measure'}case 2:{return'groups'}case 3:{return'parameters'}case 5:case 6:default:{throw new ss.Exception('No FolderRole mapping available for DataSourceFieldSection '+nk)}}},$1:function(nk){if($.isFunction(nk.data)){nk.data()}}});var la=global.tab.ScrollDirection=ss.mkEnum(a,'tab.ScrollDirection',{scrollUp:0,scrollDown:1,scrollLeft:2,scrollRight:3});var lb=global.tab.SectionResizerComponent=ss.mkType(a,'tab.SectionResizerComponent',function(nk,nl){this.$0=null;this.$1=null;this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.$0=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}));this.$1=ss.mkdel(this,function(nm){this.$2=nm;this.$0(nm)})},{render:function(){return spiff.DOMElements.div({ref:this.$1,className:'resizer'})},startDrag:function(nk){if(!ss.staticEquals(this.props.dragInstanceFactory,null)){return this.props.dragInstanceFactory(this.$2,this.props.resizerIndex)}return null},acceptsDragType:function(){return 1}},{create:function(nk){return React.createElement(lb,nk)}});var lc=global.tab.SelectedItemSectionComponent=ss.mkType(a,'tab.SelectedItemSectionComponent',function(nk,nl){spiff.PureRenderComponent.$ctor1.call(this,nk,nl)},{render:function(){var nk=[this.$5(),this.$0(),this.$2(),this.$3(),this.$7(),this.$4()];return spiff.DOMElements.div({className:'tab-SectionSelectedItem',key:'selected-item-section'},nk)},$5:function(){return spiff.DOMElements.div({className:'tab-SelectedItemSectionTitle',key:'selected-item-title'},tab.Strings.LayoutPaneSelectedItemTitle)},$1:function(nk){return spiff.DOMElements.div({className:['tab-ZoneLayoutInfoItem','lessSpace'].join(' '),key:'layout-checkboxes'},nk)},$2:function(){var nk;if(this.props.isFlexibleDashboard){nk=[this.$6()]}else{nk=[this.$6(),this.$8()]}return this.$1(nk)},$4:function(){if(this.props.layoutPaneGeometryProps.shouldRenderPendingGeometry){return km.renderZoneRectPreview({l:this.props.layoutPaneGeometryProps.x,t:this.props.layoutPaneGeometryProps.y,w:this.props.layoutPaneGeometryProps.sizeProps.width,h:this.props.layoutPaneGeometryProps.sizeProps.height},'pending-geometry')}return null},$0:function(){var nk='';if(ss.isValue(this.props.activeZoneDescription)){nk=ss.replaceAllString(this.props.activeZoneDescription,' ',' ')}return spiff.DOMElements.div({className:'tab-ZoneDescription',key:'layout-zone-description',title:this.props.activeZoneDescription},nk)},$7:function(){return React.createElement(hx,$.extend({key:'layout-spacing-section'},this.props.layoutPaneSpacingProps))},$3:function(){return hv.create($.extend({key:'layout-geometry-section'},this.props.layoutPaneGeometryProps))},$8:function(){var nk=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.zoneFloatingCheckboxProps);return spiff.DOMElements.div({className:'tab-SubSectionFloating',key:'toggle-zone-float-subsection'},nk)},$6:function(){var nk=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,this.props.zoneTitleCheckboxProps);return spiff.DOMElements.div({className:'tab-SubSectionShowTitle',key:'show-zone-title-subsection'},nk)}});var ld=global.tab.SelectedItemSectionProps=ss.mkType(a,'tab.SelectedItemSectionProps',function(){this.zoneTitleCheckboxProps=null;this.zoneFloatingCheckboxProps=null;this.activeZoneDescription=null;this.layoutPaneGeometryProps=null;this.layoutPaneSpacingProps=null;this.clearSelectedZone=null;this.resizeProps=null;this.isFlexibleDashboard=false});var le=global.tab.SelectedItemSectionViewModel=ss.mkType(a,'tab.SelectedItemSectionViewModel',function(nk){this.$9=null;this.$8=null;this.$7=null;this.$6=null;this.$4=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[ld]).call(this);this.$9=nk;this.$7=new ni(nk);this.$6=new mW(nk);this.$4=new hw(nk,1000);this.$5=new hy(nk,1000);this.disposables.add$2([this.addChildViewModel(this.$7),this.addChildViewModel(this.$6),this.addChildViewModel(this.$4),this.addChildViewModel(this.$5),this.$7,this.$6,this.$4,this.$5,this.$9.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nl){nl.add_activeZoneChanged(ss.mkdel(this,this.$3));nl.add_activeZoneNameChanged(ss.mkdel(this,this.$3))}),ss.mkdel(this,function(nl){nl.remove_activeZoneChanged(ss.mkdel(this,this.$3));nl.remove_activeZoneNameChanged(ss.mkdel(this,this.$3))}))])},{$3:function(){this.$8='';var nk=this.$9.get_model();if(ss.isNullOrUndefined(nk)||!nk.get_isDashboard()){return}if(nk.get_hasActiveZone()){var nl=nk.getZone(nk.get_activeZoneID());if(ss.isValue(nl)){this.$8=nl.get_zoneDescription()}}else{this.$8=nk.get_sheetName()}this.incrementProps()},createUpdatedProps:function(){var nk=this.$9.get_model();var nl=ss.isValue(nk)&&nk.get_isFlexibleLayoutEnabled();var nm=new ld;nm.zoneTitleCheckboxProps=this.$7.get_props();nm.zoneFloatingCheckboxProps=this.$6.get_props();nm.activeZoneDescription=this.$8;nm.layoutPaneGeometryProps=this.$4.get_props();nm.layoutPaneSpacingProps=this.$5.get_props();nm.isFlexibleDashboard=nl;return nm}});var lf=global.tab.ShapePickerTemplate=ss.mkType(a,'tab.ShapePickerTemplate',function(){this.rows=null;spiff.Template.call(this,$("<div class='tabAuthShapePicker'><div class='tabAuthShapePickerRows'></div></div>"));this.rows=this.getElementBySelector('.tabAuthShapePickerRows')});var lg=global.tab.ShapePickerView=ss.mkType(a,'tab.ShapePickerView',function(nk,nl){this.dom=null;this.shapePickerViewModel=null;ss.makeGenericType(spiff.BaseView$1,[lh]).call(this,nk,nl);this.dom=nl;this.shapePickerViewModel=nk},{onViewModelPropertyChanged:function(nk,nl){this.updateContent()},updateContent:function(){this.dom.rows.children().remove();var nk=null;var nl=0;var nm=this.shapePickerViewModel.get_shapes();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(ss.isNullOrUndefined(nk)||nl===this.shapePickerViewModel.get_shapesPerRow()){nk=$("<div class='tabAuthShapePickerRow'></div>");this.dom.rows.append(nk);nl=0}spiff.ClickHandler.targetAndClick($("<span class='tabAuthShapePickerItem'></span>").addClass(lg.$0(no)).toggleClass('tabAuthShapeSelected',no.equals$1(this.shapePickerViewModel.get_selectedShape())).data('tabShape',no).appendTo(nk),this.$7(no));nl++}},$7:function(nk){return ss.mkdel(this,function(){this.shapePickerViewModel.set_selectedShape(nk)})}},{$0:function(nk){return'tabShape-'+(ss.isValue(nk.get_palette())?nk.get_palette().toString():'def')+'-'+nk.get_shapeType()}});var lh=global.tab.ShapePickerViewModel=ss.mkType(a,'tab.ShapePickerViewModel',function(){this.$1=[];this.$0=new tab.ShapeModel('filled','square');spiff.BaseViewModel.call(this);var nk=ss.mkdel(this,function(nl){this.$1.push(new tab.ShapeModel(nl,'circle'));this.$1.push(new tab.ShapeModel(nl,'square'));this.$1.push(new tab.ShapeModel(nl,'plus'));this.$1.push(new tab.ShapeModel(nl,'times'));this.$1.push(new tab.ShapeModel(nl,'asterisk'));this.$1.push(new tab.ShapeModel(nl,'diamond'));this.$1.push(new tab.ShapeModel(nl,'triangle'));this.$1.push(new tab.ShapeModel(nl,'down-triangle'));this.$1.push(new tab.ShapeModel(nl,'left-triangle'));this.$1.push(new tab.ShapeModel(nl,'right-triangle'))});nk(null);nk('filled')},{get_shapesPerRow:function(){return 5},get_shapes:function(){return this.$1},get_selectedShape:function(){return this.$0},set_selectedShape:function(nk){if(ss.referenceEquals(this.$0,nk)){return}this.$0=nk;this.notifyPropertyChanged('selectedShape')},get_viewType:function(){return lg},get_viewModel:function(){return this},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){}});var li=global.tab.SheetDragInstance=ss.mkType(a,'tab.SheetDragInstance',function(nk,nl,nm,nn){this.dragged=null;dS.$ctor1.call(this,nk,nk.addAsFloating,mT.forNewZone(nm),nn);this.dragged=nk;this.set_dragDropPresModel(nl)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(nk,nl,nm,nn,no){tab.DashboardClientCommands.dropSheetOnDashboard(this.dragged.sheetName,nk,this.get_isFloating()).always(nl)}},{create:function(nk,nl,nm){var nn=new li(nk,nl,nm,false);nn.initialize();return nn},createFlexible:function(nk,nl,nm){var nn=new li(nk,nl,nm,true);nn.initialize();return nn}});var lj=global.tab.SheetListItemComponent=ss.mkType(a,'tab.SheetListItemComponent',function(nk,nl){this.$f=null;this.$g=null;this.$e=false;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);var nm=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}));this.$f=ss.mkdel(this,function(nn){nm(nn);if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){this.$g=nn}});this.state={thumbnailVisible:false,thumbnail:'',replaceIconVisible:false};this.$e=false},{startDrag:function(nk){this.$c(nk);return this.props.actions.getDragInstance(this.props.sheet)},acceptsDragType:function(){return 1},render:function(){var nk=this.props.sheet;var nl=new EventUtils.EventHandleSpec;nl.doubleTap=ss.mkdel(this,this.$0);nl.tap=ss.mkdel(this,this.$c);nl.rightClick=ss.mkdel(this,this.$1);nl.hover=ss.mkdel(this,function(nq){this.$5()});var nm=nl;if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){nm.hoverDelay=200}var nn=((this.state.thumbnailVisible&&tab.FeatureFlags.isEnabled('DashWebAuthThumbnail'))?ss.mkdel(this,this.$b)():null);var no=((this.state.replaceIconVisible&&this.props.isReplaceSheetSource)?ss.mkdel(this,this.$a)():null);var np=spiff.DOMElements.div({ref:this.$f},EventUtils.EventForwarder.div(nm,{className:'tabAuthSheetListItem'+(this.props.selected?' selected':''),title:nk.name,key:'key'+nk.name,onMouseLeave:ss.mkdel(this,this.$6)},nn,this.$8(nk),this.$9(nk.name),no,this.$7()));return np},$9:function(nk){return spiff.DOMElements.span({key:'name',className:'tabAuthSheetListItemName'},nk)},$8:function(nk){return spiff.DOMElements.span.apply(null,[{key:'icon',className:'tabAuthSheetListItemIcon'+(nk.isDashboard?' dashboard':'')+(nk.isIncluded?' included':'')}].concat(null))},$7:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.$4);return EventUtils.EventForwarder.span.apply(null,[nk,{key:'goto',className:'goToSheetIcon',title:tab.Strings.GoToSheet}].concat(null))},$a:function(){var nk=new EventUtils.EventHandleSpec;nk.tap=ss.mkdel(this,this.$d);return EventUtils.EventForwarder.span.apply(null,[nk,{key:'replaceSheet',className:'replaceSheetIcon',title:tab.Strings.SwapSheets}].concat(null))},$d:function(nk){this.props.actions.replaceSheet(this.props.sheet);nk.stopPropagation()},$4:function(nk){this.props.actions.goToSheet(this.props.sheet)},$c:function(nk){this.props.actions.select(this.props.sheet)},$0:function(nk){this.props.actions.doubleClick(this.props.sheet)},$1:function(nk){var nl=ReactDOM.findDOMNode(this);this.props.actions.showContextMenu(this.props.sheet,new spiff.ShowMenuOptions($(nl),false))},$5:function(){this.$e=true;this.setState({replaceIconVisible:true});if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){if(ss.isValue(this.props.sheet)&&!this.state.thumbnailVisible){var nk=this.props.sheet.name;var nl=this.props.actions.getThumbnail(nk);nl.done(ss.mkdel(this,function(nm){this.$3(nm)})).fail(ss.mkdel(this,function(){}))}}},$6:function(nk){this.$e=false;if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')){if(this.state.thumbnailVisible){this.setState({thumbnailVisible:false})}}},$b:function(){var nk={isDashboard:this.props.sheet.isDashboard,isHidden:this.props.sheet.isHidden,name:this.props.sheet.name};var nl={anchorElement:this.$g,anchorOrigin:{vertical:'top',horizontal:'right'},stackedOrigin:{vertical:'top',horizontal:'left'}};var nm=lZ.createThumbnailOverlayProps(nl,nk,this.state.thumbnail);return React.createElement(SharedWidgets.Overlay,nm)},$3:function(nk){if(tab.FeatureFlags.isEnabled('DashWebAuthThumbnail')&&this.$e){this.setState({thumbnailVisible:true,thumbnail:nk})}},$2:function(){if(this.props.selected){var nk=ReactDOM.findDOMNode(this);var nl=$(nk).closest("[role='listbox']").get(0);spiff.ScrollTo.elementInContainer(nk,nl)}},componentDidUpdate:function(){this.$2()},componentDidMount:function(){this.$2()}});var lk=global.tab.SheetListViewModel=ss.mkType(a,'tab.SheetListViewModel',function(nk,nl,nm){this.$g=null;this.$h=null;this.$f=null;this.$j=null;this.$i=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$i=null;this.$h=nl;this.$g=nk;this.$f=nm;this.disposables.add$1(this.$g.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$b)).addEventBinding(ss.mkdel(this,function(nn){if(ss.isValue(nn.sheetListModel)){nn.sheetListModel.add_sheetListUpdated(ss.mkdel(this,this.$b));nn.add_activeZoneChanged(ss.mkdel(this,this.$8))}if(ss.isValue(nn.get_flipboardNavModel())){nn.get_flipboardNavModel().add_newFlipboardNav(ss.mkdel(this,this.$9))}}),ss.mkdel(this,function(nn){if(ss.isValue(nn.sheetListModel)){nn.sheetListModel.remove_sheetListUpdated(ss.mkdel(this,this.$b));nn.remove_activeZoneChanged(ss.mkdel(this,this.$8))}if(ss.isValue(nn.get_flipboardNavModel())){nn.get_flipboardNavModel().remove_newFlipboardNav(ss.mkdel(this,this.$9))}})))},{get_selectedSheet:function(){return this.$f.getSelectedSheet(this.$i)},set_selectedSheet:function(nk){var nl=this.$f.determineSelectedSheet(this.$i,nk);if(!ss.referenceEquals(nl,this.$i)){this.$i=nl;this.incrementProps()}},get_addAsFloating:function(){return ss.isValue(this.$h)&&this.$h.get_addNewZoneAsFloating()},$e:function(){return ss.isValue(this.$g.get_model())&&ss.isValue(this.$g.get_model().pm)&&this.$g.get_model().pm.isStory},createInitialProps:function(){return{actions:{doubleClick:ss.mkdel(this,this.$6),getDragInstance:ss.mkdel(this,this.$4),goToSheet:ss.mkdel(this,this.$5),replaceSheet:ss.mkdel(this,this.$c),select:ss.mkdel(this,function(nk){this.set_selectedSheet(nk)}),clearSelection:ss.mkdel(this,function(){this.set_selectedSheet(null)}),showContextMenu:ss.mkdel(this,this.$d),getThumbnail:function(nk){return bZ.get_thumbnailCache().getThumbnail(nk)}}}},createUpdatedProps:function(){return{selectedSheet:this.get_selectedSheet(),items:this.$j,hasReplaceableSheet:this.$7()}},$b:function(){if(ss.isValue(this.$g.get_model())&&ss.isValue(this.$g.get_model().sheetListModel)){this.$j=_.map(this.$g.get_model().sheetListModel.get_sheets(),ss.mkdel(this,function(nk){return{data:nk.pm}}))}else{this.$j=[]}this.set_selectedSheet(this.$f.onUpdatedSheetList(this.get_selectedSheet()));this.incrementProps()},$8:function(){var nk=this.$f.onActiveZoneChanged(this.get_selectedSheet());this.$i=nk;this.incrementProps()},$9:function(){var nk=this.$f.onNewFlipboardNav(this.get_selectedSheet());if(!ss.referenceEquals(nk,this.get_selectedSheet())){this.set_selectedSheet(nk);this.incrementProps()}},$6:function(nk){this.$f.onDoubleClicked(nk,this.get_addAsFloating())},$5:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrEmptyString(nk.name)){return}tab.SheetClientCommands.goToSheet(nk.name)},$c:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrEmptyString(nk.name)){return}if(ss.isNullOrUndefined(this.$g.get_model())||this.$g.get_model().get_activeZoneID()===0){return}var nl=this.$g.get_model().get_activeZoneID();this.$a(nk);tab.DashboardZoneCommands.replaceZone(nl,nk.name)},$a:function(nk){var nl=this.$g.get_model();var nm=this.$3();if(ss.isNullOrUndefined(nl)||nl.get_activeZoneID()===0||ss.isNullOrUndefined(nm)){return}var nn=new kx;nn.currentDeviceLayout=nl.get_currentDeviceLayout();nn.newZoneType='viz';nn.isSheetHidden=nk.isHidden;nn.numOfZonesInDashboard=(ss.isValue(nl.zonesModel)?nl.zonesModel.numOfZones():0);nn.currentZoneType=nm.get_zoneType();nn.isFloating=nm.get_isFloating();var no=nn;ky.logReplaceZoneEvent(no)},$3:function(){if(ss.isValue(this.$g.get_model())&&this.$g.get_model().get_activeZoneID()!==0){return this.$g.get_model().getZone(this.$g.get_model().get_activeZoneID())}return null},$7:function(){var nk=this.$3();return!this.$e()&&(ss.isValue(nk)&&nk.get_zoneType()==='viz')},$d:function(nk,nl){var nm=function(nn){var no=nn.commands;var np=tab.WidgetUtil.menuViewModelFromCommands(no,tab.WidgetUtil.commandMenuItemClicked,null,null,null);np.show(nl)};tab.SheetClientCommands.getSheetListContextMenu(nk.name,this.get_addAsFloating(),nm)},$4:function(nk){return this.$f.getDragInstance(nk)}},{findSheetListItemByName:function(nk,nl){return _.find(nk,function(nm){return ss.referenceEquals(nm.get_name(),nl)})}});var ll=global.tab.ShelfCardTemplate=ss.mkType(a,'tab.ShelfCardTemplate',function(){this.pillHolder=null;this.pillContent=null;this.dropTarget=null;spiff.Template.call(this,$(ll.template));this.pillHolder=this.getElementBySelector('.tabAuthShelfPills');this.pillContent=this.getElementBySelector('.tabAuthShelfPillsContent');this.dropTarget=this.getElementBySelector('.tabAuthShelfDropTarget')},{get_dividers:function(){return this.getElementsBySelector('.tabAuthShelfPillDivider')},get_clickSpacer:function(){return this.getElementsBySelector('.tabAuthShelfClickArea')},placeholdersIn:function(nk){return nk.find('.tabAuthShelfPillDividerPlaceholder')}});var lm=global.tab.ShelfItemDragInstance=ss.mkType(a,'tab.ShelfItemDragInstance',function(nk,nl){this.finalDrop=$.Deferred();this.drag=null;EventUtils.DragInstance.call(this,nk,nl);this.finalDrop.fail(ss.mkdel(this,function(nm){EventUtils.DragDropManager.cancelDrag(this)}))},{get_dropPresModels:function(){return((this.finalDrop.state()==='resolved')?this.drag.shelfDropModels:[])},get_drop:function(){return this.finalDrop}});var ln=global.tab.ShelfView=ss.mkType(a,'tab.ShelfView',function(nk,nl){this.shelfViewModel=null;this.dom=null;this.$j=new tab.DisposableHolder;this.$m=null;this.$i=[];this.$n=null;this.$k=0;this.$l=0;ss.makeGenericType(cy,[lo]).call(this,nk,nl);this.shelfViewModel=nk;this.shelfViewModel.add_shelfChanged(ss.mkdel(this,this.initFromModel));this.shelfViewModel.add_dropStateChanged(ss.mkdel(this,this.$9));this.shelfViewModel.add_dragOverDropPositionChanged(ss.mkdel(this,this.$8));this.shelfViewModel.add_openTypeInPill(ss.mkdel(this,this.$a));this.shelfViewModel.add_updateScrollContent(ss.mkdel(this,this.updateScroller));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.shelfViewModel.remove_shelfChanged(ss.mkdel(this,this.initFromModel));this.shelfViewModel.remove_dropStateChanged(ss.mkdel(this,this.$9));this.shelfViewModel.remove_dragOverDropPositionChanged(ss.mkdel(this,this.$8));this.shelfViewModel.remove_openTypeInPill(ss.mkdel(this,this.$a));this.shelfViewModel.remove_updateScrollContent(ss.mkdel(this,this.updateScroller))})));this.disposables.add$1(spiff.TableauClickHandler.target(this.element[0]).onDoubleClick(function(){nk.insertAdHocCalc()}));this.dom=nl;EventUtils.DragDropManager.attachDropTarget(this.dom.dropTarget,nk);this.disposables.add$1(spiff.EventUtil.bindWithDispose($(window),'resize',ss.mkdel(this,this.handleWindowResize)))},{get_preferredWidth:function(){if(this.$l===0){this.$g()}return this.$l},get_scrollableContentPreferredHeight:function(){if(this.$k===0){this.$g()}return this.$k},get_typeInPillView:function(){return this.$n},get_scrollContainerSize:null,get_scroll:null,set_scroll:null,updateScroller:null,setScrollableContentActualHeight:function(nk){this.dom.pillHolder.css('height',(ss.isValue(nk)?(nk+'px'):''))},dispose:function(){this.$j.dispose();if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}ss.makeGenericType(spiff.BaseView$1,[lo]).prototype.dispose.call(this)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$e()},ensureItemInView:function(nk){var nl=this.shelfViewModel.get_orientation()===1;var nm=(nl?tab.DoubleUtil.roundToInt(nk.position().left):tab.DoubleUtil.roundToInt(nk.position().top));var nn=nm+(nl?tab.DoubleUtil.roundToInt(nk.outerWidth(true)):tab.DoubleUtil.roundToInt(nk.outerHeight(true)));var no=this.get_scrollContainerSize();if(nm<0){this.set_scroll(nm)}else if(nn>no){this.set_scroll(this.get_scroll()+(nn-no+10))}},$e:function(){if(!this.addedToDom){return}if(ss.isValue(this.$n)){this.$n.onAddedToDom()}this.$g();this.$f();this.$h();this.raiseScrollContentChanged();if(ss.isValue(this.$n)){this.ensureItemInView(this.$n.element)}},$7:function(nk){if(this.shelfViewModel.get_supportsMultiplePills()){var nl=$(ll.templatePillDivider);if(nk===0){nl.addClass('tabAuthShelfPillDividerFirst')}this.dom.pillContent.append(nl);this.$i.push(nl);EventUtils.DragDropManager.attachDropTarget(nl,this.shelfViewModel.createPillDividerDropTarget(nk))}},initFromModel:function(nk){if(!ss.isValue(nk.get_pills())){return}this.$j.dispose();this.dom.pillContent.toggleClass('tabAuthPillsHorizOverflow',false);this.dom.get_clickSpacer().remove();this.dom.get_dividers().remove();ss.clear(this.$i);var nl=false;var nm=-1;var nn=false;if(this.shelfViewModel.get_hasTypeInPill()){nm=this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition();if(ss.isNullOrUndefined(this.$n)){nn=true;this.$n=tab.ObjectRegistry.newView(mh).call(null,[this.shelfViewModel.get_typeInPillCalculation()])}}else if(ss.isValue(this.$n)){this.$n.dispose();this.$n=null}var no=0;var np=nk.get_pills();for(var nq=0;nq<np.length;nq++){var nr=np[nq];this.$7(no);if(no===nm){if(nn){this.$n.addToDom(this.dom.pillContent)}this.$n.set_pillViewModel(nr)}else{var ns=tab.ObjectRegistry.newView(jf).call(null,[nr]);this.$j.add$1(ns);if(no<nm&&!nn){ns.element.insertBefore(this.$n.element)}else{this.dom.pillContent.append(ns.element)}nl=nl||ns.get_hasExternalIcon()}no++}this.$7(no);if(ss.isValue(nk.get_shelf())){this.dom.domRoot.attr('title',nk.get_shelf().get_tooltip())}if(nm>=no){if(nn){this.$n.addToDom(this.dom.pillContent)}this.$n.set_pillViewModel(null)}if(this.shelfViewModel.get_supportsMultiplePills()){var nt=$(ll.templateClickSpacer);this.dom.pillContent.append(nt)}this.dom.get_dividers().hide();this.dom.pillContent.toggleClass('tabHasExternalIcon',nl);this.$e()},$a:function(nk){if(ss.isNullOrUndefined(this.$n)){return}if(nk&&this.shelfViewModel.get_orientation()===1){this.$g();this.$n.animateOpen(this.$d(),this.$c(),this.$b())}else{this.$n.onOpenCompleted()}this.ensureItemInView(this.$n.element)},$g:function(){this.dom.pillHolder.css('position','absolute');this.$k=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerHeight(true));this.$l=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerWidth(true));this.dom.pillHolder.css('position','relative')},$8:function(nk){if(ss.isValue(nk)&&(nk.shelfDropAction||'insert')==='insert'){if(ss.isValue(nk.shelfPosIndex)&&nk.shelfPosIndex<this.$i.length){var nl=this.$i[nk.shelfPosIndex];if(ss.referenceEquals(this.$m,nl)){return}if(ss.isValue(this.$m)){this.dom.placeholdersIn(this.$m).hide()}this.dom.placeholdersIn(nl).show();this.$m=nl}}else{this.$m=null;this.dom.placeholdersIn(this.dom.pillHolder).hide()}},$9:function(nk){switch(nk){case 0:case 2:{if(ss.isValue(this.$m)){this.dom.placeholdersIn(this.$m).toggle('fast');this.$m=null}this.dom.get_dividers().hide();break}case 1:{this.dom.get_dividers().css('display','');break}}},handleWindowResize:function(nk){if(this.shelfViewModel.get_orientation()===1){this.$g();this.$f();this.$h()}},$f:function(){var nk=this.dom.pillContent.hasClass('tabAuthPillsHorizOverflow');var nl=0;if(ss.isValue(this.shelfViewModel.get_pills())){nl=this.shelfViewModel.get_pills().length;if(ss.isValue(this.$n)&&this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition()<this.shelfViewModel.get_pills().length){nl--}}var nm=this.get_preferredWidth()+(nk?(nl*50):0);var nn=this.shelfViewModel.get_orientation()===1&&nm>this.dom.pillHolder.outerWidth();this.dom.pillContent.toggleClass('tabAuthPillsHorizOverflow',nn);if(nk!==nn){this.$g()}},$h:function(){if(ss.isNullOrUndefined(this.$n)){return}if(this.shelfViewModel.get_orientation()===1){var nk=this.$c();var nl=this.$b();if(this.shelfViewModel.get_animateTypeInPillPending()){var nm=this.$d();nk=nm;nl=nm}this.$n.setMinMaxWidth(nk,nl,true);this.$g()}},$b:function(){var nk=this.get_preferredWidth();if(ss.isValue(this.$n)){nk-=tab.DoubleUtil.roundToInt(this.$n.get_dom().domRoot.outerWidth())}var nl=tab.DoubleUtil.roundToInt(this.dom.pillContent.outerWidth())-nk-tab.DoubleUtil.roundToInt(this.dom.get_clickSpacer().outerWidth());return Math.max(nl,108)},$c:function(){return Math.min(this.$b(),250)},$d:function(){var nk=12;var nl=ss.isValue(this.shelfViewModel.get_pills())&&this.shelfViewModel.get_typeInPillCalculation().get_shelfPosition()<this.shelfViewModel.get_pills().length;if(nl){var nm=this.dom.domRoot.find('.tabAuthShelfPill');nk=((ss.isValue(nm)&&nm.length>0)?tab.DoubleUtil.roundToInt(nm.first().outerWidth()):150)}return nk}});var lo=global.tab.ShelfViewModel=ss.mkType(a,'tab.ShelfViewModel',function(){this.$j=[];this.$k=null;this.$l=null;this.$m=null;this.$i=false;this.$d=false;this.$g=0;this.$f=null;this.$n=true;this.$e=false;this.$h=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;spiff.BaseViewModel.call(this);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.dragEnded));var nk=tab.ApplicationModel.get_instance();this.$l=cs.new$1(nk.modelInstance(tab.TypeInCalculationModel).call(nk));this.$l.set_isAdhocVM(true);this.$l.add_calculationEdited(ss.mkdel(this,this.$3));this.$l.add_calculationCanceled(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_calculationEdited(ss.mkdel(this,this.$3));this.$l.remove_calculationCanceled(ss.mkdel(this,this.$2));this.$l=tab.MiscUtil.dispose$1(this.$l)})));this.$c()},{add_updateScrollContent:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_updateScrollContent:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_shelfChanged:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_shelfChanged:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},add_visibleChanged:function(nk){this.$2$3=ss.delegateCombine(this.$2$3,nk)},remove_visibleChanged:function(nk){this.$2$3=ss.delegateRemove(this.$2$3,nk)},add_dropStateChanged:function(nk){this.$2$4=ss.delegateCombine(this.$2$4,nk)},remove_dropStateChanged:function(nk){this.$2$4=ss.delegateRemove(this.$2$4,nk)},add_dragOverDropPositionChanged:function(nk){this.$2$5=ss.delegateCombine(this.$2$5,nk)},remove_dragOverDropPositionChanged:function(nk){this.$2$5=ss.delegateRemove(this.$2$5,nk)},add_openTypeInPill:function(nk){this.$2$6=ss.delegateCombine(this.$2$6,nk)},remove_openTypeInPill:function(nk){this.$2$6=ss.delegateRemove(this.$2$6,nk)},get_isVisible:function(){return this.$n},set_IsVisible:function(nk){if(this.$n===nk){return}this.$n=nk;this.raiseActionEvent(this.$2$3)},get_dropTarget:function(){return this},get_supportsMultiplePills:function(){switch(this.get_shelfType()){case'columns-shelf':case'rows-shelf':case'pages-shelf':case'filter-shelf':case'encoding-shelf':case'measures-shelf':{return true}default:{return false}}},get_title:function(){var nk='';switch(this.get_shelfType()){case'columns-shelf':{nk=tab.Strings.AuthCardTitleColumns;break}case'rows-shelf':{nk=tab.Strings.AuthCardTitleRows;break}case'pages-shelf':{nk=tab.Strings.AuthCardTitlePages;break}case'filter-shelf':{nk=(tsConfig.is_metrics_authoring?tab.Strings.AuthCardTitleMetricsDataFilters:tab.Strings.AuthCardTitleFilters);break}case'measures-shelf':{nk=tab.Strings.AuthCardTitleMeasureValues;break}}return nk},get_name:function(){var nk=this.get_shelfType().toString();return ss.replaceAllString(nk,'-shelf','')},get_viewModel:function(){return this},get_collapsedTitleDetail:function(){return(ss.isValue(this.$j)?this.$j.length.toString():'')},get_viewType:function(){return ln},get_pills:function(){return this.$j},get_shelfType:function(){if(ss.isNullOrUndefined(this.$k)){return'none-shelf'}return this.$k.get_shelfType()},get_orientation:function(){switch(this.get_shelfType()){case'columns-shelf':case'rows-shelf':{return 1}default:{return 0}}},get_shelf:function(){return this.$k},set_shelf:function(nk){if(ss.isValue(this.$k)){this.$k.remove_shelfChanged(ss.mkdel(this,this.$a))}this.$k=nk;if(ss.isValue(this.$l)){this.$l.set_viewModelShelfType(this.get_shelfType())}if(ss.isValue(this.$k)){this.$k.add_shelfChanged(ss.mkdel(this,this.$a));this.$c();this.updatePills();this.set_IsVisible(this.$k.get_isVisible())}},get_typeInPillCalculation:function(){return(this.get_hasTypeInPill()?this.$l:null)},get_dropState:function(){return this.$g},$0:function(nk){if(this.$g===nk){return}this.$g=nk;if(ss.isValue(this.$2$4)){this.$2$4(this.$g)}},get_dragOverDropPosition:function(){return this.$f},set_dragOverDropPosition:function(nk){if(ss.referenceEquals(this.$f,nk)){return}this.$f=nk;if(ss.isValue(this.$2$5)){this.$2$5(nk)}},get_feedbackType:function(){return'dropfeedbackuponentry'},get_hasTypeInPill:function(){return ss.isValue(this.$l)&&this.$l.get_hasCalculation()&&this.$l.get_shelfType()===this.get_shelfType()&&(this.get_shelfType()!=='encoding-shelf'||this.$k.get_paneId()===this.$l.get_shelfPaneSpecId())},get_animateTypeInPillPending:function(){return this.$d},createPillDividerDropTarget:function(nk){return new p(this,nk)},matchingDropsFrom:function(nk){return _.find(nk.get_dropPresModels(),ss.mkdel(this,function(nl){return nl.shelfType===this.get_shelfType()}))},canAccept:function(nk,nl){var nm=ss.safeCast(nk,lm);if(!nk.get_hasPayload()||ss.isNullOrUndefined(nm)){return false}if(nm.get_drop().state()!=='resolved'){this.set_dragOverDropPosition(null);if(ss.isInstanceOfType(nm,jc)){return ss.isValue(nm.get_fields())}else if(ss.isInstanceOfType(nm,cj)){return true}else if(ss.isInstanceOfType(nm,Z)){return true}return false}var nn=this.matchingDropsFrom(nm);if(ss.isNullOrUndefined(nn)){this.set_dragOverDropPosition(null);return false}var no=this.$6(nn,nl);this.set_dragOverDropPosition(no);return ss.isValue(no)},dragOver:function(nk){return this.dragOver$1(nk,null)},dragOver$1:function(nk,nl){this.$e=true;this.$h=nl;var nm=this.canAccept(nk,nl);if(!nm){return null}if(ss.isValue(this.$f)&&this.$f.shelfDropAction==='replace'&&this.$f.shelfPosIndex<this.$j.length){return this.$j[this.$f.shelfPosIndex]}return this},dragExit:function(nk){this.$e=false;this.$h=null;this.set_dragOverDropPosition(null)},getDropTarget:function(nk){return this},acceptDrop:function(nk){return this.acceptDrop$1(nk,null)},acceptDrop$1:function(nk,nl){var nm=$.Deferred();if(!ss.isInstanceOfType(nk,cf)){return nm.resolve(false)}nk.get_drop().done(ss.mkdel(this,function(nn){var no=ss.safeCast(nn,cf);var np=this.canAccept(no,nl);var nq=this.matchingDropsFrom(no);var nr=this.$6(nq,nl);var ns=-1;if(ss.isValue(nr)){ns=nr.shelfPosIndex}if(!np){}else if(no.hasOnlyPills()){var nt=no.get_pill();if(nt.shelfVM.get_shelfType()===this.get_shelfType()){var nu=nt.get_indexInShelf();var nv=ns===nu+1&&!nk.isCopyDrag;if(nu>=0&&(ns===nu||nv)){np=false}}if(np){var nw=no.dropPositionForShelf(this,ns);if(!tsConfig.is_mobile&&tab.FeatureFlags.isEnabled('WebFilterDialog')&&this.get_shelfType()==='filter-shelf'){var nx={shelfType:nt.shelfVM.get_shelfType(),shelfPosIndex:nt.get_indexInShelf(),shelfDropAction:'insert',paneSpec:nt.shelfVM.get_shelf().get_paneId()};nw.shelfDropAction='insert';tab.ShelfClientCommands.launchFilterDialog(nt.get_pill().get_column().get_globalName(),'drag-drop-shelf',nw,nx,false,no.isCopyDrag)}else{tab.ShelfClientCommands.moveShelfPill(nt.shelfVM.get_shelf(),this.get_shelf(),nt.get_pill(),nw,no.isCopyDrag)}}}else if(no.hasOnlyFields()){var ny=no.fieldsToDropOnShelf(this.get_shelfType());var nz=no.dropPositionForShelf(this,ns);if(!tsConfig.is_mobile&&tab.FeatureFlags.isEnabled('WebFilterDialog')&&this.get_shelfType()==='filter-shelf'&&ny.length===1){nz.shelfDropAction='insert';tab.ShelfClientCommands.launchFilterDialog(ny[0].get_globalName(),'drag-drop-schema',nz,null,no.isRightDrag,no.isCopyDrag)}else if(no.shouldGetAggregationOfField(ny)){no.selectAggregationForField(this.get_shelfType(),ny[0],ss.mkdel(this,function(nA){var nB=[];nB.push(nA.selectedField);no.addShelfField(this,nB,'invalid-encoding',nz,nA.isRelativeDate)}))}else{no.addShelfField(this,ny,'invalid-encoding',nz,false)}}nm.resolve(np)})).fail(function(nn){nm.reject(false)});return nm},getDropCursor:function(nk){if(!ss.isInstanceOfType(nk,cf)){return spiff.CustomCursor.noOp}var nl=nk;if(nl.hasOnlyPills()&&!nk.isCopyDrag){return spiff.CustomCursor.move}return spiff.CustomCursor.copy},dispose:function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.dragStarted));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.dragEnded));if(ss.isValue(this.$k)){this.$k.remove_shelfChanged(ss.mkdel(this,this.$a))}this.$4();spiff.BaseViewModel.prototype.dispose.call(this)},dragEnded:function(nk){this.$e=false;this.$h=null;this.$0(0)},dragStarted:function(nk){if(nk.get_dragType()==='dragdrop'){if(ss.isInstanceOfType(nk,lm)){nk.get_drop().always(ss.mkdel(this,this.$7));if(nk.get_readyToDrop()){this.$0((this.canAccept(nk,null)?1:2))}}}else{this.$0(0)}},insertAdHocCalc:function(){var nk=$.Deferred();if(this.get_hasTypeInPill()){nk.resolve();return nk}bX.selectedDataSourceNameAsync().done(ss.mkdel(this,function(nl){tab.CalculationCommands.createAdHocCalculation(nl,this.$k.get_shelfType(),this.$j.length,this.$k.get_paneId());nk.resolve()}));return nk},editPill:function(nk,nl){tab.CalculationCommands.editPill(nk,this.get_shelfType(),nl,this.get_shelf().get_paneId())},triggerUpdateScrollContentAction:function(){this.raiseActionEvent(this.$2$1)},$1:function(){return this.$j.length===0},removePill:function(nk){tab.ShelfClientCommands.removeShelfPill(this.$k,nk.get_pill());this.$5()},hasPill:function(nk){return ss.contains(this.$j,nk)},updatePills:function(){if(ss.isNullOrUndefined(this.$k)){return}this.$4();if(ss.isValue(this.$k.get_pills())){var nk=this.$k.get_pills();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new jg(this);nn.set_pill(nm);var no=nn;no.add_disposed(ss.mkdel(this,this.$9));this.$j.push(no)}}this.$5()},$6:function(nk,nl){if(ss.isNullOrUndefined(nk)){return null}var nm=ss.mkdel(this,function(np){var nq=np.shelfPosIndex;var nr=nl;if(ss.isNullOrUndefined(nr)){nr=this.$j.length}return Math.abs(nq-nr)});var nn=function(np){return np.shelfPosIndex===ss.unbox(nl)};var no=null;if(ss.isValue(nl)){no=_.find(nk.shelfDropPositions,nn)}if(ss.isNullOrUndefined(no)){no=_.min(nk.shelfDropPositions,nm)}return no},$c:function(){this.$m=null;if(this.get_hasTypeInPill()){this.$m=this.$l.get_shelfPosition()}},$8:function(){if(this.$i){this.$i=false;tab.StartupUtils.remove_clientFullyLoaded(ss.mkdel(this,this.$8));tab.CommandController.get().remove_commandQueueComplete(ss.mkdel(this,this.$8));if(ss.isValue(this.$2$6)){this.$2$6(this.$d);this.$d=false}}},$b:function(){if(this.get_hasTypeInPill()&&ss.isValue(this.$l.get_shelfPosition())){if(!ss.isValue(this.$m)||ss.unbox(this.$m)!==this.$l.get_shelfPosition()){this.$d=true}if(!this.$i){this.$i=true;tab.CommandController.get().add_commandQueueComplete(ss.mkdel(this,this.$8));tab.StartupUtils.add_clientFullyLoaded(ss.mkdel(this,this.$8))}}this.$c()},$a:function(nk){this.$b();this.updatePills();this.set_IsVisible(nk.get_isVisible())},$4:function(){for(var nk=0;nk<this.$j.length;nk++){var nl=this.$j[nk];nl.remove_disposed(ss.mkdel(this,this.$9));nl.dispose()}ss.clear(this.$j)},$7:function(nk){if(!EventUtils.DragDropManager.get_isDragging()){this.$0(0);return}var nl=this.matchingDropsFrom(nk);this.$0((ss.isValue(nl)?1:2));if(!this.$e){return}this.canAccept(nk,this.$h)},$9:function(nk){ss.remove(this.$j,nk);this.$5()},$3:function(){if(!this.get_hasTypeInPill()){return}this.$b();this.$5()},$2:function(){if(ss.isNullOrUndefined(this.$m)){return}this.$c();this.$5()},$5:function(){if(ss.isValue(this.$2$2)){this.$2$2(this)}},getPillDropDefaultAction:function(nk){var nl=new jd;nl.action=ss.mkdel(this,function(nm){if(!nm){this.removePill(nk)}});nl.cursor=ss.mkdel(this,function(nm){if(!nm){if(this.hasPill(nk)){return spiff.CustomCursor.delete$1}return spiff.CustomCursor.noOp}return spiff.CustomCursor.noOp});return nl}});var lp=global.tab.ShowActionListDialogForDashboardShortcut=ss.mkType(a,'tab.ShowActionListDialogForDashboardShortcut',function(nk){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=nk},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(nk){this.$0()},getCommandId:function(){return{ns:'tabdoc',cmd:'show-action-list-dialog-for-dashboard'}},getKeyComboOrKeyCombos:function(){return lp.keyCombo},getTelemetryKey:function(){return'Show Action List Dialog On Dashboard'}});var lq=global.tab.ShowActionListDialogForWorksheetShortcut=ss.mkType(a,'tab.ShowActionListDialogForWorksheetShortcut',function(nk){this.$0=null;KeyboardShortcuts.CommandKeyboardShortcut.call(this);this.$0=nk},{shouldRequireCommandCheck:function(){return false},executeShortcut:function(nk){this.$0()},getCommandId:function(){return{ns:'tabdoc',cmd:'show-action-list-dialog-for-worksheet'}},getKeyComboOrKeyCombos:function(){return lq.keyCombo},getTelemetryKey:function(){return'Show Action List Dialog On Worksheet'}});var lr=global.tab.ShowMeView=ss.mkType(a,'tab.ShowMeView',function(nk){this.smViewModel=null;this.perUpdateDisposables=new tab.DisposableHolder;this.summaryDom=null;this.buttonsDom=null;ss.makeGenericType(spiff.BaseView$1,[ls]).call(this,nk,new spiff.Template($('<div></div>').addClass('tabAuthShowMe')));this.smViewModel=nk;this.smViewModel.initialize();this.smViewModel.add_propertyChanged(ss.mkdel(this,this.onViewModelPropertyChanged));this.smViewModel.set_closeOnInteraction(false)},{onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[ls]).prototype.onViewModelPropertyChanged.call(this,nk,nl);if(nl.get_propertyName()==='ShowMeCommands'){this.updateCommands()}},initContent:function(){this.summaryDom=$('<div></div>').addClass('tabAuthShowMeSummary');this.buttonsDom=$('<div></div>').addClass('tabAuthShowMeButtons');this.updateCommands();this.element.append(this.buttonsDom);this.element.append(this.summaryDom)},updateCommands:function(){if(ss.isNullOrUndefined(this.buttonsDom)){return}this.perUpdateDisposables.dispose();var nk=null;if(ss.isValue(this.smViewModel)){nk=tab.CommandsPresModelWrapper.create(this.smViewModel.get_showMeCommands())}if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_defaultItem()||0;var nm=-1;var nn=this.element.get(0);var no=null;var np=$(nn).find('.tabAuthShowMeRow').length>0;var nq=$(nn).find('.tabAuthShowMeButtonRecommended');if(np&&!ss.isNullOrUndefined(nq)){nq.removeClass('tabAuthShowMeButtonRecommended')}var nr=nk.get_commandItems();for(var ns=0;ns<nr.length;ns++){var nt=nr[ns];var nu=tab.CommandItemWrapper.create(nt);nm++;if(nu.get_commandsType()==='separator'){$('<div></div>').addClass('tabAuthShowMeDivider').appendTo(this.buttonsDom);continue}if(!np){no=$('<div></div>').addClass('tabAuthShowMeRow').appendTo(this.buttonsDom)}if(ss.isNullOrUndefined(nu.get_commands())){continue}var nv=tab.CommandsPresModelWrapper.create(nu.get_commands());var nw=-1;var nx=nv.get_defaultItem()||0;var ny=nv.get_commandItems();for(var nz=0;nz<ny.length;nz++){var nA=ny[nz];nw++;var nB;if(np){var nC=$(nn).find('.tabAuthShowMeRow').get(nm).children[nw];nB=$(nC)}else{nB=$('<span></span>').addClass('tabAuthShowMeButton').appendTo(no)}if(nw===nx&&nm===nl){nB.addClass('tabAuthShowMeButtonRecommended');nB.attr('title',tab.Strings.AuthShowMeRecommended)}this.attachEventHandlers(nA,nB);this.setCommandIcon(nA,nB,np)}}},updateDescription:function(nk){this.summaryDom.children().remove().end().append(this.$8(tab.CommandItemWrapper.create(nk).get_descriptionText()));if(BrowserSupport.BrowserSupport.IsIE()){var nl=$(document.body);nl.css('z-index','1').css('z-index','0')}},attachEventHandlers:null,setActiveItem:function(nk,nl){this.element.find('.active').removeClass('active');nl.addClass('active');this.updateDescription(nk)},setCommandIcon:function(nk,nl,nm){var nn=this.$7(tab.CommandItemWrapper.create(nk).get_iconRes());if(ss.isValue(nn)){var no=this.smViewModel.isCommandEnabled(nk);if(!nm){nl.addClass('tabAuth-'+nn)}nl.toggleClass('disabled',!no)}},$8:function(nk){nk=ss.replaceAllString(nk,'<img','<span');nk=ss.replaceAllString(nk,'</img>','</span>');var nl=$(nk);nl.find('[src]').each(ss.mkdel(this,function(nm,nn){var no=$(nn);no.removeAttr('width').removeAttr('height').removeAttr('style');var np=nn.attributes['src'].value;if(np.indexOf('TQRC')!==-1){var nq=this.$7(np);no.addClass('tabAuthShowMeIcon-'+nq)}else if(ss.endsWithString(np,'Pill')){no.addClass('tabAuthShowMePill').addClass(np);if(ss.startsWithString(np,'single')){no.text(((np.indexOf('Dimension')!==-1)?tab.Strings.AuthShowMeSingleDimension:tab.Strings.AuthShowMeSingleMeasure))}else{no.text(((np.indexOf('Dimension')!==-1)?tab.Strings.AuthShowMeMultipleDimensions:tab.Strings.AuthShowMeMultipleMeasures))}}}));return nl},$7:function(nk){var nl=new RegExp('/(\\w+)(@2x)?\\.png');var nm=tab.TabResources.lookupFullResourceAlias(nk).match(nl);if(ss.isValue(nm)&&nm.length>=2){return nm[1]}return null}});var ls=global.tab.ShowMeViewModel=ss.mkType(a,'tab.ShowMeViewModel',function(){this.$1=null;this.$2=null;spiff.BaseViewModel.call(this)},{get_viewType:function(){return lr},get_viewModel:function(){return this},get_showMeCommands:function(){if(ss.isNullOrUndefined(this.$1)){return null}return this.$1.get_commands()},get_closeOnInteraction:function(){return ss.isValue(this.$2)&&this.$2.get_mode()===0},set_closeOnInteraction:function(nk){if(ss.isNullOrUndefined(this.$2)){return}this.$2.set_mode((nk?0:2))},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);if(ss.isValue(this.$1)){this.$1.remove_commandsChanged(ss.mkdel(this,this.$0))}tab.ApplicationModel.get_instance().get_workbook().removeDashboardHandler(ss.mkdel(this,this.updateDashboard))},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){this.$2=nk},updateUberPopupPosition:function(){this.$2.updatePosition()},isCommandEnabled:function(nk){var nl=tab.CommandItemWrapper.create(nk);return nl.get_enabled()||ss.isNullOrUndefined(nl.get_enabled())},applyShowMeCommand:function(nk){if(ss.isValue(nk)&&this.isCommandEnabled(nk)){tab.ServerCommands.executeServerCommand(tab.CommandSerializer.deserialize(tab.CommandItemWrapper.create(nk).get_command(),false),'immediately',null,null)}},close:function(){if(ss.isNullOrUndefined(this.$2)){return}this.$2.hide(false)},initialize:function(){tab.ApplicationModel.get_instance().get_workbook().addDashboardUpdatedHandler(ss.mkdel(this,this.updateDashboard))},updateDashboard:function(nk){if(ss.isValue(this.$1)){this.$1.remove_commandsChanged(ss.mkdel(this,this.$0));this.$1=null}if(ss.isValue(nk.get_activeVisual())){this.$1=tab.ModelUtils.findActiveOrDefaultVisual(null).get_showMeModel()}else{this.$1=nk.emptyShowMeModel}if(ss.isValue(this.$1)){this.$1.add_commandsChanged(ss.mkdel(this,this.$0))}this.$0(null)},$0:function(nk){this.notifyPropertyChanged('ShowMeCommands')}});var lt=global.tab.SortEncodingOptionsTemplate=ss.mkType(a,'tab.SortEncodingOptionsTemplate',function(){spiff.Template.call(this,$("<div class='tabAuthPrimitiveOptionsContainer'></div>"))});var lu=global.tab.SortEncodingOptionsView=ss.mkType(a,'tab.SortEncodingOptionsView',function(nk){this.sortEncodingOptionViewModel=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[lv]).call(this,nk,new lt);this.dom=this.get_template();this.sortEncodingOptionViewModel=nk;var nl=nk.get_views();var nm=nl.length;for(var nn=0;nn<nm;nn++){nl[nn].addToDom(this.get_template().domRoot)}});var lv=global.tab.SortEncodingOptionsViewModel=ss.mkType(a,'tab.SortEncodingOptionsViewModel',function(nk){this.$2=null;this.$1=null;spiff.BaseViewModel.call(this);this.$2=nk;this.$2.add_newMarksCardTabEncoding(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$2.remove_newMarksCardTabEncoding(ss.mkdel(this,this.$0))})));if(ss.isValue(nk)&&ss.isValue(nk.get_sortEncodingOptions())){if(nk.get_sortEncodingOptions().actualPrimitiveType==='line'){this.$1=new id(nk)}}},{get_views:function(){var nk=[];if(ss.isValue(this.$1)){nk.push(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[id,ic,Object])).call(null,[this.$1]))}return nk},get_viewType:function(){return lu},get_viewModel:function(){return this},disposeViewModel:function(){if(ss.isValue(this.$1)){this.$1.dispose()}this.dispose()},updateUberPopupViewModel:function(nk){},$0:function(){if(ss.isValue(this.$1)){this.$1.update(this.$2)}}});var lw=global.tab.SortFieldsComboBoxUpdater=ss.mkType(a,'tab.SortFieldsComboBoxUpdater',function(){this.fieldNames=null;this.fieldCaptions=null;this.selectionIndex=0;this.isSelectionInvalid=false},{update:function(nk){tab.Param.verifyValue(this.fieldNames,'fieldNames');tab.Param.verifyValue(this.fieldCaptions,'fieldCaptions');tab.Param.verifyValue(this.selectionIndex,'selectionIndex');var nl=[];for(var nm=0,nn=this.fieldNames.length;nm<nn;nm++){nl.push(new spiff.ComboBoxItem(null,this.fieldCaptions[nm],this.fieldNames[nm],null,null))}nk.setItems(nl);if(this.isSelectionInvalid){nk.set_selectedItem(new spiff.ComboBoxItem(null,tab.Strings.TableCalcMissingSortField,null,null,null))}else{nk.set_selectedItem(nk.get_items()[this.selectionIndex])}nk.set_isSelectionInvalid(this.isSelectionInvalid);nk.set_enabled(true)}});var lx=global.tab.SpecificDimensionsListItemCreator=ss.mkType(a,'tab.SpecificDimensionsListItemCreator',function(){},{createListItemContent:function(nk){var nl="<div class='tabCheckboxListItem tab-icon-toggle tab-unification-check'>\n    <span class='icon'><span class='innerIcon tab-img-check'></span></span>\n    <span class='label'></span>\n<div class='tab-drag-thumb'><div class='tab-drag-thumb-icon'></div></div>\n</div>";var nm=$(nl);var nn=nk.get_data();if(ss.isValue(nn)){nm.find('.label').text(nn.get_addressingName()).attr('title',nn.get_addressingName())}return nm},createListItemDragAvatar:function(nk){return new D(nk)}});var ly=global.tab.StepperControlTemplate=ss.mkType(a,'tab.StepperControlTemplate',function(nk){this.decrementButton=null;this.incrementButton=null;this.valueText=null;spiff.Template.call(this,$(nk))});var lz=global.tab.StepperControlView=ss.mkType(a,'tab.StepperControlView',function(nk,nl){this.$a=null;this.$b=null;this.dom=null;ss.makeGenericType(spiff.BaseView$1,[lA]).call(this,nk,nl);this.dom=nl;this.set_stepperViewModel(nk);this.dom.valueText.addClass(this.get_stepperViewModel().textClass);this.dom.valueText.val(nk.get_value().toString());this.dom.valueText.keydown(tableau.util.preventNonNumericInput);this.dom.valueText.keyup(ss.mkdel(this,this.$8)).blur(ss.mkdel(this,function(nm){this.commitStepValueText()}));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.incrementButton.get(0),ss.mkdel(this,function(nm){this.$7(this.get_stepperViewModel().get_step())})));this.disposables.add$1(spiff.TableauClickHandler.targetAndClick(this.dom.decrementButton.get(0),ss.mkdel(this,function(nm){this.$7(-this.get_stepperViewModel().get_step())})));this.$a=_.debounce(ss.mkdel(this,function(nm){this.$b.set_value(nm);this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}),1000);this.$9();this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())},{get_stepperViewModel:function(){return this.$b},set_stepperViewModel:function(nk){this.$b=nk},tabIndex:function(nk){this.dom.valueText.attr('tabindex',nk.toString())},$7:function(nk){if(!this.get_stepperViewModel().get_isEnabled()){return}var nl=parseInt(this.dom.valueText.val());if(ss.isValue(nl)&&!isNaN(nl)){var nm=nl+nk;if(this.get_stepperViewModel().isValueWithinRange(nm)){this.dom.valueText.val(nm.toString());this.$a(nm)}}},commitStepValueText:function(){if(!this.get_stepperViewModel().get_isEnabled()){return}var nk=parseInt(this.dom.valueText.val());if(this.get_stepperViewModel().get_value()===nk){return}else if(ss.isValue(nk)&&!isNaN(nk)){this.get_stepperViewModel().set_value(nk)}},$8:function(nk){if(!this.get_stepperViewModel().get_isEnabled()){return}if(nk.which===13){this.commitStepValueText()}},$9:function(){if(this.get_stepperViewModel().get_isEnabled()){this.dom.valueText.prop('disabled',false)}else{this.dom.valueText.prop('disabled',true)}},onViewModelPropertyChanged:function(nk,nl){ss.makeGenericType(spiff.BaseView$1,[lA]).prototype.onViewModelPropertyChanged.call(this,nk,nl);if(nl.get_propertyName()==='Value'){this.dom.valueText.val(this.get_stepperViewModel().get_value().toString())}else if(nl.get_propertyName()==='IsEnabled'){this.$9()}else if(nl.get_propertyName()==='IsIncrementEnabled'){this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled())}else if(nl.get_propertyName()==='IsDecrementEnabled'){this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled())}}});var lA=global.tab.StepperControlViewModel=ss.mkType(a,'tab.StepperControlViewModel',function(nk,nl,nm,nn){this.$5=0;this.$4=0;this.$6=0;this.$0=0;this.$7=0;this.$2=false;this.textClass=null;this.$3=false;this.$1=false;spiff.BaseViewModel.call(this);this.$5=nk;this.$4=nl;this.$6=nm;this.$7=nn;this.$0=nn;this.$2=true;this.$3=this.$7<this.$4;this.$1=this.$7>this.$5},{get_isEnabled:function(){return this.$2},set_isEnabled:function(nk){if(this.$2!==nk){this.$2=nk;if(!this.$2){this.set_isIncrementEnabled(false);this.set_isDecrementEnabled(false)}else{this.set_value((ss.isValue(this.get_value())?this.get_value():this.get_initValue()));this.set_isIncrementEnabled(this.get_value()<this.get_max());this.set_isDecrementEnabled(this.get_value()>this.get_min())}this.notifyPropertyChanged('IsEnabled')}},get_isIncrementEnabled:function(){return this.$3},set_isIncrementEnabled:function(nk){if(this.$3!==nk){this.$3=nk;this.notifyPropertyChanged('IsIncrementEnabled')}},get_isDecrementEnabled:function(){return this.$1},set_isDecrementEnabled:function(nk){if(this.$1!==nk){this.$1=nk;this.notifyPropertyChanged('IsDecrementEnabled')}},get_min:function(){return this.$5},get_max:function(){return this.$4},get_initValue:function(){return this.$0},get_step:function(){return this.$6},get_value:function(){return this.$7},set_value:function(nk){if(!this.$2){return}if(this.$7!==nk){if(ss.isValue(nk)&&!isNaN(nk)&&this.isValueWithinRange(nk)){this.$7=nk;this.set_isIncrementEnabled(this.$7<this.get_max());this.set_isDecrementEnabled(this.$7>this.get_min())}this.notifyPropertyChanged('Value')}},isValueWithinRange:function(nk){return nk>=this.$5&&nk<=this.$4},increment:function(){this.set_value(this.get_value()+this.get_step())},decrement:function(){this.set_value(this.get_value()-this.get_step())}});var lB=global.tab.StrokeWidthPickerComponent=ss.mkType(a,'tab.StrokeWidthPickerComponent',function(nk,nl){ss.makeGenericType(spiff.ReactSpiffAdapter$3,[lC,Object,Object]).call(this,tab.ObjectRegistry.newView(lC).call(null,[new lD]),nk,nl);this.get_widget().get_viewModel().set_selectedStrokeWidth(nk.selectedStrokeWidth);this.get_widget().get_viewModel().addUpdated(nk.handleStrokeWidthSelected)},{handleWidgetPropertyChanged:function(nk,nl){},updateWidgetState:function(nk){this.get_widget().get_viewModel().set_selectedStrokeWidth(nk.selectedStrokeWidth)}},{create:function(nk){return React.createElement(lB,nk)}});var lC=global.tab.StrokeWidthPickerView=ss.mkType(a,'tab.StrokeWidthPickerView',function(nk){ss.makeGenericType(lE,[lD]).call(this,nk,spiff.Template.fromHtml("<div class='tabStrokeWidthPicker'></div>"))},{$9:function(){return this.get_viewModel()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.updateContent()},onViewModelPropertyChanged:function(nk,nl){this.updateContent()},createPicker:function(){for(var nk=1;nk<=5;nk++){this.$7(nk)}},$7:function(nk){spiff.ClickHandler.targetAndClick($('<div></div>').addClass(lC.buildSpriteName(nk)).addClass('tabStrokeWidth').addClass('tabStylePickerButton').toggleClass('tabStylePickerButtonSelected',nk===this.$9().get_selectedStrokeWidth()).appendTo(this.element),this.$8(nk))},$8:function(nk){return ss.mkdel(this,function(){this.$9().set_selectedStrokeWidth(nk)})},updateContent:function(){this.removePicker();this.createPicker()},removePicker:function(){this.element.children().remove()}},{buildSpriteName:function(nk){return'strokewidth'+nk}});var lD=global.tab.StrokeWidthPickerViewModel=ss.mkType(a,'tab.StrokeWidthPickerViewModel',function(){this.$0=1;this.$2$1=null;spiff.BaseViewModel.call(this)},{add_selectedStrokeWidthUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_selectedStrokeWidthUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_selectedStrokeWidth:function(){return this.$0},set_selectedStrokeWidth:function(nk){if(this.$0===nk){return}this.$0=nk;this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$1,nk);this.notifyPropertyChanged('SelectedStrokeWidth')},addUpdated:function(nk){this.add_selectedStrokeWidthUpdated(nk);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_selectedStrokeWidthUpdated(nk)})))}});var lE=global.tab.StylePickerView$1=ss.mkType(a,'tab.StylePickerView$1',function(nk){var nl=ss.registerGenericClassInstance(lE,[nk],function(nm,nn){ss.makeGenericType(spiff.BaseView$1,[nk]).call(this,nm,nn)},{createPicker:null,updateContent:null,removePicker:null},null,function(){return ss.makeGenericType(spiff.BaseView$1,[nk])},function(){return[tab.IWidget,ss.makeGenericType(tab.IView$1,[nk]),ss.IDisposable,tab.IAppendableView]});nl.stylePickerButtonClassName='tabStylePickerButton';nl.stylePickerSelectedButtonClassName='tabStylePickerButtonSelected';return nl});ss.initGenericClass(lE,1);var lF=global.tab.TabbedPaneView=ss.mkType(a,'tab.TabbedPaneView',function(nk){this.$a=null;this.$9=null;this.$8=null;this.$b=null;ss.makeGenericType(spiff.BaseView$1,[lG]).call(this,nk,new k);this.$a=tab.ObjectRegistry.resolve(spiff.TabControl).call(null,[this.get_template()])},{get_paneContents:function(){return this.get_viewModel().get_paneViewModels()},get_activePaneTitle:function(){return this.$8},set_activePaneTitle:function(nk){this.$8=nk;this.$a.selectTab(this.$b[nk])},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$7()},dispose:function(){this.$a.dispose();tab.MiscUtil.dispose(this.$9);ss.makeGenericType(spiff.BaseView$1,[lG]).prototype.dispose.call(this)},$7:function(){this.$9=[];this.$b={};var nk=this.get_viewModel().get_paneViewModels();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=nm;if(ss.isValue(nn)){var no=tab.ObjectRegistry.newView$1(ss.makeGenericType(tab.IView$1,[tab.IViewModel])).call(null,nn.get_contentViewType(),[nn.get_contentViewModel()]);if(!ss.isNullOrEmptyString(nn.get_additionalContentViewClass())){no.get_rootElement().addClass(nn.get_additionalContentViewClass())}this.$9.push(no);this.$b[nn.get_title()]=nn.get_id();this.$a.addTab(nn.get_id(),nn.get_title(),no,true)}}this.set_activePaneTitle(this.get_viewModel().get_paneViewModels()[0].get_title())},selectNextTab:function(){if(this.get_viewModel().get_paneViewModels().length<2){return false}var nk=-1;for(var nl=0;nl<this.get_viewModel().get_paneViewModels().length;nl++){if(ss.referenceEquals(this.get_viewModel().get_paneViewModels()[nl].get_title(),this.get_activePaneTitle())){nk=nl;break}}if(nk!==-1){if(nk===this.get_viewModel().get_paneViewModels().length-1){nk=0}else{nk++}this.set_activePaneTitle(this.get_viewModel().get_paneViewModels()[nk].get_title());return true}return false}});var lG=global.tab.TabbedPaneViewModel=ss.mkType(a,'tab.TabbedPaneViewModel',function(nk){this.$0=null;spiff.BaseViewModel.call(this);this.$0=nk},{get_paneViewModels:function(){return this.$0}});var lH=global.tab.TabButtonModel=ss.mkType(a,'tab.TabButtonModel',function(nk,nl,nm,nn,no){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.set_sheetName(nk);this.set_buttonClass(nl);this.set_iconClass(nm);this.set_onClick(nn);this.$1(no)},{get_sheetName:function(){return this.$1$1},set_sheetName:function(nk){this.$1$1=nk},get_buttonClass:function(){return this.$1$2},set_buttonClass:function(nk){this.$1$2=nk},get_iconClass:function(){return this.$1$3},set_iconClass:function(nk){this.$1$3=nk},get_onClick:function(){return this.$1$4},set_onClick:function(nk){this.$1$4=nk},get_titleText:function(){return this.get_sheetName()+(ss.isNullOrUndefined(this.$0())?'':(' ('+this.$0()+')'))},$0:function(){return this.$1$5},$1:function(nk){this.$1$5=nk}});var lI=global.tab.TabControlButtonModelsFactory=ss.mkType(a,'tab.TabControlButtonModelsFactory',null,null,{controlButtons:function(nk){if(tsConfig.is_metrics_authoring){return[]}if(tsConfig.is_mobile){var nl=[];nl.push(new iL(nk));return nl}var nm=[];nm.push(new iL(nk));nm.push(new iJ(nk));nm.push(new iK(nk));return nm}});var lJ=global.tab.TableCalcDialogTemplate=ss.mkType(a,'tab.TableCalcDialogTemplate',function(nk){this.$1=null;this.$2=null;spiff.Template.call(this,nk||$("<div class='tabTableCalcDialogBody'>\n        <div class='tabPrimaryTableCalcEditor'></div>\n        <div class='tabSecondaryTableCalcEditor'></div>\n    </div>"));this.$1=this.getElementBySelector('.tabPrimaryTableCalcEditor');this.$2=this.getElementBySelector('.tabSecondaryTableCalcEditor')},{get_primaryEditorBody:function(){return this.$1},get_secondaryEditorBody:function(){return this.$2}});var lK=global.tab.TableCalcDialogView=ss.mkType(a,'tab.TableCalcDialogView',function(nk){this.$p=null;this.$q=null;this.$r=null;this.$t=null;this.$s=null;this.$o=null;this.$n=null;this.$u=null;this.defaultStartingPosition=null;ss.makeGenericType(spiff.BaseView$1,[du]).call(this,nk,new lJ(null));this.get_viewModel().add_tableCalcsUpdated(ss.mkdel(this,this.$g));this.get_viewModel().add_tableCalcsClosed(ss.mkdel(this,this.$f));this.get_viewModel().add_activate(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_tableCalcsUpdated(ss.mkdel(this,this.$g));this.get_viewModel().remove_tableCalcsClosed(ss.mkdel(this,this.$f));this.get_viewModel().remove_activate(ss.mkdel(this,this.$a))})));this.$s=$("<div class='tabButtonArea addSecondaryCalculation'></div>");this.$o=$("<div class='tabButtonArea showCalculationAssistance'></div>")},{get_dialog:function(){return this.$p},$l:function(){return this.get_template()},$m:function(){return this.get_viewModel().get_dialogPosition()||this.defaultStartingPosition},get_primaryEditor:function(){return this.$r},get_secondaryEditor:function(){return this.$t},dispose:function(){this.$9();ss.makeGenericType(spiff.BaseView$1,[du]).prototype.dispose.call(this)},$a:function(){if(ss.isValue(this.$p)){this.$p.moveToTop()}},updateDomFromModel:function(){this.$j();this.$k();this.$i()},$g:function(){if(!this.get_viewModel().get_hasTableCalc()){return}if(ss.isNullOrUndefined(this.$p)){this.createDialog()}else{this.updateDomFromModel()}if(!this.$p.get_isShown()){this.onAddedToDom();this.get_dialog().show();this.updateScrollers();this.get_dialog().ensureOnScreen()}},initDom:function(){if(this.get_viewModel().get_hasTableCalc()){this.$g()}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$r)&&!this.$r.addedToDom){this.$r.addToDom(this.$l().get_primaryEditorBody());this.$l().get_primaryEditorBody().append(this.$s);this.$l().get_primaryEditorBody().append(this.$o)}if(ss.isValue(this.$t)&&!this.$t.addedToDom){this.$t.addToDom(this.$l().get_secondaryEditorBody())}},updateScrollers:function(){if(ss.isValue(this.$r)){this.$r.adjustSizesBasedOnContent()}if(ss.isValue(this.$t)){this.$t.adjustSizesBasedOnContent()}},createDialog:function(){if(ss.isNullOrUndefined(this.get_viewModel().get_primaryTableCalcViewModel())){return}var nk=new spiff.Dialog('',this.element);nk.set_stayInWindow(true);this.$p=nk;if(ss.isValue(this.$m())){this.$p.set_startingPositionX(this.$m().x);this.$p.set_startingPositionY(this.$m().y)}this.$p.add_propertyChanged(ss.mkdel(this,this.$d));this.$p.get_dialogElement().addClass('tabTableCalcEditDialog');this.$p.set_titleUnescaped(tab.Strings.TableCalcDialogTitle);this.$q=$("<span class='tabTableCalcFieldCaption'></span>").appendTo(this.$p.get_titleElement());this.$j();this.$p.disableTextSelection();this.$p.get_dialogElement().addClass('tabSuppressVizTooltipsAndOverlays');this.$p.configMoveDragSource(spiff.Dialog.defaultDraggableDialogConfigurer);this.$p.add_closed(ss.mkdel(this,this.$c));this.$r=tab.ObjectRegistry.newView(lM).call(null,[this.get_viewModel().get_primaryTableCalcViewModel()]);this.$k();this.$7();this.$i()},$7:function(){if(ss.isValue(this.$u)){return}this.$u=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcShowCalculationAssistance,false);this.$u.addToDom(this.$o);this.$u.add_propertyChanged(ss.mkdel(this,this.$e))},$i:function(){this.$u.set_selected(this.get_viewModel().get_isCalcAssistanceEnabled());this.$u.set_disabled(this.get_viewModel().get_isCalcAssistanceWidgetDisabled())},$d:function(nk,nl){if(nl.get_propertyName()==='position'){this.get_viewModel().set_dialogPosition(this.$p.get_position())}if(nl.get_propertyName()==='isActive'){this.get_viewModel().set_isActive(this.$p.get_isActive())}},$9:function(){if(ss.isNullOrUndefined(this.$p)){return}this.$p.remove_closed(ss.mkdel(this,this.$c));this.$p.remove_propertyChanged(ss.mkdel(this,this.$d));this.$r=null;this.$t=null;this.$8();this.$p=tab.MiscUtil.dispose$1(this.$p)},$j:function(){if(ss.isNullOrUndefined(this.$q)){return}if(ss.isNullOrEmptyString(this.get_viewModel().get_fieldCaption())){this.$q.text('');this.$q.removeAttr('title');return}this.$q.text(this.get_viewModel().get_fieldCaption());this.$q.attr('title',this.get_viewModel().get_fieldCaption())},$k:function(){var nk=this.get_viewModel().get_allowSecondaryTableCalc();var nl=this.get_viewModel().get_hasSecondaryTableCalc();if(nl&&nk){if(ss.isNullOrUndefined(this.$t)){this.$t=tab.ObjectRegistry.newView(lM).call(null,[this.get_viewModel().get_secondaryTableCalcViewModel()]);if(this.addedToDom){this.$t.addToDom(this.$l().get_secondaryEditorBody())}}this.$l().get_secondaryEditorBody().toggleClass('showSecondary',true);this.$t.adjustSizesBasedOnContent();this.$p.ensureOnScreen()}else{this.$l().get_secondaryEditorBody().toggleClass('showSecondary',false);this.$t=null}if(nk){this.$h();this.$n.set_selected(nl)}else{this.$8()}},$h:function(){if(ss.isValue(this.$n)){return}this.$n=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcAddSecondary,this.get_viewModel().get_hasSecondaryTableCalc());this.$n.addToDom(this.$s);this.$n.add_propertyChanged(ss.mkdel(this,this.$b))},$8:function(){if(ss.isNullOrUndefined(this.$n)){return}this.$n.remove_propertyChanged(ss.mkdel(this,this.$b));this.$n.dispose();this.$n=null},$c:function(nk,nl){this.get_viewModel().closeTableCalcs()},$f:function(){this.$9()},$b:function(nk,nl){if(nl.get_propertyName()==='selected'){if(this.$n.get_selected()){this.get_viewModel().addSecondaryTableCalc()}else{this.get_viewModel().removeSecondaryTableCalc()}}},$e:function(nk,nl){if(nl.get_propertyName()!=='selected'){return}this.get_viewModel().setCalculationAssistanceState(this.$u.get_selected())}});var lL=global.tab.TableCalcEditorTemplate=ss.mkType(a,'tab.TableCalcEditorTemplate',function(nk){this.$5=null;this.$k=null;this.$j=null;this.$6=null;this.$7=null;this.$4=null;this.$e=null;this.$a=null;this.$h=null;this.$g=null;this.$i=null;this.$3=null;this.$b=null;this.$c=null;this.$8=null;this.$l=null;this.$9=null;this.$f=null;this.$d=null;this.$2$1=null;this.$2$2=null;spiff.Template.call(this,nk||$("<div class='tabTableCalcEditor'>\n        <div class='tabTableCalcTypeArea'>\n            <div class='tabTableCalcTitle tabHeader3'></div>\n            <div class='tabTableCalcType tabRow comboRow'></div>\n            <div class='tabTableCalcNestedLabel tabHeader3 hide'></div>\n            <div class='tabTableCalcNested tabRow comboRow hide'></div>\n            <div class='tabTableCalcSortDirection tabRow comboRow hide'></div>\n            <div class='tabTableCalcRankType tabRow comboRow hide'></div>\n            <div class='tabTableCalcAggregation tabRow comboRow hide'></div>\n            <div class='tabTableCalcAllPages tabRow checkRow hide'></div>\n            <div class='tabTableCalcNullSetting tabRow checkRow hide'></div>\n            <div class='tabTableCalcWindowOptions tabRow comboRow hide'></div>\n            <div class='tabTableCalcComputeCompound tabRow checkRow hide'></div>\n        </div>\n        <div class='tabTableCalcComputeUsing'>\n            <span class='label tabTableCalcComputeUsingHeader tabHeader3'></span>\n            <div class='tabTableCalcOrdering tabRow'></div>\n            <div class='tabTableCalcSpecificDim hide tabRow'></div>\n        </div>\n        <div class='tabTableCalcAtTheLevel tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcDifferenceFrom tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRelativeTo tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRestartEvery tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcSort tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n    </div>"));this.$5=this.getElementBySelector('.tabTableCalcTitle');this.$k=this.getElementBySelector('.tabTableCalcTypeArea');this.$j=this.getElementBySelector('.tabTableCalcType');this.$6=this.getElementsBySelector('.tabTableCalcNested');this.$7=this.getElementBySelector('.tabTableCalcNestedLabel');this.$4=this.getElementBySelector('.tabTableCalcDifferenceFrom');this.$h=this.getElementBySelector('.tabTableCalcAtTheLevel');this.$e=this.getElementBySelector('.tabTableCalcSortDirection');this.$a=this.getElementBySelector('.tabTableCalcRankType');this.$g=this.getElementBySelector('.tabTableCalcAllPages');this.$i=this.getElementBySelector('.tabTableCalcComputeCompound');this.$3=this.getElementBySelector('.tabTableCalcAggregation');this.$b=this.getElementBySelector('.tabTableCalcRelativeTo');this.$c=this.getElementBySelector('.tabTableCalcRestartEvery');this.$8=this.getElementBySelector('.tabTableCalcNullSetting');this.$l=this.getElementBySelector('.tabTableCalcWindowOptions');this.$d=this.getElementBySelector('.tabTableCalcSort');this.$9=this.getElementBySelector('.tabTableCalcOrdering');this.$f=this.getElementBySelector('.tabTableCalcSpecificDim');this.$7.text(tab.Strings.TableCalcNestedCalculations);this.$h.find('.label').text(tab.Strings.TableCalcAtTheLevel);this.$4.find('.label').text(tab.Strings.TableCalcRelativeTo);this.$b.find('.label').text(tab.Strings.TableCalcRelativeTo);this.$c.find('.label').text(tab.Strings.TableCalcRestartingEvery);this.$d.find('.label').text(tab.Strings.TableCalcSortOrder);this.getElementBySelector('.tabTableCalcComputeUsing .label').text(tab.Strings.TableCalcComputeUsing);this.set_variableElements([this.$7,this.$6,this.$4,this.$e,this.$a,this.$h,this.$g,this.$i,this.$3,this.$b,this.$c,this.$8,this.$l,this.$d]);this.set_variableWidthComboboxElements([this.$h,this.$4,this.$b,this.$c,this.$d])},{get_variableElements:function(){return this.$2$1},set_variableElements:function(nk){this.$2$1=nk},get_variableWidthComboboxElements:function(){return this.$2$2},set_variableWidthComboboxElements:function(nk){this.$2$2=nk},get_editorTitleElem:function(){return this.$5},get_tableCalcTypeAreaElem:function(){return this.$k},get_tableCalcTypeElem:function(){return this.$j},get_nestedTableCalcsElem:function(){return this.$6},get_nestedTableCalcsLabelElem:function(){return this.$7},get_differenceFromElem:function(){return this.$4},get_sortDirectionElem:function(){return this.$e},get_rankTypeElem:function(){return this.$a},get_tableCalcAtTheLevelElem:function(){return this.$h},get_tableCalcAllPagesElem:function(){return this.$g},get_tableCalcComputeCompoundElem:function(){return this.$i},get_aggregationElem:function(){return this.$3},get_relativeToElem:function(){return this.$b},get_restartEveryElem:function(){return this.$c},get_nullIfIncompleteElem:function(){return this.$8},get_windowOptionsElem:function(){return this.$l},get_orderingElem:function(){return this.$9},get_specificDimensionsElem:function(){return this.$f},get_sortElem:function(){return this.$d},adjustCssBasedOnContent:function(){this.$1();this.$2()},$1:function(){var nk=0;var nl=this.$k.children().get();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(!$(nn).hasClass('hide')){nk=9;break}}this.$k.css('margin-bottom',nk)},$2:function(){var nk=this.get_variableWidthComboboxElements();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];nm.find('.label').css('min-width','')}var nn=_.filter(this.get_variableWidthComboboxElements(),function(nu){return nu.is(':visible')});if(nn.length<=1){return}var no=0;for(var np=0;np<nn.length;np++){var nq=nn[np];var nr=tab.DoubleUtil.roundToInt(nq.find('.label').width());if(nr>no){no=nr}}for(var ns=0;ns<nn.length;ns++){var nt=nn[ns];nt.find('.label').css('min-width',no+'px')}}});var lM=global.tab.TableCalcEditorView=ss.mkType(a,'tab.TableCalcEditorView',function(nk,nl){this.$G=null;this.$E=null;this.$D=null;this.$I=null;this.$H=null;this.$C=null;this.$F=null;this.$J=null;this.$K=null;ss.makeGenericType(spiff.BaseView$1,[lN]).call(this,nk,nl||new lL(null));this.$G=this.get_template();this.get_viewModel().add_tableCalcUpdated(ss.mkdel(this,this.$d));this.get_viewModel().add_tableCalcTitleUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_tableCalcUpdated(ss.mkdel(this,this.$d));this.get_viewModel().remove_tableCalcTitleUpdated(ss.mkdel(this,this.$c))})))},{get_dom:function(){return this.$G},get_orderingAddressingListView:function(){return this.$H},get_maxVisibleOrderingAddressingItems:null,$d:function(){if(this.get_viewModel().get_tableCalcType()!==this.$E){this.$b()}this.$z(this.get_viewModel().get_tableCalcType())},$c:function(){this.$G.get_editorTitleElem().text(this.get_viewModel().get_title())},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$G.get_editorTitleElem().text(this.get_viewModel().get_title());this.$z(this.get_viewModel().get_tableCalcType())},adjustSizesBasedOnContent:function(){this.updateOrderingAddressingScroller();this.$G.adjustCssBasedOnContent()},$b:function(){this.$G.get_variableElements().forEach(lM.$1)},$z:function(nk){this.$E=nk;this.$y();switch(nk){case'diff':case'pct-diff':case'pct-value':{this.$l();break}case'pct-total':{this.$q();break}case'rank':case'pct-rank':{this.$r();break}case'window':{this.$A();break}case'cumulative':{this.$j();break}case'custom':{this.$k();break}default:{break}}this.$G.adjustCssBasedOnContent()},$l:function(){this.$m();this.$f();if(this.get_viewModel().get_tableCalcType()==='pct-diff'){this.$g()}this.$i();this.$w()},$q:function(){this.$f();this.$h(this.get_viewModel().get_allPagesState(),this.get_viewModel().get_allPages());this.$i();this.$w()},$r:function(){this.$v();this.$s();this.$i()},$j:function(){this.$e();this.$u();this.$i();this.$w()},$A:function(){this.$B();this.$i();this.$w()},$k:function(){this.$n();this.$f();this.$t();this.$u();this.$o();this.$h(this.get_viewModel().get_customAllPagesState(),this.get_viewModel().get_customAllPages());this.$i();this.$w()},$y:function(){if(this.get_viewModel().get_tableCalcTypeWidgetState()==='widget-state-hidden'){lM.$1(this.$G.get_editorTitleElem());lM.$1(this.$G.get_tableCalcTypeElem());return}lM.$2(this.$G.get_editorTitleElem());lM.$2(this.$G.get_tableCalcTypeElem());lM.$0(this.$G.get_tableCalcTypeElem(),'tableCalcTypeCombo',this.get_viewModel().get_tableCalcTypeComboBoxVM())},$n:function(){if(this.get_viewModel().get_nestedCalcsWidgetState()==='widget-state-hidden'){lM.$1(this.$G.get_nestedTableCalcsLabelElem());lM.$1(this.$G.get_nestedTableCalcsElem());return}lM.$2(this.$G.get_nestedTableCalcsLabelElem());lM.$2(this.$G.get_nestedTableCalcsElem());lM.$0(this.$G.get_nestedTableCalcsElem(),'nestedCalcsCombo',this.get_viewModel().get_nestedCalcsComboBoxVM())},$m:function(){lM.$2(this.$G.get_differenceFromElem());lM.$0(this.$G.get_differenceFromElem().find('.tabTableCalcLabeledCombo'),'diffCombo',this.get_viewModel().get_differenceFromComboBoxVM())},$e:function(){lM.$2(this.$G.get_aggregationElem());lM.$0(this.$G.get_aggregationElem(),'aggrCombo',this.get_viewModel().get_aggregationComboBoxVM())},$f:function(){if(this.get_viewModel().get_atTheLevelState()==='widget-state-hidden'){lM.$1(this.$G.get_tableCalcAtTheLevelElem());return}lM.$2(this.$G.get_tableCalcAtTheLevelElem());lM.$0(this.$G.get_tableCalcAtTheLevelElem().find('.tabTableCalcLabeledCombo'),'atTheLevelCombo',this.get_viewModel().get_atTheLevelComboBoxVM());lM.$3(this.$G.get_tableCalcAtTheLevelElem().find('.label'),this.get_viewModel().get_atTheLevelState()==='widget-state-disabled')},$g:function(){if(this.get_viewModel().get_computeCompoundedRateState()==='widget-state-hidden'){lM.$1(this.$G.get_tableCalcComputeCompoundElem());return}lM.$2(this.$G.get_tableCalcComputeCompoundElem());if(ss.isNullOrUndefined(this.$D)){this.$D=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcComputeCompoundedRate,this.get_viewModel().get_computeCompoundedRate());this.$D.addToDom(this.$G.get_tableCalcComputeCompoundElem());this.$D.add_propertyChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$D.remove_propertyChanged(ss.mkdel(this,this.$8));this.$D.dispose()})))}this.$D.set_selected(this.get_viewModel().get_computeCompoundedRate());this.$D.set_disabled(this.get_viewModel().get_computeCompoundedRateState()==='widget-state-disabled')},$h:function(nk,nl){if(nk==='widget-state-hidden'){lM.$1(this.$G.get_tableCalcAllPagesElem());return}lM.$2(this.$G.get_tableCalcAllPagesElem());if(ss.isNullOrUndefined(this.$C)){this.$C=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcComputeTotalAcrossPages,nl);this.$C.addToDom(this.$G.get_tableCalcAllPagesElem());this.$C.add_propertyChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$C.remove_propertyChanged(ss.mkdel(this,this.$7));this.$C=tab.MiscUtil.dispose$1(this.$C)})))}this.$C.set_selected(nl);this.$C.set_disabled(nk==='widget-state-disabled')},$i:function(){this.$p();this.$x()},$p:function(){lM.$2(this.$G.get_orderingElem());if(ss.isNullOrUndefined(this.$I)){this.$I=spiff.ListView.createListView(this.get_viewModel().get_orderingTypeListVM(),new iV);this.disposables.add$1(this.$I);this.$G.get_orderingElem().append(this.$I.element)}},$x:function(){var nk=this.get_viewModel().get_orderingAddressingListVM();if(ss.isNullOrUndefined(nk.get_collection())||nk.get_collection().length<=0){lM.$1(this.$G.get_specificDimensionsElem());return}lM.$2(this.$G.get_specificDimensionsElem());if(ss.isNullOrUndefined(this.$H)){this.$9()}this.updateOrderingAddressingScroller()},$9:function(){var nk=new lx;this.$H=spiff.ListView.createListView(this.get_viewModel().get_orderingAddressingListVM(),nk);this.$H.element.addClass('tabCheckboxList');this.disposables.add$1(this.$H);this.$H.addToDom(this.$G.get_specificDimensionsElem());var nl=new spiff.ListViewDragSortFeedback;nl.set_avatarCreator(nk);var nm=nl;this.$H.set_dragFeedback(nm);this.disposables.add$1(nm)},updateOrderingAddressingScroller:null,updateSpecificDimensionsHeight:function(){if(ss.isNullOrUndefined(this.$H)){return}var nk=this.$H.get_itemViews()[0].element.outerHeight(true);this.$G.get_specificDimensionsElem().css({height:nk*this.get_viewModel().get_orderingAddressingListVM().get_collection().length+3+'px','max-height':nk*this.get_maxVisibleOrderingAddressingItems()+3+'px'})},$w:function(){if(this.get_viewModel().get_sortState()==='widget-state-hidden'){lM.$1(this.$G.get_sortElem());return}lM.$2(this.$G.get_sortElem());if(ss.isNullOrUndefined(this.$J)){var nk=new spiff.ComboBoxTemplate;nk.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]).addClass(spiff.ComboBoxView.noIconClass);this.$J=new spiff.Button(nk.domRoot);this.$J.onClick(ss.mkdel(this,function(){this.get_viewModel().showSortOptions(this.$J.element)}));this.$G.get_sortElem().find('.tabTableCalcLabeledCombo').append(this.$J.element);this.disposables.add$1(this.$J);this.disposables.add$1(nk)}var nl=this.$J.element.find('.tabComboBoxName');nl.text(this.get_viewModel().get_sortModeCaption()).attr('title',this.get_viewModel().get_sortModeCaption());this.$J.set_disabled(this.get_viewModel().get_sortState()==='widget-state-disabled');this.$J.element.toggleClass('invalid',this.get_viewModel().get_tableCalcSortOptionVM().get_shouldShowSortFieldSelectionAsInvalid());lM.$3(this.$G.get_sortElem().find('.label'),this.get_viewModel().get_sortState()==='widget-state-disabled')},$s:function(){if(this.get_viewModel().get_rankTypeState()==='widget-state-hidden'){lM.$1(this.$G.get_rankTypeElem());return}lM.$2(this.$G.get_rankTypeElem());lM.$0(this.$G.get_rankTypeElem(),'rankCombo',this.get_viewModel().get_rankTypeComboBoxVM())},$v:function(){lM.$2(this.$G.get_sortDirectionElem());lM.$0(this.$G.get_sortDirectionElem(),'sortDirCombo',this.get_viewModel().get_sortDirectionComboBoxVM())},$t:function(){if(this.get_viewModel().get_customRelativeToState()==='widget-state-hidden'){lM.$1(this.$G.get_relativeToElem());return}lM.$2(this.$G.get_relativeToElem());lM.$0(this.$G.get_relativeToElem().find('.tabTableCalcLabeledCombo'),'relativeToCombo',this.get_viewModel().get_customRelativeToComboBoxVM());lM.$3(this.$G.get_relativeToElem().find('.label'),this.get_viewModel().get_customRelativeToState()==='widget-state-disabled')},$u:function(){if(this.get_viewModel().get_restartEveryState()==='widget-state-hidden'){lM.$1(this.$G.get_restartEveryElem());return}lM.$2(this.$G.get_restartEveryElem());lM.$0(this.$G.get_restartEveryElem().find('.tabTableCalcLabeledCombo'),'restartEveryCombo',this.get_viewModel().get_restartEveryComboBoxVM());lM.$3(this.$G.get_restartEveryElem().find('.label'),this.get_viewModel().get_restartEveryState()==='widget-state-disabled')},$o:function(){if(this.get_viewModel().get_customNullIfIncompleteState()==='widget-state-hidden'){lM.$1(this.$G.get_nullIfIncompleteElem());return}if(ss.isNullOrUndefined(this.$F)){this.$F=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowNullSetting,this.get_viewModel().get_customNullIfIncomplete());this.$F.addToDom(this.$G.get_nullIfIncompleteElem());this.$F.add_propertyChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$F.remove_propertyChanged(ss.mkdel(this,this.$a));this.$F=tab.MiscUtil.dispose$1(this.$F)})))}lM.$2(this.$G.get_nullIfIncompleteElem());this.$F.set_selected(this.get_viewModel().get_customNullIfIncomplete());this.$F.set_disabled(this.get_viewModel().get_customNullIfIncompleteState()==='widget-state-disabled')},$B:function(){lM.$2(this.$G.get_windowOptionsElem());if(ss.isNullOrUndefined(this.$K)){var nk=new spiff.ComboBoxTemplate;nk.domRoot.addClass(spiff.ComboBoxView.classesForTheme[3]).addClass(spiff.ComboBoxView.noIconClass);this.$K=new spiff.Button(nk.domRoot);var nl=this.get_viewModel().get_typeSpecificTableCalcVM();this.$K.onClick(ss.mkdel(this,function(nn){nl.showWindowOptions(this.$K.element)}));this.$G.get_windowOptionsElem().append(this.$K.element);this.disposables.add$1(this.$K);this.disposables.add$1(nk)}var nm=this.$K.element.find('.tabComboBoxName');nm.text(this.get_viewModel().get_summaryCaption())},$8:function(nk,nl){if(nl.get_propertyName()==='selected'){this.get_viewModel().computeCompoundedRateChanged(this.$D.get_selected())}},$7:function(nk,nl){if(ss.isNullOrUndefined(this.$C)){return}var nm=this.$C.get_selected();this.get_viewModel().allPagesChanged(nm)},$a:function(nk,nl){if(ss.isNullOrUndefined(this.$F)){return}var nm=this.$F.get_selected();this.get_viewModel().customNullIfIncompleteChanged(nm)}},{$2:function(nk){if(ss.isNullOrUndefined(nk)){return}nk.toggleClass('hide',false)},$1:function(nk){if(ss.isNullOrUndefined(nk)){return}nk.toggleClass('hide',true)},$3:function(nk,nl){if(ss.isNullOrUndefined(nk)){return}nk.toggleClass('disabled',nl)},$0:function(nk,nl,nm){if(nk.find('.'+nl).length===0){var nn=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[nm]).element;nn.addClass(nl);nk.append(nn)}}});var lN=global.tab.TableCalcEditorViewModel=ss.mkType(a,'tab.TableCalcEditorViewModel',function(nk){this.$3=null;this.$6=null;this.$4=null;this.$5=null;this.$8=null;this.$7=null;this.$2$1=null;this.$2$2=null;spiff.BaseViewModel.call(this);this.$3=nk;this.$4=new lO(this.$3.get_tableCalcOrderingModel());this.$5=new lS(this.$3.get_tableCalcOrderingModel());this.$3.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$6=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$6.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$6.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$6.dispose()})));this.onModelUpdated()},{add_tableCalcUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_tableCalcUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},add_tableCalcTitleUpdated:function(nk){this.$2$2=ss.delegateCombine(this.$2$2,nk)},remove_tableCalcTitleUpdated:function(nk){this.$2$2=ss.delegateRemove(this.$2$2,nk)},get_title:function(){return this.$7},set_title:function(nk){if(ss.isValue(this.$7)&&ss.referenceEquals(this.$7,nk)){return}this.$7=nk;this.raiseActionEvent(this.$2$2)},get_hasTableCalc:function(){return this.$3.get_hasTableCalc()},get_tableCalcTypeWidgetState:function(){return this.$3.get_tableCalcTypeWidgetState()},get_tableCalcType:function(){return this.$3.get_tableCalcType()},get_tableCalcTypeComboBoxVM:function(){return this.$6},get_tableCalcSortOptionVM:function(){return this.$5},get_atTheLevelComboBoxVM:function(){return this.$4.get_atTheLevelComboBoxVM()},get_restartEveryComboBoxVM:function(){return this.$4.get_restartEveryComboBoxVM()},get_orderingType:function(){return this.$4.get_orderingType()},get_orderingTypeListVM:function(){return this.$4.get_orderingTypeListVM()},get_orderingAddressingListVM:function(){return this.$4.get_addressingListVM()},get_addressingIndexes:function(){return this.$4.get_addressingIndexes()},get_atTheLevelState:function(){return this.$4.get_atTheLevelState()},get_restartEveryState:function(){return this.$4.get_restartEveryState()},get_sortState:function(){return this.$5.get_sortState()},get_sortModeCaption:function(){return this.$5.get_sortModeCaption()},get_isSortFieldInvalid:function(){return this.$5.get_isSortFieldInvalid()},get_specificDimensionEnabled:function(){return this.$4.get_specificDimensionEnabled()},get_differenceFromComboBoxVM:function(){return this.$8.get_differenceFromComboBoxVM()},get_computeCompoundedRate:function(){return this.$8.get_computeCompoundedRate()},get_computeCompoundedRateState:function(){return this.$8.get_computeCompoundedRateState()},get_rankTypeComboBoxVM:function(){return this.$8.get_rankComboBoxVM()},get_rankTypeState:function(){return this.$8.get_rankTypeState()},get_sortDirectionComboBoxVM:function(){return this.$8.get_sortDirectionComboBoxVM()},get_aggregationComboBoxVM:function(){return this.$8.get_aggComboBoxVM()},get_typeSpecificTableCalcVM:function(){return this.$8},get_allPages:function(){return this.$8.get_allPages()},get_allPagesState:function(){return this.$8.get_allPagesState()},get_customRelativeToState:function(){return this.$8.get_relativeToState()},get_customRelativeToComboBoxVM:function(){return this.$8.get_relativeToComboBoxVM()},get_customNullIfIncomplete:function(){return this.$8.get_nullIfIncomplete()},get_customNullIfIncompleteState:function(){return this.$8.get_nullIfIncompleteState()},get_customAllPages:function(){return this.$8.get_allPages()},get_customAllPagesState:function(){return this.$8.get_allPagesState()},get_nestedCalcsWidgetState:function(){return this.$8.get_nestedCalcsWidgetState()},get_nestedCalcsComboBoxVM:function(){return this.$8.get_nestedCalcsComboBoxVM()},get_summaryCaption:function(){return this.$8.get_windowModel().get_summaryCaption()},dispose:function(){if(ss.isValue(this.$3.get_typeSpecificTableCalcModel())){this.$8.remove_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));this.$8=tab.MiscUtil.dispose$1(this.$8)}this.$4.dispose();this.$5.dispose();spiff.BaseViewModel.prototype.dispose.call(this)},onModelUpdated:function(){if(!this.get_hasTableCalc()){return}this.$2();if(this.createTypeSpecificTableCalcViewModel()){this.$8.onModelUpdated()}this.raiseActionEvent(this.$2$1)},showSortOptions:function(nk){spiff.UberPopupViewModel.createForContent$1(this.$5,nk,null,false).show()},$2:function(){var nk=[];for(var nl=0,nm=this.$3.get_tableCalcTypeValues().length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.$3.get_tableCalcTypeCaptions()[nl],this.$3.get_tableCalcTypeValues()[nl],null,null))}this.$6.setItems(nk);this.$6.set_selectedItem(this.$6.get_items()[this.$3.get_tableCalcTypeIndex()])},createTypeSpecificTableCalcViewModel:function(){var nk=null;switch(this.$3.get_tableCalcType()){case'diff':case'pct-diff':case'pct-value':{nk=eX;break}case'pct-total':{nk=ja;break}case'rank':case'pct-rank':{nk=jz;break}case'cumulative':{nk=dG;break}case'window':{nk=mM;break}case'custom':{nk=dK;break}default:{break}}if(ss.isNullOrUndefined(nk)||ss.isValue(this.$8)&&ss.referenceEquals(ss.getInstanceType(this.$8),nk)){return false}if(ss.isValue(this.$8)){this.$8.remove_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));this.$8=tab.MiscUtil.dispose$1(this.$8)}this.$8=new nk(this.$3.get_typeSpecificTableCalcModel());this.$8.add_typeSpecificViewModelUpdated(ss.mkdel(this,this.$0));return true},$1:function(nk){if(nk.get_data()===this.get_tableCalcType()){return}var nl=new tab.TableCalcChangeTypeCmd;nl.set_uiBlocking('immediately');nl.c['tableCalcType']=nk.get_data();nl.c['calcNestingLevel']=this.$3.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$3.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$2()}))},$0:function(){this.raiseActionEvent(this.$2$1)},allPagesChanged:function(nk){if(this.get_tableCalcType()==='custom'){this.$8.allPagesChanged(nk);return}this.$8.allPagesChanged(nk)},customNullIfIncompleteChanged:function(nk){this.$8.customNullIfIncompleteChanged(nk)},computeCompoundedRateChanged:function(nk){this.$8.computeCompoundedRateChanged(nk)}},{new$1:function(nk){return new lN(nk)}});var lO=global.tab.TableCalcOrderingViewModel=ss.mkType(a,'tab.TableCalcOrderingViewModel',function(nk){this.$g=null;this.$f=null;this.$j=null;this.$i=null;this.$h=null;this.$e=null;this.$d=null;spiff.BaseViewModel.call(this);this.$g=nk;this.$g.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$h=[];this.$i=new spiff.ListViewModel(this.$h,0);this.$i.add_selectionChanged(ss.mkdel(this,this.$3));this.$f=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$f.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$f.dispose()})));this.$j=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$j.add_selectedItemChanged(ss.mkdel(this,this.$5));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectedItemChanged(ss.mkdel(this,this.$5));this.$j.dispose()})));this.$d=[];this.$e=new spiff.ListViewModel(this.$d,2);this.$e.add_selectionChanged(ss.mkdel(this,this.orderingAddressingSelectionChanged));this.$e.add_itemMoved(ss.mkdel(this,this.$1));this.onModelUpdated()},{get_orderingType:function(){return this.$g.get_orderingTypeValues()[this.$g.get_orderingTypeIndex()]},get_addressingListItemVMs:function(){return this.$d},get_atTheLevelState:function(){return this.$g.get_atTheLevelState()},get_restartEveryState:function(){return this.$g.get_restartEveryState()},get_sortState:function(){return this.$g.get_sortState()},get_atTheLevelComboBoxVM:function(){return this.$f},get_orderingTypeListVM:function(){return this.$i},get_restartEveryComboBoxVM:function(){return this.$j},get_addressingListVM:function(){return this.$e},get_addressingIndexes:function(){return this.$g.get_addressingIndexes()},get_specificDimensionEnabled:function(){return this.$g.get_addressingState()==='widget-state-enabled'},dispose:function(){this.$i.remove_selectionChanged(ss.mkdel(this,this.$3));this.$i.dispose();this.$h=tab.MiscUtil.dispose(this.$h);this.$e.remove_selectionChanged(ss.mkdel(this,this.orderingAddressingSelectionChanged));this.$e.remove_itemMoved(ss.mkdel(this,this.$1));this.$e.dispose();this.$d=tab.MiscUtil.dispose(this.$d);spiff.BaseViewModel.prototype.dispose.call(this)},onModelUpdated:function(){if(!this.$g.get_hasOrdering()){return}this.$a();this.$7();this.$8();this.$b()},$a:function(){var nk=this.$g.get_orderingTypeValues().length;var nl=nk!==this.$h.length;for(var nm=0;!nl&&nm<nk;nm++){nl=this.$h[nm].get_data().get_orderingTypeValue()!==this.$g.get_orderingTypeValues()[nm]}if(!nl){this.$i.selectItemAtIndex(this.$g.get_orderingTypeIndex());return}this.$h=tab.MiscUtil.dispose(this.$h);this.$h=[];for(var nn=0;nn<nk;nn++){var no=new iW;no.set_orderingTypeCaption(this.$g.get_orderingTypeCaptions()[nn]);no.set_orderingTypeValue(this.$g.get_orderingTypeValues()[nn]);var np=no;var nq=this.$g.get_orderingTypeIndex()===nn;var nr=spiff.ListItemViewModel.newListItem('orderType_'+nn,np,nq,false,np.get_orderingTypeValue()==='field');this.$h.push(nr)}this.$i.update(this.$h)},$7:function(){if(this.$0()){this.$4()}else{this.$6()}this.$e.set_enabled(this.get_specificDimensionEnabled())},$4:function(){this.$d=tab.MiscUtil.dispose(this.$d);var nk=new E;nk.addressingFieldNames=this.$g.get_addressingValues();nk.addressingCaptions=this.$g.get_addressingCaptions();nk.selectedAddressingIndexes=this.$g.get_addressingIndexes();nk.invalidAddressingIndexes=this.$g.get_addressingInvalidIndexes();var nl=nk;this.$d=nl.create();this.$e.update(this.$d)},$6:function(){this.$e.setSelectedItems(this.$g.get_addressingIndexes());this.$e.setInvalidItems(this.$g.get_addressingInvalidIndexes())},$0:function(){var nk=this.$g.get_addressingValues();var nl=this.$g.get_addressingCaptions();if(this.$e.get_collection().length!==nk.length){return true}for(var nm=0,nn=nk.length;nm<nn;nm++){var no=this.$e.get_collection()[nm].get_data();if(!ss.referenceEquals(no.get_addressingValue(),nk[nm])||!ss.referenceEquals(no.get_addressingName(),nl[nm])){return true}}return false},$8:function(){if(this.$g.get_atTheLevelState()!=='widget-state-enabled'){this.$f.clearItems();this.$f.set_enabled(false);return}this.$9()},$9:function(){var nk=new hU;nk.fieldNames=this.$g.get_atTheLevelValues();nk.fieldCaptions=this.$g.get_atTheLevelCaptions();nk.selectionIndex=this.$g.get_atTheLevelIndex();nk.isSelectionInvalid=this.$g.get_isAtTheLevelFieldInvalid();nk.invalidFieldCaption=this.$g.get_atTheLevelInvalidFieldCaption();nk.specialCaption=this.$g.get_atTheLevelSpecialCaption();nk.specialValue=this.$g.get_atTheLevelSpecialValue();var nl=nk;nl.update(this.$f)},$b:function(){if(this.$g.get_restartEveryState()!=='widget-state-enabled'){this.$j.clearItems();this.$j.set_enabled(false);return}this.$c()},$c:function(){var nk=new kG;nk.fieldNames=this.$g.get_restartEveryValues();nk.fieldCaptions=this.$g.get_restartEveryCaptions();nk.selectionIndex=this.$g.get_restartEveryIndex();nk.isSelectionInvalid=this.$g.get_isRestartEveryFieldInvalid();nk.specialCaption=this.$g.get_restartEverySpecialCaption();nk.specialValue=this.$g.get_restartEverySpecialValue();var nl=nk;nl.update(this.$j)},$3:function(){var nk=this.$i.get_firstSelectedItem();if(ss.isNullOrUndefined(nk)){return}var nl=nk.get_data().get_orderingTypeValue();if(nl===this.get_orderingType()){return}var nm=new tab.TableCalcSetOrderingTypeCmd;nm.set_uiBlocking('immediately');nm.c['orderingType']=nl;nm.c['calcNestingLevel']=this.$g.get_tableCalcIdentifier().get_nestingLevel();nm.c['nestedCalcFn']=this.$g.get_tableCalcIdentifier().get_fieldName();nm.invoke().fail(ss.mkdel(this,function(nn){this.$a()}))},orderingAddressingSelectionChanged:function(){var nk=this.$e.get_selectedItems().map(function(nm){return nm.get_data().get_addressingValue()});var nl=new tab.TableCalcSetAddressingFieldsCmd;nl.set_uiBlocking('immediately');nl.c['fieldVector']=nk;nl.c['calcNestingLevel']=this.$g.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$g.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$7()}))},$1:function(nk,nl){var nm=this.$e.get_collection().map(function(np){return np.get_data().get_addressingValue()});var nn=this.$e.get_selectedItems().map(function(np){return np.get_data().get_addressingValue()});var no=new tab.TableCalcSetAddressingFieldsOrderCmd;no.set_uiBlocking('immediately');no.c['fieldVector']=nm;no.c['addressingValues']=nn;no.c['calcNestingLevel']=this.$g.get_tableCalcIdentifier().get_nestingLevel();no.c['nestedCalcFn']=this.$g.get_tableCalcIdentifier().get_fieldName();no.invoke().fail(ss.mkdel(this,function(np){this.$7()}))},$2:function(nk){if(!lO.$0(nk,this.$g.get_atTheLevelValue(),this.$g.get_isAtTheLevelFieldInvalid())){return}var nl=new tab.TableCalcSetAtTheLevelFieldCmd;nl.set_uiBlocking('immediately');nl.c['fieldNameAllowEmpty']=nk.get_data();nl.c['calcNestingLevel']=this.$g.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$g.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$8()}))},$5:function(nk){if(!lO.$0(nk,this.$g.get_restartEveryValue(),this.$g.get_isRestartEveryFieldInvalid())){return}var nl=new tab.TableCalcSetRestartEveryFieldCmd;nl.set_uiBlocking('immediately');nl.c['fieldNameAllowEmpty']=nk.get_data();nl.c['calcNestingLevel']=this.$g.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$g.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$b()}))}},{$0:function(nk,nl,nm){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.get_data())){return false}if(nm){return true}return!ss.referenceEquals(nk.get_data(),nl)}});var lP=global.tab.TableCalcReferenceViewModel=ss.mkType(a,'tab.TableCalcReferenceViewModel',function(nk){this.$2=null;this.$3=null;this.$4=0;spiff.BaseViewModel.call(this);this.$2=nk;this.get_model().add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_model().remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$3.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$3.dispose()})));this.onModelUpdated()},{get_model:function(){return this.$2},get_referenceComboBoxVM:function(){return this.$3},get_referenceWidgetState:function(){return this.get_model().get_referenceWidgetState()},onModelUpdated:function(){this.$4=this.$2.get_selectionIndex();if(this.$2.get_referenceWidgetState()!=='widget-state-enabled'){this.$3.clearItems();this.$3.set_enabled(false);return}this.$3.set_enabled(true);var nk=[];for(var nl=0,nm=this.$2.get_referenceOptionsSets().length;nl<nm;nl++){var nn=[];var no=[];switch(this.$2.get_referenceOptionsSets()[nl]){case'reference-options-set-relative':{nn=this.$2.get_relativeCaptions();for(var np=0,nq=this.$2.get_relativeValues().length;np<nq;np++){no.push(new jA.$ctor2(this.$2.get_relativeValues()[np]))}break}case'reference-options-set-fixed':{nn=this.$2.get_fixedCaptions();for(var nr=0,ns=this.$2.get_fixedValues().length;nr<ns;nr++){no.push(new jA.$ctor1(this.$2.get_fixedValues()[nr]))}break}case'reference-options-set-parameter':{nn=this.$2.get_paramCaptions();for(var nt=0,nu=this.$2.get_paramValues().length;nt<nu;nt++){no.push(new jA(this.$2.get_paramValues()[nt]))}break}default:{break}}var nv=no.length;if(nk.length>0&&nv>0){if(this.$4>=nk.length){this.$4++}nk.push(new spiff.DividerComboBoxItem)}for(var nw=0;nw<nv;nw++){nk.push(new spiff.ComboBoxItem(null,nn[nw],no[nw],null,null))}}if(nk.length>0){this.$3.setItems(nk);this.$3.set_selectedItem(this.$0())}else{this.$3.clearItems()}},$0:function(){return((this.$4>=0)?this.get_referenceComboBoxVM().get_items()[this.$4]:null)},$1:function(nk){if(ss.isNullOrUndefined(nk)){return}if(ss.referenceEquals(nk,this.$0())){return}var nl=new tab.TableCalcSetReferenceOptionsCmd;nl.set_uiBlocking('immediately');nl.c['calcNestingLevel']=this.$2.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$2.get_tableCalcIdentifier().get_fieldName();var nm=nl;var nn=nk.get_data();switch(nn.set){case'reference-options-set-relative':{nm.c['relativeAddress']=nn.relativeAddress;break}case'reference-options-set-fixed':{nm.c['idx']=nn.fixedTupleIndex|0;break}case'reference-options-set-parameter':{nm.c['fn']=nn.parameterName;break}default:{break}}nm.invoke().fail(ss.mkdel(this,function(){this.get_referenceComboBoxVM().set_selectedItem(this.$0())}))}});var lQ=global.tab.TableCalcSortOptionTemplate=ss.mkType(a,'tab.TableCalcSortOptionTemplate',function(){this.$3=null;this.$4=null;this.$6=null;this.$1=null;this.$5=null;this.$2=null;spiff.Template.call(this,$("\n<div class='tabSortOptionRoot'>\n    <div class='tabSortOptionMode tabRow'>\n        <span class='tabAutomatic'></span>\n        <span class='tabCustom'></span>\n    </div>\n    <div class='tabSortOptionFieldAgg tabRow'>\n        <span class='tabField'></span>\n        <span class='tabAgg'></span>\n    </div>\n    <div class='tabSortOptionAscDesc tabRow'>\n        <span class='tabDesc'></span>\n        <span class='tabAsc'></span>\n    </div>\n</div>"));this.$3=this.getElementBySelector('.tabAutomatic');this.$4=this.getElementBySelector('.tabCustom');this.$6=this.getElementBySelector('.tabField');this.$1=this.getElementBySelector('.tabAgg');this.$5=this.getElementBySelector('.tabDesc');this.$2=this.getElementBySelector('.tabAsc')},{get_automaticDom:function(){return this.$3},get_customDom:function(){return this.$4},get_fieldDom:function(){return this.$6},get_aggDom:function(){return this.$1},get_descDom:function(){return this.$5},get_ascDom:function(){return this.$2}});var lR=global.tab.TableCalcSortOptionView=ss.mkType(a,'tab.TableCalcSortOptionView',function(nk){this.$g=null;this.$h=null;this.$l=null;this.$k=null;this.$e=null;this.$i=null;this.$f=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[lS]).call(this,nk,new lQ);this.get_viewModel().add_modelUpdated(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$b))})));this.$8();this.$7();this.$k=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_fieldComboBoxVM()]);this.$e=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_aggComboBoxVM()]);this.$b()},{get_dom:function(){return this.get_template()},$8:function(){this.$g=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortAutomatic,false);this.disposables.add$1(this.$g);this.$h=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortCustom,false);this.disposables.add$1(this.$h);this.$l=new spiff.SelectableGroup;this.$l.addItem(this.$g);this.$l.addItem(this.$h);this.$l.add_selectionChanged(ss.mkdel(this,this.$a));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.remove_selectionChanged(ss.mkdel(this,this.$a))})));this.disposables.add$1(this.$l)},$a:function(){var nk=this.$g.get_selected();this.get_viewModel().sortModeChanged(nk)},$7:function(){this.$i=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortDescending,false);this.disposables.add$1(this.$i);this.$f=spiff.LabelToggleButton.newRadioButton(tab.Strings.TableCalcSortAscending,false);this.disposables.add$1(this.$f);this.$j=new spiff.SelectableGroup;this.$j.addItem(this.$i);this.$j.addItem(this.$f);this.$j.add_selectionChanged(ss.mkdel(this,this.$9));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$j.remove_selectionChanged(ss.mkdel(this,this.$9))})));this.disposables.add$1(this.$j)},$9:function(){var nk=(this.$f.get_selected()?'asc':'desc');this.get_viewModel().$0(nk)},$b:function(){this.$d();this.$c()},onViewModelPropertyChanged:function(nk,nl){if(nl.get_propertyName()==='SortMode'){this.$d()}else if(nl.get_propertyName()==='SortDirection'){this.$c()}},$d:function(){if(this.get_viewModel().get_sortModeIsAuto()){this.$l.selectItem(this.$g)}else{this.$l.selectItem(this.$h)}},$c:function(){this.$i.set_disabled(this.get_viewModel().get_sortModeIsAuto());this.$f.set_disabled(this.get_viewModel().get_sortModeIsAuto());if(this.get_viewModel().get_sortDirection()==='desc'){this.$j.selectItem(this.$i)}else if(this.get_viewModel().get_sortDirection()==='asc'){this.$j.selectItem(this.$f)}else{}},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.get_dom().get_automaticDom().append(this.$g.element);this.get_dom().get_customDom().append(this.$h.element);this.get_dom().get_fieldDom().append(this.$k.element);if(this.get_viewModel().get_sortAggState()!=='widget-state-hidden'){this.get_dom().get_aggDom().append(this.$e.element)}this.get_dom().get_descDom().append(this.$i.element);this.get_dom().get_ascDom().append(this.$f.element)}});var lS=global.tab.TableCalcSortOptionViewModel=ss.mkType(a,'tab.TableCalcSortOptionViewModel',function(nk){this.$9=null;this.$8=null;this.$7=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$9=nk;this.$9.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$8=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$8.add_selectedItemChanged(ss.mkdel(this,this.$2));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_selectedItemChanged(ss.mkdel(this,this.$2));this.$8.dispose()})));this.$7=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.$7.add_selectedItemChanged(ss.mkdel(this,this.$1));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_selectedItemChanged(ss.mkdel(this,this.$1));this.$7.dispose()})));this.onModelUpdated()},{add_modelUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_modelUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_tableCalcOrderingModel:function(){return this.$9},get_viewModel:function(){return this},get_viewType:function(){return lR},get_fieldComboBoxVM:function(){return this.$8},get_aggComboBoxVM:function(){return this.$7},get_sortState:function(){return this.$9.get_sortState()},get_sortModeIsAuto:function(){return this.$9.get_sortModeIsAuto()},get_sortModeCaption:function(){return this.$9.get_sortModeCaption()},get_sortField:function(){return this.$9.get_sortField()},get_isSortFieldInvalid:function(){return this.$9.get_isSortFieldInvalid()},get_sortAggState:function(){return this.$9.get_sortAggState()},get_sortAgg:function(){return this.$9.get_sortAgg()},get_sortDirection:function(){return this.$9.get_sortDirectionValues()[this.$9.get_sortDirectionIndex()]},get_shouldShowSortFieldSelectionAsInvalid:function(){return!this.get_sortModeIsAuto()&&this.get_isSortFieldInvalid()},onModelUpdated:function(){if(!this.$9.get_hasOrdering()){return}if(this.$9.get_sortState()!=='widget-state-enabled'){return}this.$5();if(this.$9.get_sortAggState()!=='widget-state-hidden'){this.$3()}this.raiseActionEvent(this.$2$1)},$6:function(){this.notifyPropertyChanged('SortMode')},$5:function(){var nk=[];if(this.$9.get_sortModeIsAuto()){nk.push(new spiff.ComboBoxItem(null,tab.Strings.SelectText,null,null,null));this.$8.setItems(nk);this.$8.set_selectedItem(this.$8.get_items()[0]);this.$8.set_enabled(false)}else{var nl=new lw;nl.fieldNames=this.$9.get_sortFieldValues();nl.fieldCaptions=this.$9.get_sortFieldCaptions();nl.selectionIndex=this.$9.get_sortFieldIndex();nl.isSelectionInvalid=this.$9.get_isSortFieldInvalid();var nm=nl;nm.update(this.$8)}},$3:function(){var nk=[];if(this.$9.get_sortModeIsAuto()){nk.push(new spiff.ComboBoxItem(null,tab.Strings.SelectText,null,null,null));this.$7.setItems(nk);this.$7.set_selectedItem(this.$7.get_items()[0]);this.$7.set_enabled(false)}else{for(var nl=0,nm=this.$9.get_sortAggValues().length;nl<nm;nl++){nk.push(new spiff.ComboBoxItem(null,this.$9.get_sortAggCaptions()[nl],this.$9.get_sortAggValues()[nl],null,null))}this.$7.setItems(nk);this.$7.set_selectedItem(this.$7.get_items()[this.$9.get_sortAggIndex()]);this.$7.set_enabled(true)}},$4:function(){this.notifyPropertyChanged('SortDirection')},updateUberPopupViewModel:function(nk){},disposeViewModel:function(){this.dispose()},sortModeChanged:function(nk){if(nk===this.get_sortModeIsAuto()){return}var nl=new tab.TableCalcSetSortModeCmd;nl.c['sortModeIsAuto']=nk;nl.c['calcNestingLevel']=this.$9.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$9.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$6()}))},$2:function(nk){if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nk.get_data())||ss.referenceEquals(nk.get_data(),this.get_sortField())){return}var nl=new tab.TableCalcSetSortFieldCmd;nl.set_uiBlocking('immediately');nl.c['fn']=nk.get_data();nl.c['calcNestingLevel']=this.$9.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$9.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$5()}))},$1:function(nk){if(ss.isNullOrUndefined(nk)||nk.get_data()===this.get_sortAgg()){return}var nl=new tab.TableCalcSetSortAggregationCmd;nl.c['aggregation']=nk.get_data();nl.c['calcNestingLevel']=this.$9.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$9.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){if(this.$9.get_sortAggState()!=='widget-state-hidden'){this.$3()}}))},$0:function(nk){if(nk===this.get_sortDirection()){return}var nl=new tab.TableCalcSetSortDirectionCmd;nl.c['sortOrder']=nk;nl.c['calcNestingLevel']=this.$9.get_tableCalcIdentifier().get_nestingLevel();nl.c['nestedCalcFn']=this.$9.get_tableCalcIdentifier().get_fieldName();nl.invoke().fail(ss.mkdel(this,function(nm){this.$4()}))}});var lT=global.tab.TableCalcWindowOptionTemplate=ss.mkType(a,'tab.TableCalcWindowOptionTemplate',function(){this.$1=null;this.$2=null;this.$4=null;this.$5=null;this.$3=null;spiff.Template.call(this,$("\n<div class='tabWindowOptionRoot'>\n    <div class='tabWindowOptionTitle tabRow'></div>\n    <div class='tabWindowOptionAgg tabRow'></div>\n    <div class='tabWindowOptionPreviousValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionNextValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionCurrentValue tabRow'></div>\n    <div class='tabWindowOptionNullSetting tabRow'></div>\n</div>"));this.$1=this.getElementBySelector('.tabWindowOptionAgg');this.$2=this.getElementBySelector('.tabWindowOptionCurrentValue');this.$4=this.getElementBySelector('.tabWindowOptionNullSetting');this.$5=this.getElementBySelector('.tabWindowOptionPreviousValues .tabSpinner');this.$3=this.getElementBySelector('.tabWindowOptionNextValues .tabSpinner');this.getElementBySelector('.tabWindowOptionTitle').text(tab.Strings.WindowTableCalcSummarizeUsing);var nk=this.getElementBySelector('.tabWindowOptionPreviousValues .tabLabel');nk.text(tab.Strings.WindowTableCalcPreviousValuesLabel);var nl=this.getElementBySelector('.tabWindowOptionNextValues .tabLabel');nl.text(tab.Strings.WindowTableCalcNextValuesLabel)},{get_aggDom:function(){return this.$1},get_currentValueDom:function(){return this.$2},get_nullSettingDom:function(){return this.$4},get_previousValuesSpinnerDom:function(){return this.$5},get_nextValuesSpinnerDom:function(){return this.$3}});var lU=global.tab.TableCalcWindowOptionView=ss.mkType(a,'tab.TableCalcWindowOptionView',function(nk){this.$e=null;this.$f=null;this.$g=null;ss.makeGenericType(spiff.BaseView$1,[lV]).call(this,nk,new lT);this.get_viewModel().add_modelUpdated(ss.mkdel(this,function(){this.$9()}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_modelUpdated(ss.mkdel(this,this.$9))})));this.$e=tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.get_viewModel().get_aggComboBoxVM()]);this.$f=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowCurrentValue,true);this.$f.add_propertyChanged(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_propertyChanged(ss.mkdel(this,this.$7));this.$f=tab.MiscUtil.dispose$1(this.$f)})));this.$g=spiff.LabelToggleButton.newCheckbox(tab.Strings.TableCalcWindowNullSetting,false);this.$g.add_propertyChanged(ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$g.remove_propertyChanged(ss.mkdel(this,this.$8));this.$g=tab.MiscUtil.dispose$1(this.$g)})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){ReactDOM.unmountComponentAtNode(this.$d().get_previousValuesSpinnerDom().get(0));ReactDOM.unmountComponentAtNode(this.$d().get_nextValuesSpinnerDom().get(0))})));this.$9()},{$d:function(){return this.get_template()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$d().get_aggDom().append(this.$e.element);this.$d().get_currentValueDom().append(this.$f.element);this.$d().get_nullSettingDom().append(this.$g.element)},onViewModelPropertyChanged:function(nk,nl){},$9:function(){this.$c();this.$a();this.$b()},$c:function(){ReactDOM.render(React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'previousValues',start:this.get_viewModel().get_tableCalcWindowOptionModel().get_numberOfPrevValues(),min:this.get_viewModel().get_tableCalcWindowOptionModel().get_minPrevOrNextValues(),max:this.get_viewModel().get_tableCalcWindowOptionModel().get_maxPrevOrNextValues(),onValueUpdated:ss.mkdel(this,function(nk){this.get_viewModel().numberOfPrevValuesChanged(nk)})}),this.$d().get_previousValuesSpinnerDom().get(0));ReactDOM.render(React.createElement(SharedWidgets.IntegerStepperWidget,{testId:'nextValues',start:this.get_viewModel().get_tableCalcWindowOptionModel().get_numberOfNextValues(),min:this.get_viewModel().get_tableCalcWindowOptionModel().get_minPrevOrNextValues(),max:this.get_viewModel().get_tableCalcWindowOptionModel().get_maxPrevOrNextValues(),onValueUpdated:ss.mkdel(this,function(nk){this.get_viewModel().numberOfNextValuesChanged(nk)})}),this.$d().get_nextValuesSpinnerDom().get(0))},$a:function(){this.$f.set_selected(this.get_viewModel().get_tableCalcWindowOptionModel().get_includeCurrentValue())},$b:function(){this.$g.set_selected(this.get_viewModel().get_tableCalcWindowOptionModel().get_nullIfIncomplete())},$7:function(nk,nl){if(ss.isNullOrUndefined(this.$f)){return}var nm=this.$f.get_selected();this.get_viewModel().includeCurrentValueChanged(nm)},$8:function(nk,nl){if(ss.isNullOrUndefined(this.$g)){return}var nm=this.$g.get_selected();this.get_viewModel().nullIfIncompleteChanged(nm)}});var lV=global.tab.TableCalcWindowOptionViewModel=ss.mkType(a,'tab.TableCalcWindowOptionViewModel',function(nk){this.$4=null;this.$3=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$4=nk;this.$4.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$4.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})));this.$3=spiff.ComboBoxViewModel.newLineAndArrowComboBoxViewModel();this.disposables.add$1(this.$3);this.$3.add_selectedItemChanged(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$3.remove_selectedItemChanged(ss.mkdel(this,this.$0));this.$3.dispose()})));this.onModelUpdated()},{add_modelUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_modelUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_tableCalcWindowOptionModel:function(){return this.$4},get_viewModel:function(){return this},get_viewType:function(){return lU},get_aggComboBoxVM:function(){return this.$3},onModelUpdated:function(){this.$2();this.raiseActionEvent(this.$2$1)},updateUberPopupViewModel:function(nk){},disposeViewModel:function(){this.dispose()},includeCurrentValueChanged:function(nk){if(nk===this.$4.get_includeCurrentValue()){return}var nl=this.$1();nl.c['includeCurrent']=nk;nl.invoke().fail(ss.mkdel(this,function(nm){this.raiseActionEvent(this.$2$1)}))},nullIfIncompleteChanged:function(nk){if(nk===this.$4.get_nullIfIncomplete()){return}var nl=this.$1();nl.c['nullIfIncomplete']=nk;nl.invoke().fail(ss.mkdel(this,function(nm){this.raiseActionEvent(this.$2$1)}))},numberOfPrevValuesChanged:function(nk){if(nk===this.$4.get_numberOfPrevValues()){return}var nl=this.$1();nl.c['numberOfPrevValues']=nk|0;nl.invoke().fail(ss.mkdel(this,function(nm){this.raiseActionEvent(this.$2$1)}))},numberOfNextValuesChanged:function(nk){if(nk===this.$4.get_numberOfNextValues()){return}var nl=this.$1();nl.c['numberOfNextValues']=nk|0;nl.invoke().fail(ss.mkdel(this,function(nm){this.raiseActionEvent(this.$2$1)}))},$0:function(nk){if(ss.isNullOrUndefined(nk)||nk.get_data()===this.get_tableCalcWindowOptionModel().get_aggregation()){return}var nl=this.$1();nl.c['aggregation']=nk.get_data();nl.invoke().fail(ss.mkdel(this,function(nm){this.$2()}))},$2:function(){var nk=[];var nl=this.get_tableCalcWindowOptionModel();for(var nm=0,nn=nl.get_aggregationValues().length;nm<nn;nm++){nk.push(new spiff.ComboBoxItem(null,this.get_tableCalcWindowOptionModel().get_aggregationCaptions()[nm],nl.get_aggregationValues()[nm],null,null))}this.$3.setItems(nk);var no=ss.indexOf(nl.get_aggregationValues(),ss.unbox(nl.get_aggregation()));this.$3.set_selectedItem(this.$3.get_items()[no]);this.$3.set_enabled(true)},$1:function(){var nk=new tab.TableCalcSetWindowOptionsCmd;nk.c['aggregation']=ss.unbox(this.get_tableCalcWindowOptionModel().get_aggregation());nk.c['includeCurrent']=this.get_tableCalcWindowOptionModel().get_includeCurrentValue();nk.c['nullIfIncomplete']=this.get_tableCalcWindowOptionModel().get_nullIfIncomplete();nk.c['numberOfPrevValues']=this.get_tableCalcWindowOptionModel().get_numberOfPrevValues()|0;nk.c['numberOfNextValues']=this.get_tableCalcWindowOptionModel().get_numberOfNextValues()|0;nk.c['calcNestingLevel']=this.get_tableCalcWindowOptionModel().get_tableCalcIdentifier().get_nestingLevel();nk.c['nestedCalcFn']=this.get_tableCalcWindowOptionModel().get_tableCalcIdentifier().get_fieldName();return nk}});var lW=global.tab.TextEncodingOptionTemplate=ss.mkType(a,'tab.TextEncodingOptionTemplate',function(){this.toggleMarkLabelsCheckboxContainer=null;this.editMarkLabelsButtonContainer=null;this.marksToLabelModeSelectionContainer=null;spiff.Template.call(this,$("<div class='tabAuthTextOptionContent'>\n            <div class='tabToggleMarkLabelsCheckboxContainer'></div>\n            <div class='tabEditMarkLabelsButtonContainer'></div>\n            <div class='tabMarksToLabelContainer'></div>\n        </div>"));this.toggleMarkLabelsCheckboxContainer=this.getElementBySelector('.tabToggleMarkLabelsCheckboxContainer');this.editMarkLabelsButtonContainer=this.getElementBySelector('.tabEditMarkLabelsButtonContainer');this.marksToLabelModeSelectionContainer=this.getElementBySelector('.tabMarksToLabelContainer')});var lX=global.tab.TextEncodingOptionView=ss.mkType(a,'tab.TextEncodingOptionView',function(nk){this.$d=null;this.$a=null;this.$c=null;this.$b=null;ss.makeGenericType(spiff.BaseView$1,[lY]).call(this,nk,new lW);this.$a=this.get_template();this.$d=nk},{handlePropertyChanged:function(nk,nl){if(nl.get_propertyName()==='selected'&&this.$c.get_selected()!==this.get_viewModel().get_showMarkLabelsIsChecked()){this.$d.toggleLabels(this.$c.get_selected())}},handleLabelsOnChanged:function(nk){this.$c.set_selected(nk);if(tab.FeatureFlags.isEnabled('MttwMarksToLabel')){var nl=this.$b;var nm=new iD;nm.marksToLabelDropdownEnabled=this.get_viewModel().get_showMarkLabelsIsChecked();nm.marksToLabelCurrentMode=this.get_viewModel().get_marksToLabelCurrentMode();nm.currentScope=this.get_viewModel().get_marksToLabelCurrentScope();nm.lineEndsFirstChecked=this.get_viewModel().get_showLineEndsFirstIsChecked();nm.lineEndsLastChecked=this.get_viewModel().get_showLineEndsLastIsChecked();nm.minMaxStartChecked=this.get_viewModel().get_showMinMaxStartIsChecked();nm.minMaxEndChecked=this.get_viewModel().get_showMinMaxEndIsChecked();nm.allowLabelOverlapChecked=this.get_viewModel().get_allowLabelsToOverlapMarksChecked();nm.currentFieldCaption=this.get_viewModel().get_marksToLabelCurrentFieldCaption();nl.setState(nm)}},$7:function(){if(!tab.FeatureFlags.isEnabled('MttwMarkLabels')||ss.isNullOrUndefined(this.$d.get_markLabelsEditButtonViewModel())){return}var nk=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[ip,io,Object])).call(null,[this.$d.get_markLabelsEditButtonViewModel()]);nk.addToDom(this.$a.editMarkLabelsButtonContainer);this.disposables.add$1(nk)},$8:function(){this.$d.add_labelsOnChanged(ss.mkdel(this,this.handleLabelsOnChanged));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$d.remove_labelsOnChanged(ss.mkdel(this,this.handleLabelsOnChanged))})));this.$c=spiff.LabelToggleButton.newCheckbox(this.$d.get_controlLabel(),this.$d.get_showMarkLabelsIsChecked());this.$c.add_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$c.remove_propertyChanged(ss.mkdel(this,this.handlePropertyChanged));this.$c.dispose()})));this.$c.tabIndex(3);this.$c.addToDom(this.$a.toggleMarkLabelsCheckboxContainer)},$9:function(){var nk=[];if(ss.isValue(this.get_viewModel().get_fieldsCaptionToNameMap())){ss.arrayAddRange(nk,Object.keys(this.get_viewModel().get_fieldsCaptionToNameMap()))}var nl=new iC;nl.marksToLabelDropdownEnabled=this.get_viewModel().get_showMarkLabelsIsChecked();nl.marksToLabelEnabledModes=this.get_viewModel().get_marksToLabelEnabledModes();nl.marksToLabelCurrentMode=this.get_viewModel().get_marksToLabelCurrentMode();nl.marksToLabelModeChanged=ss.mkdel(this,this.modeChanged);nl.enabledScopes=this.get_viewModel().get_marksToLabelEnabledScopes();nl.currentScope=this.get_viewModel().get_marksToLabelCurrentScope();nl.scopeChanged=ss.mkdel(this,this.scopeChanged);nl.fieldsCaptions=nk;nl.currentFieldCaption=this.get_viewModel().get_marksToLabelCurrentFieldCaption();var nm=this.get_viewModel();nl.fieldCaptionChanged=ss.mkdel(nm,nm.marksToLabelFieldCaptionChanged);nl.minMaxStartChanged=ss.mkdel(this,this.minMaxStartChanged);nl.minMaxEndChanged=ss.mkdel(this,this.minMaxEndChanged);nl.lineEndsFirstChanged=ss.mkdel(this,this.lineEndsFirstChanged);nl.lineEndsLastChanged=ss.mkdel(this,this.lineEndsLastChanged);nl.allowLabelOverlapChanged=ss.mkdel(this,this.allowLabelOverlapChanged);nl.minMaxStartChecked=this.get_viewModel().get_showMinMaxStartIsChecked();nl.minMaxEndChecked=this.get_viewModel().get_showMinMaxEndIsChecked();nl.lineEndFirstChecked=this.get_viewModel().get_showLineEndsFirstIsChecked();nl.lineEndLastChecked=this.get_viewModel().get_showLineEndsLastIsChecked();nl.allowLabelOverlapChecked=this.get_viewModel().get_allowLabelsToOverlapMarksChecked();nl.shouldShowAllowLabelOverlapCheckbox=this.get_viewModel().get_allowLabelsToOverlapIsVisible();this.$b=ReactDOM.render(React.createElement(iB,nl),this.$a.marksToLabelModeSelectionContainer.get(0))},modeChanged:function(nk){this.get_viewModel().marksToLabelModeChanged(nk)},scopeChanged:function(nk){this.get_viewModel().marksToLabelScopeChanged(nk)},fieldCaptionChanged:function(nk){this.get_viewModel().marksToLabelFieldCaptionChanged(nk)},minMaxStartChanged:function(nk){this.get_viewModel().marksToLabelMinMaxStartCheckboxChanged(nk)},minMaxEndChanged:function(nk){this.get_viewModel().marksToLabelMinMaxEndCheckboxChanged(nk)},lineEndsFirstChanged:function(nk){this.get_viewModel().marksToLabelLineEndFirstCheckboxChanged(nk)},lineEndsLastChanged:function(nk){this.get_viewModel().marksToLabelLineEndLastCheckboxChanged(nk)},allowLabelOverlapChanged:function(nk){this.get_viewModel().marksToLabelAllowOverlapCheckboxChanged(nk)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(this.$d.get_showMarkLabelsIsEnabled()){this.$8();if(tab.FeatureFlags.isEnabled('MttwMarksToLabel')){this.$9()}}else if(!tab.FeatureFlags.isEnabled('MttwMarkLabels')){this.$8();this.$c.set_disabled(true)}this.$7()}});var lY=global.tab.TextEncodingOptionViewModel=ss.mkType(a,'tab.TextEncodingOptionViewModel',function(nk){this.$9=null;this.$6=null;this.$a=false;this.$b=false;this.$7=null;this.$c=null;this.$8=null;this.$d=null;this.$5=null;this.$4=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$0();this.$1();this.$9=nk;this.$9.add_newMarksCardTabEncoding(ss.mkdel(this,this.update));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$9.remove_newMarksCardTabEncoding(ss.mkdel(this,this.update))})));this.$4=this.$9.get_textEncodingDropdown();this.$b=this.$4.showMarkLabelsIsEnabled;this.$a=this.$4.showMarkLabelsIsChecked;if(ss.isValue(this.$4.callbackCommand)){var nl=tab.SimpleCommandsPresModelWrapper.create(this.$4.callbackCommand);var nm=tab.CommandSerializer.deserialize(nl.get_simpleCommand(),false);var nn=!this.$a&&this.$4.showMarkLabelsIsEnabled;var no=(this.$4.showMarkLabelsIsEnabled?tab.Strings.TabAuthEditLabelButton:tab.Strings.TabAuthEditTextButton);this.$6=new ip(nm,!nn,no,this.get_buttonTooltip())}else if(!this.$4.showMarkLabelsIsEnabled){this.$6=new ip(null,false,tab.Strings.TabAuthEditTextButton,tab.Strings.AuthLabelEditingDisabledDrag)}else{this.$6=null}this.$2()},{add_labelsOnChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_labelsOnChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_marksCardTabEncodingModel:function(){return this.$9},get_showMarkLabelsIsChecked:function(){return this.$a},set_showMarkLabelsIsChecked:function(nk){if(this.$a!==nk){this.$a=nk;if(ss.isValue(this.$6)){this.$6.setButtonEnabledState(this.$a,this.get_buttonTooltip())}if(ss.isValue(this.$2$1)){this.$2$1(this.$a)}}},get_allowLabelsToOverlapIsVisible:function(){return this.$4.allowMarksLabelsOverlapIsVisible},get_allowLabelsToOverlapMarksChecked:function(){return this.$4.allowMarksLabelsIsEnabled},get_showMinMaxStartIsChecked:function(){return this.$4.labelMinimumValueIsChecked},get_showMinMaxEndIsChecked:function(){return this.$4.labelMaximumValueIsChecked},get_showLineEndsFirstIsChecked:function(){return this.$4.labelStartOfLineIsChecked},get_showLineEndsLastIsChecked:function(){return this.$4.labelEndOfLineIsChecked},get_controlLabel:function(){return this.$9.get_textEncodingDropdown().showMarkLabelsControlLabel},$3:function(){return(ss.isValue(this.get_marksCardTabEncodingModel())?this.get_marksCardTabEncodingModel().get_id():0)},marksToLabelModeChanged:function(nk){var nl=this.$c[nk];tab.PaneClientCommands.updateMarkLabelsMode(this.$4,this.$3(),nl)},get_marksToLabelEnabledModes:function(){var nk=[];var nl=this.$9.get_textEncodingDropdown().marksToLabelEnabledModes;for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];nk.push(this.$7[nn])}return nk},get_marksToLabelCurrentMode:function(){var nk=this.get_marksCardTabEncodingModel().get_textEncodingDropdown().markLabelsMode;return(ss.keyExists(this.$7,nk)?this.$7[nk]:this.$7['mlm-all'])},marksToLabelScopeChanged:function(nk){var nl=this.$d[nk];tab.PaneClientCommands.updateMarkLabelsScope(this.$4,this.$3(),nl)},marksToLabelFieldCaptionChanged:function(nk){var nl=this.$5[nk];tab.PaneClientCommands.updateMarkLabelsMinMaxFieldChanged(this.$4,this.$3(),nl)},get_marksToLabelEnabledScopes:function(){var nk=[];for(var nl=0;nl<this.$4.marksToLabelEnabledScopes.length;nl++){var nm=this.$4.marksToLabelEnabledScopes[nl];nk.push(this.$8[nm])}return nk},get_marksToLabelCurrentScope:function(){var nk=this.$4.markLabelsScope;return(ss.keyExists(this.$8,nk)?this.$8[nk]:this.$8['mls-default'])},get_marksToLabelCurrentFieldCaption:function(){var nk=this.$4.fieldPickerCombo.fn;var nl=new ss.ObjectEnumerator(this.$5);try{while(nl.moveNext()){var nm=nl.current();if(ss.referenceEquals(nk,nm.value)){return nm.key}}}finally{nl.dispose()}return''},$2:function(){this.$5={};if(ss.isValue(this.$4)&&ss.isValue(this.$4.fieldPickerCombo)){var nk=this.$4.fieldPickerCombo.fieldPickerFields;for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];this.$5[nm.fieldCaption]=nm.fn}}},marksToLabelMinMaxStartCheckboxChanged:function(nk){tab.PaneClientCommands.updateMarkLabelsMinMaxStartCheckboxChanged(this.$4,this.$3(),nk)},marksToLabelMinMaxEndCheckboxChanged:function(nk){tab.PaneClientCommands.updateMarkLabelsMinMaxEndCheckboxChanged(this.$4,this.$3(),nk)},marksToLabelLineEndFirstCheckboxChanged:function(nk){tab.PaneClientCommands.updateMarkLabelsLineEndFirstCheckboxChanged(this.$4,this.$3(),nk)},marksToLabelLineEndLastCheckboxChanged:function(nk){tab.PaneClientCommands.updateMarkLabelsLineEndLastCheckboxChanged(this.$4,this.$3(),nk)},marksToLabelAllowOverlapCheckboxChanged:function(nk){tab.PaneClientCommands.updateMarkLabelsAllowLabelOverlapCheckboxChanged(this.$4,this.$3(),nk)},get_buttonTooltip:function(){if(ss.isValue(this.$9.get_textEncodingDropdown().callbackCommand)){return((this.$b&&!this.$a)?tab.Strings.AuthLabelEditingDisabledShow:null)}return tab.Strings.AuthLabelEditingDisabledDrag},get_viewType:function(){return lX},get_viewModel:function(){return this},get_markLabelsEditButtonViewModel:function(){return this.$6},get_showMarkLabelsIsEnabled:function(){return this.$b},get_fieldsCaptionToNameMap:function(){return this.$5},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){if(ss.isValue(this.$6)){this.$6.updateUberPopupViewModel(nk)}},toggleLabels:function(nk){tab.PaneClientCommands.toggleMarkLabels(this.$4,nk,this.$3())},update:function(){this.$4=this.$9.get_textEncodingDropdown();this.set_showMarkLabelsIsChecked(this.$4.showMarkLabelsIsChecked)},$0:function(){var nk={};nk['mlm-default']=tab.Strings.MarksToLabelModeAll;nk['mlm-all']=tab.Strings.MarksToLabelModeAll;nk['mlm-highlight']=tab.Strings.MarksToLabelModeHighlight;nk['mlm-line-ends']=tab.Strings.MarksToLabelModeLineEnds;nk['mlm-most-recent']=tab.Strings.MarksToLabelModeMostRecent;nk['mlm-range']=tab.Strings.MarksToLabelModeRange;nk['mlm-selection']=tab.Strings.MarksToLabelModeSelection;this.$7=nk;var nl={};nl[tab.Strings.MarksToLabelModeAll]='mlm-all';nl[tab.Strings.MarksToLabelModeHighlight]='mlm-highlight';nl[tab.Strings.MarksToLabelModeLineEnds]='mlm-line-ends';nl[tab.Strings.MarksToLabelModeMostRecent]='mlm-most-recent';nl[tab.Strings.MarksToLabelModeRange]='mlm-range';nl[tab.Strings.MarksToLabelModeSelection]='mlm-selection';this.$c=nl},$1:function(){var nk={};nk['mls-default']=tab.Strings.MarksToLabelScopeDefault;nk['mls-cell']=tab.Strings.MarksToLabelScopeCell;nk['mls-pane']=tab.Strings.MarksToLabelScopePane;nk['mls-table']=tab.Strings.MarksToLabelScopeTable;nk['mls-multimark']=tab.Strings.MarksToLabelScopeMultiMark;this.$8=nk;var nl={};nl[tab.Strings.MarksToLabelScopeDefault]='mls-default';nl[tab.Strings.MarksToLabelScopeCell]='mls-cell';nl[tab.Strings.MarksToLabelScopePane]='mls-pane';nl[tab.Strings.MarksToLabelScopeTable]='mls-table';nl[tab.Strings.MarksToLabelScopeMultiMark]='mls-multimark';this.$d=nl}});var lZ=global.tab.ThumbnailViewModel=ss.mkType(a,'tab.ThumbnailViewModel',function(nk,nl,nm){this.$3=null;this.$5=null;this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$3=nk;this.$4=nl;this.$5=nm},{createInitialProps:function(){return lZ.createThumbnailOverlayProps(this.$3,this.$4,this.$5)}},{createThumbnailOverlayProps:function(nk,nl,nm){var nn=lZ.$0(nm);var no=lZ.$1(nn,nl);var np=spiff.DOMElements.img({src:nn,className:'tabAuthSheetThumbnail'+no,style:{backgroundColor:'white'}});var nq={anchorEl:nk.anchorElement,anchorOrigin:nk.anchorOrigin,stackedOrigin:nk.stackedOrigin,zIndex:988,allowAutoPosition:true,children:np,key:'thumbnail'+nl.name};return nq},$1:function(nk,nl){var nm='';if(tab.MiscUtil.isNullOrEmpty$1(nk)){if(nl.isHidden){nm=' hiddenSheet'}else{nm=' notExist'}if(nl.isDashboard){nm=' dashboard'}}return nm},$0:function(nk){var nl='';if(!ss.isNullOrEmptyString(nk)){nl='data:image/jpeg;base64,'+nk}return nl}});var ma=global.tab.ToggleFreeFormZoneWithPreviewCommand=ss.mkType(a,'tab.ToggleFreeFormZoneWithPreviewCommand',function(){tab.ToggleFreeFormZoneWithPreviewCmd.call(this)},{do$1:function(){tab.DashboardZoneCommands.toggleFreeFormZone(this.c['zoneId'])}});var mb=global.tab.ToggleINDJoinSemanticsWrapperCommand=ss.mkType(a,'tab.ToggleINDJoinSemanticsWrapperCommand',function(){tab.ToggleINDJoinSemanticsWrapperCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='data-tab'},do$1:function(){tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'toggle-ind-join-semantics'},null),'afterDelay',null,null)}});var mc=global.tab.TooltipContentView=ss.mkType(a,'tab.TooltipContentView',function(nk){this.tooltipContentViewModel=null;ss.makeGenericType(spiff.BaseView$1,[md]).call(this,nk,spiff.Template.fromHtml("<div class='tabTooltipContent'></div>"));this.tooltipContentViewModel=nk;var nl=spiff.StyledTextButton.createUnificationLabelButton(ss.mkdel(this,this.$7),tab.Strings.AuthResetTooltip,'tabTooltipContentReset',2,1);this.disposables.add$1(nl);this.element.append(nl.element)},{$7:function(){this.tooltipContentViewModel.resetTooltip()}});var md=global.tab.TooltipContentViewModel=ss.mkType(a,'tab.TooltipContentViewModel',function(nk){this.$1=null;this.$2=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$1=nk;this.add_resetClicked(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.remove_resetClicked(ss.mkdel(this,this.$0))})))},{add_resetClicked:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_resetClicked:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_viewType:function(){return mc},get_viewModel:function(){return this},disposePopupViewModel:function(){if(ss.isValue(this.$2)){this.$2.dispose();this.$2=null}},disposeViewModel:function(){this.dispose()},updateUberPopupViewModel:function(nk){this.$2=nk},resetTooltip:function(){this.$2$1();this.disposePopupViewModel()},$0:function(){tab.PaneClientCommands.resetTooltip(this.$1)}});var me=global.tab.TreeComponent$1=ss.mkType(a,'tab.TreeComponent$1',function(nk){var nl=ss.registerGenericClassInstance(me,[nk],function(nm,nn){React.Component.call(this,nm,nn)},{render:function(){var nm=this.props.rootNode;var nn=ss.isValue(nm.get_children())&&ss.getEnumerator(nm.get_children()).moveNext();var no=null;if(nn){no=this.$3(nm.get_item(),nm.get_expanded())}var np=this.$1(this.props.rootNode.get_item());var nq=null;if(nn&&nm.get_expanded()){var nr=[];var ns=ss.getEnumerator(nm.get_children());try{while(ns.moveNext()){var nt=ns.current();nr.push(this.$2(nl.$0(this.props,nt)))}}finally{ns.dispose()}nq=spiff.DOMElements.div({className:'tab-child-tree-component'},nr)}return spiff.DOMElements.div({className:'tab-tree-component'},spiff.DOMElements.div({className:'tab-tree-component-node'},this.$0(this.props.rootNode.get_item()),spiff.DOMElements.div({className:'tab-tree-component-toggle'},no),spiff.DOMElements.div({className:'tab-tree-component-node-content'},np)),nq)},$3:function(nm,nn){return(!ss.staticEquals(this.props.renderToggle,null)?this.props.renderToggle(nm,nn):null)},$1:function(nm){return this.props.renderSingleNode(nm)},$2:function(nm){return React.createElement(nl,nm)},$0:function(nm){if(!ss.isNullOrUndefined(this.props.renderReorderAllZonesTarget)){return this.props.renderReorderAllZonesTarget(nm)}return null}},{$0:function(nm,nn){return $.extend(false,{},nm,{rootNode:nn,key:nn.get_key()})}},function(){return React.Component});return nl});ss.initGenericClass(me,1);var mf=global.tab.TreeComponentHelper=ss.mkType(a,'tab.TreeComponentHelper',null,null,{create:function(nk){return function(nl){return React.createElement(ss.makeGenericType(me,[nk]),nl)}},buildTree:function(nk,nl,nm){return function(nn,no,np,nq,nr){var ns={};var nt=[];for(var nu=0;nu<nn.length;nu++){var nv=nn[nu];var nw=nq(nv);if(_.isEqual(nq(nv),no)){nt.push(nv)}else{if(ss.isNullOrUndefined(ns[nw])){ns[nw]=[]}ns[nw].push(nv)}}var nx=null;nx=function(ny){var nz=np(ny);if(!ss.keyExists(ns,nz)){return nr(ny,[])}var nA=[];var nB=ns[nz];for(var nC=0;nC<nB.length;nC++){var nD=nB[nC];nA.push(nx(nD))}return nr(ny,nA)};return _.map(nt,nx)}}});var mg=global.tab.TypeInPillTemplate=ss.mkType(a,'tab.TypeInPillTemplate',function(){cq.call(this,$("<span class='tabTypeInPill' title=''><div class='tabTypeInPillCmHolder'></div></span>"))},{get_dragSource:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_dropTarget:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_formulaEditorHolder:function(){return this.getElementBySelector('.tabTypeInPillCmHolder')},get_dropInviteBorder:function(){return this.domRoot}});var mh=global.tab.TypeInPillView=ss.mkType(a,'tab.TypeInPillView',function(nk){this.$s=null;this.$t=false;this.$r=false;this.$q=false;this.$p=false;cr.call(this,nk,new mg);this.initDom()},{get_pillViewModel:function(){return this.$s},set_pillViewModel:function(nk){if(ss.referenceEquals(this.$s,nk)){return}this.$s=nk},dispose:function(){this.$n();ss.makeGenericType(spiff.BaseView$1,[cs]).prototype.dispose.call(this)},addToDom:function(nk){nk.append(this.element)},onAddedToDom:function(){if(!tsConfig.is_mobile){this.get_autoCompleteHelper().set_validFormulaTooltip((BrowserSupport.BrowserSupport.IsMac()?tab.Strings.CalcEditorApplyTooltipMac:tab.Strings.CalcEditorApplyTooltip))}cr.prototype.onAddedToDom.call(this);this.focusEditor()},initDom:function(){cr.prototype.initDom.call(this);this.$h()},onOpenCompleted:function(){if(!this.get_hasEditor()){return}this.get_editor().execCommand('goDocEnd')},createCodeMirrorOptions:function(){var nk=cr.prototype.createCodeMirrorOptions.call(this);nk.extraKeys['Esc']=ss.mkdel(this,this.$m);return nk},$m:function(){this.calcViewModel.cancelCalculation()},$h:function(){this.$o();this.$n();EventUtils.GlobalUIEvents.add_FirstTouch(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.add_Press(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.add_Tap(ss.mkdel(this,this.$j));EventUtils.GlobalUIEvents.add_RightClick(ss.mkdel(this,this.$k));EventUtils.GlobalUIEvents.add_DragEnd(ss.mkdel(this,this.$l))},$n:function(){EventUtils.GlobalUIEvents.remove_FirstTouch(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.remove_Press(ss.mkdel(this,this.$i));EventUtils.GlobalUIEvents.remove_Tap(ss.mkdel(this,this.$j));EventUtils.GlobalUIEvents.remove_RightClick(ss.mkdel(this,this.$k));EventUtils.GlobalUIEvents.remove_DragEnd(ss.mkdel(this,this.$l))},$o:function(){this.$r=false;this.$q=false;this.$p=false;this.$t=false},$l:function(nk,nl){if(this.$p){return}var nm=EventUtils.DragDropManager.findDropTarget(nk);this.$q=ss.referenceEquals(nm,this);this.$j(null,nl)},$i:function(nk,nl){this.$o();this.$t=true;this.$r=this.isEqualOrAncestorOf(nk.target)},$k:function(nk,nl){this.$t=true;this.$j(nk,nl)},$j:function(nk,nl){if(!this.$t||this.$r||this.$q){return}if(ss.isNullOrUndefined(nk)||!this.isEqualOrAncestorOf(nk.target)){if(ss.isValue(nl)){nl(true)}if(!this.$p){this.$p=true;this.calcViewModel.applyCalculation(this.get_pillViewModel(),true)}}},addExtraKeys:function(nk){nk['Enter']=ss.mkdel(this,function(){this.$p=true;this.calcViewModel.applyCalculation(this.get_pillViewModel(),true)})},animateOpen:function(nk,nl,nm){this.setMinMaxWidth(nk,nk,false);window.setTimeout(ss.mkdel(this,function(){var nn=this.get_editor().getScrollInfo().width+30;var no=Math.max(nl,Math.min(nm,nn));this.element.addClass('tabAnimationTransition');this.setMinMaxWidth(no,no,false);window.setTimeout(ss.mkdel(this,function(){this.element.removeClass('tabAnimationTransition');this.setMinMaxWidth(no,nm,true);this.onOpenCompleted()}),300)}),1)},setMinMaxWidth:function(nk,nl,nm){this.element.css(ss.mkdict(['min-width',nk+'px','max-width',nl+'px']));if(nm){this.get_editor().refresh();this.get_editor().scrollIntoView(null,null)}}});var mi=global.tab.TypeSpecificTableCalcViewModel=ss.mkType(a,'tab.TypeSpecificTableCalcViewModel',function(){this.$2$1=null;spiff.BaseViewModel.call(this)},{add_typeSpecificViewModelUpdated:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_typeSpecificViewModelUpdated:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_model:null,onModelUpdated:null,raiseViewModelUpdated:function(){this.raiseActionEvent(this.$2$1)}});var mj=global.tab.ViewMode=ss.mkEnum(a,'tab.ViewMode',{tabsView:0,filmstripView:1});var mk=global.tab.VizAuthoringMenuBarBuilder=ss.mkType(a,'tab.VizAuthoringMenuBarBuilder',function(){iE.call(this)},{addModeSpecificMenus:function(nk){var nl=tab.ApplicationModel.get_instance().get_workbook();if(!mk.$1()){nk.push({itemId:'worksheet',title:tab.Strings.AuthMenuBarWorksheet,cssClassName:'worksheetMenu'})}if(!tsConfig.is_mobile&&!mk.$1()){nk.push({itemId:'dashboard',title:tab.Strings.AuthMenuBarDashboard,cssClassName:'dashboardMenu'})}if(mk.get_shouldShowAnalysisMenu()){nk.push({itemId:'analysis',title:tab.Strings.AuthMenuBarAnalysis,cssClassName:'analysisMenu'})}if(mk.$2()){nk.push({itemId:'map',title:tab.Strings.AuthMenuBarMap,cssClassName:'mapMenu'})}if(!mk.$1()){nk.push({itemId:'format',title:tab.Strings.AuthMenuBarFormat,cssClassName:'formatMenu'})}if(tab.FeatureFlags.isEnabled('GotoSheetDialog')){nk.push({itemId:'window',title:tab.Strings.AuthMenuBarWindow,cssClassName:'windowMenu'})}},addModeSpecificHelpItems:function(nk,nl){var nm=(mk.$1()?tab.Strings.HelpMenuItemWebDataSource:tab.Strings.HelpMenuItemWebAuthor);nl.push(iE.newMenuLink(nm,iE.makeWebAuthorHelpUri(2),'_blank',nk.getHintText(),'Web Authoring Help'))}},{get_shouldShowAnalysisMenu:function(){switch(tsConfig.current_sheet_type){case'story':{return false}case'worksheet':{return true}case'dashboard':{return ss.isValue(mk.$0())}default:{return false}}},$2:function(){return tsConfig.current_sheet_type!=='story'},$0:function(){var nk=tab.ModelUtils.findContentDashboard(null);if(ss.isNullOrUndefined(nk)){return null}var nl=nk.get_activeVisual();var nm;if(ss.isValue(nl)){var nn=[];nn.push(nl.get_worksheetName());nm=nn}else{nm=nk.get_worksheetsOnDashboard()}var no=nm;var np=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDefaultDatasourceNamesForSheets(no);return((np.length===1)?np[0]:null)},$1:function(){var nk=tab.ApplicationModel.get_instance().get_workbook();return ss.isValue(nk)&&nk.get_isEditingPublishedDatasource()}});var ml=global.tab.VizSummaryBadgeTemplate=ss.mkType(a,'tab.VizSummaryBadgeTemplate',function(){this.label=null;spiff.Template.call(this,$("<div class='tabAuthVizSummaryBadge'><div class='tabAuthIcon'></div><div class='tabAuthLabel'></div></div>"));this.label=this.getElementBySelector('.tabAuthLabel')},{updateLabelCount:function(nk,nl){this.label.text(nk.toString());this.domRoot.toggle(nk>0||!nl)}});var mm=global.tab.VizSummaryTemplate=ss.mkType(a,'tab.VizSummaryTemplate',function(){this.schemaArea=null;this.shelfArea=null;this.marksCardArea=null;this.numDimensions=null;this.numMeasures=null;this.numSets=null;this.numParameters=null;this.numCol=null;this.numRows=null;this.numPages=null;this.numFilters=null;spiff.Template.call(this,$(mm.$1));this.schemaArea=this.getElementBySelector('.tabAuthVizSummarySchema');this.shelfArea=this.getElementBySelector('.tabAuthVizSummaryShelf');this.marksCardArea=this.getElementBySelector('.tabAuthVizSummaryLayers');var nk=function(nl,nm){var nn=new ml;nn.domRoot.appendTo(nm).addClass(nl);return nn};this.numDimensions=nk('tabAuthVizSummaryDims',this.schemaArea);this.numMeasures=nk('tabAuthVizSummaryMeas',this.schemaArea);this.numSets=nk('tabAuthVizSummarySets',this.schemaArea);this.numParameters=nk('tabAuthVizSummaryParams',this.schemaArea);this.numCol=nk('tabAuthVizSummaryCols',this.shelfArea);this.numRows=nk('tabAuthVizSummaryRows',this.shelfArea);this.numPages=nk('tabAuthVizSummaryPages',this.shelfArea);this.numFilters=nk('tabAuthVizSummaryFilters',this.shelfArea)});var mn=global.tab.VizSummaryView=ss.mkType(a,'tab.VizSummaryView',function(nk,nl){this.$8=null;this.$7=null;ss.makeGenericType(spiff.BaseView$1,[mo]).call(this,nk,nl);this.$8=nk;this.$8.add_summaryChanged(ss.mkdel(this,this.update));this.$7=nl},{dispose:function(){this.$8.remove_summaryChanged(ss.mkdel(this,this.update));ss.makeGenericType(spiff.BaseView$1,[mo]).prototype.dispose.call(this)},update:function(){this.$7.numDimensions.updateLabelCount(this.$8.get_numDimensions(),false);this.$7.numMeasures.updateLabelCount(this.$8.get_numMeasures(),false);this.$7.numSets.updateLabelCount(this.$8.get_numSets(),true);this.$7.numParameters.updateLabelCount(this.$8.get_numParameters(),true);this.$7.numCol.updateLabelCount(this.$8.get_numColumnShelfItems(),false);this.$7.numRows.updateLabelCount(this.$8.get_numRowShelfItems(),false);this.$7.numPages.updateLabelCount(this.$8.get_numPageShelfItems(),true);this.$7.numFilters.updateLabelCount(this.$8.get_numFilterShelfItems(),true);this.$7.shelfArea.toggle(this.$8.get_showShelves());this.$7.marksCardArea.children('.tabAuthVizSummaryBadge').remove();var nk=this.$8.get_marksCardTabMarkTypes();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];var nn=new ml;nn.domRoot.appendTo(this.$7.marksCardArea).addClass('tabAuthVizSummaryMark-'+nm)}this.$7.marksCardArea.toggle(this.$8.get_showMarksCardTabs())}});var mo=global.tab.VizSummaryViewModel=ss.mkType(a,'tab.VizSummaryViewModel',function(){this.$3=null;this.$4=null;this.$2=null;this.$5=false;this.$6=false;this.$2$1=null;spiff.BaseViewModel.call(this)},{add_summaryChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_summaryChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_showShelves:function(){return this.$6},set_showShelves:function(nk){this.$6=nk;this.$1()},get_showMarksCardTabs:function(){return this.$5},set_showMarksCardTabs:function(nk){this.$5=nk;this.$1()},get_numDimensions:function(){if(ss.isNullOrUndefined(this.$3)){return 0}var nk=this.$3.nodeTreeForSection(0);return(ss.isNullOrUndefined(nk)?0:nk.length)},get_numMeasures:function(){if(ss.isNullOrUndefined(this.$3)){return 0}var nk=this.$3.nodeTreeForSection(1);return(ss.isNullOrUndefined(nk)?0:nk.length)},get_numSets:function(){if(ss.isNullOrUndefined(this.$3)){return 0}var nk=this.$3.nodeTreeForSection(2);return(ss.isNullOrUndefined(nk)?0:nk.length)},get_numParameters:function(){if(ss.isNullOrUndefined(this.$3)){return 0}var nk=this.$3.nodeTreeForSection(3);return(ss.isNullOrUndefined(nk)?0:nk.length)},get_numColumnShelfItems:function(){return this.$0('columns-shelf')},get_numRowShelfItems:function(){return this.$0('rows-shelf')},get_numFilterShelfItems:function(){return this.$0('filter-shelf')},get_numPageShelfItems:function(){return this.$0('pages-shelf')},get_marksCardTabMarkTypes:function(){if(ss.isNullOrUndefined(this.$2)){return[]}return _.map(this.$2.get_marksCardTabEncodingModels(),function(nk){return nk.get_currentPrimitiveType().primitiveType})},dispose:function(){if(ss.isValue(this.$3)){this.$3.remove_dataSchemaModified(ss.mkdel(this,this.$1))}if(ss.isValue(this.$4)){this.$4.remove_newShelves(ss.mkdel(this,this.$1))}spiff.BaseViewModel.prototype.dispose.call(this)},update:function(nk,nl,nm){if(ss.isValue(this.$3)){this.$3.remove_dataSchemaModified(ss.mkdel(this,this.$1))}if(ss.isValue(this.$4)){this.$4.remove_newShelves(ss.mkdel(this,this.$1))}this.$3=nk;this.$4=nl;this.$2=nm;if(ss.isValue(this.$3)){this.$3.add_dataSchemaModified(ss.mkdel(this,this.$1))}if(ss.isValue(this.$4)){this.$4.add_newShelves(ss.mkdel(this,this.$1))}this.$1()},$0:function(nk){if(ss.isNullOrUndefined(this.$4)){return 0}var nl=this.$4.findShelf(nk);if(ss.isNullOrUndefined(nl)){return 0}return nl.get_pills().length},$1:function(){if(ss.isNullOrUndefined(this.$2$1)){return}this.$2$1()}});var mp=global.tab.WarningPageModel=ss.mkType(a,'tab.WarningPageModel',function(nk,nl,nm){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.set_title(nk);this.set_message(nl);this.set_selectedPalette(nm)},{get_title:function(){return this.$1$1},set_title:function(nk){this.$1$1=nk},get_message:function(){return this.$1$2},set_message:function(nk){this.$1$2=nk},get_selectedPalette:function(){return this.$1$3},set_selectedPalette:function(nk){this.$1$3=nk}});var mq=global.tab.WebConnectDataCommand=ss.mkType(a,'tab.WebConnectDataCommand',function(){tab.WebConnectDataCmd.call(this)},{get_isVisible:function(){return!tsConfig.isPublic||tsConfig.features['PublicWebAuthoring_M3']},get_isEnabled:function(){return!tsConfig.is_guest&&(!tsConfig.isPublic||tsConfig.features['PublicWebAuthoring_M3'])},do$1:function(){if(this.get_isEnabled()){tab.DataSourceExtractController.commitPendingExtractAction().done(function(){tab.ModuleManager.load$1(tab.IConnectionDialogModule).call(null,[]).done(function(nk){nk.showCreateConnectionDialog('')})})}}});var mr=global.tab.WebDashboardDesignCommand=ss.mkType(a,'tab.WebDashboardDesignCommand',function(){tab.WebDashboardDesignCmd.call(this)},{do$1:function(){tab.DashboardModel.set_designModeEnabled(!tab.DashboardModel.get_designModeEnabled())}});var ms=global.tab.WebEditDataSourceCommand=ss.mkType(a,'tab.WebEditDataSourceCommand',function(){tab.WebEditDataSourceCmd.call(this)},{get_isVisible:function(){return tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='data-tab'&&tab.MiscUtil.shouldShowDataTab()},get_isEnabled:function(){return ms.$1().getDataSourceCount(false)>0&&this.$f().get_isDataTabViewSupported()},$f:function(){var nk=ms.$1().getDataSource(this.$e())||tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_activeDataSource();return nk},$e:function(){return this.c['datasourceId']},do$1:function(){if(!ss.equals(ms.$1().get_activeDataSource(),this.$f())){tab.SchemaClientCommands.setActiveDataSourceName(this.$f().get_name(),false)}tab.VizClientCommands.setUIMode('data-tab','EditDataSource','')}},{$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mt=global.tab.WebEditObjectCaptionCommand=ss.mkType(a,'tab.WebEditObjectCaptionCommand',function(){tab.WebEditObjectCaptionCmd.call(this)},{get_isVisible:function(){return true},get_isEnabled:function(){return!tsConfig.is_guest},do$1:function(){if(this.get_isEnabled()){var nk=$.Deferred();var nl=this.c['datasource'];var nm=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(nl);if(ss.isNullOrUndefined(nm)){return}var nn=this.c['dataObjectModelObjectId'];var no=nm.findFieldContainer(ss.formatString('[object].[{0}]',nn));var np=no.get_fieldCaptionForReset();var nq=no.get_displayName();var nr=tab.Strings.AuthRenameObject;var ns=kt.new$1(nq,np,function(nt,nu){_.defer(function(){tab.ObjectClientCommands.validateObjectCaption(nl,nn,nt,nu)})},function(nt){_.defer(function(){tab.ObjectClientCommands.editObjectCaption(nn,nt);nk.resolve()})});ns.set_titleUnescaped(nr);ns.show()}}});var mu=global.tab.WebEPDSPublishCommand=ss.mkType(a,'tab.WebEPDSPublishCommand',function(){tab.WebEPDSPublishCmd.call(this)},{get_isEnabled:function(){return((this.c['isPublishAs'].toString().toLowerCase()==='true')?mu.$1().get_publishedDsSaveAsPermission():mu.$1().get_publishedDsSavePermission())},do$1:function(){tab.DataSourceExtractController.commitPendingExtractAction().done(ss.mkdel(this,function(){var nk={};nk['isPublishAs']=this.c['isPublishAs'];var nl=nk;if(!ss.isNullOrEmptyString(this.c['datasource'])){nl['datasource']=this.c['datasource']}tab.ServerCommands.executeServerCommand(tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'get-web-save-datasource-dialog'},nl),'immediately',null,null)}))}},{$ctor1:function(nk){tab.WebEPDSPublishCmd.call(this);this.c['isPublishAs']=nk},$1:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema()}});var mv=global.tab.WebExportCrossTabCommand=ss.mkType(a,'tab.WebExportCrossTabCommand',function(){this.$e=new tab.TransientDashboardStateReader;tab.WebExportCrossTabCmd.call(this)},{get_isEnabled:function(){return tsConfig.allow_export_data},do$1:function(){if(!this.get_isEnabled()){return}tab.ExportServerCommands.exportCrosstabOptionsDialog()}});var mw=global.tab.WebExportDataCommand=ss.mkType(a,'tab.WebExportDataCommand',function(){this.$e=new tab.TransientDashboardStateReader;tab.WebExportDataCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},get_isEnabled:function(){return(new tab.DownloadButtonEnablementLogicOperator).withPermissionCriterion(tsConfig.allow_export_data).withSheetSelectionCriterion(this.$e.isSheetSelected()).evaluateResult()},do$1:function(){if(this.get_isEnabled()){tab.ViewingToolbarCommands.exportData(null)}}});var mx=global.tab.WebExportPdfCommand=ss.mkType(a,'tab.WebExportPdfCommand',function(){tab.WebExportPdfCmd.call(this)},{get_isEnabled:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isEnabled.call(this)&&tsConfig.allow_export_image},do$1:function(){tab.ExportServerCommands.exportPdfOptionsDialog()}});var my=global.tab.WebExportPngCommand=ss.mkType(a,'tab.WebExportPngCommand',function(){tab.WebExportPngCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},get_isEnabled:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isEnabled.call(this)&&tsConfig.allow_export_image},do$1:function(){tab.Application.get_instance().get_client().get_toolbarCommands().exportImage(true)}});var mz=global.tab.WebExportPowerPointCommand=ss.mkType(a,'tab.WebExportPowerPointCommand',function(){tab.WebExportPowerPointCmd.call(this)},{get_isVisible:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isVisible.call(this)&&!tsConfig.is_guest},get_isEnabled:function(){return ss.makeGenericType(tab.WebBaseCmd$2,[Object,Object]).prototype.get_isEnabled.call(this)&&tsConfig.allow_export_image},do$1:function(){tab.ExportServerCommands.exportPowerPoint()}});var mA=global.tab.WebFilterDialogCommandWaiter=ss.mkType(a,'tab.WebFilterDialogCommandWaiter',function(){this.$3=null;this.$2=null},{handleCommandStarted:function(nk){this.$3=nk},handleCommandCompleted:function(){},handleCommandError:function(){},handleCancel:function(nk){var nl=this.$3.get_remoteCommands();var nm=nl[0];this.$2=nk;tab.CancelCommands.cancelRunningCommand(nm,ss.mkdel(this,this.$0),ss.mkdel(this,this.$1))},$0:function(nk){this.$2.resolve()},$1:function(){this.$2.reject()}});var mB=global.tab.WebFilterDialogDomainCancelCommand=ss.mkType(a,'tab.WebFilterDialogDomainCancelCommand',function(){tab.WebFilterDialogDomainCancelCmd.call(this)},{do$1:function(){throw new ss.NotImplementedException},$e:function(nk){return ss.referenceEquals(nk.cmd,{ns:'tabdoc',cmd:'categorical-filter-init-with-domain'}.cmd)||ss.referenceEquals(nk.cmd,{ns:'tabdoc',cmd:'categorical-filter-set-range-type-deferred'}.cmd)},$f:function(){var nk=$.Deferred();var nl=tab.CommandController.get().get_remoteExecutingCommands();var nm=((nl.length>0)?{ns:'tabdoc',cmd:nl[0].get_commandName()}:null);if(ss.isNullOrUndefined(nm)||!this.$e(nm)){nk.resolve()}else{var nn=tab.WebCommandRegistry.get_instance().getCommandLocalOptions(nm).commandWaiter;if(ss.isValue(nn)){var no=ss.safeCast(nn,tab.IWaitForCommandsWithCancel);no.handleCancel(nk)}}return nk.promise()},invoke:function(){var nk=$.Deferred();this.$f().done([function(){nk.resolve()}]).fail([function(){nk.reject()}]);return nk.promise()}});var mC=global.tab.WebFormatPaneCommand=ss.mkType(a,'tab.WebFormatPaneCommand',function(){tab.WebFormatPaneCmd.call(this)},{do$1:function(){gw.handleWebContextChange(this.c['formattingCtx'])}});var mD=global.tab.WebFormatWorkbookCommand=ss.mkType(a,'tab.WebFormatWorkbookCommand',function(){tab.WebFormatWorkbookCmd.call(this)},{do$1:function(){if(tab.FormatContainerModel.get_formatPaneModel().get_isVisible()){tab.FormatCommands.hideFormatPane()}else{tab.FormatCommands.showFormatPane()}}});var mE=global.tab.WebRemoveShelfPillCommand=ss.mkType(a,'tab.WebRemoveShelfPillCommand',function(){tab.WebRemoveShelfPillCmd.call(this)},{do$1:function(){var nk=this.c['shelfType'];var nl=this.c['shelfItemId'];if(ss.isNullOrUndefined(nk)||ss.isNullOrUndefined(nl)||!tsConfig.is_authoring||tab.ApplicationModel.get_instance().get_workbook().get_uiMode()!=='document'||tsConfig.current_sheet_type!=='worksheet'){return}var nm=mE.$1(nk);var nn=mE.$0(nm,parseInt(ss.safeCast(nl,String)));if(ss.isNullOrUndefined(nn)||ss.isNullOrUndefined(nn.item1)||ss.isNullOrUndefined(nn.item2)){return}tab.ShelfClientCommands.removeShelfPill(nn.item1,nn.item2)}},{$1:function(nk){var nl=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(nl)){return null}var nm=nl.get_shelves();return _.filter(nm.get_shelves(),function(nn){return nn.get_shelfType()===nk})},$0:function(nk,nl){if(ss.isNullOrUndefined(nk)){return null}for(var nm=0;nm<nk.length;nm++){var nn=nk[nm];var no=nn.findPill(nl);if(ss.isValue(no)){return{item1:nn,item2:no}}}return null}});var mF=global.tab.WebRenameDatasourceDialogCommand=ss.mkType(a,'tab.WebRenameDatasourceDialogCommand',function(){this.$f=null;tab.WebRenameDatasourceDialogCmd.call(this)},{get_isEnabled:function(){return tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSourceCount(false)>0},do$1:function(){var nk=this.c['datasourceId'];var nl=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_dataSourcesList();var nm=nl.map(function(no){return no.get_caption().toString()});var nn=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().getDataSource(nk)||tab.ApplicationModel.get_instance().get_workbook().get_dataSchema().get_activeDataSource();this.$f=kq.createRenameDatasourceCaptionDialog(nn,nm,ss.mkdel(this,this.$e));this.$f.show()},$e:function(){this.$f=tab.MiscUtil.dispose$1(this.$f)}});var mG=global.tab.WebShowMeCommand=ss.mkType(a,'tab.WebShowMeCommand',function(){tab.WebShowMeCmd.call(this)},{get_isEnabled:function(){return!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetDashboard()&&!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()&&tab.ApplicationModel.get_instance().get_workbook().get_uiMode()==='document'},do$1:function(){}});var mH=global.tab.WebToolbarMoreCommand=ss.mkType(a,'tab.WebToolbarMoreCommand',function(){tab.WebToolbarMoreCmd.call(this)},{get_isVisible:function(){return false},do$1:function(){}});var mI=global.tab.WebZoneUrlDialog=ss.mkType(a,'tab.WebZoneUrlDialog',function(nk){this.$1=null;this.$0=null;this.$1=nk},{show:function(){this.$0=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[mK,mJ,Object])).call(null,[this.$1]);this.$0.addToDom($(document.body))},dispose:function(){this.$0=tab.MiscUtil.dispose$1(this.$0);this.$1=tab.MiscUtil.dispose$1(this.$1)}},{createWebZoneUrlDialog:function(nk,nl,nm){var nn=new mK(nk,nl,nm);return new mI(nn)}});var mJ=global.tab.WebZoneUrlDialogComponent=ss.mkType(a,'tab.WebZoneUrlDialogComponent',function(nk,nl){this.$9=null;this.$a=null;this.$c=null;this.$b=null;spiff.PureRenderComponent.$ctor1.call(this,nk,nl);this.state={isSelectingKeyword:false,hasError:false};this.$9=ss.mkdel(this,this.$8);this.$a='tabUrlDialogRoot'+mJ.$1++},{componentWillMount:function(){this.$b=$('<div></div>');this.$b.addClass('tabUrlDialogRoot');this.$b[0].id=this.$a;this.$b[0].style.position='relative';$(document.body).append(this.$b)},componentWillUnmount:function(){this.$b.remove()},render:function(){return React.createElement(SharedWidgets.DialogWidget,{stackingRootId:this.$a,testId:'EditUrl',isModal:true,title:tab.Strings.WebZoneUrlDialogTitle,showCloseButton:false,type:0,positioningBehavior:0,shouldAdjustPositionOnWindowResize:true,onCloseRequest:this.props.cancel,children:[this.$5(),this.$4()],footerContent:this.$3(),showFooter:true,shouldReturnFocusOnClose:true,dialogWidth:375,isGlassTransparent:true,dialogBodyStyle:{overflow:'visible'},zIndex:988,shouldRecenterOnUpdate:true})},$4:function(){var nk=spiff.DOMElements.label({className:'tab-urlErrorText',style:{display:(ss.isValue(this.props.errorText)?'block':'none')},key:'error'},this.props.errorText);return nk},$3:function(){var nk={marginLeft:SharedWidgets.TabStyles.Spacing.MediumSpace,alignSelf:'center'};var nl={handleClick:ss.mkdel(this,function(no){_.defer(ss.mkdel(this,function(){this.props.cancel()}))}),buttonType:3,testId:'Cancel',children:tab.Strings.DialogButtonCancel,style:nk,key:'cancel-button'};var nm={handleClick:ss.mkdel(this,function(no){_.defer(ss.mkdel(this,function(){this.props.submit()}))}),buttonType:2,testId:'Submit',children:tab.Strings.DialogButtonOK,style:nk,key:'submit-button'};var nn=spiff.DOMElements.div({className:'tab-urlDialogButtons',key:'buttons'},React.createElement(SharedWidgets.ButtonWidget,nl),React.createElement(SharedWidgets.ButtonWidget,nm));return nn},$5:function(){var nk={placeholder:'',text:this.props.text,handleChange:this.props.changeText,handleEnter:this.props.submit,testId:'URLInput',key:'text-input',containerStyle:{width:'100%'},ref:this.$9,handleClearText:this.props.clearText};var nl=spiff.DOMElements.div({className:'tab-urlDialogInputs',key:'inputs'},React.createElement(SharedWidgets.OutlineTextFieldWidget,nk),this.$6());return nl},$6:function(){var nk=null;if(ss.isValue(this.props.substitutionKeywords)){nk=_.map(this.props.substitutionKeywords.substitutionKeywordSublists,ss.mkdel(this,this.$7))}var nl=new Object;nl.onSelectorToggled=ss.mkdel(this,function(){this.setState({isSelectingKeyword:!this.state.isSelectingKeyword})});nl.onFocusLost=ss.mkdel(this,function(){this.setState({isSelectingKeyword:false})});nl.isSelecting=this.state.isSelectingKeyword;nl.getDesiredHeight=ss.mkdel(this,function(nm){return _.reduce($('.tab-SelectableButtonGroup',nm).toArray(),ss.mkdel(this,this.$0),0)});nl.getMinimumWidth=ss.mkdel(this,function(nm){return _.reduce($('.tab-SelectableButtonGroup',nm).toArray(),ss.mkdel(this,this.$1),0)});nl.renderButton=function(){return React.createElement(spiff.ArrowDropdownButtonComponent,new Object)};return React.createElement(spiff.StatelessDropdownComponent,nl,nk)},$7:function(nk,nl){var nm=_.map(nk.substitutionKeywords,ss.mkdel(this,function(np){var nq=new spiff.SelectableButtonGroupItem;nq.label=np.localizedKeyword;nq.testId=np.invariantKeyword;return nq}));var nn=spiff.SingleSelectGroupSelection.buildSingleSelectGroupSelection$1(Object).call(null,nk.substitutionKeywords,function(np){return false});var no=new Object;no.borders=false;no.allOption=false;no.items=nm;no.selection=nn;no.onSelectionChanged=ss.mkdel(this,function(np){this.$2(np,nk)});no.key=nl;return React.createElement(spiff.SelectableButtonGroupComponent,no)},$0:function(nk,nl){return nk+spiff.SelectableButtonGroupComponent.getDesiredHeight($(nl))+1},$1:function(nk,nl){return Math.max(nk,spiff.SelectableButtonGroupComponent.getMinimumWidth($(nl)))},$2:function(nk,nl){var nm=(ss.isValue(this.$c)?this.$c.selectionStart:0);var nn=nk.mapSelected(Object).call(nk,function(no){return nl.substitutionKeywords[no]})[0];this.props.insertKeyword(nn,nm);this.setState({isSelectingKeyword:false})},$8:function(nk){var nl=ss.safeCast(nk,SharedWidgets.OutlineTextFieldWidget);this.$c=null;if(ss.isValue(nl)){var nm=ReactDOM.findDOMNode(nl);var nn=$(nm).find('input');if(nn.length>0){this.$c=nn[0]}}}});var mK=global.tab.WebZoneUrlDialogViewModel=ss.mkType(a,'tab.WebZoneUrlDialogViewModel',function(nk,nl,nm){this.$f=null;this.$b=null;this.$d=null;this.$e=null;this.$c=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$f=nl;this.$b=nm;this.$e=nk;tab.DashboardClientCommands.getUrlSubstitutionParameters().done(ss.mkdel(this,function(nn){this.$d=nn.substitutionKeywordsList;this.incrementProps()}))},{$9:function(){return this.$e},$a:function(nk){this.$e=nk;this.incrementProps()},$7:function(){return this.$c},$8:function(nk){this.$c=nk;this.incrementProps()},$5:function(){var nk=this.$6(this.$9());tab.DashboardClientCommands.isWebZoneUrlValid(nk).done(ss.mkdel(this,function(nl){if(nl.isValid){this.$f(nk)}else{this.$8(nl.validationMessage)}}))},$6:function(nk){var nl=nk;if(ss.isValue(this.$d)){for(var nm=0;nm<this.$d.substitutionKeywordSublists.length;nm++){var nn=this.$d.substitutionKeywordSublists[nm];for(var no=0;no<nn.substitutionKeywords.length;no++){var np=nn.substitutionKeywords[no];var nq=this.$3(np.localizedKeyword);nl=ss.replaceAllString(nl,nq,this.$3(np.invariantKeyword))}}}return nl},$4:function(nk,nl){this.$a(ss.insertString(this.$9(),nl,this.$3(nk.localizedKeyword)))},$3:function(nk){return'<'+nk+'>'},createInitialProps:function(){return{submit:ss.mkdel(this,this.$5),cancel:this.$b,insertKeyword:ss.mkdel(this,this.$4),changeText:ss.mkdel(this,function(nk){this.$a(nk)}),clearText:ss.mkdel(this,function(){this.$a('')})}},createUpdatedProps:function(){return{substitutionKeywords:this.$d,text:this.$9(),errorText:this.$7()}}});var mL=global.tab.WhereDidSaveGoCommand=ss.mkType(a,'tab.WhereDidSaveGoCommand',function(){tab.WhereDidSaveGoCmd.call(this)},{get_isEnabled:function(){return true},do$1:function(){kM.showSaveGoneDialog()}});var mM=global.tab.WindowTableCalcViewModel=ss.mkType(a,'tab.WindowTableCalcViewModel',function(nk){this.$0=null;mi.call(this);this.$0=nk;this.$0.add_modelUpdated(ss.mkdel(this,this.onModelUpdated));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$0.remove_modelUpdated(ss.mkdel(this,this.onModelUpdated))})))},{get_model:function(){return this.$0},get_windowModel:function(){return this.$0},onModelUpdated:function(){},showWindowOptions:function(nk){var nl=new lV(this.$0);this.disposables.add$1(nl);spiff.UberPopupViewModel.createForContent$1(nl,nk,null,false).show()}});var mN=global.tab.ZoneChromeButtonRender=ss.mkType(a,'tab.ZoneChromeButtonRender',function(nk,nl,nm,nn,no){this.$d=null;this.$a=0;this.$b=0;this.$9=null;this.$c=null;this.$d=nl;this.$a=nn;this.$b=no;this.$9=nk;this.$c=nm},{render:function(){if(ss.isNullOrUndefined(this.$d.buttons)||this.$d.buttons.length===0){return null}var nk=_.map(this.$d.buttons,ss.mkdel(this,this.$8));return spiff.DOMElements.div({className:'tabAuthZoneSelButtons'+' tabSuppressVizTooltipsAndOverlays '+(this.$d.addWasActiveClass?' tabWasActive':''),style:this.$4(),ref:this.$9},nk)},$4:function(){var nk=this.$6();var nl=this.$5();var nm={top:nk.top,left:nl.left};var nn=this.$7(nl.anchorEdge,nk.anchorEdge);return $.extend({},nm,nn)},$7:function(nk,nl){var nm=0;var nn=0;var no=0;var np=0;if(nk===0){nn=2;no=2}else if(nk===2){if(nl===0){no=2}else{nn=2}}else if(nk===3){if(nl===0){np=2}else{nm=2}}else{nm=2;np=2}return{borderBottomLeftRadius:nm,borderBottomRightRadius:nn,borderTopLeftRadius:np,borderTopRightRadius:no}},$6:function(){var nk=tab.WorkbookView.findDashboardContainer();var nl=tab.DoubleUtil.roundToInt(nk.scrollTop());var nm=tabBootstrap.ViewerBootstrap.get_instance().getWebClientPortSize('dashboard');var nn=nm.h+nl;var no={top:this.$c.t,anchorEdge:1};if(no.top<nl){no={top:Math.min(nl,this.$c.h+this.$c.t),anchorEdge:1}}var np=no.top+this.$a;if(np>nn){np=Math.max(nn,this.$c.t);no={top:np-this.$a,anchorEdge:0}}return no},$5:function(){var nk={left:this.$3(),anchorEdge:0};var nl=tab.WorkbookView.findDashboardContainer();var nm=nl.scrollLeft();if(this.$b+nk.left>this.$d.dashboardContentWidth+nm){nk={left:this.$2(),anchorEdge:1}}if(nk.left<0){nk={left:this.$0(),anchorEdge:2}}return nk},$2:function(){return this.$c.l-this.$b+ss.idiv(2,2)},$3:function(){return this.$c.l+this.$c.w-ss.idiv(2,2)},$0:function(){return this.$c.l+2},$1:function(){return this.$c.l+this.$c.w-this.$b-2},$8:function(nk){var nl=ss.safeCast(nk,tab.ToolbarDropdownButtonViewModel);if(ss.isValue(nl)){var nm=new(ss.makeGenericType(tab.ToolbarButtonProps$1,[tab.ToolbarDropdownButtonViewModel]));nm.viewModel=nl;nm.key=nl.get_iconClass();return React.createElement(bM,nm)}var nn=new(ss.makeGenericType(tab.ToolbarButtonProps$1,[tab.ToolbarButtonViewModel]));nn.viewModel=nk;nn.key=nk.get_iconClass();return React.createElement(bK,nn)}});var mO=global.tab.ZoneChromeConstants=ss.mkType(a,'tab.ZoneChromeConstants',null,null,{getTopEdge:function(nk,nl){return{l:nk.l,t:nk.t,w:nk.w,h:nl}},getBottomEdge:function(nk,nl){return{l:nk.l,t:nk.t+nk.h-nl,w:nk.w,h:nl}},getLeftEdge:function(nk,nl){return{l:nk.l,t:nk.t,w:nl,h:nk.h}},getRightEdge:function(nk,nl){return{l:nk.l+nk.w-nl,t:nk.t,w:nl,h:nk.h}},getFlexibleDashboardTopEdgeResizer:function(nk,nl){return{l:nk.l-ss.idiv(nl,2),t:nk.t-ss.idiv(nl,2),w:nk.w+nl,h:nl}},getFlexibleDashboardBottomEdgeResizer:function(nk,nl){return{l:nk.l-ss.idiv(nl,2),t:nk.t+nk.h-ss.idiv(nl,2),w:nk.w+nl,h:nl}},getFlexibleDashboardLeftEdgeResizer:function(nk,nl){return{l:nk.l-ss.idiv(nl,2),t:nk.t-ss.idiv(nl,2),w:nl,h:nk.h+nl}},getFlexibleDashboardRightEdgeResizer:function(nk,nl){return{l:nk.l+nk.w-ss.idiv(nl,2),t:nk.t-ss.idiv(nl,2),w:nl,h:nk.h+nl}},getEdgeRect:function(nk,nl,nm){switch(nl){case 3:{return mO.getBottomEdge(nk,nm)}case 0:{return mO.getLeftEdge(nk,nm)}case 1:{return mO.getRightEdge(nk,nm)}case 2:{return mO.getTopEdge(nk,nm)}}return nk},getFlexibleDashboardEdgeResizerRect:function(nk,nl,nm){switch(nl){case 3:{return mO.getFlexibleDashboardBottomEdgeResizer(nk,nm)}case 0:{return mO.getFlexibleDashboardLeftEdgeResizer(nk,nm)}case 1:{return mO.getFlexibleDashboardRightEdgeResizer(nk,nm)}case 2:{return mO.getFlexibleDashboardTopEdgeResizer(nk,nm)}}return nk},getEdgeCss:function(nk,nl,nm){var nn=mO.getEdgeRect(nk,nl,nm);return{top:nn.t,left:nn.l,width:nn.w,height:nn.h}},getFlexibleDashboardEdgeResizerCss:function(nk,nl,nm){var nn=mO.getFlexibleDashboardEdgeResizerRect(nk,nl,nm);return{top:nn.t,left:nn.l,width:nn.w,height:nn.h}},getCornerCss:function(nk,nl,nm,nn){var no=nk;var np=[nl,nm];for(var nq=0;nq<np.length;nq++){var nr=np[nq];no=mO.getEdgeRect(no,nr,nn)}return{top:no.t,left:no.l,width:no.w,height:no.h}},getFlexibleDashboardResizerCornerCss:function(nk,nl,nm,nn){var no=mO.getFlexibleDashboardEdgeResizerRect(nk,nl,nn);var np=mO.getFlexibleDashboardEdgeResizerRect(nk,nm,nn);return{top:Math.max(no.t,np.t),left:Math.max(no.l,np.l),width:Math.min(no.w,np.w),height:Math.min(no.h,np.h)}},chromeRectFromZone:function(nk,nl,nm){if(ss.isNullOrUndefined(nk)){return{l:0,t:0,w:0,h:0}}var nn=(nl?ss.idiv(2,2):0);var no=(!nm?0:mO.dashContentOffsetLeft);var np=(!nm?0:mO.dashOffsetTop);return{l:nk.get_x()+no-2+nn,t:nk.get_y()+np-2+nn,w:nk.get_width()+2*2-2*nn,h:nk.get_height()+2*2-2*nn}},chromeRectFromZones:function(nk,nl){if(tab.MiscUtil.isNullOrEmpty$3(nk)){return{l:0,t:0,w:0,h:0}}var nm=(!nl?0:mO.dashContentOffsetLeft);var nn=(!nl?0:mO.dashOffsetTop);var no=null;for(var np=0;np<nk.length;np++){var nq=nk[np];var nr={x:nq.get_x(),y:nq.get_y(),w:nq.get_width(),h:nq.get_height()};if(ss.isNullOrUndefined(no)){no=nr}else{no=tab.RectXYUtil.union(no,nr)}}return{l:no.x+nm-2,t:no.y+nn-2,w:no.w+2*2,h:no.h+2*2}},chromeRectFromZone$1:function(nk,nl,nm,nn){var no={l:0,t:0,w:0,h:0};if(ss.isNullOrUndefined(nk)){return no}var np=(nl?ss.idiv(2,2):0);var nq=(!nm?0:mO.dashContentOffsetLeft);var nr=(!nm?0:mO.dashOffsetTop);if(nk.get_x()===0&&nk.get_width()-nk.get_x()===nn.w){no.l=nk.get_x();no.w=nk.get_width()}else{no.l=nk.get_x()+nq-2+np;no.w=nk.get_width()+2*2-2*np}if(nk.get_y()===0&&nk.get_height()-nk.get_y()===nn.h){no.t=nk.get_y();no.h=nk.get_height()}else{no.t=nk.get_y()+nr-2+np;no.h=nk.get_height()+2*2-2*np}return no}});var mP=global.tab.ZoneChromeDragSource=ss.mkType(a,'tab.ZoneChromeDragSource',function(nk,nl,nm){this.$3=null;this.$2=null;this.$1=null;this.$3=nm;this.$2=nl;this.$1=nk},{startDrag:function(nk){var nl=this.$2.get_selectedZone();if(ss.isNullOrUndefined(nl)){return null}if(nl.get_isFloating()||nl.get_isZoneInGroup()){var nm=new fV(ss.mkdel(this,this.$0),{w:nl.get_width(),h:nl.get_height(),x:nl.get_x(),y:nl.get_y()},this.$3,this.$1.get_model().get_dashboardSize().w,this.$1.get_model().get_dashboardSize().h);return nm.startDrag(nk)}var nn=new dz(this.$1.get_model(),bg.dashboardGeometry);var no=nn.getPointOnEdge(nl,this.$3[0]);return nn.startDrag(no,$(nk.target),function(){})},acceptsDragType:function(){return 1},$0:function(nk){return tab.DashboardZoneCommands.resizeFreeFormZone(this.$2.get_selectedZone(),nk.x,nk.y,nk.w,nk.h)}});var mQ=global.tab.ZoneChromeEdgeRender=ss.mkType(a,'tab.ZoneChromeEdgeRender',function(){this.chromeRect=null;this.className=null;this.side=0;this.zindex=null},{render:null,renderEdge:function(nk){var nl=mO.getEdgeCss(this.chromeRect,this.side,2);if(ss.isValue(this.zindex)){nl.zIndex=this.zindex}return spiff.DOMElements.div({className:this.className,style:nl,key:this.side.toString()+this.className},nk)}},{$2:function(nk,nl){var nm='';if(nk.areMultipleZonesSelected){nm=((nl===2)?'tabMultiZoneTop':'tabMultiZoneBottom')}else{nm=mQ.$0(nl,nk)}return nm},$1:function(nk,nl,nm,nn){return new hT(nl,nm,mQ.$0(nk,nl),nk,nn,nl.zIndex)},createChromeEdgeRender:function(nk,nl,nm,nn){var no=null;switch(nk){case 0:{no=new gA(nm,(nl.areMultipleZonesSelected?'tabMultiZoneLeft':mQ.$0(nk,nl)),nk,nl.zIndex);break}case 1:{no=new gA(nm,(nl.areMultipleZonesSelected?'tabMultiZoneRight':mQ.$0(nk,nl)),nk,nl.zIndex);break}case 2:{no=mQ.$1(nk,nl,nm,nn);break}case 3:{no=mQ.$1(nk,nl,nm,nn);break}}return no},$0:function(nk,nl){return mQ.$5[nk]}});var mR=global.tab.ZoneDragAvatarTemplate=ss.mkType(a,'tab.ZoneDragAvatarTemplate',function(){spiff.Template.call(this,$('<div class= tab-ZoneDragAvatarContainer><div class=tab-FloatingZoneDragAvatar></div></div>'))},{get_avatarElement:function(){return this.domRoot.find('.'+'tab-FloatingZoneDragAvatar')}});var mS=global.tab.ZoneDragAvatarView=ss.mkType(a,'tab.ZoneDragAvatarView',function(nk){ss.makeGenericType(spiff.BaseView$1,[mT]).call(this,nk,new mR);this.$7();this.get_viewModel().add_displayStateChanged(ss.mkdel(this,this.$7));this.disposables.add(ss.mkdel(this,function(){this.get_viewModel().remove_displayStateChanged(ss.mkdel(this,this.$7))}))},{$8:function(){return ss.safeCast(this.get_template(),mR)},$7:function(){var nk={width:this.get_viewModel().get_floatingDisplayRect().w+'px',height:this.get_viewModel().get_floatingDisplayRect().h+'px'};this.$8().get_avatarElement().css(nk);tab.DomUtil.setElementPosition(this.$8().get_avatarElement(),this.get_viewModel().get_floatingDisplayRect().l,this.get_viewModel().get_floatingDisplayRect().t,null,true);var nl=this.get_viewModel().get_isFloating()&&this.get_viewModel().get_isOverTarget();this.element.toggle(nl)}});var mT=global.tab.ZoneDragAvatarViewModel=ss.mkType(a,'tab.ZoneDragAvatarViewModel',function(nk){this.$4=false;this.$3=false;this.$2=null;this.$2$1=null;this.$2$2=null;this.dashboardElementDragInstance=null;spiff.BaseViewModel.call(this);this.set_floatingDisplayRect(mT.$0());nk.done(ss.mkdel(this,this.$1));this.$0(EventUtils.DragDropManager.get_currentTarget());this.$2=EventUtils.DragDropManager.get_currentTarget();EventUtils.DragDropManager.add_currentTargetChanged(ss.mkdel(this,this.$0));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_currentTargetChanged(ss.mkdel(this,this.$0))}))},{add_displayStateChanged:function(nk){this.$2$1=ss.delegateCombine(this.$2$1,nk)},remove_displayStateChanged:function(nk){this.$2$1=ss.delegateRemove(this.$2$1,nk)},get_floatingDisplayRect:function(){return this.$2$2},set_floatingDisplayRect:function(nk){this.$2$2=nk},get_isFloating:function(){return ss.isValue(this.dashboardElementDragInstance)&&this.dashboardElementDragInstance.get_isFloating()},get_isShiftDrag:function(){return false},get_isOverTarget:function(){return this.$4},set_isOverTarget:function(nk){if(this.$4!==nk){this.$4=nk}},get_isOverContainer:function(){return this.$3},set_isOverContainer:function(nk){if(this.$3!==nk){this.$3=nk}},get_currentTarget:function(){return this.$2},set_currentTarget:function(nk){if(!ss.referenceEquals(this.$2,nk)){this.$2=nk}},initialize:function(nk){this.dashboardElementDragInstance=nk;this.raiseActionEvent(this.$2$1);var nl=ss.mkdel(this,function(){this.raiseActionEvent(this.$2$1)});nk.add_shiftStateChanged(nl);this.disposables.add(function(){nk.remove_shiftStateChanged(nl)})},$0:function(nk){if(!ss.referenceEquals(nk,this.get_currentTarget())){this.set_currentTarget(nk);this.set_isOverTarget(ss.isInstanceOfType(nk,dQ));this.set_isOverContainer(ss.isInstanceOfType(nk,dQ)&&ss.safeCast(nk,dQ).getTargetType()==='container-target');this.raiseActionEvent(this.$2$1)}},$1:function(nk){this.set_floatingDisplayRect(nk);this.raiseActionEvent(this.$2$1)}},{forZoneMove:function(nk){var nl=$.Deferred();nk.done(function(nm){nl.resolve({l:nm.l,t:nm.t,w:nm.w,h:nm.h})}).fail(function(){nl.reject()});return new mT(nl)},forNewZone:function(nk){return new mT(nk)},createDeferredRect:function(nk){var nl=$.Deferred();nk.done(function(nm){nl.resolve(mT.$1(nm))}).fail(function(){nl.reject()});return nl},$1:function(nk){nk.y=nk.y||0;nk.x=nk.x||0;return{l:nk.y,t:nk.x,w:nk.defaultWidth,h:nk.defaultHeight}},$0:function(){return{l:0,t:0,w:0,h:0}}});var mU=global.tab.ZoneDragInstance=ss.mkType(a,'tab.ZoneDragInstance',function(nk,nl,nm,nn){this.grabPoint=null;this.$4=null;dS.call(this,nk,nk.get_isFloating(),nn);this.grabPoint=nl;this.set_dragDropPresModel(nm);if(nk.get_zoneType()==='viz'){this.$4=new spiff.Glass(tab.ZoneView.getZoneElement(nk.get_zoneId()),false);this.$4.show();this.$4.set_opaque(true);this.$4.element.css('opacity','0.5');this.get_viewModel().add_disposed(ss.mkdel(this,function(no){tab.MiscUtil.dispose$1(this.$4)}))}},{get_dragged:function(){return this.get_payload()},get_isFloating:function(){return dS.prototype.get_isFloating.call(this)&&this.get_dragged().get_canFloat()},get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},handleDrop:function(nk,nl,nm,nn,no){if(tab.FeatureFlags.isEnabled('ResponsiveZonePreviews')&&this.get_isFloating()){var np=this.avatarViewModel.get_floatingDisplayRect();if(np.h>0&&np.w>0){nm={x:np.l+nk.x,y:np.t+nk.y,h:np.h,w:np.w}}}tab.DashboardZoneCommands.moveZone(this.get_dragged().get_zoneId(),nk,this.grabPoint,nm,this.get_isFloating(),nn,no).always(nl)},dropToNowhereAction:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')&&this.get_dragged().get_dashboardModel().get_currentDeviceLayout()!=='default'){tab.DashboardClientCommands.removeZoneFromDeviceLayout(tsConfig.current_sheet_name,this.get_dragged().get_zoneId())}tab.DashboardZoneCommands.hideZone(this.get_dragged().get_zoneId())}},{createWithAvatar:function(nk,nl,nm){var nn=new mU(nk,nl,nm,mT.forZoneMove(mT.createDeferredRect(nm)));nn.initialize();return nn}});var mV=global.tab.ZoneEdgeOrientation=ss.mkEnum(a,'tab.ZoneEdgeOrientation',{horizontal:0,vertical:1,none:2});var mW=global.tab.ZoneFloatingCheckboxViewModel=ss.mkType(a,'tab.ZoneFloatingCheckboxViewModel',function(nk){this.$7=null;nj.call(this,nk);this.$7=nk;this.disposables.add$1(nk.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.remove_dashboardTypeChanged(ss.mkdel(this,this.incrementProps))}nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})))},{get_label:function(){return tab.Strings.LayoutPaneFloatingCheckbox},get_disabled:function(){return!this.get_activeZone().get_canFloat()||this.$6()},get_checked:function(){return this.get_activeZone().get_canFloat()&&this.get_activeZone().get_isFloating()},get_testId:function(){return'layout-zone-floating-checkbox'},toggleFunction:function(nk){if(ss.isValue(this.get_activeZone())&&this.get_activeZone().get_isFloating()!==nk){tab.DashboardZoneCommands.toggleFreeFormZone(this.get_activeZone().get_zoneId())}},bindEventHandlerToZone:function(nk){nk.get_zoneCommonModel().add_changeZoneFloatingState(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToZone:function(nk){nk.get_zoneCommonModel().remove_changeZoneFloatingState(ss.mkdel(this,this.incrementProps))},$6:function(){return ss.isValue(this.$7)&&ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var mX=global.tab.ZoneInfoTreeNode=ss.mkType(a,'tab.ZoneInfoTreeNode',function(nk){mX.$ctor1.call(this,nk,[])},{get_item:function(){return this.$1},get_children:function(){return this.$0},get_expanded:function(){return true},get_key:function(){if(ss.isNullOrUndefined(this.$1)||ss.isNullOrUndefined(this.$1.deviceZoneListItem)){return mX.keyPrefix}return mX.keyPrefix+this.$1.deviceZoneListItem.get_zoneId()}},{$ctor1:function(nk,nl){this.$1=null;this.$0=null;this.$1=nk;this.$0=nl}});var mY=global.tab.ZoneMultiselectionComponent=ss.mkType(a,'tab.ZoneMultiselectionComponent',function(nk,nl){ss.makeGenericType(cg,[Object]).call(this,nk,nl)},{render:function(){var nk={l:0,t:0,w:0,h:0};var nl={className:'tabMultiSelParent',hidden:!this.props.isVisible};if(ss.isValue(this.props.zones)){nk=mO.chromeRectFromZones(this.props.zones,true)}if(ss.isValue(this.props.zones)&&this.props.zones.length===1){return spiff.DOMElements.div(nl,this.renderPendingResizePreview())}return spiff.DOMElements.div(nl,this.renderEdge(2,nk),this.renderEdge(3,nk),this.renderEdge(0,nk),this.renderEdge(1,nk),this.renderButtons(nk),this.renderPendingResizePreview())}});var mZ=global.tab.ZoneMultiselectionViewModel=ss.mkType(a,'tab.ZoneMultiselectionViewModel',function(nk){this.$9=null;ss.makeGenericType(ch,[Object]).call(this,nk);this.disposables.add$1(this.dashboardModelHolder.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleDashboardModelChanged)).addEventBinding(ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.add_newDashboard(ss.mkdel(this,this.activeZoneChanged))}}),ss.mkdel(this,function(nl){if(nl.get_isDashboard()){nl.remove_newDashboard(ss.mkdel(this,this.activeZoneChanged))}})))},{get_dragEnabled:function(){return this.get_areMultipleZonesSelected()&&ss.isValue(this.get_selectedZones())&&!tab.ListExtensions.any(tab.ZoneModel).call(null,this.get_selectedZones(),function(nk){return!nk.get_isFloating()&&!nk.get_isZoneInGroup()})},get_selectedZones:function(){return this.$9},set_selectedZones:function(nk){if(this.$7(nk)){return}var nl=this.dashboardModelHolder.get_model();if(ss.isValue(nl)&&ss.isValue(this.$9)){nl.get_multiSelectChromeCommands().remove_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.$9=(this.$6(nk)?nk:null);if(ss.isValue(nl)&&ss.isValue(this.$9)){nl.get_multiSelectChromeCommands().add_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.forceHidden=false;this.updateChromeItems();this.incrementProps()},$7:function(nk){if(ss.isValue(this.get_selectedZones())&&ss.isValue(nk)&&this.get_selectedZones().length===nk.length){return tab.ListExtensions.where(tab.ZoneModel).call(null,this.get_selectedZones(),function(nl){return ss.contains(nk,nl)}).length===this.get_selectedZones().length}else{return false}},$8:function(){if(ss.isValue(this.get_selectedZones())){var nk=this.get_selectedZones();for(var nl=0;nl<nk.length;nl++){var nm=nk[nl];if(nm.get_isFloating()){return false}}return true}return false},handleZoneSizeChanged:function(){if(ss.isValue(this.get_selectedZones())&&this.get_selectedZones().length===1&&ss.isValue(this.get_selectedZones()[0])){this.get_resizePreviewViewModel().resetLocalSize(this.$9[0])}this.incrementProps()},startDrag:function(nk){if(this.get_dragEnabled()){var nl=this.getGrabPoint(nk)}return null},acceptsDragType:function(){return 1},$6:function(nk){if(tab.MiscUtil.isNullOrEmpty$3(nk)){return false}return true},activeZoneChanged:function(){var nk=this.dashboardModelHolder.get_model();var nl=[];if(ss.isValue(nk)&&nk.get_isDashboard()&&nk.get_activeZoneIDs().length>=1){var nm=nk.get_activeZoneIDs();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(no!==0){nl.push(nk.getZone(no))}this.get_resizePreviewViewModel().resetLocalSize(nk.getZone(no))}this.set_selectedZones(nl)}else{this.set_selectedZones(null)}},handleDashboardModelChanged:function(){this.activeZoneChanged()},updateChromeItems:function(){this.disposeChromeItems();if(ss.isNullOrUndefined(this.dashboardModelHolder.get_model())||ss.isNullOrUndefined(this.get_selectedZones())||!this.get_showZoneChromeButtons()){return}var nk=this.dashboardModelHolder.get_model().get_multiSelectChromeCommands();this.addChromeItems(nk)},createInitialProps:function(){return{zIndex:701}},createUpdatedProps:function(){var nk=true;if(ss.isValue(this.get_selectedZones())){var nl=this.get_selectedZones();for(var nm=0;nm<nl.length;nm++){var nn=nl[nm];if(!nn.get_isVisible()){nk=false}}}return{zones:this.get_selectedZones(),buttons:this.get_chromeItems(),isVisible:!this.forceHidden&&!tab.MiscUtil.isNullOrEmpty$3(this.get_selectedZones())&&nk,shouldEnlarge:this.$8(),dragEnabled:this.get_dragEnabled(),moveDragSource:this,isTopResizable:this.isResizable(2),isBottomResizable:this.isResizable(3),isLeftResizable:this.isResizable(0),isRightResizable:this.isResizable(1),shouldHaveHandle:true,isDesignMode:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard():false),isFlexibleDashboard:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_isFlexibleLayoutEnabled():false),areCornersResizable:false,addWasActiveClass:this.get_isZoneChromeActive(),dashWidth:this.get_dashboardWidth(),dashboardContentWidth:this.get_dashboardContentWidth(),resizePreviewProps:this.get_resizePreviewViewModel().get_props(),areMultipleZonesSelected:this.get_areMultipleZonesSelected()}},isResizable:function(nk){return false},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this)}});var na=global.tab.ZoneObjectDragInstance=ss.mkType(a,'tab.ZoneObjectDragInstance',function(nk,nl,nm){na.$1.call(this,nk,nl,nm,false)},{get_defaultDropCursor:function(){return spiff.CustomCursor.noOp},handleDrop:function(nk,nl,nm,nn,no){tab.DashboardAuthoringObjectsPaneTelemetry.logAddNewObjectToDashboardEvent(true,!this.get_isFloating(),((this.dragged.zoneType==='dashboard-object')?this.dragged.objectType.toString():this.dragged.zoneType.toString()));if(this.dragged.zoneType==='web'){if(this.get_isFlexible()){this.$5(nk,nl,ss.mkdel(this,this.$6),null,null,null,null)}else{this.$7=mI.createWebZoneUrlDialog('',ss.mkdel(this,function(np){this.$5(nk,nl,function(nq){},null,np,null,null)}),ss.mkdel(this,function(){this.$4(nl)}));this.$7.show()}}else if(this.dragged.zoneType==='text'){this.$5(nk,nl,na.$0,null,null,null,null)}else if(this.dragged.zoneType==='bitmap'){this.$5(nk,nl,tab.DashboardClientCommands.showImageObjectConfigDialog,null,null,null,null)}else if(tab.FeatureFlags.isEnabled('NLPDashboardObject')&&this.dragged.zoneType==='dashboard-object'&&this.dragged.objectType==='extension'&&ss.isValue(this.dragged.objectHandle)){this.$5(nk,nl,tab.DashboardClientCommands.addFirstClassExtension,null,null,this.dragged.objectHandle,this.dragged.objectState)}else if(this.dragged.zoneType==='dashboard-object'&&this.dragged.objectType==='extension'){this.$5(nk,nl,tab.ExtensionClientCommands.showChooseExtensionDialog,null,null,null,null)}else{this.$5(nk,nl,function(np){},null,null,this.dragged.objectHandle,this.dragged.objectState)}},$6:function(nk){this.$7=mI.createWebZoneUrlDialog('',ss.mkdel(this,function(nl){tab.DashboardZoneCommands.editWebZoneUrl(nk,nl);this.$7=tab.MiscUtil.dispose$1(this.$7)}),ss.mkdel(this,function(){this.$7=tab.MiscUtil.dispose$1(this.$7)}));this.$7.show()},$5:function(nk,nl,nm,nn,no,np,nq){tab.DashboardClientCommands.dropNewZoneObjectOnDashboard$1(this.dragged.zoneType,this.dragged.isHorizontal,this.get_isFloating(),nk,nn,no,this.dragged.objectType,np,nq).done(function(nr){if(nr.zoneId!==undefined&&nr.zoneId!==null){nm(nr.zoneId)}}).always(ss.mkdel(this,function(){this.$4(nl)}))},$4:function(nk){if(!this.get_isFlexible()){this.$7=tab.MiscUtil.dispose$1(this.$7)}nk()}},{$1:function(nk,nl,nm,nn){this.$7=null;this.dragged=null;dS.$ctor1.call(this,nk,nk.addAsFloating,mT.forNewZone(nm),nn);this.dragged=nk;this.set_dragDropPresModel(nl)},$0:function(nk){tab.RichTextClientCommands.launchTextObjectRichTextEditor(nk,true);tab.FormattingTelemetryClient.logRichTextEditorEvent(ss.mkdict(['RichTextEditorOpenedBy','DropNewTextZone','RichTextEditorOpenedFrom','Dashboard']))},create:function(nk,nl,nm){var nn=new na(nk,nl,nm);nn.initialize();return nn},createFlexible:function(nk,nl,nm){var nn=new na.$1(nk,nl,nm,true);nn.initialize();return nn}});var nb=global.tab.ZoneObjectRenderContext=ss.mkEnum(a,'tab.ZoneObjectRenderContext',{LegacyDashboardsOnly:'LegacyDashboardsOnly',FlexibleDashboardsOnly:'FlexibleDashboardsOnly',BothLegacyAndFlexibleDashboards:'BothLegacyAndFlexibleDashboards',ShouldNotRender:'ShouldNotRender'},true);var nc=global.tab.ZoneReadinessComponent=ss.mkType(a,'tab.ZoneReadinessComponent',function(nk){React.Component.call(this,nk)},{render:function(){var nk=(this.props.isLayoutContainer?'layoutContainerChrome':'');return spiff.DOMElements.div({className:['tabZoneReadyParent',nk].join(' '),hidden:!this.props.isVisible,key:'zone-readiness-component'},this.$3())},$3:function(){var nk={l:0,t:0,w:0,h:0};if(ss.isValue(this.props.zone)){nk=mO.chromeRectFromZone$1(this.props.zone,this.props.shouldEnlarge,false,this.props.dashboardSize)}var nl=[];nl.push(this.$1(2,nk,'tabZoneTop'));nl.push(this.$1(3,nk,'tabZoneBottom'));nl.push(this.$1(0,nk,'tabZoneLeft'));nl.push(this.$1(1,nk,'tabZoneRight'));nl.push(this.$2(nk,'tabZoneTopResizer',2));nl.push(this.$2(nk,'tabZoneBottomResizer',3));nl.push(this.$2(nk,'tabZoneRightResizer',1));nl.push(this.$2(nk,'tabZoneLeftResizer',0));return nl},$1:function(nk,nl,nm){var nn=new gA(nl,nm,nk,700);return nn.render()},$2:function(nk,nl,nm){var nn=this.props.dragEnabled;switch(nm){case 3:{nn=nn&&this.props.isBottomResizable;break}case 0:{nn=nn&&this.props.isLeftResizable;break}case 1:{nn=nn&&this.props.isRightResizable;break}case 2:{nn=nn&&this.props.isTopResizable;break}}var no=mO.getEdgeCss(nk,nm,((this.props.isReadyZoneInContainer&&this.props.isFlexibleLayoutEnabled&&(nm===0||nm===2))?7:5));no.zIndex=701;return spiff.DOMElements.div({hidden:!nn,className:nl,style:no,onMouseDown:ss.mkdel(this,this.$0),key:nl})},$0:function(nk){this.props.mouseDown(nk)}});var nd=global.tab.ZoneReadinessViewModel=ss.mkType(a,'tab.ZoneReadinessViewModel',function(nk,nl){this.$h=null;this.$j=null;this.$i=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$h=nk;this.disposables.add$1(this.$h.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$5)).addEventBinding(ss.mkdel(this,function(nm){if(nm.get_isDashboard()){nm.add_readyZoneChanged(ss.mkdel(this,this.$b));nm.add_currentDeviceLayoutChanged(ss.mkdel(this,this.$6))}}),ss.mkdel(this,function(nm){if(nm.get_isDashboard()){nm.remove_readyZoneChanged(ss.mkdel(this,this.$b));nm.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.$6))}})));this.$i=nl},{$c:function(nk){if(ss.isValue(this.$j)){this.$j.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.incrementProps))}this.$j=nk;if(ss.isValue(this.$j)){this.$j.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.incrementProps))}},$e:function(){if(ss.isNullOrUndefined(this.$h.get_model())){if(!tab.FeatureFlags.isEnabled('BEAuthoring_DeviceDesigner')){return null}}return this.$j},$f:function(nk){if(ss.referenceEquals(this.$j,nk)){return}if(!this.$8(nk)){this.$j=null;if(ss.isValue(this.$h.get_model())){this.$h.get_model().set_readyZoneID(0)}}else if(ss.isValue(nk)&&this.$h.get_model().get_activeZoneID()===nk.get_zoneId()){this.$j=null}else if(!tab.DashboardModel.get_designModeEnabled()){this.$c(nk)}else if(ss.isValue(nk)){var nl=this.$h.get_model().selectableZoneInDesignMode(nk.get_zoneId());if(ss.isValue(nl)){this.$c(nl)}}this.incrementProps()},$g:function(){return ss.isValue(this.$e())&&!this.$e().get_isFloating()},$d:function(){return!tsConfig.is_mobile},$8:function(nk){if(ss.isNullOrUndefined(nk)){return false}if(nk.get_isSelectionDisabled()){return false}return!tsConfig.is_mobile||nk.get_zoneType()==='viz'},$b:function(){if(this.$h.get_model().get_readyZoneID()!==0){this.$f(this.$h.get_model().getZone(this.$h.get_model().get_readyZoneID()))}else{this.$f(null)}},$6:function(){this.incrementProps()},$5:function(){var nk=this.$h.get_model();if(ss.isValue(nk)&&nk.get_isDashboard()){this.$f(nk.getZone(nk.get_readyZoneID()))}else{this.$f(null)}},$7:function(nk){return ss.isValue(this.$e())&&!(this.$e().get_isFloating()||this.$e().get_isZoneInGroup())&&this.$i(this.$e(),nk)},createUpdatedProps:function(){var nk=ss.isValue(this.$e())&&(this.$e().get_zoneType()==='layout-flow'||this.$e().get_zoneType()==='layout-basic');return{isVisible:ss.isValue(this.$e()),shouldEnlarge:this.$g(),zone:this.$e(),isLayoutContainer:nk,isReadyZoneInContainer:ss.isValue(this.$e()),isFlexibleLayoutEnabled:ss.isValue(this.$h.get_model())&&this.$h.get_model().get_isFlexibleLayoutEnabled(),dragEnabled:this.$d(),mouseDown:ss.mkdel(this,this.mouseDown),isTopResizable:this.$7(2),isBottomResizable:this.$7(3),isLeftResizable:this.$7(0),isRightResizable:this.$7(1),dashboardSize:this.$h.get_model().get_dashboardSize()}},mouseDown:function(nk){var nl=tab.WorkbookView.findDashboardContainer();var nm=this.$4(nk);var nn=new dz(this.$h.get_model(),bg.dashboardGeometry);var no=nn.startDrag(nm,nl,function(){});EventUtils.DragDropManager.startDrag(no,nk,$(nk.target));EventUtils.GlobalUIEvents.add_LastTouch(ss.mkdel(this,this.$a));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$9))},$a:function(nk,nl){this.$3()},$3:function(){window.setTimeout(ss.mkdel(this,function(){if(EventUtils.DragDropManager.get_isDragging()){EventUtils.DragDropManager.cancelDrag(null);this.$9(null)}}),0)},$9:function(nk){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$9));EventUtils.GlobalUIEvents.remove_LastTouch(ss.mkdel(this,this.$a))},$4:function(nk){var nl=tab.WorkbookView.findDashboardContainer();var nm=nl.offset();var nn=nl.scrollLeft();var no=tab.DoubleUtil.roundToInt(nl.scrollTop());var np=tabBootstrap.VizLayoutConstants.get_authoringGutter().left;var nq=tabBootstrap.VizLayoutConstants.get_authoringGutter().top;var nr=tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();var ns=nk.pageX-ss.trunc(nm.left)-(np+nr)+nn;var nt=nk.pageY-ss.trunc(nm.top)-(nr+nq)+no;return{x:ns,y:nt}},dispose:function(){if(ss.isValue(this.$j)){this.$j.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.incrementProps))}this.$f(null);spiff.BaseViewModel.prototype.dispose.call(this)}});var ne=global.tab.ZoneResizeViewModel=ss.mkType(a,'tab.ZoneResizeViewModel',function(nk){this.$m=0;this.$l=null;ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]).call(this);this.$l=nk;this.$m=((ss.isValue(this.$l.get_model())&&this.$l.get_model().get_isFlexibleLayoutEnabled())?5:3)},{$k:function(){return this.$l.get_model()},isEdgeOrParentsResizable:function(nk,nl){var nm=this.$k().getZone(nk.get_parentZoneId());while(ss.isValue(nm)){var nn=this.$3(nk,nl,nm);if(this.$a(nk,nl,nm,nn)){return true}if(this.$e(nk,nl,nm)){nm=this.$k().getZone(nm.get_parentZoneId())}else{break}}return false},$9:function(nk,nl,nm){return this.$a(nk,nl,nm,this.$3(nk,nl,nm))},$a:function(nk,nl,nm,nn){if(nm.get_zoneType()==='layout-flow'){return this.$8(nk,nl,nm,nn)}return!nn},$8:function(nk,nl,nm,nn){if(nm.get_zoneCommonModel().get_zoneLayoutType()==='distribute-evenly'){return false}switch(nl){case 3:{return!nm.get_isHorizontal()&&(nm.get_hasSpace()||!nn)&&this.$2(nk,nm,0)}case 0:{return nm.get_isHorizontal()&&!nn&&this.$2(nm,nk,1)}case 1:{return nm.get_isHorizontal()&&(nm.get_hasSpace()||!nn)&&this.$2(nk,nm,1)}case 2:{return!nm.get_isHorizontal()&&!nn&&this.$2(nm,nk,0)}default:{return!nn}}},getDraggableFeedbackOnLegacyDashboard:function(nk,nl){var nm=this.$k().zonesModel.getChildren(0).sort(function(np,nq){return((np.get_relativeZoneZIndex()>nq.get_relativeZoneZIndex())?-1:1)});for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(this.$b(no,nk,nl)){return this.$1(no,nk,nl)}}return 2},$1:function(nk,nl,nm){var nn=this.$k().zonesModel.getChildren(nk.get_zoneId());while(nn.length>0){var no=nn.pop();if(this.$h(no,nl,nm)){continue}if(this.$d(no,nl,nm)){if(this.$9(no,0,nk)){return 1}}else if(this.$f(no,nl,nm)){if(this.$9(no,1,nk)){return 1}}else if(this.$g(no,nl,nm)){if(this.$9(no,2,nk)){return 0}}else if(this.$c(no,nl,nm)){if(this.$9(no,3,nk)){return 0}}nk=no;nn=this.$k().zonesModel.getChildren(nk.get_zoneId())}return 2},$2:function(nk,nl,nm){switch(nm){case 0:{return nl.get_y()-nk.get_y()+nl.get_height()>2*32}case 1:{return nl.get_x()-nk.get_x()+nl.get_width()>2*32}default:{return false}}},$e:function(nk,nl,nm){var nn=false;switch(nl){case 3:{nn=this.$c(nm,nk.get_x(),nk.get_y()+nk.get_height());break}case 0:{nn=this.$d(nm,nk.get_x(),nk.get_y());break}case 1:{nn=this.$f(nm,nk.get_x()+nk.get_width(),nk.get_y());break}case 2:{nn=this.$g(nm,nk.get_x(),nk.get_y());break}}return nn},$3:function(nk,nl,nm){var nn=false;switch(nl){case 3:{nn=this.$4(nk,nm);break}case 0:{nn=this.$5(nk,nm);break}case 1:{nn=this.$6(nk,nm);break}case 2:{nn=this.$7(nk,nm);break}}return nn},isNotOnAnyZone:function(nk,nl){var nm=this.$l.get_model().get_zoneModels();for(var nn=0;nn<nm.length;nn++){var no=nm[nn];if(!this.$h(no,nk,nl)){return false}}return true},$7:function(nk,nl){var nm=nk.get_y();var nn=nl.get_contentY()+nl.contentBorderWidth();return nm===nn},$g:function(nk,nl,nm){return this.$i(nk.get_y(),nk.get_x(),nk.get_width(),nl,nm)},$4:function(nk,nl){var nm=nk.get_y()+nk.get_height();var nn=nl.get_contentY()+nl.get_contentHeight()+nl.contentBorderWidth();return nm===nn},$c:function(nk,nl,nm){return this.$i(nk.get_y()+nk.get_height(),nk.get_x(),nk.get_width(),nl,nm)},$5:function(nk,nl){var nm=nk.get_x();var nn=nl.get_contentX()+nl.contentBorderWidth();return nm===nn},$d:function(nk,nl,nm){return this.$j(nk.get_x(),nk.get_y(),nk.get_height(),nl,nm)},$6:function(nk,nl){var nm=nk.get_x()+nk.get_width();var nn=nl.get_contentX()+nl.get_contentWidth()+nl.contentBorderWidth();return nm===nn},$f:function(nk,nl,nm){return this.$j(nk.get_x()+nk.get_width(),nk.get_y(),nk.get_height(),nl,nm)},$i:function(nk,nl,nm,nn,no){return nl<=nn&&nn<=nl+nm&&Math.abs(no-nk)<=this.$m},$j:function(nk,nl,nm,nn,no){return nl<=no&&no<=nl+nm&&Math.abs(nn-nk)<=this.$m},$h:function(nk,nl,nm){return nk.get_x()-this.$m>=nl||nk.get_y()-this.$m>=nm||nl>=nk.get_x()+nk.get_width()+this.$m||nm>=nk.get_y()+nk.get_height()+this.$m},$b:function(nk,nl,nm){return nk.get_x()<=nl&&nk.get_y()<=nm&&nl<=nk.get_x()+nk.get_width()&&nm<=nk.get_y()+nk.get_height()}});var nf=global.tab.ZoneSelectionComponent=ss.mkType(a,'tab.ZoneSelectionComponent',function(nk,nl){this.$b=null;this.$c=null;ss.makeGenericType(cg,[Object]).call(this,nk,nl);this.$c=new Map;this.$c.set(3,ss.mkdel(this,function(nm){this.$6(nm,[3])}));this.$c.set(0,ss.mkdel(this,function(nm){this.$6(nm,[0])}));this.$c.set(1,ss.mkdel(this,function(nm){this.$6(nm,[1])}));this.$c.set(2,ss.mkdel(this,function(nm){this.$6(nm,[2])}));this.$b=new Map;this.$b.set(nf.$1,ss.mkdel(this,function(nm){this.$6(nm,nf.$1)}));this.$b.set(nf.$2,ss.mkdel(this,function(nm){this.$6(nm,nf.$2)}));this.$b.set(nf.$3,ss.mkdel(this,function(nm){this.$6(nm,nf.$3)}));this.$b.set(nf.$4,ss.mkdel(this,function(nm){this.$6(nm,nf.$4)}))},{$8:function(){return ss.mkdel(this,function(nk){if(ss.isValue(nk)&&tab.FeatureFlags.isEnabled('BEAuthoring_RightClickZoneChrome')){nk.oncontextmenu=ss.mkdel(this,this.$7)}})},render:function(){var nk={l:0,t:0,w:0,h:0};var nl=(this.props.isLayoutContainer?'layoutContainerChrome':'');var nm={className:['tabZoneSelParent',nl].join(' '),hidden:!this.props.isVisible,ref:this.$8()};if(ss.isValue(this.props.zone)){nk=mO.chromeRectFromZone(this.props.zone,this.props.shouldEnlarge,true)}if(this.props.areMultipleZonesSelected){return spiff.DOMElements.div(nm,this.renderEdge(2,nk),this.renderEdge(3,nk),this.renderEdge(0,nk),this.renderEdge(1,nk))}else{return spiff.DOMElements.div(nm,this.renderEdge(2,nk),this.renderEdge(3,nk),this.renderEdge(0,nk),this.renderEdge(1,nk),this.renderButtons(nk),this.$a(nk,'tabZoneTopResizer',2),this.$a(nk,'tabZoneBottomResizer',3),this.$a(nk,'tabZoneRightResizer',1),this.$a(nk,'tabZoneLeftResizer',0),this.$9(nk,'tabZoneNWResizer',nf.$2),this.$9(nk,'tabZoneSWResizer',nf.$4),this.$9(nk,'tabZoneNEResizer',nf.$1),this.$9(nk,'tabZoneSEResizer',nf.$3),this.renderPendingResizePreview())}},$a:function(nk,nl,nm){var nn=this.props.dragEnabled;switch(nm){case 3:{nn=nn&&this.props.isBottomResizable;break}case 0:{nn=nn&&this.props.isLeftResizable;break}case 1:{nn=nn&&this.props.isRightResizable;break}case 2:{nn=nn&&this.props.isTopResizable;break}}return spiff.DOMElements.div({hidden:!nn,className:nl,key:nm.toString()+(ss.isValue(this.props.zone)?this.props.zone.get_zoneId().toString():''),style:(this.props.isFlexibleDashboard?mO.getFlexibleDashboardEdgeResizerCss(nk,nm,12):mO.getEdgeCss(nk,nm,4)),ref:this.$c.get(nm)})},$9:function(nk,nl,nm){var nn=this.props.dragEnabled&&this.props.areCornersResizable;return spiff.DOMElements.div({hidden:!nn,className:nl,key:nm.toString()+(ss.isValue(this.props.zone)?this.props.zone.get_zoneId().toString():''),style:(this.props.isFlexibleDashboard?mO.getFlexibleDashboardResizerCornerCss(nk,nm[0],nm[1],12):mO.getCornerCss(nk,nm[0],nm[1],4)),ref:this.$b.get(nm)})},$6:function(nk,nl){if(ss.isValue(nk)){var nm=$(nk);if(!EventUtils.DragDropManager.isDragSource(nm)){var nn=this.props.resizeDragSourceFactory(nl);EventUtils.DragDropManager.attachDragSource(nm,nn)}}},$7:function(nk){spiff.EventUtil.stopEvent(nk);this.props.onContextMenu(nk)},$5:function(nk){if(ss.isValue(nk)&&!this.props.areMultipleZonesSelected){EventUtils.DragDropManager.attachDragSource($(nk),this.props.moveDragSource)}}});var ng=global.tab.ZoneSelectionViewModel=ss.mkType(a,'tab.ZoneSelectionViewModel',function(nk,nl,nm,nn){this.$e=null;this.$f=null;this.$g=null;ss.makeGenericType(ch,[Object]).call(this,nk);this.$f=nl;var no=new tab.ToolbarButtonViewModel(null,'tabAuthZoneChrome-tabGoToSheet',ss.mkdel(this,this.$6));no.set_tooltipText(tab.Strings.GoToSheet);var np=no;this.$e=ss.arrayClone([np]);if(nn){this.set_selectedZone(nm)}if(!nn){var nq=ss.mkdel(this,function(){this.activeZoneChanged()});var nr=ss.mkdel(this,function(){this.incrementProps()});this.disposables.add$1(this.dashboardModelHolder.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.handleDashboardModelChanged)).addEventBinding(function(ns){if(ns.get_isDashboard()){ns.add_newDashboard(nq);ns.add_autoGeneratedDeviceLayoutsChanged(nr)}},function(ns){if(ns.get_isDashboard()){ns.remove_newDashboard(nq);ns.remove_autoGeneratedDeviceLayoutsChanged(nr)}}))}},{$a:function(){return ss.isValue(this.dashboardModelHolder.get_model())&&this.dashboardModelHolder.get_model().get_isCurrentLayoutAutoGenerated()},get_selectedZone:function(){return this.$g},set_selectedZone:function(nk){if(ss.referenceEquals(this.$g,nk)){return}if(ss.isValue(this.$g)){this.$g.get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$8));this.$g.get_chromeCommands().remove_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.$g=(this.$9(nk)?nk:null);if(ss.isValue(this.$g)){this.$g.get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$8));this.$g.get_chromeCommands().add_commandsChanged(ss.mkdel(this,this.handleUpdateZoneChrome))}this.updateChromeItems();this.get_resizePreviewViewModel().resetLocalSize(this.$g);this.forceHidden=false;this.incrementProps()},$b:function(){return ss.isValue(this.$g)&&this.$g.get_zoneType()==='viz'&&!this.get_showZoneChromeButtons()},$c:function(){return ss.isValue(this.get_selectedZone())&&!this.get_selectedZone().get_isFloating()},$d:function(){if(ss.isValue(this.get_selectedZone())&&ss.isValue(this.dashboardModelHolder.get_model())){var nk=ss.contains(ng.$1,this.get_selectedZone().get_zoneType());var nl=this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard();return!(nk&&nl)}return true},$7:function(nk){var nl=new spiff.ShowMenuOptions($(nk.currentTarget),false);nl.cursorPosition={left:nk.clientX,top:nk.clientY};var nm=nl;var nn=function(no){tab.WidgetUtil.showMenu(no.zoneContextMenu,nm)};tab.DashboardClientCommands.getZoneChromeContextMenu(this.get_selectedZone().get_dashboardModel().get_sheetName(),this.get_selectedZone().get_zoneId(),nn)},get_dragEnabled:function(){return!tsConfig.is_mobile&&!this.get_areMultipleZonesSelected()},isResizable:function(nk){if(ss.isValue(this.get_selectedZone())){return this.get_selectedZone().get_isFloating()||this.$f(this.get_selectedZone(),nk)}return false},createInitialProps:function(){if(tab.ModelUtils.isMultiSelectFeatureEnabled(this.dashboardModelHolder.get_model())){return{selectParent:ss.mkdel(this,this.selectZoneParent),zIndex:700}}else{return{selectParent:ss.mkdel(this,this.selectZoneParent)}}},createUpdatedProps:function(){var nk=ss.isValue(this.get_selectedZone())&&(this.get_selectedZone().get_zoneType()==='layout-flow'||this.get_selectedZone().get_zoneType()==='layout-basic'||this.$g.get_zoneType()==='layout-carousel');return{zone:this.get_selectedZone(),buttons:(this.$b()?this.$e:this.get_chromeItems()),moveDragSource:this,resizeDragSourceFactory:ss.mkdel(this,this.createChromeDragSource),isVisible:!this.forceHidden&&ss.isValue(this.get_selectedZone())&&this.get_selectedZone().get_isVisible()&&!this.$a(),shouldEnlarge:this.$c(),dragEnabled:this.get_dragEnabled(),isTopResizable:this.isResizable(2),isBottomResizable:this.isResizable(3),isLeftResizable:this.isResizable(0),isRightResizable:this.isResizable(1),shouldHaveHandle:this.$d(),isDesignMode:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_currentlyOnDesignDashboard():false),isFlexibleDashboard:(ss.isValue(this.dashboardModelHolder.get_model())?this.dashboardModelHolder.get_model().get_isFlexibleLayoutEnabled():false),zoneType:(ss.isValue(this.get_selectedZone())?this.get_selectedZone().get_zoneType():'invalid'),objectType:(ss.isValue(this.get_selectedZone())?this.get_selectedZone().get_objectType():'invalid'),isHorizontal:ss.isValue(this.get_selectedZone())&&this.get_selectedZone().get_isHorizontal(),areCornersResizable:ss.isValue(this.get_selectedZone())&&(this.get_selectedZone().get_isFloating()||this.get_selectedZone().get_isZoneInGroup()),addWasActiveClass:this.get_isZoneChromeActive(),dashWidth:this.get_dashboardWidth(),dashboardContentWidth:this.get_dashboardContentWidth(),isLayoutContainer:nk,resizePreviewProps:this.get_resizePreviewViewModel().get_props(),areMultipleZonesSelected:this.get_areMultipleZonesSelected(),onContextMenu:ss.mkdel(this,this.$7)}},dispose:function(){spiff.BaseViewModel.prototype.dispose.call(this);this.set_selectedZone(null)},selectZoneParent:function(){tab.DashboardZoneCommands.selectZoneParent(this.$g.get_zoneId())},$9:function(nk){if(ss.isNullOrUndefined(nk)){return false}if(nk.get_isSelectionDisabled()){return false}return!tsConfig.is_mobile||nk.get_zoneType()==='viz'},handleDashboardModelChanged:function(){var nk=this.dashboardModelHolder.get_model();if(ss.isValue(nk)&&nk.get_isDashboard()){this.set_selectedZone(nk.getZone(nk.get_activeZoneID()))}else{this.set_selectedZone(null)}},$8:function(){this.get_resizePreviewViewModel().resetLocalSize(this.$g);this.incrementProps()},activeZoneChanged:function(){if(ss.isNullOrUndefined(this.dashboardModelHolder.get_model())){return}this.set_selectedZone(this.dashboardModelHolder.get_model().getZone(this.dashboardModelHolder.get_model().get_activeZoneID()))},$6:function(){if(ss.isNullOrUndefined(this.get_selectedZone())||ss.isNullOrEmptyString(this.get_selectedZone().get_associatedSheet())){return}tab.SheetClientCommands.goToSheet(this.get_selectedZone().get_associatedSheet())},updateChromeItems:function(){this.disposeChromeItems();if(ss.isNullOrUndefined(this.get_selectedZone())||!this.get_showZoneChromeButtons()){return}var nk=this.get_selectedZone().get_chromeCommands();this.addChromeItems(nk)},startDrag:function(nk){if(ss.isValue(this.get_selectedZone())){var nl=this.getGrabPoint(nk);var nm=tab.DashboardClientCommands.getSheetDragDropTargets(this.get_selectedZone().get_zoneId(),nl);var nn=$.Deferred();nm.done(function(no){nn.resolve(no.zoneDragDrop)}).fail(function(){nn.reject()});if(this.get_selectedZone().get_isFloating()){return fW.create(this.get_selectedZone(),nl,nn)}return mU.createWithAvatar(this.get_selectedZone(),nl,nn)}return null},acceptsDragType:function(){return 1},createChromeDragSource:function(nk){return new mP(this.dashboardModelHolder,this,nk)}});var nh=global.tab.ZoneSide=ss.mkEnum(a,'tab.ZoneSide',{left:0,right:1,top:2,bottom:3});var ni=global.tab.ZoneTitleCheckboxViewModel=ss.mkType(a,'tab.ZoneTitleCheckboxViewModel',function(nk){this.$7=null;nj.call(this,nk);this.$7=nk;this.disposables.add$1(this.$7.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(nl){nl.add_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(nl){nl.remove_autoGeneratedDeviceLayoutsChanged(ss.mkdel(this,this.incrementProps))})))},{get_label:function(){return tab.Strings.LayoutPaneZoneTitleCheckbox},get_testId:function(){return'layout-zone-title-checkbox'},get_disabled:function(){return!this.get_activeZone().get_canHaveTitle()||this.$6()},get_checked:function(){return this.get_activeZone().get_hasTitle()},toggleFunction:function(nk){if(ss.isValue(this.get_activeZone())&&this.get_activeZone().get_hasTitle()!==nk){tab.DashboardZoneCommands.toggleZoneTitle(this.get_activeZone().get_zoneId())}},bindEventHandlerToZone:function(nk){nk.get_zoneCommonModel().add_changeZoneTitleVisibility(ss.mkdel(this,this.incrementProps))},unbindEventHandlerToZone:function(nk){nk.get_zoneCommonModel().remove_changeZoneTitleVisibility(ss.mkdel(this,this.incrementProps))},$6:function(){return ss.isValue(this.$7)&&ss.isValue(this.$7.get_model())&&this.$7.get_model().get_isCurrentLayoutAutoGenerated()}});var nj=global.tab.ZoneToggleCheckboxBaseViewModel=ss.mkType(a,'tab.ZoneToggleCheckboxBaseViewModel',function(nk){this.$4=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=nk;this.$5=new(ss.makeGenericType(tab.ModelHolder$1,[tab.ZoneModel]));this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.$3)).addEventBinding(ss.mkdel(this,function(nl){nl.add_activeZoneChanged(ss.mkdel(this,this.$3))}),ss.mkdel(this,function(nl){nl.remove_activeZoneChanged(ss.mkdel(this,this.$3))})));this.disposables.add$1(this.$5.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,this.bindEventHandlerToZone),ss.mkdel(this,this.unbindEventHandlerToZone)))},{get_activeZone:function(){return this.$5.get_model()},set_activeZone:function(nk){this.$5.set_Model(nk)},get_isFlexibleLayoutEnabled:function(){return(ss.isValue(this.$4.get_model())?this.$4.get_model().get_isFlexibleLayoutEnabled():false)},get_disabled:null,get_checked:null,get_label:null,get_testId:null,toggleFunction:null,bindEventHandlerToZone:null,unbindEventHandlerToZone:null,$3:function(){var nk=this.$4.get_model();if(ss.isValue(nk)&&nk.get_isDashboard()&&nk.get_hasActiveZone()){this.set_activeZone(nk.getZone(nk.get_activeZoneID()))}else{this.set_activeZone(null)}},createInitialProps:function(){return{label:this.get_label(),checked:false,handleChange:ss.mkdel(this,this.toggleFunction),testId:this.get_testId()}},createUpdatedProps:function(){var nk=true;var nl=false;if(ss.isValue(this.get_activeZone())){nk=this.get_disabled();nl=this.get_checked()}return{label:this.get_props().label,checked:nl,handleChange:this.get_props().handleChange,testId:this.get_props().testId,disabled:nk}}});ss.initClass(b);ss.initClass(c);ss.initClass(f);ss.initInterface(gI,{get_viewType:null,get_viewModel:null,get_active:null,set_active:null});ss.initClass(g,null,[gI]);ss.initClass(h);ss.initClass(i,spiff.Template,[ss.IDisposable]);ss.initClass(j,spiff.Template,[ss.IDisposable]);ss.initClass(k,spiff.Template,[ss.IDisposable,spiff.ITabControlTemplate]);ss.initClass(l);ss.initClass(m,spiff.Template,[ss.IDisposable]);ss.initClass(n,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(o);ss.initClass(p);ss.initClass(q);ss.initClass(r,spiff.Template,[ss.IDisposable]);ss.initClass(s,r,[ss.IDisposable]);ss.initClass(t,r,[ss.IDisposable]);ss.initClass(u,tab.TooltipTemplate,[ss.IDisposable]);ss.initClass(v,spiff.Template,[ss.IDisposable]);ss.initClass(w,ss.makeGenericType(spiff.BaseView$1,[x]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[x]),ss.IDisposable,tab.IAppendableView]);ss.initClass(x,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(y);ss.initClass(z,spiff.Template,[ss.IDisposable]);ss.initClass(A,spiff.Template,[ss.IDisposable]);ss.initClass(B,ss.makeGenericType(spiff.BaseView$1,[C]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[C]),ss.IDisposable,tab.IAppendableView]);ss.initClass(C,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(D,null,[ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(E);ss.initClass(F);ss.initClass(G,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(H,spiff.PureRenderComponent);ss.initClass(I);ss.initClass(J,ss.makeGenericType(spiff.BaseView$1,[T]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[T]),ss.IDisposable,tab.IAppendableView]);ss.initClass(K,spiff.Template,[ss.IDisposable]);ss.initClass(L);ss.initClass(M,spiff.Template,[ss.IDisposable]);ss.initClass(N,spiff.Template,[ss.IDisposable]);ss.initClass(O,ss.makeGenericType(spiff.BaseView$1,[P]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[P]),ss.IDisposable,tab.IAppendableView]);ss.initClass(P,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(Q,spiff.Template,[ss.IDisposable]);ss.initClass(R,spiff.Template,[ss.IDisposable]);ss.initClass(S,ss.makeGenericType(spiff.BaseView$1,[T]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[T]),ss.IDisposable,tab.IAppendableView]);ss.initClass(T,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(U,spiff.Template,[ss.IDisposable]);ss.initClass(V,ss.makeGenericType(spiff.BaseView$1,[W]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[W]),ss.IDisposable,tab.IAppendableView]);ss.initClass(W,spiff.BaseViewModel,[tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(X);ss.initClass(Y,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lm,EventUtils.DragInstance);ss.initClass(cf,lm);ss.initClass(Z,cf,[ss.IDisposable]);ss.initClass(ba,spiff.PureRenderComponent);ss.initClass(bb);ss.initClass(bc);ss.initClass(bd,spiff.PureRenderComponent);ss.initClass(be);ss.initClass(bf);ss.initClass(bg,ss.makeGenericType(spiff.BaseView$1,[bh]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bh]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bh,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bi);ss.initClass(bj);ss.initClass(bk,spiff.Template,[ss.IDisposable]);ss.initClass(bl,ss.makeGenericType(spiff.BaseView$1,[bm]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bm]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bm,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bo,React.PureComponent);ss.initClass(bp);ss.initClass(bq,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(br,spiff.PureRenderComponent);ss.initClass(bs,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bt);ss.initClass(bu);ss.initClass(bv,spiff.PureRenderComponent);ss.initClass(bw,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(bx,ss.makeGenericType(spiff.BaseView$1,[bH]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bH]),ss.IDisposable,tab.IAppendableView]);ss.initClass(by,spiff.Template,[ss.IDisposable]);ss.initClass(bz);ss.initClass(bA);ss.initClass(bB,spiff.PureRenderComponent);ss.initClass(bC,ss.makeGenericType(spiff.BaseView$1,[bD]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bD]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bD,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bE,spiff.Template,[ss.IDisposable]);ss.initClass(bF,ss.makeGenericType(spiff.BaseView$1,[bH]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bH]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bG,EventUtils.DragInstance);ss.initClass(bH,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bI);ss.initClass(bJ,spiff.Template,[ss.IDisposable]);ss.initClass(bK,ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarButtonViewModel,bL]));ss.initClass(bL,tab.ToolbarButtonView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bM,ss.makeGenericType(tab.BaseToolbarButtonComponent$2,[tab.ToolbarDropdownButtonViewModel,bN]));ss.initClass(bN,bL,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bO,bL,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bP);ss.initClass(bQ,tab.ToolbarButtonTemplate,[ss.IDisposable]);ss.initClass(bR,bL,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bS,bL,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ToolbarButtonViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bT,tab.ToolbarButtonViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bU,ss.makeGenericType(spiff.BaseView$1,[bV]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[bV]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bV,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(bW,spiff.Template,[ss.IDisposable]);ss.initClass(bX);ss.initClass(bY,null,[ss.makeGenericType(tab.IView$1,[bZ]),ss.IDisposable,tab.IAppendableView]);ss.initClass(bZ,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(ca,null,[ss.makeGenericType(tab.IView$1,[cb]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cb,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cc,spiff.PureRenderComponent);ss.initClass(cd,null,[ss.IDisposable]);ss.initClass(ce,spiff.PureRenderComponent);ss.initClass(ci,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cj,cf);ss.initClass(ck,null,[ss.IDisposable]);ss.initClass(cl,ss.makeGenericType(spiff.BaseView$1,[cm]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cm]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cm,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(cq,spiff.Template,[ss.IDisposable]);ss.initClass(cn,cq,[ss.IDisposable]);ss.initClass(cr,ss.makeGenericType(spiff.BaseView$1,[cs]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cs]),ss.IDisposable,tab.IAppendableView]);ss.initClass(co,cr,[tab.IWidget,ss.makeGenericType(tab.IView$1,[cs]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cp);ss.initClass(cs,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,EventUtils.IDragResponder]);ss.initClass(ct,spiff.Template,[ss.IDisposable]);ss.initClass(cu,spiff.Template,[ss.IDisposable]);ss.initClass(cv,ss.makeGenericType(spiff.BaseView$1,[cw]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cw]),ss.IDisposable,tab.IAppendableView,spiff.IListItemContentCreator]);ss.initClass(cw,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cx,spiff.Template,[ss.IDisposable]);ss.initInterface(gS,{get_scrollableContentPreferredHeight:null,setScrollableContentActualHeight:null});ss.initClass(cz);ss.initClass(cB,ss.makeGenericType(spiff.BaseView$1,[cC]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cC]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cC,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cD,spiff.Template,[ss.IDisposable]);ss.initClass(cE);ss.initClass(cF,React.Component);ss.initClass(cG,React.Component);ss.initClass(cH,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cI,spiff.Template,[ss.IDisposable]);ss.initClass(cJ,ss.makeGenericType(spiff.BaseView$1,[cK]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cK]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dd,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cK,dd,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(cL,tab.CloseAuthoringCmd);ss.initClass(cM,React.Component);ss.initClass(cN,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cO,React.Component);ss.initClass(cQ,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(cR,spiff.Template,[ss.IDisposable]);ss.initClass(cS,ss.makeGenericType(spiff.BaseView$1,[cT]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cT]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cT,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(cU,spiff.Template,[ss.IDisposable]);ss.initClass(cV,ss.makeGenericType(spiff.BaseView$1,[cW]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[cW]),ss.IDisposable,tab.IAppendableView]);ss.initClass(cW,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dc);ss.initClass(cX,dc);ss.initClass(cY,dc);ss.initClass(cZ,ss.makeGenericType(spiff.BaseView$1,[da]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[da]),ss.IDisposable,tab.IAppendableView]);ss.initClass(da,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(db,spiff.Template,[ss.IDisposable]);ss.initClass(de);ss.initClass(df);ss.initClass(dg,spiff.Template,[ss.IDisposable]);ss.initClass(dh,spiff.Template,[ss.IDisposable]);ss.initClass(di,ss.makeGenericType(spiff.BaseView$1,[dj]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dj]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dj,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dk);ss.initClass(dl);ss.initClass(dm,spiff.Template,[ss.IDisposable]);ss.initClass(dn,ss.makeGenericType(spiff.BaseView$1,[gL]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gL]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(gL,{get_colorProvider:null,get_selectedColor:null,set_selectedColor:null,get_isTransparencyVisible:null,get_colorTransparencyControlViewModel:null},[tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(dp,spiff.BaseViewModel,[gL,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(dq,spiff.Template,[ss.IDisposable]);ss.initClass(dr,ss.makeGenericType(spiff.BaseView$1,[gM]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gM]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(gM,{get_tabIndex:null,set_tabIndex:null},[tab.IContinuousRangeModel,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(ds,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),gM,tab.IContinuousRangeModel,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(dt);ss.initClass(du,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dv);ss.initClass(dw,React.Component);ss.initClass(dx);ss.initClass(dy,spiff.MoveDragInstance);ss.initClass(dz,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dA,null,[ss.IDisposable]);ss.initClass(dB,React.Component);ss.initClass(dC);ss.initClass(dD);ss.initClass(ft,null,[ss.IDisposable]);ss.initClass(dE,ft,[ss.IDisposable]);ss.initClass(dF,tab.CopyZoneToWebClipboardCmd);ss.initClass(mi,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(dG,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(dH,ss.makeGenericType(spiff.BaseView$1,[dI]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[dI]),ss.IDisposable,tab.IAppendableView]);ss.initClass(dI,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(dJ,spiff.Template,[ss.IDisposable]);ss.initClass(dK,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(dL);ss.initClass(dM);ss.initClass(dN,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dO,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dP,React.Component);ss.initClass(dQ);dQ.$ctor1.prototype=dQ.prototype;ss.initClass(dR,React.Component);ss.initClass(dS,EventUtils.DragInstance,[ss.IDisposable]);dS.$ctor1.prototype=dS.prototype;ss.initClass(dT,React.Component);ss.initClass(dU,spiff.PureRenderComponent);ss.initClass(dV,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(dW);ss.initClass(dX);ss.initClass(dY);ss.initClass(dZ,ss.makeGenericType(spiff.BaseReactViewModel$1,[dX]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[dX])]);ss.initClass(ea);ss.initClass(eb,spiff.PureRenderComponent);ss.initClass(ec,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ec.$ctor1.prototype=ec.prototype;ss.initClass(ed);ss.initClass(ee);ee.$ctor1.prototype=ee.prototype;ss.initClass(ef,spiff.PureRenderComponent);ss.initClass(eg,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(eh,React.PureComponent);ss.initClass(ei,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ej,ss.makeGenericType(spiff.BaseView$1,[ek]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ek]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ek,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initInterface(gX,{getSelectedSheet:null,determineSelectedSheet:null,onUpdatedSheetList:null,onNewFlipboardNav:null,onActiveZoneChanged:null,onDoubleClicked:null,getDragInstance:null});ss.initClass(el,null,[gX]);ss.initClass(em,ss.makeGenericType(spiff.ListComponent$2,[Object,Object]));ss.initClass(en,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(eo,spiff.PureRenderComponent);ss.initClass(ep,React.Component);ss.initClass(eq);ss.initClass(er,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(et,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eu,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ev,spiff.PureRenderComponent);ss.initClass(ew,spiff.PureRenderComponent);ss.initClass(ex,spiff.PureRenderComponent);ss.initClass(ey);ss.initClass(ez,spiff.PureRenderComponent);ss.initInterface(gO,{createZoneObjectsViewModels:null});ss.initClass(eA,null,[gO]);ss.initClass(eB);ss.initClass(eC,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eE,null,[tab.IWaitForCommandsWithCancel,tab.IWaitForCommands]);ss.initClass(eF,ss.makeGenericType(spiff.BaseView$1,[kZ]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[kZ]),ss.IDisposable,tab.IAppendableView]);ss.initClass(eG);ss.initClass(eH,spiff.Template,[ss.IDisposable]);ss.initClass(eI);ss.initClass(iE);ss.initClass(eJ,iE);ss.initClass(eK);ss.initClass(eL);ss.initClass(eM,React.Component);ss.initClass(eN,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eO,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(eP);ss.initClass(eQ,tab.DestroyVQLSessionCmd);ss.initClass(eR,React.PureComponent);ss.initClass(eS,spiff.PureRenderComponent);ss.initClass(eT);ss.initClass(eU,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eV,ss.makeGenericType(tab.PureComponentWithAsyncDependencies$3,[Object,Object,Object]));ss.initClass(eW,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(eX,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(eY);ss.initClass(eZ,React.Component);ss.initClass(fa);ss.initClass(fb,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fb.$ctor1.prototype=fb.prototype;ss.initClass(fc,React.Component);ss.initClass(fd);ss.initClass(fe,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fe.$ctor1.prototype=fe.prototype;ss.initClass(ff,React.Component);ss.initClass(fg);ss.initClass(fh,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fh.$ctor1.prototype=fh.prototype;ss.initClass(fi,React.Component);ss.initClass(fj);ss.initClass(fk,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);fk.$ctor1.prototype=fk.prototype;ss.initClass(fl,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(fm,tab.DownloadWorkbookCmd);ss.initClass(fn,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(fo);ss.initClass(fp);ss.initClass(fq);ss.initClass(fr);ss.initClass(fu,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(fv);ss.initClass(fw);ss.initClass(fx,spiff.PureRenderComponent);ss.initClass(fy);ss.initClass(fz,ss.makeGenericType(spiff.BaseReactViewModel$1,[fy]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[fy])]);fz.$ctor1.prototype=fz.prototype;ss.initClass(fA,tab.EditWorkbookInDesktopCmd);ss.initClass(fB,dp,[gL,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(fC,ss.makeGenericType(spiff.BaseView$1,[fD]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[fD]),ss.IDisposable,tab.IAppendableView]);ss.initClass(fD,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(fE,spiff.Template,[ss.IDisposable]);ss.initClass(fF,ss.makeGenericType(spiff.BaseView$1,[fG]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[fG]),ss.IDisposable,tab.IAppendableView]);ss.initClass(fG,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(fH,spiff.Template,[ss.IDisposable]);ss.initClass(fI,spiff.Template,[ss.IDisposable]);ss.initClass(fJ,dS,[ss.IDisposable]);ss.initClass(fK);ss.initClass(fL,ft,[ss.IDisposable]);ss.initClass(fN);ss.initClass(fO,spiff.ComboBoxViewModel,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[spiff.ComboBoxProps]),spiff.IHasEnabledState]);ss.initInterface(gV,{get_hasExternalIcon:null,get_dom:null,handlePillExit:null,handlePillEnter:null},[ss.IDisposable]);ss.initClass(fP,ss.makeGenericType(spiff.BaseView$1,[jg]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jg]),tab.IAppendableView,gV,ss.IDisposable]);ss.initClass(fQ);ss.initClass(fR,spiff.Template,[ss.IDisposable]);ss.initClass(fS,spiff.PureRenderComponent);ss.initClass(fT,spiff.MoveDragInstance);ss.initClass(fU,React.Component);ss.initClass(fV,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mU,dS,[ss.IDisposable]);ss.initClass(fW,mU,[ss.IDisposable]);ss.initClass(fX,spiff.Template,[ss.IDisposable]);ss.initClass(fY,ss.makeGenericType(spiff.BaseView$1,[Object]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[Object]),ss.IDisposable,tab.IAppendableView]);ss.initClass(fZ,spiff.Template,[ss.IDisposable]);ss.initClass(ga,spiff.BaseViewModel,[gL,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState,ss.makeGenericType(gZ,[tab.ColorModel])]);ss.initClass(gb,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),gM,tab.IContinuousRangeModel,tab.IViewModel,ss.IDisposable,spiff.IHasEnabledState]);ss.initClass(gc,spiff.Template,[ss.IDisposable]);ss.initClass(gd,spiff.Template,[ss.IDisposable]);ss.initClass(ge,ss.makeGenericType(spiff.BaseView$1,[gj]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gj]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gf,spiff.Template,[ss.IDisposable]);ss.initClass(gg,ss.makeGenericType(spiff.BaseView$1,[gj]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gj]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gn,spiff.Template,[ss.IDisposable]);ss.initClass(gh,gn,[ss.IDisposable]);ss.initClass(gi,ss.makeGenericType(go,[gj]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gj]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gp,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(gj,gp,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(gk,gn,[ss.IDisposable]);ss.initClass(gl,ss.makeGenericType(go,[gm]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gm]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gm,gp,[tab.IViewModel,ss.IDisposable]);ss.initClass(gq,spiff.Template,[ss.IDisposable]);ss.initClass(gr,ss.makeGenericType(spiff.BaseView$1,[gs]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gs]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gs,gp,[tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(gt,spiff.PureRenderComponent);ss.initClass(gu);ss.initClass(gv);ss.initClass(gw);ss.initClass(gx);ss.initInterface(gQ,{buildDisplayTextForDate:null});ss.initClass(gy,null,[gQ]);ss.initClass(gz,spiff.Template,[ss.IDisposable]);ss.initClass(mQ);ss.initClass(gA,mQ);ss.initClass(gB,spiff.Glass,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(gC,spiff.PureRenderComponent);ss.initClass(gD,spiff.PureRenderComponent);ss.initClass(gE,ss.makeGenericType(spiff.BaseView$1,[gF]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[gF]),ss.IDisposable,tab.IAppendableView]);ss.initClass(gF,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(gG,spiff.Template,[ss.IDisposable]);ss.initClass(gH,tab.HideZoneWithPreviewCmd);ss.initInterface(gJ,{add_dropStateChanged:null,remove_dropStateChanged:null,add_visibleChanged:null,remove_visibleChanged:null,get_isVisible:null,get_dropTarget:null,get_title:null,get_name:null,get_collapsedTitleDetail:null,get_viewType:null,get_viewModel:null,get_dropState:null});ss.initInterface(gK,{add_commitChanges:null,remove_commitChanges:null},[tab.IViewModel,ss.IDisposable]);ss.initClass(gN);ss.initInterface(gP,{returnNotificationHandler:null});ss.initInterface(gR,{add_contentChanged:null,remove_contentChanged:null,addFloatingPanelToDom:null,addFloatingPanelToDom$1:null});ss.initClass(gT,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(gU,{get_paneContents:null,get_activePaneTitle:null,set_activePaneTitle:null});ss.initInterface(gW,{get_visualId:null,get_referenceLineId:null});ss.initClass(ha,null,[gQ]);ss.initClass(hb,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hc,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(hd,EventUtils.DragInstance);ss.initClass(he);ss.initClass(hf,spiff.Template,[ss.IDisposable]);ss.initClass(hg,ss.makeGenericType(spiff.BaseView$1,[hh]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hh]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hh,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hi);ss.initClass(hj,spiff.Template,[ss.IDisposable]);ss.initClass(hk,ss.makeGenericType(spiff.BaseView$1,[tab.IViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hl);ss.initClass(hm,spiff.Template,[ss.IDisposable]);ss.initClass(hn,ss.makeGenericType(spiff.BaseView$1,[ho]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ho]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ho,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hp,spiff.PureRenderComponent);ss.initClass(hq,spiff.PureRenderComponent);ss.initClass(hr,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hs,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ht,spiff.PureRenderComponent);ss.initClass(hu);ss.initClass(hv,spiff.PureRenderComponent);ss.initClass(hw,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hx,spiff.PureRenderComponent);ss.initClass(hy,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hz,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(hA,spiff.PureRenderComponent);ss.initClass(hB,spiff.PureRenderComponent);ss.initClass(hC,spiff.PureRenderComponent);ss.initClass(hD,React.Component);ss.initClass(hE,spiff.PureRenderComponent);ss.initClass(hF,EventUtils.DragInstance);ss.initClass(hG,spiff.PureRenderComponent);ss.initClass(hH,spiff.PureRenderComponent);ss.initClass(hI,null,[ss.makeGenericType(gY,[tab.LayoutTreeItem])]);ss.initClass(hJ,spiff.PureRenderComponent);ss.initClass(hK,spiff.PureRenderComponent);ss.initClass(hL,spiff.PureRenderComponent);ss.initClass(hM,spiff.PureRenderComponent);ss.initClass(hN,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(hO);ss.initClass(hP,tab.BaseHybridSidePaneProxyHelper);ss.initClass(hQ,ss.makeGenericType(spiff.BaseView$1,[hR]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hR]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hR,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hS,eA,[gO]);ss.initClass(hT,mQ);ss.initClass(hU);ss.initClass(hV,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[hW,Object,Object]));ss.initClass(hW,ss.makeGenericType(lE,[hX]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[hX]),ss.IDisposable,tab.IAppendableView]);ss.initClass(hX,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(hY);ss.initClass(hZ,ss.makeGenericType(spiff.BaseView$1,[Object]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[Object]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ia,spiff.Template,[ss.IDisposable]);ss.initClass(ib,spiff.Template,[ss.IDisposable]);ss.initClass(ic,React.Component);ss.initClass(id,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ie,spiff.PureRenderComponent);ss.initClass(ig);ss.initClass(ih);ss.initClass(ii);ss.initClass(ij,spiff.PureRenderComponent);ss.initClass(ik);ss.initClass(il);ss.initClass(im,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(io,React.Component);ss.initClass(ip,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iq);ss.initClass(ir,spiff.Template,[ss.IDisposable]);ss.initClass(it,ss.makeGenericType(spiff.BaseView$1,[iu]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iu]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iu,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,EventUtils.IDragResponder]);ss.initClass(iv,spiff.Template,[ss.IDisposable]);ss.initClass(iw,ss.makeGenericType(cy,[ix]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ix]),ss.IDisposable,tab.IAppendableView,gS]);ss.initClass(ix,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,gJ]);ss.initClass(iy,ss.makeGenericType(spiff.BaseView$1,[iz]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iz]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iz,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iA,spiff.Template,[ss.IDisposable]);ss.initClass(iB,spiff.PureRenderComponent);ss.initClass(iC);ss.initClass(iD);ss.initClass(iF,iE);ss.initClass(iG);ss.initClass(iH,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(iI);ss.initClass(lH);ss.initClass(iJ,lH);ss.initClass(iK,lH);ss.initClass(iL,lH);ss.initClass(iM,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(iN,ss.makeGenericType(spiff.BaseView$1,[iO]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[iO]),ss.IDisposable,tab.IAppendableView]);ss.initClass(iO,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(iP,spiff.Template,[ss.IDisposable]);ss.initClass(iQ);ss.initClass(iR);ss.initClass(iS);ss.initClass(iT,tab.Model,[tab.IDetachableNotificationHandler,tab.IHandleNotifications]);ss.initClass(iU);ss.initClass(iV,null,[spiff.IListItemContentCreator]);ss.initClass(iW);ss.initClass(iX);ss.initClass(ja,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(jb,spiff.Widget,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jc,cf);ss.initClass(jd);ss.initClass(je);ss.initClass(jf,ss.makeGenericType(spiff.BaseView$1,[jg]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jg]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jg,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(jh,spiff.Template,[ss.IDisposable]);ss.initClass(ji);ss.initClass(jk);ss.initClass(jl);ss.initClass(jm);ss.initClass(jn,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(jo,React.Component);ss.initClass(jp,React.Component);ss.initClass(jq);ss.initClass(jr,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(js,spiff.Template,[ss.IDisposable]);ss.initClass(jt,ss.makeGenericType(spiff.BaseView$1,[ju]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ju]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ju,dd,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(jv,React.PureComponent);ss.initClass(jx,tab.QuickSortAscendingCmd);ss.initClass(jy,tab.QuickSortDescendingCmd);ss.initClass(jz,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(jA);jA.$ctor2.prototype=jA.$ctor1.prototype=jA.prototype;ss.initClass(jB,ss.makeGenericType(spiff.BaseView$1,[jC]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jC]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jC,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(jD);ss.initClass(jE,React.Component);ss.initClass(jF);ss.initClass(jG);ss.initClass(jH,ss.makeGenericType(spiff.BaseReactViewModel$1,[jF]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jF]),gW]);jH.$ctor1.prototype=jH.prototype;ss.initClass(jI);ss.initClass(jJ,React.Component);ss.initClass(jK);ss.initClass(jL,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);jL.$ctor1.prototype=jL.prototype;ss.initClass(jM);ss.initClass(jN,React.Component);ss.initClass(jO);ss.initClass(jP);ss.initClass(jQ,ss.makeGenericType(spiff.BaseReactViewModel$1,[jO]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jO]),gW]);jQ.$ctor1.prototype=jQ.prototype;ss.initClass(jR);ss.initClass(jS,React.Component);ss.initClass(jT);ss.initClass(jU);ss.initClass(jV,ss.makeGenericType(spiff.BaseReactViewModel$1,[jT]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[jT]),gW]);jV.$ctor1.prototype=jV.prototype;ss.initClass(jW);ss.initClass(jX,spiff.Template,[ss.IDisposable,spiff.ITabControlTemplate]);ss.initClass(jY,ss.makeGenericType(spiff.BaseView$1,[jZ]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[jZ]),ss.IDisposable,tab.IAppendableView]);ss.initClass(jZ,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(ka,React.Component);ss.initClass(kb);ss.initClass(kc);ss.initClass(kd,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[kh,ke,kf]));ss.initClass(ke);ss.initClass(kf);ss.initClass(kg,spiff.Template,[ss.IDisposable]);ss.initClass(kh,ss.makeGenericType(spiff.BaseView$1,[ki]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ki]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ki,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(kj,React.Component);ss.initClass(kk);ss.initClass(kl,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(km,spiff.PureRenderComponent);ss.initClass(kn,tab.RemoveZoneFromDeviceLayoutWithPreviewCmd);ss.initClass(ko,KeyboardShortcuts.BaseKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(kp);ss.initClass(kq,null,[ss.IDisposable]);ss.initClass(kr,spiff.PureRenderComponent);ss.initClass(ks,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(kt,spiff.ModalDialog,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(ku,spiff.Template,[ss.IDisposable]);ss.initClass(kv,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(kw,spiff.ModalDialog,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(kx);ss.initClass(ky);ss.initClass(kz,spiff.PureRenderComponent);ss.initClass(kA,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);kA.$ctor1.prototype=kA.prototype;ss.initClass(kB,spiff.PureRenderComponent);ss.initClass(kC);ss.initClass(kE,React.Component);ss.initClass(kF,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(kG);ss.initClass(kH,tab.SaveAsCmd);ss.initClass(kI,tab.SaveCmd);ss.initClass(kJ,spiff.PureRenderComponent);ss.initClass(kK,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(kL);ss.initClass(kM,tab.BaseDisposableDialog,[ss.IDisposable]);ss.initClass(kN,tab.SaveOrSaveAsCmd);ss.initClass(kO);ss.initClass(kP);ss.initClass(kQ);ss.initClass(kR,jc);ss.initClass(kS,spiff.PureRenderComponent);ss.initClass(kT);ss.initClass(kU,null,[ss.IDisposable]);ss.initClass(kW);ss.initClass(kX);ss.initClass(kY,spiff.Template,[ss.IDisposable]);ss.initClass(kZ,spiff.BaseViewModel,[tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(lb,spiff.PureRenderComponent);ss.initClass(lc,spiff.PureRenderComponent);ss.initClass(ld);ss.initClass(le,ss.makeGenericType(spiff.BaseReactViewModel$1,[ld]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[ld])]);ss.initClass(lf,spiff.Template,[ss.IDisposable]);ss.initClass(lg,ss.makeGenericType(spiff.BaseView$1,[lh]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lh]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lh,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(li,dS,[ss.IDisposable]);ss.initClass(lj,spiff.PureRenderComponent);ss.initClass(lk,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ll,spiff.Template,[ss.IDisposable]);ss.initClass(ln,ss.makeGenericType(cy,[lo]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lo]),ss.IDisposable,tab.IAppendableView,gS]);ss.initClass(lo,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,gJ,EventUtils.IDragResponder]);ss.initClass(lp,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(lq,KeyboardShortcuts.CommandKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(lr,ss.makeGenericType(spiff.BaseView$1,[ls]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[ls]),ss.IDisposable,tab.IAppendableView]);ss.initClass(ls,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lt,spiff.Template,[ss.IDisposable]);ss.initClass(lu,ss.makeGenericType(spiff.BaseView$1,[lv]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lv]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lv,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lw);ss.initClass(lx,null,[spiff.IListItemContentCreator,spiff.IListItemDragAvatarCreator]);ss.initClass(ly,spiff.Template,[ss.IDisposable]);ss.initClass(lz,ss.makeGenericType(spiff.BaseView$1,[lA]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lA]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lA,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lB,ss.makeGenericType(spiff.ReactSpiffAdapter$3,[lC,Object,Object]));ss.initClass(lC,ss.makeGenericType(lE,[lD]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lD]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lD,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lF,ss.makeGenericType(spiff.BaseView$1,[lG]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lG]),ss.IDisposable,tab.IAppendableView,gU]);ss.initClass(lG,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lI);ss.initClass(lJ,spiff.Template,[ss.IDisposable]);ss.initClass(lK,ss.makeGenericType(spiff.BaseView$1,[du]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[du]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lL,spiff.Template,[ss.IDisposable]);ss.initClass(lM,ss.makeGenericType(spiff.BaseView$1,[lN]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lN]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lN,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lO,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lP,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(lQ,spiff.Template,[ss.IDisposable]);ss.initClass(lR,ss.makeGenericType(spiff.BaseView$1,[lS]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lS]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lS,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lT,spiff.Template,[ss.IDisposable]);ss.initClass(lU,ss.makeGenericType(spiff.BaseView$1,[lV]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lV]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lV,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lW,spiff.Template,[ss.IDisposable]);ss.initClass(lX,ss.makeGenericType(spiff.BaseView$1,[lY]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[lY]),ss.IDisposable,tab.IAppendableView]);ss.initClass(lY,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(lZ,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ma,tab.ToggleFreeFormZoneWithPreviewCmd);ss.initClass(mb,tab.ToggleINDJoinSemanticsWrapperCmd);ss.initClass(mc,ss.makeGenericType(spiff.BaseView$1,[md]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[md]),ss.IDisposable,tab.IAppendableView]);ss.initClass(md,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,spiff.IUberPopupContent,spiff.IContent]);ss.initClass(mf);ss.initClass(mg,cq,[ss.IDisposable]);ss.initClass(mh,cr,[tab.IWidget,ss.makeGenericType(tab.IView$1,[cs]),ss.IDisposable,tab.IAppendableView]);ss.initClass(mk,iE);ss.initClass(ml,spiff.Template,[ss.IDisposable]);ss.initClass(mm,spiff.Template,[ss.IDisposable]);ss.initClass(mn,ss.makeGenericType(spiff.BaseView$1,[mo]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[mo]),ss.IDisposable,tab.IAppendableView]);ss.initClass(mo,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(mp);ss.initClass(mq,tab.WebConnectDataCmd);ss.initClass(mr,tab.WebDashboardDesignCmd);ss.initClass(ms,tab.WebEditDataSourceCmd);ss.initClass(mt,tab.WebEditObjectCaptionCmd);ss.initClass(mu,tab.WebEPDSPublishCmd);mu.$ctor1.prototype=mu.prototype;ss.initClass(mv,tab.WebExportCrossTabCmd);ss.initClass(mw,tab.WebExportDataCmd);ss.initClass(mx,tab.WebExportPdfCmd);ss.initClass(my,tab.WebExportPngCmd);ss.initClass(mz,tab.WebExportPowerPointCmd);ss.initClass(mA,null,[tab.IWaitForCommandsWithCancel,tab.IWaitForCommands]);ss.initClass(mB,tab.WebFilterDialogDomainCancelCmd);ss.initClass(mC,tab.WebFormatPaneCmd);ss.initClass(mD,tab.WebFormatWorkbookCmd);ss.initClass(mE,tab.WebRemoveShelfPillCmd);ss.initClass(mF,tab.WebRenameDatasourceDialogCmd);ss.initClass(mG,tab.WebShowMeCmd);ss.initClass(mH,tab.WebToolbarMoreCmd);ss.initClass(mI,null,[ss.IDisposable]);ss.initClass(mJ,spiff.PureRenderComponent);ss.initClass(mK,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mL,tab.WhereDidSaveGoCmd);ss.initClass(mM,mi,[tab.IViewModel,ss.IDisposable]);ss.initClass(mN);ss.initClass(mO);ss.initClass(mP);ss.initClass(mR,spiff.Template,[ss.IDisposable]);ss.initClass(mS,ss.makeGenericType(spiff.BaseView$1,[mT]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[mT]),ss.IDisposable,tab.IAppendableView]);ss.initClass(mT,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable]);ss.initClass(nj,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mW,nj,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(mX,null,[ss.makeGenericType(gY,[tab.DeviceLayoutZoneInfo])]);mX.$ctor1.prototype=mX.prototype;ss.initClass(mY,ss.makeGenericType(cg,[Object]));ss.initClass(mZ,ss.makeGenericType(ch,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(na,dS,[ss.IDisposable]);na.$1.prototype=na.prototype;ss.initClass(nc,React.Component);ss.initClass(nd,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ne,ss.makeGenericType(spiff.BaseComponentViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(nf,ss.makeGenericType(cg,[Object]));ss.initClass(ng,ss.makeGenericType(ch,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(ni,nj,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.setMetadata(gY,{variance:[1]});(function(){b.$2='SetMapScaleVisibility';b.$3='SetMapSearchVisibility';b.$1='SetFloatingToolbarVisibility';b.$0='SetAllowPanAndZoom'})();(function(){gN.tableCalcIconClass='tabAuthPillIconTableCalc'})();(function(){H.$0='relativeDate'})();(function(){G.$2=null;if(tab.FeatureFlags.isEnabled('WebFilterDialog')){tab.ApplicationModel.get_instance().registerNotificationHandler('doc:filter-aggregation-dialog-event',G.$0)}})();(function(){iA.htmlTemplate="<div class='tabAuthMarkSizePickerContent'>\n            <div class='tabAuthMarkSizeLabel'></div>\n            <div class='tabAuthMarkSizeSlider'></div>\n        </div>"})();(function(){iy.$2=0;iy.$1=100;iy.$3=200;tab.ObjectRegistry.registerType(iy,iy).call(null)})();(function(){dq.$0="\n            <div class='tabAuthTransparencyControl'>\n                <div class='tabAuthTransparencyLabel'></div>\n                <div class='tabAuthTransparencyControlHolder'></div>\n            </div>"})();(function(){ds.minimumTransparency=0;ds.maximumTransparency=100;ds.sliderWidth=100})();(function(){tab.ObjectRegistry.registerType(dr,dr).call(null)})();(function(){db.htmlTemplate="<div class='tabAuthColorOptionEffectUberContainer'>\n            <div class='tabAuthColorOptionEffectAutoButton'></div>\n            <div class='tabAuthColorOptionEffectNoneButton'></div>\n            <div class='tabAuthColorOptionEffectColorPicker'></div>\n            <div class='tabAuthColorOptionsEffectMoreButton'></div>\n        </div>"})();(function(){dl.columns=8;dl.$1=['#000000','#FFFFFF'];dl.$2=['#1B1B1B','#333333','#555555','#666666','#898989'];dl.$3=['#F5F5F5','#E6E6E6','#D4D4D4','#C0C0C0','#B4B4B4'];dl.$4=['#F28E2B','#F9A655','#FFBE7D','#B6992D','#D3B348','#F1CE63','#59A14F','#72B966','#8CD17D','#499894','#69AAA5','#86BCB6','#4E79A7','#75A1C7','#A0CBE8','#606B76','#818B91','#A7ACAD'];dl.$5=['#B07AA1','#C290B4','#D4A6C8','#D37295','#E799B3','#FABFD2','#E15759','#F17B79','#FF9D9A','#9D7660','#BA9582','#D7B5A6','#79706E','#998F8C','#BAB0AC','#76B7B2','#FF9DA7','#EDC948']})();(function(){dm.$1="<div class='tabColorPicker'>\n                <div class='tabColorPickerContainer'>\n                    <div class='tabColorPickerBlack'></div>\n                    <div class='tabColorPickerDarkGrays'></div>\n                    <div class='tabColorPickerWhite'></div>\n                    <div class='tabColorPickerLightGrays'></div>\n                    <div class='tabColorPickerPreset1'></div>\n                    <div class='tabColorPickerPreset2'></div>\n                    <div class='tabColorPickerUserContainer'></div>\n                </div>\n            </div>";dm.$0="<div class='tabAuthDivider'></div>";dm.$2="<div class='tabAuthTransparencyControlContainer'></div>"})();(function(){dn.$2='tabColorPickerGroup';dn.$3='tabColorPickerUser';dn.colorPickerColorClassName='tabColorPickerColor';dn.$4='tabColorSelected';dn.$1='tabColorPickerColorBorder';tab.ObjectRegistry.registerType(dn,dn).call(null)})();(function(){dJ.htmlTemplate="<div class='tabAuthCustomHexColorUberContainer'>\n            <div class='tabAuthCustomHexColorUberLabel'></div>\n            <div class='tabAuthCustomHexColorUberTextInput'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(dH,dH).call(null)})();(function(){cZ.$1='tabColorEffectMoreColorsButton';tab.ObjectRegistry.registerType(cZ,cZ).call(null)})();(function(){cU.htmlTemplate="<div class='tabAuthMarksCardColorEffectsContainer'>\n            <div class='tabBorderColorLabel'></div>\n            <div class='tabBorderColorButtonArea'></div>\n            <div class='tabHaloColorLabel'></div>\n            <div class='tabHaloColorButtonArea'></div>\n        </div>"})();(function(){cR.$0="<span class='tabComboBox tab-ctrl-formatted-widget tab-ctrl-formatted-darker-border-hover'>\n            <div class='tabComboBoxNameContainer tab-ctrl-formatted'>\n                <span class='tabComboBoxName'></span>\n                <div class='tabComboBoxColorRule'></div>\n            </div>\n            <div class='tabComboBoxButtonHolder'>\n                <span class='tabComboBoxButton'></span>\n            </div>\n        </span>"})();(function(){tab.ObjectRegistry.registerType(cS,cS).call(null)})();(function(){cV.$1='disabled';tab.ObjectRegistry.registerType(cV,cV).call(null)})();(function(){gG.htmlTemplate="<div class='tabAuthHeatmapColorOptionContent'>\n            <div class='tabAuthHeatmapEffectsContainer'>\n              <div class='tabAuthHeatmapColorControl'>\n                <div class='tabAuthHeatmapColorLabel'></div>\n                <div class='tabAuthHeatmapColorHolder'></div>\n              </div>\n              <div class='tabAuthHeatmapIntensityControl'>\n                <div class='tabAuthHeatmapIntensityLabel'></div>\n                <div class='tabAuthHeatmapIntensityHolder'></div>\n              </div>\n            </div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(gE,gE).call(null)})();(function(){js.$0="<div class='tabAuthQuantitativeColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(jt,jt).call(null)})();(function(){ju.$4=2;ju.$3=100;ju.$5=1;ju.$2=5;ju.colorStepTextClassName='tabAuthColorStepText'})();(function(){cI.htmlTemplate="<div class='tabAuthCategoricalColorOptionContent'>\n            <div class='tabColorEditButtonContainer'></div>\n            <div class='tabColorPalettePickerContainer'></div>\n            <div class='tabAuthDivider'></div>\n            <div class='tabAuthTransparencyControlContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(cJ,cJ).call(null)})();(function(){iP.htmlTemplate="<div class='tabAuthNoFieldsColorOptionContent'>\n            <div class='tabColorPickerContainer'></div>\n            <div class='tabColorEffectsContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(iN,iN).call(null)})();(function(){tab.ObjectRegistry.registerType(mc,mc).call(null)})();(function(){lW.htmlTemplate="<div class='tabAuthTextOptionContent'>\n            <div class='tabToggleMarkLabelsCheckboxContainer'></div>\n            <div class='tabEditMarkLabelsButtonContainer'></div>\n            <div class='tabMarksToLabelContainer'></div>\n        </div>"})();(function(){tab.ObjectRegistry.registerType(lX,lX).call(null)})();(function(){lt.htmlTemplate="<div class='tabAuthPrimitiveOptionsContainer'></div>"})();(function(){tab.ObjectRegistry.registerType(lu,lu).call(null)})();(function(){ll.template="<div class='tabAuthShelf'><div class='tabAuthShelfPills'><div class='tabAuthShelfPillsContent tabAuthShelfDropTarget'></div></div></div>";ll.templatePillDivider="<span class='tabAuthShelfPillDivider'><div class='tabAuthShelfPillDividerTarget'></div><div class='tabAuthShelfPillDividerPlaceholder'></div></span>";ll.templateClickSpacer="<span class='tabAuthShelfClickArea'></span>"})();(function(){ci.$0="\n<span class='tabCalcEditorTextDragAvatar'>\n    <div class='tabCalcEditorTextDragAvatarLabel'></div>\n</span>"})();(function(){Y.$0="<span class='tabAuthAnalyticsDragAvatar'>"+"<div class='tabAuthAnalyticsDragAvatarLabel'></div>"+'</span>'})();(function(){tab.StartupUtils.callOnceAfterInitialBootstrap(Z.installVizDragOverride)})();(function(){var nk=new jd;nk.action=function(nl){};nk.cursor=function(nl){return spiff.CustomCursor.noOp};jd.noOp=nk})();(function(){eV.devicePreviewBarClass='tab-devicePreviewBar'})();(function(){r.$2="<div class='autocomplete_separator'></div>";r.$0="<div class='autocomplete_header'></div>";r.$1='<div>'+"<div class='autocomplete_item'>"+"<span class='field-icon-area'><div class='schema-field-icon'></div></span>"+'</div>'+'</div>'})();(function(){s.$1='autocomplete_field';s.$0='tab-schema-{0}-icon'})();(function(){t.$1='autocomplete_func';t.$0='autocomplete-menu-function'})();(function(){ct.$0="\n<div class='tabCalcEditorFunctionInfo'>\n  <div class='tabCalcEditorFunctionName'></div>\n  <div class='tabCalcEditorFunctionDescription'></div>\n</div>"})();(function(){cu.$0="<div class='tabCalcEditorFunctionArea'>"+"<div class='tabCalcEditorSearchableFuncList'>"+"<div class='tabCalcEditorFuncType'></div>"+"<div class='tabCalcEditorFuncSearchBox'></div>"+"<div class='tabCalcEditorFuncListSeparator'></div>"+"<div class='tabCalcEditorFuncListArea'></div>"+'</div>'+"<div class='tabCalcEditorFuncInfoArea'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(cv,cv).call(null)})();(function(){cx.$0="\n<div class='tabCalcEditorTitleArea'>\n  <div class='tabCalcEditorCaptionContainer'></div>\n  <div class='tabCalcEditorDataSourceLabel'><div class='icon'></div><div class='labelText'></div></div>\n</div>"})();(function(){gz.$0="\n<div class='tabCalcEditorFuncFlyoutControl'>\n    <div class='tabCalcEditorFuncFlyoutExpander'></div>\n    <div class='tabCalcEditorFuncFlyoutCollapser'></div>\n    <div class='tabCalcEditorFuncFlyoutControlHit'></div>\n</div>"})();(function(){cl.$1="<div class='tabCalcDependencyContent'>\n            <div class='tabCalcDependencyPrefix'></div>\n            <div class='tabCalcDependencyInfo'></div>\n        </div>";tab.ObjectRegistry.registerType(cl,cl).call(null)})();(function(){cn.$0="<div class='tabCalcEditor'>"+"<div class='tabCalcEditorBody'>"+"<div class='tabCalcEditorCmHolder tabCalcEditorDropTarget'></div>"+'</div>'+"<div class='tabCalcEditorControlArea'>"+"<div class='tabCalcEditorStatusOk'><span class='tabCalcEditorStatusOkText'></span></div>"+"<div class='tabCalcEditorStatusErrorBtn'><span class='tabCalcEditorStatusErrorText'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div>"+"<div class='tabCalcEditorDependsBtn'><span class='tabCalcEditorDependsBtnLabel'></span><span class='tabCalcEditorDropdownBtnIcon'></span></div>"+"<div class='tabCalcEditorBtnArea'></div>"+'</div>'+'</div>'})();(function(){lT.$0="\n<div class='tabWindowOptionRoot'>\n    <div class='tabWindowOptionTitle tabRow'></div>\n    <div class='tabWindowOptionAgg tabRow'></div>\n    <div class='tabWindowOptionPreviousValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionNextValues tabRow'>\n        <span class='tabLabel'></span><span class='tabSpinner'></span>\n    </div>\n    <div class='tabWindowOptionCurrentValue tabRow'></div>\n    <div class='tabWindowOptionNullSetting tabRow'></div>\n</div>"})();(function(){tab.ObjectRegistry.registerType(lU,lU).call(null)})();(function(){E.$1='orderAddrOption_'})();(function(){lQ.$0="\n<div class='tabSortOptionRoot'>\n    <div class='tabSortOptionMode tabRow'>\n        <span class='tabAutomatic'></span>\n        <span class='tabCustom'></span>\n    </div>\n    <div class='tabSortOptionFieldAgg tabRow'>\n        <span class='tabField'></span>\n        <span class='tabAgg'></span>\n    </div>\n    <div class='tabSortOptionAscDesc tabRow'>\n        <span class='tabDesc'></span>\n        <span class='tabAsc'></span>\n    </div>\n</div>"})();(function(){tab.ObjectRegistry.registerType(lR,lR).call(null)})();(function(){lS.sortModePropertyName='SortMode';lS.sortDirectionPropertyName='SortDirection'})();(function(){lL.$0="<div class='tabTableCalcEditor'>\n        <div class='tabTableCalcTypeArea'>\n            <div class='tabTableCalcTitle tabHeader3'></div>\n            <div class='tabTableCalcType tabRow comboRow'></div>\n            <div class='tabTableCalcNestedLabel tabHeader3 hide'></div>\n            <div class='tabTableCalcNested tabRow comboRow hide'></div>\n            <div class='tabTableCalcSortDirection tabRow comboRow hide'></div>\n            <div class='tabTableCalcRankType tabRow comboRow hide'></div>\n            <div class='tabTableCalcAggregation tabRow comboRow hide'></div>\n            <div class='tabTableCalcAllPages tabRow checkRow hide'></div>\n            <div class='tabTableCalcNullSetting tabRow checkRow hide'></div>\n            <div class='tabTableCalcWindowOptions tabRow comboRow hide'></div>\n            <div class='tabTableCalcComputeCompound tabRow checkRow hide'></div>\n        </div>\n        <div class='tabTableCalcComputeUsing'>\n            <span class='label tabTableCalcComputeUsingHeader tabHeader3'></span>\n            <div class='tabTableCalcOrdering tabRow'></div>\n            <div class='tabTableCalcSpecificDim hide tabRow'></div>\n        </div>\n        <div class='tabTableCalcAtTheLevel tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcDifferenceFrom tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRelativeTo tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcRestartEvery tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n        <div class='tabTableCalcSort tabRow hide'><div class='tabTableCalcLabeledCombo'><span class='label'></span></div></div>\n    </div>"})();(function(){lM.$5='hide';lM.$6=3;tab.ObjectRegistry.registerType(lM,lM).call(null)})();(function(){lJ.$0="<div class='tabTableCalcDialogBody'>\n        <div class='tabPrimaryTableCalcEditor'></div>\n        <div class='tabSecondaryTableCalcEditor'></div>\n    </div>"})();(function(){lK.$1="<span class='tabTableCalcFieldCaption'></span>";tab.ObjectRegistry.registerType(lK,lK).call(null)})();(function(){fO.secondaryDSTableCalcIcon='tabAuthPillIconTableCalcSecondary';fO.tableCalcIcon='tabAuthPillIconTableCalc';fO.secondaryDSIcon='tab-schema-datasource-secondary-icon'})();(function(){eN.defaultDebounceTimeout=1500})();(function(){fz.styleClass='customValueTextDropdown'})();(function(){jV.$5=tab.Strings.AODialogInstantAnalyticsLineLabel;jV.$1='ConfidenceLevel';jV.$2='ConstantValue';jV.$3='CustomLabel';jV.$4='CustomTooltip'})();(function(){jH.fromLabelCssClass='tab-fromLabelComponent';jH.toLabelCssClass='tab-toLabelComponent';jH.fromConstantValueTestId='FromConstantValue';jH.toConstantValueTestId='ToConstantValue';jH.fromCustomLabelTestId='FromCustomLabel';jH.fromCustomTooltipTestId='FromCustomTooltip';jH.toCustomLabelTestId='ToCustomLabel';jH.toCustomTooltipTestId='ToCustomTooltip';jH.$1=tab.Strings.AODialogInstantAnalyticsBandLabel})();(function(){fb.valueCssClass='tabValue';fb.formulaCssClass='tabComputation';fb.percentagesTestId='Percentages';fb.constantValueTestId='ConstantValue'})();(function(){fe.percentileTestId='Percentiles'})();(function(){fh.quantilesTestId='Quantiles'})();(function(){fk.factorsTestId='Factors'})();(function(){var nk=[];nk.push('percentages');nk.push('percentiles');nk.push('quantiles');nk.push('standard-deviation');jL.distributionTypes=nk;jL.distributionTypeStrings=ss.mkdict(['percentages',{item1:tab.Strings.AODialogPercentagesLabel,item2:'percentages-id'},'percentiles',{item1:tab.Strings.AODialogPercentilesLabel,item2:'percentiles-id'},'quantiles',{item1:tab.Strings.AODialogQuantiles,item2:'quantiles-id'},'standard-deviation',{item1:tab.Strings.AODialogStandardDeviation,item2:'sd-id'}])})();(function(){jQ.$3=tab.Strings.AODialogInstantAnalyticsBandLabel;jQ.$1='CustomLabel';jQ.$2='CustomTooltip'})();(function(){jZ.$1=ss.mkdict(['line'.toString(),'line','band'.toString(),'band','distribution'.toString(),'distribution','boxplot'.toString(),'boxplot','none'.toString(),'none'])})();(function(){kg.$0="<div class='tab-editReferenceLineScopeSection'>\n              </div>"})();(function(){jJ.$3=360;jJ.$2=137})();(function(){m.$0="<div class='tab-editReferenceLineTab'>\n                 <div class='tab-tabIcon'></div>\n                 <div class='tab-tabLabel'></div>\n              </div>"})();(function(){jX.$0='<div>'+"<div class='tab-editReferenceLineTabs'></div>"+"<div class='tab-editReferenceLineTabContentArea'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(jY,jY).call(null)})();(function(){cD.template="<div class='tabAuthCard'>"+"<div class='tabAuthCardLabelArea'>"+"<div class='tabAuthCardExpandoTarget'></div>"+"<div class='tabAuthCardExpando'></div>"+"<div class='tabAuthCardIcon'></div>"+"<div class='tabAuthCardLabel'></div>"+"<div class='tabAuthCardContent'></div>"+'</div>'+'</div>'})();(function(){fH.$0="<div class='"+'emptyWorksheet'+"'>"+"<div class='"+'emptyWorksheetText'+"'></div>"+'</div>'})();(function(){mR.$0='<div class= '+'tab-ZoneDragAvatarContainer'+'>'+'<div class='+'tab-FloatingZoneDragAvatar'+'></div>'+'</div>'})();(function(){ne.$1=5;ne.$2=3;ne.$0=32})();(function(){mO.dashContentOffsetLeft=tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();mO.dashOffsetRight=tabBootstrap.VizLayoutConstants.get_authoringGutter().right+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth();mO.dashOffsetTop=tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()})();(function(){var nk={};nk[0]='tabGroupZoneLeft';nk[1]='tabGroupZoneRight';nk[2]='tabGroupZoneTop';nk[3]='tabGroupZoneBottom';mQ.$4=nk;var nk={};nk[0]='tabZoneLeft';nk[1]='tabZoneRight';nk[2]='tabZoneTop';nk[3]='tabZoneBottom';mQ.$5=nk})();(function(){bP.$4='Authoring_ToolbarItem';bP.$5='Authoring_ToolbarMenuItem';bP.$2='checked';bP.$3='radio-selected'})();(function(){km.$1=0})();(function(){nf.$1=[2,1];nf.$3=[3,1];nf.$2=[2,0];nf.$4=[3,0]})();(function(){dB.$2='tab-dashZoneBordersContainer';dB.$1='tab-dashZoneBorderPreview';dB.$0=2})();(function(){dw.$2='tab-dashContainerGuideContainer';dw.$1='tab-dashContainerGuideBorder';dw.$3='tab-dashContainerGuideLine';dw.$0=2;dw.$4=10;dw.$5=5})();(function(){dP.$4='tab-dashDropTargetContainer';dP.$2='tab-dashCurrentDropTarget';dP.$3='__PREVIEW__';dP.$0='__ZONES__';dP.$1='__CONTAINER__'})();(function(){fU.$0='tab-dashDropTargetContainer';fU.$1='tab-dashFloatingResizePreview'})();(function(){kE.$2='tab-dashDropTargetContainer';kE.$1='tab-dashContainerGuideBorder';kE.$9='tab-dashZoneEdgeResizer';kE.$6='tab-snapPointIndicator';kE.$3='tab-snapPointLeft';kE.$8='tab-snapPointTop';kE.$4='tab-snapPointRight';kE.$0='tab-snapPointBottom';kE.$5=5;kE.$7=2})();(function(){dY.gridToggleEvent='DashboardAuthoring_GridToggle';dY.gridSizeEvent='DashboardAuthoring_GridSize';dY.$1='GridState';dY.$3='On';dY.$2='Off';dY.$4='GridToggleMethod';dY.$5='Shortcut';dY.$6='Toggle Menu Bar';dY.gridSizeProperty='GridSize'})();(function(){var nk=new Object;nk.controlOrCommand='required';nk.shift='required';lq.keyCombo=new KeyboardShortcuts.KeyCombo('a',nk)})();(function(){var nk=new Object;nk.controlOrCommand='required';nk.shift='required';lp.keyCombo=new KeyboardShortcuts.KeyCombo('d',nk)})();(function(){var nk={};nk['default']=tab.Strings.DashboardAuthoringDeviceLayoutDefault;nk['desktop']=tab.Strings.DashboardAuthoringDeviceLayoutDesktop;nk['phone']=tab.Strings.DashboardAuthoringDeviceLayoutPhone;nk['tablet']=tab.Strings.DashboardAuthoringDeviceLayoutTablet;dM.$3=nk;dM.$2=dM.$0()})();(function(){by.$2='tabAuthTabAvatarLabel';by.$1='tabAuthTabAvatar';by.template="\n            <span class='"+by.$1+"'>"+"<div class='"+by.$2+"'></div>"+'</span>'})();(function(){var nk=new Object;nk.controlOrCommand='required';nk.alt='required';iM.keyCombo=new KeyboardShortcuts.KeyCombo('t',nk)})();(function(){iL.buttonClassName='tabAuthTabNewWorksheetBtn';iL.$0='tabAuthNewWorksheetIcon'})();(function(){iJ.buttonClassName='tabAuthTabNewDashboardBtn';iJ.$0='tabAuthNewDashboardIcon'})();(function(){iK.buttonClassName='tabAuthTabNewStoryBtn';iK.$0='tabAuthNewStoryIcon'})();(function(){bp.$6=new RegExp('\\S+','g')})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveCmd.cmdId,kI)})();(function(){jn.$0=null})();(function(){cd.justPublishedDuration=3000;var nk=new eY;nk.set_minutesDisplayIsValid(1);nk.set_nextUpdateIntervalMs(10000);nk.set_builder(new ha(false));var nl=new eY;nl.set_minutesDisplayIsValid(2147483647);nl.set_nextUpdateIntervalMs(2147483647);nl.set_builder(new gy(false));cd.$5=[nk,nl];var nk=new eY;nk.set_minutesDisplayIsValid(1);nk.set_nextUpdateIntervalMs(10000);nk.set_builder(new ha(true));var nl=new eY;nl.set_minutesDisplayIsValid(2147483647);nl.set_nextUpdateIntervalMs(2147483647);nl.set_builder(new gy(true));cd.$3=[nk,nl];cd.$4=null;cd.$1=3000;cd.$2=[(new tab.CreateDataSourceFromFileUploadCmd).get_commandId().cmd,(new tab.ReplaceFileConnectionFromFileUploadCmd).get_commandId().cmd,{ns:'tabdoc',cmd:'update-image-object-properties'}.cmd]})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveAsCmd.cmdId,kH)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEPDSPublishCmd.cmdId,mu)})();(function(){fl.$0=null})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebRenameDatasourceDialogCmd.cmdId,mF)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEditDataSourceCmd.cmdId,ms)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.SaveOrSaveAsCmd.cmdId,kN)})();(function(){ji.$2=[];ji.$0()})();(function(){tab.ObjectRegistry.registerType(lr,lr).call(null)})();(function(){ls.showMeCommandsProperty='ShowMeCommands'})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebConnectDataCmd.cmdId,mq)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.QuickSortDescendingCmd.cmdId,jy)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.QuickSortAscendingCmd.cmdId,jx)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebExportPngCmd.cmdId,my)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebExportDataCmd.cmdId,mw)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebExportCrossTabCmd.cmdId,mv)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebExportPdfCmd.cmdId,mx)})();(function(){ga.defaultColor=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode('#000000'),0)})();(function(){gn.$0="<div class='tabAuthFormatItem'></div>"})();(function(){gk.$0='tabAuthFormatControl'+'Header';gk.genericAuthFormatControlClassName='tabAuthFormatControl'})();(function(){fX.$0="\n        <div class='tabFontPickerContainer'>\n            <div class='tabFontFamilyPickerContainer'></div>\n            <div class='tabFontSizePickerContainer'></div>\n            <div class='tabFontStyleButtonsContainer'></div>\n            <div class='tabFontColorPickerContainer'></div>\n        </div>"})();(function(){ib.$0="<div class='tabLinePickerContainer'>\n            <div class='tabLineVisibilityContainer'></div>\n            <div class='tabLinePatternContainer'></div>\n            <div class='tabLineSizeContainer'></div>\n            <div class='tabLineColorPickerContainer'></div>\n        </div>"})();(function(){br.$0='10px'})();(function(){gf.$0="<div class='tabAuthFormatContainerPopup'></div>"})();(function(){gd.$0="<div class='tabFormatContainerButton'>"+"<div class='tabFormatContainerButtonLabel'></div>"+"<div class='tabFormatContainerShowPopupButtonHolder'>"+"<div class='tabFormatContainerShowPopupButton'></div>"+'</div>'+'</div>'})();(function(){gc.$0="<div class='tabFormatContainerButtonContainer'></div>"})();(function(){fZ.$0="<div class='tabFontPickerPreview'>"+"<div class='tabFontPickerFontFamily'></div>"+"<div class='tabFontPickerFontSize'></div>"+'</div>'})();(function(){ia.$0="<div class='tabLinePickerPreview'>"+"<div class='tabLinePickerDescription'></div>"+"<div class='tabLinePickerSwatch'></div>"+'</div>'})();(function(){gh.formatSectionHeaderCss='tabAuthFormatSectionHeaderTitle'})();(function(){tab.ObjectRegistry.registerType(hZ,hZ).call(null)})();(function(){tab.ObjectRegistry.registerType(gl,gl).call(null)})();(function(){var nk=[];nk.push('automatic');nk.push(tab.Strings.AuthFormatLineVisibilityAutomatic);nk.push('on');nk.push(tab.Strings.AuthFormatLineVisibilityOn);nk.push('off');nk.push(tab.Strings.AuthFormatLineVisibilityOff);gm.$7=nk;var nk=[];nk.push('automatic');nk.push(tab.Strings.AuthFormatLineVisibilityAutomatic);nk.push('off');nk.push(tab.Strings.AuthFormatLineVisibilityOff);gm.$3=nk;gm.$5=['solid','dashed','dotted'];gm.$4=ss.mkdict(['solid',tab.Strings.AuthoringLinePatternLabelSolid,'dashed',tab.Strings.AuthoringLinePatternLabelDashed,'dotted',tab.Strings.AuthoringLinePatternLabelDotted]);gm.$6=[1,2,3,4,5]})();(function(){tab.ObjectRegistry.registerType(fY,fY).call(null)})();(function(){tab.ObjectRegistry.registerType(gg,gg).call(null)})();(function(){tab.ObjectRegistry.registerType(ge,ge).call(null)})();(function(){gi.formatPaneRootClass='tabAuthFormatPane';gi.formatSectionRootClass='tabAuthFormatSection';gi.collapsibleSectionRootClass='tabAuthFormatCollapsibleSection';gi.unitContainerRootClass='tabAuthFormatUnitContainer';gi.formatContainerPreviewRootClass='tabAuthFormatContainerPreview tab-unification-line-arrow-dropdown';tab.ObjectRegistry.registerType(gi,gi).call(null)})();(function(){gq.$0="\n            <div class='tabAuthFormatPane'>\n                <div class='tabAuthFormatPaneTitleContainer'>\n                    <div class='tabAuthFormatPaneTitle'></div>\n                </div>\n                <div class='tabAuthFormatPaneCloser'></div>\n                <div class='tabAuthFormatPaneBodyContainer'><div class='tabAuthFormatPaneBody'></div></div>\n                <div class='tabAuthFormatPaneFooter'></div>\n            </div>"})();(function(){C.propertyActiveItem='ActiveItem';C.propertyAllItems='AllItems';C.propertyDragToReorderLayers='DragToReorderLayers'})();(function(){z.$0="<div class='tabAccordionItem'>\n            <div class='tabAccordionItemHeader'></div>\n            <div class='tabAccordionItemContent'></div>\n            </div>"})();(function(){hh.propertyHovering='LayerReorderHoverProperty'})();(function(){v.$0="<div class='tabAccordionHeader'>\n            <div class='tabLayerVisibilityButton'></div>\n            <div class='tabAccordionItemIconContainer'>\n                <div class='tabAccordionItemIcon'></div>\n            </div>\n            <span class='tabAccordionItemTitle'>\n                <div class='tabAccordionItemTitleText'></div>\n                <input class='tabAccordionItemTitleInput' style='display: none'/>\n                <span class='tableCalcIcon'></span>\n            </span>\n            <div class='tabAccordionDropdownMenu'></div>\n            </div>"})();(function(){w.headerHeight=33})();(function(){hj.$0="<div class='layerReorderSpacerDropTargetContainer'>\n            <div class='layerReorderSpacerDropTarget'></div>\n        </div>"})();(function(){hf.$0="<div class='layerReorderDropTargetItem'>\n            <div class='layerReorderDropTarget'>\n                <div class='layerReorderDropTargetIndicatorTop'></div>\n                <div class='layerReorderDropTargetIndicator'></div>\n                <div class='layerReorderDropTargetIndicatorBottom'></div>\n            </div>\n        </div>"})();(function(){B.$1='marksSpecId';B.$0='tabAccordionItem'})();(function(){jb.pillAvatarLabelClass='tabAuthPillAvatarLabel';jb.$0="\n<span class='tabAuthPillAvatar'>\n    <div class='tabAuthPillAvatarLabel'>{0}</div>\n</span>"})();(function(){ku.maxFieldNameLength=254;ku.renameTemplate="\n        <div class='tabAuthRenameField'>\n          <div class='tab-rename-input-field-container'>\n            <input name='tab-rename-input-field' class='tab-rename-input-field' type='text' maxlength='"+254+"'/>\n          </div>\n          <div class='tab-dialog-status-msg'></div>\n          <div class='tab-dialog-actions-top-spacing'></div>\n        </div>"})();(function(){kt.debounceTimeoutMs=500})();(function(){kw.maxSheetNameLength=254;kw.cancelButtonTestID='cancel';kw.commitButtonTestID='commit';kw.$2=50;kw.$1='newSheetName';kw.renameTemplate="\n<div class='tabAuthRenameSheet'>\n    <div>\n        <input name='"+'newSheetName'+"' class='"+'newSheetName'+"' type='text' maxlength='"+254+"'/>\n    </div>\n    <div class='tab-dialog-status-msg'></div>\n    <div class='tab-dialog-actions-top-spacing'></div>\n</div>"})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-sheet',kp.$1);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-field',kp.$0)})();(function(){fR.fieldLabelClass='tab-schema-field-label';fR.fieldDomSelector=ss.formatString('.{0}','tab-schema-field');fR.selectedFieldDomSelector='.tab-schema-field-pill.selected, .'+'tab-schema-field-label'+'.selected';fR.fieldAreaDomSelector='.tab-schema-field-label-area';fR.selectedFieldTouchScreenClassName='tab-schema-field-pill-touchScreenSelected';fR.template=ss.formatString("<div class='{0}'>"+"<span class='tab-schema-field-expando'><div class='tab-schema-field-expando-icon'><div class='tabAuthHitTarget'></div></div></span>"+"<span class='tab-schema-field-label-area'>"+"<span class='tab-schema-field-icon-area'><div class='tab-schema-field-icon'></div></span>"+"<div class='tab-schema-field-pill'>"+"<div class='{1}'>"+"<div class='"+'tab-schema-field-label'+"'></div>"+"<div class='tab-schema-field-pill-menu-btn'>"+"<div class='tab-schema-field-pill-menu-icon'></div>"+'</div>'+'</div>'+'</div>'+'</span>'+"<div class='tab-schema-field-children'></div>"+'</div>','tab-schema-field','tab-schema-field-content')})();(function(){ho.hoverChanged='Hover'})();(function(){hm.$0="<span class='tabAdAreaDropSpot tabAdDropCell'>"+"<div class='tabAdAreaDropImage'></div>"+'</span>';hm.$1="<div class='tabLayerDropTarget'>"+"<div class='tabAdHeaderRow'>"+"<span class='tabAdDropTitle tabAdAxisCell'>"+"<div class='tabAdDropInstructionTextPre'></div>"+"<div class='tabAdDropLabel'></div>"+"<div class='tabAdDropInstructionTextPost'></div>"+'</span>'+'</div>'+'</div>'})();(function(){eH.dataSourceDomClassName='tab-dataSource';eH.dataSourceIconClassName='tab-schema-dataSourceIcon';eH.dataSourceLabelAreaClassName='tab-schema-dataSourceName';eH.dataSourceBrokenIndicatorAreaClassName='tab-schema-dataSourceBrokenIndicatorArea';eH.dataSourceBrokenIndicatorIconClassName='tab-schema-dataSourceBrokenIndicatorIcon';eH.dataSourceBrokenClassName='tab-schema-dataSourceBroken';eH.dataSourceMenuButtonClassName='tab-schema-dataSourceMenuButton';eH.dataSourceMenuIconClassname='tab-schema-dataSourceMenuIcon';eH.selectedDataSourceClassName='tab-schema-dataSourceSelected';eH.singleDataSourceClassName='tab-schema-singleDataSource';eH.selectedDataSourceTouchScreen='tab-dataSource-touchScreenSelected';eH.htmlTemplate="<div class='"+'tab-dataSource'+"'>"+"<div class='"+'tab-schema-dataSourceIcon'+"'></div>"+"<div class='"+'tab-schema-dataSourceName'+"'></div>"+"<div class='"+'tab-schema-dataSourceBrokenIndicatorArea'+"'>"+"<div class='"+'tab-schema-dataSourceBrokenIndicatorIcon'+"'></div>"+'</div>'+"<div class='"+'tab-schema-dataSourceMenuButton'+"'>"+"<div class='"+'tab-schema-dataSourceMenuIcon'+"'></div>"+'</div>'+'</div>'})();(function(){Q.$0="<div class='tabAnalyticsListHeader'>"+"<span class='tabAnalyticsListHeaderName'></span>"+'</div>'})();(function(){P.hoverTargetChanged='HoverTarget'})();(function(){K.$0="\n        <span class='tabAuthAnalyticsDragAvatar'>\n            <div class='tabAuthAnalyticsDragAvatarLabel'></div>\n        </span>"})();(function(){R.$0="<div class='tabAnalyticsListItem'>"+"<span class='tabAnalyticsListItemIcon'></span>"+"<span class='tabAnalyticsListItemName'></span>"+'</div>'})();(function(){M.$0="<span class='tabAdAxisDropSpotHolder'>"+"<span class='tabAdAxisDropSpot'></span>"+'</span>';M.$1="<div class='tabAdAxisRow'>"+"<span class='tabAdAxisName tabAdAxisCell'></span>"+'</div>'})();(function(){X.scrollDelay=100;X.$0=10})();(function(){N.$0="<span class='tabAdAreaDropSpot tabAdDropCell'>"+"<div class='tabAdAreaDropImage'></div>"+"<div class='tabAdAreaDropLabel'></div>"+'</span>';N.$1="<div class='tabAdDropTarget'>"+"<div class='tabAdHeaderRow'>"+"<span class='tabAdDropTitle tabAdAxisCell'>"+"<div class='tabAdDropInstructionTextPre'></div>"+"<div class='tabAdDropLabel'></div>"+"<div class='tabAdDropInstructionTextPost'></div>"+'</span>'+'</div>'+"<div class='tabAdHorizontalDivider'></div>"+"<div class='tabAdAxisHolder'>"+"<div class='tabAdAxisListScroller'>"+"<div class='tabAdAxisList'></div>"+"<div class='tabAdScrollHoverTop'></div>"+"<div class='tabAdScrollHoverBottom'></div>"+'</div>'+'</div>'+'</div>'})();(function(){U.$0="<div class='tabAnalyticsPane'></div>"})();(function(){O.dropTargetIdPrefix='tabAoDropTarget-';O.dropSpotDirectHoverClass='tabDirectHover';O.dropSpotIndirectHoverClass='tabIndirectHover'})();(function(){V.$1='.dashboardSpacer';tab.ObjectRegistry.registerType(V,V).call(null)})();(function(){W.$0='analytics'})();(function(){jm.publishToastLocation='publishToastLocation'})();(function(){ky.replaceZoneEvent='DashboardAuthoring_ReplaceZone';ky.columeName_CurrentZoneType='CurrentZoneType';ky.columeName_NewZoneType='NewZoneType';ky.columeName_IsFloating='IsFloatingZone';ky.columeName_CurrentDeviceLayout='DeviceLayoutType';ky.columeName_NumOfZonesInDashboard='NumOfZonesInDashboard';ky.columeName_IsSheetHidden='IsSheetHidden'})();(function(){et.fitWidthHeightStepperTestId='fit-width-height-stepper';et.$1={alignItems:'center',flexDirection:'row',marginLeft:26};et.$3={minWidth:80};et.$4={marginRight:6};et.$2={color:SharedWidgets.TabStyles.Colors.F7Disabled,marginRight:et.$4.marginRight}})();(function(){mJ.$1=0})();(function(){eU.$1={modifiedLayouts:[],autoGeneratedLayouts:[]};eU.$2=3})();(function(){mX.keyPrefix='zone-info-tree-node-'})();(function(){hr.$1='DeviceLayoutToggleButton'})();(function(){hJ.$0=400})();(function(){hC.$0=0})();(function(){hX.selectedLinePatternProperty='SelectedLinePattern'})();(function(){hW.$1='tabLinePattern';hW.linePatternPickerTextButtonClassName='tabLinePatternTextButton';tab.ObjectRegistry.registerType(hW,hW).call(null)})();(function(){lD.selectedStrokeWidthProperty='SelectedStrokeWidth'})();(function(){lC.$0='tabStrokeWidth';lC.spriteNamePrefix='strokewidth';lC.widthStart=1;lC.widthEnd=5})();(function(){hq.$0='tabLayoutBorderPicker'})();(function(){hA.$1=-9999;hA.$0=9999})();(function(){hB.$1=1;hB.$0=9999})();(function(){nj.$1=true;nj.$0=false})();(function(){hw.$1='size';hw.$0=1000})();(function(){hy.$0=1000})();(function(){hz.layoutTreeSectionKey='layout-tree-section';hz.selectedItemSectionKey='selected-item-section';hz.initialSelectedItemSectionSizePercent=65;hz.initialLayoutTreeSectionSizePercent=100-65;hz.$1='layout';hz.layoutPaneClass='tabAuthLayoutPane';hz.$0=45})();(function(){nc.$1=7;nc.$0=5})();(function(){fE.$0="<div class='"+'tabEmptyDashboardContainer'+"'>"+"<div class='"+'tabEmptyDashboardMessage'+"'></div>"+"<div class='"+'tabEmptyDashboardSubMessage'+"'></div>"+'</div>'})();(function(){tab.ObjectRegistry.registerType(fF,fF).call(null)})();(function(){bW.$0="\n<div class='tabAuthToolbar'>\n    <div class='tabAuthToolbarButtonArea'></div>\n    <div class='tabAuthToolbarSpacerArea'></div>\n    <div class='tabAuthToolbarShowMeArea'></div>\n</div>"})();(function(){bU.moreIconClass='tabToolbarMoreIcon';bU.openOnDesktopIconClass='tabToolbarOpenOnDesktopIcon';bU.$3='More';bU.$6=50;bU.$7=new tab.UndoKeyboardShortcut;bU.$4=new tab.RedoKeyboardShortcut;bU.$5=new kl;bU.$1=null;bU.$2=new hc;if(tab.FeatureFlags.isEnabled('WebKeyboardShortcutsExtended')){bU.$1=new fu}})();(function(){bJ.$0="\n            <span class='"+'tabAuthTab'+"'>\n                <span class='"+'tabColor'+"'></span>\n                <span class='"+'rightEdge'+"'></span>\n                <span class='"+'dragMarker'+"'></span>\n                <span class='"+'tabAuthTabLabel'+"'></span>\n                <div class='"+'tabAuthDropHandlerContainer'+"'>\n                    <div class='"+'tabAuthDropHandlerLeft'+"'></div>\n                    <div class='"+'tabAuthDropHandlerRight'+"'></div>\n                </div>\n            </span>";bJ.iconTemplate="<span class='tabAuthTabIcon'></span>"})();(function(){bE.disabledTabClass='tabAuthDisabledTab';bE.dataTabIconClass='tabAuthDataTabIcon';bE.dataTabIconActiveClass='tabAuthDataTabIconActive';bE.dataTabHiddenClass='dataTabHidden';bE.$2="\n            <div class='tabAuthTabNav'>{0}\n                <div class='"+'tabAuthTabNavTabs'+"'>\n                    <div class='tabAuthTabNavTabContainer'></div>\n                    <div class='tabAuthTabCreationButtonsContainer'></div>\n                </div>\n                <div class='tabAuthLeftScrollDropTarget'></div>\n                <div class='tabAuthTabNavControls'>\n                    <div class='tabAuthTabNavButton tabAuthTabNavLeftButton'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                    <div class='tabAuthTabNavButton tabAuthTabNavRightButton'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                    <div class='tabAuthTabNavButton tabAuthTabNavMenuButton'><div class='tabIcon'><div class='tabAuthHitTarget'></div></div></div>\n                </div>\n            </div>";bE.$1="\n            <div class='tabAuthTabDSTab "+'tabAuthTab'+"' title='{0}'>\n                <span class='"+'rightEdge'+"'></span>\n                <span class='tabAuthTabIcon "+'tabAuthDataTabIcon'+"'></span><span class='tabAuthTabLabel'>{0}</span>\n            </div>";var nk=ss.formatString("\n            <div class='tabAuthTabDSTab tabAuthTab' title='{0}'>\n                <span class='rightEdge'></span>\n                <span class='tabAuthTabIcon tabAuthDataTabIcon'></span><span class='tabAuthTabLabel'>{0}</span>\n            </div>",tab.Strings.DataTabName);bE.$2=ss.formatString(bE.$2,nk)})();(function(){fS.$1=50;fS.$0=250})();(function(){bo.$6='userMenu';bo.$1='logOnItem';bo.$4='server-autosave';bo.$3=62;bo.$2=40;bo.$5=50;bo.$0=220})();(function(){mg.$0="<span class='tabTypeInPill' title=''>"+"<div class='tabTypeInPillCmHolder'></div>"+'</span>'})();(function(){ir.htmlTemplate="\n<div class='tabAuthLayerEncoding'>\n    <div class='tabAuthLayerEncodingPrimitivesContainer'>\n        <div class='tabAuthLayerEncodingPrimitives'></div>\n    </div>\n    <div class='tabAuthLayerEncodingButtonRow'></div>\n    <div class='tabAuthLayerEncodingButtonRow'></div>\n    <div class='tabAuthLayerEncodingShelf'></div>\n</div>"})();(function(){fP.$0='tabDropInvited'})();(function(){bl.tabAreaSelector='.tabAuthTabArea'})();(function(){bF.$1='inputTabFocused';bF.$2=50;tab.ObjectRegistry.registerType(bF,bF).call(null)})();(function(){dN.$4=[]})();(function(){kZ.$4='data';kZ.selectedFieldProperty='SelectedField';kZ.showDimMeasSeparatorClassName='showDroppable';kZ.showContainerOutlineClassName='showMoveToZone';kZ.$5=300;kZ.sectionsInOrder=[4,5,6,0,1,2,3]})();(function(){hn.dropTargetIdPrefix='tabLayersDropTarget';hn.dropSpotDirectHoverClass='tabDirectHover';hn.dropSpotIndirectHoverClass='tabIndirectHover'})();(function(){eF.$9='blend-icon-element';eF.$8='tab-schema-blending-icon';eF.$7='tab-schema-blending-candidate-icon';eF.$a='DataSource';eF.emptySectionClass='tab-schema-empty-section';eF.visibleFieldElemQuery='.'+'tab-schema-field'+':visible';eF.$f=200;eF.$g=25;eF.$h=10;eF.$c=21;eF.$e=40+80;eF.$d=30+80+120;eF.$b=30+30+42+230+30+20})();(function(){fq.showMeBarsIconClass='tabAuth-ShowMe_BarsIcon';fq.showMePillClass='tabAuthPillShowMe';fq.showMeVizDropAreaClass='showMeVizDropArea';fq.showMeVizDropAreaBorderClass='showMeDropAreaBorder'})();(function(){ix.propertyCurrentLayer='CurrentLayer'})();(function(){gr.clearButtonClass='tabAuthFormatPaneClearButton';gr.formatPaneShownClass='tabAuthFormatPaneShown';tab.ObjectRegistry.registerType(gr,gr).call(null)})();(function(){gs.$0='format'})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.CloseAuthoringCmd.cmdId,cL)})();(function(){bY.$1$1=null})();(function(){bX.$6='newWorkbook';bX.$5='editDatasource'})();(function(){bq.$0=['web_author_who.htm','web_author.htm','web_author_build_view.htm'];bq.$g='Show Grid'})();(function(){mk.$8='worksheetMenu';mk.$4='dashboardMenu';mk.$3='analysisMenu';mk.$6='mapMenu';mk.$5='formatMenu';mk.$7='windowMenu'})();(function(){iE.$3='fileMenu';iE.$2='dataMenu';iE.$4='helpMenu';iE.$5='tabHelpContextMenu'})();(function(){bZ.$1=new ss.Lazy(function(){return new tab.SheetThumbnailCache})})();(function(){eg.$1='dashboard';eg.$0='tabAuthDashboardPane'})();(function(){dL.$1='<div></div>';dL.$0='tv_drag';dL.$2='tvdrag_marquee'})();(function(){fV.$0=5})();(function(){tab.ObjectRegistry.registerType(mS,mS).call(null)})();(function(){dS.$0=0})();(function(){var nk=[];nk.push('bitmap');nk.push('color');nk.push('empty');nk.push('dashboard-object');nk.push('filter');nk.push('highlighter');nk.push('map');nk.push('paramctrl');nk.push('set-membership');nk.push('shape');nk.push('size');nk.push('slide');nk.push('text');nk.push('title');nk.push('viz');nk.push('web');ng.$1=nk})();(function(){ej.dashboardClass='tab-dashboard';ej.$1='tab-dashDragDrop';ej.$2='tab-dashSelection';tab.ObjectRegistry.registerType(ej,ej).call(null)})();(function(){bg.$1='tab-dashDragDrop';bg.dsdGlassClass='tab-dsdGlass';bg.dashboardPortPreviewHostClass='tab-dashboard-port-preview-host';tab.ObjectRegistry.registerType(bg,bg).call(null)})();(function(){tab.ObjectRegistry.registerType(fC,fC).call(null)})();(function(){cB.cardViewClassNamePrefix='tabAuthCardType-';tab.ObjectRegistry.registerType(cB,cB).call(null)})();(function(){ck.$0='.CodeMirror-hints';ck.autoCompleteDebounceTimeout=250})();(function(){cp.replaceableMarkerClassname='tabTok_replace';cp.nonReplaceableMarkerClassname='tabTok_noreplace';cp.$1='tabPillBelowCursor';cp.$0='tabActiveDropTarget'})();(function(){cr.dropInvitedClassName='tabDropInvited';cr.$5='tabTok_';cr.$4='tabTok_'+'error'})();(function(){co.$1='.CodeMirror-vscrollbar';co.$2=300;tab.ObjectRegistry.registerType(co,co).call(null)})();(function(){ca.titleClass='tab-tvTitle';ca.vizZoneClass='tabZone-viz';ca.vizViewClass='tab-tvView'})();(function(){jg.$0='tabPill'})();(function(){cs.validationDelay=250;cs.$0='tab-schema-datasource-icon'})();(function(){mh.$3=30;mh.$1='tabAnimationTransition';mh.$2='Enter';tab.ObjectRegistry.registerType(mh,mh).call(null)})();(function(){ln.smallTypeInPillWidth=108;ln.defaultTypeInPillWidth=250;ln.$1=12;ln.$0=150;ln.$2=50;ln.$3='tabAuthPillsHorizOverflow'})();(function(){it.$2='tabAuthEncodingType';it.$1=null;tab.ObjectRegistry.registerType(it,it).call(null);it.$1={};it.$1['color-encoding'.toString()]=1;it.$1['size-encoding'.toString()]=2;it.$1['text-encoding'.toString()]=3;it.$1['level-of-detail-encoding'.toString()]=4;it.$1['tooltip-encoding'.toString()]=5})();(function(){i.$0="\n<div class='tabPane'>\n    <div class='tabPaneTitle'></div>\n    <div class='tabPaneBody'></div>\n</div>"})();(function(){j.$0="<div class='refLineConstantValueEditor'>"+"<span class='refLineConstantValueEditorTitle'></span>"+"<input class='refLineConstantValueEditorInput' type='text'/>"+'</div>'})();(function(){k.$0="\n<div class='tabTabbedPane'>\n    <div class='tabTabLabels'></div>\n    <div class='tabTabContentArea'></div>\n</div>"})();(function(){A.$0="<div class='tabAccordion'>\n            <div class='tabAccordionItems'></div>\n            <div class='layersDropTargetsContainer'></div>\n            <div class='layersDropTargetsGlass'></div>\n            </div>"})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IAliasDialogModule).call(null,'doc:edit-aliases-dialog-notification-event',function(nk){return nk.showDialog()})})();(function(){ba.$1='@tableau/animation-settings-side-pane';tab.WidgetPlugins.registerWidgetPluginModule(ba.$1,'animation-settings-side-pane')})();(function(){bc.id='animation-side-pane'})();(function(){fn.$0=null})();(function(){bt.$1=null})();(function(){bj.$b=null;bj.$c=null;if(!tsConfig.isUnitTestRun&&!tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){bj.init()}else{var nk=null;nk=function(nl,nm){bj.init();tab.Application.remove_starting(nk)};tab.Application.add_starting(nk)}})();(function(){cc.devConfigCookieName='AutofitDevConfigurationDialogCookie'})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IGroupDialogModule).call(null,'doc:update-categorical-bin-edit-dialog-event',function(nk){return nk.showGroupDialog()})})();(function(){cG.$1=null;cG.$0=null})();(function(){tab.StartupUtils.callOnceAfterInitialBootstrap(function(){var nk=null;tab.ApplicationModel.get_holder().addEventBinding(function(nl){nk=new cH(nl.modelInstance(tab.CategoricalColorEditorDialogModel).call(nl),new cG)},function(nl){nk=tab.MiscUtil.dispose$1(nk)})})})();(function(){var nk=null;tab.StartupUtils.callOnceAfterInitialBootstrap(function(){tab.ApplicationModel.get_holder().addEventBinding(function(nl){nk=new cN(nl.modelInstance(tab.CloseDataSourceErrorDialogModel).call(nl))},function(nl){nk=tab.MiscUtil.dispose$1(nk)})})})();(function(){dg.$0="<span class='tabColorPalettePage'>\n    <div class='tabColorSpecialPalette tabColorAutomaticPalette tabColorPalette'>\n        <div class='tabPaletteBorder'></div>\n    </div>\n    <div class='tabColorPalettePageColumns'>\n        <span class='tabColorPalettePageColumn0'></span>\n        <span class='tabColorPalettePageColumn1'></span>\n    </div>\n</span>";dg.specialPaletteClass='tabColorSpecialPalette';dg.colorPaletteClass='tabColorPalette'})();(function(){dh.selectedClass='tabPaletteSelected';dh.highlightClass='tabPageHighlight';dh.warningPageLinkClass='tabPaletteWarningPageLink';dh.warningPageClass='tabColorPaletteWarning';dh.$0="<div class='tabColorPalettePicker'>\n        <div class='tabAuthLeftButtonArea'>\n            <div class='tabAuthPalettePickerLeftButton'></div>\n        </div>\n        <div class='tabColorPalettePickerWindow'>\n            <div class='tabColorPalettePickerPageContainer'></div>\n        </div>\n        <div class='tabAuthRightButtonArea'>\n            <div class='tabAuthPalettePickerRightButton'></div>\n        </div>\n        <div class='tabPalettePageControlsArea'>\n            <div class='tabPalettePageControls'></div>\n        </div>\n    </div>"})();(function(){dj.groupsPerPage=2;dj.$1=null;dj.currentPageProperty='CurrentPage';dj.selectedPaletteProperty='SelectedPalette';dj.pageRemovedProperty='PageRemoved';dj.$1={};dj.$1['palette-flag-none']=0;dj.$1['palette-flag-custom']=1<<0;dj.$1['palette-flag-not-quantitative']=1<<1;dj.$1['palette-flag-not-categorical']=1<<2;dj.$1['palette-flag-not-reference-band']=1<<3;dj.$1['palette-flag-not-boxplot']=1<<4;dj.$1['palette-flag-not-filled-map-light']=1<<5;dj.$1['palette-flag-not-filled-map-dark']=1<<6;dj.$1['palette-flag-legacy']=1<<7})();(function(){tab.ObjectRegistry.registerType(di,di).call(null)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-confirmation',dv.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-hide-object',dv.$1)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.CopyZoneToWebClipboardCmd.cmdId,dF)})();(function(){dU.$1=5;dU.$0=1000})();(function(){dV.$0=100})();(function(){tab.DeferredNotifications.registerHandler('doc:dashboard-grid-dialog-event',dW.$0)})();(function(){var nk=tab.WebCommandRegistry.get_instance();var nl=new tab.CommandLocalOptions;nl.blocking='none';nl.commandWaiter=new eE;nk.registerCommandLocalOptions({ns:'tabdoc',cmd:'schedule-data-source-data-rebuild'},nl);var nm=tab.WebCommandRegistry.get_instance();var nn=new tab.CommandLocalOptions;nn.blocking='none';nm.registerCommandLocalOptions({ns:'tabdoc',cmd:'build-data-preview-area-context-menu'},nn);var no=tab.WebCommandRegistry.get_instance();var np=new tab.CommandLocalOptions;np.blocking='none';no.registerCommandLocalOptions({ns:'tabdoc',cmd:'build-schema-change-data-type-menu'},np);var nq=tab.WebCommandRegistry.get_instance();var nr=new tab.CommandLocalOptions;nr.blocking='none';nq.registerCommandLocalOptions({ns:'tabdoc',cmd:'data-preview-area-command-cancel'},nr);var ns=tab.WebCommandRegistry.get_instance();var nt=new tab.CommandLocalOptions;nt.blocking='none';ns.registerCommandLocalOptions({ns:'tabdoc',cmd:'launch-relationship-editor'},nt)})();(function(){eG.$2=null;tab.DeferredNotifications.registerHandler('doc:update-data-source-data-event',eG.$0)})();(function(){eI.$2=null;tab.DeferredNotifications.registerHandler('doc:data-source-update-needed-event',eI.$0)})();(function(){eK.$3=null;tab.WorldUpdateInterceptor.get().add_onBootstrapResponse(eK.$0)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-delete-sheet',eP.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.DestroyVQLSessionCmd.cmdId,eQ)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.DownloadWorkbookCmd.cmdId,fm)})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-add-drill-path',fr.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-drill-path',fr.$1)})();(function(){fw.$3=null;tab.CommandRedirectRegistry.registerHandler('command-redirect-edit',fw.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-edit-web-zone-url',fw.$1)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.EditWorkbookInDesktopCmd.cmdId,fA);var nk=new Object;nk.nonMacControl='required';var nl=nk;var nm=new KeyboardShortcuts.KeyCombo('o',nl);var nn=new Object;nn.command='required';nn.alt='required';var no=nn;var np=new KeyboardShortcuts.KeyCombo('o',no);var nq=new KeyboardShortcuts.KeyCombos(np,nm);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(new(ss.makeGenericType(tab.WebCommandKeyboardShortcut$2,[fA,Object]))(nq,true,true,null,null,null,null))})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-add-field-folder',fN.$0);tab.CommandRedirectRegistry.registerHandler('command-redirect-rename-field-folder',fN.$1)})();(function(){gt.$1='@tableau/formatting-pane';gt.$2=0;tab.WidgetPlugins.registerWidgetPluginModule(gt.$1,'formatting-pane')})();(function(){gw.id='formatting-side-pane';gw.$1=null;if(tab.FeatureFlags.isEnabled('HybridFormatPane')){gw.$1=new tab.RightHybridSidePaneProxyHelper(gw.id,gw.openCallback,gw.updateCallback,gw.closeCallback,'doc:open-formatting-side-pane-event','doc:update-formatting-side-pane-event','doc:close-formatting-side-pane-event')}})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-format-workbook',gx.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.HideZoneWithPreviewCmd.cmdId,gH)})();(function(){ie.$1='@tableau/map-layers-pane';tab.WidgetPlugins.registerWidgetPluginModule(ie.$1,'map-layers-pane')})();(function(){ih.id='map-layers-pane'})();(function(){hO.$1=new bc;hO.$2=new ih})();(function(){ii.type='Viz_MapOptions';ii.optionName='MapOptionName';ii.optionSetTo='OptionSetTo'})();(function(){ij.$0='mapOptionsCheckboxPropsList';ij.$3='mapOptionsUnitsContainerProps';ij.$2='mapOptionsDropdownLabelProps';ij.$1=200})();(function(){tab.DeferredNotifications.registerHandler('doc:map-options-dialog-event',ik.$0)})();(function(){iv.$0="<div class='tabAuthMarksContent'></div>"})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-notification',iQ.$0)})();(function(){iR.$2=150;tab.CommandRedirectRegistry.registerHandler('command-redirect-number-format',iR.$0)})();(function(){tab.DeferredNotifications.registerHandlerFromModule(tab.IBinDialogModule).call(null,'doc:update-numeric-bin-edit-dialog-event',function(nk){return nk.showDialog()})})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFormatWorkbookCmd.cmdId,mD)})();(function(){tab.DeferredNotifications.registerHandler('doc:open-format-workbook-side-pane-event',function(){return new iT})})();(function(){jh.htmlTemplate="\n<span class='tabAuthShelfPill tabAuthPillDragSource'>\n    <span class='tabAuthPillExternalIcon'></span>\n    <span class='tabAuthPillEncodingType'></span>\n    <span class='tabAuthPillContent'>\n        <div class='tabAuthPillDrillIcon'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillLabel'>{0}</div>\n        <div class='tabAuthPillMenuBtn'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillIcons'></div>\n    </span>\n</span>"})();(function(){jo.$0=5})();(function(){jr.$0=500})();(function(){tab.DeferredNotifications.registerHandler('doc:web-quantitative-color-dialog-event',function(){var nk=new tab.QuantitativeColorEditorDialogModel;new jr(nk);return nk})})();(function(){jB.$1=988;jB.$0='.dashboardSpacer'})();(function(){tab.CommandRedirectRegistry.registerHandler('command-redirect-quick-edit',jD.$0)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.RemoveZoneFromDeviceLayoutWithPreviewCmd.cmdId,kn)})();(function(){tab.DeferredNotifications.registerHandler('doc:web-save-datasource-dialog-event',kL.launchDialog)})();(function(){kM.$1=null;kM.$0='server-autosave-publish'})();(function(){lf.$0="<div class='tabAuthShapePicker'><div class='tabAuthShapePickerRows'></div></div>"})();(function(){lA.valueProperty='Value';lA.enabledProperty='IsEnabled';lA.incrementEnabledProperty='IsIncrementEnabled';lA.decrementEnabledProperty='IsDecrementEnabled'})();(function(){lz.incrementButtonClassName='tabDecrementButton';lz.decrementButtonClassName='tabIncrementButton';tab.ObjectRegistry.registerType(lz,lz).call(null)})();(function(){tab.ObjectRegistry.registerType(lF,lF).call(null)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.ToggleFreeFormZoneWithPreviewCmd.cmdId,ma)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.ToggleINDJoinSemanticsWrapperCmd.cmdId,mb)})();(function(){ml.$0="<div class='tabAuthVizSummaryBadge'><div class='tabAuthIcon'></div><div class='tabAuthLabel'></div></div>"})();(function(){mm.$1=ss.formatString("<div class='tabAuthVizSummary {0}'>\n<div class='tabAuthVizSummaryArea tabAuthVizSummarySchema'>\n</div>\n<div class='tabAuthVizSummaryArea tabAuthVizSummaryShelf'>\n    <div class='tabAuthVizSummaryDivider'></div>\n</div>\n<div class='tabAuthVizSummaryArea tabAuthVizSummaryLayers'>\n    <div class='tabAuthVizSummaryDivider'></div>\n</div>\n<div class='tabAuthBorderRight'></div>\n</div>",'statusBar')})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebDashboardDesignCmd.cmdId,mr)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebEditObjectCaptionCmd.cmdId,mt)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebExportPowerPointCmd.cmdId,mz)})();(function(){var nk=tab.WebCommandRegistry.get_instance();var nl=new tab.CommandLocalOptions;nl.blocking='none';nl.commandWaiter=new mA;nk.registerCommandLocalOptions({ns:'tabdoc',cmd:'categorical-filter-set-range-type-deferred'},nl);var nm=tab.WebCommandRegistry.get_instance();var nn=new tab.CommandLocalOptions;nn.blocking='none';nn.commandWaiter=new mA;nm.registerCommandLocalOptions({ns:'tabdoc',cmd:'categorical-filter-init-with-domain'},nn)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFilterDialogDomainCancelCmd.cmdId,mB)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebFormatPaneCmd.cmdId,mC)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebRemoveShelfPillCmd.cmdId,mE)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebShowMeCmd.cmdId,mG)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WebToolbarMoreCmd.cmdId,mH)})();(function(){tab.WebCommandRegistry.get_instance().registerCommand(tab.WhereDidSaveGoCmd.cmdId,mL)})()})();;
/*! BEGIN ResizeHeadersModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlresizeheadersmodule');var b=global.tab.AxisResizerManager=ss.mkType(a,'tab.AxisResizerManager',function(o,p){this.domElements=null;this.visualID=null;this.activeResizerObjects=null;this.domElements=o;this.visualID=p;this.activeResizerObjects=[]},{setAxisResizers:function(){if(!tsConfig.is_authoring||tsConfig.current_sheet_type==='story'){return}this.$1();var o=tab.DomUtil.getRectXY(this.domElements.topLeftSpacer);var p=o.w;var q=o.h;var r=tab.DomUtil.getRectXY(this.domElements.topRightSpacer).w;var s=tab.DomUtil.getRectXY(this.domElements.bottomLeftSpacer).h;var t=tab.DomUtil.getRectXY(this.domElements.view);var u=t.w;var v=t.h;var w=q+v+s;var x=p+u+r;var y=tab.DomUtil.getRectXY(this.domElements.topAxis);var z=tab.DomUtil.getRectXY(this.domElements.rightAxis);var A=tab.DomUtil.getRectXY(this.domElements.bottomAxis);var B=tab.DomUtil.getRectXY(this.domElements.leftAxis);var C=y.w;var D=z.h;var E=A.w;var F=B.h;var G=C>0&&E>0;var H=D>0&&F>0;if(C>0){var I=p+C+r;var J=-p;var K=y.h;var L=-k.getAxisResizerMinimumRunDistance(K);var M=k.getAxisResizerMaximumRunDistance(v,w,K,G);var N=new tab.ResizerViewModelParams(this.visualID,J,I,false,L,M);this.$0(N,'topaxis')}if(D>0){var O=q+D+s;var P=-q;var Q=z.w;var R=-k.getAxisResizerMaximumRunDistance(u,x,Q,H);var S=k.getAxisResizerMinimumRunDistance(Q);var T=new tab.ResizerViewModelParams(this.visualID,P,O,true,R,S);this.$0(T,'rightaxis')}if(E>0){var U=p+E+r;var V=-p;var W=A.h;var X=-k.getAxisResizerMaximumRunDistance(v,w,W,G);var Y=k.getAxisResizerMinimumRunDistance(W);var Z=new tab.ResizerViewModelParams(this.visualID,V,U,false,X,Y);this.$0(Z,'bottomaxis')}if(F>0){var ba=q+F+s;var bb=-q;var bc=B.w;var bd=-k.getAxisResizerMinimumRunDistance(bc);var be=k.getAxisResizerMaximumRunDistance(u,x,bc,H);var bf=new tab.ResizerViewModelParams(this.visualID,bb,ba,true,bd,be);this.$0(bf,'leftaxis')}},$0:function(o,p){var q=new c(o,p);var r=new m(q);switch(p){case'topaxis':{k.appendResizerElementToDom(this.domElements.topAxis,r);break}case'rightaxis':{k.appendResizerElementToDom(this.domElements.rightAxis,r);break}case'bottomaxis':{k.appendResizerElementToDom(this.domElements.bottomAxis,r);break}case'leftaxis':{k.appendResizerElementToDom(this.domElements.leftAxis,r);break}default:{break}}this.activeResizerObjects.push(r.resizerObject);EventUtils.DragDropManager.attachDragSource(r.resizerObject,r)},$1:function(){while(!tab.MiscUtil.isNullOrEmpty$2(this.activeResizerObjects)){var o=this.activeResizerObjects.pop();EventUtils.DragDropManager.removeDragSource(o);o.parent().remove()}},dispose:function(){this.$1()}});var c=global.tab.AxisResizerViewModel=ss.mkType(a,'tab.AxisResizerViewModel',function(o,p){this.$3$1=null;n.call(this,o);this.set_axisType(p)},{get_axisType:function(){return this.$3$1},set_axisType:function(o){this.$3$1=o},get_isInvertedResize:function(){return this.get_axisType()==='rightaxis'||this.get_axisType()==='bottomaxis'},get_isFolded:function(){return this.get_axisType()==='rightaxis'||this.get_axisType()==='topaxis'},get_cssClassName:function(){return k.getAxisResizerCssClassName(this.get_axisType())},sendResizeCommand:function(o){var p=(this.get_isInvertedResize()?-o:o);if(k.isSizeDifferenceOverThreshold(o)){var q=new tab.ResizeAxisRegionCmd;q.c['visualIdPresModel']=this.get_visualID();q.c['sizeDelta']=p|0;q.c['isXAxis']=!this.get_isXResizer();q.c['isFolded']=this.get_isFolded();q.set_uiBlocking('immediately');q.invoke()}}});var d=global.tab.CellResizerManager=ss.mkType(a,'tab.CellResizerManager',function(o,p,q){this.$9=null;this.$a=null;this.$7=0;this.$8=0;this.cellHeightResizerViews=null;this.cellWidthResizerViews=null;this.rowHeaderArea=null;this.columnHeaderArea=null;this.viewModel=null;this.rowHeaderArea=p;this.columnHeaderArea=q;this.viewModel=o;this.viewModel.add_updateCellResizerViews(ss.mkdel(this,this.handleCellResizerUpdate));this.$2();this.$9=_.debounce(ss.mkdel(this,this.scrollX),500);this.$a=_.debounce(ss.mkdel(this,this.scrollY),500)},{dispose:function(){this.$3()},scrollXWithTimeout:function(o){this.$9(o)},scrollYWithTimeout:function(o){this.$a(o)},scrollX:function(o){this.$7=o;this.$5(o,this.cellWidthResizerViews,'left',this.columnHeaderArea.width())},scrollY:function(o){this.$8=o;this.$5(o,this.cellHeightResizerViews,'top',this.rowHeaderArea.height())},$5:function(o,p,q,r){_.each(p,function(s,t){var u=s.get_viewModel().get_resizerOffset()*(t+1)-ss.idiv(10,2)-ss.imod(o,s.get_viewModel().get_resizerOffset());s.resizerObject.css(q,u+'px');var v=u<r;s.resizerObject.toggle(v)})},handleCellResizerUpdate:function(){this.$3();this.$2();if(ss.isValue(this.cellHeightResizerViews)){this.$0(this.cellHeightResizerViews,false)}if(ss.isValue(this.cellWidthResizerViews)){this.$0(this.cellWidthResizerViews,true)}},$2:function(){this.cellHeightResizerViews=null;if(ss.isValue(this.viewModel.get_cellHeightResizerVM())){this.cellHeightResizerViews=[];var o=ss.idiv(this.rowHeaderArea.height()|0,this.viewModel.get_resizeInfo().cellSize.get_height())+1;for(var p=0;p<o;p++){var q=new m(this.viewModel.get_cellHeightResizerVM());this.cellHeightResizerViews.push(q)}}this.cellWidthResizerViews=null;if(ss.isValue(this.viewModel.get_cellWidthResizerVM())){this.cellWidthResizerViews=[];var r=ss.idiv(this.columnHeaderArea.width()|0,this.viewModel.get_resizeInfo().cellSize.get_width())+1;for(var s=0;s<r;s++){var t=new m(this.viewModel.get_cellWidthResizerVM());this.cellWidthResizerViews.push(t)}}},$0:function(o,p){var q=(p?this.columnHeaderArea:this.rowHeaderArea);var r=this.columnHeaderArea.height();var s=this.rowHeaderArea.width();var t=(p?(r|0):(s|0));var u=(p?this.columnHeaderArea.width():this.rowHeaderArea.height());var v=(p?this.rowHeaderArea.height():this.columnHeaderArea.width());for(var w=0;w<o.length;w++){var x=o[w];var y=t-x.get_viewModel().get_resizerLength();var z=(p?y:this.$1(x,this.$8,w));var A=(p?this.$1(x,this.$7,w):y);var B=(p?A:z);var C=B<u;x.resizerObject.toggle(C);this.$6(x,p,v);var D={left:A+'px',top:z+'px',width:(p?(10+'px'):(x.get_viewModel().get_resizerLength()+'px')),height:(p?(x.get_viewModel().get_resizerLength()+'px'):(10+'px'))};x.resizerObject.css(D);k.appendResizerElementToDom(q,x);EventUtils.DragDropManager.attachDragSource(x.resizerObject,x)}},$1:function(o,p,q){var r=o.get_viewModel().get_resizerOffset()*(q+1);r-=ss.idiv(10,2);r-=ss.imod(p,o.get_viewModel().get_resizerOffset());return r},$6:function(o,p,q){if(p){o.get_resizeTemplate().resizer.height(o.get_viewModel().get_resizerLength()+q)}else{o.get_resizeTemplate().resizer.width(o.get_viewModel().get_resizerLength()+q)}},$3:function(){if(ss.isValue(this.cellHeightResizerViews)){this.$4(this.cellHeightResizerViews)}if(ss.isValue(this.cellWidthResizerViews)){this.$4(this.cellWidthResizerViews)}},$4:function(o){for(var p=0;p<o.length;p++){var q=o[p];EventUtils.DragDropManager.removeDragSource(q.resizerObject);q.resizerObject.parent().remove()}}});var e=global.tab.CellResizerManagerViewModel=ss.mkType(a,'tab.CellResizerManagerViewModel',function(o,p){this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$0(o);this.$6=p;this.get_resizeInfo().add_resizeInfoUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_resizeInfo().remove_resizeInfoUpdated(ss.mkdel(this,this.$3))})));this.$5()},{add_updateCellResizerViews:function(o){this.$2$1=ss.delegateCombine(this.$2$1,o)},remove_updateCellResizerViews:function(o){this.$2$1=ss.delegateRemove(this.$2$1,o)},get_resizeInfo:function(){return this.$2$2},$0:function(o){this.$2$2=o},get_cellWidthResizerVM:function(){return this.$2$3},$1:function(o){this.$2$3=o},get_cellHeightResizerVM:function(){return this.$2$4},$2:function(o){this.$2$4=o},$3:function(){this.$5();this.$2$1()},$5:function(){this.$2(null);this.$1(null);if(this.get_resizeInfo().get_areCellHeightsAdjustable()){this.$2(this.$4(this.get_resizeInfo().get_rowHeaders()[this.get_resizeInfo().get_rowHeaders().length-1],false))}if(this.get_resizeInfo().get_areCellWidthsAdjustable()){this.$1(this.$4(this.get_resizeInfo().get_columnHeaders()[this.get_resizeInfo().get_columnHeaders().length-1],true))}},$4:function(o,p){var q=(p?o.get_height():o.get_width());var r=(p?o.get_width():o.get_height());var s=(p?-k.getHeaderResizerMinimumRunDistance(o.get_width()):-k.getHeaderResizerMinimumRunDistance(o.get_height()));var t=new tab.ResizerViewModelParams(this.$6,r,q,p,s,2147483647);var u=new f(t,o);return u}});var f=global.tab.CellResizerViewModel=ss.mkType(a,'tab.CellResizerViewModel',function(o,p){this.$6=null;n.call(this,o);this.$6=p},{get_cssClassName:function(){return(this.get_isXResizer()?'tab-tvCellWidthResizer':'tab-tvCellHeightResizer')},get_fieldName:function(){return this.$6.get_fieldName()},sendResizeCommand:function(o){if(k.isSizeDifferenceOverThreshold(o)){var p=new tab.ResizeCellWebCmd;p.c['visualIdPresModel']=this.get_visualID();p.c['baseCoord']=0|0;p.c['isXAxis']=this.get_isXResizer();p.c['isFolded']=false;p.c['size']=o+(this.get_isXResizer()?this.$6.get_width():this.$6.get_height())|0;p.invoke()}}});var g=global.tab.HeaderResizerManager=ss.mkType(a,'tab.HeaderResizerManager',function(o,p,q){this.rowHeaderResizerViews=null;this.colHeaderResizerViews=null;this.rowHeaderArea=null;this.columnHeaderArea=null;this.viewModel=null;this.rowHeaderArea=p;this.columnHeaderArea=q;this.viewModel=o;this.viewModel.add_updateResizerViews(ss.mkdel(this,this.handleResizerUpdate));this.$1()},{handleResizerUpdate:function(){if(tsConfig.is_authoring){this.$2();this.$1();if(ss.isValue(this.rowHeaderResizerViews)){this.$0(this.rowHeaderResizerViews,true,0)}if(ss.isValue(this.colHeaderResizerViews)){var o=(this.columnHeaderArea.height()|0)-this.viewModel.get_totalColumnHeadersHeight();this.$0(this.colHeaderResizerViews,false,o)}}},$2:function(){if(ss.isValue(this.rowHeaderResizerViews)){this.$3(this.rowHeaderResizerViews)}if(ss.isValue(this.colHeaderResizerViews)){this.$3(this.colHeaderResizerViews)}},$3:function(o){for(var p=0;p<o.length;p++){var q=o[p];EventUtils.DragDropManager.removeDragSource(q.resizerObject);q.resizerObject.parent().remove()}},$1:function(){this.rowHeaderResizerViews=null;if(!tab.MiscUtil.isNullOrEmpty$2(this.viewModel.get_rowHeaderResizerVMs())){this.rowHeaderResizerViews=[];var o=this.viewModel.get_rowHeaderResizerVMs();for(var p=0;p<o.length;p++){var q=o[p];var r=new m(q);this.rowHeaderResizerViews.push(r)}}this.colHeaderResizerViews=null;if(!tab.MiscUtil.isNullOrEmpty$2(this.viewModel.get_columnHeaderResizerVMs())){this.colHeaderResizerViews=[];var s=this.viewModel.get_columnHeaderResizerVMs();for(var t=0;t<s.length;t++){var u=s[t];var v=new m(u);this.colHeaderResizerViews.push(v)}}},$0:function(o,p,q){var r=(p?this.rowHeaderArea:this.columnHeaderArea);for(var s=0;s<o.length;s++){var t=o[s];k.appendResizerElementToDom(r,t);var u={left:(p?(t.get_viewModel().get_resizerOffset()-ss.idiv(10,2)+'px'):'0px'),top:(p?'0px':(t.get_viewModel().get_resizerOffset()+q-ss.idiv(10,2)+'px')),width:(p?(10+'px'):(t.get_viewModel().get_resizerLength()+'px')),height:(p?(t.get_viewModel().get_resizerLength()+'px'):(10+'px'))};t.resizerObject.css(u);EventUtils.DragDropManager.attachDragSource(t.resizerObject,t)}},dispose:function(){this.$2()}});var h=global.tab.HeaderResizerManagerViewModel=ss.mkType(a,'tab.HeaderResizerManagerViewModel',function(o,p){this.$6=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;spiff.BaseViewModel.call(this);this.$0(o);this.$6=p;this.get_resizeInfo().add_resizeInfoUpdated(ss.mkdel(this,this.$3));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_resizeInfo().remove_resizeInfoUpdated(ss.mkdel(this,this.$3))})));this.$5()},{add_updateResizerViews:function(o){this.$2$1=ss.delegateCombine(this.$2$1,o)},remove_updateResizerViews:function(o){this.$2$1=ss.delegateRemove(this.$2$1,o)},get_resizeInfo:function(){return this.$2$2},$0:function(o){this.$2$2=o},get_rowHeaderResizerVMs:function(){return this.$2$3},$1:function(o){this.$2$3=o},get_columnHeaderResizerVMs:function(){return this.$2$4},$2:function(o){this.$2$4=o},get_totalColumnHeadersHeight:function(){return this.get_resizeInfo().get_totalColumnHeadersHeight()},$3:function(){this.$5();this.$2$1()},$5:function(){if(ss.isNullOrUndefined(this.get_resizeInfo())){return}this.$1(null);if(this.get_resizeInfo().get_areRowHeadersWidthAdjustable()){this.$1(this.$4(this.get_resizeInfo().get_rowHeaders(),true))}this.$2(null);if(this.get_resizeInfo().get_areColHeadersHeightAdjustable()){this.$2(this.$4(this.get_resizeInfo().get_columnHeaders(),false))}},$4:function(o,p){var q=[];var r=0;var s=(p?this.get_resizeInfo().get_sheetHeight():this.get_resizeInfo().get_sheetWidth());for(var t=0;t<o.length;t++){var u=o[t];r+=(p?u.get_width():u.get_height());var v=(p?-k.getHeaderResizerMinimumRunDistance(u.get_width()):-k.getHeaderResizerMinimumRunDistance(u.get_height()));var w=new tab.ResizerViewModelParams(this.$6,r,s,p,v,2147483647);var x=new i(w,u);q.push(x)}return q}});var i=global.tab.HeaderResizerViewModel=ss.mkType(a,'tab.HeaderResizerViewModel',function(o,p){this.$6=null;n.call(this,o);this.$6=p},{get_cssClassName:function(){return(this.get_isXResizer()?'tab-tvRowHeaderResizer':'tab-tvColumnHeaderResizer')},sendResizeCommand:function(o){if(k.isSizeDifferenceOverThreshold(o)){var p=new tab.ResizeHeaderWebCmd;p.c['visualIdPresModel']=this.get_visualID();p.c['size']=o+(this.get_isXResizer()?this.$6.get_width():this.$6.get_height())|0;p.c['isXAxis']=!this.get_isXResizer();p.c['fn']=this.$6.get_fieldName();p.set_uiBlocking('immediately');p.invoke()}}});var j=global.tab.ResizeHeadersModuleFactory=ss.mkType(a,'tab.ResizeHeadersModuleFactory',function(){},{newHeaderResizerManagerViewModel:function(o,p){return new h(o,p)},newHeaderResizerManager:function(o,p,q){return new g(o,p,q)},newAxisResizerManager:function(o,p){return new b(o,p)},newCellResizerManagerViewModel:function(o,p){return new e(o,p)},newCellResizerManager:function(o,p,q){return new d(o,p,q)}});var k=global.tab.ResizeHelpers=ss.mkType(a,'tab.ResizeHelpers',null,null,{getHeaderResizerMinimumRunDistance:function(o){return Math.max(0,o-20)},getAxisResizerMaximumRunDistance:function(o,p,q,r){return Math.max(0,(r?(ss.idiv(o,2)-10):Math.min(ss.idiv(o*3,4),ss.idiv(p*3,4)-q)))},getAxisResizerMinimumRunDistance:function(o){return Math.max(0,o-10)},isSizeDifferenceOverThreshold:function(o){return Math.abs(o)>1},appendResizerElementToDom:function(o,p){var q=o.clone().empty().removeClass().addClass('tab-tvRegionResizerContainer');o.parent().append(q);p.addToDom(q)},$0:function(o,p){var q=o.element.parent();if(o.addedToDom&&ss.isValue(q)){q.css('left',p.css('left'));q.css('width',p.css('width'))}},getAxisResizerCssClassName:function(o){switch(o){case'topaxis':{return'tab-tvXTopRegionResizer'}case'rightaxis':{return'tab-tvYRightRegionResizer'}case'bottomaxis':{return'tab-tvXBottomRegionResizer'}case'leftaxis':{return'tab-tvYLeftRegionResizer'}default:{return''}}}});var l=global.tab.ResizerTemplate=ss.mkType(a,'tab.ResizerTemplate',function(o){this.resizer=null;spiff.Template.call(this,$("<div class='"+o+"'><div class='"+'tab-tvResizerLine'+"'></div></div>"));this.resizer=this.getElementBySelector('.'+'tab-tvResizerLine')});var m=global.tab.ResizerView=ss.mkType(a,'tab.ResizerView',function(o){this.$e=null;this.$d=0;this.resizerObject=null;ss.makeGenericType(spiff.BaseView$1,[tab.IResizerViewModel]).call(this,o,new l(o.get_cssClassName()));this.resizerObject=this.get_template().domRoot;this.$c()},{get_resizeTemplate:function(){return this.get_template()},get_getPointWithinYRegion:function(){var o=this.resizerObject.position();var p=Math.floor(o.left);var q=o.top-this.get_viewModel().get_resizerOffset()+this.resizerObject.width();return{x:Math.floor(p),y:Math.floor(q)}},get_getPointWithinXRegion:function(){var o=this.resizerObject.position();var p=o.left-this.get_viewModel().get_resizerOffset()+this.resizerObject.height();var q=Math.floor(o.top);return{x:Math.floor(p),y:Math.floor(q)}},startDrag:function(o){this.$e=tab.DomUtil.getPageOffset$1(this.resizerObject);this.doOnStart(o);this.resizerObject.css('opacity','1');return new spiff.MoveDragInstance.$ctor1(this.resizerObject,ss.mkdel(this,this.$a),ss.mkdel(this,this.$9),ss.mkdel(this,this.$b),null)},acceptsDragType:function(){return 1},$a:function(o){this.doOnMove(o)},$9:function(o){this.doOnDrop(o);this.$b()},$b:function(){this.resizerObject.css('opacity','0');this.resizerObject.offset(this.$e)},$c:function(){if(this.get_viewModel().get_isXResizer()){this.resizerObject.css('top',this.get_viewModel().get_resizerOffset()+'px');this.resizerObject.height(this.get_viewModel().get_resizerLength())}else{this.resizerObject.css('left',this.get_viewModel().get_resizerOffset()+'px');this.resizerObject.width(this.get_viewModel().get_resizerLength())}},doOnStart:function(o){if(this.get_viewModel().get_isXResizer()){this.$d=tab.DoubleUtil.roundToInt(this.resizerObject.offset().left);this.updateResizerXPosition(o)}else{this.$d=tab.DoubleUtil.roundToInt(this.resizerObject.offset().top);this.updateResizerYPosition(o)}},doOnMove:function(o){if(this.get_viewModel().get_isXResizer()){this.updateResizerXPosition(o)}else{this.updateResizerYPosition(o)}},doOnDrop:function(o){var p=(this.get_viewModel().get_isXResizer()?this.calculateXSizeDifference(o):this.calculateYSizeDifference(o));this.get_viewModel().sendResizeCommand(p)},updateResizerYPosition:function(o){var p=this.$8(o);var q=o.pageY-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.height()),2);if(p<=this.get_viewModel().get_resizerMinimumOffset()){q=this.$d+this.get_viewModel().get_resizerMinimumOffset()}if(p>=this.get_viewModel().get_resizerMaximumOffset()){q=this.$d+this.get_viewModel().get_resizerMaximumOffset()}var r=this.resizerObject.offset();this.resizerObject.offset({left:r.left,top:q})},updateResizerXPosition:function(o){var p=this.$7(o);var q=o.pageX-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.width()),2);if(p<=this.get_viewModel().get_resizerMinimumOffset()){q=this.$d+this.get_viewModel().get_resizerMinimumOffset()}if(p>=this.get_viewModel().get_resizerMaximumOffset()){q=this.$d+this.get_viewModel().get_resizerMaximumOffset()}var r=this.resizerObject.offset();this.resizerObject.offset({left:q,top:r.top})},calculateYSizeDifference:function(o){var p=o.pageY-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.height()),2);var q=p-this.$d;var r=Math.min(Math.max(q,this.get_viewModel().get_resizerMinimumOffset()),this.get_viewModel().get_resizerMaximumOffset());return r},calculateXSizeDifference:function(o){var p=o.pageX-ss.idiv(tab.DoubleUtil.roundToInt(this.resizerObject.width()),2);var q=p-this.$d;var r=Math.min(Math.max(q,this.get_viewModel().get_resizerMinimumOffset()),this.get_viewModel().get_resizerMaximumOffset());return r},$8:function(o){var p=o.pageY;return p-this.$d},$7:function(o){var p=o.pageX;return p-this.$d}});var n=global.tab.ResizerViewModel=ss.mkType(a,'tab.ResizerViewModel',function(o){this.$2$1=null;this.$2$2=0;this.$2$3=0;this.$2$4=false;this.$2$5=0;this.$2$6=0;spiff.BaseViewModel.call(this);this.$0(o.visualId);this.$1(o.offset);this.$2(o.length);this.$3(o.isXResizer);this.$4(o.minimumOffset);this.$5(o.maximumOffset)},{get_visualID:function(){return this.$2$1},$0:function(o){this.$2$1=o},get_resizerOffset:function(){return this.$2$2},$1:function(o){this.$2$2=o},get_resizerLength:function(){return this.$2$3},$2:function(o){this.$2$3=o},get_isXResizer:function(){return this.$2$4},$3:function(o){this.$2$4=o},get_resizerMinimumOffset:function(){return this.$2$5},$4:function(o){this.$2$5=o},get_resizerMaximumOffset:function(){return this.$2$6},$5:function(o){this.$2$6=o},get_cssClassName:null,sendResizeCommand:null});ss.initClass(b,null,[tab.IAxisResizerManager,ss.IDisposable]);ss.initClass(n,spiff.BaseViewModel,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(c,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(d,null,[tab.ICellResizerManager,ss.IDisposable]);ss.initClass(e,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.ICellResizerManagerViewModel]);ss.initClass(f,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(g,null,[tab.IHeaderResizerManager,ss.IDisposable]);ss.initClass(h,spiff.BaseViewModel,[tab.IHeaderResizerManagerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(i,n,[tab.IResizerViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(j,null,[tab.IResizeHeadersModule]);ss.initClass(k);ss.initClass(l,spiff.Template,[ss.IDisposable]);ss.initClass(m,ss.makeGenericType(spiff.BaseView$1,[tab.IResizerViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.IResizerViewModel]),ss.IDisposable,tab.IAppendableView]);(function(){d.scrollTimeout=500})()})();;
/*! BEGIN StoryModule */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlstory');var b=global.tab.FlipboardNavigatorExtensions=ss.mkType(a,'tab.FlipboardNavigatorExtensions',null,null,{getViewModelFromStoryId:function(y,z){return _.find(y,function(A){return A.get_storyPointId()===z})}});var c=global.tab.FlipboardNavigatorPointsTemplate=ss.mkType(a,'tab.FlipboardNavigatorPointsTemplate',function(){this.points=null;spiff.Template.call(this,$("<span class='tabFlipboardNavPoints'></span>"));this.points=this.domRoot});var d=global.tab.FlipboardNavigatorView=ss.mkType(a,'tab.FlipboardNavigatorView',function(y){this.$q=null;this.$s=null;this.$r=null;this.$u=0;this.$t=null;ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]).call(this,y,new tab.FlipboardNavigatorTemplate);this.$u=0;this.$o();this.$i();this.get_flipboardNavViewModel().add_zoneResized(ss.mkdel(this,this.handleResized));this.get_flipboardNavViewModel().add_zoneResized(ss.mkdel(this,this.$a));this.get_flipboardNavViewModel().add_activePointUpdated(ss.mkdel(this,this.handleActivePointUpdated));this.get_flipboardNavViewModel().add_remoteUpdateComplete(ss.mkdel(this,this.$d));this.get_flipboardNavViewModel().add_findParentScroller(ss.mkdel(this,function(){return this.get_dom().scroller}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_flipboardNavViewModel().remove_zoneResized(ss.mkdel(this,this.handleResized));this.get_flipboardNavViewModel().remove_zoneResized(ss.mkdel(this,this.$a));this.get_flipboardNavViewModel().remove_activePointUpdated(ss.mkdel(this,this.handleActivePointUpdated));this.get_flipboardNavViewModel().remove_remoteUpdateComplete(ss.mkdel(this,this.$d));this.get_flipboardNavViewModel().remove_findParentScroller(ss.mkdel(this,function(){return this.get_dom().scroller}));tab.StyleUtil.clearStyleSheet('appendedStoryStyle')})));this.$b()},{get_domRoot:function(){return this.get_template().domRoot},get_flipboardNavViewModel:function(){return this.get_viewModel()},get_storyPointCaptionViewModel:function(){return ss.getItem(this.get_flipboardNavViewModel().get_captions(),0)},get_dom:function(){return ss.cast(this.get_template(),tab.FlipboardNavigatorTemplate)},get_scrollingView:function(){return this.$r},$p:function(){var y=((this.get_flipboardNavViewModel().get_navType()==='arrowonly')?0:this.get_flipboardNavViewModel().get_currentPointIndex());return this.$q.points.children().get(y)},$b:function(){this.$q=new c;var y=new spiff.ScrollableViewModel.$ctor1(false);y.set_content(this.$q.domRoot[0]);y.set_scrollX(true);this.$s=y;this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){tab.StyleUtil.clearStyleSheet('flipboardNavScroller');this.$s.dispose()})))},$o:function(){if(this.get_flipboardNavViewModel().get_useDarkIcons()){this.get_domRoot().addClass('tabDarkIcons')}else{this.get_domRoot().addClass('tabLightIcons')}var y=this.get_flipboardNavViewModel().get_scrollBarStyle();if(ss.isValue(y)){tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar',{'background-color':y.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar:hover',ss.mkdict(['background-color',y.bgActiveColor]));tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator',{'background-color':y.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('flipboardNavScroller','.tabFlipboardNavScroller .iScrollHorizontalScrollbar>.iScrollIndicator:hover',{'background-color':y.color})}},$i:function(){var y=new spiff.Button(this.get_dom().previous);var z=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickPrevious()});y.add_click(z);this.disposables.add$1(y);this.disposables.add$1(new tab.CallOnDispose(function(){y.remove_click(z)}));var A=new spiff.Button(this.get_dom().next);var B=ss.mkdel(this,function(){this.get_flipboardNavViewModel().clickNext()});A.add_click(B);this.disposables.add$1(A);this.disposables.add$1(new tab.CallOnDispose(function(){A.remove_click(B)}))},$f:function(){if(tab.FeatureFlags.isEnabled('BEAuthoring_ContextMenus_StoryPoint')&&tsConfig.is_authoring){var y=$(this.get_domRoot().get(0));this.disposables.add$1(spiff.EventUtil.bindWithDispose(y,'contextmenu',ss.mkdel(this,this.$c)))}},$c:function(y){spiff.EventUtil.stopEvent$2(y);this.get_flipboardNavViewModel().showContextMenu(y)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$r=spiff.ScrollableView.createScrollableView(this.$s);this.$r.addToDom(this.get_dom().scroller);this.$d();this.$f()},$d:function(){this.get_dom().previous.toggle(this.get_flipboardNavViewModel().get_showArrows());this.get_dom().next.toggle(this.get_flipboardNavViewModel().get_showArrows());var y=this.get_dom().previous.add(this.get_dom().next);var z=this.get_flipboardNavViewModel().get_storyPointHeight();var A=z+20;this.$e();var B=tab.DoubleUtil.roundToInt(this.get_dom().previousArrow.height());var C=ss.idiv(z-B,2);var D;if(C<0){D=ss.mkdict(['padding-top','0px','padding-bottom','0px','margin-bottom',ss.idiv(this.$r.get_scrollbarBuffer(),2)+'px'])}else{D=ss.mkdict(['padding-top',C+'px','padding-bottom',C+'px','margin-bottom',this.$r.get_scrollbarBuffer()+'px'])}y.css(D);this.$l();if(ss.isValue(A)){this.get_dom().scroller.css('height',A+this.$r.get_scrollbarBuffer()+'px')}this.$g();this.$h(ss.mkdel(this,this.$n))},$e:function(){var y=this.get_dom().previous.add(this.get_dom().next);y.removeClass('ArrowLarge');y.removeClass('ArrowSmall');if(this.get_flipboardNavViewModel().get_navType()==='caption'){y.addClass('ArrowLarge')}else if(this.get_flipboardNavViewModel().get_navType()==='number'||this.get_flipboardNavViewModel().get_navType()==='arrowonly'||this.get_flipboardNavViewModel().get_navType()==='dot'){y.addClass('ArrowSmall')}},$l:function(){if(ss.isNullOrUndefined(this.get_storyPointCaptionViewModel())){return}var y={};var z={};var A={};var B={};var C={};if(ss.isValue(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle())){y=this.$j(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());A=this.$m(this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle());C=this.$k()}if(ss.isValue(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle())){z=this.$j(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());B=this.$m(this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle());if(Object.keys(C).length<=0){C=this.$k()}}tab.StyleUtil.clearStyleSheet('appendedStoryStyle');tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabFlipboardNavScroller .tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint',C);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent',y);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption',z);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',A);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent',B);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom',y);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabStoryPointCaptionTop,.tabStoryPointCaption .tabStoryPointCaptionBottom',z);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabScroller .tabScrollerContent .tabStoryPointContent',A);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabScroller .tabScrollerContent .tabStoryPointContent',B);tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.bgRestColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.defaultColor});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption.tabCurrent .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_selectedStoryPointStyle().scrollBarStyle.color});tab.StyleUtil.appendCSSRuleToStyleSheet$1('appendedStoryStyle','.tabStoryPointCaption .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover',{'background-color':this.get_storyPointCaptionViewModel().get_unselectedStoryPointStyle().scrollBarStyle.color})},$j:function(y){var z=false;if(ss.isValue(y.styledBox)){return tab.FormattingConverters.makeStyledBoxCssDict(y.styledBox,z)}else{return{}}},$m:function(y){if(ss.isValue(y.textStyle)){return tab.FormattingConverters.makeFormatStyleDict(y.textStyle,null)}else{return{}}},$k:function(){var y=150;var z=70;var A={};var B=z,C=y;if(ss.isValue(this.get_viewModel().get_storyPointHeight())){B=this.get_viewModel().get_storyPointHeight()}A.height=B+20+'px';if(ss.isValue(this.get_viewModel().get_storyPointWidth())){C=this.get_viewModel().get_storyPointWidth()}A.width=C+'px';return A},handleResized:function(){var y=tab.DoubleUtil.roundToInt(this.get_dom().domRoot.parent().width())-this.$8();var z=this.$q.points[0].clientWidth;this.get_dom().scroller.css(ss.mkdict(['width',Math.min(y,z)+'px']));this.$s.triggerRefresh()},$a:function(){this.get_viewModel().closeUberMenu()},$8:function(){return(this.get_flipboardNavViewModel().get_showArrows()?(tab.DoubleUtil.roundToInt(this.get_dom().previous.outerWidth(true))+tab.DoubleUtil.roundToInt(this.get_dom().next.outerWidth(true))):0)},handleActivePointUpdated:function(){this.$g();this.$h(ss.mkdel(this,this.$n))},$n:function(){var y=this.$p();var z=y.offsetLeft;var A=z+y.offsetWidth;var B=this.$r.get_scrollerX();var C=B+tab.DoubleUtil.roundToInt(this.get_dom().scroller.width());var D=50;if(A>C){var E=tab.DoubleUtil.roundToInt(this.get_dom().scroller.width())-y.offsetWidth-D;this.$r.scrollToElement(y,0,-E,0)}else if(z<B){this.$r.scrollToElement(y,0,-D,0)}this.get_dom().previous.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_previousDisabled());this.get_dom().next.toggleClass('tabDisabled',this.get_flipboardNavViewModel().get_nextDisabled())},$g:function(){this.$t=[];this.$9();this.$h(ss.mkdel(this,this.handleResized))},$9:function(){var y=this.get_template().getElementsBySelector('.tabStoryPoint');y.remove();var z=ss.getEnumerator(this.get_flipboardNavViewModel().get_captions());try{while(z.moveNext()){var A=z.current();if(A.get_shouldBeAdded()){this.$7(A)}}}finally{z.dispose()}},$7:function(y){var z=tab.ObjectRegistry.newDeferred(j).call(null,[y]);this.$t.push(z);z.done(ss.mkdel(this,function(A){A.addToDom(this.$q.points)}))},$h:function(y){$.when.apply(null,this.$t).done([y])}});var e=global.tab.FlipboardNavigatorViewModel=ss.mkType(a,'tab.FlipboardNavigatorViewModel',function(y){this.$f=null;this.$c=[];this.$e=false;this.$d=null;this.$b=null;this.$g=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;spiff.BaseViewModel.call(this);this.$f=y;this.$f.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.$f.get_zone().get_zoneCommonModel().add_resizeZone(ss.mkdel(this,this.$4));this.$f.add_pointWasCaptured(ss.mkdel(this,this.handlePointWasCaptured));this.$f.add_navArrowVisibilityChanged(ss.mkdel(this,this.handleNavArrowVisibilityChanged));EventUtils.GlobalUIEvents.add_DismissTemporaryElements(ss.mkdel(this,this.hideUberMenuImmediately));w.$2(ss.mkdel(this,this.closeUberMenu));w.$4(ss.mkdel(this,this.handlePointWasCaptured));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$f.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.$f.get_zone().get_zoneCommonModel().remove_resizeZone(ss.mkdel(this,this.$4));this.$f.remove_pointWasCaptured(ss.mkdel(this,this.handlePointWasCaptured));this.$f.remove_navArrowVisibilityChanged(ss.mkdel(this,this.handleNavArrowVisibilityChanged));EventUtils.GlobalUIEvents.remove_DismissTemporaryElements(ss.mkdel(this,this.hideUberMenuImmediately));w.$3(ss.mkdel(this,this.closeUberMenu));w.$5(ss.mkdel(this,this.handlePointWasCaptured));this.$g.done(function(A){A.dispose()})})));this.$g=tab.ObjectRegistry.newDeferred(k).call(null,[]);this.$d=[];this.$b=[];this.$1();var z=null;z=ss.mkdel(this,function(){this.$a();tab.CommandController.get().remove_commandQueueComplete(z)});tab.CommandController.get().add_commandQueueComplete(z);tab.StartupUtils.callOnceAfterInitialBootstrap(ss.mkdel(this,this.$a))},{add_zoneResized:function(y){this.$2$1=ss.delegateCombine(this.$2$1,y)},remove_zoneResized:function(y){this.$2$1=ss.delegateRemove(this.$2$1,y)},add_activePointUpdated:function(y){this.$2$2=ss.delegateCombine(this.$2$2,y)},remove_activePointUpdated:function(y){this.$2$2=ss.delegateRemove(this.$2$2,y)},add_remoteUpdateComplete:function(y){this.$2$3=ss.delegateCombine(this.$2$3,y)},remove_remoteUpdateComplete:function(y){this.$2$3=ss.delegateRemove(this.$2$3,y)},add_flipboardNavigatorUpdated:function(y){this.$2$4=ss.delegateCombine(this.$2$4,y)},remove_flipboardNavigatorUpdated:function(y){this.$2$4=ss.delegateRemove(this.$2$4,y)},add_findParentScroller:function(y){this.$2$5=ss.delegateCombine(this.$2$5,y)},remove_findParentScroller:function(y){this.$2$5=ss.delegateRemove(this.$2$5,y)},get_handlingOfContextMenuEventsRequired:function(){if(!tsConfig.is_authoring||tsConfig.current_sheet_type!=='story'){return false}return tab.FeatureFlags.isEnabled('BEAuthoring_ContextMenus_StoryPoint')},get_currentPointIndex:function(){return this.$f.get_currentPointIndex()},get_numberOfPoints:function(){return this.$f.get_storyPoints().length},get_storyPointHeight:function(){return this.$f.get_height()},get_storyPointWidth:function(){return this.$f.get_width()},get_previousDisabled:function(){return this.get_currentPointIndex()<=0},get_nextDisabled:function(){return this.get_currentPointIndex()>=this.get_numberOfPoints()-1},get_showArrows:function(){return this.$f.get_flipboardNavPresModel().navArrowsVisible},get_captions:function(){return this.$c},get_useDarkIcons:function(){return this.$f.get_flipboardNavPresModel().flipboardNavStyle.useDarkIcons},get_scrollBarStyle:function(){return this.$f.get_flipboardNavPresModel().flipboardNavStyle.scrollBarStyle},get_navType:function(){return this.$f.get_navType()},get_currentStoryPointId:function(){return(ss.isValue(this.$f)?this.$f.get_storyPoints()[this.get_currentPointIndex()].storyPointId:0)},handleNewFlipboardNav:function(){if(ss.isValue(this.$2$2)){this.updatePoints();this.$2$2()}if(!this.$e){var y=tab.CommandController.get();var z=null;z=ss.mkdel(this,function(){y.remove_commandQueueComplete(z);this.$e=false;this.raiseActionEvent(this.$2$3);this.$5();this.$g.done(ss.mkdel(this,function(A){A.updatePoints(this.$c,this.get_currentStoryPointId())}))});y.add_commandQueueComplete(z);this.$e=true}},handlePointWasCaptured:function(y){var z=((this.get_navType()==='arrowonly')?this.get_currentStoryPointId():y);this.$d.push(z)},handleNavArrowVisibilityChanged:function(){this.closeUberMenu()},updatePoints:function(){this.$8();this.$1()},$5:function(){for(var y=0;y<this.$d.length;y++){var z=this.$d[y];this.$6(z)}},$6:function(y){var z=b.getViewModelFromStoryId(this.$c,y);if(ss.isValue(z)){z.notifyPointWasCaptured()}},$4:function(){this.closeUberMenu();this.raiseActionEvent(this.$2$1)},$8:function(){for(var y=this.$c.length-1;y>=0;y--){this.$7(y)}},$7:function(y){var z=this.$c[y];z.remove_pointUpdatedShown(ss.mkdel(this,this.clearUpdatedPoint));z.remove_showUberMenuForPoint(ss.mkdel(this,this.showUberMenu));z.remove_hideUberMenuForPoint(ss.mkdel(this,this.hideUberMenu));z.remove_closeUberMenu(ss.mkdel(this,this.closeUberMenu));z.remove_showUpdatedToastOnReload(ss.mkdel(this,this.handlePointWasCaptured));z.remove_findParentScroller(ss.mkdel(this,this.$3));z.dispose();ss.remove(this.$c,z);ss.removeAt(this.$b,y)},$1:function(){ss.clear(this.$b);for(var y=0;y<this.get_numberOfPoints();y++){var z=new v(this.$f,y);this.$0(z);this.$b.push(z.get_storyPointId())}},$0:function(y){y.add_pointUpdatedShown(ss.mkdel(this,this.clearUpdatedPoint));y.add_showUberMenuForPoint(ss.mkdel(this,this.showUberMenu));y.add_hideUberMenuForPoint(ss.mkdel(this,this.hideUberMenu));y.add_closeUberMenu(ss.mkdel(this,this.closeUberMenu));y.add_showUpdatedToastOnReload(ss.mkdel(this,this.handlePointWasCaptured));y.add_findParentScroller(ss.mkdel(this,this.$3));this.$c.push(y)},$3:function(){return(ss.isValue(this.$2$5())?this.$2$5():null)},clearUpdatedPoint:function(y){ss.remove(this.$d,y)},showContextMenu:function(y){var z=new spiff.ShowMenuOptions($(y.currentTarget),false);z.cursorPosition={left:y.clientX,top:y.clientY};var A=z;var B=function(C){tab.WidgetUtil.showMenu(C.commands,A)};tab.SheetClientCommands.getCaptionContextMenu(tsConfig.current_sheet_name,null,B)},showUberMenu:function(y){this.$g.done(function(z){z.showUber(y)})},hideUberMenu:function(y){this.$g.done(function(z){z.hideUberWithTimeoutAndFade()})},hideUberMenuImmediately:function(){this.$g.done(function(y){y.hideUberWithFade()})},$a:function(){this.$g.done(ss.mkdel(this,function(y){y.updatePoints(this.$c,this.get_currentStoryPointId())}))},closeUberMenu:function(){this.$g.done(function(y){y.close()})},clickNext:function(){return this.$2(l.nextStoryPoint,this.get_nextDisabled())},clickPrevious:function(){return this.$2(l.previousStoryPoint,this.get_previousDisabled())},$2:function(y,z){var A=$.Deferred();if(z){A.resolve(this.get_currentPointIndex())}else{this.$9(A,ss.mkdel(this,function(){return y(this.$f)}))}this.closeUberMenu();return A.promise()},dispose:function(){this.$8();spiff.BaseViewModel.prototype.dispose.call(this)},$9:function(y,z){var A=ss.mkdel(this,function(){y.resolve(this.get_currentPointIndex())});var B=function(){y.reject(ss.unbox(ss.cast(arguments[0],ss.Int32)))};z().then(A,B)}});var f=global.tab.FlipboardTemplate=ss.mkType(a,'tab.FlipboardTemplate',function(){spiff.Template.call(this,$("<div class='tabFlipboard'></div>"))});var g=global.tab.FlipboardView=ss.mkType(a,'tab.FlipboardView',function(y){this.$8=null;ss.makeGenericType(spiff.BaseView$1,[h]).call(this,y,new f);this.$8=y;this.$8.add_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$8.get_parentZone().add_resizeZone(ss.mkdel(this,this.handleResizeZone));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$8.remove_newStoryPoint(ss.mkdel(this,this.handleNewStoryPoint));this.$8.get_parentZone().remove_resizeZone(ss.mkdel(this,this.handleResizeZone))})))},{onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);if(ss.isValue(this.$8.get_dashboardViewModel())){this.handleNewStoryPoint()}},handleNewStoryPoint:function(){var y={w:tab.DoubleUtil.roundToInt(this.element.width()),h:tab.DoubleUtil.roundToInt(this.element.height())};this.$8.get_dashboardViewModel().set_size(g.$0(tab.RecordCast.sizeAsSizePresModel(y),this.$8.get_dashboardViewModel().get_size()));this.$7();var z=tab.ObjectRegistry.newView(tab.DashboardView).call(null,[this.$8.get_dashboardViewModel()]);z.addToDom(this.get_template().domRoot)},handleResizeZone:function(){var y={w:this.$8.get_parentZone().get_contentWidth(),h:this.$8.get_parentZone().get_contentHeight()};this.$8.get_dashboardViewModel().set_size(g.$0(tab.RecordCast.sizeAsSizePresModel(y),this.$8.get_dashboardViewModel().dashboardModel.get_dashboardSize()));this.$7()},$7:function(){var y=this.$8.get_parentZone().get_contentWidth();var z=this.$8.get_parentZone().get_contentHeight();var A=this.$8.get_dashboardViewModel().dashboardModel.get_dashboardSize();if(A.w<=y&&A.h<=z+3){this.element.css('overflow','hidden')}else{this.element.css('overflow','auto')}}},{findFlipboard:function(){return $('.'+'tabFlipboard')},$0:function(y,z){var A=tab.SizePresModelUtils.unionPresModels(y,z);if(z.h>=y.h+3&&y.w-z.w>24){A.w-=24}if(z.w>=y.w&&y.h+3-z.h>24){A.h-=24}return A}});var h=global.tab.FlipboardViewModel=ss.mkType(a,'tab.FlipboardViewModel',function(y,z){this.$5=null;this.$6=null;this.$4=null;this.$2$1=null;spiff.BaseViewModel.call(this);this.$5=y;this.$6=z;this.$5.add_invalidateZone(ss.mkdel(this,this.$2));this.$5.get_storyPointModel().add_newStoryPoint(ss.mkdel(this,this.$1));this.$5.get_storyPointModel().add_dashboardDisposal(ss.mkdel(this,this.$0));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$5.remove_invalidateZone(ss.mkdel(this,this.$2));this.$5.get_storyPointModel().remove_newStoryPoint(ss.mkdel(this,this.$1));this.$5.get_storyPointModel().remove_dashboardDisposal(ss.mkdel(this,this.$0))})));if(ss.isValue(this.get_flipboardModel().get_dashboardModel())){this.$1()}},{add_newStoryPoint:function(y){this.$2$1=ss.delegateCombine(this.$2$1,y)},remove_newStoryPoint:function(y){this.$2$1=ss.delegateRemove(this.$2$1,y)},get_flipboardModel:function(){return this.$5},get_storyPointId:function(){return this.$5.get_storyPointModel().get_storyPointId()},get_dashboardViewModel:function(){return this.$4},$3:function(){return this.get_flipboardModel().get_dashboardModel().pm},get_parentZone:function(){return this.$6},$1:function(){this.$0();if(ss.isValue(this.$3())){this.$4=tab.DashboardViewModel.new$1(this.get_flipboardModel().get_dashboardModel());this.raiseActionEvent(this.$2$1)}tab.Application.handleAllFontsFound()},$2:function(){this.$6.forceZoneValidState(false)},dispose:function(){this.$0();spiff.BaseViewModel.prototype.dispose.call(this)},$0:function(){if(ss.isValue(this.get_dashboardViewModel())){this.$4.dispose();this.$4=null}}});var i=global.tab.IStoryNavigatorContentView=ss.mkType(a,'tab.IStoryNavigatorContentView');var j=global.tab.IStoryNavigatorPointView=ss.mkType(a,'tab.IStoryNavigatorPointView');var k=global.tab.IStoryUberPopupContainer=ss.mkType(a,'tab.IStoryUberPopupContainer');var l=global.tab.StoryClientCommands=ss.mkType(a,'tab.StoryClientCommands',null,null,{setActiveStoryPoint:function(y,z){var A=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()||z.get_currentPointIndex()===y){A.resolve();return A.promise()}var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=z.get_storyPoints()[y].storyPointId;var D=new tab.ClientCommand('afterDelay',function(E){l.$n(C,z,E,B)},l.$0(z.get_storyPoints()[y].storyPointId,tsConfig.is_authoring),function(E){A.resolve(E)},function(E){A.reject(E)});tab.CommandController.SendCommand(D);return A.promise()},nextStoryPoint:function(y){var z=$.Deferred();if(!tab.ApplicationModel.get_instance().get_workbook().get_isCurrentSheetStoryboard()){z.reject("The workbook's current sheet is not a story");return z.promise()}var A=y.get_currentPointIndex()+1;var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=l.$g(y,z,B,A);var D=y.get_storyPoints()[A].storyPointId;var E=new tab.ClientCommand('afterDelay',function(F){l.$n(D,y,F,B)},l.$7(tsConfig.is_authoring),function(F){z.resolve(F)},function(F){z.reject(F)});tab.CommandController.SendCommand(E);return C},previousStoryPoint:function(y){var z=$.Deferred();if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_storyboard())){z.reject("The workbook's current sheet is not a story");return z.promise()}var A=y.get_currentPointIndex()-1;var B=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var C=l.$g(y,z,B,A);var D=y.get_storyPoints()[A].storyPointId;var E=new tab.ClientCommand('afterDelay',function(F){l.$n(D,y,F,B)},l.$8(tsConfig.is_authoring),function(F){z.resolve(F)},function(F){z.reject(F)});tab.CommandController.SendCommand(E);return C},revertStoryPoint:function(y,z){return l.$m(l.$l,l.$b(y,z),'none')},setFlipboardNavType:function(y){return l.$m(function(z){},l.$d(y),'none')},captureStoryPoint:function(y){return l.$m(function(z){},l.$1(y),'none')},newBlankStoryPoint:function(){return l.$m(function(y){},l.$6(),'none')},duplicateActiveStoryPoint:function(){return l.$m(function(y){},l.$3(),'none')},saveActiveStoryPointAsNew:function(){return l.$m(function(y){},l.$c(),'immediately')},toggleArrows:function(){return l.$m(function(y){},l.$f(),'none')},toggleShowStoryboardTitle:function(y){return l.$m(function(z){},l.$e(y),'immediately')},insertStoryPoint:function(y,z){return l.$m(function(A){},l.$5(y,z),'none')},replaceStoryPoint:function(y,z){return l.$m(function(A){},l.$a(y,z),'none')},reorderStoryPoint:function(y,z){return l.$m(function(A){},l.$9(y,z),'none')},deleteStoryPoint:function(y){return l.$m(function(z){},l.$2(y),'none')},editStoryPointCaption:function(y,z,A){return l.$m(function(B){l.$i(y,A,B)},l.$4(y,z),'none')},addNewTextZoneToStoryboard:function(){var y=new tab.AddObjectToDashboardCmd;y.c['dashboard']=tsConfig.current_sheet_name;y.c['zoneType']='text';y.c['isHorizontal']=false;y.c['addAsFloating']=true;y.set_uiBlocking('immediately');var z=y;return z.invoke()},$g:function(y,z,A,B){var C=z.promise();if(!tsConfig.is_authoring){var D=B+(B-y.get_currentPointIndex());if(D>=0&&D<y.get_flipboardNavPresModel().storypointNavItems.length){var E=y.get_flipboardNavPresModel().storypointNavItems[D].storyPointId;C=C.then(function(){_.defer(function(){l.$k(A,E)})},null)}}return C},$k:function(y,z){if(ss.isNullOrUndefined(tab.FlipboardModel.presModelCache)||tab.FlipboardModel.presModelCache.hasStoryPoint(z)){return}var A=tab.CommandUtils.newCommand({ns:'tabsrv',cmd:'get-storypoint'},null);var B={};B['storyboard']=tsConfig.current_sheet_name;B['storyPointId']=z;A.commandParams=B;var C=function(E){var F=E;if(ss.isValue(F)&&ss.isValue(F.dashboardPresModel)){tab.FlipboardModel.presModelCache.addStoryPoint(z,F)}};var D=new tab.RemoteClientCommand(A,'none',C,null);tab.CommandController.SendCommand(D)},$l:function(y){l.$j(y)},$b:function(y,z){var A=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'revert-story-point'},null);A.commandParams={};tab.CommandUtils.addStoryPointToCommand(A.commandParams,y);A.commandParams['storyPointId']=z.toString();return A},$1:function(y){var z=l.$h({ns:'tabdoc',cmd:'capture-story-point'});z.commandParams['storyPointId']=y.toString();return z},$i:function(y,z,A){if(ss.isValue(z)){var B=z.get_storyPoints()[z.get_currentPointIndex()];var C=A.makeMutablePresModel(z,false);B=C.storypointNavItems[z.get_currentPointIndex()];B.storyPointCaption=y}},$n:function(y,z,A,B){if(ss.isValue(z)){var C=z.get_flipboardNavPresModel();var D=0;var E=false;var F=C.storypointNavItems;for(var G=0,H=F.length;G<H;G++){if(F[G].storyPointId===y){D=G;E=true;break}}if(E){C=A.makeMutablePresModel(z,false);C.currentStorypointIndex=D}}if(ss.isValue(B)&&!tsConfig.is_authoring&&ss.isValue(tab.FlipboardModel.presModelCache)&&tab.FlipboardModel.presModelCache.hasStoryPoint(y)){var I=tab.FlipboardModel.presModelCache.getStoryPoint(y);if(tab.ApplicationModel.get_instance().get_renderMode()!=='render-mode-client'){var J=A.makeMutablePresModel(tab.ApplicationModel.get_instance(),false);J.renderMode='render-mode-client'}var K=A.makeMutablePresModel(B,true);K.activeStoryPointId=y;K.storyPoints[y.toString()]=I;var L=A.makeMutablePresModel(tab.ApplicationModel.get_instance().get_dataDictionary(),false);L.dataSegments={};if(tab.FeatureParamsLookup.getBool(43)){tabBootstrap.MetricsController.logMetricsEvent('StoryCacheHit',32,null)}}else{l.$j(A)}},$0:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'set-active-story-point'});A.commandParams['storyPointId']=y.toString();A.commandParams['shouldAutoCapture']=(z?'true':'false');A.commandParams['shouldAutoRevert']=(z?'false':'true');return A},$7:function(y){var z=l.$h({ns:'tabdoc',cmd:'next-story-point'});z.commandParams['shouldAutoCapture']=(y?'true':'false');z.commandParams['shouldAutoRevert']=(y?'false':'true');return z},$8:function(y){var z=l.$h({ns:'tabdoc',cmd:'previous-story-point'});z.commandParams['shouldAutoCapture']=(y?'true':'false');z.commandParams['shouldAutoRevert']=(y?'false':'true');return z},$d:function(y){var z=l.$h({ns:'tabdoc',cmd:'set-flipboard-nav-type'});z.commandParams['flipboardNavType']=y;return z},$5:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'insert-story-point'});A.commandParams['currentStorypointIndex']=z;A.commandParams['storyPointBase']=y;return A},$a:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'replace-story-point'});A.commandParams['storyPointId']=z;A.commandParams['storyPointBase']=y;return A},$9:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'reorder-story-points'});A.commandParams['storyPointId']=y;A.commandParams['currentStorypointIndex']=z;return A},$2:function(y){var z=l.$h({ns:'tabdoc',cmd:'delete-story-point'});z.commandParams['storyPointId']=y;return z},$6:function(){return l.$h({ns:'tabdoc',cmd:'new-blank-story-point'})},$3:function(){return l.$h({ns:'tabdoc',cmd:'duplicate-active-story-point'})},$c:function(){return l.$h({ns:'tabdoc',cmd:'save-active-story-point-as-new'})},$f:function(){return l.$h({ns:'tabdoc',cmd:'toggle-storypoints-nav-arrows'})},$4:function(y,z){var A=l.$h({ns:'tabdoc',cmd:'edit-story-point-caption'});A.commandParams['storyPointCaption']=y;A.commandParams['storyPointId']=z.toString();return A},$e:function(y){var z=tab.CommandUtils.newCommand({ns:'tabdoc',cmd:'show-storyboard-title'},null);var A={};A['dashboard']=y;z.commandParams=A;return z},$h:function(y){var z=tab.CommandUtils.newCommand(y,null);var A={};A['storyboard']=tsConfig.current_sheet_name;z.commandParams=A;return z},$j:function(y){var z=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();if(ss.isValue(z)){z.invalidated(y.modelUpdateContext)}},$m:function(y,z,A){var B=$.Deferred();var C=new tab.ClientCommand(A,y,z,function(D){B.resolve(D)},function(D){B.reject(D)});tab.CommandController.SendCommand(C);return B}});var m=global.tab.StoryFactory=ss.mkType(a,'tab.StoryFactory',function(){},{newFlipboardNavigatorViewModel:function(y){return new e(y)},newFlipboardViewModel:function(y,z){return new h(y,z)},newFlipboardNavigatorView:function(y){return tab.ObjectRegistry.newDeferred(tab.IFlipboardNavigatorView).call(null,[y])},newFlipboardView:function(y){return tab.ObjectRegistry.newView(g).call(null,[y])},insertStoryPoint:function(y,z){return l.insertStoryPoint(y,z)},replaceStoryPoint:function(y,z){return l.replaceStoryPoint(y,z)},fireCloseStoryUberMenu:function(){w.$0()},fireShowUpdateToast:function(y){w.$1(y)}});var n=global.tab.StoryHelperFunctions=ss.mkType(a,'tab.StoryHelperFunctions',null,null,{isTableauFontName:function(y){return ss.startsWithString(y.toUpperCase(),'TABLEAU')},shouldUseHackForArrowOnlyNavigator:function(y,z){return z==='arrowonly'&&n.isTableauFontName(y)}});var o=global.tab.StoryNavigatorContentViewFactory=ss.mkType(a,'tab.StoryNavigatorContentViewFactory',null,null,{createContentView:function(y){if(y.get_navType()==='dot'){return new q(y)}else if(y.get_navType()==='arrowonly'){var z=y.get_selectedStoryPointStyle().textStyle.fontName;if(n.shouldUseHackForArrowOnlyNavigator(z,y.get_navType())){return new r(y)}else{return new s(y)}}else{return new s(y)}}});var p=global.tab.StoryNavigatorPointView=ss.mkType(a,'tab.StoryNavigatorPointView',function(y){p.$ctor1.call(this,y,o.createContentView(y))},{get_domRoot:function(){return this.get_template().domRoot},get_contentTemplate:function(){return ss.cast(this.$k.get_rootTemplate(),t)},get_storyPointCaptionViewModel:function(){return this.get_viewModel()},get_storyNavigatorContentView:function(){return this.$k},get_captionTemplate:function(){return ss.cast(this.get_template(),u)},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b()},$b:function(){this.$k.addToDom(this.get_captionTemplate().caption);this.$k.styleCaption(this.get_captionTemplate());this.$c()},$e:function(){this.get_domRoot().toggleClass('tabFirstPoint',this.get_storyPointCaptionViewModel().get_isFirstPoint());this.get_domRoot().toggleClass('tabLastPoint',this.get_storyPointCaptionViewModel().get_isLastPoint())},$d:function(){this.$k.dispose();this.$k=o.createContentView(this.get_viewModel());this.$g();this.$k.addToDom(this.get_captionTemplate().caption);this.get_captionTemplate().caption.removeAttr('style');this.get_captionTemplate().caption.removeClass(q.circleClassName);this.get_captionTemplate().domRoot.removeClass(q.storyPointDotClassName);this.$k.styleCaption(this.get_captionTemplate())},$c:function(){if(this.get_viewModel().get_navType()!=='caption'){this.$7()}if(tsConfig.is_authoring){this.get_captionTemplate().revert.hide()}else{this.get_captionTemplate().revert.toggle(!this.get_storyPointCaptionViewModel().get_isCaptured())}this.get_captionTemplate().caption.toggleClass('tabCurrent',this.get_storyPointCaptionViewModel().get_isCurrentPoint());this.get_captionTemplate().caption.attr('data-tb-test-id','tabStoryPoint-'+this.get_storyPointCaptionViewModel().get_storyPointId().toString());this.$k.handleUpdatePoint()},$7:function(){var y=this.get_captionTemplate().revert.find('.tab-iconButton');var z=y.width();if(!tsConfig.is_authoring){var A=(this.get_viewModel().get_width()-z)/2;y.css('left',A+'px')}},$h:function(){this.$f();this.$j();this.$i()},$i:function(){var y=new EventUtils.EventHandleSpec;y.hover=ss.mkdel(this,this.$9);y.hoverDelay=0;var z=y;z.SetHandler('mouseleave',ss.mkdel(this,this.$a));this.disposables.add$1(new EventUtils.TableauEventHandler(this.get_captionTemplate().caption[0],z))},$9:function(y){this.get_viewModel().showUberMenu()},$a:function(){this.get_viewModel().hideUberMenu()},$f:function(){var y='touchstart click';this.get_captionTemplate().caption.on(y,ss.mkdel(this,this.$8));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_captionTemplate().caption.off(y,ss.mkdel(this,this.$8))})))},$j:function(){this.get_captionTemplate().revert.attr('title',tab.Strings.StoryPointRevertTooltip);this.$l=new spiff.IconButton;this.$l.setIcon('tabStoryRevertSmallIcon');this.get_captionTemplate().revert.append(this.$l.element);this.disposables.add$1(this.$l.onClick(ss.mkdel(this,function(y){this.get_storyPointCaptionViewModel().revertStoryPoint()})));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$l.dispose()})))},$g:function(){this.$k.setupContent()},$8:function(y){spiff.EventUtil.stopEvent$2(y);this.get_storyPointCaptionViewModel().clickStoryPoint()}},{$ctor1:function(y,z){this.$k=null;this.$l=null;ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new u);this.get_storyPointCaptionViewModel().add_updatePoint(ss.mkdel(this,this.$c));this.get_storyPointCaptionViewModel().add_flipboardNavTypeChanged(ss.mkdel(this,this.$b));this.get_storyPointCaptionViewModel().set_findCaptionDom(ss.mkdel(this,function(){return this.get_captionTemplate().caption}));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_storyPointCaptionViewModel().remove_updatePoint(ss.mkdel(this,this.$c));this.get_storyPointCaptionViewModel().remove_flipboardNavTypeChanged(ss.mkdel(this,this.$b));this.get_storyPointCaptionViewModel().set_findCaptionDom(null);this.$k.dispose()})));this.$k=z;this.$e();this.$g();this.$h()}});var q=global.tab.StoryNavigatorShapeView=ss.mkType(a,'tab.StoryNavigatorShapeView',function(y){ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new t)},{get_rootTemplate:function(){return this.get_template()},handleUpdatePoint:function(){},styleCaption:function(y){y.domRoot.addClass('tabFormatted');y.domRoot.addClass(q.storyPointDotClassName);y.caption.addClass(q.circleClassName);y.captionBottom.hide();y.captionTop.hide();var z=Math.floor(this.get_viewModel().get_width()*q.dotsScale);var A=Math.floor(this.get_viewModel().get_height()*q.dotsScale);y.caption.width(z+'px');y.caption.height(A+'px');var B=ss.round(y.caption.outerWidth()-y.caption.innerWidth());var C=this.get_viewModel().get_width()-z-B;var D=this.get_viewModel().get_height()-A;C=Math.max(ss.idiv(C,2),0);D=Math.max(ss.idiv(D,2),0);y.caption.css('left',C+'px');y.caption.css('top',D+ss.round(y.toolbar.outerHeight())+'px')},setupContent:function(){this.get_template().domRoot.text('')}});var r=global.tab.StoryNavigatorTableauFontVerticalCenteringHackView=ss.mkType(a,'tab.StoryNavigatorTableauFontVerticalCenteringHackView',function(y){s.call(this,y)},{setupContent:function(){this.constructStoryPointCaptionContentTemplate(this.get_viewModel());var y=new spiff.ScrollableViewModel;y.set_content(this.get_template().domRoot[0]);y.isCenteredVertically=true;y.set_scrollY(false);y.set_scrollX(false);this.scrollableViewModel=y;var z=this.get_viewModel().get_selectedStoryPointStyle().textStyle.fontSize;if(z>14){this.scrollableViewModel.get_content().style.marginTop='-9%'}else{var A=-(0.4677000045776367*z-0.5);this.scrollableViewModel.get_content().style.marginTop=A+'%'}this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scrollableViewModel.dispose()})))}});var s=global.tab.StoryNavigatorTextView=ss.mkType(a,'tab.StoryNavigatorTextView',function(y){this.scrollableViewModel=null;this.scrollableView=null;ss.makeGenericType(spiff.BaseView$1,[v]).call(this,y,new t)},{get_rootTemplate:function(){return this.get_template()},addToDom:function(y){spiff.Widget.prototype.addToDom.call(this,y);this.scrollableView=spiff.ScrollableView.createScrollableView(this.scrollableViewModel);this.scrollableView.addToDom(y)},styleCaption:function(y){if(this.scrollableViewModel.get_hasCustomIndicator()){y.domRoot.addClass('tabFormatted');y.captionBottom.remove();y.captionTop.remove()}var z=ss.mkdict(['right',this.scrollableView.get_scrollbarBuffer()+'px']);y.captionTop.css(z);y.captionBottom.css(z)},handleUpdatePoint:function(){this.scrollableViewModel.triggerRefresh()},$7:function(){this.scrollableViewModel.triggerRefresh()},setupContent:function(){this.constructStoryPointCaptionContentTemplate(this.get_viewModel());var y=new spiff.ScrollableViewModel;y.set_content(this.get_template().domRoot[0]);y.isCenteredVertically=this.get_viewModel().get_isCenteredVertically();y.set_scrollY(this.get_viewModel().get_navType()!=='number'&&this.get_viewModel().get_navType()!=='arrowonly');y.set_scrollX(false);this.scrollableViewModel=y;this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.scrollableViewModel.dispose()})))},constructStoryPointCaptionContentTemplate:function(y){if(y.get_isCenteredHorizontally()){this.get_template().domRoot.addClass('centered')}this.get_template().domRoot.text(this.get_viewModel().get_caption())}});var t=global.tab.StoryPointCaptionContentTemplate=ss.mkType(a,'tab.StoryPointCaptionContentTemplate',function(){spiff.Template.call(this,$("<div class='tabStoryPointContent'></div>"))});var u=global.tab.StoryPointCaptionTemplate=ss.mkType(a,'tab.StoryPointCaptionTemplate',function(){this.caption=null;this.revert=null;this.update=null;this.updateTextButton=null;this.updateIconButton=null;this.delete$1=null;this.captionTop=null;this.captionBottom=null;this.toolbar=null;spiff.Template.call(this,$("<span class='tabStoryPoint'>\n<div class='tabStoryPointToolbar'>\n  <div class='tabStoryRevert'></div>  <div class='tabStoryUpdate'><div class='tabStoryUpdateTextButton'></div><div class='tabStoryUpdateIconButton'></div></div>\n  <div class='tabStoryDelete'></div></div>\n<div class='tabStoryPointCaption' data-tb-test-id=''><div class='tabStoryPointCaptionTop'></div><div class='tabStoryPointCaptionBottom'></div></div></span>"));this.caption=this.getElementBySelector('.tabStoryPointCaption');this.revert=this.getElementBySelector('.tabStoryRevert');this.toolbar=this.getElementBySelector('.tabStoryPointToolbar');this.captionTop=this.getElementBySelector('.tabStoryPointCaptionTop');this.captionBottom=this.getElementBySelector('.tabStoryPointCaptionBottom')});var v=global.tab.StoryPointViewModel=ss.mkType(a,'tab.StoryPointViewModel',function(y,z){this.$7=null;this.$8=0;this.$4=null;this.$5=null;this.$6=null;this.$2$2=null;this.$2$3=null;this.$2$4=null;this.$2$5=null;this.$2$6=null;this.$2$7=null;this.$2$8=null;this.$2$9=null;this.$2$10=null;this.$2$11=null;spiff.BaseViewModel.call(this);this.$7=y;this.$8=z;this.$7.add_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_newFlipboardNav(ss.mkdel(this,this.handleNewFlipboardNav))})))},{add_updatePoint:function(y){this.$2$2=ss.delegateCombine(this.$2$2,y)},remove_updatePoint:function(y){this.$2$2=ss.delegateRemove(this.$2$2,y)},add_flipboardNavTypeChanged:function(y){this.$2$3=ss.delegateCombine(this.$2$3,y)},remove_flipboardNavTypeChanged:function(y){this.$2$3=ss.delegateRemove(this.$2$3,y)},add_pointCaptured:function(y){this.$2$4=ss.delegateCombine(this.$2$4,y)},remove_pointCaptured:function(y){this.$2$4=ss.delegateRemove(this.$2$4,y)},add_pointUpdatedShown:function(y){this.$2$5=ss.delegateCombine(this.$2$5,y)},remove_pointUpdatedShown:function(y){this.$2$5=ss.delegateRemove(this.$2$5,y)},add_showUberMenuForPoint:function(y){this.$2$6=ss.delegateCombine(this.$2$6,y)},remove_showUberMenuForPoint:function(y){this.$2$6=ss.delegateRemove(this.$2$6,y)},add_hideUberMenuForPoint:function(y){this.$2$7=ss.delegateCombine(this.$2$7,y)},remove_hideUberMenuForPoint:function(y){this.$2$7=ss.delegateRemove(this.$2$7,y)},add_closeUberMenu:function(y){this.$2$8=ss.delegateCombine(this.$2$8,y)},remove_closeUberMenu:function(y){this.$2$8=ss.delegateRemove(this.$2$8,y)},add_showUpdatedToastOnReload:function(y){this.$2$9=ss.delegateCombine(this.$2$9,y)},remove_showUpdatedToastOnReload:function(y){this.$2$9=ss.delegateRemove(this.$2$9,y)},add_updatedFlipboardStyles:function(y){this.$2$10=ss.delegateCombine(this.$2$10,y)},remove_updatedFlipboardStyles:function(y){this.$2$10=ss.delegateRemove(this.$2$10,y)},add_findParentScroller:function(y){this.$2$11=ss.delegateCombine(this.$2$11,y)},remove_findParentScroller:function(y){this.$2$11=ss.delegateRemove(this.$2$11,y)},$3:function(){return this.$7.get_storyPoints()[this.$8]},get_isCurrentPoint:function(){return this.$8===this.$7.get_currentPointIndex()},get_isCaptured:function(){return this.$3().isCaptured},get_caption:function(){var y=this.$3().storyPointCaption;return((ss.isNullOrEmptyString(y)&&tsConfig.is_authoring)?tab.Strings.StoryEmptyCaptionText:y)},get_authoringCaption:function(){return this.$3().storyPointCaption},get_storyPointId:function(){return this.$3().storyPointId},get_storyPointIndex:function(){return this.$8},set_StoryPointIndex:function(y){this.$8=y},get_isFirstPoint:function(){return this.get_storyPointIndex()===0},get_isLastPoint:function(){return this.$8===this.$7.get_storyPoints().length-1},get_isOnlyPoint:function(){return this.get_isFirstPoint()&&this.get_isLastPoint()},get_storyPointStyle:function(){if(this.get_isCurrentPoint()){return this.get_selectedStoryPointStyle()}else{return this.get_unselectedStoryPointStyle()}},get_selectedStoryPointStyle:function(){return this.$7.get_flipboardNavPresModel().selectedStoryPointStyle},get_unselectedStoryPointStyle:function(){return this.$7.get_flipboardNavPresModel().unselectedStoryPointStyle},get_width:function(){return this.$7.get_width()},get_height:function(){return this.$7.get_height()},get_isCenteredHorizontally:function(){return this.$7.get_navType()==='number'||this.$7.get_navType()==='arrowonly'},get_isCenteredVertically:function(){return this.$7.get_navType()==='number'||this.$7.get_navType()==='arrowonly'},get_navType:function(){return this.$7.get_navType()},get_isStoryEmpty:function(){return this.$7.get_isStoryEmpty()},get_findCaptionDom:function(){if(ss.staticEquals(this.$5,null)||ss.staticEquals(this.$2$11,null)){return function(){return null}}var y=this.$2$11();var z=this.$5();return ss.mkdel(this,function(){return this.determineCorrectCaptionDom(y,z)})},set_findCaptionDom:function(y){this.$5=y},determineCorrectCaptionDom:function(y,z){var A=this.$0(y,z);if(A.w<z.width()){this.$6=this.$1(A);y[0].appendChild(this.$6.get(0));return this.$6}return z},get_shouldBeAdded:function(){return this.get_navType()==='arrowonly'&&this.get_isCurrentPoint()||this.get_navType()!=='arrowonly'},handleNewFlipboardNav:function(){var y=this.get_navType()!==this.$4;if(y){this.raiseActionEvent(this.$2$3)}else{this.raiseActionEvent(this.$2$2)}this.$4=this.get_navType()},notifyPointWasCaptured:function(){this.raiseActionEvent(this.$2$4)},notifyPointUpdatedWasShown:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$5,this.get_storyPointId())},notifyFlipboardStylesUpdated:function(){this.raiseActionEvent(this.$2$10)},showUberMenu:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$6,this.get_storyPointId())},hideUberMenu:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$7,this.get_storyPointId())},closeUber:function(){this.raiseActionEvent(this.$2$8)},markPointUpdated:function(){this.raiseActionEvent$1(ss.UInt32).call(this,this.$2$9,this.get_storyPointId())},clickStoryPoint:function(){return this.$2(ss.mkdel(this,function(){v.set_isAnyStoryPointLoading(true);return l.setActiveStoryPoint(this.$8,this.$7)}),this.get_isCurrentPoint()).then(function(y){v.set_isAnyStoryPointLoading(false);return y},null)},revertStoryPoint:function(){return this.$2(ss.mkdel(this,function(){return l.revertStoryPoint(tab.ModelUtils.findContentDashboard(null).get_sheetPath(),this.$3().storyPointId)}),this.get_isCaptured())},captureStoryPoint:function(){return this.$2(ss.mkdel(this,function(){return l.captureStoryPoint(this.get_storyPointId())}),this.get_isCaptured())},deleteStoryPoint:function(){tab.DashboardModel.handleStoryPointDeleted(this.get_storyPointId());return this.$2(ss.mkdel(this,function(){return l.deleteStoryPoint(this.get_storyPointId())}),false)},editStoryPointCaption:function(y){return this.$2(ss.mkdel(this,function(){return l.editStoryPointCaption(y,this.get_storyPointId(),this.$7)}),ss.compareStrings(this.get_caption(),y,false)===0)},$2:function(y,z){var A=$.Deferred();if(z){return A.resolve(this)}else{var B=ss.mkdel(this,function(){A.resolve(this)});var C=function(){A.reject(ss.cast(arguments[0],tab.IStoryPointCaptionViewModel))};var D=y();D.then(B,C)}return A.promise()},removeIntersectionCaption:function(){if(ss.isValue(this.$6)){this.$6.remove();this.$6=null}},$0:function(y,z){var A=y[0].getBoundingClientRect();var B=z[0].getBoundingClientRect();var C=Math.max(A.left,B.left);var D=Math.min(A.right,B.right);var E=D-C;var F=C-A.left;var G={x:F,y:B.top-A.top,w:E,h:B.height};return G},$1:function(y){var z=$("<div class='tabStoryPointIntersectionCaption'></div>");z.css({height:y.h+'px',top:y.y+'px',left:y.x+'px',width:y.w+'px'});return z}},{get_isAnyStoryPointLoading:function(){return v.$2$1},set_isAnyStoryPointLoading:function(y){v.$2$1=y}});var w=global.tab.StoryUIEvents=ss.mkType(a,'tab.StoryUIEvents',null,null,{$2:function(y){w.$1$1=ss.delegateCombine(w.$1$1,y)},$3:function(y){w.$1$1=ss.delegateRemove(w.$1$1,y)},$4:function(y){w.$1$2=ss.delegateCombine(w.$1$2,y)},$5:function(y){w.$1$2=ss.delegateRemove(w.$1$2,y)},$0:function(){if(!ss.staticEquals(w.$1$1,null)){w.$1$1()}},$1:function(y){if(!ss.staticEquals(w.$1$2,null)){w.$1$2(y)}}});var x=global.tab.ViewingUberPopupContainer=ss.mkType(a,'tab.ViewingUberPopupContainer',function(){this.$1$1=0;this.$1$2=0},{get_isShowing:function(){return false},get_isShowingWithHide:function(){return false},get_targetStoryPointId:function(){return 0},get_timeoutMs:function(){return this.$1$1},set_timeoutMs:function(y){this.$1$1=y},get_fadeMs:function(){return this.$1$2},set_fadeMs:function(y){this.$1$2=y},updatePoints:function(y,z){},showUber:function(y){},hideUberWithTimeoutAndFade:function(){},hideUberWithFade:function(){},showUberWithTimeoutAndFade:function(y){},close:function(){},dispose:function(){}});ss.initClass(b);ss.initClass(c,spiff.Template,[ss.IDisposable]);ss.initClass(d,ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]),[tab.IWidget,tab.IFlipboardNavigatorView,ss.makeGenericType(tab.IView$1,[tab.IFlipboardNavigatorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(e,spiff.BaseViewModel,[tab.IFlipboardNavigatorViewModel,tab.IViewModel,ss.IDisposable,tab.ICanRequireHandlingOfContextMenuEvents]);ss.initClass(f,spiff.Template,[ss.IDisposable]);ss.initClass(g,ss.makeGenericType(spiff.BaseView$1,[h]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[h]),ss.IDisposable,tab.IAppendableView]);ss.initClass(h,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.IFlipboardViewModel]);ss.initInterface(i,{get_rootTemplate:null,styleCaption:null,handleUpdatePoint:null,setupContent:null},[ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(j,{get_contentTemplate:null,get_captionTemplate:null,get_storyNavigatorContentView:null},[ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initInterface(k,{get_isShowing:null,get_isShowingWithHide:null,get_targetStoryPointId:null,get_timeoutMs:null,set_timeoutMs:null,get_fadeMs:null,set_fadeMs:null,updatePoints:null,showUber:null,hideUberWithTimeoutAndFade:null,hideUberWithFade:null,showUberWithTimeoutAndFade:null,close:null},[ss.IDisposable]);ss.initClass(l);ss.initClass(m,null,[tab.IStoryModule]);ss.initClass(n);ss.initClass(o);ss.initClass(p,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,j,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);p.$ctor1.prototype=p.prototype;ss.initClass(q,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(s,ss.makeGenericType(spiff.BaseView$1,[v]),[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(r,s,[tab.IWidget,i,ss.makeGenericType(tab.IView$1,[v]),ss.IDisposable,tab.IAppendableView]);ss.initClass(t,spiff.Template,[ss.IDisposable]);ss.initClass(u,spiff.Template,[ss.IDisposable]);ss.initClass(v,spiff.BaseViewModel,[tab.IViewModel,ss.IDisposable,tab.IStoryPointCaptionViewModel]);ss.initClass(w);ss.initClass(x,null,[k,ss.IDisposable]);(function(){c.$0="<span class='tabFlipboardNavPoints'></span>"})();(function(){d.horizontalScrollerSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar';d.horizontalScrollerHoverSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar:hover';d.horizontalScrollerIndicatorSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar>.iScrollIndicator';d.horizontalScrollerIndicatorHoverSelector='.tabFlipboardNavScroller '+'.iScrollHorizontalScrollbar>.iScrollIndicator:hover';d.storyPointSelector='.tabFlipboardNavScroller '+'.tabScroller .tabScrollerContent .tabFlipboardNavPoints .tabStoryPoint';d.selectedStoryPointBoxSelector='.tabStoryPointCaption.tabCurrent';d.unselectedStoryPointBoxSelector='.tabStoryPointCaption';d.selectedStoryPointTextSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointTextSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabScrollerContentWindow .tabScrollerContent .tabStoryPointContent';d.selectedStoryPointScrollbarSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar';d.unselectedStoryPointScrollbarSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar';d.selectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.unselectedStoryPointScrollbarIndicatorSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator';d.selectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption.tabCurrent'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.unselectedStoryPointScrollbarIndicatorHoverSelector='.tabStoryPointCaption'+' .tabCustomScroller .tabVerticalScrollbar>.tabScrollbarIndicator:hover';d.selectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionTop,'+'.tabStoryPointCaption.tabCurrent .tabStoryPointCaptionBottom';d.unselectedStoryPointNativeScrollerTopBottomSelector='.tabStoryPointCaption.tabStoryPointCaptionTop,'+'.tabStoryPointCaption .tabStoryPointCaptionBottom';d.selectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption.tabCurrent'+' .tabScroller .tabScrollerContent .tabStoryPointContent';d.unselectedStoryPointNativeScrollerTextSelector='.tabStoryPointCaption'+' .tabScroller .tabScrollerContent .tabStoryPointContent';d.storyStyleSheetId='appendedStoryStyle';tab.ObjectRegistry.registerDeferredType(tab.IFlipboardNavigatorView).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(tab.IFlipboardNavigatorView).call(null,d)}})();(function(){v.$2$1=false})();(function(){w.$1$1=null;w.$1$2=null})();(function(){f.$0="<div class='"+'tabFlipboard'+"'></div>"})();(function(){g.scrollBarThickness=24;g.additionalHeightForMarginsOfContent=3;tab.ObjectRegistry.registerType(g,g).call(null)})();(function(){t.$0="<div class='tabStoryPointContent'></div>"})();(function(){q.circleClassName='tabStoryPointCircle';q.storyPointDotClassName='tabStoryPointDot';q.dotsScale=0.75})();(function(){s.centeredClassName='centered';s.paddedClassName='padded'})();(function(){u.$0="<span class='tabStoryPoint'>\n"+"<div class='tabStoryPointToolbar'>\n"+"  <div class='tabStoryRevert'></div>"+"  <div class='tabStoryUpdate'><div class='tabStoryUpdateTextButton'></div><div class='tabStoryUpdateIconButton'></div></div>\n"+"  <div class='tabStoryDelete'></div>"+'</div>\n'+"<div class='tabStoryPointCaption' data-tb-test-id=''>"+"<div class='tabStoryPointCaptionTop'></div><div class='tabStoryPointCaptionBottom'></div>"+'</div></span>'})();(function(){p.centeredClassName='centered';p.buttonPixelBuffer=12;p.revertUpdateSpacing=4;p.storyPointTestIdPrefix='tabStoryPoint-';tab.ObjectRegistry.registerDeferredType(j).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(j).call(null,p)}})();(function(){tab.ObjectRegistry.registerDeferredType(k).call(null);if(!tsConfig.is_authoring){tab.ObjectRegistry.resolveDeferredType(k).call(null,x)}})()})();;
/*! BEGIN StoryAuthoring */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlstoryauthoring');var b=global.tab.AuthoringFlipboardNavigatorView=ss.mkType(a,'tab.AuthoringFlipboardNavigatorView',function(bb){this.$i=null;this.$f=0;this.$h=0;this.$g=0;this.$k=null;this.$j=null;ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]).call(this,bb,new c);this.$i=new tab.FlipboardNavigatorView(bb);this.$k=new t(ss.mkdel(this,this.$b),function(){},20);this.$j=new t(ss.mkdel(this,this.$a),function(){},20);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$8));EventUtils.DragDropManager.attachDropTarget(this.get_authoringNavTemplate().previousHoverTarget,this.$k);EventUtils.DragDropManager.attachDropTarget(this.get_authoringNavTemplate().nextHoverTarget,this.$j);bb.add_zoneResized(ss.mkdel(this,this.$e));bb.add_remoteUpdateComplete(ss.mkdel(this,this.$e));bb.add_activePointUpdated(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$8));EventUtils.DragDropManager.detachDropTarget(this.get_authoringNavTemplate().previousHoverTarget);EventUtils.DragDropManager.detachDropTarget(this.get_authoringNavTemplate().nextHoverTarget);bb.remove_zoneResized(ss.mkdel(this,this.$e));bb.remove_remoteUpdateComplete(ss.mkdel(this,this.$e));bb.remove_activePointUpdated(ss.mkdel(this,this.$c))})))},{get_dom:function(){return this.$i.get_dom()},get_domRoot:function(){return this.$i.get_domRoot()},get_authoringNavTemplate:function(){return this.get_template()},get_flipboardNavigatorViewModel:function(){return this.get_viewModel()},addToDom:function(bb){this.$i.addToDom(bb);this.$i.get_dom().domRoot.append(this.get_authoringNavTemplate().domRoot);this.$e()},$e:function(){this.get_authoringNavTemplate().nextHoverTarget.width(48);this.get_authoringNavTemplate().previousHoverTarget.width(48);this.get_authoringNavTemplate().nextHoverTarget.height(this.$i.get_viewModel().get_storyPointHeight());this.get_authoringNavTemplate().previousHoverTarget.height(this.$i.get_viewModel().get_storyPointHeight());var bb=this.$i.get_dom().scroller.width();var bc=this.$i.get_dom().previous.outerWidth();var bd=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().previous,'margin-right');var be=(this.get_flipboardNavigatorViewModel().get_showArrows()?(bc+bb+bd+'px'):(bb-4+'px'));var bf=(this.get_flipboardNavigatorViewModel().get_showArrows()?(bc+2*bd-48+'px'):(-48+4+'px'));var bg={top:20+'px',left:be};var bh={top:20+'px',left:bf};this.get_authoringNavTemplate().nextHoverTarget.css(bg);this.get_authoringNavTemplate().previousHoverTarget.css(bh)},$8:function(bb){if(!this.$d(bb)){return}EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$7));this.get_authoringNavTemplate().nextHoverTarget.show();this.get_authoringNavTemplate().previousHoverTarget.show();this.$f=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().next,'margin-left');this.$g=tab.DomUtil.getSizeFromCssPixelProperty(this.$i.get_dom().scroller,'left');if(this.$i.get_viewModel().get_showArrows()){var bc=this.$f-6;var bd=bc+'px';var be={'margin-left':bd};var bf={'margin-right':bd};this.$i.get_dom().next.css(be);this.$i.get_dom().previous.css(bf)}this.$h=this.$i.get_dom().scroller.width();this.$i.get_dom().scroller.width(this.$h+6*2);var bg={'padding-left':6+'px','padding-right':6+'px'};tab.StyleUtil.appendCSSRuleToStyleSheet$1('AuthoringFlipboardNavigatorStyleSheet','.tabFlipboardNavScroller .tabScroller.tabScrollerIScroll',bg)},$7:function(bb){EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$7));this.get_authoringNavTemplate().nextHoverTarget.hide();this.get_authoringNavTemplate().previousHoverTarget.hide();tab.StyleUtil.clearStyleSheet('AuthoringFlipboardNavigatorStyleSheet');if(this.$i.get_viewModel().get_showArrows()){var bc={'margin-left':this.$f+'px'};var bd={'margin-right':this.$f+'px'};this.$i.get_dom().next.css(bc);this.$i.get_dom().previous.css(bd)}else{var be={left:tab.DoubleUtil.roundToInt(this.$g)+'px'};this.$i.get_dom().scroller.css(be)}this.$i.get_dom().scroller.width(this.$h)},$d:function(bb){if(tab.FeatureFlags.isEnabled('StoryInteractions')){return ss.isInstanceOfType(bb,U)||ss.isInstanceOfType(bb,tab.SheetDragInstance)}return ss.isInstanceOfType(bb,U)},$b:function(){this.$9(true)},$a:function(){this.$9(false)},$9:function(bb){var bc=(bb?-6:6);var bd=Math.max(this.$i.get_scrollingView().get_scrollerX()+bc,0);bd=Math.min(bd,this.$i.get_scrollingView().get_viewModel().get_content().clientWidth-ss.trunc(this.$i.get_dom().scroller.width())+2*6);this.$i.get_scrollingView().scrollTo(bd,this.$i.get_scrollingView().get_scrollerY(),10,null)},$c:function(){this.$e()}});var c=global.tab.AuthoringFlipboardNavigatorViewTemplate=ss.mkType(a,'tab.AuthoringFlipboardNavigatorViewTemplate',function(){this.previousHoverTarget=null;this.nextHoverTarget=null;spiff.Template.call(this,$("<span class='tabFlipboardNavHoverTargetsContainer'><div class='tabPreviousHoverTarget'></div><div class='tabNextHoverTarget'></div></span>"));this.previousHoverTarget=this.getElementBySelector('.'+'tabPreviousHoverTarget');this.nextHoverTarget=this.getElementBySelector('.'+'tabNextHoverTarget');this.previousHoverTarget.hide();this.nextHoverTarget.hide()});var d=global.tab.AuthoringStoryboardTemplate=ss.mkType(a,'tab.AuthoringStoryboardTemplate',function(){spiff.Template.call(this,$(''))});var e=global.tab.AuthoringStoryboardView=ss.mkType(a,'tab.AuthoringStoryboardView',function(bb){this.$e=null;this.$g=null;this.$h=null;this.$d=null;this.$f='tabFlipboardDropHighlight';this.$3$1=null;this.$3$2=null;ss.makeGenericType(spiff.BaseView$1,[tab.IAuthoringStoryboardViewModel]).call(this,bb,spiff.Template.fromHtml(''));this.set_emptyFlipboardView(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[m,l,Object])).call(null,[this.get_authoringStoryboardViewModel().get_emptyFlipboardModel()]))},{get_authoringStoryboardViewModel:function(){return this.get_viewModel()},get_zoneSelection:function(){return this.$3$1},set_zoneSelection:function(bb){this.$3$1=bb},get_emptyFlipboardView:function(){return this.$3$2},set_emptyFlipboardView:function(bb){this.$3$2=bb},$c:function(){if(!this.get_authoringStoryboardViewModel().get_isZoneWidgetryEnabled()){return}this.set_zoneSelection(tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[tab.ZoneSelectionViewModel,tab.ZoneSelectionComponent,Object])).call(null,[this.get_authoringStoryboardViewModel().zoneSelection]));this.disposables.add$1(this.get_zoneSelection())},addToDom$1:function(){this.addToDom($(''))},$9:function(){ReactDOM.unmountComponentAtNode(this.get_emptyFlipboardView().get_rootElement()[0])},addToDom:function(bb){this.$9();this.$e=tab.FlipboardView.findFlipboard();this.get_emptyFlipboardView().addToDom(this.$e);if(tab.FeatureFlags.isEnabled('StoryInteractions')){this.$8()}this.$c();this.$h=tab.WorkbookView.findDashboardContainer();this.get_zoneSelection().addToDom(this.$h)},$8:function(){this.$d=new H.$ctor1(ss.mkdel(this,this.$a),ss.mkdel(this,this.$7),ss.mkdel(this,this.$b));EventUtils.DragDropManager.attachDropTarget(this.$e,this.$d);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.detachDropTarget(this.$e)})))},$a:function(){return this.get_authoringStoryboardViewModel().get_emptyFlipboardModel().get_storyPointId()},$7:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')){if(this.get_emptyFlipboardView().get_viewModel().get_isCurrentStoryPointEmpty()){tab.FlipboardView.findFlipboard().addClass(this.$f)}else{if($('.replaceStoryTarget').length===0){this.$g=$("<div class='replaceStoryTarget'></div>");$(this.$e[0]).append(this.$g)}var bb=React.createElement(w,new x);ReactDOM.render(bb,this.$g[0])}}},$b:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')){if(this.get_emptyFlipboardView().get_viewModel().get_isCurrentStoryPointEmpty()){tab.FlipboardView.findFlipboard().removeClass(this.$f)}else{ReactDOM.unmountComponentAtNode(this.$g[0]);this.$g.remove()}}}});var f=global.tab.AuthoringStoryboardViewModel=ss.mkType(a,'tab.AuthoringStoryboardViewModel',function(bb){this.$4=null;this.$2$1=null;this.$2$2=null;this.$2$3=null;this.zoneSelection=null;spiff.BaseViewModel.call(this);this.$4=bb;this.$0(new G(bb));this.$1(new J(bb));this.set_emptyFlipboardModel(new m(bb));this.$3()},{get_isZoneWidgetryEnabled:function(){return tabBootstrap.Affordances.isOn('zoneWidgetry')},get_leftPanelContentPaneViewModel:function(){return this.$2$1},$0:function(bb){this.$2$1=bb},get_leftPanelLayoutPaneViewModel:function(){return this.$2$2},$1:function(bb){this.$2$2=bb},get_emptyFlipboardModel:function(){return this.$2$3},set_emptyFlipboardModel:function(bb){this.$2$3=bb},$3:function(){this.zoneSelection=new tab.ZoneSelectionViewModel(this.$4,ss.mkdel(this,this.$2),null,false);this.disposables.add$1(this.zoneSelection)},$2:function(bb,bc){return false}});var g=global.tab.AuthoringUberPopupContainer=ss.mkType(a,'tab.AuthoringUberPopupContainer',function(){this.$a=null;this.$9=300;this.$7=600;this.$8=null;this.$1$1=0;this.fadeWindowId=null;this.timeoutWindowId=null;this.storyPointViewModels=null},{get_isShowing:function(){return ss.isValue(this.$a)},get_isShowingWithHide:function(){return ss.isValue(this.fadeWindowId)||ss.isValue(this.timeoutWindowId)},get_isLoaded:function(){return ss.isValue(this.storyPointViewModels)},get_targetStoryPointId:function(){return this.$1$1},$0:function(bb){this.$1$1=bb},get_timeoutMs:function(){return this.$9},set_timeoutMs:function(bb){this.$9=bb},get_fadeMs:function(){return this.$7},set_fadeMs:function(bb){this.$7=bb},$6:function(){if(!ss.isValue(this.$8)){return 120}return ss.unbox(this.$8)},updatePoints:function(bb,bc){this.storyPointViewModels=bb;var bd=this.$5(bc);if(!bd){this.$1()}},showUber:function(bb){if(this.get_isShowing()&&!this.get_isShowingWithHide()&&bb===this.get_targetStoryPointId()){return}else if(this.get_isShowingWithHide()&&bb===this.get_targetStoryPointId()){this.clearTimeouts();var bc=$('.'+'tabStoryUberMenuContainer');var bd={};bd['transition-duration']='0ms';bc.css(bd);bc.removeClass('tabFadeOut');return}if(this.get_isShowing()){this.$a.hide(false);this.$a.dispose()}this.clearTimeouts();var be=tab.FlipboardNavigatorExtensions.getViewModelFromStoryId(this.storyPointViewModels,bb);var bf=be.get_findCaptionDom()();if(ss.isNullOrUndefined(bf)){return}spiff.SpiffBrowserViewport.getViewport(this.$4(be,bf));this.$0(be.get_storyPointId())},$4:function(bb,bc){return ss.mkdel(this,function(bd){var be=bd.get_dimensions().l;var bf=be+bd.get_dimensions().w;var bg=bc[0].getBoundingClientRect();var bh=((bg.left<be)?be:bg.left);var bi=((bg.right>bf)?bf:bg.right);var bj=this.$6()/2;if(bh+bj<=bf||bi-bj>=bf){this.$a=this.$2(bc,bb);this.$a.add_hidden(function(){bb.removeIntersectionCaption()});this.$a.options.focusOnShown=false;this.$a.show();if(!ss.isValue(this.$8)){this.$8=$('.'+'tabStoryUberMenuContainer').width()}}})},$2:function(bb,bc){return spiff.UberPopupViewModel.createForContentUsingCaretStyle(new Z(bc),bb,'tabStoryUberMenuContainer',null,true)},hideUberWithTimeoutAndFade:function(){if(!this.get_isShowing()||this.get_isShowingWithHide()){return}this.timeoutWindowId=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.timeoutWindowId=tab.MiscUtil.clearTimeout(this.timeoutWindowId);this.hideUberWithFade()}),this.get_timeoutMs())},hideUberWithFade:function(){if(!this.get_isShowing()||this.get_isShowingWithHide()){return}this.fadeWindowId=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.clearTimeouts();this.$3()}),this.get_fadeMs());var bb=$('.'+'tabStoryUberMenuContainer');var bc={};bc['transition-duration']=this.get_fadeMs().toString()+'ms';bb.css(bc);bb.addClass('tabFadeOut')},showUberWithTimeoutAndFade:function(bb){this.showUber(bb);this.hideUberWithTimeoutAndFade()},close:function(){tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.clearTimeouts();this.$3()}),1)},dispose:function(){this.$3()},clearTimeouts:function(){this.fadeWindowId=tab.MiscUtil.clearTimeout(this.fadeWindowId);this.timeoutWindowId=tab.MiscUtil.clearTimeout(this.timeoutWindowId)},$3:function(){if(ss.isNullOrUndefined(this.$a)){return}this.$a.hide(false);this.$a.dispose();this.$a=null;this.clearTimeouts()},$1:function(){if(!this.get_isShowing()){return}var bb=this.get_targetStoryPointId();var bc=tab.FlipboardNavigatorExtensions.getViewModelFromStoryId(this.storyPointViewModels,bb);if(ss.isNullOrUndefined(bc)){this.close()}else if(this.get_isShowingWithHide()){this.showUberWithTimeoutAndFade(bb)}else if(bc.get_isCaptured()){this.hideUberWithFade()}else{this.showUber(bb)}},$5:function(bb){var bc=_.find(this.storyPointViewModels,function(bd){return!bd.get_isCaptured()&&bd.get_storyPointId()===bb});if(ss.isValue(bc)){this.showUber(bc.get_storyPointId());return true}return false}});var h=global.tab.CaptionResizeDragComponent=ss.mkType(a,'tab.CaptionResizeDragComponent',function(bb){this.$4=null;this.$5=null;spiff.PureRenderComponent.call(this,bb);this.$5=new Map;this.$5.set(3,ss.mkdel(this,function(bc){this.$0(bc,[3])}));this.$5.set(0,ss.mkdel(this,function(bc){this.$0(bc,[0])}));this.$5.set(1,ss.mkdel(this,function(bc){this.$0(bc,[1])}));this.$4=new Map;this.$4.set(h.$1,ss.mkdel(this,function(bc){this.$0(bc,h.$1)}));this.$4.set(h.$2,ss.mkdel(this,function(bc){this.$0(bc,h.$2)}))},{render:function(){var bb=this.$1();var bc={className:'captionResizeParent','data-tb-test-id':'captionResizeParent'};return spiff.DOMElements.div(bc,this.$3(bb,'tabZoneBottomResizer',3),this.$3(bb,'tabZoneRightResizer',1),this.$3(bb,'tabZoneLeftResizer',0),this.$2(bb,'tabZoneSWResizer',h.$2),this.$2(bb,'tabZoneSEResizer',h.$1))},$1:function(){var bb=this.props.captionRect;return{l:-ss.idiv(12,2),t:0,w:bb.w+12,h:bb.h+ss.idiv(12,2)}},$3:function(bb,bc,bd){return spiff.DOMElements.div({className:bc,style:tab.ZoneChromeConstants.getEdgeCss(bb,bd,12),ref:this.$5.get(bd)})},$2:function(bb,bc,bd){return spiff.DOMElements.div({className:bc,style:tab.ZoneChromeConstants.getCornerCss(bb,bd[0],bd[1],12),ref:this.$4.get(bd)})},$0:function(bb,bc){if(ss.isValue(bb)){var bd=$(bb);if(!EventUtils.DragDropManager.isDragSource(bd)){var be=this.props.resizeDragSourceFactory(bc);EventUtils.DragDropManager.attachDragSource(bd,be)}}}});var i=global.tab.CaptionResizeDragInstance=ss.mkType(a,'tab.CaptionResizeDragInstance',function(bb,bc,bd,be,bf){tab.FloatingResizeDragInstance.call(this,bb,bc,bd,be,bf)});var j=global.tab.CaptionResizeDragSource=ss.mkType(a,'tab.CaptionResizeDragSource',function(bb,bc,bd,be){this.$3=null;this.$4=null;this.$1=0;this.$2=0;this.$3=bb;this.$4=bc;this.$1=bd;this.$2=be},{startDrag:function(bb){var bc=new k(ss.mkdel(this,this.$0),this.$3,this.$4,this.$1,this.$2);return bc.startDrag(bb)},acceptsDragType:function(){return 1},$0:function(bb){return y.setStoryPointCaptionWidthAndFlipboardNavHeight(bb.h+31,bb.w)}});var k=global.tab.CaptionResizeViewModel=ss.mkType(a,'tab.CaptionResizeViewModel',function(bb,bc,bd,be,bf){tab.FloatingResizeViewModel.call(this,bb,bc,bd,be,bf)},{createDragIntance:function(bb){return new i($(bb.target),this,ss.mkdel(this,this.onMove),ss.mkdel(this,this.onDrop),null)}});var l=global.tab.EmptyFlipboardComponent=ss.mkType(a,'tab.EmptyFlipboardComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){if(ss.isNullOrEmptyString(this.props.emptyFlipboardTitle)||ss.isNullOrEmptyString(this.props.emptyFlipboardTitle)){return null}else{var bb=spiff.DOMElements.div({className:'tabEmptyFlipboardTitle'},this.props.emptyFlipboardTitle);var bc=spiff.DOMElements.div({className:'tabEmptyFlipboardSubtitle'},this.props.emptyFlipboardSubtitle);return spiff.DOMElements.div({className:'tabEmptyFlipboardMessage'},bb,bc)}}});var m=global.tab.EmptyFlipboardViewModel=ss.mkType(a,'tab.EmptyFlipboardViewModel',function(bb){this.$6=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$6=bb;this.disposables.add$1(this.$6.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$6.get_model())){this.$3()}})).addEventBinding(ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboard())){bc.get_flipboard().get_storyPointModel().add_newStoryPoint(ss.mkdel(this,this.$5));bc.get_flipboard().get_storyPointModel().add_newStoryContent(ss.mkdel(this,this.$4))}}),ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboard())){bc.get_flipboard().get_storyPointModel().remove_newStoryPoint(ss.mkdel(this,this.$5));bc.get_flipboard().get_storyPointModel().remove_newStoryContent(ss.mkdel(this,this.$4))}})))},{get_isCurrentStoryPointEmpty:function(){var bb=this.$6.get_model();if(ss.isNullOrUndefined(bb)||ss.isNullOrUndefined(bb.get_flipboard())){return true}return ss.isNullOrEmptyString(bb.get_flipboard().get_storyPointModel().get_currentSheet())},get_storyPointId:function(){var bb=this.$6.get_model();if(ss.isNullOrUndefined(bb)||ss.isNullOrUndefined(bb.get_flipboard())){return 0}return bb.get_flipboard().get_storyPointModel().get_storyPointId()},get_isBackingSheetDashboard:function(){var bb=this.$6.get_model();return bb.get_flipboard().get_storyPointModel().get_isBackingSheetDashboard()},get_isBackingWorksheetEmpty:function(){var bb=tab.ModelUtils.findActiveOrDefaultVisual(null);if(ss.isNullOrUndefined(bb)){return false}var bc=bb.get_vizDataModel();if(ss.isNullOrUndefined(bc)){return false}return bc.get_filterFields().length===0&&bc.get_fieldCaptions().length===0&&!bc.get_hasTupleIdColumn()},get_isBackingDashboardEmpty:function(){var bb=this.$6.get_model();var bc=bb.get_flipboard().get_dashboardModel().get_zoneModels();return ss.isNullOrUndefined(bc)||bc.length<=0},$3:function(){this.incrementProps()},$5:function(){this.incrementProps()},$4:function(){this.incrementProps()},createUpdatedProps:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')&&this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyFlipboardTitleBE,emptyFlipboardSubtitle:tab.Strings.StoryEmptyFlipboardSubtitleBE}}if(this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyFlipboardTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyFlipboardSubtitle}}if(!this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()&&!this.get_isBackingSheetDashboard()&&this.get_isBackingWorksheetEmpty()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyWorksheetStoryPointTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyWorksheetStoryPointSubtitle}}if(!this.get_isCurrentStoryPointEmpty()&&!this.$6.get_model().get_hasDescription()&&this.get_isBackingSheetDashboard()&&this.get_isBackingDashboardEmpty()){return{emptyFlipboardTitle:tab.Strings.StoryEmptyDashboardStoryPointTitle,emptyFlipboardSubtitle:tab.Strings.StoryEmptyDashboardStoryPointSubtitle}}return{emptyFlipboardTitle:null,emptyFlipboardSubtitle:null}}});var n=global.tab.FlipboardLocation=ss.mkEnum(a,'tab.FlipboardLocation',{top:0,bottom:1});var o=global.tab.FlipboardLocationComponent=ss.mkType(a,'tab.FlipboardLocationComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){var bb=[];for(var bc=0;bc<this.props.allowedLocations.length;bc++){var bd=this.props.allowedLocations[bc];bb.push({label:bd.label,value:bd.location,testId:bd.location.toString(),disabled:bd.location===1})}var be=_.map(this.props.allowedLocations,function(bh){return bh.location});var bf=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{checkedIndex:_.indexOf(be,this.props.currentLocation),buttonList:bb,handleChange:ss.mkdel(this,function(bh,bi){this.$0(bh)})});var bg=spiff.DOMElements.div({className:['tab-SectionContent','tab-FlipboardLocationSelectionScroller'].join(' ')},bf);return spiff.DOMElements.div({className:'tab-SectionContent'},this.renderTitle(),bg)},renderTitle:function(){return spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.StoryPointNavigatorLocationTitle)},$0:function(bb){}});var p=global.tab.FlipboardLocationViewModel=ss.mkType(a,'tab.FlipboardLocationViewModel',function(bb){this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=bb;this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$4.get_model())){this.$3()}})))},{createInitialProps:function(){var bb=[{label:tab.Strings.StoryPointNavigatorLocationTop,location:0},{label:tab.Strings.StoryPointNavigatorLocationBottom,location:1}];return{allowedLocations:bb}},createUpdatedProps:function(){return{currentLocation:0}},$3:function(){var bb=this.$4.get_model().get_flipboardNavModel();if(ss.isValue(bb)){this.incrementProps()}}});var q=global.tab.FlipboardNavTypeComponent=ss.mkType(a,'tab.FlipboardNavTypeComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-SectionContent'},this.$2(),this.renderButtons())},renderButtons:function(){var bb=[];for(var bc=0;bc<this.props.flipboardNavTypes.length;bc++){var bd=this.props.flipboardNavTypes[bc];bb.push({label:bd.label,value:bd.navType,testId:'NavRadioButton'})}var be=_.map(this.props.flipboardNavTypes,function(bg){return bg.navType});var bf=React.createElement(SharedWidgets.RadioButtonWithLabelGroupWidget,{checkedIndex:_.indexOf(be,this.props.currentNavType),buttonList:bb,handleChange:ss.mkdel(this,function(bg,bh){this.$0(bg)})});if(this.props.flipboardNavTypes.length===1){return this.$1()}else{return spiff.DOMElements.div({className:'tab-FlipboardNavSelectionGroup'},bf,this.$1())}},$1:function(){var bb=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.StoryPointNavigatorShowArrows,checked:this.props.arrowsVisible,handleChange:this.props.setArrowVisibility,testId:'ArrowVisibilityCheckbox',disabled:!this.props.toggleArrowVisibilityEnabled});return spiff.DOMElements.div({className:['tab-SectionContent','tab-FlipboardNavSelectionArrowsVisibility'].join(' ')},bb)},$2:function(){var bb=tab.DashboardLeftPaneConstants.get_titleHTMLAttr();bb.className=[bb.className,'tab-NavigatorStyleTitle'].join(' ');return spiff.DOMElements.div(bb,tab.Strings.StoryNavigatorStyle)},$0:function(bb){if(!ss.staticEquals(this.props.setFlipboardNavType,null)){var bc=bb;this.props.setFlipboardNavType(bc)}}});var r=global.tab.FlipboardNavTypeViewModel=ss.mkType(a,'tab.FlipboardNavTypeViewModel',function(bb){this.$8=null;this.$a=null;this.$9=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$a=bb;this.disposables.add$1(this.$a.newDisposableContext().addModelChangedHandler(ss.mkdel(this,function(){if(ss.isValue(this.$a.get_model())){this.$4(this.$a.get_model())}})).addEventBinding(ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboardNavModel())){bc.get_flipboardNavModel().add_newFlipboardNav(ss.mkdel(this,this.$3))}}),ss.mkdel(this,function(bc){if(ss.isValue(bc.get_flipboardNavModel())){bc.get_flipboardNavModel().remove_newFlipboardNav(ss.mkdel(this,this.$3))}})))},{get_currentNavType:function(){return this.$8.get_navType()},get_toggleArrowVisibilityEnabled:function(){return ss.isValue(this.$8)&&this.$8.get_storyPoints().length>1&&this.$8.get_navType()!=='arrowonly'},$5:function(bb){if(ss.isNullOrUndefined(this.$8)||this.get_currentNavType()!==bb){return false}return true},$3:function(){this.incrementProps()},createInitialProps:function(){this.$9=[];this.$9.push({label:tab.Strings.StoryNavigatorTypeCaption,navType:'caption'});this.$9.push({label:tab.Strings.StoryNavigatorTypeNumber,navType:'number'});this.$9.push({label:tab.Strings.StoryNavigatorTypeDot,navType:'dot'});this.$9.push({label:tab.Strings.StoryNavigatorTypeArrowOnly,navType:'arrowonly'});return{setFlipboardNavType:ss.mkdel(this,this.$7),setArrowVisibility:ss.mkdel(this,this.$6),arrowsVisible:false,currentNavType:'caption',flipboardNavTypes:Array.prototype.slice.call(this.$9),toggleArrowVisibilityEnabled:this.get_toggleArrowVisibilityEnabled()}},createUpdatedProps:function(){if(ss.isNullOrUndefined(this.$8)){return{}}return{currentNavType:this.$8.get_navType(),arrowsVisible:this.$8.get_arrowVisibility(),toggleArrowVisibilityEnabled:this.get_toggleArrowVisibilityEnabled()}},$4:function(bb){var bc=bb.get_flipboardNavModel();if(ss.isValue(bc)){this.$8=bc;this.incrementProps()}},$7:function(bb){if(bb!==this.$8.get_navType()){tab.StoryClientCommands.setFlipboardNavType(bb).then(function(){C.logSetFlipboardNavTypeEvent(bb,true,false)},function(){C.logSetFlipboardNavTypeEvent(bb,false,false)})}else{C.logSetFlipboardNavTypeEvent(bb,false,true)}},$6:function(bb){if(bb!==this.$8.get_arrowVisibility()){tab.StoryClientCommands.toggleArrows().then(function(){C.logToggleArrowsEvent(bb,true,false)},function(){C.logToggleArrowsEvent(bb,false,false)})}else{C.logToggleArrowsEvent(bb,false,true)}}});var s=global.tab.IStoryNavigatorAuthoringContentView=ss.mkType(a,'tab.IStoryNavigatorAuthoringContentView');var t=global.tab.NavigatorArrowHoverHandler=ss.mkType(a,'tab.NavigatorArrowHoverHandler',function(bb,bc,bd){this.$3=null;this.$4=null;this.$2=0;this.$5=null;this.$3=bb;this.$4=bc;this.$2=bd},{get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(bb){if(!this.$1(bb)){return null}if(!ss.staticEquals(this.$3,null)){this.$3()}if(!ss.isValue(this.$5)){this.$5=tab.WindowHelper.setInterval(this.$3,this.$2)}return this},dragExit:function(bb){this.$0(bb)},acceptDrop:function(bb){this.$0(bb);var bc=$.Deferred();bc.resolve(false);return bc},getDropTarget:function(bb){return this},getDropCursor:function(bb){return spiff.CustomCursor.noOp},$1:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);var bd=ss.safeCast(bb,U);return ss.isValue(bc)||ss.isValue(bd)},$0:function(bb){if(!this.$1(bb)){return}this.$5=tab.MiscUtil.clearInterval(this.$5);if(!ss.staticEquals(this.$4,null)){this.$4()}}});var u=global.tab.NewStorypointComponent=ss.mkType(a,'tab.NewStorypointComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:['tab-SectionContent','tab-NewStoryPointContent'].join(' ')},this.$1(),this.$0())},$1:function(){return spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.StoryNewPointSectionTitle)},$0:function(){var bb=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(bd){this.props.handleNewPointClicked()}),buttonType:3,testId:'tab-NewBlankPointButton',key:'tab-NewBlankPointButton',children:tab.Strings.StoryContentPaneBlankButton,density:'high',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace,marginRight:SharedWidgets.TabStyles.Spacing.DefaultSpace}});var bc=React.createElement(SharedWidgets.ButtonWidget,{handleClick:ss.mkdel(this,function(bd){this.props.handleDuplicateClicked()}),buttonType:3,testId:'tab-DuplicatePointButton',key:'tab-DuplicatePointButton',children:tab.Strings.StoryContentPaneDuplicateButton,density:'high',style:{marginTop:SharedWidgets.TabStyles.Spacing.MediumSpace},disabled:this.props.isStorypointEmpty});return spiff.DOMElements.div({className:'tabStoryPaneToggleButtons',style:{display:'flex',flexFlow:'wrap'}},bb,bc)}});var v=global.tab.NewStorypointViewModel=ss.mkType(a,'tab.NewStorypointViewModel',function(bb){this.$7=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.disposables.add$1(bb.newDisposableContext().addEventBinding(ss.mkdel(this,function(bc){this.$7=bc.get_flipboardNavModel();if(ss.isValue(this.$7)){this.$7.add_newFlipboardNav(ss.mkdel(this,this.incrementProps))}}),ss.mkdel(this,function(bc){if(ss.isValue(this.$7)){this.$7.remove_newFlipboardNav(ss.mkdel(this,this.incrementProps));this.$7=null}})))},{createUpdatedProps:function(){return{isStorypointEmpty:(ss.isNullOrUndefined(this.$7)?true:this.$7.get_isCurrentStoryPointEmpty()),handleNewPointClicked:ss.mkdel(this,this.$4),handleDuplicateClicked:ss.mkdel(this,this.$3),handleSaveAsNewPointClicked:ss.mkdel(this,this.$5)}},$4:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$6();tab.StoryClientCommands.newBlankStoryPoint().then(function(){C.logNewStoryPointEvent(4,true)},function(){C.logNewStoryPointEvent(4,false)})},$3:function(){if(ss.isNullOrUndefined(this.$7)){return}this.$6();tab.StoryClientCommands.duplicateActiveStoryPoint().then(function(){C.logNewStoryPointEvent(5,true)},function(){C.logNewStoryPointEvent(5,false)})},$5:function(){if(ss.isNullOrUndefined(this.$7)){return}tab.StoryClientCommands.saveActiveStoryPointAsNew()},$6:function(){var bb=this.$7.get_storyPoints()[this.$7.get_currentPointIndex()];if(!bb.isCaptured){tab.ModuleManager.load$1(tab.IStoryModule).call(null,[]).done(function(bc){bc.fireShowUpdateToast(bb.storyPointId)})}}});var w=global.tab.ReplaceStoryFeedbackComponent=ss.mkType(a,'tab.ReplaceStoryFeedbackComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){var bb=spiff.DOMElements.div({className:'tabReplaceStoryFeedbackBackground'});var bc=spiff.DOMElements.div({className:'tabReplaceMessage'},tab.Strings.StoryReplaceMessage);return spiff.DOMElements.div({className:'tabReplaceStoryFeedbackWrapper'},bb,bc)}});var x=global.tab.ReplaceStoryFeedbackProps=ss.mkType(a,'tab.ReplaceStoryFeedbackProps',function(){});var y=global.tab.StoryAuthoringCommands=ss.mkType(a,'tab.StoryAuthoringCommands',null,null,{setStoryPointCaptionWidthAndFlipboardNavHeight:function(bb,bc){var bd=new tab.SetStoryPointCaptionWidthAndFlipboardNavHeightCmd;bd.c['storyboard']=tsConfig.current_sheet_name;bd.c['h']=bb|0;bd.c['w']=bc|0;var be=bd;return be.invoke()}});var z=global.tab.StoryAuthoringFactory=ss.mkType(a,'tab.StoryAuthoringFactory',function(){tab.StoryFactory.call(this)},{newAuthoringStoryboardViewModel:function(bb){return new f(bb)}});var A=global.tab.StoryAuthoringFloatingTextZoneComponent=ss.mkType(a,'tab.StoryAuthoringFloatingTextZoneComponent',function(bb,bc){this.$2=null;spiff.PureRenderComponent.$ctor1.call(this,bb,bc);this.$2=spiff.ReactRefs.attachDragSource(ss.mkdel(this,function(){return this}))},{startDrag:function(bb){return this.props.createDragInstance()},acceptsDragType:function(){return 1},render:function(){var bb=this.$1();var bc=new EventUtils.EventHandleSpec;bc.doubleTap=ss.mkdel(this,this.$0);var bd=bc;return EventUtils.EventForwarder.div(bd,{ref:this.$2,className:'tabAddTextToStory'},bb)},$1:function(){return spiff.DOMElements.span({key:'newFloatingTextZone',children:tab.Strings.AddFloatingTextZoneInStoriesLabel,className:'tab-FloatingTextZone'})},$0:function(bb){if(!tsConfig.is_mobile){this.props.addTextZoneToStoryboard()}}});var B=global.tab.StoryAuthoringFloatingTextZoneViewModel=ss.mkType(a,'tab.StoryAuthoringFloatingTextZoneViewModel',function(){ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this)},{createInitialProps:function(){return{addTextZoneToStoryboard:ss.mkdel(this,this.$3),createDragInstance:ss.mkdel(this,this.$4)}},createUpdatedProps:function(){return{}},$3:function(){tab.StoryClientCommands.addNewTextZoneToStoryboard().done(function(bb){if(tab.FeatureFlags.isEnabled('StoryInteractions')){tab.RichTextClientCommands.launchTextObjectRichTextEditor(bb.zoneId,true)}})},$4:function(){var bb=tab.DashboardClientCommands.getSheetDragDropTargets(null,null);var bc=$.Deferred();bb.done(function(bf){bc.resolve(bf.zoneDragDrop)}).fail(function(){bc.reject()});var bd=tab.ZoneDragAvatarViewModel.createDeferredRect(bc);var be=tab.ZoneObjectDragInstance.create(new tab.DraggedZoneObject('text',false,true,'invalid',null,null),bc,bd);return be}});var C=global.tab.StoryAuthoringTelemetry=ss.mkType(a,'tab.StoryAuthoringTelemetry',null,null,{$0:function(){return tab.OnlineAnalyticsClient.get_telemetryEnabled()},logSetFlipboardNavTypeEvent:function(bb,bc,bd){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.NavType',ss.mkdict(['NavStyle',bb.toString(),'Success',bc,'SameAsServer',bd]))},logUberMenuEvent:function(bb,bc){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.UberMenu',ss.mkdict(['MenuItem',D.asString(bb),'Success',bc]))},logNewStoryPointEvent:function(bb,bc){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.NewStoryPoint',ss.mkdict(['StoryPointType',D.asString(bb),'Success',bc]))},logToggleArrowsEvent:function(bb,bc,bd){if(!C.$0()){return}tab.OnlineAnalyticsClient.logEvent('StoryAuthoring.ToggleArrows',ss.mkdict(['Visible',bb,'Success',bc,'SameAsServer',bd]))}});var D=global.tab.StoryAuthoringTelemetryUtil=ss.mkType(a,'tab.StoryAuthoringTelemetryUtil',null,null,{asString:function(bb){var bc='';switch(bb){case 0:{bc='Delete';break}case 1:{bc='Revert';break}case 2:{bc='Update';break}case 3:{bc='Save as new point';break}case 4:{bc='Blank';break}case 5:{bc='Duplicate';break}default:{bc='';break}}return bc}});var E=global.tab.StoryContentLeftPaneConstants=ss.mkType(a,'tab.StoryContentLeftPaneConstants');var F=global.tab.StoryContentPaneComponent=ss.mkType(a,'tab.StoryContentPaneComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-StoryContentPane'},this.$2(),this.$3(),this.$1(),this.$5(),this.$4())},$2:function(){return spiff.DOMElements.div({className:['tab-Section','tab-NewStoryPoint'].join(' ')},React.createElement(u,this.props.newDuplicateButtonsProps))},$3:function(){var bb=React.createElement(tab.DashboardSheetListComponent,this.props.sheets);var bc=new EventUtils.EventHandleSpec;bc.tap=ss.mkdel(this,this.$0);var bd=bc;return EventUtils.EventForwarder.div(bd,{className:['tab-Section','tab-SectionSheetList'].join(' ')},spiff.DOMElements.div(tab.DashboardLeftPaneConstants.get_titleHTMLAttr(),tab.Strings.AuthDashboardPaneSheets),spiff.DOMElements.div(tab.DashboardLeftPaneConstants.get_contentHTMLAttr(),bb))},$1:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')){return spiff.DOMElements.div({className:['tab-Section','tab-NewFloatingTextSection'].join(' ')},React.createElement(A,this.props.storyFloatingTextZoneProps))}else{return spiff.DOMElements.div({})}},$5:function(){return spiff.DOMElements.div({className:['tab-Section','tab-TitleToggleSection'].join(' ')},React.createElement(W,this.props.titleToggleProps))},$4:function(){var bb=React.createElement(tab.DashboardSizeComponent,this.props.storySizeProps);var bc=spiff.DOMElements.div({className:'tab-SectionTitle'},tab.Strings.AuthDashboardPaneSizeDefault);return spiff.DOMElements.div({className:['tab-Section','tab-StorySizeSelection'].join(' ')},bc,bb)},$0:function(bb){var bc=$(bb.target);var bd=bc.hasClass('tabAuthSheetListItem')||bc.parents('.'+'tabAuthSheetListItem').length>0;if(!bd){this.props.sheets.actions.clearSelection()}}});var G=global.tab.StoryContentPaneViewModel=ss.mkType(a,'tab.StoryContentPaneViewModel',function(bb){this.$8=null;this.$4=null;this.$6=null;this.$3=null;this.$7=null;this.$5=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);var bc=new tab.DashboardNewObjectsModel;var bd=new V(bb);this.$4=new tab.SheetListViewModel(bb,bc,bd);this.$3=new tab.DashboardSizeViewModel(bb);this.$6=new v(bb);this.$7=new X(bb);if(tab.FeatureFlags.isEnabled('StoryInteractions')){this.$5=new B}this.$8=bb;this.disposables.add$2([this.addChildViewModel(this.$4),this.addChildViewModel(this.$6),this.addChildViewModel(this.$3),this.$4,this.$6,this.$3]);this.disposables.add$2([this.addChildViewModel(this.$7),this.$7]);this.disposables.add$1(this.$8.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(be){be.add_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(be){be.remove_currentDeviceLayoutChanged(ss.mkdel(this,this.incrementProps))})))},{get_title:function(){return tab.Strings.StoryContentPaneTitle},get_id:function(){return'story-content'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[G,F,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthStoryContentPane'},createUpdatedProps:function(){return{sheets:this.$4.get_props(),newDuplicateButtonsProps:this.$6.get_props(),storySizeProps:this.$3.get_props(),titleToggleProps:this.$7.get_props(),storyFloatingTextZoneProps:(tab.FeatureFlags.isEnabled('StoryInteractions')?this.$5.get_props():null)}}});var H=global.tab.StoryFlipboardDropHandler=ss.mkType(a,'tab.StoryFlipboardDropHandler',function(){this.$3=null;this.$2=null;this.$1=null},{get_feedbackType:function(){return'dropfeedbackuponentry'},acceptsDragType:function(){return 1},dragOver:function(bb){if(!this.isDragInstanceSupported(bb)){return null}if(!ss.staticEquals(this.$3,null)){this.$3();EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$0))}return this},dragExit:function(bb){if(!ss.staticEquals(this.$2,null)){this.$2()}},acceptDrop:function(bb){var bc=this.isDragInstanceSupported(bb);var bd=$.Deferred();bd.resolve(bc);if(bc){if(tab.FeatureFlags.isEnabled('StoryInteractions')){var be=ss.safeCast(bb,tab.SheetDragInstance);var bf=be.dragged.sheetName;tab.StoryClientCommands.replaceStoryPoint(bf,this.$1())}}return bd},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.isDragInstanceSupported(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},isDragInstanceSupported:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc)},$0:function(bb){this.dragExit(bb.drag);EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$0))}},{$ctor1:function(bb,bc,bd){this.$3=null;this.$2=null;this.$1=null;this.$1=bb;this.$3=bc;this.$2=bd}});var I=global.tab.StoryLayoutPaneComponent=ss.mkType(a,'tab.StoryLayoutPaneComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return spiff.DOMElements.div({className:'tab-Section'},this.$1(),this.$0())},$1:function(){var bb=React.createElement(q,this.props.flipboardNavTypeProps);return spiff.DOMElements.div({className:['tab-SectionContent','tab-NavigatorTypeItemsContainer'].join(' ')},bb)},$0:function(){return spiff.DOMElements.div({})}});var J=global.tab.StoryLayoutPaneViewModel=ss.mkType(a,'tab.StoryLayoutPaneViewModel',function(bb){this.$3$1=null;this.$3$2=null;this.$3$3=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$8(new r(bb));this.$4(new tab.DashboardSizeViewModel(bb));this.$6(new p(bb));this.disposables.add$2([this.addChildViewModel(this.$7()),this.addChildViewModel(this.$5()),this.$7(),this.$5()])},{get_title:function(){return tab.Strings.AuthLeftLayoutPaneLabel},get_id:function(){return'story-layout'},get_contentViewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[J,I,Object])},get_contentViewModel:function(){return this},get_additionalContentViewClass:function(){return'tabAuthStoryLayoutPane'},$7:function(){return this.$3$1},$8:function(bb){this.$3$1=bb},$3:function(){return this.$3$2},$4:function(bb){this.$3$2=bb},$5:function(){return this.$3$3},$6:function(bb){this.$3$3=bb},createUpdatedProps:function(){return{flipboardNavTypeProps:this.$7().get_props(),flipboardLocationProps:this.$5().get_props()}}});var K=global.tab.StoryNavigatorAuthoringContentViewFactory=ss.mkType(a,'tab.StoryNavigatorAuthoringContentViewFactory',null,null,{createContentView:function(bb){if(bb.get_navType()==='dot'){return new L(bb)}else{var bc=bb.get_selectedStoryPointStyle().textStyle.fontName;if(tab.StoryHelperFunctions.shouldUseHackForArrowOnlyNavigator(bc,bb.get_navType())){return new M(bb)}else{return new N(bb)}}}});var L=global.tab.StoryNavigatorAuthoringShapeView=ss.mkType(a,'tab.StoryNavigatorAuthoringShapeView',function(bb){tab.StoryNavigatorShapeView.call(this,bb)},{styleUpdateToast:function(bb){var bc=this.get_viewModel().get_width()*tab.StoryNavigatorShapeView.dotsScale+2*1;var bd=this.get_viewModel().get_height()*tab.StoryNavigatorShapeView.dotsScale+2*1;bb.capturedDeltaContainer.addClass('tabStoryPointDeltaCapturedDot');var be={width:bc+'px',height:bd+'px'};bb.capturedDeltaCentered.css(be);var bf={width:bc+'px',height:bd+'px'};bb.capturedDeltaContainer.css(bf)}});var M=global.tab.StoryNavigatorAuthoringTableauFontVerticalCenteringHackView=ss.mkType(a,'tab.StoryNavigatorAuthoringTableauFontVerticalCenteringHackView',function(bb){tab.StoryNavigatorTableauFontVerticalCenteringHackView.call(this,bb)},{styleUpdateToast:function(bb){R.styleUpdateToastForStoryNavigatorAuthoringTextView(bb,this.get_viewModel())}});var N=global.tab.StoryNavigatorAuthoringTextView=ss.mkType(a,'tab.StoryNavigatorAuthoringTextView',function(bb){tab.StoryNavigatorTextView.call(this,bb)},{styleUpdateToast:function(bb){R.styleUpdateToastForStoryNavigatorAuthoringTextView(bb,this.get_viewModel())}});var O=global.tab.StoryNavigatorBetweenPointDropHandler=ss.mkType(a,'tab.StoryNavigatorBetweenPointDropHandler',function(bb,bc,bd,be){this.$7=null;this.$4=false;this.$6=null;this.$5=null;this.$7=bb;this.$4=be;this.$6=bc;this.$5=bd},{$3:function(){return(this.$4?(this.$7.get_storyPointIndex()+1):this.$7.get_storyPointIndex())},get_feedbackType:function(){return'dropfeedbackuponentry'},dragOver:function(bb){if(!this.$0(bb)){return null}if(!ss.staticEquals(this.$6,null)){this.$6()}return this},dragExit:function(bb){if(!ss.staticEquals(this.$5,null)){this.$5()}},acceptDrop:function(bb){var bc={};var bd=this.$2(bb,bc);var be={};var bf=this.$1(bb,be);var bg=$.Deferred();bg.resolve(bf||bd);if(bd&&bc.$.get_viewModel().get_storyPointIndex()!==this.$3()&&bc.$.get_viewModel().get_storyPointIndex()+1!==this.$3()){tab.StoryClientCommands.reorderStoryPoint(bc.$.get_viewModel().get_storyPointId(),this.$3())}else if(bf&&tab.FeatureFlags.isEnabled('StoryInteractions')){tab.StoryClientCommands.insertStoryPoint(be.$.dragged.sheetName,this.$3())}if(!ss.staticEquals(this.$5,null)){this.$5()}return bg},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.$0(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},$0:function(bb){var bc={};var bd={};return this.$2(bb,bc)||this.$1(bb,bd)},$2:function(bb,bc){bc.$=ss.safeCast(bb,U);return ss.isValue(bc.$)},$1:function(bb,bc){bc.$=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc.$)&&tab.FeatureFlags.isEnabled('StoryInteractions')}});var P=global.tab.StoryNavigatorPointAvatar=ss.mkType(a,'tab.StoryNavigatorPointAvatar',function(bb){this.$9=null;ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]).call(this,bb,new tab.StoryPointCaptionTemplate);this.$9=tab.StoryNavigatorContentViewFactory.createContentView(bb);this.$8();this.$9.addToDom(this.get_captionTemplate().caption);this.$9.styleCaption(this.get_captionTemplate());this.$7()},{get_captionTemplate:function(){return this.get_template()},$8:function(){this.$9.setupContent();this.get_captionTemplate().caption.width(this.get_viewModel().get_width());this.get_captionTemplate().caption.height(this.get_viewModel().get_height());var bb={overflow:'visible',margin:'0'};this.get_captionTemplate().domRoot.css(bb)},$7:function(){var bb=ss.idiv(-(this.get_viewModel().get_width()+2*1),2);var bc=ss.idiv(-(this.get_viewModel().get_height()+2*1),2);if(this.get_viewModel().get_navType()==='dot'){bb=ss.round(bb*tab.StoryNavigatorShapeView.dotsScale);bc=ss.round(bc*tab.StoryNavigatorShapeView.dotsScale)}var bd={left:bb+'px',top:bc+'px'};this.get_captionTemplate().caption.css(bd)}});var Q=global.tab.StoryPointCaptionEditorTemplate=ss.mkType(a,'tab.StoryPointCaptionEditorTemplate',function(){this.editorWrapper=null;this.floatingRightDropTarget=null;this.floatingLeftDropTarget=null;this.floatingCenterDropTarget=null;this.topBetweenArrow=null;this.capturedDeltaContainer=null;this.capturedDeltaMark=null;this.capturedDeltaCentered=null;spiff.Template.call(this,$("<span class='tabStoryPointEditing'><div class='tabStoryPointCaptionEditor'></div><div class='tabStoryNavigatorPointLeftDropTarget' data-tb-test-id='tabStoryNavigatorPointLeftDropTarget'></div><div class='tabStoryNavigatorPointCenterDropTarget'></div><div class='tabStoryNavigatorPointRightDropTarget' data-tb-test-id='tabStoryNavigatorPointRightDropTarget'></div><div class='tabStoryNavigatorTopBetweenArrow'></div><div class='tabStoryPointDeltaCapturedContainer'><div class='tabStoryPointDeltaCapturedCentered'><span class='tabStoryPointDeltaCapturedMark'></span></div></div><div class='tabStoryPointCaptionDragResize'></div></span>"));this.editorWrapper=this.getElementBySelector('.'+'tabStoryPointCaptionEditor');this.floatingRightDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointRightDropTarget');this.floatingLeftDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointLeftDropTarget');this.floatingCenterDropTarget=this.getElementBySelector('.'+'tabStoryNavigatorPointCenterDropTarget');this.topBetweenArrow=this.getElementBySelector('.'+'tabStoryNavigatorTopBetweenArrow');this.capturedDeltaContainer=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedContainer');this.capturedDeltaCentered=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedCentered');this.capturedDeltaMark=this.getElementBySelector('.'+'tabStoryPointDeltaCapturedMark');this.floatingLeftDropTarget.hide();this.floatingCenterDropTarget.hide();this.floatingRightDropTarget.hide()},{get_capturedDeltaTextWidth:function(){if(ss.isNullOrUndefined(Q.$3)||ss.Nullable$1.le(Q.$3,0)){var bb=this.capturedDeltaMark.text();this.capturedDeltaMark.text(tab.Strings.StoryNavigatorUpdated);Q.$3=tab.DoubleUtil.roundToInt(this.capturedDeltaMark.width());this.capturedDeltaMark.text(bb)}return ss.unbox(Q.$3)},get_capturedDeltaMarkWidth:function(){if(ss.isNullOrUndefined(Q.$2)||ss.Nullable$1.le(Q.$2,0)){var bb=$('<div></div>').addClass('tabStoryPointDeltaCapturedMark').addClass('checkmark');this.domRoot.append(bb);Q.$2=tab.DoubleUtil.roundToInt(bb.width());bb.remove()}return ss.unbox(Q.$2)}});var R=global.tab.StoryPointCaptionEditorTemplateExtensions=ss.mkType(a,'tab.StoryPointCaptionEditorTemplateExtensions',null,null,{styleUpdateToastForStoryNavigatorAuthoringTextView:function(bb,bc){var bd={width:bc.get_width()+'px'};bb.capturedDeltaCentered.css(bd);var be={width:bc.get_width()+'px',height:bc.get_height()+'px'};bb.capturedDeltaContainer.css(be)}});var S=global.tab.StoryPointCaptionEditorView=ss.mkType(a,'tab.StoryPointCaptionEditorView',function(bb){this.$A=null;this.$v=null;this.$x=null;this.$w=null;this.$B=null;this.$y=null;this.$u=null;this.$z=null;this.$3$1=false;ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]).call(this,bb,new Q);this.get_viewModel().add_pointCaptured(ss.mkdel(this,this.$e));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_pointCaptured(ss.mkdel(this,this.$e));if(ss.isValue(this.$u)){this.$u=tab.MiscUtil.clearTimeout(this.$u)}if(ss.isValue(this.$z)){this.$z=tab.MiscUtil.clearTimeout(this.$z)}this.$A.dispose()})));this.$v=K.createContentView(bb);this.$A=new tab.StoryNavigatorPointView.$ctor1(bb,this.$v);this.$x=null;this.$l()},{$s:function(){return this.$3$1},$t:function(bb){this.$3$1=bb},get_contentTemplate:function(){return this.$A.get_contentTemplate()},get_captionTemplate:function(){return this.$A.get_captionTemplate()},get_storyNavigatorContentView:function(){return this.$A.get_storyNavigatorContentView()},get_editorWrapper:function(){return this.get_captionEditorTemplate().editorWrapper},get_captionEditorTemplate:function(){return this.get_template()},get_hasLeftDropTarget:function(){return this.get_viewModel().get_isFirstPoint()},get_isPlaceholderPoint:function(){return this.get_viewModel().get_isStoryEmpty()},get_leftAndRightDropTargetWidth:function(){return 0.2*this.get_viewModel().get_width()},addToDom:function(bb){this.$A.addToDom(bb);this.$h(tab.DoubleUtil.roundToInt(this.get_leftAndRightDropTargetWidth()));this.$8();this.get_captionTemplate().caption.append(this.get_template().domRoot);if(tab.FeatureFlags.isEnabled('StoryInteractions')&&this.get_viewModel().get_navType()==='caption'){this.$k()}this.$f()},$k:function(){if(!this.get_viewModel().get_isCurrentPoint()){return}var bb=this.get_captionTemplate().caption.find('.'+'tabStoryPointCaptionDragResize');var bc=React.createElement(h,{captionRect:{l:0,t:0,w:this.get_viewModel().get_width(),h:this.get_viewModel().get_height()},resizeDragSourceFactory:ss.mkdel(this,this.createCaptionResizeDragSource)});ReactDOM.render(bc,bb[0])},createCaptionResizeDragSource:function(bb){var bc=tab.AuthoringDashboardView.dashboardGeometry();return new j({x:0,y:0,h:this.get_viewModel().get_height(),w:this.get_viewModel().get_width()},bb,bc.h,bc.w)},$8:function(){if(this.get_viewModel().get_navType()==='arrowonly'){return}if(tab.FeatureFlags.isEnabled('StoryInteractions')){this.$w=new T.$ctor1(this.get_viewModel(),ss.mkdel(this,this.$7),ss.mkdel(this,this.$j))}else{this.$w=new T(this.get_viewModel())}EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);EventUtils.DragDropManager.attachDropTarget(this.$A.get_captionTemplate().caption,this.$w);this.$B=new O(this.get_viewModel(),ss.mkdel(this,this.$q),ss.mkdel(this,this.$f),true);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget,this.$B);if(this.get_hasLeftDropTarget()){this.$y=new O(this.get_viewModel(),ss.mkdel(this,this.$p),ss.mkdel(this,this.$f),false);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget,this.$y)}EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.$d));EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.$d));EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.$b));EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingCenterDropTarget);EventUtils.DragDropManager.detachDropTarget(this.$A.get_captionTemplate().caption)})))},$i:function(){if(ss.isNullOrUndefined(this.$w)){this.$8();return}EventUtils.DragDropManager.removeDragSource(this.get_captionTemplate().caption);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget);EventUtils.DragDropManager.detachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget);if(this.get_viewModel().get_navType()!=='arrowonly'&&!this.get_viewModel().get_isOnlyPoint()){EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingRightDropTarget,this.$B)}if(this.get_hasLeftDropTarget()){if(ss.isNullOrUndefined(this.$y)){this.$y=new O(this.get_viewModel(),ss.mkdel(this,this.$p),ss.mkdel(this,this.$f),false)}EventUtils.DragDropManager.attachDropTarget(this.get_captionEditorTemplate().floatingLeftDropTarget,this.$y)}},$q:function(){this.$m(true)},$p:function(){this.$m(false)},$m:function(bb){this.get_captionEditorTemplate().topBetweenArrow.show();var bc=-ss.idiv(tab.DoubleUtil.roundToInt(this.get_captionEditorTemplate().topBetweenArrow.width()),2);if(bb){bc+=this.get_viewModel().get_width()}var bd={left:bc+'px',top:'-14px'};this.get_captionEditorTemplate().topBetweenArrow.css(bd)},$f:function(){this.get_captionEditorTemplate().topBetweenArrow.hide()},$7:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')){if(this.get_isPlaceholderPoint()){this.get_captionTemplate().caption.addClass('tabStoryPointPlaceholderHighlight')}else{this.get_captionTemplate().caption.addClass('tabStoryPointHighlight')}}},$j:function(){if(tab.FeatureFlags.isEnabled('StoryInteractions')){this.get_captionTemplate().caption.removeClass('tabStoryPointPlaceholderHighlight');this.get_captionTemplate().caption.removeClass('tabStoryPointHighlight')}},$d:function(bb){if(this.get_hasLeftDropTarget()){this.get_captionEditorTemplate().floatingLeftDropTarget.show()}this.get_captionEditorTemplate().floatingCenterDropTarget.show();this.get_captionEditorTemplate().floatingRightDropTarget.show();var bc=ss.safeCast(bb,U);if(ss.isValue(bc)){this.$h(this.get_viewModel().get_width())}this.$c(bb)},$c:function(bb){if(!tab.FeatureFlags.isEnabled('StoryInteractions')||!this.get_viewModel().get_isCurrentPoint()){return}var bc=ss.safeCast(bb,i);if(ss.isValue(bc)){var bd=this.get_captionTemplate().caption[0].getBoundingClientRect();var be=tab.AuthoringDashboardView.dashboardGeometry();bc.viewModel.setOriginalRect({x:ss.trunc(bd.left)-be.l,y:ss.trunc(bd.top)-be.t,h:this.get_viewModel().get_height(),w:this.get_viewModel().get_width()});var bf=tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[k,tab.FloatingResizeFeedbackComponent,Object])).call(null,[bc.viewModel]);var bg=tab.WorkbookView.findDashboardContainer();bf.get_rootElement().addClass('tab-dashDragDrop');bf.get_rootElement().css({left:tabBootstrap.VizLayoutConstants.get_authoringGutter().left+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()+'px',top:tabBootstrap.VizLayoutConstants.get_authoringGutter().top+tabBootstrap.VizLayoutConstants.get_authoringVizBorderWidth()+'px'});bf.addToDom(bg)}},$b:function(bb){this.$h(tab.DoubleUtil.roundToInt(this.get_leftAndRightDropTargetWidth()));this.get_captionEditorTemplate().floatingLeftDropTarget.hide();this.get_captionEditorTemplate().floatingCenterDropTarget.hide();this.get_captionEditorTemplate().floatingRightDropTarget.hide()},$h:function(bb){var bc=ss.idiv(bb,2);if(this.get_hasLeftDropTarget()){S.$0(this.get_captionEditorTemplate().floatingLeftDropTarget,-bc+1,bb+2,this.get_viewModel().get_height())}S.$0(this.get_captionEditorTemplate().floatingCenterDropTarget,bc,this.get_viewModel().get_width()-bb,this.get_viewModel().get_height());S.$0(this.get_captionEditorTemplate().floatingRightDropTarget,this.get_viewModel().get_width()-bc-1,bb+2,this.get_viewModel().get_height())},$l:function(){var bb=this.get_captionTemplate().caption;this.disposables.add$1(spiff.EventUtil.bindWithDispose(bb,'click',ss.mkdel(this,this.$9)));this.disposables.add$1(spiff.EventUtil.bindWithDispose(bb,'contextmenu',ss.mkdel(this,this.$a)))},$9:function(bb){if(!tab.StoryPointViewModel.get_isAnyStoryPointLoading()&&this.get_viewModel().get_isCurrentPoint()&&this.get_viewModel().get_navType()==='caption'){if(ss.isNullOrUndefined(this.$x)){this.$x=S.createEditor(this.get_captionEditorTemplate().editorWrapper[0],this.get_viewModel(),ss.mkdel(this,this.stopEditingCaption))}this.$o()}},$a:function(bb){if(!tab.FeatureFlags.isEnabled('BEAuthoring_ContextMenus_StoryPoint')){return}if(!this.get_viewModel().get_isCurrentPoint()){return}if(this.$s()){bb.stopPropagation()}else{spiff.EventUtil.stopEvent$2(bb);this.get_viewModel().clickStoryPoint();this.$9(bb)}},$o:function(){this.get_captionEditorTemplate().editorWrapper.show();this.get_contentTemplate().domRoot.hide();this.$x.focus();EventUtils.DragDropManager.removeDragSource(this.get_captionTemplate().caption);this.$t(true)},$g:function(){this.get_captionEditorTemplate().editorWrapper.hide();this.get_contentTemplate().domRoot.show();EventUtils.DragDropManager.attachDragSource(this.get_captionTemplate().caption,this.$w);this.$t(false)},stopEditingCaption:function(){this.get_viewModel().editStoryPointCaption(this.$x.getValue());this.$g()},setCodeMirrorCaption:function(bb){this.$x.setValue(bb)},$e:function(){this.$v.styleUpdateToast(this.get_captionEditorTemplate());this.$r();this.$n()},$r:function(){this.get_captionEditorTemplate().capturedDeltaContainer.show();var bb=this.get_viewModel().get_width()-2*1;if(this.get_captionEditorTemplate().get_capturedDeltaTextWidth()<=bb){this.get_captionEditorTemplate().capturedDeltaMark.text(tab.Strings.StoryNavigatorUpdated);this.get_captionEditorTemplate().capturedDeltaMark.removeClass('checkmark')}if(this.get_captionEditorTemplate().get_capturedDeltaTextWidth()>bb&&this.get_captionEditorTemplate().get_capturedDeltaMarkWidth()<=bb){this.get_captionEditorTemplate().capturedDeltaMark.text('');this.get_captionEditorTemplate().capturedDeltaMark.addClass('checkmark')}else if(this.get_captionEditorTemplate().get_capturedDeltaMarkWidth()>bb){this.get_captionEditorTemplate().capturedDeltaMark.text('');this.get_captionEditorTemplate().capturedDeltaMark.removeClass('checkmark')}this.get_captionEditorTemplate().capturedDeltaContainer.hide()},$n:function(){this.get_captionEditorTemplate().capturedDeltaContainer.show().removeClass('fadeOut').addClass('fadeIn');this.$u=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.get_captionEditorTemplate().capturedDeltaContainer.removeClass('fadeIn').addClass('fadeOut');this.$u=tab.MiscUtil.clearTimeout(this.$u)}),900);this.$z=tab.WindowHelper.setTimeout(ss.mkdel(this,function(){this.$z=tab.MiscUtil.clearTimeout(this.$z);this.get_viewModel().notifyPointUpdatedWasShown()}),500)}},{createEditor:function(bb,bc,bd){var be=ss.mkdict(['Enter',bd]);var bf=new Object;bf.lineWrapping=true;bf.dragDrop=true;bf.extraKeys=be;var bg=CodeMirror(bb,bf);S.styleEditor(bg,bc);bg.setValue(bc.get_authoringCaption());bg.setCursor(bg.lineCount(),0);bg.on('blur',bd);return bg},styleEditor:function(bb,bc){var bd=tab.FormattingConverters.makeFormatStyleDict(bc.get_storyPointStyle().textStyle,null);var be=$(bb.getWrapperElement());be.css(bd);var bf=11;be.height(bc.get_height()-bf)},$0:function(bb,bc,bd,be){var bf={left:bc+'px'};bb.css(bf);bb.width(bd);bb.height(be)}});var T=global.tab.StoryPointNavigatorDragDropHandler=ss.mkType(a,'tab.StoryPointNavigatorDragDropHandler',function(bb){this.$2=null;this.$1=null;this.$0=null;this.$2=bb},{get_feedbackType:function(){return'dropfeedbackuponentry'},startDrag:function(bb){return new U(this.$2,new P(this.$2))},acceptsDragType:function(){return 1},dragOver:function(bb){if(!this.isDragInstanceSupported(bb)){return null}if(!ss.staticEquals(this.$1,null)){this.$1()}return this},dragExit:function(bb){if(!ss.staticEquals(this.$0,null)){this.$0()}},acceptDrop:function(bb){var bc=this.isDragInstanceSupported(bb);var bd=$.Deferred();bd.resolve(bc);if(bc){if(tab.FeatureFlags.isEnabled('StoryInteractions')){var be=ss.safeCast(bb,tab.SheetDragInstance);var bf=be.dragged.sheetName;tab.StoryClientCommands.replaceStoryPoint(bf,this.$2.get_storyPointId())}}this.dragExit(bb);return bd},getDropTarget:function(bb){return this},getDropCursor:function(bb){return(this.isDragInstanceSupported(bb)?spiff.CustomCursor.move:spiff.CustomCursor.noOp)},isDragInstanceSupported:function(bb){var bc=ss.safeCast(bb,tab.SheetDragInstance);return ss.isValue(bc)}},{$ctor1:function(bb,bc,bd){this.$2=null;this.$1=null;this.$0=null;this.$2=bb;this.$1=bc;this.$0=bd}});var U=global.tab.StoryPointNavigatorDragInstance=ss.mkType(a,'tab.StoryPointNavigatorDragInstance',function(bb,bc){this.$2$1=null;EventUtils.DragInstance.call(this,bb,bc);this.set_viewModel(bb)},{get_viewModel:function(){return this.$2$1},set_viewModel:function(bb){this.$2$1=bb},get_defaultDropCursor:function(){return spiff.CustomCursor.delete$1},dropToNowhereAction:function(){tab.StoryClientCommands.deleteStoryPoint(this.get_viewModel().get_storyPointId())}});var V=global.tab.StorySheetListActionHandler=ss.mkType(a,'tab.StorySheetListActionHandler',function(bb){this.$2=null;this.$3=null;this.$2=bb},{$1:function(){if(ss.isNullOrUndefined(this.$2.get_model())||ss.isNullOrUndefined(this.$2.get_model().sheetListModel)||ss.isNullOrUndefined(this.$2.get_model().get_flipboard())||ss.isNullOrUndefined(this.$2.get_model().get_flipboard().get_storyPointModel())){return null}var bb=this.$2.get_model().sheetListModel.get_sheets();var bc=this.$2.get_model().get_flipboard().get_storyPointModel().get_currentSheet();var bd=tab.SheetListViewModel.findSheetListItemByName(bb,bc);return(ss.isValue(bd)?bd.pm:null)},getSelectedSheet:function(bb){if(!this.$0()){return null}return bb},determineSelectedSheet:function(bb,bc){if(!this.$0()){return null}if(ss.isNullOrUndefined(bc)){return this.$1()}else{return bc}},onUpdatedSheetList:function(bb){if(!this.$0()){return null}return this.$1()},onNewFlipboardNav:function(bb){if(!this.$0()){return null}return this.$1()},onActiveZoneChanged:function(bb){if(!this.$0()){return null}return bb},onDoubleClicked:function(bb,bc){if(!this.$0()){return}tab.ModuleManager.load$1(tab.IStoryAuthoringModule).call(null,[]).done(ss.mkdel(this,function(bd){if(this.$2.get_model().get_flipboard().get_isEmpty()){bd.replaceStoryPoint(bb.name,this.$2.get_model().get_flipboard().get_storyPointModel().get_storyPointId())}else{bd.insertStoryPoint(bb.name,-1)}}))},getDragInstance:function(bb){if(tab.FeatureFlags.isEnabled('StoryInteractions')){var bc=false;if(ss.isValue(this.$3)){bc=this.$3.get_addNewZoneAsFloating()}var bd=$.Deferred();var be=tab.SheetDragInstance.create(new tab.DraggedSheetItem(bb.name,bc),null,bd);return be}return null},$0:function(){return tsConfig.current_sheet_type==='story'}},{$ctor1:function(bb,bc){this.$2=null;this.$3=null;this.$2=bb;this.$3=bc}});var W=global.tab.StoryTitleToggleComponent=ss.mkType(a,'tab.StoryTitleToggleComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return this.$0()},$0:function(){var bb=React.createElement(SharedWidgets.CheckBoxWithLabelWidget,{label:tab.Strings.StoryContentShowTitles,checked:this.props.isTitleVisible,handleChange:this.props.updateTitleVisibility,testId:'tab-showTitles',key:'showTitles',disabled:false});var bc=spiff.DOMElements.div({className:'tab-ShowTitleCheckbox'},bb);return spiff.DOMElements.div({className:['tab-SectionContent','tab-Checkbox'].join(' ')},bc)}});var X=global.tab.StoryTitleToggleViewModel=ss.mkType(a,'tab.StoryTitleToggleViewModel',function(bb){this.$4=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.$4=bb;this.disposables.add$1(this.$4.newDisposableContext().addModelChangedHandler(ss.mkdel(this,this.incrementProps)).addEventBinding(ss.mkdel(this,function(bc){bc.add_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))}),ss.mkdel(this,function(bc){bc.remove_titleVisibilityChanged(ss.mkdel(this,this.incrementProps))})))},{createInitialProps:function(){return{isTitleVisible:true,updateTitleVisibility:ss.mkdel(this,this.$3)}},createUpdatedProps:function(){if(ss.isValue(this.$4)&&ss.isValue(this.$4.get_model())){return{isTitleVisible:this.$4.get_model().get_isTitleVisible()}}return null},$3:function(bb){if(ss.isValue(this.$4)&&ss.isValue(this.$4.get_model())&&this.$4.get_model().get_isTitleVisible()!==bb){tab.StoryClientCommands.toggleShowStoryboardTitle(this.$4.get_model().get_sheetName())}}});var Y=global.tab.StoryUberMenuComponent=ss.mkType(a,'tab.StoryUberMenuComponent',function(bb,bc){spiff.PureRenderComponent.$ctor1.call(this,bb,bc)},{render:function(){return EventUtils.EventForwarder.div(new EventUtils.EventHandleSpec,{className:'tabStoryUberMenuButtons',onMouseLeave:ss.mkdel(this,this.$6),onMouseEnter:ss.mkdel(this,this.$5)},this.$0(),this.$1(),this.$3(),this.$2())},$3:function(){if(this.props.isUpdateEnabled){return Y.$0('tabStoryUpdateBtn','tabStoryUpdateIcon',tab.Strings.StoryPointUpdateButton,ss.mkdel(this,this.$9))}else{return Y.$1('tabStoryUpdateBtn','tabStoryUpdateIcon')}},$0:function(){if(this.props.isDeleteEnabled){return Y.$0('tabStoryDeleteBtn','tabStoryDeleteIcon',tab.Strings.StoryPointDeleteTooltip,ss.mkdel(this,this.$4))}else{return Y.$1('tabStoryDeleteBtn','tabStoryDeleteIcon')}},$1:function(){if(this.props.isRevertEnabled){return Y.$0('tabStoryRevertBtn','tabStoryRevertIcon',tab.Strings.StoryPointRevertTooltip,ss.mkdel(this,this.$7))}else{return Y.$1('tabStoryRevertBtn','tabStoryRevertIcon')}},$2:function(){if(this.props.isSaveAsNewEnabled){return Y.$0('tabStorySaveAsNewBtn','tabStorySaveAsNewIcon',tab.Strings.StoryPointSaveAsNewTooltip,ss.mkdel(this,this.$8))}else{return Y.$1('tabStorySaveAsNewBtn','tabStorySaveAsNewIcon')}},$9:function(bb){this.props.handleUpdate()},$4:function(bb){this.props.handleDelete()},$7:function(bb){this.props.handleRevert()},$8:function(bb){this.props.handleSaveAsNew()},$6:function(bb){if(!ss.staticEquals(this.props.hideUber,null)){this.props.hideUber()}},$5:function(bb){if(!ss.staticEquals(this.props.showUber,null)){this.props.showUber()}}},{$1:function(bb,bc){var bd=spiff.DOMElements.div({className:bc});return spiff.DOMElements.div({className:bb+' disabled',key:bb},bd)},$0:function(bb,bc,bd,be){var bf=new Object;bf.customClassName=bb;bf.iconClassName=bc;bf.key=bb;bf.onTap=be;bf.disabled=false;bf.title=bd;var bg=bf;return React.createElement(spiff.IconButtonComponent,bg)}});var Z=global.tab.StoryUberMenuViewModel=ss.mkType(a,'tab.StoryUberMenuViewModel',function(bb){this.$3$1=null;ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]).call(this);this.set_storyPointViewModel(bb)},{get_viewType:function(){return ss.makeGenericType(spiff.ReactHostView$3,[Z,Y,Object])},get_viewModel:function(){return this},get_storyPointViewModel:function(){return this.$3$1},set_storyPointViewModel:function(bb){this.$3$1=bb},get_storyPointId:function(){return this.get_storyPointViewModel().get_storyPointId()},updateUberPopupViewModel:function(bb){},disposeViewModel:function(){this.dispose()},createHostView:function(){return tab.ObjectRegistry.newView(ss.makeGenericType(spiff.ReactHostView$3,[Z,Y,Object])).call(null,[this])},createInitialProps:function(){return{handleDelete:ss.mkdel(this,this.$3),handleRevert:ss.mkdel(this,this.$4),handleUpdate:ss.mkdel(this,this.$6),handleSaveAsNew:ss.mkdel(this,this.$5),hideUber:ss.mkdel(this,this.$7),showUber:ss.mkdel(this,this.$a)}},createUpdatedProps:function(){return{isDeleteEnabled:!this.get_storyPointViewModel().get_isStoryEmpty(),isRevertEnabled:!this.get_storyPointViewModel().get_isCaptured(),isUpdateEnabled:!this.get_storyPointViewModel().get_isCaptured(),isSaveAsNewEnabled:!this.get_storyPointViewModel().get_isCaptured()&&this.get_storyPointViewModel().get_isCurrentPoint()}},$3:function(){if(this.get_props().isDeleteEnabled){this.get_storyPointViewModel().deleteStoryPoint().then(function(){C.logUberMenuEvent(0,true)},function(){C.logUberMenuEvent(0,false)});this.$8()}},$4:function(){if(this.get_props().isRevertEnabled){tab.StoryClientCommands.revertStoryPoint(tab.ModelUtils.findContentDashboard(null).get_sheetPath(),this.get_storyPointId()).then(function(){C.logUberMenuEvent(1,true)},function(){C.logUberMenuEvent(1,false)})}},$6:function(){if(this.get_props().isUpdateEnabled){this.get_storyPointViewModel().markPointUpdated();tab.StoryClientCommands.captureStoryPoint(this.get_storyPointId()).then(function(){C.logUberMenuEvent(2,true)},function(){C.logUberMenuEvent(2,false)})}},$5:function(){if(this.get_props().isSaveAsNewEnabled){tab.StoryClientCommands.saveActiveStoryPointAsNew().then(function(){C.logUberMenuEvent(3,true)},function(){C.logUberMenuEvent(3,false)});this.$8()}},$9:function(){this.incrementProps()},$7:function(){this.get_storyPointViewModel().hideUberMenu()},$8:function(){this.get_storyPointViewModel().closeUber()},$a:function(){this.get_storyPointViewModel().showUberMenu()}});var ba=global.tab.TelemetryEvent=ss.mkEnum(a,'tab.TelemetryEvent',{delete$1:0,revert:1,update:2,saveAsNew:3,blankStoryPoint:4,duplicateStoryPoint:5});ss.initClass(b,ss.makeGenericType(spiff.BaseView$1,[tab.IFlipboardNavigatorViewModel]),[tab.IWidget,tab.IFlipboardNavigatorView,ss.makeGenericType(tab.IView$1,[tab.IFlipboardNavigatorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(c,spiff.Template,[ss.IDisposable]);ss.initClass(d,spiff.Template,[ss.IDisposable]);ss.initClass(e,ss.makeGenericType(spiff.BaseView$1,[tab.IAuthoringStoryboardViewModel]),[tab.IWidget,tab.IAuthoringStoryboardView,ss.makeGenericType(tab.IView$1,[tab.IAuthoringStoryboardViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(f,spiff.BaseViewModel,[tab.IAuthoringStoryboardViewModel,tab.IViewModel,ss.IDisposable]);ss.initClass(g,null,[tab.IStoryUberPopupContainer,ss.IDisposable]);ss.initClass(h,spiff.PureRenderComponent);ss.initClass(i,tab.FloatingResizeDragInstance);ss.initClass(j);ss.initClass(k,tab.FloatingResizeViewModel,[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(l,spiff.PureRenderComponent);ss.initClass(m,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(o,spiff.PureRenderComponent);ss.initClass(p,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(q,spiff.PureRenderComponent);ss.initClass(r,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initInterface(s,{styleUpdateToast:null},[tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(t);ss.initClass(u,spiff.PureRenderComponent);ss.initClass(v,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(w,spiff.PureRenderComponent);ss.initClass(x);ss.initClass(y);ss.initClass(z,tab.StoryFactory,[tab.IStoryAuthoringModule,tab.IStoryModule]);ss.initClass(A,spiff.PureRenderComponent);ss.initClass(B,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(C);ss.initClass(D);ss.initClass(E);ss.initClass(F,spiff.PureRenderComponent);ss.initClass(G,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IStoryContentPaneViewModel,tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(H);H.$ctor1.prototype=H.prototype;ss.initClass(I,spiff.PureRenderComponent);ss.initClass(J,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[ss.makeGenericType(spiff.IPropsProvider$1,[Object]),tab.IStoryLayoutPaneViewModel,tab.IPaneContent,tab.IViewModel,ss.IDisposable]);ss.initClass(K);ss.initClass(L,tab.StoryNavigatorShapeView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(M,tab.StoryNavigatorTableauFontVerticalCenteringHackView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(N,tab.StoryNavigatorTextView,[tab.IWidget,s,tab.IStoryNavigatorContentView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(O);ss.initClass(P,ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(Q,spiff.Template,[ss.IDisposable]);ss.initClass(R);ss.initClass(S,ss.makeGenericType(spiff.BaseView$1,[tab.StoryPointViewModel]),[tab.IWidget,tab.IStoryNavigatorPointView,ss.makeGenericType(tab.IView$1,[tab.StoryPointViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(T);T.$ctor1.prototype=T.prototype;ss.initClass(U,EventUtils.DragInstance);ss.initClass(V,null,[tab.ISheetListActionHandler]);V.$ctor1.prototype=V.prototype;ss.initClass(W,spiff.PureRenderComponent);ss.initClass(X,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object])]);ss.initClass(Y,spiff.PureRenderComponent);ss.initClass(Z,ss.makeGenericType(spiff.BaseReactViewModel$1,[Object]),[tab.IViewModel,ss.IDisposable,ss.makeGenericType(spiff.IPropsProvider$1,[Object]),spiff.IUberPopupContent,spiff.IContent]);(function(){c.containerClassName='tabFlipboardNavHoverTargetsContainer';c.previousHoverToScrollClassName='tabPreviousHoverTarget';c.nextHoverToScrollClassName='tabNextHoverTarget';c.htmlTemplate="<span class='"+'tabFlipboardNavHoverTargetsContainer'+"'>"+"<div class='"+'tabPreviousHoverTarget'+"'></div>"+"<div class='"+'tabNextHoverTarget'+"'></div>"+'</span>'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IFlipboardNavigatorView).call(null,b)})();(function(){d.$0=''})();(function(){m.$0=0})();(function(){tab.ObjectRegistry.registerType(tab.IAuthoringStoryboardView,e).call(null)})();(function(){A.dragAddTextToStory='tabAddTextToStory'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IStoryUberPopupContainer).call(null,g)})();(function(){h.$1=[3,1];h.$2=[3,0]})();(function(){j.$0=31})();(function(){E.toggleButtonsClass='tabStoryPaneToggleButtons'})();(function(){Q.editorWrapperClassName='tabStoryPointCaptionEditor';Q.floatingRightDropTargetClassName='tabStoryNavigatorPointRightDropTarget';Q.floatingLeftDropTargetClassName='tabStoryNavigatorPointLeftDropTarget';Q.floatingCenterDropTargetClassName='tabStoryNavigatorPointCenterDropTarget';Q.topBetweenArrowClassName='tabStoryNavigatorTopBetweenArrow';Q.capturedDeltaContainerClassName='tabStoryPointDeltaCapturedContainer';Q.capturedDeltaCheckmarkClassName='tabStoryPointDeltaCapturedMark';Q.capturedDeltaCenteredTextClassName='tabStoryPointDeltaCapturedCentered';Q.captionResizeDragClassName='tabStoryPointCaptionDragResize';Q.$2=null;Q.$3=null;Q.$1="<span class='tabStoryPointEditing'>"+"<div class='"+'tabStoryPointCaptionEditor'+"'></div>"+"<div class='"+'tabStoryNavigatorPointLeftDropTarget'+"' data-tb-test-id='"+'tabStoryNavigatorPointLeftDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorPointCenterDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorPointRightDropTarget'+"' data-tb-test-id='"+'tabStoryNavigatorPointRightDropTarget'+"'></div>"+"<div class='"+'tabStoryNavigatorTopBetweenArrow'+"'></div>"+"<div class='"+'tabStoryPointDeltaCapturedContainer'+"'>"+"<div class='"+'tabStoryPointDeltaCapturedCentered'+"'>"+"<span class='"+'tabStoryPointDeltaCapturedMark'+"'></span>"+'</div>'+'</div>'+"<div class='"+'tabStoryPointCaptionDragResize'+"'></div>"+'</span>'})();(function(){tab.ObjectRegistry.resolveDeferredType(tab.IStoryNavigatorPointView).call(null,S)})()})();;
/*! BEGIN AuthoringWeb */
(function(){'dont use strict';var a={};global.tab=global.tab||{};ss.initAssembly(a,'vqlauthoringweb');var b=ss.mkType(a,'tab.$0',function(I){this.$1$1=null;this.$1$2=0;this.$1$3=0;this.$a(I);this.$8(tab.DoubleUtil.tryParseDouble(I.css('min-height'),0));this.$6(tab.DoubleUtil.tryParseDouble(I.css('max-height'),Number.MAX_VALUE))},{$9:function(){return this.$1$1},$a:function(I){this.$1$1=I},$2:function(){return this.$9().height()},$3:function(I){this.$9().height(I)},$4:function(){return this.$5()-this.$2()<1},$7:function(){return this.$1$2},$8:function(I){this.$1$2=I},$5:function(){return this.$1$3},$6:function(I){this.$1$3=I},$0:function(){return tab.DoubleUtil.tryParseDouble(this.$9().css('flex-grow'),0)},$1:function(I){this.$9().css('flex-grow',I.toString())}});var c=global.tab.AccordionHeaderViewWeb=ss.mkType(a,'tab.AccordionHeaderViewWeb',function(I){tab.AccordionHeaderView.call(this,I,new tab.AccordionHeaderTemplate)});var d=global.tab.AccordionViewWeb=ss.mkType(a,'tab.AccordionViewWeb',function(I){tab.AccordionView.call(this,I,new tab.AccordionTemplate)});var e=global.tab.AuthoringLeftAreaResizerView=ss.mkType(a,'tab.AuthoringLeftAreaResizerView',function(I){this.$a=null;ss.makeGenericType(spiff.BaseView$1,[tab.AuthoringLeftAreaViewModel]).call(this,I,new f);var J=this.disposables;var K=this.get_rootElement().get(0);var L=new EventUtils.EventHandleSpec;L.doubleTap=ss.mkdel(this,function(M){this.$7()});J.add$1(new EventUtils.TableauEventHandler(K,L))},{startDrag:function(I){if(ss.isNullOrUndefined(this.$a)){return null}var J=tab.DoubleUtil.roundToInt(this.$a.width());return new spiff.MoveDragInstance.$ctor1(this.get_rootElement(),ss.mkdel(this,function(K){this.$8(K.clientX)}),ss.mkdel(this,function(K){this.$9()}),ss.mkdel(this,function(){this.$8(J)}),null)},acceptsDragType:function(){return 1},$8:function(I){var J=Math.max(160,Math.min(500,I));this.get_viewModel().set_expandedSidePaneWidth(J)},$9:function(){this.get_viewModel().sidePaneResizeEnded()},$7:function(){this.$8(200);this.$9()},onAddedToDom:function(){this.$a=this.get_rootElement().parent();EventUtils.DragDropManager.attachDragSource(this.get_rootElement(),this)}});var f=global.tab.AuthoringLeftAreaResizerView$AuthoringLeftAreaResizerTemplate=ss.mkType(a,'tab.AuthoringLeftAreaResizerView$AuthoringLeftAreaResizerTemplate',function(){spiff.Template.call(this,$(f.htmlTemplate))});var g=global.tab.AuthoringLeftAreaTemplateWeb=ss.mkType(a,'tab.AuthoringLeftAreaTemplateWeb',function(){this.tabbedPanel=null;this.collapseButton=null;this.floatingPanel=null;tab.AuthoringLeftAreaTemplate.call(this,$(g.htmlTemplate));this.domRoot.css({top:tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+'px',bottom:tabBootstrap.VizLayoutConstants.get_authoringTabsHeight()+'px'});this.tabbedPanel=this.getElementBySelector('.tabAuthLeftViewTabbedPanel');this.collapseButton=this.getElementBySelector('.tabAuthLeftViewCollapseButton');this.floatingPanel=this.getElementBySelector('.tabAuthLeftViewFloatingPanel')});var h=global.tab.AuthoringLeftAreaViewWeb=ss.mkType(a,'tab.AuthoringLeftAreaViewWeb',function(I){this.$r=null;this.$s=0;this.$t=null;tab.AuthoringLeftAreaView.call(this,I,new g);this.$r={};this.$r['worksheet']=$.Deferred();this.$r['dashboard']=$.Deferred();this.$r['story']=$.Deferred();this.$s=this.get_viewModel().get_expandedSidePaneWidth();this.$t=new e(this.get_viewModel());this.$9();this.$h(this.get_viewModel().get_sheetType());this.set_floatingLeftPanel(new o(this.$q().floatingPanel));this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.$h));this.get_viewModel().add_sidePaneResized(ss.mkdel(this,this.$e));this.get_viewModel().add_sidePaneVisibilityChanged(ss.mkdel(this,this.$f));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.$h));this.get_viewModel().remove_sidePaneResized(ss.mkdel(this,this.$e));this.get_viewModel().remove_sidePaneVisibilityChanged(ss.mkdel(this,this.$f))})))},{$q:function(){return this.dom},get_collapseDuration:function(){return(tsConfig.is_desktop?0:200)},updateLeftAreaForSheetType:function(I){if(I==='worksheet'||I==='dashboard'||I==='story'){if(this.get_viewModel().get_controlMode()===1){return}this.dom.domRoot.insertBefore($('.tabAuthTabArea'))}else{this.dom.domRoot.detach();this.get_viewModel().set_controlMode(0)}this.$l('worksheet');this.$l('dashboard');this.$l('story');this.$r[I].done(ss.mkdel(this,function(J){if(ss.isValue(J)){J.addToDom(this.element);J.element.css({left:this.$s+'px'});J.element.toggle(this.get_viewModel().get_sidePaneExpansionState()==='collapsed')}}));this.get_viewModel().get_leftPanelViewModel().updatePaneForSheetType(I)},$l:function(I){this.$r[I].done(function(J){if(ss.isValue(J)){J.element.detach()}})},onAddedToDom:function(){tab.AuthoringLeftAreaView.prototype.onAddedToDom.call(this);this.$t.addToDom(this.$q().domRoot);this.$b();this.$a();this.$e(this.get_viewModel().get_expandedSidePaneWidth());if(this.get_viewModel().get_sidePaneExpansionState()==='collapsed'){this.setPanelPosition(this.get_viewModel().get_sidePaneExpansionState())}},addLeftPanelToDom:function(){if(ss.isValue(this.internalLeftPanelView)){this.$q().tabbedPanel.append(this.internalLeftPanelView.element);this.internalLeftPanelView.onAddedToDom()}},$e:function(I){this.$o(I);this.$p(I);this.$m(this.get_viewModel().get_sidePaneExpansionState())},$f:function(I){this.dom.domRoot.css('visibility',(I?'visible':'hidden'))},$o:function(I){this.$s=I;this.$r[this.get_viewModel().get_sheetType()].done(ss.mkdel(this,function(J){J.element.css({left:this.$s+'px'})}))},$p:function(I){this.dom.domRoot.width(I);if(this.get_viewModel().get_sidePaneExpansionState()==='collapsed'){this.dom.domRoot.css({left:-I+'px'})}},setPanelPosition:function(I){var J=ss.formatString('left {0}ms ease-out',this.get_collapseDuration());var K=BrowserSupport.BrowserSupport.CssTransitionName();var L={};var M={};var N={};var O={};L[K]=J;M[K]=J;N[K]=J;O[K]=J;var P=tab.DoubleUtil.roundToInt(this.dom.domRoot.width());var Q=$('.tabAuthLeftShelves');var R=((tsConfig.current_sheet_type==='worksheet')?tab.DoubleUtil.roundToInt(Q.width()):0);var S=tab.DoubleUtil.roundToInt($('.tabAuthSchemaCollapsed').outerWidth());if(I==='expanded'){L.left=0+'px';M.left=P+'px';N.left=P+R+'px';O.left=P+R+'px';this.$t.get_rootElement().show()}else{L.left=-P+'px';M.left=S+'px';N.left=S+R+'px';O.left=S+R+'px';this.$t.get_rootElement().hide()}window.setTimeout(ss.mkdel(this,function(){L[K]='';M[K]='';N[K]='';O[K]='';this.dom.domRoot.css(L);$('.tabAuthLeftShelves').css(M);$('.tabAuthTopShelves').css(N);$(tab.ApplicationView.dashboardViewportSelector).css(O);this.$m(I);this.get_viewModel().leftAreaResizeEnded()}),this.get_collapseDuration());this.dom.domRoot.css(L);$('.tabAuthLeftShelves').css(M);$('.tabAuthTopShelves').css(N);var T=$(tab.ApplicationView.dashboardViewportSelector);T.css(O)},$m:function(I){this.get_viewModel().set_leftAreaWidth(((I==='expanded')?tab.DoubleUtil.roundToInt(this.dom.domRoot.width()):tab.DoubleUtil.roundToInt($('.tabAuthSchemaCollapsed').outerWidth())))},$a:function(){this.get_viewModel().add_controlModeChanged(ss.mkdel(this,this.$j));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_controlModeChanged(ss.mkdel(this,this.$j))})))},$h:function(I){var J=this.internalLeftPanelView.get_paneViewForSheet();var K=J[I];if(ss.isNullOrUndefined(K)){return}K.done(ss.mkdel(this,function(L){if(ss.isNullOrUndefined(L)){return}var M=new C(L.get_paneContents());M.add_expandButtonClicked(ss.mkdel(this,this.$d));var N=this.$i(L);M.add_tabButtonClicked(N);this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){M.remove_expandButtonClicked(ss.mkdel(this,this.$d));M.remove_tabButtonClicked(N);tab.MiscUtil.dispose$1(M)})));this.$r[I].resolve(M)}))},$i:function(I){return ss.mkdel(this,function(J){I.set_activePaneTitle(J);this.$d()})},$b:function(){this.get_viewModel().add_sidePaneExpansionStateChanged(ss.mkdel(this,this.$k));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sidePaneExpansionStateChanged(ss.mkdel(this,this.$k))})))},$k:function(I){if(I==='expanded'){this.$g()}else if(I==='collapsed'){this.$n()}this.setPanelPosition(I)},$g:function(){this.$r[this.get_viewModel().get_sheetType()].done(function(I){if(ss.isValue(I)){I.element.hide()}})},$n:function(){window.setTimeout(ss.mkdel(this,function(){this.$r[this.get_viewModel().get_sheetType()].done(function(I){if(ss.isValue(I)){I.element.show()}})}),this.get_collapseDuration()-25)},$j:function(I){if(I===1){if(this.get_viewModel().get_sidePaneExpansionState()==='collapsed'){this.$d()}}else if(I===0){this.updateLeftAreaForSheetType(this.get_viewModel().get_sheetType())}},$9:function(){var I=new spiff.IconButton;I.setIcon('tabAuthCollapseIcon');I.set_hoverTooltipText(tab.Strings.CollapseSchemaPane);I.addClass('tabCollapseSidebar');I.add_click(ss.mkdel(this,this.$c));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){I.remove_click(ss.mkdel(this,this.$c))})));this.$q().collapseButton.append(I.element)},$c:function(){this.get_viewModel().set_sidePaneExpansionState('collapsed')},$d:function(){this.get_viewModel().set_sidePaneExpansionState('expanded')}});var i=global.tab.AuthoringTabNavViewWeb=ss.mkType(a,'tab.AuthoringTabNavViewWeb',function(I){this.$F=null;this.$E=null;tab.AuthoringTabNavView.call(this,I);this.$F=new tab.AuthoringTabNavigatorHoverHandler(ss.mkdel(this,this.handleHoverPrevious),function(){},800);this.$E=new tab.AuthoringTabNavigatorHoverHandler(ss.mkdel(this,this.handleHoverNext),function(){},800);EventUtils.DragDropManager.add_dragStarted(ss.mkdel(this,this.handleDragStarted));this.disposables.add(ss.mkdel(this,function(){EventUtils.DragDropManager.remove_dragStarted(ss.mkdel(this,this.handleDragStarted))}));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.menuButton,ss.mkdel(this,function(J){this.$u(this.dom.menuButton)})));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.leftButton,ss.mkdel(this,function(J){this.$v()})));this.disposables.add$1(spiff.ClickHandler.targetAndClick(this.dom.rightButton,ss.mkdel(this,function(J){this.$w()})))},{$D:function(){var I={};var J=this.get_availableWidth();var K=this.get_tabsWidth();I.min=0;I.max=((K>J)?(K-J):K);return I},get_scroll:function(){return this.dom.tabContainer.scrollLeft()},set_scroll:function(I){this.$y(I,false)},get_shouldShowButtons:function(){var I=this.get_tabsWidth();var J=this.get_availableWidth();if(BrowserSupport.BrowserSupport.IsIE()||BrowserSupport.BrowserSupport.IsLegacyEdge()){var K=1;J+=K}return I>J},$y:function(I,J){var K=this.$D();var L=Math.min(Math.max(I,K.min),K.max);if(L!==this.dom.tabContainer.scrollLeft()){this.dom.tabContainer.stop(true,true);if(J){this.dom.tabContainer.animate(ss.mkdict(['scrollLeft',L]),'fast','swing',ss.mkdel(this,this.$C))}else{this.dom.tabContainer.scrollLeft(L);this.$C()}}},onAddedToDom:function(){tab.AuthoringTabNavView.prototype.onAddedToDom.call(this);if(this.$z()){this.$q()}},$z:function(){return!tsConfig.is_mobile&&this.get_shouldShowButtons()&&!this.$t()},$q:function(){EventUtils.DragDropManager.attachDropTarget(this.dom.leftButton,this.$E);EventUtils.DragDropManager.attachDropTarget(this.dom.rightButton,this.$E);EventUtils.DragDropManager.attachDropTarget(this.dom.createButtonsContainer,this.$E);if(tab.AuthoringTabNavView.get_shouldShowDataTab()){EventUtils.DragDropManager.attachDropTarget(this.dom.dataSourceButton,this.$F)}EventUtils.DragDropManager.attachDropTarget(this.dom.leftScrollHelper,this.$F);this.disposables.add(ss.mkdel(this,this.$r))},$r:function(){if(this.$t()){EventUtils.DragDropManager.detachDropTarget(this.dom.leftButton);EventUtils.DragDropManager.detachDropTarget(this.dom.rightButton);EventUtils.DragDropManager.detachDropTarget(this.dom.createButtonsContainer);if(tab.AuthoringTabNavView.get_shouldShowDataTab()){EventUtils.DragDropManager.detachDropTarget(this.dom.dataSourceButton)}EventUtils.DragDropManager.detachDropTarget(this.dom.leftScrollHelper)}},$t:function(){return EventUtils.DragDropManager.isDropTarget(this.dom.leftButton)&&EventUtils.DragDropManager.isDropTarget(this.dom.rightButton)&&(tab.AuthoringTabNavView.get_shouldShowDataTab()&&EventUtils.DragDropManager.isDropTarget(this.dom.dataSourceButton))&&EventUtils.DragDropManager.isDropTarget(this.dom.leftScrollHelper)&&EventUtils.DragDropManager.isDropTarget(this.dom.createButtonsContainer)},handleHoverNext:function(){this.$w();this.showLeftScrollHelper()},handleHoverPrevious:function(){this.$v();this.hideLeftScrollHelper(false)},handleDragStarted:function(I){if(!i.$0(I)){return}this.showLeftScrollHelper();EventUtils.DragDropManager.add_dragEnded(ss.mkdel(this,this.handleDragEnded))},handleDragEnded:function(I){this.hideLeftScrollHelper(true);EventUtils.DragDropManager.remove_dragEnded(ss.mkdel(this,this.handleDragEnded))},showLeftScrollHelper:function(){if(this.get_scroll()>0){this.dom.leftScrollHelper.show()}},hideLeftScrollHelper:function(I){if(I||this.get_scroll()===0){this.dom.leftScrollHelper.hide()}},updateTabNavigation:function(){this.$C();this.scrollToActiveTab()},scrollToActiveTab:function(){if(!this.addedToDom){return}var I;if(ss.isValue(this.authoringTabNavViewModel.get_reorderedTab())){I=this.authoringTabNavViewModel.get_reorderedTab();this.authoringTabNavViewModel.set_reorderedTab(null)}else{I=this.authoringTabNavViewModel.get_currentTab()}if(ss.isNullOrUndefined(I)){this.set_scroll(0);return}var J=0;var K=spiff.Widget.getWidgets(this.dom.tabContainer.children(),tab.AuthoringTabView);for(var L=0;L<K.length;L++){var M=K[L];if(M.get_viewModel().equalTo(I)){this.$x(((J===K.length-1)?this.dom.rightMostElement():M.element));break}J++}},$u:function(I){var J=[];var K=this.authoringTabNavViewModel.get_workbookTabs();for(var L=0;L<K.length;L++){var M=K[L];var N=0;if(ss.referenceEquals(M,this.authoringTabNavViewModel.get_currentTab())){N=2}var O=spiff.MenuItem.newItem(M,M.name,'WorkbookTab',N,null);var P=ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(ss.replaceAllString(M.color.toString(),' ',''),'(',''),')',''),',','');O.itemClass=ss.formatString('{0} {1}',tab.WidgetUtil.colorSwatchMenuItemClass,P);J.push(O)}var Q=spiff.MenuViewModel.createForMenu(new spiff.Menu(J),ss.mkdel(this,this.$A),null,null);var R=new spiff.ShowMenuOptions(I,false);R.preferUp=true;Q.show(R)},$A:function(I){this.authoringTabNavViewModel.selectSheetTab(I.data)},$B:function(I){this.dom.domRoot.toggleClass('tabHideControls',!I)},$C:function(){if(!this.get_shouldShowButtons()){this.$B(false);this.set_scroll(0);this.$r();return}this.$B(true);if(this.$z()){this.$q()}var I=this.get_scroll();var J=this.$D();var K=I>J.min;var L=I<J.max;this.dom.menuButton.toggleClass('tabEnabled',true);this.dom.leftButton.toggleClass('tabEnabled',K);this.dom.leftButton.toggleClass('tabDisabled',!K);this.dom.rightButton.toggleClass('tabEnabled',L);this.dom.rightButton.toggleClass('tabDisabled',!L)},$x:function(I){var J=30;var K=this.get_scroll();var L=K+I.position().left;var M=Math.round(L-J);if(M===K){return}if(M<K){this.set_scroll(M);return}var N=this.get_availableWidth();var O=K+N;var P=L+I.outerWidth();if(P+J>O){this.set_scroll(Math.round(P-N+J));return}},$s:function(I){var J=this.get_availableWidth();var K=J*0.5*(I?1:-1);this.$y(Math.round(this.get_scroll()+K),true)},$w:function(){this.$s(true)},$v:function(){this.$s(false)}},{$0:function(I){return ss.isInstanceOfType(I,tab.AuthoringTabViewDragInstance)}});var j=global.tab.AuthoringViewWeb=ss.mkType(a,'tab.AuthoringViewWeb',function(I){tab.AuthoringView.call(this,I);this.addContent();var J=ss.mkdel(this,function(){this.get_leftArea().get_viewModel().add_leftAreaResized(ss.mkdel(this,this.$q));this.get_leftArea().get_viewModel().add_leftAreaResizingEnded(ss.mkdel(this,this.$r));I.get_rightAreaDrawerViewModel().add_open(ss.mkdel(this,this.$u));I.get_rightAreaDrawerViewModel().add_close(ss.mkdel(this,this.$u));I.get_rightAreaDrawerViewModel().add_rightDrawerResized(ss.mkdel(this,this.$t));I.get_rightAreaDrawerViewModel().add_rightDrawerResizingEnded(ss.mkdel(this,this.$s));this.disposables.add(ss.mkdel(this,function(){this.get_leftArea().get_viewModel().remove_leftAreaResized(ss.mkdel(this,this.$q));this.get_leftArea().get_viewModel().remove_leftAreaResizingEnded(ss.mkdel(this,this.$r));I.get_rightAreaDrawerViewModel().remove_open(ss.mkdel(this,this.$u));I.get_rightAreaDrawerViewModel().remove_close(ss.mkdel(this,this.$u));I.get_rightAreaDrawerViewModel().remove_rightDrawerResized(ss.mkdel(this,this.$t));I.get_rightAreaDrawerViewModel().remove_rightDrawerResizingEnded(ss.mkdel(this,this.$s))}))});if(tab.FeatureFlags.isEnabled('VizClientPerceivedPerformance')){tab.StartupUtils.callAfterModelsInitialized(J)}else{J()}},{addContentToAreas:function(){tab.AuthoringView.prototype.addContentToAreas.call(this);this.layout()},$q:function(I){this.handleComponentSizing(I,tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$u:function(){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$t:function(I){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth())},$s:function(I){this.handleComponentSizing(this.get_leftAreaWidth(),tabBootstrap.ViewerBootstrap.get_instance().get_rightAreaDrawerWidth());tab.Application.get_instance().get_client().doResize()},$r:function(I){this.get_viewModel().updatePortSizeAfterManualLayout(I)}});var k=global.tab.AuthoringWorksheetViewWeb=ss.mkType(a,'tab.AuthoringWorksheetViewWeb',function(I){this.$l=null;this.$j=null;this.$k=0;tab.AuthoringWorksheetView.call(this,I);this.buildDom()},{repositionShelves:function(I,J){this.$j.css('left',I+'px');this.$l.css({left:I+this.$k+'px',right:J+'px'})},addContentToAreas:function(){var I=$("<div class='tabAuthShelves'></div>");this.insideViewArea.append(I);this.$l=$("<div class='tabAuthTopShelves'></div>").css({top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px'});var J=this.cards['top'];for(var K=0;K<J.length;K++){var L=J[K];this.$l.append(L.get_rootElement())}I.append(this.$l);this.$j=$(ss.formatString("<div class='tabAuthLeftShelves{0}'></div>",' '+'statusBar')).css({top:tabBootstrap.VizLayoutConstants.get_authoringMenuBarHeight()+tabBootstrap.VizLayoutConstants.get_authoringToolbarHeight()+'px',bottom:tabBootstrap.VizLayoutConstants.get_authoringTabsHeight()+'px'});var M=$('<div></div>').appendTo(this.$j);var N=this.cards['left'];for(var O=0;O<N.length;O++){var P=N[O];M.append(P.get_rootElement())}I.append(this.$j)},notifyContentAddedToDom:function(){this.$k=tab.DoubleUtil.roundToInt(this.$j.width());tab.AuthoringWorksheetView.prototype.notifyContentAddedToDom.call(this)}});var l=global.tab.CalculationDialogViewWeb=ss.mkType(a,'tab.CalculationDialogViewWeb',function(I){tab.CalculationDialogView.call(this,I);this.initDom()});var m=global.tab.DashboardSwitchTabShortcut=ss.mkType(a,'tab.DashboardSwitchTabShortcut',function(I){this.$0=null;KeyboardShortcuts.GlobalKeyboardShortcut.call(this);this.$0=I},{getKeyComboOrKeyCombos:function(){return ss.applyConstructor(KeyboardShortcuts.KeyCombo,['t',null].concat(null))},getAdditionalOptions:function(){var I=new Object;I.shouldUseKeyUp=true;return I},isAllowed:function(I){return KeyboardShortcuts.GlobalKeyboardShortcut.prototype.isAllowed.call(this,I)&&this.$0.addedToDom&&this.$0.get_viewModel().get_currentSheetType()==='dashboard'},executeShortcut:function(I){this.$0.get_paneViewForSheet()['dashboard'].done(function(J){var K=J;K.selectNextTab()})},getTelemetryKey:function(){return'Dashboard Switch Tab'}});var n=global.tab.DataSchemaFieldListContentTemplate=ss.mkType(a,'tab.DataSchemaFieldListContentTemplate',function(){spiff.Template.call(this,$("<div class='tab-schemaFieldListContent'></div>"))});var o=global.tab.FloatingLeftPanelWeb=ss.mkType(a,'tab.FloatingLeftPanelWeb',function(I){this.$0=null;this.$1$1=null;this.$0=I},{add_contentChanged:function(I){this.$1$1=ss.delegateCombine(this.$1$1,I)},remove_contentChanged:function(I){this.$1$1=ss.delegateRemove(this.$1$1,I)},addFloatingPanelToDom:function(I){this.$0.empty();I.addToDom(this.$0);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}},addFloatingPanelToDom$1:function(I){this.$0.empty();this.$0.append(I);if(!ss.staticEquals(this.$1$1,null)){this.$1$1()}}});var p=global.tab.LeftPanelViewWeb=ss.mkType(a,'tab.LeftPanelViewWeb',function(I){this.$d=null;this.$e=null;this.$c=null;tab.LeftPanelView.call(this,I);this.$d={};this.$d['worksheet']=$.Deferred();this.$d['dashboard']=$.Deferred();this.$d['story']=$.Deferred();this.$7();this.$8(tab.ApplicationModel.get_instance().get_workbook().get_sheetType());this.get_viewModel().add_sheetTypeChanged(ss.mkdel(this,this.$b));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_sheetTypeChanged(ss.mkdel(this,this.$b))})));this.get_viewModel().add_formatPaneCreated(ss.mkdel(this,this.$7));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.get_viewModel().remove_formatPaneCreated(ss.mkdel(this,this.$7))})));this.$a()},{get_paneViewForSheet:function(){return this.$d},get_formatPane:function(){return this.$c.promise()},onAddedToDom:function(){spiff.Widget.prototype.onAddedToDom.call(this);this.$b(this.get_viewModel().get_currentSheetType())},dispose:function(){var I=new ss.ObjectEnumerator(this.get_paneViewForSheet());try{while(I.moveNext()){var J=I.current();if(ss.isValue(J.value)){J.value.done(function(K){tab.MiscUtil.dispose$1(K)})}}}finally{I.dispose()}this.$c.done(function(K){tab.MiscUtil.dispose$1(K)});ss.makeGenericType(spiff.BaseView$1,[tab.LeftPanelViewModel]).prototype.dispose.call(this)},$8:function(I){var J=this.get_viewModel().get_activePanes();if(J.length===0){return}if(J.length>1){var K=[];var L=$.Deferred();for(var M=0;M<J.length;M++){var N=J[M];N.done(function(O){K.push(O);if(K.length===J.length){L.resolve(K)}})}L.done(ss.mkdel(this,function(O){if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook())||I===tab.ApplicationModel.get_instance().get_workbook().get_sheetType()){this.$d[I].resolve(tab.ObjectRegistry.newView(tab.TabbedPaneView).call(null,[new tab.TabbedPaneViewModel(O)]))}}))}else{J[0].done(ss.mkdel(this,function(O){var P=ss.makeGenericType(tab.PaneView$1,[ss.getInstanceType(O)]);this.$d[I].resolve(tab.ObjectRegistry.newWidget$2(spiff.Widget).call(null,P,[O]))}))}},$b:function(I){this.element.children().detach();if(this.$d[I].state()==='pending'){this.$8(I)}this.$d[I].done(ss.mkdel(this,function(J){if(J.addedToDom){this.element.append(J.element)}else{J.addToDom(this.element)}}))},$7:function(){var I=tab.DateUtil.get_nowAsTime();this.$c=$.Deferred();if(ss.isValue(this.get_viewModel().get_formattingPaneViewModel())&&tab.FormatContainerModel.get_formatPaneModel().get_isVisible()){this.get_viewModel().get_formattingPaneViewModel().done(ss.mkdel(this,function(J){if(ss.isValue(J)){this.$c.resolve(tab.ObjectRegistry.newView(tab.FormatPaneView).call(null,[J]));var K=tab.DateUtil.get_nowAsTime();tab.FormattingTelemetryClient.logPerformanceEvent(ss.mkdict(['PerformanceMetric','OpenWorkbookFormattingPane','ElapsedTime',K-I]))}}))}},$a:function(){this.$9();this.$e=new m(this);KeyboardShortcuts.KeyboardShortcutManager.RegisterShortcut(this.$e);this.disposables.add(ss.mkdel(this,function(){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$e)}))},$9:function(){if(ss.isValue(this.$e)){KeyboardShortcuts.KeyboardShortcutManager.UnregisterShortcut(this.$e);this.$e=null}}});var q=global.tab.MarksContentViewWeb=ss.mkType(a,'tab.MarksContentViewWeb',function(I){tab.MarksContentView.call(this,I,new tab.MarksContentTemplate);this.handleMarksCardTabsChanged()});var r=global.tab.OldSchemaHeaderDrag=ss.mkType(a,'tab.OldSchemaHeaderDrag',function(I,J){this.$0=0;this.$1=null;this.$1=J;this.$0=I},{startDrag:function(I){if(this.$1.get_contextMenuButton().element.is(I.target)){return null}var J;var K;var L;var M;var N=0;var O=0;var P=this.$1.dom.headers[0].height();var Q=P*2;Q+=(this.$1.isSectionVisible(2)?P:0);Q+=(this.$1.isSectionVisible(3)?P:0);if(this.$0===0){J=this.$1.dom.sources;K=this.$1.dom.fieldViewer;L=this.$1.dom.contentArea;M=L.height();N=P;O=Q}else{J=this.$1.dom.sections[this.getPrevFromCurrentSection(this.$0)];K=this.$1.dom.sections[this.$0];L=this.$1.dom.fieldViewer;M=L.height()-Q;N=0;O=0}var R=parseFloat(K.css('flex-grow'));var S=parseFloat(J.css('flex-grow'));var T=R+S;var U=J.height();var V=K.height();var W=I.clientY;return new spiff.MoveDragInstance(K,function(X){if(J.length>0){var Y=X.clientY;var Z=W-Y;var ba;var bb;if(Z+V<O){ba=O/M*100;bb=T-ba}else if(U-Z<N){bb=N/M*100;ba=T-bb}else{var bc=Z/M*100;ba=R+bc;bb=S-bc}K.css('flex-grow',ba.toString());J.css('flex-grow',bb.toString())}},function(X){},null)},acceptsDragType:function(){return 1},getPrevFromCurrentSection:function(I){switch(I){case 1:{return 0}case 2:{return 1}default:{var J=this.$1.get_viewModel().nodeTreeForSection(2);var K=ss.isValue(J)&&J.length>0;return(K?2:1)}}}});var s=global.tab.PillViewWeb=ss.mkType(a,'tab.PillViewWeb',function(I){tab.PillView.call(this,I,new t);this.disposables.add$1(new spiff.HoverBehavior(this,'.tabAuthPillContent',ss.mkdel(this,this.$7),ss.mkdel(this,this.$8)))},{$8:function(I){this.pillStrategy.handlePillExit(I)},$7:function(I){this.pillStrategy.handlePillEnter(I)}});var t=global.tab.PillViewWebTemplate=ss.mkType(a,'tab.PillViewWebTemplate',function(){tab.PillViewTemplate.call(this,"\n<span class='tabAuthShelfPill tabAuthPillDragSource'>\n    <span class='tabAuthPillExternalIcon'></span>\n    <span class='tabAuthPillEncodingType'></span>\n    <span class='tabAuthPillContent'>\n        <div class='tabAuthPillDrillIcon'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillLabel'>{0}</div>\n        <div class='tabAuthPillMenuBtn'><div class='tabAuthHitTarget'></div></div>\n        <div class='tabAuthPillIcons'></div>\n    </span>\n</span>")});var u=global.tab.SchemaHeaderDrag=ss.mkType(a,'tab.SchemaHeaderDrag',function(I){this.$1$1=null;this.$1$2=null;this.$1$3=null;this.$1$4=null;this.$1$5=null;this.$1$6=null;this.$1$7=null;this.$1$8=null;this.set_dragSource(I);EventUtils.DragDropManager.attachDragSource(this.get_dragSource(),this)},{get_debugName:function(){return this.$1$1},set_debugName:function(I){this.$1$1=I},get_dragSource:function(){return this.$1$2},set_dragSource:function(I){this.$1$2=I},get_paneAbove:function(){return this.$1$3},set_paneAbove:function(I){this.$1$3=I},get_paneBelow:function(){return this.$1$4},set_paneBelow:function(I){this.$1$4=I},get_dragBarAbove:function(){return this.$1$5},set_dragBarAbove:function(I){this.$1$5=I},get_dragBarBelow:function(){return this.$1$6},set_dragBarBelow:function(I){this.$1$6=I},get_onDragMove:function(){return this.$1$7},set_onDragMove:function(I){this.$1$7=I},get_onDragComplete:function(){return this.$1$8},set_onDragComplete:function(I){this.$1$8=I},dispose:function(){EventUtils.DragDropManager.removeDragSource(this.get_dragSource());this.set_dragSource(null);this.set_paneAbove(null);this.set_paneBelow(null);this.set_onDragMove(null);this.set_onDragComplete(null)},startDrag:function(I){var J=I.clientY;return new spiff.MoveDragInstance(this.get_dragSource(),ss.mkdel(this,function(K){var L=K.clientY;var M=L-J;if(M<0){this.$4(-M)}else if(M>0){this.$3(M)}J=L;if(!ss.staticEquals(this.get_onDragMove(),null)){this.get_onDragMove()()}}),ss.mkdel(this,function(K){if(!ss.staticEquals(this.get_onDragComplete(),null)){this.get_onDragComplete()()}}),null)},acceptsDragType:function(){return 1},$4:function(I){var J=new b(this.get_paneBelow());var K=this.$0(this.$1());this.$5(I,J,K)},$3:function(I){var J=new b(this.get_paneAbove());var K=this.$0(this.$2());this.$5(I,J,K)},$5:function(I,J,K){if(I===0||J.$4()||ss.isNullOrUndefined(K)){return}var L=K.$2()-K.$7();if(L<1){return}var M=Math.min(I,L);var N=K.$2()+J.$2();var O=K.$0()+J.$0();var P=M/N;var Q=O*P;var R=K.$0()-Q;var S=J.$0()+Q;K.$1(R);J.$1(S)},$0:function(I){var J=_.find(I,function(K){var L=K.height();var M=tab.DoubleUtil.tryParseDouble(K.css('min-height'),0);var N=L-M;return N>1});return(ss.isNullOrUndefined(J)?null:new b(J))},$1:function(){var I=[this.get_paneAbove()];if(ss.isValue(this.get_dragBarAbove())){ss.arrayAddRange(I,this.get_dragBarAbove().$1())}return I},$2:function(){var I=[this.get_paneBelow()];if(ss.isValue(this.get_dragBarBelow())){ss.arrayAddRange(I,this.get_dragBarBelow().$2())}return I}});var v=global.tab.SchemaViewerTemplateWeb=ss.mkType(a,'tab.SchemaViewerTemplateWeb',function(){this.aboveSearchResizeHandle=null;this.sourcesCombo=null;tab.SchemaViewerTemplate.call(this,v.template);this.$1();this.$3();this.$4();this.$2();this.aboveSearchResizeHandle=this.getElementBySelector('.tab-aboveSearchResizeHandle');this.sourcesCombo=this.getElementBySelector('.tab-dataSourcesCombo')},{$1:function(){this.headers[4]=this.getElementBySelector('.tab-schemaPane.tab-schemaCommon .tab-schemaPane-header');this.headers[0]=this.getElementBySelector('.tab-schemaDimensions-Header');this.headers[1]=this.getElementBySelector('.tab-schemaMeasuresHeader');this.headers[2]=this.getElementBySelector('.tab-schemaSetsHeader');this.headers[3]=this.getElementBySelector('.tab-schemaParametersHeader')},$3:function(){this.panes[0]=this.getElementBySelector('.tab-schemaPane.tab-schemaCommon');this.panes[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.panes[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.panes[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.panes[4]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))},$4:function(){this.sections[4]=this.getElementBySelector('#tab-schemaFieldContainers > .tab-schemaSection-content');this.sections[5]=this.getElementBySelector('#tab-schemaCommonDimensions > .tab-schemaSection-content');this.sections[6]=this.getElementBySelector('#tab-schemaCommonMeasures > .tab-schemaSection-content');this.sections[0]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.sections[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.sections[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.sections[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))},$2:function(){this.getElementBySelector('.separatorLabel.dimLabel .separatorLabelText').text(tab.Strings.AuthSchemaViewerHeaderDimensions);this.getElementBySelector('.separatorLabel.measLabel .separatorLabelText').text(tab.Strings.AuthSchemaViewerHeaderMeaures)}});var w=global.tab.SchemaViewerViewWeb=ss.mkType(a,'tab.SchemaViewerViewWeb',function(I){this.$28=null;this.$2a=[];this.$29=null;tab.DataSchemaView.call(this,I,new v);this.$20();var J=this.get_schemaSearch();this.renderSearchBox(J[0]);this.initializeContextMenu(J);this.$21();this.$1J();this.setUpDataPaneEmptySpaceEventListener();if(ss.isValue(this.get_schemaViewerViewModel().get_selectedDataSource())){this.initFromModel()}else{this.layoutSections()}this.$1W();this.get_schemaViewerViewModel().add_selectedDataSourceChanged(ss.mkdel(this,this.$1R));this.disposables.add(ss.mkdel(this,function(){this.get_schemaViewerViewModel().remove_selectedDataSourceChanged(ss.mkdel(this,this.$1R))}));this.disposables.add(ss.mkdel(this,function(){this.$1L()}))},{$27:function(){return this.get_schemaViewerViewModel().get_selectableDataSources().length},$21:function(){this.disposables.add$1(new spiff.HoverBehavior(this,'.tab-schema-field-label-area',ss.mkdel(this,this.$1Q),w.$0));this.disposables.add$1(new spiff.HoverBehavior(this,'.'+'tab-dataSource',ss.mkdel(this,this.$1Q),w.$0));if(tab.FeatureFlags.isEnabled('WebAuthoringChangeDataType')){this.disposables.add$1(new spiff.HoverBehavior(this,'.tab-schema-field-icon',ss.mkdel(this,this.$1Q),w.$0))}},$1J:function(){var I=new spiff.ComboBoxViewModel;I.set_theme(2);I.set_menuTheme(0);this.$29=I;this.$29.add_selectedItemChanged(ss.mkdel(this,this.$1S));this.disposables.add(ss.mkdel(this,this.$1K));tab.ObjectRegistry.newView(spiff.ComboBoxView).call(null,[this.$29]).addToDom(this.dom.sourcesCombo)},$1K:function(){if(ss.isValue(this.$29)){this.$29.remove_selectedItemChanged(ss.mkdel(this,this.$1S));this.$29=tab.MiscUtil.dispose$1(this.$29)}},$1X:function(I){this.$29.set_selectedItem(_.find(this.$29.get_items(),function(J){var K=J.get_data();return ss.referenceEquals(I,K)}))},$1S:function(I){if(ss.isNullOrUndefined(I)){return}var J=I.get_data();if(!ss.referenceEquals(J,this.get_schemaViewerViewModel().get_selectedDataSource())){tab.SchemaClientCommands.setActiveDataSourceName(J.get_name(),false)}},$1V:function(){var I=this.get_schemaViewerViewModel().get_currentSheetSchema();if(ss.isNullOrUndefined(I)){return}var J=I.datasourceIcons;this.$29.clearItems();var K=null;var L=this.$1N();for(var M=0;M<L.length;M++){var N=L[M];var O=new spiff.ComboBoxItem(tab.IconUtils.getDataSourceIcon(J,N),N.get_caption(),N,null,null);this.$29.addItem(O);if(ss.referenceEquals(N,this.get_schemaViewerViewModel().get_selectedDataSource())){K=O}}this.$29.set_selectedItem(K)},$1N:function(){var I=ss.arrayClone(this.get_schemaViewerViewModel().get_selectableDataSources());I.sort(function(J,K){return J.get_caption().toString().localeCompare(K.get_caption().toString())});return I},$1Y:function(){var I=this.get_sources().height();if(I===0){return}var J=w.singleDataSourceTitleDisplayHeight*2-2;if(this.$27()>1&&I<J){this.$23()}else{this.$24();this.scrollSelectedDataSourceIntoView()}this.$1Z()},$23:function(){this.get_sources().addClass('showInCombo')},$24:function(){this.get_sources().removeClass('showInCombo')},scrollSelectedDataSourceIntoView:function(){var I=this.$1M();if(ss.isValue(I)){I.scrollIntoView()}},$1M:function(){var I=this.get_schemaViewerViewModel().get_selectedDataSource();if(ss.isValue(I)){var J=ss.formatString('[title="{0}"]',I.get_caption());var K=this.get_sourceTitles().find(J);if(K.length>0){return K.get(0)}}return null},$1U:function(){this.$1Y()},$1R:function(){if(ss.isValue(this.$29)){this.$1X(this.get_schemaViewerViewModel().get_selectedDataSource())}this.layoutSections()},initFromModel:function(){this.perInitDisposables.dispose();this.initDataSources();this.$1V();this.$1Z();var I=this.shouldExpandTopLevelNodes();var J=false;var K=ss.mkdel(this,function(){tab.SchemaViewerViewModel.sectionsInOrder.forEach(ss.mkdel(this,function(L){if(this.initSection(L,I)){J=true;this.$26(L)}}));if(J){this.layoutSections()}else{this.updateVisibilityOfPanesForViewType()}});this.$25();this.get_schemaViewerViewModel().get_dataSchema().updateWorkbookDataCatalogMetadata(K)},initDataSources:function(){var I=ss.isNullOrUndefined(this.get_dataSourceTitles())||this.get_dataSourceTitles().length===0;tab.DataSchemaView.prototype.initDataSources.call(this);if(I&&this.get_dataSourceTitles().length>0){this.$1W()}window.setTimeout(ss.mkdel(this,this.$1Y),0)},$1Z:function(){this.get_sources().css('max-height',this.$27()*w.singleDataSourceTitleDisplayHeight+2)},layoutSections:function(){this.$20();this.updateVisibilityOfPanesForViewType();this.$22();this.$1Y();this.initTopLevelDragDrop()},$22:function(){this.$1L();var I=ss.isValue(this.get_viewModel().get_selectedDataSource())&&this.get_viewModel().get_selectedDataSource().get_isHierarchical();var J=this.$2a;var K=new u(this.dom.aboveSearchResizeHandle);K.set_debugName('DataSources dragBar');K.set_paneAbove(this.get_sources());K.set_paneBelow((I?this.get_panes()[1]:this.get_panes()[0]));K.set_onDragMove(ss.mkdel(this,this.$1U));J.push(K);if(I){var L=this.$2a[this.$2a.length-1];var M=new u(this.get_headers()[1]);M.set_debugName('Measures dragBar');M.set_paneAbove(L.get_paneBelow());M.set_paneBelow(this.get_sections()[1]);M.set_dragBarAbove(L);M.set_onDragMove(ss.mkdel(this,this.$1U));var N=M;L.set_dragBarBelow(N);this.$2a.push(N)}if(I&&this.isCurrentlyVisible(2)){var O=this.$2a[this.$2a.length-1];var P=new u(this.get_headers()[2]);P.set_debugName('Groups(Sets) dragBar');P.set_paneAbove(O.get_paneBelow());P.set_paneBelow(this.get_sections()[2]);P.set_dragBarAbove(O);P.set_onDragMove(ss.mkdel(this,this.$1U));var Q=P;O.set_dragBarBelow(Q);this.$2a.push(Q)}if(this.isCurrentlyVisible(3)){var R=this.$2a[this.$2a.length-1];var S=new u(this.get_headers()[3]);S.set_debugName('Parameters dragBar');S.set_paneAbove(R.get_paneBelow());S.set_paneBelow(this.get_sections()[3]);S.set_dragBarAbove(R);S.set_onDragMove(ss.mkdel(this,this.$1U));var T=S;R.set_dragBarBelow(T);this.$2a.push(T)}},$1L:function(){this.$2a.forEach(function(I){I.dispose()});ss.clear(this.$2a)},$20:function(){var I=this.get_schemaViewerViewModel().get_currentLayout().showStructure;var J=(ss.isValue(this.get_schemaViewerViewModel().get_selectedDataSource())?this.get_schemaViewerViewModel().get_selectedDataSource().get_measuresHeaderName():tab.Strings.AuthSchemaViewerHeaderMeaures);this.get_headers()[4].text((I?tab.Strings.AuthSchemaViewerHeaderTables:tab.Strings.AuthSchemaViewerHeaderFolders));this.get_headers()[2].text(tab.Strings.AuthSchemaViewerHeaderSets);this.get_headers()[3].text(tab.Strings.AuthSchemaViewerHeaderParameters);this.get_headers()[0].text(tab.Strings.AuthSchemaViewerHeaderDimensions);this.get_headers()[1].text(J)},$1W:function(){var I=this.get_schemaViewerViewModel().getNodeCountForPane(0);var J=this.get_schemaViewerViewModel().getNodeCountForPane(1);var K=this.get_schemaViewerViewModel().getNodeCountForPane(2);var L=this.get_schemaViewerViewModel().getNodeCountForPane(4);var M=this.get_schemaViewerViewModel().getNodeCountForPane(3);var N=I+J+K+L+M;var O=M/N*100;var P=L/N*100;var Q=J/N*100;var R=100-O-P-Q;var S=100-P;if(O<10&&M>0||P<10&&L>0){O=((M>0)?15:0);P=((L>0)?15:0);Q=35;R=100-Q-P-O;S=100-P}this.get_panes()[3].css('flex-grow',O+'');this.get_panes()[4].css('flex-grow',P+'');this.get_panes()[1].css('flex-grow',Q+'');this.get_panes()[2].css('flex-grow',R+'');this.get_panes()[0].css('flex-grow',S+'')},$26:function(I){if(I!==2&&I!==3){return}var J=((I===2)?3:4);var K=((I===2)?15:15);var L=((this.get_schemaViewerViewModel().getNodeCountForPane(J)>0)?K:0);this.get_panes()[J].css('flex-grow',L+'');var M=parseFloat(this.get_panes()[2].css('flex-grow'));var N=parseFloat(this.get_panes()[3].css('flex-grow'));var O=parseFloat(this.get_panes()[4].css('flex-grow'));var P=100-M-N-O;var Q=100-O;this.get_panes()[1].css('flex-grow',P+'');this.get_panes()[0].css('flex-grow',Q+'')},initContent:function(){this.$28={};tab.SchemaViewerViewModel.sectionsInOrder.forEach(ss.mkdel(this,function(I){this.$28[I]=new n}))},getScrollerPaneForSection:function(I){var J=ss.isValue(this.get_viewModel().get_selectedDataSource())&&this.get_viewModel().get_selectedDataSource().get_isHierarchical();if(J){return this.dom.sections[I]}else if(I===3){return this.dom.sections[3]}else{return this.dom.panes[0]}},scrollFieldIntoView:function(I){var J=this.getScrollerPaneForSection(I.schemaSection);var K=tab.DoubleUtil.roundToInt(tab.DomUtil.getPageOffset$1(J).top);var L=tab.DoubleUtil.roundToInt(J.height());var M=this.getScrollTopValueForNode(I,J[0].scrollTop,K,L);if(ss.isValue(M)){J[0].scrollTop=ss.unbox(M)}},$1Q:function(I){if(EventUtils.DragDropManager.get_isDragging()){return}if(tab.FeatureFlags.isEnabled('DescriptionsInheritanceWeb')&&ss.equalsT('tab-schema-field-label-area tabDropTarget',I.currentTarget.getAttribute('class'))){this.loadOnDemandModulesForDescriptionPanel().done(ss.mkdel(this,function(J){this.$1T(I)}))}$(I.currentTarget).addClass('hover')},loadOnDemandModulesForDescriptionPanel:function(){var I=$.Deferred();tab.ModuleManager.load$1(tab.IConnectPanePluginTableauServerFactory).call(null,[]).done(function(J){tab.ModuleManager.load$1(tab.IVizportalWebclientApiFactory).call(null,[]).done(function(K){I.resolve(true)})});return I.promise()},$1T:function(I){var J=I.currentTarget.parentElement;if(ss.isValue(J)&&!ss.isNullOrEmptyString(J.getAttribute('inheriteddescription'))){if(ss.isNullOrUndefined(w.$2)){w.$3=I.currentTarget.appendChild(document.createElement('div'));var K={anchorEl:w.$3,assetParent:{contentType:J.getAttribute('parentcontenttype'),isCertified:/^\s*true\s*$/i.test(J.getAttribute('parentiscertified')),name:J.getAttribute('parentname')},description:J.getAttribute('inheriteddescription'),fieldName:J.getAttribute('fieldname'),inheritedColumnName:J.getAttribute('inheritedcolumnname'),siteLuid:tsConfig.site_luid,tableauVersion:tsConfig.version,telemetryEnvironment:(tsConfig.is_saas?3:2),onClose:function(){return}};w.$2=React.createElement(ConnectPanePluginTableauServer.DescriptionPanel,K);ReactDOM.render(w.$2,w.$3)}}},attachFieldEventHandlers:function(I,J,K,L){tab.DataSchemaView.prototype.attachFieldEventHandlers.call(this,I,J,K,L);if(I.hasContextMenu){K.getMenuClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(M){this.$1P(K)}));K.getLabelClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(M){this.$1P(K)}))}if(tab.FeatureFlags.isEnabled('WebAuthoringChangeDataType')){K.getIconAreaClickHandler(this.perInitDisposables).onClick(ss.mkdel(this,function(M){this.$1O(K)}));K.getIconAreaClickHandler(this.perInitDisposables).onRightClick(ss.mkdel(this,function(M){this.$1O(K)}))}},$1P:function(I){this.get_schemaViewerViewModel().showFieldContextMenu(I.get_node(),I.pill)},$1O:function(I){if(!this.get_schemaViewerViewModel().isSelected(I.get_node())||this.get_schemaViewerViewModel().get_selectedNodes().length===1){}},$25:function(){var I=this.get_schemaViewerViewModel().get_selectedDataSource();var J=this.get_schemaViewerViewModel().get_dataSchema();var K=ss.isValue(J)&&ss.isValue(I)&&ss.isValue(I.get_name())&&ss.isValue(I.get_caption())&&I.get_name()!=='Parameters'&&ss.isNullOrUndefined(J.getMetadataForDatasource(I.get_name()));if(K){J.set_latestDSRequiringMetdataUpdate(new tab.DataSourceNameAndCaption(I.get_name(),I.get_caption()))}}},{$0:function(I){if(tab.FeatureFlags.isEnabled('DescriptionsInheritanceWeb')&&ss.equalsT('tab-schema-field-label-area tabDropTarget hover',I.currentTarget.getAttribute('class'))){var J=I.currentTarget.parentElement;if(ss.isValue(J)&&!ss.isNullOrEmptyString(J.getAttribute('inheriteddescription'))){w.$2=null;if(ss.isValue(w.$3)){ReactDOM.unmountComponentAtNode(w.$3);$(w.$3).remove()}}}$(I.currentTarget).removeClass('hover')}});var x=global.tab.SchemaViewerWebTemplate=ss.mkType(a,'tab.SchemaViewerWebTemplate',function(){this.aboveSearchResizeHandle=null;tab.SchemaViewerTemplate.call(this,x.template);this.$1();this.$2();this.$3();this.aboveSearchResizeHandle=this.getElementBySelector('.tab-aboveSearchResizeHandle')},{$1:function(){this.headers[0]=this.getElementBySelector('.tab-schemaDimensionsHeader');this.headers[1]=this.getElementBySelector('.tab-schemaMeasuresHeader');this.headers[2]=this.getElementBySelector('.tab-schemaSetsHeader');this.headers[3]=this.getElementBySelector('.tab-schemaParametersHeader')},$2:function(){this.panes[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.panes[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.panes[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.panes[4]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))},$3:function(){this.sections[0]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaDimensions'));this.sections[1]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaMeasures'));this.sections[2]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaSets'));this.sections[3]=this.getElementBySelector(ss.formatString('.{0}','tab-schemaParameters'))}});var y=global.tab.ShapePickerViewWeb=ss.mkType(a,'tab.ShapePickerViewWeb',function(I){tab.ShapePickerView.call(this,I,new tab.ShapePickerTemplate);this.updateContent()});var z=global.tab.ShelfScrollTemplate=ss.mkType(a,'tab.ShelfScrollTemplate',function(){this.prev=null;this.next=null;spiff.Template.call(this,$(z.template));this.prev=this.getElementBySelector('.tabAuthShelfScrollPrev');this.next=this.getElementBySelector('.tabAuthShelfScrollNext')});var A=global.tab.ShelfViewWeb=ss.mkType(a,'tab.ShelfViewWeb',function(I){this.$z=null;this.$y=null;this.$x=null;tab.ShelfView.call(this,I,new tab.ShelfCardTemplate);this.$z=new z;this.initFromModel(I)},{get_scrollContainerSize:function(){return((this.shelfViewModel.get_orientation()===0)?tab.DoubleUtil.roundToInt(this.dom.pillHolder.outerHeight()):tab.DoubleUtil.roundToInt(this.dom.pillHolder.outerWidth()))},$w:function(){return((this.shelfViewModel.get_orientation()===0)?this.get_scrollableContentPreferredHeight():this.get_preferredWidth())},$u:function(){return this.get_scroll()>0},$t:function(){return this.get_scroll()<this.$v().max},get_scroll:function(){return((this.shelfViewModel.get_orientation()===0)?tab.DoubleUtil.roundToInt(this.dom.pillHolder.scrollTop()):this.dom.pillHolder.scrollLeft())},set_scroll:function(I){var J=this.$v();var K=Math.min(Math.max(I,J.min),J.max);if(this.shelfViewModel.get_orientation()===0){this.dom.pillHolder.scrollTop(K)}else{this.dom.pillHolder.scrollLeft(K)}this.updateScroller()},$v:function(){var I=this.get_scrollContainerSize();var J=this.$w();var K={};K.max=0;K.min=0;if(J>I){K.max=J-I}return K},onAddedToDom:function(){tab.ShelfView.prototype.onAddedToDom.call(this);this.updateScroller()},dispose:function(){$(window).off(this.get_eventNamespace());this.$z.dispose();tab.ShelfView.prototype.dispose.call(this)},setScrollableContentActualHeight:function(I){tab.ShelfView.prototype.setScrollableContentActualHeight.call(this,I);this.$o();this.updateScroller()},initFromModel:function(I){var J=this.get_scroll();tab.ShelfView.prototype.initFromModel.call(this,I);this.set_scroll(J);this.updateScroller();if(ss.isNullOrUndefined(this.$y)){this.$y=this.$p(this.$z.prev,ss.mkdel(this,this.$s));this.$y.element.html(((I.get_orientation()===0)?'&#9650;':'&#9664;'))}if(ss.isNullOrUndefined(this.$x)){this.$x=this.$p(this.$z.next,ss.mkdel(this,this.$r));this.$x.element.html(((I.get_orientation()===0)?'&#9660;':'&#9654;'))}this.element.append(this.$z.domRoot)},$p:function(I,J){var K=new spiff.Button(I);K.add_click(J);this.disposables.add$1(new tab.CallOnDispose(function(){K.remove_click(J);K.dispose()}));return K},$o:function(){this.set_scroll(0)},updateScroller:function(){var I=this.get_scrollContainerSize();var J=this.$w();if(I<J){this.$y.set_disabled(!this.$u());this.$x.set_disabled(!this.$t());this.element.addClass('hasScroll');this.$z.domRoot.show()}else{this.element.removeClass('hasScroll');this.$z.domRoot.hide()}},handleWindowResize:function(I){tab.ShelfView.prototype.handleWindowResize.call(this,I);this.$o();this.updateScroller()},$r:function(){if(!this.$t()){return}this.$q(true)},$s:function(){if(!this.$u()){return}this.$q(false)},$q:function(I){var J=((this.shelfViewModel.get_orientation()===0)?40:100);var K=J*(I?1:-1);this.set_scroll(this.get_scroll()+K)}});var B=global.tab.ShowMeViewWeb=ss.mkType(a,'tab.ShowMeViewWeb',function(I){tab.ShowMeView.call(this,I);this.initContent()},{attachEventHandlers:function(I,J){J.mouseover(this.$b(I,J));if(this.smViewModel.isCommandEnabled(I)){this.perUpdateDisposables.add$1(spiff.TableauClickHandler.targetAndClick(J[0],this.$a(I)))}},$a:function(I){return ss.mkdel(this,function(){this.smViewModel.applyShowMeCommand(I)})},$b:function(I,J){return ss.mkdel(this,function(){this.setActiveItem(I,J)})}});var C=global.tab.SidebarCollapsedWidget=ss.mkType(a,'tab.SidebarCollapsedWidget',function(I){this.dom=null;this.buttonHeader=null;this.contentArea=null;this.$8=null;this.$7=null;this.$2$1=null;this.$2$2=null;spiff.Widget.call(this,$("<div class='tabAuthSchemaCollapsed'>\n                <div class='tabAuthSchemaCollapsed collapsedItems'>\n                    <div class='collapsedTabButtonContainer'></div>\n                </div>\n            </div>"));this.buttonHeader=this.element.find('.collapsedItems');this.$8=this.buttonHeader.find('.collapsedTabButtonContainer');this.contentArea=this.element.find('.tabAuthSchemaCollapsed');this.$4(I)},{add_expandButtonClicked:function(I){this.$2$1=ss.delegateCombine(this.$2$1,I)},remove_expandButtonClicked:function(I){this.$2$1=ss.delegateRemove(this.$2$1,I)},add_tabButtonClicked:function(I){this.$2$2=ss.delegateCombine(this.$2$2,I)},remove_tabButtonClicked:function(I){this.$2$2=ss.delegateRemove(this.$2$2,I)},get_width:function(){return tab.DoubleUtil.roundToInt(this.element.width())},set_width:function(I){this.element.width(I)},$4:function(I){this.$7=new spiff.IconButton;this.$7.add_click(ss.mkdel(this,this.$6));this.disposables.add$1(new tab.CallOnDispose(ss.mkdel(this,function(){this.$7.remove_click(ss.mkdel(this,this.$6));tab.MiscUtil.dispose$1(this.$7)})));this.$7.setIcon('tabAuthExpandIcon');this.$7.set_hoverTooltipText(tab.Strings.ExpandSchemaPane);this.$7.addClass('tabExpandSidebar');this.$7.element.insertBefore(this.$8);for(var J=0;J<I.length;J++){var K=I[J].get_title();var L=spiff.LabelButton.newTextButton(this.$5(K),K);L.addClass('tabButton');var M=I[J].get_id()+'-'+'tabButton';if(tab.StyleUtil.isValidCssClassName(M)){L.addClass(M)}L.addToDom(this.$8);L.element.css({top:106*(J+1)+'px'});this.disposables.add$1(L)}},$6:function(){if(!ss.staticEquals(this.$2$1,null)){this.$2$1()}},$5:function(I){return ss.mkdel(this,function(){if(!ss.staticEquals(this.$2$2,null)){this.$2$2(I)}})}});var D=global.tab.StepperControlViewWeb=ss.mkType(a,'tab.StepperControlViewWeb',function(I){tab.StepperControlView.call(this,I,new H)});var E=global.tab.StrokeWidthPickerViewWeb=ss.mkType(a,'tab.StrokeWidthPickerViewWeb',function(I){tab.StrokeWidthPickerView.call(this,I)});var F=global.tab.TableCalcDialogViewWeb=ss.mkType(a,'tab.TableCalcDialogViewWeb',function(I){tab.TableCalcDialogView.call(this,I);this.initDom()});var G=global.tab.TableCalcEditorViewWeb=ss.mkType(a,'tab.TableCalcEditorViewWeb',function(I,J){this.$Q=null;tab.TableCalcEditorView.call(this,I,J)},{get_maxVisibleOrderingAddressingItems:function(){return 10},dispose:function(){this.$Q=tab.MiscUtil.dispose$1(this.$Q);ss.makeGenericType(spiff.BaseView$1,[tab.TableCalcEditorViewModel]).prototype.dispose.call(this)},updateOrderingAddressingScroller:function(){if(ss.isNullOrUndefined(this.get_orderingAddressingListView())){return}var I=this.get_viewModel().get_orderingAddressingListVM().get_collection().length>this.get_maxVisibleOrderingAddressingItems();if(I){if(ss.isNullOrUndefined(this.$Q)){this.get_orderingAddressingListView().element.detach();var J=new spiff.ScrollableViewModel.$ctor1(false);J.set_content(this.get_orderingAddressingListView().element[0]);J.set_scrollY(true);this.$Q=J;var K=spiff.ScrollableView.createScrollableView(this.$Q);K.addToDom(this.get_dom().get_specificDimensionsElem());this.get_orderingAddressingListView().useScrollableView(K)}this.updateSpecificDimensionsHeight();this.$Q.triggerRefresh()}else{if(ss.isValue(this.$Q)){this.get_orderingAddressingListView().element.detach();this.$Q=tab.MiscUtil.dispose$1(this.$Q);this.get_orderingAddressingListView().addToDom(this.get_dom().get_specificDimensionsElem());this.get_orderingAddressingListView().set_scrollHandler(null)}this.updateSpecificDimensionsHeight()}}});var H=global.tab.WebStepperControlTemplate=ss.mkType(a,'tab.WebStepperControlTemplate',function(){tab.StepperControlTemplate.call(this,"<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>");this.decrementButton=this.getElementBySelector('.tabDecrementButton');this.incrementButton=this.getElementBySelector('.tabIncrementButton');this.valueText=this.getElementBySelector('.tabStepCountValue')});ss.initClass(b);ss.initClass(c,tab.AccordionHeaderView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AccordionHeaderViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(d,tab.AccordionView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AccordionViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(e,ss.makeGenericType(spiff.BaseView$1,[tab.AuthoringLeftAreaViewModel]),[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringLeftAreaViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(f,spiff.Template,[ss.IDisposable]);ss.initClass(g,tab.AuthoringLeftAreaTemplate,[ss.IDisposable]);ss.initClass(h,tab.AuthoringLeftAreaView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringLeftAreaViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(i,tab.AuthoringTabNavView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.AuthoringTabNavViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(j,tab.AuthoringView,[ss.makeGenericType(tab.IView$1,[tab.AuthoringViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(k,tab.AuthoringWorksheetView,[ss.makeGenericType(tab.IView$1,[tab.AuthoringWorksheetViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(l,tab.CalculationDialogView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.CalculationEditorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(m,KeyboardShortcuts.GlobalKeyboardShortcut,[KeyboardShortcuts.IKeyboardShortcut]);ss.initClass(n,spiff.Template,[ss.IDisposable]);ss.initClass(o,null,[tab.IFloatingLeftPanel]);ss.initClass(p,tab.LeftPanelView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.LeftPanelViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(q,tab.MarksContentView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.MarksContentViewModel]),ss.IDisposable,tab.IAppendableView,tab.IHasScrollableContentHeight]);ss.initClass(r);ss.initClass(s,tab.PillView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.PillViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(t,tab.PillViewTemplate,[ss.IDisposable]);ss.initClass(u,null,[ss.IDisposable]);ss.initClass(v,tab.SchemaViewerTemplate,[ss.IDisposable]);ss.initClass(w,tab.DataSchemaView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.SchemaViewerViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(x,tab.SchemaViewerTemplate,[ss.IDisposable]);ss.initClass(y,tab.ShapePickerView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ShapePickerViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(z,spiff.Template,[ss.IDisposable]);ss.initClass(A,tab.ShelfView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ShelfViewModel]),ss.IDisposable,tab.IAppendableView,tab.IHasScrollableContentHeight]);ss.initClass(B,tab.ShowMeView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.ShowMeViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(C,spiff.Widget,[tab.IWidget,tab.IAppendableView,ss.IDisposable]);ss.initClass(D,tab.StepperControlView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StepperControlViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(E,tab.StrokeWidthPickerView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.StrokeWidthPickerViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(F,tab.TableCalcDialogView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.CompoundTableCalcViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(G,tab.TableCalcEditorView,[tab.IWidget,ss.makeGenericType(tab.IView$1,[tab.TableCalcEditorViewModel]),ss.IDisposable,tab.IAppendableView]);ss.initClass(H,tab.StepperControlTemplate,[ss.IDisposable]);(function(){tab.ObjectRegistry.registerType(tab.AccordionHeaderView,c).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AccordionView,d).call(null)})();(function(){f.htmlTemplate=ss.formatString("<div class='tabAuthLeftViewAreaResizer'></div>")})();(function(){e.$0=200;e.$2=160;e.$1=500})();(function(){g.htmlTemplate=ss.formatString("<div class='tabAuthLeftViewArea{0}'>\n            <div class='tabAuthLeftViewTabbedPanel'></div>\n            <div class='tabAuthLeftViewCollapseButton'></div>\n            <div class='tabAuthLeftViewFloatingPanel'></div>\n        </div>",' '+'statusBar')})();(function(){C.$1="<div class='tabAuthSchemaCollapsed'>\n                <div class='tabAuthSchemaCollapsed collapsedItems'>\n                    <div class='collapsedTabButtonContainer'></div>\n                </div>\n            </div>";C.$0=106;C.$2='tabButton'})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringLeftAreaView,h).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringTabNavView,i).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringView,j).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.AuthoringWorksheetView,k).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.CalculationDialogView,l).call(null)})();(function(){n.$0="<div class='tab-schemaFieldListContent'></div>"})();(function(){tab.ObjectRegistry.registerType(tab.LeftPanelView,p).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.MarksContentView,q).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.PillView,s).call(null)})();(function(){v.template=ss.formatString("\n            <div class='{0}'>\n              <div class='tab-schemaViewerScroll'>\n                <div class='tab-schemaViewerContentArea'>\n                    <div class='tab-schemaHeader tab-schemaDataSourcesHeader'>Data</div>\n                    <div class='tab-connectToData'></div>\n                    <div class='tab-dataSources tab-schemaViewerResizeablePane'>\n                        <div class='tab-dataSourceTitles'></div>\n                        <div class='tab-dataSourcesCombo'></div>\n                    </div>\n                    <div class='tab-schemaViewerFields'>\n                        <div class='tab-aboveSearchResizeHandle'></div>\n                        <div class='tab-schemaSearch'></div>\n                        <div class='tab-schemaPane tab-schemaCommon tab-schemaViewerResizeablePane'>\n                            <div class='tab-schemaPane-header'></div>\n                            <div class='tab-schemaPaneContent'>\n                                <div id='tab-schemaFieldContainers' class='tab-schemaSection'>\n                                    <div class='tab-schemaSection-content'></div>\n                                </div>\n                                <div class='tab-schemaCommonArea'>\n                                    <div id='tab-schemaCommonDimensions' class='tab-schemaSection'>\n                                        <div class='tab-schemaSection-content'></div>\n                                    </div>\n                                    <div class='tab-topLevelColumnSeparator tab-columnSeparator'>\n                                        <div class='separatorLabel dimLabel'><span class='separatorLabelText'>Dimensions</span></div>\n                                        <div class='separatorLine'></div>\n                                        <div class='separatorLabel measLabel'><span class='separatorLabelText'>Measures</span></div>\n                                    </div>\n                                    <div id='tab-schemaCommonMeasures' class='tab-schemaSection'>\n                                        <div class='tab-schemaSection-content'></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class='tab-schemaHeader tab-schemaDimensions-Header'></div>\n                        <div class='{1} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaMeasuresHeader'></div>\n                        <div class='{2} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaSetsHeader'></div>\n                        <div class='{3} tab-schemaViewerResizeablePane'></div>\n                        <div class='tab-schemaHeader tab-schemaParametersHeader'></div>\n                        <div class='{4} tab-schemaViewerResizeablePane'></div>\n                    </div>\n                </div>\n              </div>\n              <div class='tab-schemaDropInviteTop'></div>\n              <div class='tab-schemaDropInviteLeft'></div>\n              <div class='tab-schemaDropInviteBottom'></div>\n              <div class='tab-schemaDropInviteRight'></div>\n            </div>",'tab-schemaViewer','tab-schemaDimensions','tab-schemaMeasures','tab-schemaSets','tab-schemaParameters')})();(function(){w.singleDataSourceTitleDisplayHeight=SharedWidgets.TabStyles.Sizing.RowHeight;w.$3=null;w.$2=null;tab.ObjectRegistry.registerType(tab.DataSchemaView,w).call(null)})();(function(){x.template=ss.formatString("\n            <div class='{0}'>\n              <div class='tab-schemaViewerScroll'>\n                <div class='tab-schemaViewerContentArea'>\n                    <div class='tab-schemaHeader tab-schemaDataSourcesHeader'>Data</div>\n                    <div class='tab-connectToData'></div>\n                    <div class='tab-dataSources'>\n                        <div class='tab-dataSourceTitles'></div>\n                    </div>\n                    <div class='tab-schemaViewerFields'>\n                        <div class='tab-aboveSearchResizeHandle'></div>\n                        <div class='tab-schemaSearch'></div>\n                        <div class='tab-schemaHeader tab-schemaDimensionsHeader'></div>\n                        <div class='{1}'></div>\n                        <div class='tab-schemaHeader tab-schemaMeasuresHeader'></div>\n                        <div class='{2}'></div>\n                        <div class='tab-schemaHeader tab-schemaSetsHeader'>Sets</div>\n                        <div class='{3}'></div>\n                        <div class='tab-schemaHeader tab-schemaParametersHeader'>Parameters</div>\n                        <div class='{4}'></div>\n                    </div>\n                </div>\n              </div>\n              <div class='tab-schemaDropInviteTop'></div>\n              <div class='tab-schemaDropInviteLeft'></div>\n              <div class='tab-schemaDropInviteBottom'></div>\n              <div class='tab-schemaDropInviteRight'></div>\n            </div>",'tab-schemaViewer','tab-schemaDimensions','tab-schemaMeasures','tab-schemaSets','tab-schemaParameters')})();(function(){tab.ObjectRegistry.registerType(tab.ShapePickerView,y).call(null)})();(function(){z.template="<div class='tabAuthShelfScroll'><span class='tabAuthShelfScrollPrev'></span><span class='tabAuthShelfScrollNext'></span></div>"})();(function(){tab.ObjectRegistry.registerType(tab.ShelfView,A).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.ShowMeView,B).call(null)})();(function(){H.template="<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>"})();(function(){tab.ObjectRegistry.registerType(tab.StepperControlView,D).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.StrokeWidthPickerView,E).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.TableCalcDialogView,F).call(null)})();(function(){tab.ObjectRegistry.registerType(tab.TableCalcEditorView,G).call(null)})()})();